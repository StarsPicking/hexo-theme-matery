---
title: docker介绍
author: 张大哥
top: false
cover: false
toc: true
mathjax: false
summary: docker出现的原因和解决的痛点，详细阐述的docker的理念
categories: docker
tags:
  - docker
  - CICD
abbrlink: 28889
date: 2022-07-25 00:25:22
img:
coverImg:
---

# docker 介绍

## docker为什么 会出现

1. 生产流程需要

   > 一款产品从开发到上线，一般都会有开发环境，测试环境，运行环境。如果有一个环境中某个软件或者依赖版本不同了，可能产品就会出现一些错误，甚至无法运行。比如开发人员在windows系统，但是最终要把项目部署到linux。如果存在不支持跨平台的软件，那项目肯定也无法部署成功。
>
   > 这就产生了开发和运维人员之间的矛盾。开发人员在开发环境将代码跑通，但是到了上线的时候就崩了。还要重新检查操作系统，软件，依赖等版本，这大大降低了效率，造成了生产效率低下的问题

2. 繁琐的配置

   > 如果一个产品需要使用mysql集群，redis集群，Haddop集群，或者elasticsearch集群等等，不同的人都要用到这些，那每一个人都要对集群进行配置，如果有一个位置不同就有可能产生重大问题。况且配环境是一个极其繁琐，很需要耐心和细心的。回想一下自己刚学编程的时候，配置环境变量是不是都有可能耗费很长时间，这些集群就更不用说了。

3. docker的出现

   为了解决上述问题，我们自然的想到能否将开发的环境拷贝一份呢？docker给了我们答案

   > 开发人员把环境配置好，将需要运行的程序包运行成功，然后把程序包和环境一起打包给运维人员，让运维人员部署就可以了。这大大提高了项目上线的效率。
>
   > 如果需要配置集群，只需要一人配置好，然后打包发给大家就可以了。

## docker 的理念

>  docker的思想来自于集装箱，集装箱解决了什么问题？在一艘大船上，可以把货物规整的摆放起来。并且各种各样的货物被集装箱标准化了，集装箱和集装箱之间不会影响。此时我们就不需要转么运送水果的船和专门运送化学品的船了。只要将这些货物打包在集装箱里封装好，那么我们就可以用同一艘大船把他们都运走。

docker就是类似的理念。**操作系统相当于大货轮，docker就是集装箱。**

在实际开发中，可能会有如下的问题：

1. 应用程序可能会有不同的应用环境，比如.net和php开发的网站依赖的软件都安装在一个服务器上要调试很久，而且很麻烦，还会造成一些冲突，此时就要隔离两个不同的网站。常规来讲，我们可以在服务器将上创建不同的虚拟机，将应用服务放置在不同的虚拟机中，但是虚拟机开销比较高。docker可以实现虚拟机隔离应用环境的功能，并且开销小

2. 开发用的是centos，运维或者实际部署环境是ubuntu，这时就需要考虑两者的兼容性问题，在整个转移过程中有很多小的细节和很深的坑。这个时候，docker可以直接把开发环境封装打包，在不同的操作系统上运行。
3. 在服务器负载方面，如果你单独开一个虚拟机，那么虚拟机会占用空闲的内存，docker部署的话，这些内存就会利用起来

---



### docker 解决了什么问题

在不同的计算机上有不同的操作系统、不同的库和组件，因此在多台计算机上部署一个APP需要进行大量的配置操作。

Docker主要解决环境配置问题。 这是一种虚拟化技术，隔离进程，隔离进程独立于主机操作系统和其他隔离进程。 使用Docker，开发者无需更改APP代码，无需学习特定环境的技术，即可将现有的APP部署到其他计算机上。

![1658682652885](https://zhangtq-blog.oss-cn-hangzhou.aliyuncs.com/content_picture/1658682652885.png)

----



### docker是什么

Docker是一个开源项目，诞生于2013年初，最初是dotCloud公司内部的一个开源的PAAS服务的业余项目。它是基于Google公司推出的Go语言实现。项目后来加入了Linux基金会，遵从了Apache2.0协议，项目代码在Github上进行维护。 

Docker是基于linux内核的，最早采用的是lxc虚拟化技术，lxc是linux 原生支持的容器化技术，可以提供轻量级的虚拟化，提供了基于lxc的高级封装，在标准的lxc基础上，docker提供了一系列更加强大的功能，而虚拟化技术是基于kvm模块来实现的。到后拉docker改用自己研发的runc技术运行容器，彻底放弃了lxc

相较于虚拟机，docker交付速度更快，资源消耗更低，docker 采用了服务CS架构，使用远程api来管理和创建容器，可以轻松的创建一个轻量级的、可移植的、自给自足的容器

---

### dokcer的三大理念

1. build: 构建镜像，镜像就是集装箱，包含文件以及运行环境等
2. ship: 运输镜像，在宿主机和仓库之间进行传输
3. run：运行镜像，运行的镜像就像是一个容器，容器就是程序运行的地方

### docker 三要素

**镜像**

镜像是用于创建容器的只读模板，通过Docker build命令创建，由镜像层构成，存储FDocker Registry。

Docker镜像是容器的基础，是有序文件系统层以及容器运行时所需参数组成，无状态的Docker，镜像的内容不可更改（只能通过重新打镜像构建新镜像）

**容器**

容器是镜像的运行实例（一个镜像可以创建多个容器，镜像和容器的关系类比Java中的类和对象的关系），应用运行环境的封装,具有轻量级、移植性高等特点。容器由镜像创建,内部封装所有运行应用所需依赖及可执行文件（包括root用户权限、进程空间和网络空间等）。不是模拟一个完整的操作系统，而是对进程进行隔离。没有自己的内核，也没有对硬件虚拟，因此对虚拟机更轻便。每个容器之间相互隔离。

**仓库**

Registry是存储Docker镜像的地方，可自建私有Registry和使用公用Registry如Docker Hub在Registry中，镜像存储在RepositoryDocker Repository是具有相同名字，不同标签的Docker镜像的集合

