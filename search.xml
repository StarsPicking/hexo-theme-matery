<?xml version="1.0" encoding="utf-8"?>
<search> 
  
  
    
    <entry>
      <title>hexo-materyé­”æ”¹</title>
      <link href="/posts/27595.html"/>
      <url>/posts/27595.html</url>
      
        <content type="html"><![CDATA[<h1 id="é­”æ”¹"><a href="#é­”æ”¹" class="headerlink" title="é­”æ”¹"></a>é­”æ”¹</h1><h2 id="ä¿®æ”¹ç½‘ç«™æ•´ä½“é…è‰²"><a href="#ä¿®æ”¹ç½‘ç«™æ•´ä½“é…è‰²" class="headerlink" title="ä¿®æ”¹ç½‘ç«™æ•´ä½“é…è‰²"></a>ä¿®æ”¹ç½‘ç«™æ•´ä½“é…è‰²</h2><ul><li>vi themes&#x2F;hexo-theme-matery&#x2F;source&#x2F;css&#x2F;matery.css ä¿®æ”¹bg-color çš„background-imageå±æ€§æ¥è®¾ç½®é¢œè‰²ï¼Œä¿®æ”¹opacityè®¾ç½®é€æ˜åº¦</li></ul><pre class="line-numbers language-css" data-language="css"><code class="language-css"><span class="token selector">.bg-color</span> <span class="token punctuation">&#123;</span>    <span class="token property">background-image</span><span class="token punctuation">:</span> <span class="token function">linear-gradient</span><span class="token punctuation">(</span>to right<span class="token punctuation">,</span> #ee9ca7 0%<span class="token punctuation">,</span> #ffdde1 100%<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token property">opacity</span><span class="token punctuation">:</span> 0.8<span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre><h2 id="å–æ¶ˆbannerè’™å±‚"><a href="#å–æ¶ˆbannerè’™å±‚" class="headerlink" title="å–æ¶ˆbannerè’™å±‚"></a>å–æ¶ˆbannerè’™å±‚</h2><ul><li>vi themes&#x2F;hexo-theme-matery&#x2F;source&#x2F;css&#x2F;matery.css å°†bg-cover:after æ³¨é‡Š</li></ul><pre class="line-numbers language-css" data-language="css"><code class="language-css"><span class="token comment">/*.bg-cover:after &#123;    -webkit-animation: rainbow 60s infinite;    animation: rainbow 60s infinite;&#125;*/</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre><h2 id="è®¾ç½®ç½‘ç«™èƒŒæ™¯å›¾"><a href="#è®¾ç½®ç½‘ç«™èƒŒæ™¯å›¾" class="headerlink" title="è®¾ç½®ç½‘ç«™èƒŒæ™¯å›¾"></a>è®¾ç½®ç½‘ç«™èƒŒæ™¯å›¾</h2><ul><li>vi themes&#x2F;hexo-theme-matery&#x2F;source&#x2F;css&#x2F;matery.css</li></ul><pre class="line-numbers language-css" data-language="css"><code class="language-css"><span class="token selector">body</span> <span class="token punctuation">&#123;</span>    <span class="token comment">/* background-color: #eaeaea; */</span>    <span class="token property">background</span><span class="token punctuation">:</span> <span class="token function">linear-gradient</span><span class="token punctuation">(</span>60deg<span class="token punctuation">,</span> <span class="token function">rgba</span><span class="token punctuation">(</span>255<span class="token punctuation">,</span> 165<span class="token punctuation">,</span> 150<span class="token punctuation">,</span> 0.5<span class="token punctuation">)</span> 5%<span class="token punctuation">,</span> <span class="token function">rgba</span><span class="token punctuation">(</span>0<span class="token punctuation">,</span> 228<span class="token punctuation">,</span> 255<span class="token punctuation">,</span> 0.35<span class="token punctuation">)</span><span class="token punctuation">)</span> 0% 0% / cover<span class="token punctuation">,</span> <span class="token url"><span class="token function">url</span><span class="token punctuation">(</span><span class="token string url">"https://zhangtq-blog.oss-cn-hangzhou.aliyuncs.com/theme/H21b5f6b8496141a1979a33666e1074d9x.jpg"</span><span class="token punctuation">)</span></span><span class="token punctuation">,</span> <span class="token url"><span class="token function">url</span><span class="token punctuation">(</span><span class="token string url">"https://zhangtq-blog.oss-cn-hangzhou.aliyuncs.com/theme/H21b5f6b8496141a1979a33666e1074d9x.jpg"</span><span class="token punctuation">)</span></span> 0px 0px<span class="token punctuation">;</span>    <span class="token property">background-attachment</span><span class="token punctuation">:</span> fixed<span class="token punctuation">;</span>    <span class="token property">margin</span><span class="token punctuation">:</span> 0<span class="token punctuation">;</span>    <span class="token property">color</span><span class="token punctuation">:</span> #34495e<span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>1.5 é€‚é…ç›®å½•</p><ul><li>å¥½åƒæ²¡æœ‰ç”Ÿæ•ˆ</li></ul><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token function">vi</span> themes/hexo-theme-matery/source/css/post.css<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><pre class="line-numbers language-css" data-language="css"><code class="language-css"><span class="token selector">.toc-widget</span> <span class="token punctuation">&#123;</span>    <span class="token property">width</span><span class="token punctuation">:</span> 345px<span class="token punctuation">;</span>    <span class="token property">padding-left</span><span class="token punctuation">:</span> 20px<span class="token punctuation">;</span>    <span class="token property">background-color</span><span class="token punctuation">:</span> <span class="token function">rgb</span><span class="token punctuation">(</span>255<span class="token punctuation">,</span> 255<span class="token punctuation">,</span> 255<span class="token punctuation">,</span>0.7<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token property">border-radius</span><span class="token punctuation">:</span> 10px<span class="token punctuation">;</span>    <span class="token property">box-shadow</span><span class="token punctuation">:</span> 0 10px 35px 2px <span class="token function">rgba</span><span class="token punctuation">(</span>0<span class="token punctuation">,</span> 0<span class="token punctuation">,</span> 0<span class="token punctuation">,</span> .15<span class="token punctuation">)</span><span class="token punctuation">,</span> 0 5px 15px <span class="token function">rgba</span><span class="token punctuation">(</span>0<span class="token punctuation">,</span> 0<span class="token punctuation">,</span> 0<span class="token punctuation">,</span> .07<span class="token punctuation">)</span><span class="token punctuation">,</span> 0 2px 5px -5px <span class="token function">rgba</span><span class="token punctuation">(</span>0<span class="token punctuation">,</span> 0<span class="token punctuation">,</span> 0<span class="token punctuation">,</span> .1<span class="token punctuation">)</span> <span class="token important">!important</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h2 id="ä¿®æ”¹bannerå›¾"><a href="#ä¿®æ”¹bannerå›¾" class="headerlink" title="ä¿®æ”¹bannerå›¾"></a>ä¿®æ”¹bannerå›¾</h2><ul><li><p>æ–¹å¼ä¸€ï¼šbannerè½®æ’­</p><ul><li>åœ¨hexo-theme-matery._configä¸­é…ç½®featureImages</li></ul><pre class="line-numbers language-yaml" data-language="yaml"><code class="language-yaml"><span class="token key atrule">featureImages</span><span class="token punctuation">:</span><span class="token punctuation">-</span> https<span class="token punctuation">:</span>//zhangtq<span class="token punctuation">-</span>blog.oss<span class="token punctuation">-</span>cn<span class="token punctuation">-</span>hangzhou.aliyuncs.com/theme/cover17.jpg<span class="token punctuation">-</span> https<span class="token punctuation">:</span>//zhangtq<span class="token punctuation">-</span>blog.oss<span class="token punctuation">-</span>cn<span class="token punctuation">-</span>hangzhou.aliyuncs.com/theme/cover18.jpg<span class="token punctuation">-</span> https<span class="token punctuation">:</span>//zhangtq<span class="token punctuation">-</span>blog.oss<span class="token punctuation">-</span>cn<span class="token punctuation">-</span>hangzhou.aliyuncs.com/theme/cover19.jpg<span class="token punctuation">-</span> https<span class="token punctuation">:</span>//zhangtq<span class="token punctuation">-</span>blog.oss<span class="token punctuation">-</span>cn<span class="token punctuation">-</span>hangzhou.aliyuncs.com/theme/cover20.jpg<span class="token punctuation">-</span> https<span class="token punctuation">:</span>//zhangtq<span class="token punctuation">-</span>blog.oss<span class="token punctuation">-</span>cn<span class="token punctuation">-</span>hangzhou.aliyuncs.com/theme/cover21.jpg<span class="token punctuation">-</span> https<span class="token punctuation">:</span>//zhangtq<span class="token punctuation">-</span>blog.oss<span class="token punctuation">-</span>cn<span class="token punctuation">-</span>hangzhou.aliyuncs.com/theme/cover22.jpg<span class="token punctuation">-</span> https<span class="token punctuation">:</span>//zhangtq<span class="token punctuation">-</span>blog.oss<span class="token punctuation">-</span>cn<span class="token punctuation">-</span>hangzhou.aliyuncs.com/theme/cover23.jpg<span class="token punctuation">-</span> https<span class="token punctuation">:</span>//zhangtq<span class="token punctuation">-</span>blog.oss<span class="token punctuation">-</span>cn<span class="token punctuation">-</span>hangzhou.aliyuncs.com/theme/cover24.jpg<span class="token punctuation">-</span> https<span class="token punctuation">:</span>//zhangtq<span class="token punctuation">-</span>blog.oss<span class="token punctuation">-</span>cn<span class="token punctuation">-</span>hangzhou.aliyuncs.com/theme/cover25.jpg<span class="token punctuation">-</span> https<span class="token punctuation">:</span>//zhangtq<span class="token punctuation">-</span>blog.oss<span class="token punctuation">-</span>cn<span class="token punctuation">-</span>hangzhou.aliyuncs.com/theme/cover26.jpg<span class="token punctuation">-</span> https<span class="token punctuation">:</span>//zhangtq<span class="token punctuation">-</span>blog.oss<span class="token punctuation">-</span>cn<span class="token punctuation">-</span>hangzhou.aliyuncs.com/theme/cover27.jpg<span class="token punctuation">-</span> https<span class="token punctuation">:</span>//zhangtq<span class="token punctuation">-</span>blog.oss<span class="token punctuation">-</span>cn<span class="token punctuation">-</span>hangzhou.aliyuncs.com/theme/cover28.jpg<span class="token punctuation">-</span> https<span class="token punctuation">:</span>//zhangtq<span class="token punctuation">-</span>blog.oss<span class="token punctuation">-</span>cn<span class="token punctuation">-</span>hangzhou.aliyuncs.com/theme/cover29.jpg<span class="token punctuation">-</span> https<span class="token punctuation">:</span>//zhangtq<span class="token punctuation">-</span>blog.oss<span class="token punctuation">-</span>cn<span class="token punctuation">-</span>hangzhou.aliyuncs.com/theme/cover30.jpg<span class="token punctuation">-</span> https<span class="token punctuation">:</span>//zhangtq<span class="token punctuation">-</span>blog.oss<span class="token punctuation">-</span>cn<span class="token punctuation">-</span>hangzhou.aliyuncs.com/theme/cover31.jpg<span class="token punctuation">-</span> https<span class="token punctuation">:</span>//zhangtq<span class="token punctuation">-</span>blog.oss<span class="token punctuation">-</span>cn<span class="token punctuation">-</span>hangzhou.aliyuncs.com/theme/cover32.jpg<span class="token punctuation">-</span> https<span class="token punctuation">:</span>//zhangtq<span class="token punctuation">-</span>blog.oss<span class="token punctuation">-</span>cn<span class="token punctuation">-</span>hangzhou.aliyuncs.com/theme/cover33.jpg<span class="token punctuation">-</span> https<span class="token punctuation">:</span>//zhangtq<span class="token punctuation">-</span>blog.oss<span class="token punctuation">-</span>cn<span class="token punctuation">-</span>hangzhou.aliyuncs.com/theme/cover34.jpg<span class="token punctuation">-</span> https<span class="token punctuation">:</span>//zhangtq<span class="token punctuation">-</span>blog.oss<span class="token punctuation">-</span>cn<span class="token punctuation">-</span>hangzhou.aliyuncs.com/theme/cover35.jpg<span class="token punctuation">-</span> https<span class="token punctuation">:</span>//zhangtq<span class="token punctuation">-</span>blog.oss<span class="token punctuation">-</span>cn<span class="token punctuation">-</span>hangzhou.aliyuncs.com/theme/cover36.jpg<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><ul><li>vi themes&#x2F;hexo-theme-matery&#x2F;layout&#x2F;_partial&#x2F;bg-cover-content.ejs</li></ul><pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token operator">&lt;</span>script<span class="token operator">></span>    <span class="token comment">// æ¯å¤©åˆ‡æ¢ banner å›¾.  Switch banner image every day.</span>    <span class="token comment">//var bannerUrl = "&lt;%- theme.jsDelivr.url %>&lt;%- url_for('/medias/banner/') %>" + new Date().getDay() + '.jpg';</span>    <span class="token comment">//$('.bg-cover').css('background-image', 'url(' + bannerUrl + ')');</span>    <span class="token comment">// éšæœºé€‰æ‹©é…ç½®æ–‡ä»¶ä¸­featureImagesé…ç½®çš„å›¾ç‰‡</span>    <span class="token function">$</span><span class="token punctuation">(</span><span class="token string">'.bg-cover'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">css</span><span class="token punctuation">(</span><span class="token string">'background-image'</span><span class="token punctuation">,</span> <span class="token string">'url(&lt;%- theme.featureImages[Math.floor(Math.random() * theme.featureImages.length + 1)-1] %>)'</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token operator">&lt;</span><span class="token operator">/</span>script<span class="token operator">></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></li><li><p>æ–¹å¼äºŒï¼šè®¾ç½®ä¸ºå¤–éƒ¨é“¾æ¥å›¾ç‰‡</p></li><li><p>vi themes&#x2F;hexo-theme-matery&#x2F;layout&#x2F;_partial&#x2F;bg-cover-content.ejs</p></li></ul><pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token operator">&lt;</span>script<span class="token operator">></span>    <span class="token comment">// æ¯å¤©åˆ‡æ¢ banner å›¾.  Switch banner image every day.</span>    <span class="token comment">//var bannerUrl = "&lt;%- theme.jsDelivr.url %>&lt;%- url_for('/medias/banner/') %>" + new Date().getDay() + '.jpg';</span>    <span class="token comment">//$('.bg-cover').css('background-image', 'url(' + bannerUrl + ')');</span>    <span class="token comment">// éšæœºé€‰æ‹©é…ç½®æ–‡ä»¶ä¸­featureImagesé…ç½®çš„å›¾ç‰‡</span>    <span class="token comment">//$('.bg-cover').css('background-image', 'url(&lt;%- theme.featureImages[Math.floor(Math.random() * theme.featureImages.length + 1)-1] %>)');</span>    <span class="token comment">//å›ºå®šä¸€å¼ å›¾ç‰‡</span>    <span class="token function">$</span><span class="token punctuation">(</span><span class="token string">'.bg-cover'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">css</span><span class="token punctuation">(</span><span class="token string">'background-image'</span><span class="token punctuation">,</span> <span class="token string">'url(https://zhangtq-blog.oss-cn-hangzhou.aliyuncs.com/theme/cover3.jpg)'</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token operator">&lt;</span><span class="token operator">/</span>script<span class="token operator">></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h2 id="ä¼˜åŒ–èƒŒæ™¯å£çº¸å’Œç›®å½•æ "><a href="#ä¼˜åŒ–èƒŒæ™¯å£çº¸å’Œç›®å½•æ " class="headerlink" title="ä¼˜åŒ–èƒŒæ™¯å£çº¸å’Œç›®å½•æ "></a>ä¼˜åŒ–èƒŒæ™¯å£çº¸å’Œç›®å½•æ </h2><ul><li>vi themes&#x2F;hexo-theme-matery&#x2F;source&#x2F;css&#x2F;matery.css</li></ul><pre class="line-numbers language-css" data-language="css"><code class="language-css"><span class="token selector">body</span> <span class="token punctuation">&#123;</span>    <span class="token comment">/* background-color: #eaeaea; */</span>    <span class="token property">background</span><span class="token punctuation">:</span> <span class="token function">linear-gradient</span><span class="token punctuation">(</span>60deg<span class="token punctuation">,</span> <span class="token function">rgba</span><span class="token punctuation">(</span>255<span class="token punctuation">,</span> 165<span class="token punctuation">,</span> 150<span class="token punctuation">,</span> 0.5<span class="token punctuation">)</span> 5%<span class="token punctuation">,</span> <span class="token function">rgba</span><span class="token punctuation">(</span>0<span class="token punctuation">,</span> 228<span class="token punctuation">,</span> 255<span class="token punctuation">,</span> 0.35<span class="token punctuation">)</span><span class="token punctuation">)</span> 0% 0% / cover<span class="token punctuation">,</span> <span class="token url"><span class="token function">url</span><span class="token punctuation">(</span><span class="token string url">"https://zhangtq-blog.oss-cn-hangzhou.aliyuncs.com/theme/%E8%83%8C%E6%99%AF%E9%80%8F%E6%98%8E%E5%9B%BE%E7%89%87.png"</span><span class="token punctuation">)</span></span><span class="token punctuation">,</span> <span class="token url"><span class="token function">url</span><span class="token punctuation">(</span><span class="token string url">"https://zhangtq-blog.oss-cn-hangzhou.aliyuncs.com/theme/H21b5f6b8496141a1979a33666e1074d9x.jpg"</span><span class="token punctuation">)</span></span> 0px 0px<span class="token punctuation">;</span>    <span class="token property">background-attachment</span><span class="token punctuation">:</span> fixed<span class="token punctuation">;</span>    <span class="token property">margin</span><span class="token punctuation">:</span> 0<span class="token punctuation">;</span>    <span class="token property">color</span><span class="token punctuation">:</span> #34495e<span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h2 id="ä¿®æ”¹é¡µè„šè®¿é—®é‡ç­‰ä¿¡æ¯"><a href="#ä¿®æ”¹é¡µè„šè®¿é—®é‡ç­‰ä¿¡æ¯" class="headerlink" title="ä¿®æ”¹é¡µè„šè®¿é—®é‡ç­‰ä¿¡æ¯"></a>ä¿®æ”¹é¡µè„šè®¿é—®é‡ç­‰ä¿¡æ¯</h2><ul><li><p>vi themes&#x2F;hexo-theme-matery&#x2F;layout&#x2F;_partial&#x2F;footer.ejs</p></li><li><p>å¢åŠ å»ºç«™æ—¶é—´</p></li></ul><pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token operator">&lt;</span>script language<span class="token operator">=</span>javascript<span class="token operator">></span>    <span class="token keyword">function</span> <span class="token function">siteTime</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        window<span class="token punctuation">.</span><span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token string">"siteTime()"</span><span class="token punctuation">,</span> <span class="token number">1000</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">var</span> seconds <span class="token operator">=</span> <span class="token number">1000</span><span class="token punctuation">;</span>        <span class="token keyword">var</span> minutes <span class="token operator">=</span> seconds <span class="token operator">*</span> <span class="token number">60</span><span class="token punctuation">;</span>        <span class="token keyword">var</span> hours <span class="token operator">=</span> minutes <span class="token operator">*</span> <span class="token number">60</span><span class="token punctuation">;</span>        <span class="token keyword">var</span> days <span class="token operator">=</span> hours <span class="token operator">*</span> <span class="token number">24</span><span class="token punctuation">;</span>        <span class="token keyword">var</span> years <span class="token operator">=</span> days <span class="token operator">*</span> <span class="token number">365</span><span class="token punctuation">;</span>        <span class="token keyword">var</span> today <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Date</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">var</span> todayYear <span class="token operator">=</span> today<span class="token punctuation">.</span><span class="token function">getFullYear</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">var</span> todayMonth <span class="token operator">=</span> today<span class="token punctuation">.</span><span class="token function">getMonth</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">;</span>        <span class="token keyword">var</span> todayDate <span class="token operator">=</span> today<span class="token punctuation">.</span><span class="token function">getDate</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">var</span> todayHour <span class="token operator">=</span> today<span class="token punctuation">.</span><span class="token function">getHours</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">var</span> todayMinute <span class="token operator">=</span> today<span class="token punctuation">.</span><span class="token function">getMinutes</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">var</span> todaySecond <span class="token operator">=</span> today<span class="token punctuation">.</span><span class="token function">getSeconds</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token comment">/* Date.UTC() -- è¿”å›dateå¯¹è±¡è·ä¸–ç•Œæ ‡å‡†æ—¶é—´(UTC)1970å¹´1æœˆ1æ—¥åˆå¤œä¹‹é—´çš„æ¯«ç§’æ•°(æ—¶é—´æˆ³)        year - ä½œä¸ºdateå¯¹è±¡çš„å¹´ä»½ï¼Œä¸º4ä½å¹´ä»½å€¼        month - 0-11ä¹‹é—´çš„æ•´æ•°ï¼Œåšä¸ºdateå¯¹è±¡çš„æœˆä»½        day - 1-31ä¹‹é—´çš„æ•´æ•°ï¼Œåšä¸ºdateå¯¹è±¡çš„å¤©æ•°        hours - 0(åˆå¤œ24ç‚¹)-23ä¹‹é—´çš„æ•´æ•°ï¼Œåšä¸ºdateå¯¹è±¡çš„å°æ—¶æ•°        minutes - 0-59ä¹‹é—´çš„æ•´æ•°ï¼Œåšä¸ºdateå¯¹è±¡çš„åˆ†é’Ÿæ•°        seconds - 0-59ä¹‹é—´çš„æ•´æ•°ï¼Œåšä¸ºdateå¯¹è±¡çš„ç§’æ•°        microseconds - 0-999ä¹‹é—´çš„æ•´æ•°ï¼Œåšä¸ºdateå¯¹è±¡çš„æ¯«ç§’æ•° */</span>        <span class="token keyword">var</span> t1 <span class="token operator">=</span> Date<span class="token punctuation">.</span><span class="token constant">UTC</span><span class="token punctuation">(</span><span class="token number">2017</span><span class="token punctuation">,</span> <span class="token number">09</span><span class="token punctuation">,</span> <span class="token number">11</span><span class="token punctuation">,</span> <span class="token number">00</span><span class="token punctuation">,</span> <span class="token number">00</span><span class="token punctuation">,</span> <span class="token number">00</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//åŒ—äº¬æ—¶é—´2018-2-13 00:00:00</span>        <span class="token keyword">var</span> t2 <span class="token operator">=</span> Date<span class="token punctuation">.</span><span class="token constant">UTC</span><span class="token punctuation">(</span>todayYear<span class="token punctuation">,</span> todayMonth<span class="token punctuation">,</span> todayDate<span class="token punctuation">,</span> todayHour<span class="token punctuation">,</span> todayMinute<span class="token punctuation">,</span> todaySecond<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">var</span> diff <span class="token operator">=</span> t2 <span class="token operator">-</span> t1<span class="token punctuation">;</span>        <span class="token keyword">var</span> diffYears <span class="token operator">=</span> Math<span class="token punctuation">.</span><span class="token function">floor</span><span class="token punctuation">(</span>diff <span class="token operator">/</span> years<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">var</span> diffDays <span class="token operator">=</span> Math<span class="token punctuation">.</span><span class="token function">floor</span><span class="token punctuation">(</span><span class="token punctuation">(</span>diff <span class="token operator">/</span> days<span class="token punctuation">)</span> <span class="token operator">-</span> diffYears <span class="token operator">*</span> <span class="token number">365</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">var</span> diffHours <span class="token operator">=</span> Math<span class="token punctuation">.</span><span class="token function">floor</span><span class="token punctuation">(</span><span class="token punctuation">(</span>diff <span class="token operator">-</span> <span class="token punctuation">(</span>diffYears <span class="token operator">*</span> <span class="token number">365</span> <span class="token operator">+</span> diffDays<span class="token punctuation">)</span> <span class="token operator">*</span> days<span class="token punctuation">)</span> <span class="token operator">/</span> hours<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">var</span> diffMinutes <span class="token operator">=</span> Math<span class="token punctuation">.</span><span class="token function">floor</span><span class="token punctuation">(</span><span class="token punctuation">(</span>diff <span class="token operator">-</span> <span class="token punctuation">(</span>diffYears <span class="token operator">*</span> <span class="token number">365</span> <span class="token operator">+</span> diffDays<span class="token punctuation">)</span> <span class="token operator">*</span> days <span class="token operator">-</span> diffHours <span class="token operator">*</span> hours<span class="token punctuation">)</span> <span class="token operator">/</span> minutes<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">var</span> diffSeconds <span class="token operator">=</span> Math<span class="token punctuation">.</span><span class="token function">floor</span><span class="token punctuation">(</span><span class="token punctuation">(</span>diff <span class="token operator">-</span> <span class="token punctuation">(</span>diffYears <span class="token operator">*</span> <span class="token number">365</span> <span class="token operator">+</span> diffDays<span class="token punctuation">)</span> <span class="token operator">*</span> days <span class="token operator">-</span> diffHours <span class="token operator">*</span> hours <span class="token operator">-</span> diffMinutes <span class="token operator">*</span> minutes<span class="token punctuation">)</span> <span class="token operator">/</span> seconds<span class="token punctuation">)</span><span class="token punctuation">;</span>        document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">"sitetime"</span><span class="token punctuation">)</span><span class="token punctuation">.</span>innerHTML <span class="token operator">=</span> <span class="token string">"æœ¬ç«™å·²è¿è¡Œ "</span> <span class="token operator">+</span>diffYears<span class="token operator">+</span><span class="token string">" å¹´ "</span><span class="token operator">+</span>diffDays <span class="token operator">+</span> <span class="token string">" å¤© "</span> <span class="token operator">+</span> diffHours <span class="token operator">+</span> <span class="token string">" å°æ—¶ "</span> <span class="token operator">+</span> diffMinutes <span class="token operator">+</span> <span class="token string">" åˆ†é’Ÿ "</span> <span class="token operator">+</span> diffSeconds <span class="token operator">+</span> <span class="token string">" ç§’"</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span><span class="token comment">/*å› ä¸ºå»ºç«™æ—¶é—´è¿˜æ²¡æœ‰ä¸€å¹´ï¼Œå°±å°†ä¹‹æ³¨é‡Šæ‰äº†ã€‚éœ€è¦çš„å¯ä»¥å–æ¶ˆ*/</span>    <span class="token function">siteTime</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token operator">&lt;</span><span class="token operator">/</span>script<span class="token operator">></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h2 id="æ–°å¢ç¤¾äº¤é“¾æ¥"><a href="#æ–°å¢ç¤¾äº¤é“¾æ¥" class="headerlink" title="æ–°å¢ç¤¾äº¤é“¾æ¥"></a>æ–°å¢ç¤¾äº¤é“¾æ¥</h2><ul><li><p>vi themes&#x2F;hexo-theme-matery&#x2F;layout&#x2F;_partial&#x2F;social-link.ejs</p></li><li><p>æ·»åŠ gité“¾æ¥</p></li></ul><pre class="line-numbers language-ejs" data-language="ejs"><code class="language-ejs"><span class="token ejs language-ejs"><span class="token delimiter punctuation">&lt;%</span><span class="token language-javascript"> <span class="token keyword">if</span> <span class="token punctuation">(</span>theme<span class="token punctuation">.</span>socialLink<span class="token punctuation">.</span>git<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span> </span><span class="token delimiter punctuation">%></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>a</span> <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span><span class="token ejs language-ejs"><span class="token delimiter punctuation">&lt;%=</span><span class="token language-javascript"> theme<span class="token punctuation">.</span>socialLink<span class="token punctuation">.</span>git </span><span class="token delimiter punctuation">%></span></span><span class="token punctuation">"</span></span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>tooltipped<span class="token punctuation">"</span></span> <span class="token attr-name">target</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>_blank<span class="token punctuation">"</span></span> <span class="token attr-name">data-tooltip</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>è®¿é—®æˆ‘çš„Git<span class="token punctuation">"</span></span> <span class="token attr-name">data-position</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>top<span class="token punctuation">"</span></span> <span class="token attr-name">data-delay</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>50<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>i</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>fa-brands fa-gitlab<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>i</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>a</span><span class="token punctuation">></span></span><span class="token ejs language-ejs"><span class="token delimiter punctuation">&lt;%</span><span class="token language-javascript"> <span class="token punctuation">&#125;</span> </span><span class="token delimiter punctuation">%></span></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre><ul><li>å…¶ä¸­å›¾æ ‡ç±»ä¼¼fa-gitlabå¯ä»¥åœ¨[Font Awesome](<a href="https://fontawesome.com/search">Font Awesome</a>)ä¸­æŸ¥æ‰¾</li><li>å¸¸ç”¨å›¾æ ‡å¦‚ä¸‹</li></ul><pre class="line-numbers language-none"><code class="language-none">Facebook: fa-facebookTwitter: fa-twitterGoogle-plus: fa-google-plusLinkedin: fa-linkedinTumblr: fa-tumblrMedium: fa-mediumSlack: fa-slackæ–°æµªå¾®åš: fa-weiboå¾®ä¿¡: fa-wechatQQ: fa-qq<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><ul><li>ç„¶ååœ¨ä¸»é¢˜é…ç½®æ–‡ä»¶ä¸­é…ç½®è‡ªå·±çš„gitåœ°å€</li></ul><pre class="line-numbers language-yaml" data-language="yaml"><code class="language-yaml"><span class="token key atrule">socialLink</span><span class="token punctuation">:</span>  <span class="token key atrule">github</span><span class="token punctuation">:</span>  <span class="token key atrule">git</span><span class="token punctuation">:</span> https<span class="token punctuation">:</span>//gitee.com/better_better  <span class="token key atrule">email</span><span class="token punctuation">:</span> 15652533044@163.com  <span class="token key atrule">facebook</span><span class="token punctuation">:</span> <span class="token comment"># https://www.facebook.com/xxx</span>  <span class="token key atrule">twitter</span><span class="token punctuation">:</span> <span class="token comment"># https://twitter.com/xxx</span>  <span class="token key atrule">qq</span><span class="token punctuation">:</span> <span class="token number">1028354023</span>  <span class="token key atrule">weibo</span><span class="token punctuation">:</span> <span class="token comment"># https://weibo.com/xxx</span>  <span class="token key atrule">zhihu</span><span class="token punctuation">:</span> <span class="token comment"># https://www.zhihu.com/xxx</span>  <span class="token key atrule">rss</span><span class="token punctuation">:</span> <span class="token boolean important">true</span> <span class="token comment"># trueã€false</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h2 id="ä¿®æ”¹æ‰“èµäºŒç»´ç "><a href="#ä¿®æ”¹æ‰“èµäºŒç»´ç " class="headerlink" title="ä¿®æ”¹æ‰“èµäºŒç»´ç "></a>ä¿®æ”¹æ‰“èµäºŒç»´ç </h2><ul><li>åœ¨<strong>ä¸»é¢˜æ–‡ä»¶</strong>çš„ <code>source/medias/reward</code> æ–‡ä»¶ä¸­ï¼Œå¯ä»¥æ›¿æ¢æˆä½ çš„çš„å¾®ä¿¡å’Œæ”¯ä»˜å®çš„æ‰“èµäºŒç»´ç å›¾ç‰‡</li></ul><h2 id="éƒ¨ç½²åˆ°å¤šä¸ªä»“åº“"><a href="#éƒ¨ç½²åˆ°å¤šä¸ªä»“åº“" class="headerlink" title="éƒ¨ç½²åˆ°å¤šä¸ªä»“åº“"></a>éƒ¨ç½²åˆ°å¤šä¸ªä»“åº“</h2><ul><li>åœ¨æ ¹ç›®å½•ä¸‹è®¾ç½®deploy</li></ul><pre class="line-numbers language-yaml" data-language="yaml"><code class="language-yaml"><span class="token key atrule">deploy</span><span class="token punctuation">:</span><span class="token punctuation">-</span> <span class="token key atrule">type</span><span class="token punctuation">:</span> git<span class="token key atrule">repo</span><span class="token punctuation">:</span> https<span class="token punctuation">:</span>//gitee.com/better_better/hexo<span class="token punctuation">-</span>theme<span class="token punctuation">-</span>matery.git<span class="token key atrule">branch</span><span class="token punctuation">:</span> master<span class="token key atrule">ignore_hidden</span><span class="token punctuation">:</span> <span class="token boolean important">false</span><span class="token punctuation">-</span> <span class="token key atrule">type</span><span class="token punctuation">:</span> git<span class="token key atrule">repo</span><span class="token punctuation">:</span> https<span class="token punctuation">:</span>//gitee.com/better_better/hexo<span class="token punctuation">-</span>theme<span class="token punctuation">-</span>matery.git<span class="token key atrule">branch</span><span class="token punctuation">:</span> master<span class="token key atrule">ignore_hidden</span><span class="token punctuation">:</span> <span class="token boolean important">false</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h2 id="æ–‡ç« å­—æ•°ç»Ÿè®¡"><a href="#æ–‡ç« å­—æ•°ç»Ÿè®¡" class="headerlink" title="æ–‡ç« å­—æ•°ç»Ÿè®¡"></a>æ–‡ç« å­—æ•°ç»Ÿè®¡</h2><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token function">npm</span> i <span class="token parameter variable">--save</span> hexo-wordcount<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><ul><li>ä¿®æ”¹æ ¹ç›®å½•ä¸‹çš„_config.yaml</li></ul><pre class="line-numbers language-yaml" data-language="yaml"><code class="language-yaml"><span class="token key atrule">wordCount</span><span class="token punctuation">:</span><span class="token key atrule">enable</span><span class="token punctuation">:</span> <span class="token boolean important">false</span> <span class="token comment"># å°†è¿™ä¸ªå€¼è®¾ç½®ä¸º true å³å¯.</span><span class="token key atrule">postWordCount</span><span class="token punctuation">:</span> <span class="token boolean important">true</span><span class="token key atrule">min2read</span><span class="token punctuation">:</span> <span class="token boolean important">true</span><span class="token key atrule">totalCount</span><span class="token punctuation">:</span> <span class="token boolean important">true</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre><h2 id="æ·»åŠ rssè®¢é˜…"><a href="#æ·»åŠ rssè®¢é˜…" class="headerlink" title="æ·»åŠ rssè®¢é˜…"></a>æ·»åŠ rssè®¢é˜…</h2><ul><li>å®‰è£…æ’ä»¶</li></ul><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token function">npm</span> <span class="token function">install</span> hexo-generator-feed <span class="token parameter variable">--save</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><ul><li>ä¿®æ”¹æ ¹ç›®å½•ä¸‹çš„_config.yaml</li></ul><pre class="line-numbers language-yaml" data-language="yaml"><code class="language-yaml"><span class="token key atrule">feed</span><span class="token punctuation">:</span><span class="token key atrule">type</span><span class="token punctuation">:</span> atom<span class="token key atrule">path</span><span class="token punctuation">:</span> atom.xml<span class="token key atrule">limit</span><span class="token punctuation">:</span> <span class="token number">20</span><span class="token key atrule">hub</span><span class="token punctuation">:</span><span class="token key atrule">content</span><span class="token punctuation">:</span><span class="token key atrule">content_limit</span><span class="token punctuation">:</span> <span class="token number">140</span><span class="token key atrule">content_limit_delim</span><span class="token punctuation">:</span> <span class="token string">' '</span><span class="token key atrule">order_by</span><span class="token punctuation">:</span> <span class="token punctuation">-</span>date<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h2 id="æ·»åŠ åŠ¨æ€æ ‡ç­¾"><a href="#æ·»åŠ åŠ¨æ€æ ‡ç­¾" class="headerlink" title="æ·»åŠ åŠ¨æ€æ ‡ç­¾"></a>æ·»åŠ åŠ¨æ€æ ‡ç­¾</h2><ul><li>vi themes&#x2F;hexo-theme-matery&#x2F;layout&#x2F;layout.ejs</li></ul><pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token operator">&lt;</span>script type<span class="token operator">=</span><span class="token string">"text/javascript"</span><span class="token operator">></span>    <span class="token keyword">var</span> OriginTitile <span class="token operator">=</span> document<span class="token punctuation">.</span>title<span class="token punctuation">,</span>        st<span class="token punctuation">;</span>    document<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">"visibilitychange"</span><span class="token punctuation">,</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        document<span class="token punctuation">.</span>hidden <span class="token operator">?</span> <span class="token punctuation">(</span>document<span class="token punctuation">.</span>title <span class="token operator">=</span> <span class="token string">"çœ‹ä¸è§æˆ‘ğŸ™ˆ~çœ‹ä¸è§æˆ‘ğŸ™ˆ~"</span><span class="token punctuation">,</span> <span class="token function">clearTimeout</span><span class="token punctuation">(</span>st<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token operator">:</span> <span class="token punctuation">(</span>document<span class="token punctuation">.</span>title <span class="token operator">=</span>            <span class="token string">"(à¹‘â€¢Ì€ã…‚â€¢Ì) âœ§è¢«å‘ç°äº†ï½"</span><span class="token punctuation">,</span> st <span class="token operator">=</span> <span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>                document<span class="token punctuation">.</span>title <span class="token operator">=</span> OriginTitile            <span class="token punctuation">&#125;</span><span class="token punctuation">,</span> <span class="token number">3e3</span><span class="token punctuation">)</span><span class="token punctuation">)</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token operator">&lt;</span><span class="token operator">/</span>script<span class="token operator">></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h2 id="æ–°å»ºæ–‡ç« æ¨¡æ¿"><a href="#æ–°å»ºæ–‡ç« æ¨¡æ¿" class="headerlink" title="æ–°å»ºæ–‡ç« æ¨¡æ¿"></a>æ–°å»ºæ–‡ç« æ¨¡æ¿</h2><ul><li>ä¿®æ”¹&#x2F;scaffolds&#x2F;post.mdä¸­çš„å†…å®¹</li></ul><pre class="line-numbers language-json" data-language="json"><code class="language-json">---title<span class="token operator">:</span> <span class="token punctuation">&#123;</span><span class="token punctuation">&#123;</span> title <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span>date<span class="token operator">:</span> <span class="token punctuation">&#123;</span><span class="token punctuation">&#123;</span> date <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span>author<span class="token operator">:</span> img<span class="token operator">:</span> coverImg<span class="token operator">:</span> top<span class="token operator">:</span> <span class="token boolean">false</span>cover<span class="token operator">:</span> <span class="token boolean">false</span>toc<span class="token operator">:</span> <span class="token boolean">true</span>mathjax<span class="token operator">:</span> <span class="token boolean">false</span>password<span class="token operator">:</span>summary<span class="token operator">:</span>tags<span class="token operator">:</span>categories<span class="token operator">:</span>---<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h2 id="æ·»åŠ 404é¡µé¢"><a href="#æ·»åŠ 404é¡µé¢" class="headerlink" title="æ·»åŠ 404é¡µé¢"></a>æ·»åŠ 404é¡µé¢</h2><ul><li>hexo new page 404</li><li>vi .&#x2F;source&#x2F;404&#x2F;404.md æ·»åŠ å¦‚ä¸‹å†…å®¹</li></ul><pre class="line-numbers language-json" data-language="json"><code class="language-json">---title<span class="token operator">:</span> <span class="token number">404</span> Not Foundtoc<span class="token operator">:</span> <span class="token boolean">false</span>comments<span class="token operator">:</span> <span class="token boolean">false</span>layout<span class="token operator">:</span> <span class="token number">404</span>type<span class="token operator">:</span> <span class="token number">404</span>permalink<span class="token operator">:</span> /<span class="token number">404</span>description<span class="token operator">:</span> <span class="token string">"Oopsï½ï¼Œæˆ‘å´©æºƒäº†ï¼æ‰¾ä¸åˆ°ä½ æƒ³è¦çš„é¡µé¢ :("</span>---<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><ul><li>vi themes&#x2F;hexo-theme-matery&#x2F;layout&#x2F;404.ejs æ·»åŠ å¦‚ä¸‹å†…å®¹</li></ul><pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token operator">&lt;</span>style type<span class="token operator">=</span><span class="token string">"text/css"</span><span class="token operator">></span>    <span class="token comment">/* don't remove. */</span>    <span class="token punctuation">.</span>about<span class="token operator">-</span>cover <span class="token punctuation">&#123;</span>        <span class="token literal-property property">height</span><span class="token operator">:</span> <span class="token number">90</span><span class="token punctuation">.</span>2vh<span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span><span class="token operator">&lt;</span><span class="token operator">/</span>style<span class="token operator">></span><span class="token operator">&lt;</span>div <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">"bg-cover pd-header about-cover"</span><span class="token operator">></span>    <span class="token operator">&lt;</span>div <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">"container"</span><span class="token operator">></span>        <span class="token operator">&lt;</span>div <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">"row"</span><span class="token operator">></span>            <span class="token operator">&lt;</span>div <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">"col s10 offset-s1 m8 offset-m2 l8 offset-l2"</span><span class="token operator">></span>                <span class="token operator">&lt;</span>div <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">"brand"</span><span class="token operator">></span>                    <span class="token operator">&lt;</span>div <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">"title center-align"</span><span class="token operator">></span>                        <span class="token number">404</span>                    <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">></span>                    <span class="token operator">&lt;</span>div <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">"description center-align"</span><span class="token operator">></span>                        <span class="token operator">&lt;</span><span class="token operator">%=</span> page<span class="token punctuation">.</span>description <span class="token operator">%</span><span class="token operator">></span>                    <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">></span>                <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">></span>            <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">></span>        <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">></span>    <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">></span><span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">></span><span class="token operator">&lt;</span>script<span class="token operator">></span>    <span class="token comment">// æ¯å¤©åˆ‡æ¢ banner å›¾.  Switch banner image every day.</span>    <span class="token function">$</span><span class="token punctuation">(</span><span class="token string">'.bg-cover'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">css</span><span class="token punctuation">(</span><span class="token string">'background-image'</span><span class="token punctuation">,</span> <span class="token string">'url(https://zhangtq-blog.oss-cn-hangzhou.aliyuncs.com/theme/cover3.jpg)'</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token operator">&lt;</span><span class="token operator">/</span>script<span class="token operator">></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><ul><li>åœ¨nginxçš„configåšå¦‚ä¸‹é…ç½®</li><li>æœ¬ç½‘ç«™åšäº†ç§æœ‰è¯éƒ¨ç½²ï¼Œæ˜¯éƒ¨ç½²åœ¨é˜¿é‡Œäº‘æœåŠ¡å™¨ï¼Œæ‰€ä»¥éœ€è¦éœ€æ”¹é™æ€èµ„æºæœåŠ¡å™¨çš„404æŒ‡å‘</li><li>å¦‚æœæ˜¯æ‰˜ç®¡åœ¨gitee æˆ–è€…githubä¸Šæ˜¾ç¤º404é¡µé¢ï¼Œéœ€è¦åœ¨&#x2F;source&#x2F;ç›®å½•ä¸‹æ–°å»º404.mdæ–‡ä»¶ï¼Œæ–‡ä»¶å†…å®¹å’Œ404.indexå†…å®¹ç›¸åŒï¼Œè¿™æ˜¯å› ä¸ºgiteeæˆ–è€…githubæ‰˜ç®¡æ—¶ï¼Œé™æ€èµ„æºæœåŠ¡å™¨é…ç½®çš„404é¡µé¢æ˜¯åœ¨æ ¹ç›®å½•ä¸‹</li></ul><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">server <span class="token punctuation">&#123;</span>    listen       <span class="token number">81</span><span class="token punctuation">;</span>    server_name  _<span class="token punctuation">;</span>    location / <span class="token punctuation">&#123;</span>        root /home/repository<span class="token punctuation">;</span>        index index.html<span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span>    error_page <span class="token number">404</span> /404.html<span class="token punctuation">;</span>        location <span class="token operator">=</span> /40x.html <span class="token punctuation">&#123;</span>    <span class="token punctuation">&#125;</span>    error_page <span class="token number">500</span> <span class="token number">502</span> <span class="token number">503</span> <span class="token number">504</span> /50x.html<span class="token punctuation">;</span>        location <span class="token operator">=</span> /50x.html <span class="token punctuation">&#123;</span>    <span class="token punctuation">&#125;</span>    location <span class="token operator">=</span> /404.html <span class="token punctuation">&#123;</span>        <span class="token comment"># æ”¾é”™è¯¯é¡µé¢çš„ç›®å½•è·¯å¾„ã€‚</span>        root /home/repository<span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h2 id="å»é™¤bannerä¸Šçš„logo-å’Œå·¦ä¸Šè§’title"><a href="#å»é™¤bannerä¸Šçš„logo-å’Œå·¦ä¸Šè§’title" class="headerlink" title="å»é™¤bannerä¸Šçš„logo å’Œå·¦ä¸Šè§’title"></a>å»é™¤bannerä¸Šçš„logo å’Œå·¦ä¸Šè§’title</h2><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token function">vi</span> themes/hexo-theme-matery/layout/_partial/header.ejs<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token operator">&lt;</span>header <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">"navbar-fixed"</span><span class="token operator">></span>    <span class="token operator">&lt;</span>nav id<span class="token operator">=</span><span class="token string">"headNav"</span> <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">"bg-color nav-transparent"</span><span class="token operator">></span>        <span class="token operator">&lt;</span>div id<span class="token operator">=</span><span class="token string">"navContainer"</span> <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">"nav-wrapper container"</span><span class="token operator">></span>            <span class="token operator">&lt;</span>div <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">"brand-logo"</span><span class="token operator">></span>                <span class="token operator">&lt;</span>a href<span class="token operator">=</span><span class="token string">"&lt;%- url_for() %>"</span> <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">"waves-effect waves-light"</span><span class="token operator">></span>                    <span class="token operator">&lt;</span><span class="token operator">!</span><span class="token operator">--</span> å»æ‰é¦–é¡µbannerä¸Šçš„logoæ˜¾ç¤º<span class="token operator">--</span><span class="token operator">></span>                    <span class="token operator">&lt;</span><span class="token operator">!</span><span class="token operator">--</span> <span class="token operator">&lt;</span><span class="token operator">%</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>theme<span class="token punctuation">.</span>logo <span class="token operator">!==</span> <span class="token keyword">undefined</span> <span class="token operator">&amp;&amp;</span> theme<span class="token punctuation">.</span>logo<span class="token punctuation">.</span>length <span class="token operator">></span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span> <span class="token operator">%</span><span class="token operator">></span>                    <span class="token operator">&lt;</span>img src<span class="token operator">=</span><span class="token string">"&lt;%- theme.jsDelivr.url %>&lt;%- url_for(theme.logo) %>"</span> <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">"logo-img"</span> alt<span class="token operator">=</span><span class="token string">"LOGO"</span><span class="token operator">></span>                    <span class="token operator">&lt;</span><span class="token operator">%</span> <span class="token punctuation">&#125;</span> <span class="token operator">%</span><span class="token operator">></span> <span class="token operator">--</span><span class="token operator">></span>                    <span class="token operator">&lt;</span><span class="token operator">!</span><span class="token operator">--</span> å»æ‰å·¦ä¸Šè§’ç½‘ç«™title<span class="token operator">--</span><span class="token operator">></span>                    <span class="token operator">&lt;</span><span class="token operator">!</span><span class="token operator">--</span> <span class="token operator">&lt;</span>span <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">"logo-span"</span><span class="token operator">></span><span class="token operator">&lt;</span><span class="token operator">%=</span> config<span class="token punctuation">.</span>title <span class="token operator">%</span><span class="token operator">></span><span class="token operator">&lt;</span><span class="token operator">/</span>span<span class="token operator">></span> <span class="token operator">--</span><span class="token operator">></span>                <span class="token operator">&lt;</span><span class="token operator">/</span>a<span class="token operator">></span>            <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">></span>            <span class="token operator">&lt;</span><span class="token operator">%</span><span class="token operator">-</span> <span class="token function">partial</span><span class="token punctuation">(</span><span class="token string">'_partial/navigation'</span><span class="token punctuation">)</span> <span class="token operator">%</span><span class="token operator">></span>        <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">></span>        <span class="token operator">&lt;</span><span class="token operator">%</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>theme<span class="token punctuation">.</span>githubLink <span class="token operator">&amp;&amp;</span> theme<span class="token punctuation">.</span>githubLink<span class="token punctuation">.</span>enable<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span> <span class="token operator">%</span><span class="token operator">></span>            <span class="token operator">&lt;</span><span class="token operator">%</span><span class="token operator">-</span> <span class="token function">partial</span><span class="token punctuation">(</span><span class="token string">'_partial/github-link'</span><span class="token punctuation">)</span> <span class="token operator">%</span><span class="token operator">></span>        <span class="token operator">&lt;</span><span class="token operator">%</span> <span class="token punctuation">&#125;</span> <span class="token operator">%</span><span class="token operator">></span>    <span class="token operator">&lt;</span><span class="token operator">/</span>nav<span class="token operator">></span><span class="token operator">&lt;</span><span class="token operator">/</span>header<span class="token operator">></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h2 id="ä¿®æ”¹å»ºç«™æ—¶é—´ä¸ºåŠ¨æ€å˜åŒ–"><a href="#ä¿®æ”¹å»ºç«™æ—¶é—´ä¸ºåŠ¨æ€å˜åŒ–" class="headerlink" title="ä¿®æ”¹å»ºç«™æ—¶é—´ä¸ºåŠ¨æ€å˜åŒ–"></a>ä¿®æ”¹å»ºç«™æ—¶é—´ä¸ºåŠ¨æ€å˜åŒ–</h2><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token function">vi</span> themes/hexo-theme-matery/layout/_partial/footer.ejs<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript">  <span class="token operator">&lt;</span><span class="token operator">!</span><span class="token operator">--</span> è¿è¡Œå¤©æ•°æé†’<span class="token punctuation">.</span> <span class="token operator">--</span><span class="token operator">></span>  <span class="token operator">&lt;</span><span class="token operator">%</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>theme<span class="token punctuation">.</span>time<span class="token punctuation">.</span>enable<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span> <span class="token operator">%</span><span class="token operator">></span>      <span class="token operator">&lt;</span>span id<span class="token operator">=</span><span class="token string">"sitetime"</span><span class="token operator">></span> Loading <span class="token operator">...</span><span class="token operator">&lt;</span><span class="token operator">/</span>span<span class="token operator">></span><span class="token operator">&lt;</span>span <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">"my-face"</span><span class="token operator">></span>áƒ¦ã‚â—¡â•¹<span class="token punctuation">)</span>ãƒâ™¡<span class="token operator">&lt;</span><span class="token operator">/</span>span<span class="token operator">></span>      <span class="token operator">&lt;</span><span class="token operator">!</span><span class="token operator">--</span> <span class="token operator">&lt;</span>script<span class="token operator">></span>          <span class="token keyword">var</span> <span class="token function-variable function">calcSiteTime</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>              <span class="token keyword">var</span> seconds <span class="token operator">=</span> <span class="token number">1000</span><span class="token punctuation">;</span>              <span class="token keyword">var</span> minutes <span class="token operator">=</span> seconds <span class="token operator">*</span> <span class="token number">60</span><span class="token punctuation">;</span>              <span class="token keyword">var</span> hours <span class="token operator">=</span> minutes <span class="token operator">*</span> <span class="token number">60</span><span class="token punctuation">;</span>              <span class="token keyword">var</span> days <span class="token operator">=</span> hours <span class="token operator">*</span> <span class="token number">24</span><span class="token punctuation">;</span>              <span class="token keyword">var</span> years <span class="token operator">=</span> days <span class="token operator">*</span> <span class="token number">365</span><span class="token punctuation">;</span>              <span class="token keyword">var</span> today <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Date</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>              <span class="token keyword">var</span> startYear <span class="token operator">=</span> <span class="token string">"&lt;%- theme.time.year %>"</span><span class="token punctuation">;</span>              <span class="token keyword">var</span> startMonth <span class="token operator">=</span> <span class="token string">"&lt;%- theme.time.month %>"</span><span class="token punctuation">;</span>              <span class="token keyword">var</span> startDate <span class="token operator">=</span> <span class="token string">"&lt;%- theme.time.date %>"</span><span class="token punctuation">;</span>              <span class="token keyword">var</span> startHour <span class="token operator">=</span> <span class="token string">"&lt;%- theme.time.hour %>"</span><span class="token punctuation">;</span>              <span class="token keyword">var</span> startMinute <span class="token operator">=</span> <span class="token string">"&lt;%- theme.time.minute %>"</span><span class="token punctuation">;</span>              <span class="token keyword">var</span> startSecond <span class="token operator">=</span> <span class="token string">"&lt;%- theme.time.second %>"</span><span class="token punctuation">;</span>              <span class="token keyword">var</span> todayYear <span class="token operator">=</span> today<span class="token punctuation">.</span><span class="token function">getFullYear</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>              <span class="token keyword">var</span> todayMonth <span class="token operator">=</span> today<span class="token punctuation">.</span><span class="token function">getMonth</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">;</span>              <span class="token keyword">var</span> todayDate <span class="token operator">=</span> today<span class="token punctuation">.</span><span class="token function">getDate</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>              <span class="token keyword">var</span> todayHour <span class="token operator">=</span> today<span class="token punctuation">.</span><span class="token function">getHours</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>              <span class="token keyword">var</span> todayMinute <span class="token operator">=</span> today<span class="token punctuation">.</span><span class="token function">getMinutes</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>              <span class="token keyword">var</span> todaySecond <span class="token operator">=</span> today<span class="token punctuation">.</span><span class="token function">getSeconds</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>              <span class="token keyword">var</span> t1 <span class="token operator">=</span> Date<span class="token punctuation">.</span><span class="token constant">UTC</span><span class="token punctuation">(</span>startYear<span class="token punctuation">,</span> startMonth<span class="token punctuation">,</span> startDate<span class="token punctuation">,</span> startHour<span class="token punctuation">,</span> startMinute<span class="token punctuation">,</span> startSecond<span class="token punctuation">)</span><span class="token punctuation">;</span>              <span class="token keyword">var</span> t2 <span class="token operator">=</span> Date<span class="token punctuation">.</span><span class="token constant">UTC</span><span class="token punctuation">(</span>todayYear<span class="token punctuation">,</span> todayMonth<span class="token punctuation">,</span> todayDate<span class="token punctuation">,</span> todayHour<span class="token punctuation">,</span> todayMinute<span class="token punctuation">,</span> todaySecond<span class="token punctuation">)</span><span class="token punctuation">;</span>              <span class="token keyword">var</span> diff <span class="token operator">=</span> t2 <span class="token operator">-</span> t1<span class="token punctuation">;</span>              <span class="token keyword">var</span> diffYears <span class="token operator">=</span> Math<span class="token punctuation">.</span><span class="token function">floor</span><span class="token punctuation">(</span>diff <span class="token operator">/</span> years<span class="token punctuation">)</span><span class="token punctuation">;</span>              <span class="token keyword">var</span> diffDays <span class="token operator">=</span> Math<span class="token punctuation">.</span><span class="token function">floor</span><span class="token punctuation">(</span><span class="token punctuation">(</span>diff <span class="token operator">/</span> days<span class="token punctuation">)</span> <span class="token operator">-</span> diffYears <span class="token operator">*</span> <span class="token number">365</span><span class="token punctuation">)</span><span class="token punctuation">;</span>              <span class="token comment">// åŒºåˆ†æ˜¯å¦æœ‰å¹´ä»½.</span>              <span class="token keyword">var</span> language <span class="token operator">=</span> <span class="token string">'&lt;%- config.language %>'</span><span class="token punctuation">;</span>              <span class="token keyword">if</span> <span class="token punctuation">(</span>startYear <span class="token operator">===</span> <span class="token function">String</span><span class="token punctuation">(</span>todayYear<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>                  document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">"year"</span><span class="token punctuation">)</span><span class="token punctuation">.</span>innerHTML <span class="token operator">=</span> todayYear<span class="token punctuation">;</span>                  <span class="token keyword">var</span> daysTip <span class="token operator">=</span> <span class="token string">'This site has been running for '</span> <span class="token operator">+</span> diffDays <span class="token operator">+</span> <span class="token string">' days'</span><span class="token punctuation">;</span>                  <span class="token keyword">if</span> <span class="token punctuation">(</span>language <span class="token operator">===</span> <span class="token string">'zh-CN'</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>                      daysTip <span class="token operator">=</span> <span class="token string">'æœ¬ç«™å·²è¿è¡Œ '</span> <span class="token operator">+</span> diffDays <span class="token operator">+</span> <span class="token string">' å¤©'</span><span class="token punctuation">;</span>                  <span class="token punctuation">&#125;</span> <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>language <span class="token operator">===</span> <span class="token string">'zh-HK'</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>                      daysTip <span class="token operator">=</span> <span class="token string">'æœ¬ç«™å·²é‹è¡Œ '</span> <span class="token operator">+</span> diffDays <span class="token operator">+</span> <span class="token string">' å¤©'</span><span class="token punctuation">;</span>                  <span class="token punctuation">&#125;</span>                  document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">"sitetime"</span><span class="token punctuation">)</span><span class="token punctuation">.</span>innerHTML <span class="token operator">=</span> daysTip<span class="token punctuation">;</span>              <span class="token punctuation">&#125;</span> <span class="token keyword">else</span> <span class="token punctuation">&#123;</span>                  document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">"year"</span><span class="token punctuation">)</span><span class="token punctuation">.</span>innerHTML <span class="token operator">=</span> startYear <span class="token operator">+</span> <span class="token string">" - "</span> <span class="token operator">+</span> todayYear<span class="token punctuation">;</span>                  <span class="token keyword">var</span> yearsAndDaysTip <span class="token operator">=</span> <span class="token string">'This site has been running for '</span> <span class="token operator">+</span> diffYears <span class="token operator">+</span> <span class="token string">' years and '</span>                      <span class="token operator">+</span> diffDays <span class="token operator">+</span> <span class="token string">' days'</span><span class="token punctuation">;</span>                  <span class="token keyword">if</span> <span class="token punctuation">(</span>language <span class="token operator">===</span> <span class="token string">'zh-CN'</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>                      yearsAndDaysTip <span class="token operator">=</span> <span class="token string">'æœ¬ç«™å·²è¿è¡Œ '</span> <span class="token operator">+</span> diffYears <span class="token operator">+</span> <span class="token string">' å¹´ '</span> <span class="token operator">+</span> diffDays <span class="token operator">+</span> <span class="token string">' å¤©'</span><span class="token punctuation">;</span>                  <span class="token punctuation">&#125;</span> <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>language <span class="token operator">===</span> <span class="token string">'zh-HK'</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>                      yearsAndDaysTip <span class="token operator">=</span> <span class="token string">'æœ¬ç«™å·²é‹è¡Œ '</span> <span class="token operator">+</span> diffYears <span class="token operator">+</span> <span class="token string">' å¹´ '</span> <span class="token operator">+</span> diffDays <span class="token operator">+</span> <span class="token string">' å¤©'</span><span class="token punctuation">;</span>                  <span class="token punctuation">&#125;</span>                  document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">"sitetime"</span><span class="token punctuation">)</span><span class="token punctuation">.</span>innerHTML <span class="token operator">=</span> yearsAndDaysTip<span class="token punctuation">;</span>              <span class="token punctuation">&#125;</span>          <span class="token punctuation">&#125;</span>          <span class="token function">calcSiteTime</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>      <span class="token operator">&lt;</span><span class="token operator">/</span>script<span class="token operator">></span> <span class="token operator">--</span><span class="token operator">></span>      <span class="token operator">&lt;</span>script language<span class="token operator">=</span>javascript<span class="token operator">></span>           <span class="token keyword">function</span> <span class="token function">siteTime</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>               window<span class="token punctuation">.</span><span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token string">"siteTime()"</span><span class="token punctuation">,</span> <span class="token number">1000</span><span class="token punctuation">)</span><span class="token punctuation">;</span>               <span class="token keyword">var</span> seconds <span class="token operator">=</span> <span class="token number">1000</span><span class="token punctuation">;</span> <span class="token keyword">var</span> minutes <span class="token operator">=</span> seconds <span class="token operator">*</span> <span class="token number">60</span><span class="token punctuation">;</span>               <span class="token keyword">var</span> hours <span class="token operator">=</span> minutes <span class="token operator">*</span> <span class="token number">60</span><span class="token punctuation">;</span>               <span class="token keyword">var</span> days <span class="token operator">=</span> hours <span class="token operator">*</span> <span class="token number">24</span><span class="token punctuation">;</span>               <span class="token keyword">var</span> years <span class="token operator">=</span> days <span class="token operator">*</span> <span class="token number">365</span><span class="token punctuation">;</span>               <span class="token keyword">var</span> today <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Date</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>               <span class="token keyword">var</span> todayYear <span class="token operator">=</span> today<span class="token punctuation">.</span><span class="token function">getFullYear</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>               <span class="token keyword">var</span> todayMonth <span class="token operator">=</span> today<span class="token punctuation">.</span><span class="token function">getMonth</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">;</span>               <span class="token keyword">var</span> todayDate <span class="token operator">=</span> today<span class="token punctuation">.</span><span class="token function">getDate</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>               <span class="token keyword">var</span> todayHour <span class="token operator">=</span> today<span class="token punctuation">.</span><span class="token function">getHours</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>               <span class="token keyword">var</span> todayMinute <span class="token operator">=</span> today<span class="token punctuation">.</span><span class="token function">getMinutes</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>               <span class="token keyword">var</span> todaySecond <span class="token operator">=</span> today<span class="token punctuation">.</span><span class="token function">getSeconds</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>               <span class="token comment">/* Date.UTC() -- è¿”å›dateå¯¹è±¡è·ä¸–ç•Œæ ‡å‡†æ—¶é—´(UTC)1970å¹´1æœˆ1æ—¥åˆå¤œä¹‹é—´çš„æ¯«ç§’æ•°(æ—¶é—´æˆ³) year - ä½œä¸ºdateå¯¹è±¡çš„å¹´ä»½ï¼Œä¸º4ä½å¹´ä»½å€¼ month - 0-11ä¹‹é—´çš„æ•´æ•°ï¼Œåšä¸ºdateå¯¹è±¡çš„æœˆä»½ day - 1-31ä¹‹é—´çš„æ•´æ•°ï¼Œåšä¸ºdateå¯¹è±¡çš„å¤©æ•° hours - 0(åˆå¤œ24ç‚¹)-23ä¹‹é—´çš„æ•´æ•°ï¼Œåšä¸ºdateå¯¹è±¡çš„å°æ—¶æ•° minutes - 0-59ä¹‹é—´çš„æ•´æ•°ï¼Œåšä¸ºdateå¯¹è±¡çš„åˆ†é’Ÿæ•° seconds - 0-59ä¹‹é—´çš„æ•´æ•°ï¼Œåšä¸ºdateå¯¹è±¡çš„ç§’æ•° microseconds - 0-999ä¹‹é—´çš„æ•´æ•°ï¼Œåšä¸ºdateå¯¹è±¡çš„æ¯«ç§’æ•° */</span>               <span class="token keyword">var</span> t1 <span class="token operator">=</span> Date<span class="token punctuation">.</span><span class="token constant">UTC</span><span class="token punctuation">(</span><span class="token number">2017</span><span class="token punctuation">,</span> <span class="token number">09</span><span class="token punctuation">,</span> <span class="token number">11</span><span class="token punctuation">,</span> <span class="token number">00</span><span class="token punctuation">,</span> <span class="token number">00</span><span class="token punctuation">,</span> <span class="token number">00</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//åŒ—äº¬æ—¶é—´2018-2-13 00:00:00 </span>              <span class="token keyword">var</span> t2 <span class="token operator">=</span> Date<span class="token punctuation">.</span><span class="token constant">UTC</span><span class="token punctuation">(</span>todayYear<span class="token punctuation">,</span> todayMonth<span class="token punctuation">,</span> todayDate<span class="token punctuation">,</span> todayHour<span class="token punctuation">,</span> todayMinute<span class="token punctuation">,</span> todaySecond<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token keyword">var</span> diff <span class="token operator">=</span> t2 <span class="token operator">-</span> t1<span class="token punctuation">;</span>               <span class="token keyword">var</span> diffYears <span class="token operator">=</span> Math<span class="token punctuation">.</span><span class="token function">floor</span><span class="token punctuation">(</span>diff <span class="token operator">/</span> years<span class="token punctuation">)</span><span class="token punctuation">;</span>               <span class="token keyword">var</span> diffDays <span class="token operator">=</span> Math<span class="token punctuation">.</span><span class="token function">floor</span><span class="token punctuation">(</span><span class="token punctuation">(</span>diff <span class="token operator">/</span> days<span class="token punctuation">)</span> <span class="token operator">-</span> diffYears <span class="token operator">*</span> <span class="token number">365</span><span class="token punctuation">)</span><span class="token punctuation">;</span>               <span class="token keyword">var</span> diffHours <span class="token operator">=</span> Math<span class="token punctuation">.</span><span class="token function">floor</span><span class="token punctuation">(</span><span class="token punctuation">(</span>diff <span class="token operator">-</span> <span class="token punctuation">(</span>diffYears <span class="token operator">*</span> <span class="token number">365</span> <span class="token operator">+</span> diffDays<span class="token punctuation">)</span> <span class="token operator">*</span> days<span class="token punctuation">)</span> <span class="token operator">/</span> hours<span class="token punctuation">)</span><span class="token punctuation">;</span>              <span class="token keyword">var</span> diffMinutes <span class="token operator">=</span> Math<span class="token punctuation">.</span><span class="token function">floor</span><span class="token punctuation">(</span><span class="token punctuation">(</span>diff <span class="token operator">-</span> <span class="token punctuation">(</span>diffYears <span class="token operator">*</span> <span class="token number">365</span> <span class="token operator">+</span> diffDays<span class="token punctuation">)</span> <span class="token operator">*</span> days <span class="token operator">-</span> diffHours <span class="token operator">*</span> hours<span class="token punctuation">)</span> <span class="token operator">/</span> minutes<span class="token punctuation">)</span><span class="token punctuation">;</span>               <span class="token keyword">var</span> diffSeconds <span class="token operator">=</span> Math<span class="token punctuation">.</span><span class="token function">floor</span><span class="token punctuation">(</span><span class="token punctuation">(</span>diff <span class="token operator">-</span> <span class="token punctuation">(</span>diffYears <span class="token operator">*</span> <span class="token number">365</span> <span class="token operator">+</span> diffDays<span class="token punctuation">)</span> <span class="token operator">*</span> days <span class="token operator">-</span>diffHours <span class="token operator">*</span> hours <span class="token operator">-</span> diffMinutes <span class="token operator">*</span> minutes<span class="token punctuation">)</span> <span class="token operator">/</span> seconds<span class="token punctuation">)</span><span class="token punctuation">;</span>              document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">"sitetime"</span><span class="token punctuation">)</span><span class="token punctuation">.</span>innerHTML <span class="token operator">=</span> <span class="token string">"æœ¬ç«™å·²è¿è¡Œ "</span> <span class="token operator">+</span>diffYears<span class="token operator">+</span><span class="token string">" å¹´ "</span><span class="token operator">+</span>diffDays <span class="token operator">+</span> <span class="token string">" å¤© "</span> <span class="token operator">+</span> diffHours <span class="token operator">+</span> <span class="token string">" å°æ—¶ "</span> <span class="token operator">+</span> diffMinutes <span class="token operator">+</span> <span class="token string">" åˆ†é’Ÿ "</span> <span class="token operator">+</span> diffSeconds <span class="token operator">+</span> <span class="token string">" ç§’"</span><span class="token punctuation">;</span>          <span class="token punctuation">&#125;</span> <span class="token comment">/*å› ä¸ºå»ºç«™æ—¶é—´è¿˜æ²¡æœ‰ä¸€å¹´ï¼Œå°±å°†ä¹‹æ³¨é‡Šæ‰äº†ã€‚éœ€è¦çš„å¯ä»¥å–æ¶ˆ*/</span>           <span class="token function">siteTime</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>       <span class="token operator">&lt;</span><span class="token operator">/</span>script<span class="token operator">></span>  <span class="token operator">&lt;</span><span class="token operator">%</span> <span class="token punctuation">&#125;</span> <span class="token operator">%</span><span class="token operator">></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h2 id="åœç®—å­"><a href="#åœç®—å­" class="headerlink" title="åœç®—å­"></a>åœç®—å­</h2><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token function">vi</span> themes/hexo-theme-matery/layout/_partial/footer.ejs<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><ul><li>åœ¨æ‰“å¼€æ–‡ä»¶çš„ä¸­æ›¿æ¢åŸæ¥çš„å†…å®¹ä¸ºä»¥ä¸‹å†…å®¹</li></ul><pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token operator">&lt;</span><span class="token operator">%</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>theme<span class="token punctuation">.</span>busuanziStatistics <span class="token operator">&amp;&amp;</span> theme<span class="token punctuation">.</span>busuanziStatistics<span class="token punctuation">.</span>totalTraffic<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span> <span class="token operator">%</span><span class="token operator">></span>    <span class="token operator">&lt;</span>span id<span class="token operator">=</span><span class="token string">"busuanzi_container_site_pv"</span> style<span class="token operator">=</span><span class="token string">'display:none'</span><span class="token operator">></span>        <span class="token operator">&lt;</span>i <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">"fa fa-heart-o"</span><span class="token operator">></span><span class="token operator">&lt;</span><span class="token operator">/</span>i<span class="token operator">></span>        æœ¬ç«™æ€»è®¿é—®é‡ <span class="token operator">&lt;</span>span id<span class="token operator">=</span><span class="token string">"busuanzi_value_site_pv"</span> <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">"white-color"</span><span class="token operator">></span><span class="token operator">&lt;</span><span class="token operator">/</span>span<span class="token operator">></span>    <span class="token operator">&lt;</span><span class="token operator">/</span>span<span class="token operator">></span><span class="token operator">&lt;</span><span class="token operator">%</span> <span class="token punctuation">&#125;</span> <span class="token operator">%</span><span class="token operator">></span><span class="token operator">&lt;</span><span class="token operator">%</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>theme<span class="token punctuation">.</span>busuanziStatistics <span class="token operator">&amp;&amp;</span> theme<span class="token punctuation">.</span>busuanziStatistics<span class="token punctuation">.</span>totalNumberOfvisitors<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span> <span class="token operator">%</span><span class="token operator">></span>    <span class="token operator">&lt;</span>span id<span class="token operator">=</span><span class="token string">"busuanzi_container_site_uv"</span> style<span class="token operator">=</span><span class="token string">'display:none'</span><span class="token operator">></span>        äººæ¬¡<span class="token punctuation">,</span><span class="token operator">&amp;</span>nbsp<span class="token punctuation">;</span>è®¿å®¢æ•° <span class="token operator">&lt;</span>span id<span class="token operator">=</span><span class="token string">"busuanzi_value_site_uv"</span> <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">"white-color"</span><span class="token operator">></span><span class="token operator">&lt;</span><span class="token operator">/</span>span<span class="token operator">></span> äºº<span class="token punctuation">.</span>    <span class="token operator">&lt;</span><span class="token operator">/</span>span<span class="token operator">></span><span class="token operator">&lt;</span><span class="token operator">%</span> <span class="token punctuation">&#125;</span> <span class="token operator">%</span><span class="token operator">></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><ul><li>åœ¨è¿™ä¸ªæ–‡ä»¶æœ€ååŠ ä¸Šå¦‚ä¸‹ä»£ç </li></ul><pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token operator">&lt;</span>script<span class="token operator">></span> <span class="token function">$</span><span class="token punctuation">(</span>document<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">ready</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>     <span class="token keyword">var</span> int <span class="token operator">=</span> <span class="token function">setInterval</span><span class="token punctuation">(</span>fixCount<span class="token punctuation">,</span> <span class="token number">50</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 50mså‘¨æœŸæ£€æµ‹å‡½æ•° </span>    <span class="token keyword">var</span> pvcountOffset <span class="token operator">=</span> <span class="token number">80000</span><span class="token punctuation">;</span> <span class="token comment">// åˆå§‹åŒ–é¦–æ¬¡æ•°æ® </span>    <span class="token keyword">var</span> uvcountOffset <span class="token operator">=</span> <span class="token number">20000</span><span class="token punctuation">;</span> <span class="token keyword">function</span> <span class="token function">fixCount</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>         <span class="token keyword">if</span> <span class="token punctuation">(</span>document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">"busuanzi_container_site_pv"</span><span class="token punctuation">)</span><span class="token punctuation">.</span>style<span class="token punctuation">.</span>display <span class="token operator">!=</span> <span class="token string">"none"</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>         <span class="token function">$</span><span class="token punctuation">(</span><span class="token string">"#busuanzi_value_site_pv"</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">html</span><span class="token punctuation">(</span><span class="token function">parseInt</span><span class="token punctuation">(</span><span class="token function">$</span><span class="token punctuation">(</span><span class="token string">"#busuanzi_value_site_pv"</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">html</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token operator">+</span> pvcountOffset<span class="token punctuation">)</span><span class="token punctuation">;</span>         <span class="token function">clearInterval</span><span class="token punctuation">(</span>int<span class="token punctuation">)</span><span class="token punctuation">;</span>         <span class="token punctuation">&#125;</span>         <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token function">$</span><span class="token punctuation">(</span><span class="token string">"#busuanzi_container_site_pv"</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">css</span><span class="token punctuation">(</span><span class="token string">"display"</span><span class="token punctuation">)</span> <span class="token operator">!=</span> <span class="token string">"none"</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>             <span class="token function">$</span><span class="token punctuation">(</span><span class="token string">"#busuanzi_value_site_uv"</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">html</span><span class="token punctuation">(</span><span class="token function">parseInt</span><span class="token punctuation">(</span><span class="token function">$</span><span class="token punctuation">(</span><span class="token string">"#busuanzi_value_site_uv"</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">html</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token operator">+</span> uvcountOffset<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// åŠ ä¸Šåˆå§‹æ•°æ® </span>            <span class="token function">clearInterval</span><span class="token punctuation">(</span>int<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// åœæ­¢æ£€æµ‹ </span>        <span class="token punctuation">&#125;</span> <span class="token punctuation">&#125;</span> <span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token operator">&lt;</span><span class="token operator">/</span>script<span class="token operator">></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h2 id="æ›¿æ¢iconå’Œbanerä¸Šçš„å›¾æ ‡"><a href="#æ›¿æ¢iconå’Œbanerä¸Šçš„å›¾æ ‡" class="headerlink" title="æ›¿æ¢iconå’Œbanerä¸Šçš„å›¾æ ‡"></a>æ›¿æ¢iconå’Œbanerä¸Šçš„å›¾æ ‡</h2><pre class="line-numbers language-none"><code class="language-none">æ›¿æ¢ themes\hexo-theme-matery\source\mediasä¸­çš„logo.pngæ›¿æ¢ themes\hexo-theme-matery\source  favicon.png<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre><h2 id="æ·»åŠ åšå®¢åŠ¨æ€æ ‡ç­¾"><a href="#æ·»åŠ åšå®¢åŠ¨æ€æ ‡ç­¾" class="headerlink" title="æ·»åŠ åšå®¢åŠ¨æ€æ ‡ç­¾"></a>æ·»åŠ åšå®¢åŠ¨æ€æ ‡ç­¾</h2><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token function">vi</span> themes/hexo-theme-matery/layout/layout.ejs<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><ul><li>åœ¨å¯¹åº”çš„ä½ç½®ä¸‹æ·»åŠ å¦‚ä¸‹ä»£ç </li></ul><pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token operator">&lt;</span>script type<span class="token operator">=</span><span class="token string">"text/javascript"</span><span class="token operator">></span>    <span class="token keyword">var</span> OriginTitile <span class="token operator">=</span> document<span class="token punctuation">.</span>title<span class="token punctuation">,</span>        st<span class="token punctuation">;</span>    document<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">"visibilitychange"</span><span class="token punctuation">,</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        document<span class="token punctuation">.</span>hidden <span class="token operator">?</span> <span class="token punctuation">(</span>document<span class="token punctuation">.</span>title <span class="token operator">=</span> <span class="token string">"çœ‹ä¸è§æˆ‘ğŸ™ˆ~çœ‹ä¸è§æˆ‘ğŸ™ˆ~"</span><span class="token punctuation">,</span> <span class="token function">clearTimeout</span><span class="token punctuation">(</span>st<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token operator">:</span> <span class="token punctuation">(</span>document<span class="token punctuation">.</span>title <span class="token operator">=</span>            <span class="token string">"(à¹‘â€¢Ì€ã…‚â€¢Ì) âœ§è¢«å‘ç°äº†ï½"</span><span class="token punctuation">,</span> st <span class="token operator">=</span> <span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>                document<span class="token punctuation">.</span>title <span class="token operator">=</span> OriginTitile            <span class="token punctuation">&#125;</span><span class="token punctuation">,</span> <span class="token number">3e3</span><span class="token punctuation">)</span><span class="token punctuation">)</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token operator">&lt;</span><span class="token operator">/</span>script<span class="token operator">></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h2 id="hexo-neatä»£ç ä¼˜åŒ–åŠ é€Ÿ"><a href="#hexo-neatä»£ç ä¼˜åŒ–åŠ é€Ÿ" class="headerlink" title="hexo-neatä»£ç ä¼˜åŒ–åŠ é€Ÿ"></a>hexo-neatä»£ç ä¼˜åŒ–åŠ é€Ÿ</h2><ul><li>ç«™ç‚¹æ ¹ç›®å½•ä¸‹_config.yamlæ·»åŠ å¦‚ä¸‹å†…å®¹</li></ul><pre class="line-numbers language-yaml" data-language="yaml"><code class="language-yaml"><span class="token comment">#hexo-neat ä¼˜åŒ–æé€Ÿæ’ä»¶ï¼ˆå»æ‰HTMLã€cssã€jsçš„blankå­—ç¬¦ï¼‰</span><span class="token key atrule">neat_enable</span><span class="token punctuation">:</span> <span class="token boolean important">true</span><span class="token key atrule">neat_html</span><span class="token punctuation">:</span>  <span class="token key atrule">enable</span><span class="token punctuation">:</span> <span class="token boolean important">true</span>  <span class="token key atrule">exclude</span><span class="token punctuation">:</span>    <span class="token punctuation">-</span> <span class="token string">'**/*.md'</span><span class="token key atrule">neat_css</span><span class="token punctuation">:</span>  <span class="token key atrule">enable</span><span class="token punctuation">:</span> <span class="token boolean important">true</span>  <span class="token key atrule">exclude</span><span class="token punctuation">:</span>    <span class="token punctuation">-</span> <span class="token string">'**/*.min.css'</span><span class="token key atrule">neat_js</span><span class="token punctuation">:</span>  <span class="token key atrule">enable</span><span class="token punctuation">:</span> <span class="token boolean important">true</span>  <span class="token key atrule">mangle</span><span class="token punctuation">:</span> <span class="token boolean important">true</span>  <span class="token key atrule">output</span><span class="token punctuation">:</span>  <span class="token key atrule">compress</span><span class="token punctuation">:</span>  <span class="token key atrule">exclude</span><span class="token punctuation">:</span>    <span class="token punctuation">-</span> <span class="token string">'**/*.min.js'</span>    <span class="token punctuation">-</span> <span class="token string">'**/**/instantpage.js'</span>    <span class="token punctuation">-</span> <span class="token string">'**/matery.js'</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><ul><li>å®‰è£…æ’ä»¶</li></ul><pre class="line-numbers language-none"><code class="language-none">npm install hexo-neat<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><ul><li>è¿è¡Œhexo</li></ul><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">hexo clean <span class="token operator">&amp;&amp;</span> hexo g<span class="token operator">&amp;&amp;</span> hexo s<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><h2 id="ä¿®å¤è¯¦æƒ…é¡µä¸‹é¢çš„ä¸Šä¸€ç¯‡-x2F-ä¸‹ä¸€ç¯‡æ‘˜è¦å¤±æ•ˆ"><a href="#ä¿®å¤è¯¦æƒ…é¡µä¸‹é¢çš„ä¸Šä¸€ç¯‡-x2F-ä¸‹ä¸€ç¯‡æ‘˜è¦å¤±æ•ˆ" class="headerlink" title="ä¿®å¤è¯¦æƒ…é¡µä¸‹é¢çš„ä¸Šä¸€ç¯‡&#x2F;ä¸‹ä¸€ç¯‡æ‘˜è¦å¤±æ•ˆ"></a>ä¿®å¤è¯¦æƒ…é¡µä¸‹é¢çš„ä¸Šä¸€ç¯‡&#x2F;ä¸‹ä¸€ç¯‡æ‘˜è¦å¤±æ•ˆ</h2><pre class="line-numbers language-none"><code class="language-none">vi theme&#x2F;hexo-theme-matery&#x2F;layout&#x2F;_partial&#x2F;prev-next.js<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><ul><li>æ‰¾åˆ°ä¸Šä¸€é¡µå¯¹åº”çš„ä½ç½®ï¼Œå¤§æ¦‚åœ¨41è¡Œ</li></ul><pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript">  <span class="token operator">&lt;</span>div <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">"summary block-with-text"</span><span class="token operator">></span>     <span class="token operator">&lt;</span><span class="token operator">%</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>page<span class="token punctuation">.</span>prev<span class="token punctuation">.</span>summary <span class="token operator">&amp;&amp;</span> page<span class="token punctuation">.</span>prev<span class="token punctuation">.</span>summary<span class="token punctuation">.</span>length <span class="token operator">></span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span> <span class="token operator">%</span><span class="token operator">></span>         <span class="token operator">&lt;</span><span class="token operator">%</span><span class="token operator">-</span> page<span class="token punctuation">.</span>prev<span class="token punctuation">.</span>summary <span class="token operator">%</span><span class="token operator">></span>     <span class="token operator">&lt;</span><span class="token operator">%</span> <span class="token punctuation">&#125;</span> <span class="token keyword">else</span> <span class="token punctuation">&#123;</span> <span class="token operator">%</span><span class="token operator">></span>         <span class="token operator">&lt;</span><span class="token operator">%</span><span class="token operator">-</span> <span class="token function">strip_html</span><span class="token punctuation">(</span>page<span class="token punctuation">.</span>prev<span class="token punctuation">.</span>content<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">substring</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">70</span><span class="token punctuation">)</span> <span class="token operator">%</span><span class="token operator">></span>    <span class="token operator">&lt;</span><span class="token operator">%</span> <span class="token punctuation">&#125;</span> <span class="token operator">%</span><span class="token operator">></span><span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><ul><li>æ‰¾åˆ°ä¸‹ä¸€é¡µå¯¹åº”çš„ä½ç½®ï¼Œå¤§æ¦‚åœ¨103è¡Œ</li></ul><pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"> <span class="token operator">&lt;</span>div <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">"summary block-with-text"</span><span class="token operator">></span>     <span class="token operator">&lt;</span><span class="token operator">%</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>page<span class="token punctuation">.</span>summary <span class="token operator">&amp;&amp;</span> page<span class="token punctuation">.</span>summary<span class="token punctuation">.</span>length <span class="token operator">></span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span> <span class="token operator">%</span><span class="token operator">></span>         <span class="token operator">&lt;</span><span class="token operator">%</span><span class="token operator">-</span> page<span class="token punctuation">.</span>summary <span class="token operator">%</span><span class="token operator">></span>     <span class="token operator">&lt;</span><span class="token operator">%</span> <span class="token punctuation">&#125;</span> <span class="token keyword">else</span> <span class="token punctuation">&#123;</span> <span class="token operator">%</span><span class="token operator">></span>         <span class="token operator">&lt;</span><span class="token operator">%</span><span class="token operator">-</span> <span class="token function">strip_html</span><span class="token punctuation">(</span>page<span class="token punctuation">.</span>content<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">substring</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">70</span><span class="token punctuation">)</span> <span class="token operator">%</span><span class="token operator">></span>     <span class="token operator">&lt;</span><span class="token operator">%</span> <span class="token punctuation">&#125;</span> <span class="token operator">%</span><span class="token operator">></span><span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h2 id="æ–‡ç« è¯¦æƒ…é¡µå¤´éƒ¨æ·»åŠ ä½œè€…ä¿¡æ¯"><a href="#æ–‡ç« è¯¦æƒ…é¡µå¤´éƒ¨æ·»åŠ ä½œè€…ä¿¡æ¯" class="headerlink" title="æ–‡ç« è¯¦æƒ…é¡µå¤´éƒ¨æ·»åŠ ä½œè€…ä¿¡æ¯"></a>æ–‡ç« è¯¦æƒ…é¡µå¤´éƒ¨æ·»åŠ ä½œè€…ä¿¡æ¯</h2><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token function">vi</span> themes/hexo-theme-matery/layout/_partial/post-detail.ejs<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><ul><li>åœ¨36è¡Œé™„è¿‘æ·»åŠ å¦‚ä¸‹å†…å®¹</li></ul><pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token operator">&lt;</span><span class="token operator">%</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>page<span class="token punctuation">.</span>author <span class="token operator">&amp;&amp;</span> page<span class="token punctuation">.</span>author<span class="token punctuation">.</span>length <span class="token operator">></span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span> <span class="token operator">%</span><span class="token operator">></span><span class="token operator">&lt;</span>div <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">"post-date info-break-policy"</span><span class="token operator">></span>    <span class="token operator">&lt;</span>i <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">"fa-solid fa-user-pen"</span><span class="token operator">></span><span class="token operator">&lt;</span><span class="token operator">/</span>i<span class="token operator">></span><span class="token operator">&lt;</span><span class="token operator">%</span><span class="token operator">-</span> <span class="token function">__</span><span class="token punctuation">(</span><span class="token string">'author'</span><span class="token punctuation">)</span> <span class="token operator">%</span><span class="token operator">></span><span class="token operator">:</span><span class="token operator">&amp;</span>nbsp<span class="token punctuation">;</span><span class="token operator">&amp;</span>nbsp<span class="token punctuation">;</span>    <span class="token operator">&lt;</span><span class="token operator">%</span><span class="token operator">-</span> page<span class="token punctuation">.</span>author <span class="token operator">%</span><span class="token operator">></span><span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">></span><span class="token operator">&lt;</span><span class="token operator">%</span> <span class="token punctuation">&#125;</span> <span class="token operator">%</span><span class="token operator">></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h2 id="æ ‡ç­¾"><a href="#æ ‡ç­¾" class="headerlink" title="æ ‡ç­¾"></a>æ ‡ç­¾</h2><ul><li>æœ€ç»ˆæ•ˆæœå¦‚ä¸‹</li></ul><div class="uk-alert uk-alert-danger"><i class="fas fa-exclamation-triangle"></i> ç´…è‰²</div><div class="uk-alert uk-alert-success"><i class="fa fa-check-circle"></i> ç¶ è‰²</div><div class="uk-alert uk-alert-warning"><i class="fa fa-exclamation-circle"></i> é»ƒè‰²</div><ul><li>åœ¨themes&#x2F;hexo-theme-matery&#x2F;scripts&#x2F; æ–°å»ºblock.jsæ–‡ä»¶</li></ul><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token function">vi</span> themes/hexo-theme-matery/scripts/block.js<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><ul><li>æ·»åŠ å¦‚ä¸‹å†…å®¹</li></ul><pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript">hexo<span class="token punctuation">.</span>extend<span class="token punctuation">.</span>tag<span class="token punctuation">.</span><span class="token function">register</span><span class="token punctuation">(</span><span class="token string">'r'</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">args<span class="token punctuation">,</span> content</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>  <span class="token keyword">var</span> className <span class="token operator">=</span>  args<span class="token punctuation">.</span><span class="token function">join</span><span class="token punctuation">(</span><span class="token string">' '</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token keyword">return</span> <span class="token string">'&lt;div class="uk-alert uk-alert-danger">&lt;i class="fas fa-exclamation-triangle">&lt;/i> '</span> <span class="token operator">+</span> content <span class="token operator">+</span> <span class="token string">'&lt;/div>'</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span class="token punctuation">,</span> <span class="token punctuation">&#123;</span><span class="token literal-property property">ends</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>hexo<span class="token punctuation">.</span>extend<span class="token punctuation">.</span>tag<span class="token punctuation">.</span><span class="token function">register</span><span class="token punctuation">(</span><span class="token string">'g'</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">args<span class="token punctuation">,</span> content</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>  <span class="token keyword">var</span> className <span class="token operator">=</span>  args<span class="token punctuation">.</span><span class="token function">join</span><span class="token punctuation">(</span><span class="token string">' '</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token keyword">return</span> <span class="token string">'&lt;div class="uk-alert uk-alert-success">&lt;i class="fa fa-check-circle">&lt;/i> '</span> <span class="token operator">+</span> content <span class="token operator">+</span> <span class="token string">'&lt;/div>'</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span class="token punctuation">,</span> <span class="token punctuation">&#123;</span><span class="token literal-property property">ends</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>hexo<span class="token punctuation">.</span>extend<span class="token punctuation">.</span>tag<span class="token punctuation">.</span><span class="token function">register</span><span class="token punctuation">(</span><span class="token string">'y'</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">args<span class="token punctuation">,</span> content</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>  <span class="token keyword">var</span> className <span class="token operator">=</span>  args<span class="token punctuation">.</span><span class="token function">join</span><span class="token punctuation">(</span><span class="token string">' '</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token keyword">return</span> <span class="token string">'&lt;div class="uk-alert uk-alert-warning">&lt;i class="fa fa-exclamation-circle">&lt;/i> '</span> <span class="token operator">+</span> content <span class="token operator">+</span> <span class="token string">'&lt;/div>'</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span class="token punctuation">,</span> <span class="token punctuation">&#123;</span><span class="token literal-property property">ends</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><ul><li>åœ¨head.ejsæ–‡ä»¶ä¸­æ·»åŠ æ ·å¼</li></ul><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token function">vi</span> themes/hexo-theme-matery/layout/_partial/head.ejs<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token operator">&lt;</span>style <span class="token assign-left variable">type</span><span class="token operator">=</span><span class="token string">"text/css"</span><span class="token operator">></span>        .uk-alert <span class="token punctuation">&#123;</span>            margin-bottom: 15px<span class="token punctuation">;</span>            padding: 10px<span class="token punctuation">;</span>            background: <span class="token comment">#ebf7fd;</span>            color: <span class="token comment">#2d7091;</span>            border: 1px solid rgba<span class="token punctuation">(</span><span class="token number">45</span>, <span class="token number">112</span>, <span class="token number">145</span>, <span class="token number">0.3</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            border-radius: 4px<span class="token punctuation">;</span>            text-shadow: <span class="token number">0</span> 1px <span class="token number">0</span> <span class="token comment">#ffffff;</span>        <span class="token punctuation">&#125;</span>        .uk-alert-success <span class="token punctuation">&#123;</span>            background: <span class="token comment">#e8ece2;</span>            color: <span class="token comment">#659f13;</span>            border-left: 6px solid rgba<span class="token punctuation">(</span><span class="token number">120</span>, <span class="token number">199</span>, <span class="token number">9</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            font-weight: <span class="token number">600</span><span class="token punctuation">;</span>        <span class="token punctuation">&#125;</span>        .uk-alert-warning <span class="token punctuation">&#123;</span>            background: <span class="token comment">#fff1f0;</span>            color: rgb<span class="token punctuation">(</span><span class="token number">73</span>, <span class="token number">59</span>, <span class="token number">156</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            border-left: 6px solid rgb<span class="token punctuation">(</span><span class="token number">83</span>, <span class="token number">27</span>, <span class="token number">184</span>, <span class="token number">0.3</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            font-weight: <span class="token number">600</span><span class="token punctuation">;</span>        <span class="token punctuation">&#125;</span>        .uk-alert-danger <span class="token punctuation">&#123;</span>            background: <span class="token comment">#f8f8f6;</span>            color: <span class="token comment">#eb360d;</span>            border-left: 6px solid<span class="token comment">#eb360d;</span>            font-weight: <span class="token number">600</span><span class="token punctuation">;</span>        <span class="token punctuation">&#125;</span> <span class="token operator">&lt;</span>/style<span class="token operator">></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><ul><li>å¼•ç”¨æ–¹æ³•</li></ul><pre class="line-numbers language-none"><code class="language-none">&#123;%r%&#125;ç´…è‰²&#123;%endr%&#125;&#123;%g%&#125;ç¶ è‰²&#123;%endg%&#125;&#123;%y%&#125;é»ƒè‰²&#123;%endy%&#125;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h2 id="å›¾ç‰‡æ‡’åŠ è½½"><a href="#å›¾ç‰‡æ‡’åŠ è½½" class="headerlink" title="å›¾ç‰‡æ‡’åŠ è½½"></a>å›¾ç‰‡æ‡’åŠ è½½</h2><ul><li>åœ¨åšå®¢æ ¹ç›®å½•æ‰§è¡Œ</li></ul><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token function">npm</span> <span class="token function">install</span> hexo-lazyload-image <span class="token parameter variable">--save</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><ul><li>æ ¹ç›®å½•é…ç½®æ–‡ä»¶ä¸­å¼€å¯æ‡’åŠ è½½</li></ul><pre class="line-numbers language-yaml" data-language="yaml"><code class="language-yaml"><span class="token key atrule">lazyload</span><span class="token punctuation">:</span>  <span class="token key atrule">enable</span><span class="token punctuation">:</span> <span class="token boolean important">true</span>   <span class="token key atrule">onlypost</span><span class="token punctuation">:</span> <span class="token boolean important">false</span>  <span class="token comment"># æ˜¯å¦åªå¯¹æ–‡ç« çš„å›¾ç‰‡åšæ‡’åŠ è½½</span>  <span class="token key atrule">loadingImg</span><span class="token punctuation">:</span> <span class="token comment"># eg ./images/loading.gif</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre><ul><li><p>åˆ°è¿™é‡Œå°±é…ç½®å®Œäº†ï¼Œæ‰§è¡Œ<code>hexo cl&amp;&amp;hexo g&amp;&amp;hexo s</code>å°±æœ‰æ•ˆæœäº†ï¼Œä»¥ååšå®¢ä¸Šçš„å›¾ç‰‡å°±éƒ½æ˜¯æ‡’åŠ è½½äº†ï¼Œä»¥ä¸Šæ­¥éª¤ç†è®ºä¸Šä»»ä½•ä¸»é¢˜éƒ½å¯ä»¥ç”¨</p><p>ä¸€èˆ¬æƒ…å†µä¸‹æ‡’åŠ è½½ä¼šå’Œgalleryæ’ä»¶ä¼šå‘ç”Ÿå†²çªï¼Œç»“æœå¯èƒ½å°±æ˜¯ç‚¹å¼€å›¾ç‰‡ï¼Œå·¦ç¿»å³ç¿»éƒ½æ˜¯loading imageã€‚materyä¸»é¢˜çš„è§£å†³æ–¹æ¡ˆæ˜¯ï¼š</p><p>ä¿®æ”¹ <code>/themes/matery/source/js</code> ä¸­çš„ <code>matery.js</code>æ–‡ä»¶</p></li><li><p>åœ¨108è¡ŒåŠ å…¥ä»¥ä¸‹å†…å®¹</p></li></ul><pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token function">$</span><span class="token punctuation">(</span>document<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">find</span><span class="token punctuation">(</span><span class="token string">'img[data-original]'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">each</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>    <span class="token function">$</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">parent</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">attr</span><span class="token punctuation">(</span><span class="token string">"href"</span><span class="token punctuation">,</span> <span class="token function">$</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">attr</span><span class="token punctuation">(</span><span class="token string">"data-original"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre><ul><li>ä¿®æ”¹åä»£ç </li></ul><pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript">   <span class="token function">$</span><span class="token punctuation">(</span><span class="token string">'#articleContent, #myGallery'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">lightGallery</span><span class="token punctuation">(</span><span class="token punctuation">&#123;</span>            <span class="token literal-property property">selector</span><span class="token operator">:</span> <span class="token string">'.img-item'</span><span class="token punctuation">,</span>            <span class="token comment">// å¯ç”¨å­—å¹•</span>            <span class="token literal-property property">subHtmlSelectorRelative</span><span class="token operator">:</span> <span class="token boolean">true</span>        <span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token comment">// æ‡’åŠ è½½é˜²æ­¢æ’ä»¶å†²çª</span>        <span class="token function">$</span><span class="token punctuation">(</span>document<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">find</span><span class="token punctuation">(</span><span class="token string">'img[data-original]'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">each</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>        <span class="token function">$</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">parent</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">attr</span><span class="token punctuation">(</span><span class="token string">"href"</span><span class="token punctuation">,</span> <span class="token function">$</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">attr</span><span class="token punctuation">(</span><span class="token string">"data-original"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token comment">// progress bar init</span>        <span class="token keyword">const</span> progressElement <span class="token operator">=</span> window<span class="token punctuation">.</span>document<span class="token punctuation">.</span><span class="token function">querySelector</span><span class="token punctuation">(</span><span class="token string">'.progress-bar'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">if</span> <span class="token punctuation">(</span>progressElement<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>            <span class="token keyword">new</span> <span class="token class-name">ScrollProgress</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">x<span class="token punctuation">,</span> y</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">&#123;</span>                progressElement<span class="token punctuation">.</span>st<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><ul><li><p>åšå®Œè¿™æ­¥ä¹‹åï¼Œè¿˜æœ‰ç‚¹å°Bugï¼Œé¦–é¡µçš„logoç‚¹å‡»ä¼šç›´æ¥æ‰“å¼€logoå›¾ï¼Œè€Œä¸æ˜¯è·³åˆ°é¦–é¡µã€‚</p><p>ä¼ªè§£å†³æ–¹æ¡ˆï¼šæ‰“å¼€ <code>/themes/matery/layout/_partial/header.ejs</code>æ–‡ä»¶ï¼Œ</p><p>åœ¨<code>img</code>å’Œ<code>span</code>çš„ä¸¤ä¸ªå¤´åŠ ä¸ª<code>div</code>ï¼š</p></li></ul><pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token operator">&lt;</span>div <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">"brand-logo"</span><span class="token operator">></span>    <span class="token operator">&lt;</span>a href<span class="token operator">=</span><span class="token string">"&lt;%- url_for() %>"</span> <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">"waves-effect waves-light"</span><span class="token operator">></span>        <span class="token operator">&lt;</span>div<span class="token operator">></span>            <span class="token operator">&lt;</span><span class="token operator">%</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>theme<span class="token punctuation">.</span>logo <span class="token operator">!==</span> <span class="token keyword">undefined</span> <span class="token operator">&amp;&amp;</span> theme<span class="token punctuation">.</span>logo<span class="token punctuation">.</span>length <span class="token operator">></span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span> <span class="token operator">%</span><span class="token operator">></span>            <span class="token operator">&lt;</span>img src<span class="token operator">=</span><span class="token string">"&lt;%= theme.logo %>"</span> <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">"logo-img"</span> alt<span class="token operator">=</span><span class="token string">"LOGO"</span><span class="token operator">></span>            <span class="token operator">&lt;</span><span class="token operator">%</span> <span class="token punctuation">&#125;</span> <span class="token operator">%</span><span class="token operator">></span>            <span class="token operator">&lt;</span>span <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">"logo-span"</span><span class="token operator">></span><span class="token operator">&lt;</span><span class="token operator">%</span><span class="token operator">-</span> config<span class="token punctuation">.</span>title <span class="token operator">%</span><span class="token operator">></span><span class="token operator">&lt;</span><span class="token operator">/</span>span<span class="token operator">></span>        <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">></span>    <span class="token operator">&lt;</span><span class="token operator">/</span>a<span class="token operator">></span><span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h2 id="è‡ªå®šä¹‰åŠ è½½logo"><a href="#è‡ªå®šä¹‰åŠ è½½logo" class="headerlink" title="è‡ªå®šä¹‰åŠ è½½logo"></a>è‡ªå®šä¹‰åŠ è½½logo</h2><ul><li><code>hexo-lazyload-image</code> æ’ä»¶æä¾›äº†è‡ªå®šä¹‰loadingå›¾ç‰‡çš„é€‰é¡¹</li><li>æ–¹æ³•å°±æ˜¯åœ¨ <code>loadingImg</code> åé…ç½®å›¾ç‰‡çš„è·¯å¾„å°±å¥½äº†</li></ul><pre class="line-numbers language-yaml" data-language="yaml"><code class="language-yaml"><span class="token key atrule">lazyload</span><span class="token punctuation">:</span>  <span class="token key atrule">enable</span><span class="token punctuation">:</span> <span class="token boolean important">true</span>   <span class="token key atrule">onlypost</span><span class="token punctuation">:</span> <span class="token boolean important">false</span>  <span class="token comment"># æ˜¯å¦åªå¯¹æ–‡ç« çš„å›¾ç‰‡åšæ‡’åŠ è½½</span>  <span class="token key atrule">loadingImg</span><span class="token punctuation">:</span> /medias/loading.gif <span class="token comment"># eg ./images/loading.gif</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre><h2 id="è§£å†³æ‡’åŠ è½½åå›¾ç‰‡ä¸èƒ½ç«‹å³æ˜¾ç¤ºé—®é¢˜"><a href="#è§£å†³æ‡’åŠ è½½åå›¾ç‰‡ä¸èƒ½ç«‹å³æ˜¾ç¤ºé—®é¢˜" class="headerlink" title="è§£å†³æ‡’åŠ è½½åå›¾ç‰‡ä¸èƒ½ç«‹å³æ˜¾ç¤ºé—®é¢˜"></a>è§£å†³æ‡’åŠ è½½åå›¾ç‰‡ä¸èƒ½ç«‹å³æ˜¾ç¤ºé—®é¢˜</h2><ul><li><p>æ­¤ä¼˜åŒ–åå¯ä»¥åšåˆ°æ‡’åŠ è½½æ— æ„ŸçŸ¥</p></li><li><p>åœ¨æ ¹ç›®å½•çš„é…ç½®æ–‡ä»¶_config.yaml æ·»åŠ å¦‚ä¸‹å†…å®¹</p></li></ul><pre class="line-numbers language-yaml" data-language="yaml"><code class="language-yaml"><span class="token key atrule">lazyload</span><span class="token punctuation">:</span>  <span class="token key atrule">enable</span><span class="token punctuation">:</span> <span class="token boolean important">true</span>  <span class="token key atrule">onlypost</span><span class="token punctuation">:</span> <span class="token boolean important">false</span> <span class="token comment"># optional</span>  <span class="token key atrule">loadingImg</span><span class="token punctuation">:</span> <span class="token comment"># optional eg ./images/loading.gif</span>  <span class="token key atrule">isSPA</span><span class="token punctuation">:</span> <span class="token boolean important">false</span> <span class="token comment"># optional</span>  <span class="token key atrule">preloadRatio</span><span class="token punctuation">:</span> <span class="token number">4</span> <span class="token comment"># optional, default is 1 é€šè¿‡ä¿®æ”¹è¯¥å€¼å¯ä»¥è°ƒèŠ‚é¢„åŠ è½½çš„é˜ˆå€¼</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><ul><li>é…ç½®ä¼˜åŒ–è¾¾åˆ°æ€§èƒ½æœ€ä½³</li></ul><pre class="line-numbers language-yaml" data-language="yaml"><code class="language-yaml"><span class="token comment"># å›¾ç‰‡æ‡’åŠ è½½</span><span class="token key atrule">lazyload</span><span class="token punctuation">:</span>  <span class="token key atrule">enable</span><span class="token punctuation">:</span> <span class="token boolean important">true</span>  <span class="token key atrule">onlypost</span><span class="token punctuation">:</span> <span class="token boolean important">false</span>  <span class="token comment"># æ˜¯å¦åªå¯¹æ–‡ç« çš„å›¾ç‰‡åšæ‡’åŠ è½½</span>  <span class="token key atrule">loadingImg</span><span class="token punctuation">:</span> /medias/loading.gif <span class="token comment">#eg ./images/loading.gif</span>  <span class="token key atrule">isSPA</span><span class="token punctuation">:</span> <span class="token boolean important">false</span>  <span class="token key atrule">preloadRatio</span><span class="token punctuation">:</span> <span class="token number">4</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h2 id="æˆ‘çš„æ¢¦æƒ³cardæ·»åŠ ä¸€è¨€"><a href="#æˆ‘çš„æ¢¦æƒ³cardæ·»åŠ ä¸€è¨€" class="headerlink" title="æˆ‘çš„æ¢¦æƒ³cardæ·»åŠ ä¸€è¨€"></a>æˆ‘çš„æ¢¦æƒ³cardæ·»åŠ ä¸€è¨€</h2><ul><li>vi themes\hexo-theme-matery\source\css\matery.css</li><li>åœ¨æœ€åæ·»åŠ å¦‚ä¸‹æ ·å¼å†…å®¹</li></ul><pre class="line-numbers language-css" data-language="css"><code class="language-css"><span class="token comment">/* å¢åŠ æ¯æ—¥ä¸€è¨€æ¨¡å— */</span><span class="token selector">.poem-wrap</span> <span class="token punctuation">&#123;</span>    <span class="token property">position</span><span class="token punctuation">:</span> relative<span class="token punctuation">;</span>    <span class="token property">width</span><span class="token punctuation">:</span> 730px<span class="token punctuation">;</span>    <span class="token property">max-width</span><span class="token punctuation">:</span> 80%<span class="token punctuation">;</span>    <span class="token property">border</span><span class="token punctuation">:</span> 2px solid #797979<span class="token punctuation">;</span>    <span class="token property">border-top</span><span class="token punctuation">:</span> 0<span class="token punctuation">;</span>    <span class="token property">text-align</span><span class="token punctuation">:</span> center<span class="token punctuation">;</span>    <span class="token property">margin</span><span class="token punctuation">:</span> 80px auto<span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span class="token selector">.poem-left</span> <span class="token punctuation">&#123;</span>    <span class="token property">left</span><span class="token punctuation">:</span> 0<span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span class="token selector">.poem-border</span> <span class="token punctuation">&#123;</span>    <span class="token property">position</span><span class="token punctuation">:</span> absolute<span class="token punctuation">;</span>    <span class="token property">height</span><span class="token punctuation">:</span> 2px<span class="token punctuation">;</span>    <span class="token property">width</span><span class="token punctuation">:</span> 27%<span class="token punctuation">;</span>    <span class="token property">background-color</span><span class="token punctuation">:</span> #797979<span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span class="token selector">.poem-right</span> <span class="token punctuation">&#123;</span>    <span class="token property">right</span><span class="token punctuation">:</span> 0<span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span class="token selector">.poem-wrap h1</span> <span class="token punctuation">&#123;</span>    <span class="token property">position</span><span class="token punctuation">:</span> relative<span class="token punctuation">;</span>    <span class="token property">margin-top</span><span class="token punctuation">:</span> -20px<span class="token punctuation">;</span>    <span class="token property">display</span><span class="token punctuation">:</span> inline-block<span class="token punctuation">;</span>    <span class="token property">letter-spacing</span><span class="token punctuation">:</span> 4px<span class="token punctuation">;</span>    <span class="token property">color</span><span class="token punctuation">:</span> #797979<span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span class="token selector">.poem-wrap p:nth-of-type(1)</span> <span class="token punctuation">&#123;</span>    <span class="token property">font-size</span><span class="token punctuation">:</span> 25px<span class="token punctuation">;</span>    <span class="token property">text-align</span><span class="token punctuation">:</span> center<span class="token punctuation">;</span>    <span class="token property">margin</span><span class="token punctuation">:</span> 0 auto<span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span class="token selector">.poem-wrap p</span> <span class="token punctuation">&#123;</span>    <span class="token property">width</span><span class="token punctuation">:</span> 70%<span class="token punctuation">;</span>    <span class="token property">margin</span><span class="token punctuation">:</span> auto<span class="token punctuation">;</span>    <span class="token property">line-height</span><span class="token punctuation">:</span> 30px<span class="token punctuation">;</span>    <span class="token property">color</span><span class="token punctuation">:</span> #797979<span class="token punctuation">;</span>    <span class="token property">font-family</span><span class="token punctuation">:</span> <span class="token string">"Linux Biolinum"</span><span class="token punctuation">,</span> <span class="token string">"Noto Serif SC"</span><span class="token punctuation">,</span> Helvetica<span class="token punctuation">,</span> Arial<span class="token punctuation">,</span> Menlo<span class="token punctuation">,</span> Monaco<span class="token punctuation">,</span> monospace<span class="token punctuation">,</span> sans-serif<span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span class="token selector">.poem-wrap p:nth-of-type(2)</span> <span class="token punctuation">&#123;</span>    <span class="token property">font-size</span><span class="token punctuation">:</span> 18px<span class="token punctuation">;</span>    <span class="token property">margin</span><span class="token punctuation">:</span> 15px auto<span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><ul><li>vi themes\hexo-theme-matery\layout_widget\dream.ejs</li><li>ä¿®æ”¹ä¸ºå¦‚ä¸‹å†…å®¹</li></ul><pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token operator">&lt;</span>script<span class="token operator">></span>    <span class="token function">fetch</span><span class="token punctuation">(</span><span class="token string">'https://v1.hitokoto.cn?c=d&amp;c=h&amp;c=j'</span><span class="token punctuation">)</span>      <span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">res</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>        <span class="token keyword">return</span> res<span class="token punctuation">.</span><span class="token function">json</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>      <span class="token punctuation">&#125;</span><span class="token punctuation">)</span>      <span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">data</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token keyword">var</span> info <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">'info'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">var</span> poem <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">'poem'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        poem<span class="token punctuation">.</span>innerText <span class="token operator">=</span> data<span class="token punctuation">.</span>hitokoto<span class="token punctuation">;</span>        info<span class="token punctuation">.</span>innerText <span class="token operator">=</span> <span class="token string">"--"</span> <span class="token operator">+</span> data<span class="token punctuation">.</span>from_who <span class="token operator">+</span> <span class="token string">"ã€Š"</span> <span class="token operator">+</span> data<span class="token punctuation">.</span>from <span class="token operator">+</span> <span class="token string">"ã€‹"</span>       <span class="token punctuation">&#125;</span><span class="token punctuation">)</span>      <span class="token punctuation">.</span><span class="token function">catch</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">err</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        console<span class="token punctuation">.</span><span class="token function">error</span><span class="token punctuation">(</span>err<span class="token punctuation">)</span><span class="token punctuation">;</span>      <span class="token punctuation">&#125;</span><span class="token punctuation">)</span>  <span class="token operator">&lt;</span><span class="token operator">/</span>script<span class="token operator">></span>    <span class="token operator">&lt;</span><span class="token operator">!</span><span class="token operator">--</span> åŠ å…¥ç½‘æ˜“äº‘éŸ³ä¹çƒ­é—¨è¯„è®ºï¼Œå®æ—¶æ›´æ–° <span class="token operator">--</span><span class="token operator">></span><span class="token operator">&lt;</span>div <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">"poem-wrap"</span><span class="token operator">></span>    <span class="token operator">&lt;</span><span class="token operator">%</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>theme<span class="token punctuation">.</span>dream<span class="token punctuation">.</span>showTitle<span class="token punctuation">)</span><span class="token punctuation">&#123;</span> <span class="token operator">%</span><span class="token operator">></span>    <span class="token operator">&lt;</span>div <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">"poem-border poem-left"</span><span class="token operator">></span>    <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">></span>    <span class="token operator">&lt;</span>div <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">"poem-border poem-right"</span><span class="token operator">></span>    <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">></span>    <span class="token operator">&lt;</span>h1<span class="token operator">></span><span class="token operator">&lt;</span><span class="token operator">%=</span> theme<span class="token punctuation">.</span>dream<span class="token punctuation">.</span>title <span class="token operator">%</span><span class="token operator">></span><span class="token operator">&lt;</span><span class="token operator">/</span>h1<span class="token operator">></span>    <span class="token operator">&lt;</span><span class="token operator">%</span> <span class="token punctuation">&#125;</span> <span class="token operator">%</span><span class="token operator">></span>    <span class="token operator">&lt;</span>p id<span class="token operator">=</span><span class="token string">"poem"</span><span class="token operator">></span>loading<span class="token operator">...</span><span class="token operator">&lt;</span><span class="token operator">/</span>p<span class="token operator">></span>    <span class="token operator">&lt;</span>p id<span class="token operator">=</span><span class="token string">"info"</span><span class="token operator">></span>loading<span class="token operator">...</span><span class="token operator">&lt;</span><span class="token operator">/</span>p<span class="token operator">></span>    <span class="token operator">&lt;</span><span class="token operator">!</span><span class="token operator">--</span> <span class="token operator">&lt;</span>p id<span class="token operator">=</span><span class="token string">"hitokoto"</span><span class="token operator">></span>æ­£åœ¨åŠ è½½ä¸€è¨€<span class="token operator">...</span><span class="token operator">&lt;</span><span class="token operator">/</span>p<span class="token operator">></span> <span class="token operator">--</span><span class="token operator">></span><span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">></span>    <span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><ul><li>åœ¨ä¸»é¢˜é…ç½®æ–‡ä»¶ä¸­å¼€å¯dreamæ˜¾ç¤º</li></ul><pre class="line-numbers language-yaml" data-language="yaml"><code class="language-yaml"><span class="token key atrule">dream</span><span class="token punctuation">:</span>  <span class="token key atrule">enable</span><span class="token punctuation">:</span> <span class="token boolean important">true</span>  <span class="token key atrule">showTitle</span><span class="token punctuation">:</span> <span class="token boolean important">true</span>  <span class="token key atrule">title</span><span class="token punctuation">:</span> æ‘˜å½•  <span class="token key atrule">text</span><span class="token punctuation">:</span> <span class="token string">""</span>  <span class="token comment"># æ­¤æ—¶textçš„å†…å®¹ä¸ä¼šæ˜¾ç¤ºï¼Œå†…å®¹ä¼šè‡ªåŠ¨ä½¿ç”¨ä¸€è¨€apiçš„å†…å®¹</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre><div class="uk-alert uk-alert-success"><i class="fa fa-check-circle"></i> å¯ä»¥åœ¨å…¶ä»–åœ°æ–¹å¼•ç”¨ï¼Œåªéœ€è¦å°†deream.ejsä¸­çš„ä»£ç åŠ å…¥éœ€è¦å¼•ç”¨çš„ejsæ–‡ä»¶ä¸­å³å¯</div><h2 id="è‡ªå®šä¹‰æˆ‘çš„ç›¸å†Œ"><a href="#è‡ªå®šä¹‰æˆ‘çš„ç›¸å†Œ" class="headerlink" title="è‡ªå®šä¹‰æˆ‘çš„ç›¸å†Œ"></a>è‡ªå®šä¹‰æˆ‘çš„ç›¸å†Œ</h2><ul><li>ä¿®æ”¹ä¸»é¢˜é…ç½®æ–‡ä»¶</li><li><code> vi themes\hexo-theme-matery\_config.yml</code></li></ul><pre class="line-numbers language-none"><code class="language-none"># äºŒçº§èœå•å†™æ³•å¦‚ä¸‹åª’ä½“:  icon: fas fa-list  children:    - name: ç›¸å†Œ      url: &#x2F;galleries      icon: fas fa-image#    - name: Musics<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><ul><li>æ–°å»ºç›¸å†Œé¡µ</li></ul><pre class="line-numbers language-none"><code class="language-none">hexo new page gallery<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><ul><li>åœ¨<code>source\galleries\</code>ä¸‹æ–°å»ºæˆ–è€…ä¿®æ”¹index.mdä¸ºä»¥ä¸‹å†…å®¹</li></ul><pre class="line-numbers language-json" data-language="json"><code class="language-json">---title<span class="token operator">:</span> galleriesdate<span class="token operator">:</span> <span class="token number">2022</span><span class="token number">-11</span><span class="token number">-27</span> <span class="token number">13</span><span class="token operator">:</span><span class="token number">11</span><span class="token operator">:</span><span class="token number">36</span>type<span class="token operator">:</span> <span class="token string">"galleries"</span>layout<span class="token operator">:</span> <span class="token string">"galleries"</span>---<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><ul><li><p>åœ¨<code>themes\hexo-theme-matery\source\css\</code> æ–°å»ºæˆ–è€…ä¿®æ”¹gallery.css</p></li><li><pre><code class="shell">vi themes\hexo-theme-matery\source\css\gallery.css<pre class="line-numbers language-none"><code class="language-none">&#96;&#96;&#96;css.gallery-wrapper&#123;  padding-top: 30px;&#125;.gallery-wrapper .gallery-box&#123;  padding: 5px !important;&#125;.gallery-wrapper .gallery-item &#123;  display: block;  overflow: hidden;  background-color: #fff;  padding: 5px;  padding-bottom: 0;  position: relative;  -moz-box-shadow: 0 1px 3px 0 rgba(0, 0, 0, 0.22);  -webkit-box-shadow: 0 1px 3px 0 rgba(0, 0, 0, 0.22);  box-shadow: 0 1px 3px 0 rgba(0, 0, 0, 0.22);&#125;.gallery-cover-box&#123;  width: 100%;  padding-top: 60%;  text-align: center;  overflow: hidden;  position: relative;  background: center center no-repeat;  -webkit-background-size: cover;  background-size: cover;&#125;.gallery-cover-box .gallery-cover-img &#123;  display: inline-block;  width: 100%;  position: absolute;  left: 50%;  top: 50%;  transform: translate(-50%,-50%);&#125;.gallery-item .gallery-name&#123;  font-size: 14px;  line-height: 24px;  text-align: center;  color: #666;  margin: 0;&#125;.waterfall &#123;  column-count: 3;  column-gap: 1em;&#125;.photo-wrapper&#123;  padding-top: 20px;&#125;.photo-item &#123;  display: block;  padding: 10px;  padding-bottom: 0;  margin-bottom: 14px;  font-size: 0;  -moz-page-break-inside: avoid;  -webkit-column-break-inside: avoid;  break-inside: avoid;  background: white;  -moz-box-shadow: 0 1px 3px 0 rgba(0, 0, 0, 0.22);  -webkit-box-shadow: 0 1px 3px 0 rgba(0, 0, 0, 0.22);  box-shadow: 0 1px 3px 0 rgba(0, 0, 0, 0.22);&#125;.photo-item img &#123;  width: 100%;&#125;.photo-item .photo-name&#123;  font-size: 14px;  line-height: 30px;  text-align: center;  margin-top: 10px;  margin-bottom: 10px;  border-top: 1px solid #dddddd;&#125;&#x2F;*é€‚é…ç§»åŠ¨ç«¯å¸ƒå±€*&#x2F;@media only screen and (max-width: 601px) &#123;  .waterfall &#123;    column-count: 2;    column-gap: 1em;  &#125;&#125;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></code></pre></li><li><p>åœ¨<code>themes\hexo-theme-matery\layout\</code>ç›®å½•ä¸‹æ–°å»º æˆ–è€…ä¿®æ”¹<code>galleries.ejs</code> æ–‡ä»¶ï¼Œæ›¿æ¢ä¸ºä»¥ä¸‹å†…å®¹</p></li><li><p>è¯¥ç‰ˆæœ¬ä¸ºæ·»åŠ äº†ä¸€è¨€apiçš„ç‰ˆæœ¬ï¼Œå¦‚æœä¸éœ€è¦åˆ é™¤å¯¹åº”çš„ä»£ç å°±è¡Œ</p></li></ul><pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token operator">&lt;</span>link rel<span class="token operator">=</span><span class="token string">"stylesheet"</span> href<span class="token operator">=</span><span class="token string">"/css/gallery.css"</span><span class="token operator">></span><span class="token operator">&lt;</span><span class="token operator">%</span><span class="token operator">-</span> <span class="token function">partial</span><span class="token punctuation">(</span><span class="token string">'_partial/bg-cover'</span><span class="token punctuation">)</span> <span class="token operator">%</span><span class="token operator">></span><span class="token operator">&lt;</span><span class="token operator">!</span><span class="token operator">--</span> ä¸€è¨€<span class="token constant">API</span> <span class="token operator">--</span><span class="token operator">></span><span class="token operator">&lt;</span><span class="token operator">!</span><span class="token operator">--</span> ç°ä»£å†™æ³•ï¼Œæ¨è <span class="token operator">--</span><span class="token operator">></span><span class="token operator">&lt;</span><span class="token operator">!</span><span class="token operator">--</span> <span class="token function">å…¼å®¹ä½ç‰ˆæœ¬æµè§ˆå™¨</span> <span class="token punctuation">(</span>åŒ…æ‹¬ <span class="token constant">IE</span><span class="token punctuation">)</span>ï¼Œå¯ç§»é™¤ <span class="token operator">--</span><span class="token operator">></span><span class="token operator">&lt;</span>script src<span class="token operator">=</span><span class="token string">"https://cdn.jsdelivr.net/npm/bluebird@3/js/browser/bluebird.min.js"</span><span class="token operator">></span><span class="token operator">&lt;</span><span class="token operator">/</span>script<span class="token operator">></span><span class="token operator">&lt;</span>script src<span class="token operator">=</span><span class="token string">"https://cdn.jsdelivr.net/npm/whatwg-fetch@2.0.3/fetch.min.js"</span><span class="token operator">></span><span class="token operator">&lt;</span><span class="token operator">/</span>script<span class="token operator">></span><span class="token operator">&lt;</span><span class="token operator">!</span><span class="token operator">--</span>End<span class="token operator">--</span><span class="token operator">></span><span class="token operator">&lt;</span>script<span class="token operator">></span>    <span class="token function">fetch</span><span class="token punctuation">(</span><span class="token string">'https://v1.hitokoto.cn?c=d&amp;c=h&amp;c=j'</span><span class="token punctuation">)</span>      <span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">res</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>        <span class="token keyword">return</span> res<span class="token punctuation">.</span><span class="token function">json</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>      <span class="token punctuation">&#125;</span><span class="token punctuation">)</span>      <span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">data</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token keyword">var</span> info <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">'info'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">var</span> poem <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">'poem'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        poem<span class="token punctuation">.</span>innerText <span class="token operator">=</span> data<span class="token punctuation">.</span>hitokoto<span class="token punctuation">;</span>        <span class="token keyword">if</span> <span class="token punctuation">(</span>data<span class="token punctuation">.</span>from_who<span class="token operator">==</span><span class="token keyword">null</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>            info<span class="token punctuation">.</span>innerText <span class="token operator">=</span> <span class="token string">"ã€Š"</span> <span class="token operator">+</span> data<span class="token punctuation">.</span>from <span class="token operator">+</span> <span class="token string">"ã€‹"</span>         <span class="token punctuation">&#125;</span>        <span class="token keyword">else</span><span class="token punctuation">&#123;</span>            info<span class="token punctuation">.</span>innerText <span class="token operator">=</span> <span class="token string">"--"</span> <span class="token operator">+</span> data<span class="token punctuation">.</span>from_who <span class="token operator">+</span> <span class="token string">"ã€Š"</span> <span class="token operator">+</span> data<span class="token punctuation">.</span>from <span class="token operator">+</span> <span class="token string">"ã€‹"</span>         <span class="token punctuation">&#125;</span>      <span class="token punctuation">&#125;</span><span class="token punctuation">)</span>      <span class="token punctuation">.</span><span class="token function">catch</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">err</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        console<span class="token punctuation">.</span><span class="token function">error</span><span class="token punctuation">(</span>err<span class="token punctuation">)</span><span class="token punctuation">;</span>      <span class="token punctuation">&#125;</span><span class="token punctuation">)</span>  <span class="token operator">&lt;</span><span class="token operator">/</span>script<span class="token operator">></span><span class="token operator">&lt;</span><span class="token operator">!</span><span class="token operator">--</span> åŠ å…¥ç½‘æ˜“äº‘éŸ³ä¹çƒ­é—¨è¯„è®ºï¼Œå®æ—¶æ›´æ–° <span class="token operator">--</span><span class="token operator">></span><span class="token operator">&lt;</span>div <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">"poem-wrap"</span><span class="token operator">></span>    <span class="token operator">&lt;</span>div <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">"poem-border poem-left"</span><span class="token operator">></span>    <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">></span>    <span class="token operator">&lt;</span>div <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">"poem-border poem-right"</span><span class="token operator">></span>    <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">></span>    <span class="token operator">&lt;</span>h1<span class="token operator">></span>æ—¶å…‰æœº<span class="token operator">&lt;</span><span class="token operator">/</span>h1<span class="token operator">></span>    <span class="token operator">&lt;</span>p id<span class="token operator">=</span><span class="token string">"poem"</span><span class="token operator">></span>loading<span class="token operator">...</span><span class="token operator">&lt;</span><span class="token operator">/</span>p<span class="token operator">></span>    <span class="token operator">&lt;</span>p id<span class="token operator">=</span><span class="token string">"info"</span><span class="token operator">></span>loading<span class="token operator">...</span><span class="token operator">&lt;</span><span class="token operator">/</span>p<span class="token operator">></span>    <span class="token operator">&lt;</span><span class="token operator">!</span><span class="token operator">--</span> <span class="token operator">&lt;</span>p id<span class="token operator">=</span><span class="token string">"hitokoto"</span><span class="token operator">></span>æ­£åœ¨åŠ è½½ä¸€è¨€<span class="token operator">...</span><span class="token operator">&lt;</span><span class="token operator">/</span>p<span class="token operator">></span> <span class="token operator">--</span><span class="token operator">></span><span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">></span><span class="token operator">&lt;</span>main <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">"content"</span><span class="token operator">></span>    <span class="token operator">&lt;</span>div <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">"container"</span><span class="token operator">></span>        <span class="token operator">&lt;</span><span class="token operator">%</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>site<span class="token punctuation">.</span>data <span class="token operator">&amp;&amp;</span> site<span class="token punctuation">.</span>data<span class="token punctuation">.</span>galleries<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span> <span class="token operator">%</span><span class="token operator">></span>        <span class="token operator">&lt;</span><span class="token operator">%</span> <span class="token keyword">var</span> galleries <span class="token operator">=</span> site<span class="token punctuation">.</span>data<span class="token punctuation">.</span>galleries<span class="token punctuation">;</span> <span class="token operator">%</span><span class="token operator">></span>        <span class="token operator">&lt;</span>div <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">"gallery-wrapper row"</span><span class="token operator">></span>            <span class="token operator">&lt;</span><span class="token operator">%</span> <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">var</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">,</span> len <span class="token operator">=</span> galleries<span class="token punctuation">.</span>length<span class="token punctuation">;</span> i <span class="token operator">&lt;</span> len<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span> <span class="token operator">%</span><span class="token operator">></span>            <span class="token operator">&lt;</span><span class="token operator">%</span> <span class="token keyword">var</span> gallery <span class="token operator">=</span> galleries<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">;</span> <span class="token operator">%</span><span class="token operator">></span>            <span class="token operator">&lt;</span>div <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">"col s6 m4 l4 xl3 gallery-box"</span><span class="token operator">></span>                <span class="token operator">&lt;</span>a href<span class="token operator">=</span><span class="token string">"./&lt;%- gallery.name %>"</span> <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">"gallery-item"</span> data<span class="token operator">-</span>aos<span class="token operator">=</span><span class="token string">"zoom-in-up"</span><span class="token operator">></span>                     <span class="token operator">&lt;</span>div <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">"gallery-cover-box"</span> style<span class="token operator">=</span><span class="token string">"background-image: url(https://zhangtq-gallery.oss-cn-hangzhou.aliyuncs.com/cover/&lt;%- gallery.cover%>);"</span><span class="token operator">></span>                    <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">></span>                    <span class="token operator">&lt;</span>p <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">"gallery-name"</span><span class="token operator">></span>                        <span class="token operator">&lt;</span><span class="token operator">%</span><span class="token operator">-</span> gallery<span class="token punctuation">.</span>name <span class="token operator">%</span><span class="token operator">></span>                    <span class="token operator">&lt;</span><span class="token operator">/</span>p<span class="token operator">></span>                <span class="token operator">&lt;</span><span class="token operator">/</span>a<span class="token operator">></span>            <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">></span>            <span class="token operator">&lt;</span><span class="token operator">%</span> <span class="token punctuation">&#125;</span> <span class="token operator">%</span><span class="token operator">></span>        <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">></span>        <span class="token operator">&lt;</span><span class="token operator">%</span> <span class="token punctuation">&#125;</span> <span class="token operator">%</span><span class="token operator">></span>    <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">></span><span class="token operator">&lt;</span><span class="token operator">/</span>main<span class="token operator">></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><ul><li>åœ¨<code>themes\hexo-theme-matery\layout\</code>ä¸‹æ–°å»ºæˆ–è€…ä¿®æ”¹<code>gallery.ejs</code> æ–‡ä»¶</li></ul><pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token operator">&lt;</span>link rel<span class="token operator">=</span><span class="token string">"stylesheet"</span> href<span class="token operator">=</span><span class="token string">"/css/gallery.css"</span><span class="token operator">></span><span class="token operator">&lt;</span>link type<span class="token operator">=</span><span class="token string">"text/css"</span> href<span class="token operator">=</span><span class="token string">"/libs/fancybox/jquery.fancybox.css"</span> rel<span class="token operator">=</span><span class="token string">"stylesheet"</span><span class="token operator">></span><span class="token operator">&lt;</span>link type<span class="token operator">=</span><span class="token string">"text/css"</span> href<span class="token operator">=</span><span class="token string">"/libs/justifiedGallery/justifiedGallery.min.css"</span> rel<span class="token operator">=</span><span class="token string">"stylesheet"</span><span class="token operator">></span><span class="token operator">&lt;</span><span class="token operator">%</span><span class="token operator">-</span> <span class="token function">partial</span><span class="token punctuation">(</span><span class="token string">'_partial/post-cover'</span><span class="token punctuation">)</span> <span class="token operator">%</span><span class="token operator">></span><span class="token operator">&lt;</span><span class="token operator">%</span><span class="token keyword">let</span> galleries <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span><span class="token keyword">if</span> <span class="token punctuation">(</span>site<span class="token punctuation">.</span>data <span class="token operator">&amp;&amp;</span> site<span class="token punctuation">.</span>data<span class="token punctuation">.</span>galleries<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>    galleries <span class="token operator">=</span> site<span class="token punctuation">.</span>data<span class="token punctuation">.</span>galleries<span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span class="token keyword">var</span> pageTitle <span class="token operator">=</span> page<span class="token punctuation">.</span>title<span class="token punctuation">;</span><span class="token keyword">function</span> <span class="token function">getCurrentGallery</span><span class="token punctuation">(</span><span class="token parameter">galleries<span class="token punctuation">,</span> pageTitle</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>    <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">let</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> galleries<span class="token punctuation">.</span>length<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token keyword">if</span> <span class="token punctuation">(</span>galleries<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token string">'name'</span><span class="token punctuation">]</span> <span class="token operator">==</span> pageTitle<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>            <span class="token keyword">return</span> galleries<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">;</span>        <span class="token punctuation">&#125;</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span class="token keyword">var</span> currentGallery <span class="token operator">=</span> <span class="token function">getCurrentGallery</span><span class="token punctuation">(</span>galleries<span class="token punctuation">,</span> pageTitle<span class="token punctuation">)</span><span class="token keyword">var</span> photos <span class="token operator">=</span> currentGallery<span class="token punctuation">.</span>photos<span class="token punctuation">;</span><span class="token keyword">let</span> imageStr <span class="token operator">=</span> <span class="token string">''</span><span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">var</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">,</span> len <span class="token operator">=</span> photos<span class="token punctuation">.</span>length<span class="token punctuation">;</span> i <span class="token operator">&lt;</span> len<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>    <span class="token keyword">var</span> photo <span class="token operator">=</span> photos<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">;</span>     imageStr <span class="token operator">+=</span> <span class="token string">"&lt;a href=\"https://zhangtq-gallery.oss-cn-hangzhou.aliyuncs.com/photo/"</span> <span class="token operator">+</span> photo <span class="token operator">+</span> <span class="token string">"\""</span> <span class="token operator">+</span>            <span class="token string">"     class=\"photo-item\" rel=\"example_group\""</span> <span class="token operator">+</span>            <span class="token string">"     data-fancybox=\"images\">"</span> <span class="token operator">+</span>            <span class="token string">"      &lt;img src=\"https://zhangtq-gallery.oss-cn-hangzhou.aliyuncs.com/photo/"</span> <span class="token operator">+</span> photo <span class="token operator">+</span> <span class="token string">"\""</span> <span class="token operator">+</span>            <span class="token string">"       alt="</span> <span class="token operator">+</span> photo <span class="token operator">+</span> <span class="token string">">\n"</span> <span class="token operator">+</span>            <span class="token string">"    &lt;/a>"</span><span class="token punctuation">&#125;</span><span class="token operator">%</span><span class="token operator">></span><span class="token operator">&lt;</span><span class="token operator">!</span><span class="token operator">--</span> ä¸€è¨€<span class="token constant">API</span> <span class="token operator">--</span><span class="token operator">></span><span class="token operator">&lt;</span><span class="token operator">!</span><span class="token operator">--</span> ç°ä»£å†™æ³•ï¼Œæ¨è <span class="token operator">--</span><span class="token operator">></span><span class="token operator">&lt;</span><span class="token operator">!</span><span class="token operator">--</span> <span class="token function">å…¼å®¹ä½ç‰ˆæœ¬æµè§ˆå™¨</span> <span class="token punctuation">(</span>åŒ…æ‹¬ <span class="token constant">IE</span><span class="token punctuation">)</span>ï¼Œå¯ç§»é™¤ <span class="token operator">--</span><span class="token operator">></span><span class="token operator">&lt;</span>script src<span class="token operator">=</span><span class="token string">"https://cdn.jsdelivr.net/npm/bluebird@3/js/browser/bluebird.min.js"</span><span class="token operator">></span><span class="token operator">&lt;</span><span class="token operator">/</span>script<span class="token operator">></span><span class="token operator">&lt;</span>script src<span class="token operator">=</span><span class="token string">"https://cdn.jsdelivr.net/npm/whatwg-fetch@2.0.3/fetch.min.js"</span><span class="token operator">></span><span class="token operator">&lt;</span><span class="token operator">/</span>script<span class="token operator">></span><span class="token operator">&lt;</span><span class="token operator">!</span><span class="token operator">--</span>End<span class="token operator">--</span><span class="token operator">></span><span class="token operator">&lt;</span>script<span class="token operator">></span>    <span class="token function">fetch</span><span class="token punctuation">(</span><span class="token string">'https://v1.hitokoto.cn?c=d&amp;c=h&amp;c=j'</span><span class="token punctuation">)</span>      <span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">res</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>        <span class="token keyword">return</span> res<span class="token punctuation">.</span><span class="token function">json</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>      <span class="token punctuation">&#125;</span><span class="token punctuation">)</span>      <span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">data</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token keyword">var</span> info <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">'info'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">var</span> poem <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">'poem'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        poem<span class="token punctuation">.</span>innerText <span class="token operator">=</span> data<span class="token punctuation">.</span>hitokoto<span class="token punctuation">;</span>        <span class="token keyword">if</span> <span class="token punctuation">(</span>data<span class="token punctuation">.</span>from_who<span class="token operator">==</span><span class="token keyword">null</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>            info<span class="token punctuation">.</span>innerText <span class="token operator">=</span> <span class="token string">"ã€Š"</span> <span class="token operator">+</span> data<span class="token punctuation">.</span>from <span class="token operator">+</span> <span class="token string">"ã€‹"</span>         <span class="token punctuation">&#125;</span>        <span class="token keyword">else</span><span class="token punctuation">&#123;</span>            info<span class="token punctuation">.</span>innerText <span class="token operator">=</span> <span class="token string">"--"</span> <span class="token operator">+</span> data<span class="token punctuation">.</span>from_who <span class="token operator">+</span> <span class="token string">"ã€Š"</span> <span class="token operator">+</span> data<span class="token punctuation">.</span>from <span class="token operator">+</span> <span class="token string">"ã€‹"</span>         <span class="token punctuation">&#125;</span>      <span class="token punctuation">&#125;</span><span class="token punctuation">)</span>      <span class="token punctuation">.</span><span class="token function">catch</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">err</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        console<span class="token punctuation">.</span><span class="token function">error</span><span class="token punctuation">(</span>err<span class="token punctuation">)</span><span class="token punctuation">;</span>      <span class="token punctuation">&#125;</span><span class="token punctuation">)</span>  <span class="token operator">&lt;</span><span class="token operator">/</span>script<span class="token operator">></span><span class="token operator">&lt;</span><span class="token operator">!</span><span class="token operator">--</span> åŠ å…¥ç½‘æ˜“äº‘éŸ³ä¹çƒ­é—¨è¯„è®ºï¼Œå®æ—¶æ›´æ–° <span class="token operator">--</span><span class="token operator">></span><span class="token operator">&lt;</span>div <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">"poem-wrap"</span><span class="token operator">></span>    <span class="token operator">&lt;</span>div <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">"poem-border poem-left"</span><span class="token operator">></span>    <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">></span>    <span class="token operator">&lt;</span>div <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">"poem-border poem-right"</span><span class="token operator">></span>    <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">></span>    <span class="token operator">&lt;</span>h1<span class="token operator">></span>æ—¶å…‰æœº<span class="token operator">&lt;</span><span class="token operator">/</span>h1<span class="token operator">></span>    <span class="token operator">&lt;</span>p id<span class="token operator">=</span><span class="token string">"poem"</span><span class="token operator">></span>loading<span class="token operator">...</span><span class="token operator">&lt;</span><span class="token operator">/</span>p<span class="token operator">></span>    <span class="token operator">&lt;</span>p id<span class="token operator">=</span><span class="token string">"info"</span><span class="token operator">></span>loading<span class="token operator">...</span><span class="token operator">&lt;</span><span class="token operator">/</span>p<span class="token operator">></span>    <span class="token operator">&lt;</span><span class="token operator">!</span><span class="token operator">--</span> <span class="token operator">&lt;</span>p id<span class="token operator">=</span><span class="token string">"hitokoto"</span><span class="token operator">></span>æ­£åœ¨åŠ è½½ä¸€è¨€<span class="token operator">...</span><span class="token operator">&lt;</span><span class="token operator">/</span>p<span class="token operator">></span> <span class="token operator">--</span><span class="token operator">></span><span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">></span><span class="token operator">&lt;</span>div <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">"container"</span><span class="token operator">></span>    <span class="token operator">&lt;</span>div <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">"photo-wrapper"</span><span class="token operator">></span>        <span class="token operator">&lt;</span><span class="token operator">%</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>page<span class="token punctuation">.</span>password <span class="token punctuation">)</span> <span class="token punctuation">&#123;</span> <span class="token operator">%</span><span class="token operator">></span>            <span class="token operator">&lt;</span>script src<span class="token operator">=</span><span class="token string">"/js/crypto-js.js"</span><span class="token operator">></span><span class="token operator">&lt;</span><span class="token operator">/</span>script<span class="token operator">></span>            <span class="token operator">&lt;</span>script src<span class="token operator">=</span><span class="token string">"/js/gallery-encrypt.js"</span><span class="token operator">></span><span class="token operator">&lt;</span><span class="token operator">/</span>script<span class="token operator">></span>            <span class="token operator">&lt;</span>div id<span class="token operator">=</span><span class="token string">"hbe-security"</span><span class="token operator">></span>                <span class="token operator">&lt;</span>div <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">"hbe-input-container"</span><span class="token operator">></span>                    <span class="token operator">&lt;</span>input type<span class="token operator">=</span><span class="token string">"password"</span> <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">"hbe-form-control"</span> id<span class="token operator">=</span><span class="token string">"pass"</span>  placeholder<span class="token operator">=</span><span class="token string">"è¯·è¾“å…¥å¯†ç æŸ¥çœ‹å†…å®¹"</span><span class="token operator">/</span><span class="token operator">></span>                    <span class="token operator">&lt;</span>a href<span class="token operator">=</span><span class="token string">"javascript:;"</span> <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">"btn-decrypt"</span> id<span class="token operator">=</span><span class="token string">"btn_decrypt"</span><span class="token operator">></span>è§£å¯†<span class="token operator">&lt;</span><span class="token operator">/</span>a<span class="token operator">></span>                <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">></span>            <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">></span>            <span class="token operator">&lt;</span>div  id<span class="token operator">=</span><span class="token string">"mygallery"</span><span class="token operator">></span>                <span class="token operator">&lt;</span>div <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">"waterfall"</span> id<span class="token operator">=</span><span class="token string">"encrypt-blog"</span> style<span class="token operator">=</span><span class="token string">"display:none"</span><span class="token operator">></span>                    <span class="token operator">&lt;</span><span class="token operator">%</span><span class="token operator">-</span> <span class="token function">aes</span><span class="token punctuation">(</span>imageStr<span class="token punctuation">,</span> page<span class="token punctuation">.</span>password<span class="token punctuation">)</span> <span class="token operator">%</span><span class="token operator">></span>                <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">></span>            <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">></span>        <span class="token operator">&lt;</span><span class="token operator">%</span> <span class="token punctuation">&#125;</span> <span class="token keyword">else</span> <span class="token punctuation">&#123;</span> <span class="token operator">%</span><span class="token operator">></span>            <span class="token operator">&lt;</span>div <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">"waterfall"</span> id<span class="token operator">=</span><span class="token string">"encrypt-blog"</span><span class="token operator">></span>                <span class="token operator">&lt;</span><span class="token operator">%</span><span class="token operator">-</span> imageStr <span class="token operator">%</span><span class="token operator">></span>            <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">></span>        <span class="token operator">&lt;</span><span class="token operator">%</span> <span class="token punctuation">&#125;</span> <span class="token operator">%</span><span class="token operator">></span>    <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">></span><span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">></span><span class="token operator">&lt;</span>script src<span class="token operator">=</span><span class="token string">"/libs/fancybox/fancybox.js"</span><span class="token operator">></span><span class="token operator">&lt;</span><span class="token operator">/</span>script<span class="token operator">></span><span class="token operator">&lt;</span>script src<span class="token operator">=</span><span class="token string">"/libs/justifiedGallery/justifiedGallery.min.js"</span><span class="token operator">></span><span class="token operator">&lt;</span><span class="token operator">/</span>script<span class="token operator">></span><span class="token operator">&lt;</span>script<span class="token operator">></span>  <span class="token function">$</span><span class="token punctuation">(</span><span class="token string">"a[rel=example_group]"</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">fancybox</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token function">$</span><span class="token punctuation">(</span><span class="token string">"#encrypt-blog"</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">justifiedGallery</span><span class="token punctuation">(</span><span class="token punctuation">&#123;</span><span class="token literal-property property">margins</span><span class="token operator">:</span> <span class="token number">5</span><span class="token punctuation">,</span> <span class="token literal-property property">rowHeight</span><span class="token operator">:</span> <span class="token number">150</span><span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token operator">&lt;</span><span class="token operator">/</span>script<span class="token operator">></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><ul><li><div class="uk-alert uk-alert-danger"><i class="fas fa-exclamation-triangle"></i> éœ€è¦å‡ ä¸ªæ–‡ä»¶ï¼Œæˆ‘æŠŠæ–‡ä»¶åœ°å€æ”¾åœ¨ä¸‹é¢ï¼Œç”¨æµè§ˆå™¨æ‰“å¼€é“¾æ¥ï¼Œå°±ä¼šæ˜¾ç¤ºå‡ºä»£ç ï¼Œç„¶åå¤åˆ¶ç²˜è´´åˆ°æ–‡åŠ ä¸­å»å°±è¡Œã€‚å¼€å¤´çš„æ˜¯æ–‡ä»¶è·¯å¾„ï¼Œå¦‚æœæ²¡æœ‰çš„è¯ï¼Œå°±æ–°å»ºä¸€ä¸ªå°± OK äº†ã€‚</div></li><li><p><code>hemes\hexo-theme-matery\source\libs\fancybox\jquery.fancybox.css</code></p><p><a href="https://cdn.jsdelivr.net/gh/Yafine/cdn@3.3.4/source/libs/fancybox/jquery.fancybox.css">https://cdn.jsdelivr.net/gh/Yafine/cdn@3.3.4/source/libs/fancybox/jquery.fancybox.css</a></p></li><li><p><code>themes\hexo-theme-matery\source\libs\fancybox\fancybox.js</code></p><p><a href="https://cdn.jsdelivr.net/gh/Yafine/cdn@3.3.4/source/libs/fancybox/fancybox.js">https://cdn.jsdelivr.net/gh/Yafine/cdn@3.3.4/source/libs/fancybox/fancybox.js</a></p></li><li><p><code>themes\hexo-theme-matery\source\libs\justifiedGallery\justifiedGallery.min.css</code></p><p><a href="https://cdn.jsdelivr.net/gh/Yafine/cdn@3.3.4/source/libs/justifiedGallery/justifiedGallery.min.css">https://cdn.jsdelivr.net/gh/Yafine/cdn@3.3.4/source/libs/justifiedGallery/justifiedGallery.min.css</a></p></li><li><p><code>themes\hexo-theme-matery\source\libs\justifiedGallery\justifiedGallery.min.js</code></p><p><a href="https://cdn.jsdelivr.net/gh/Yafine/cdn@3.3.4/source/libs/justifiedGallery/justifiedGallery.min.js">https://cdn.jsdelivr.net/gh/Yafine/cdn@3.3.4/source/libs/justifiedGallery/justifiedGallery.min.js</a></p></li><li><p><code>hemes\hexo-theme-matery\source\js\crypto-js.js</code></p><p><a href="https://cdn.jsdelivr.net/gh/Yafine/cdn@3.3.4/source/js/crypto-js.js">https://cdn.jsdelivr.net/gh/Yafine/cdn@3.3.4/source/js/crypto-js.js</a></p></li><li><p><code>hemes\hexo-theme-matery\source\js\gallery-encrypt.js</code></p><p><a href="https://cdn.jsdelivr.net/gh/Yafine/cdn@3.3.4/source/js/gallery-encrypt.js">https://cdn.jsdelivr.net/gh/Yafine/cdn@3.3.4/source/js/gallery-encrypt.js</a></p></li></ul><blockquote><p>é“¾æ¥æœ‰å¯èƒ½å¤±æ•ˆï¼Œè¿™é‡Œæä¾›å‹ç¼©åŒ…ä¸‹è½½</p><p><a href="https://zhangtq-blog.oss-cn-hangzhou.aliyuncs.com/gallery-css-js/gallery-css-js.zip">ç‚¹å‡»ä¸‹è½½</a></p></blockquote><h2 id="ç›¸å†ŒåŠ å¯†"><a href="#ç›¸å†ŒåŠ å¯†" class="headerlink" title="ç›¸å†ŒåŠ å¯†"></a>ç›¸å†ŒåŠ å¯†</h2><ul><li>ä¾èµ–äºä¸Šé¢çš„çš„<code>crypto-js.js</code>å’Œ<code>gallery-encrypt.js</code>æ”¾åˆ°ç›¸åŒçš„ç›®å½•ä¸‹å°±å¯ä»¥</li></ul><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token function">npm</span> <span class="token function">install</span> <span class="token parameter variable">--save</span> hexo-blog-encrypt<span class="token function">npm</span> <span class="token function">install</span> crypto-js<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre><ul><li><code>vi themes\hexo-theme-matery\_config.yml</code> ä¿®æ”¹enableä¸ºTrue</li></ul><pre class="line-numbers language-yaml" data-language="yaml"><code class="language-yaml"><span class="token key atrule">verifyPassword</span><span class="token punctuation">:</span>  <span class="token key atrule">enable</span><span class="token punctuation">:</span> <span class="token boolean important">True</span>  <span class="token key atrule">promptMessage</span><span class="token punctuation">:</span> è¯·è¾“å…¥è®¿é—®æœ¬æ–‡ç« çš„å¯†ç   <span class="token key atrule">errorMessage</span><span class="token punctuation">:</span> å¯†ç é”™è¯¯ï¼Œå°†è¿”å›ä¸»é¡µï¼<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre><ul><li>æ–°å»ºå¦‚ä¸‹<code> themes\hexo-theme-matery\scripts\helpers\</code> ç›®å½•ï¼Œå¦‚æœç›®å½•ä¸å­˜åœ¨å…ˆæ–°å»ºç›®å½•</li><li>åœ¨encrypt.jæ–‡ä»¶ä¸­åŠ å…¥å¦‚ä¸‹å†…å®¹</li></ul><pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token comment">/* global hexo */</span><span class="token string">'use strict'</span><span class="token punctuation">;</span><span class="token keyword">const</span> CryptoJS <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'crypto-js'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>hexo<span class="token punctuation">.</span>extend<span class="token punctuation">.</span>helper<span class="token punctuation">.</span><span class="token function">register</span><span class="token punctuation">(</span><span class="token string">'aes'</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">content<span class="token punctuation">,</span>password</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>  content <span class="token operator">=</span> <span class="token function">escape</span><span class="token punctuation">(</span>content<span class="token punctuation">)</span><span class="token punctuation">;</span>  content <span class="token operator">=</span> CryptoJS<span class="token punctuation">.</span>enc<span class="token punctuation">.</span>Utf8<span class="token punctuation">.</span><span class="token function">parse</span><span class="token punctuation">(</span>content<span class="token punctuation">)</span><span class="token punctuation">;</span>  content <span class="token operator">=</span> CryptoJS<span class="token punctuation">.</span>enc<span class="token punctuation">.</span>Base64<span class="token punctuation">.</span><span class="token function">stringify</span><span class="token punctuation">(</span>content<span class="token punctuation">)</span><span class="token punctuation">;</span>  content <span class="token operator">=</span> CryptoJS<span class="token punctuation">.</span><span class="token constant">AES</span><span class="token punctuation">.</span><span class="token function">encrypt</span><span class="token punctuation">(</span>content<span class="token punctuation">,</span> <span class="token function">String</span><span class="token punctuation">(</span>password<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token keyword">return</span> content<span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><ul><li>åœ¨<code>themes\hexo-theme-matery\source\css\</code> çš„my.cssä¸­æ·»åŠ å¦‚ä¸‹å†…å®¹</li></ul><pre class="line-numbers language-css" data-language="css"><code class="language-css"><span class="token selector">.hbe-input-container  .btn-decrypt</span><span class="token punctuation">&#123;</span>  <span class="token property">display</span><span class="token punctuation">:</span> inline-block<span class="token punctuation">;</span>  <span class="token property">vertical-align</span><span class="token punctuation">:</span> top<span class="token punctuation">;</span>  <span class="token property">width</span><span class="token punctuation">:</span> 120px<span class="token punctuation">;</span>  <span class="token property">height</span><span class="token punctuation">:</span> 32px<span class="token punctuation">;</span>  <span class="token property">line-height</span><span class="token punctuation">:</span> 32px<span class="token punctuation">;</span>  <span class="token property">font-size</span><span class="token punctuation">:</span> 16px<span class="token punctuation">;</span>  <span class="token property">color</span><span class="token punctuation">:</span> #ffffff<span class="token punctuation">;</span>  <span class="token property">background-color</span><span class="token punctuation">:</span> #3f90ff<span class="token punctuation">;</span>  <span class="token property">text-align</span><span class="token punctuation">:</span> center<span class="token punctuation">;</span>  <span class="token property">-webkit-border-radius</span><span class="token punctuation">:</span> 3px<span class="token punctuation">;</span>  <span class="token property">-moz-border-radius</span><span class="token punctuation">:</span> 3px<span class="token punctuation">;</span>  <span class="token property">border-radius</span><span class="token punctuation">:</span> 3px<span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><ul><li>è‡³æ­¤ï¼Œæ·»åŠ å¯†ç åŠŸèƒ½å°±å®ç°äº†</li><li>åœ¨æ–°å»ºçš„ <strong><a href="http://index.md/">index.md</a></strong> æ–‡ç« å†…æ·»åŠ  <strong>password</strong>å±æ€§ï¼Œåé¢å†™ä¸Šä½ çš„å¯†ç å³å¯ï¼Œç„¶åæ‰§è¡Œå‘½ä»¤ï¼ŒæŸ¥çœ‹æœ¬åœ°æ•ˆæœå³å¯**<em>æ³¨æ„ï¼šå¯†ç éœ€è¦ç»è¿‡sha256åŠ å¯†</em>ï¼Œ è¿™é‡Œæä¾›åŠ å¯†ç½‘ç«™<a href="http://www.ttmd5.com/hash.php">åœ¨çº¿åŠ å¯†ç½‘ç«™</a></li></ul><h2 id="ä¸€çº§èœå•æˆ–äºŒçº§èœå•é¡µé¢æ”¹æˆå‹é“¾å½¢å¼"><a href="#ä¸€çº§èœå•æˆ–äºŒçº§èœå•é¡µé¢æ”¹æˆå‹é“¾å½¢å¼" class="headerlink" title="ä¸€çº§èœå•æˆ–äºŒçº§èœå•é¡µé¢æ”¹æˆå‹é“¾å½¢å¼"></a>ä¸€çº§èœå•æˆ–äºŒçº§èœå•é¡µé¢æ”¹æˆå‹é“¾å½¢å¼</h2><ul><li><code>themes\hexo-theme-matery\_config.yml</code> è¿™é‡Œä»¥äºŒçº§èœå•ä¹¦ç±ä¸ºä¾‹</li></ul><pre class="line-numbers language-yaml" data-language="yaml"><code class="language-yaml"><span class="token key atrule">Friends</span><span class="token punctuation">:</span>  <span class="token key atrule">url</span><span class="token punctuation">:</span> /friends  <span class="token key atrule">icon</span><span class="token punctuation">:</span> fas fa<span class="token punctuation">-</span>address<span class="token punctuation">-</span>book<span class="token comment"># äºŒçº§èœå•å†™æ³•å¦‚ä¸‹</span><span class="token key atrule">åª’ä½“</span><span class="token punctuation">:</span>  <span class="token key atrule">icon</span><span class="token punctuation">:</span> fas fa<span class="token punctuation">-</span>list  <span class="token key atrule">children</span><span class="token punctuation">:</span>    <span class="token punctuation">-</span> <span class="token key atrule">name</span><span class="token punctuation">:</span> ç›¸å†Œ      <span class="token key atrule">url</span><span class="token punctuation">:</span> /galleries      <span class="token key atrule">icon</span><span class="token punctuation">:</span> fas fa<span class="token punctuation">-</span>image    <span class="token punctuation">-</span> <span class="token key atrule">name</span><span class="token punctuation">:</span> ä¹¦ç±      <span class="token key atrule">url</span><span class="token punctuation">:</span> /books      <span class="token key atrule">icon</span><span class="token punctuation">:</span> fas fa<span class="token punctuation">-</span>book<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><ul><li><code>vi themes\hexo-theme-matery\languages\zh-CN.yml</code> æ·»åŠ å¦‚ä¸‹å†…å®¹</li><li>è¿™ä¸€æ­¥ç›¸å½“äºåšäº†ä¸­è‹±æ–‡å¯¹ç…§ï¼Œä½¿é¡µé¢ä¸‹çš„å¤§æ ‡é¢˜å’Œèœå•ä¸­æ–‡ä¸€è‡´ï¼Œå¦‚æœä¸åšçš„è¯ï¼Œåœ¨é¡µé¢ä¸Šä¼šç›´æ¥æ˜¾ç¤ºbooks,è€Œä¸æ˜¯ä¹¦ç±</li></ul><pre class="line-numbers language-yaml" data-language="yaml"><code class="language-yaml"><span class="token key atrule">books</span><span class="token punctuation">:</span> ä¹¦ç± <span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><ul><li><code>hexo new page books</code></li><li><code>vi source\books\index.md</code> æ›¿æ¢ä¸ºå¦‚ä¸‹å†…å®¹</li></ul><pre class="line-numbers language-json" data-language="json"><code class="language-json">---title<span class="token operator">:</span> booksdate<span class="token operator">:</span> <span class="token number">2022</span><span class="token number">-11</span><span class="token number">-27</span> <span class="token number">20</span><span class="token operator">:</span><span class="token number">53</span><span class="token operator">:</span><span class="token number">29</span>type<span class="token operator">:</span> <span class="token string">"books"</span>layout<span class="token operator">:</span> <span class="token string">"books"</span>---<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><ul><li>æ‹·è´friends.ejæ–‡ä»¶ä½œä¸ºbooks.ejs</li></ul><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token function">cp</span> themes<span class="token punctuation">\</span>hexo-theme-matery<span class="token punctuation">\</span>layout<span class="token punctuation">\</span>friends.ejs themes<span class="token punctuation">\</span>hexo-theme-matery<span class="token punctuation">\</span>layout<span class="token punctuation">\</span>books.ejs<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><ul><li>ä¿®æ”¹books.ejs</li></ul><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token function">vi</span> themes<span class="token punctuation">\</span>hexo-theme-matery<span class="token punctuation">\</span>layout<span class="token punctuation">\</span>books.ejs<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><ul><li>æ‰“å¼€ musics.ejs æ–‡æœ¬å†…æœç´¢ friends ï¼ŒæŠŠå®ƒä»¬æ”¹æˆ booksï¼Œ<strong>æ³¨æ„å®šä¹‰çš„ class å’Œ id å†…çš„ä¸è¦æ”¹ï¼Œåªæ”¹å˜é‡</strong>ï¼Œæ›´æ”¹ç›®æ ‡ä¸ºä¸‹å›¾é«˜äº®éƒ¨åˆ†</li></ul><p><img src="https://zhangtq-blog.oss-cn-hangzhou.aliyuncs.com/content_picture/image-20221128001429060.png" alt="image-20221128001429060"></p><ul><li>å¤åˆ¶friends.json æ–‡ä»¶ä¸ºbooks.json</li></ul><pre class="line-numbers language-yaml" data-language="yaml"><code class="language-yaml">cp source\_data\friends.json source\_data\books.json<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><ul><li>hexo g &amp;&amp; hexo s</li><li>è‡³æ­¤å°±ä¼šå°†é¡µé¢æ”¹ä¸ºå‹é“¾æ ·å¼ï¼Œåç»­åªéœ€è¦åœ¨books.jsonä¸­ä¿®æ”¹å…·ä½“å†…å®¹å°±å¯ä»¥äº†</li></ul><h2 id="è‡ªå®šä¹‰èœå•ä¸‹å‹é“¾æ ·å¼ä¿®æ”¹"><a href="#è‡ªå®šä¹‰èœå•ä¸‹å‹é“¾æ ·å¼ä¿®æ”¹" class="headerlink" title="è‡ªå®šä¹‰èœå•ä¸‹å‹é“¾æ ·å¼ä¿®æ”¹"></a>è‡ªå®šä¹‰èœå•ä¸‹å‹é“¾æ ·å¼ä¿®æ”¹</h2><ul><li>ä¿®æ”¹ç¼©ç•¥å›¾è¾¹æ¡†ä¸ºæ–¹å½¢ï¼ˆå¤§å¤šå›¾ç‰‡æ˜¯æ–¹å½¢çš„ï¼Œè¿™æ ·åç»­æ·»åŠ å†…å®¹ä¼šæ›´ç¾è§‚ï¼‰</li><li>ä»¥ä¸‹æ­¥éª¤å…¶å®å°±æ˜¯æ‰¾åˆ°ä½ èœå•è¯¦æƒ…é¡µé¢çš„jsæ–‡ä»¶ï¼Œåšå‡ºä¿®æ”¹</li></ul><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token function">vi</span> themes<span class="token punctuation">\</span>hexo-theme-matery<span class="token punctuation">\</span>layout<span class="token punctuation">\</span>books.ejs<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><ul><li>è¿™ä¸ªå±æ€§æ˜¯æ§åˆ¶å¼¯æ›²åº¦çš„</li></ul><pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token punctuation">.</span>frind<span class="token operator">-</span>ship img <span class="token punctuation">&#123;</span>border<span class="token operator">-</span>radius<span class="token operator">:</span> 15px<span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre><ul><li>ä¿®æ”¹é«˜åº¦ï¼Œè¿˜æ˜¯ä¸Šé¢è¿™ä¸ªæ–‡ä»¶,ç”±äºæˆ‘åæ¥å¯¹å¡ç‰‡å†…å®¹åšäº†è°ƒæ•´ï¼Œåæ¥å€¼æœ‰æ‰€å˜åŒ–ï¼ŒæŒ‰éœ€ä¿®æ”¹widthå’Œheightå€¼å°±å¯ä»¥äº†</li></ul><pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token punctuation">.</span>frind<span class="token operator">-</span>ship <span class="token punctuation">.</span>title img <span class="token punctuation">&#123;</span><span class="token literal-property property">width</span><span class="token operator">:</span> 100px<span class="token punctuation">;</span><span class="token literal-property property">height</span><span class="token operator">:</span> 167px<span class="token punctuation">;</span>flex<span class="token operator">-</span>shrink<span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre><ul><li>å¢åŠ æ˜¾ç¤ºå¡ç‰‡å†…å®¹</li><li>å…ˆçœ‹æ•ˆæœå›¾</li></ul><p><img src="https://zhangtq-blog.oss-cn-hangzhou.aliyuncs.com/content_picture/image-20221128002626121.png" alt="image-20221128002626121"></p><ul><li>è¿˜æ˜¯ä¸Šé¢çš„æ–‡ä»¶,å¤§çº¦210è¡Œé™„è¿‘ï¼Œè¿™å—çš„å†…å®¹å¯ä»¥è‡ªå®šä»¥ï¼Œæ³¨æ„å–å€¼å’Œjson æ–‡ä»¶çš„å­—æ®µç›¸åŒå°±è¡Œ</li></ul><pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token operator">&lt;</span>div <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">"title"</span><span class="token operator">></span>    <span class="token operator">&lt;</span>img src<span class="token operator">=</span><span class="token string">"&lt;%- url_for(friend.avatar) %>"</span> alt<span class="token operator">=</span><span class="token string">"img"</span><span class="token operator">></span>    <span class="token operator">&lt;</span>div<span class="token operator">></span>        <span class="token operator">&lt;</span>h5<span class="token operator">></span><span class="token operator">&lt;</span><span class="token operator">%=</span> friend<span class="token punctuation">.</span>name <span class="token operator">%</span><span class="token operator">></span><span class="token operator">&lt;</span><span class="token operator">/</span>h5<span class="token operator">></span>        <span class="token operator">&lt;</span>h5<span class="token operator">></span><span class="token operator">&lt;</span><span class="token operator">%=</span> friend<span class="token punctuation">.</span>type <span class="token operator">%</span><span class="token operator">></span><span class="token operator">&lt;</span><span class="token operator">/</span>h5<span class="token operator">></span>        <span class="token operator">&lt;</span>h5<span class="token operator">></span><span class="token operator">&lt;</span><span class="token operator">%=</span> friend<span class="token punctuation">.</span>recommendation <span class="token operator">%</span><span class="token operator">></span><span class="token operator">&lt;</span><span class="token operator">/</span>h5<span class="token operator">></span>        <span class="token operator">&lt;</span><span class="token operator">!</span><span class="token operator">--</span> <span class="token operator">&lt;</span>h5<span class="token operator">></span><span class="token operator">&lt;</span><span class="token operator">%=</span> friend<span class="token punctuation">.</span>process <span class="token operator">%</span><span class="token operator">></span><span class="token operator">&lt;</span><span class="token operator">/</span>h5<span class="token operator">></span> <span class="token operator">--</span><span class="token operator">></span>    <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">></span><span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><ul><li>ä¿®æ”¹books.jsonæ–‡ä»¶</li></ul><pre class="line-numbers language-json" data-language="json"><code class="language-json"><span class="token punctuation">[</span>    <span class="token punctuation">&#123;</span>    <span class="token property">"avatar"</span><span class="token operator">:</span> <span class="token string">"https://zhangtq-gallery.oss-cn-hangzhou.aliyuncs.com/fenmian/s34144077.jpg"</span><span class="token punctuation">,</span>    <span class="token property">"name"</span><span class="token operator">:</span> <span class="token string">"æ·±å…¥ç†è§£åˆ†å¸ƒå¼ç³»ç»Ÿ"</span><span class="token punctuation">,</span><span class="token property">"type"</span><span class="token operator">:</span> <span class="token string">"ç§‘æŠ€/äº’è”ç½‘"</span><span class="token punctuation">,</span><span class="token property">"recommendation"</span><span class="token operator">:</span> <span class="token string">"â˜…â˜…â˜…â˜…"</span><span class="token punctuation">,</span><span class="token property">"process"</span><span class="token operator">:</span> <span class="token string">"åœ¨çœ‹ing"</span><span class="token punctuation">,</span>    <span class="token property">"url"</span><span class="token operator">:</span> <span class="token string">"https://book.douban.com/subject/35794814/"</span><span class="token punctuation">,</span>    <span class="token property">"title"</span><span class="token operator">:</span> <span class="token string">"äº†è§£ä¹¦ç±"</span><span class="token punctuation">&#125;</span><span class="token punctuation">,</span> <span class="token punctuation">&#123;</span>    <span class="token property">"avatar"</span><span class="token operator">:</span> <span class="token string">"https://zhangtq-gallery.oss-cn-hangzhou.aliyuncs.com/fenmian/s29434304.jpg"</span><span class="token punctuation">,</span>    <span class="token property">"name"</span><span class="token operator">:</span> <span class="token string">"æµç•…çš„Python"</span><span class="token punctuation">,</span>    <span class="token property">"type"</span><span class="token operator">:</span> <span class="token string">"äº’è”ç½‘/ç¼–ç¨‹"</span><span class="token punctuation">,</span><span class="token property">"recommendation"</span><span class="token operator">:</span> <span class="token string">"â˜…â˜…â˜…â˜…"</span><span class="token punctuation">,</span><span class="token property">"process"</span><span class="token operator">:</span> <span class="token string">"åœ¨çœ‹ing"</span><span class="token punctuation">,</span>    <span class="token property">"url"</span><span class="token operator">:</span> <span class="token string">"https://book.douban.com/subject/27028517/"</span><span class="token punctuation">,</span>    <span class="token property">"title"</span><span class="token operator">:</span> <span class="token string">"äº†è§£ä¹¦ç±"</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">,</span> <span class="token punctuation">&#123;</span>    <span class="token property">"avatar"</span><span class="token operator">:</span> <span class="token string">"https://zhangtq-gallery.oss-cn-hangzhou.aliyuncs.com/fenmian/s33964410.jpg"</span><span class="token punctuation">,</span>    <span class="token property">"name"</span><span class="token operator">:</span> <span class="token string">"Goè¯­è¨€åº•å±‚åŸç†å‰–æ"</span><span class="token punctuation">,</span><span class="token property">"type"</span><span class="token operator">:</span> <span class="token string">"äº’è”ç½‘/ç¼–ç¨‹"</span><span class="token punctuation">,</span><span class="token property">"recommendation"</span><span class="token operator">:</span> <span class="token string">"â˜…â˜…â˜…â˜…â˜…"</span><span class="token punctuation">,</span><span class="token property">"process"</span><span class="token operator">:</span> <span class="token string">"å·²çœ‹å®Œ(2020/9/22)"</span><span class="token punctuation">,</span>    <span class="token property">"url"</span><span class="token operator">:</span> <span class="token string">"https://book.douban.com/subject/35556889/"</span><span class="token punctuation">,</span>    <span class="token property">"title"</span><span class="token operator">:</span> <span class="token string">"äº†è§£ä¹¦ç±"</span><span class="token punctuation">&#125;</span><span class="token punctuation">]</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><ul><li>ä¸€çº§èœå•å’ŒäºŒçº§èœå•çš„æ”¹æ³•ç›¸åŒï¼Œåªæ˜¯åœ¨_config.yamlé‡Œé…ç½®çš„menu ä¸ä¸€è‡´ç½¢äº†</li></ul><pre class="line-numbers language-yaml" data-language="yaml"><code class="language-yaml"><span class="token key atrule">Friends</span><span class="token punctuation">:</span>  <span class="token key atrule">url</span><span class="token punctuation">:</span> /friends  <span class="token key atrule">icon</span><span class="token punctuation">:</span> fas fa<span class="token punctuation">-</span>address<span class="token punctuation">-</span>book<span class="token comment"># äºŒçº§èœå•å†™æ³•å¦‚ä¸‹</span><span class="token key atrule">åª’ä½“</span><span class="token punctuation">:</span>  <span class="token key atrule">icon</span><span class="token punctuation">:</span> fas fa<span class="token punctuation">-</span>list  <span class="token key atrule">children</span><span class="token punctuation">:</span>    <span class="token punctuation">-</span> <span class="token key atrule">name</span><span class="token punctuation">:</span> ç›¸å†Œ      <span class="token key atrule">url</span><span class="token punctuation">:</span> /galleries      <span class="token key atrule">icon</span><span class="token punctuation">:</span> fas fa<span class="token punctuation">-</span>image    <span class="token punctuation">-</span> <span class="token key atrule">name</span><span class="token punctuation">:</span> ä¹¦ç±      <span class="token key atrule">url</span><span class="token punctuation">:</span> /books      <span class="token key atrule">icon</span><span class="token punctuation">:</span> fas fa<span class="token punctuation">-</span>book<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><pre class="line-numbers language-yaml" data-language="yaml"><code class="language-yaml"><span class="token comment"># ä¸€çº§èœå•å†™æ³•å¦‚ä¸‹</span><span class="token key atrule">Friends</span><span class="token punctuation">:</span>  <span class="token key atrule">url</span><span class="token punctuation">:</span> /friends  <span class="token key atrule">icon</span><span class="token punctuation">:</span> fas fa<span class="token punctuation">-</span>address<span class="token punctuation">-</span>bookä¹¦ç±ï¼š<span class="token key atrule">url</span><span class="token punctuation">:</span> /books<span class="token key atrule">icon</span><span class="token punctuation">:</span> fas fa<span class="token punctuation">-</span>book<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><ul><li>æ³¨æ„å¤´åƒé“¾æ¥ï¼Œå¯ä»¥ä¸‹è½½ä¸‹æ¥æ”¾åˆ°è‡ªå·±çš„å›¾åºŠä¸Šæ¯”å¦‚oss ï¼Œé˜²æ­¢ä¸èƒ½è®¿é—®ï¼Œç›®å‰è±†ç“£çš„å¤´åƒä¼šæœ‰é™åˆ¶</li></ul><h1 id="hexo-typora-oss-æœ€ä½³å®è·µ"><a href="#hexo-typora-oss-æœ€ä½³å®è·µ" class="headerlink" title="hexo+ typora+ oss æœ€ä½³å®è·µ"></a>hexo+ typora+ oss æœ€ä½³å®è·µ</h1><div class="uk-alert uk-alert-danger"><i class="fas fa-exclamation-triangle"></i> ä¸æ¨èé€šè¿‡æ–¹å¼ä¸€ä¸‹è½½æ’ä»¶çš„æ–¹å¼æ¥æ˜¾ç¤ºå›¾ç‰‡ï¼Œè¿™é‡Œä¼šæä¾›æ–¹æ³•ä½†æ˜¯å¼ºçƒˆå»ºè®®ä½¿ç”¨æ–¹å¼äºŒ</div><h3 id="æ–¹å¼ä¸€"><a href="#æ–¹å¼ä¸€" class="headerlink" title="æ–¹å¼ä¸€"></a>æ–¹å¼ä¸€</h3><ul><li>ä¿®æ”¹åšå®¢æ ¹ç›®å½•ä¸­<code>_config.yml</code>æ–‡ä»¶çš„é…ç½®é¡¹<code>post_asset_folder</code>ä¸º<code>true</code>ï¼š</li><li>å®Œæˆæ­¤è®¾ç½®åï¼Œå½“ä½ é€šè¿‡<code>hexo new æ–‡ä»¶å</code>æ–°å»ºåšå®¢åï¼Œä¼šäº§ç”Ÿä¸€ä¸ªå’Œæ–‡ä»¶åŒåçš„æ–‡ä»¶å¤¹ã€‚</li><li>ä¸‹è½½æ’ä»¶ npm install <a href="https://github.com/CodeFalling/hexo-asset-image">https://github.com/CodeFalling/hexo-asset-image</a> â€“save</li><li>å½“æ–‡ç« éœ€è¦æ·»åŠ å›¾ç‰‡æ—¶ï¼Œå°†éœ€è¦æ·»åŠ çš„å›¾ç‰‡æ”¾å…¥åŒåçš„æ–‡ä»¶å¤¹ä¸­ï¼ŒåŒæ—¶é€šè¿‡ç›¸å¯¹è·¯å¾„ç´¢å¼•åˆ°è¯¥å›¾ç‰‡</li><li>åœ¨typoraä¸­è®¾ç½®ï¼š æ–‡ä»¶â€“&gt;åå¥½è®¾ç½®â€“&gt;å›¾åƒ</li></ul><p><img src="https://www.freesion.com/images/433/1b1e2e6531d46b4b8c32e82084e30819.png" alt="1587393533151"></p><ul><li>ä»¥åç›´æ¥ç²˜è´´å›¾ç‰‡å°±å¯ä»¥è‡ªåŠ¨ä¿å­˜åˆ° hexo é…ç½®çš„ post_asset_folder æ–‡ä»¶å¤¹é‡Œ,è‡ªåŠ¨æ¸²æŸ“äº†</li><li>ç›´æ¥æ¸²æŸ“æ—¶ä¼šå‘ç°æ˜¾ç¤ºä¸äº†ï¼Œæ­¤æ—¶éœ€è¦åœ¨typoraä¸­å°†å›¾ç‰‡è·¯å¾„å‰çš„æ–‡ä»¶ç›®å½•å»é™¤</li><li>å¯ä»¥é€šè¿‡typorä¸­æ‰¹é‡æ›¿æ¢çš„æ–¹å¼ï¼Œä½†æ˜¯æ›¿æ¢ååœ¨typoraä¸­åˆä¸èƒ½æ˜¾ç¤ºäº†ï¼Œç½‘é¡µæ˜¾ç¤ºæ­£å¸¸</li></ul><h3 id="æ–¹å¼äºŒé€šè¿‡é˜¿é‡Œäº‘osså›¾åºŠ"><a href="#æ–¹å¼äºŒé€šè¿‡é˜¿é‡Œäº‘osså›¾åºŠ" class="headerlink" title="æ–¹å¼äºŒé€šè¿‡é˜¿é‡Œäº‘osså›¾åºŠ"></a>æ–¹å¼äºŒé€šè¿‡é˜¿é‡Œäº‘osså›¾åºŠ</h3><ul><li><p>é˜¿é‡Œäº‘çš„æ“ä½œå°±ä¸å†è¿™é‡Œè¯¦è°ˆäº†ï¼Œæœ‰ä¸€ç‚¹æ³¨æ„çš„ä½¿åˆ›å»ºbucketåéœ€è¦å°†buckeetæ”¹ä¸ºå…¬å¼€</p></li><li><p>é…ç½®typoraï¼š æ–‡ä»¶â€“&gt;åå¥½è®¾ç½®</p></li><li><p><img src="https://zhangtq-blog.oss-cn-hangzhou.aliyuncs.com/content_picture/image-20221126194736863.png" alt="image-20221126194736863"></p></li><li><p>åœ¨è¿›è¡Œç¬¬äº”æ­¥æ‰“å¼€é…ç½®æ–‡ä»¶æ·»åŠ å¦‚ä¸‹å†…å®¹</p></li></ul><pre class="line-numbers language-json" data-language="json"><code class="language-json"><span class="token punctuation">&#123;</span>  <span class="token property">"picBed"</span><span class="token operator">:</span> <span class="token punctuation">&#123;</span>    <span class="token property">"uploader"</span><span class="token operator">:</span> <span class="token string">"aliyun"</span><span class="token punctuation">,</span>    <span class="token property">"aliyun"</span><span class="token operator">:</span> <span class="token punctuation">&#123;</span>      <span class="token property">"accessKeyId"</span><span class="token operator">:</span> <span class="token string">"****"</span><span class="token punctuation">,</span>      <span class="token property">"accessKeySecret"</span><span class="token operator">:</span> <span class="token string">"*****"</span><span class="token punctuation">,</span>      <span class="token property">"bucket"</span><span class="token operator">:</span> <span class="token string">"zhangtq-blog"</span><span class="token punctuation">,</span><span class="token comment">//æ¢æˆä½ è‡ªå·±çš„Bucketåç§°</span>      <span class="token property">"area"</span><span class="token operator">:</span> <span class="token string">"oss-cn-hangzhou"</span><span class="token punctuation">,</span><span class="token comment">//OSSæ¦‚è§ˆé‡Œçš„EndPoint(åœ°åŸŸèŠ‚ç‚¹)ï¼Œâ€œ.â€å‰é¢çš„å†…å®¹</span>      <span class="token property">"path"</span><span class="token operator">:</span> <span class="token string">"content_picture/"</span><span class="token punctuation">,</span><span class="token comment">//Bucketä¸‹çš„æ–‡ä»¶å¤¹ï¼Œæ²¡æœ‰å¯ä»¥ä¸å†™ï¼Œé»˜è®¤ä¸è¦æ–‡ä»¶å¤¹</span>      <span class="token property">"customUrl"</span><span class="token operator">:</span> <span class="token string">"https://*******.aliyuncs.com"</span><span class="token punctuation">,</span><span class="token comment">//OSSæ¦‚è§ˆé‡Œçš„BucketåŸŸå(å¼€å¤´åŠ ä¸Šhttps://)</span>      <span class="token property">"options"</span><span class="token operator">:</span> <span class="token string">""</span><span class="token comment">//å¯ä»¥ä¸å†™</span>    <span class="token punctuation">&#125;</span>  <span class="token punctuation">&#125;</span><span class="token punctuation">,</span>  <span class="token property">"picgoPlugins"</span><span class="token operator">:</span> <span class="token punctuation">&#123;</span>  <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><ul><li>è‡³æ­¤ï¼Œæ¯æ¬¡æˆ‘ä»¬å¤åˆ¶å›¾ç‰‡åˆ°typoraä¸­åï¼Œéƒ½ä¼šè‡ªåŠ¨ä¸Šä¼ è‡³ossï¼ŒåŒæ—¶åœ¨mdæ–‡ä»¶ä¸­è‡ªåŠ¨å¼•ç”¨url</li></ul><blockquote><p>æœ€å¼€æ˜¯åšä¸»æ˜¯æŒ‰ç…§å¤§å¤šæ•°äººä¸€æ ·ï¼Œé€šè¿‡åœ¨æ ¹ç›®å½•ä¸‹è®¾ç½®post_asset_folder: trueï¼Œè¿™æ ·æ¯æ¬¡hexo new æ–‡ä»¶ååä¼šäº§ç”Ÿä¸€ä¸ªåŒåçš„æ–‡ä»¶å¤¹</p></blockquote>]]></content>
      
      
      <categories>
          
          <category> hexo </category>
          
      </categories>
      
      
        <tags>
            
            <tag> hexo-theme-matery </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>leetcodeç®—æ³•é¢˜II</title>
      <link href="/posts/45160.html"/>
      <url>/posts/45160.html</url>
      
        <content type="html"><![CDATA[<h1 id="å‰è¨€"><a href="#å‰è¨€" class="headerlink" title="å‰è¨€"></a>å‰è¨€</h1><blockquote><p>æ—¶é—´å¤æ‚åº¦ä¸ç©ºé—´å¤æ‚åº¦åˆ†æä½œä¸ºæ•°æ®ç»“æ„ä¸ç®—æ³•çš„ç¬¬ä¸€è¯¾ï¼Œçœ‹å¤šå°‘ä¾¿éƒ½ä¸è¿‡åˆ†ï¼Œå»ºè®®å¤šçœ‹çœ‹ï¼Œè¿™é‡Œæ¨èä¸¤ç¯‡æ–‡ç« </p></blockquote><ul><li><a href="https://mp.weixin.qq.com/s?__biz=MzI0NjAxMDU5NA==&mid=2475918746&idx=1&sn=3fe42234a1f07fb084d11fe06fb24893&chksm=ff22e217c8556b019b9052f9d4805174385ba4c8c099216fa226dbd1b033a9a49782579e4b75&token=1996171232&lang=zh_CN#rd">ä¿å§†çº§æ•™å­¦ï¼å½»åº•å­¦ä¼šæ—¶é—´å¤æ‚åº¦å’Œç©ºé—´å¤æ‚åº¦ (qq.com)</a></li><li><a href="https://www.cnblogs.com/biehongli/p/11672380.html">æ—¶é—´å¤æ‚åº¦o(1), o(n), o(logn), o(nlogn) - åˆ«å…ˆç”Ÿ - åšå®¢å›­ (cnblogs.com)</a></li></ul><h1 id="æ•°ç»„"><a href="#æ•°ç»„" class="headerlink" title="æ•°ç»„"></a>æ•°ç»„</h1><blockquote><p>æ•°ç»„æ˜¯ä¸€ç§åŸºç¡€çš„<strong>çº¿æ€§æ•°æ®ç»“æ„</strong>ï¼Œå®ƒæ˜¯ç”¨<strong>è¿ç»­çš„ä¸€æ®µå†…å­˜ç©ºé—´ï¼Œæ¥å­˜å‚¨ç›¸åŒæ•°æ®ç±»å‹</strong>æ•°æ®çš„é›†åˆ</p><p>ä¸¤ä¸ªé‡ç‚¹ï¼š</p><ul><li>è¿ç»­å†…å­˜ç©ºé—´</li><li>ç›¸åŒæ•°æ®ç±»å‹</li></ul></blockquote><p><img src="https://zhangtq-blog.oss-cn-hangzhou.aliyuncs.com/content_picture/image-20221130225923967.png" alt="image-20221130225923967"></p><h2 id="è§£å†³æ•°ç»„é—®é¢˜å¸¸ç”¨çš„åŒæŒ‡é’ˆå’Œå¿«æ…¢æŒ‡é’ˆ"><a href="#è§£å†³æ•°ç»„é—®é¢˜å¸¸ç”¨çš„åŒæŒ‡é’ˆå’Œå¿«æ…¢æŒ‡é’ˆ" class="headerlink" title="è§£å†³æ•°ç»„é—®é¢˜å¸¸ç”¨çš„åŒæŒ‡é’ˆå’Œå¿«æ…¢æŒ‡é’ˆ"></a>è§£å†³æ•°ç»„é—®é¢˜å¸¸ç”¨çš„åŒæŒ‡é’ˆå’Œå¿«æ…¢æŒ‡é’ˆ</h2><div class="uk-alert uk-alert-danger"><i class="fas fa-exclamation-triangle"></i>  å¿«æ…¢æŒ‡é’ˆæ˜¯åŒæŒ‡é’ˆçš„ä¸€ç§ï¼Œå¿«æ…¢æŒ‡é’ˆé€šå¸¸æ˜¯ä»åŒä¾§å¼€å§‹ä¸å¼ºè°ƒæ˜¯å“ªç§ç±»å‹çš„åŒæŒ‡é’ˆï¼Œä¸€èˆ¬left ä»¥å·¦è¾¹ä¸ºèµ·å§‹ï¼Œ rightä»¥å³è¾¹ä¸ºèµ·å§‹ï¼Œä¸¤ä¾§å‘ä¸­é—´é æ‹¢çš„æ–¹å¼</div><h2 id="27-ç§»é™¤å…ƒç´ "><a href="#27-ç§»é™¤å…ƒç´ " class="headerlink" title="27.ç§»é™¤å…ƒç´ "></a><a href="https://leetcode.cn/problems/remove-element/">27.ç§»é™¤å…ƒç´ </a></h2><blockquote><p>ç»™ä½ ä¸€ä¸ªæ•°ç»„ nums å’Œä¸€ä¸ªå€¼ valï¼Œä½ éœ€è¦ åŸåœ° ç§»é™¤æ‰€æœ‰æ•°å€¼ç­‰äº val çš„å…ƒç´ ï¼Œå¹¶è¿”å›ç§»é™¤åæ•°ç»„çš„æ–°é•¿åº¦ã€‚ä¸è¦ä½¿ç”¨é¢å¤–çš„æ•°ç»„ç©ºé—´ï¼Œä½ å¿…é¡»ä»…ä½¿ç”¨ O(1) é¢å¤–ç©ºé—´å¹¶ åŸåœ° ä¿®æ”¹è¾“å…¥æ•°ç»„ã€‚å…ƒç´ çš„é¡ºåºå¯ä»¥æ”¹å˜ã€‚ä½ ä¸éœ€è¦è€ƒè™‘æ•°ç»„ä¸­è¶…å‡ºæ–°é•¿åº¦åé¢çš„å…ƒç´ ã€‚</p></blockquote><p>æ–¹æ³•ä¸€ï¼š åŒæŒ‡é’ˆ</p><pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token keyword">class</span> <span class="token class-name">Solution</span><span class="token punctuation">:</span>    <span class="token keyword">def</span> <span class="token function">removeElement</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> nums<span class="token punctuation">:</span> List<span class="token punctuation">[</span><span class="token builtin">int</span><span class="token punctuation">]</span><span class="token punctuation">,</span> val<span class="token punctuation">:</span> <span class="token builtin">int</span><span class="token punctuation">)</span> <span class="token operator">-</span><span class="token operator">></span> <span class="token builtin">int</span><span class="token punctuation">:</span>        n <span class="token operator">=</span> <span class="token builtin">len</span><span class="token punctuation">(</span>nums<span class="token punctuation">)</span> <span class="token operator">-</span><span class="token number">1</span>        left<span class="token punctuation">,</span> right <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">,</span> n        <span class="token keyword">while</span> left <span class="token operator">&lt;=</span> right<span class="token punctuation">:</span>            <span class="token keyword">if</span> nums<span class="token punctuation">[</span>left<span class="token punctuation">]</span> <span class="token operator">==</span> val<span class="token punctuation">:</span>                <span class="token keyword">while</span> left<span class="token operator">&lt;=</span> right <span class="token operator">&lt;=</span> n<span class="token punctuation">:</span>                    <span class="token keyword">if</span> nums<span class="token punctuation">[</span>right<span class="token punctuation">]</span> <span class="token operator">!=</span>val<span class="token punctuation">:</span>                        nums<span class="token punctuation">[</span>left<span class="token punctuation">]</span><span class="token punctuation">,</span> nums<span class="token punctuation">[</span>right<span class="token punctuation">]</span> <span class="token operator">=</span> nums<span class="token punctuation">[</span>right<span class="token punctuation">]</span><span class="token punctuation">,</span> nums<span class="token punctuation">[</span>left<span class="token punctuation">]</span>                        <span class="token keyword">print</span><span class="token punctuation">(</span>left<span class="token punctuation">,</span> right<span class="token punctuation">,</span> nums<span class="token punctuation">)</span>                        <span class="token keyword">break</span>                    <span class="token keyword">else</span><span class="token punctuation">:</span>                        nums<span class="token punctuation">.</span>pop<span class="token punctuation">(</span><span class="token punctuation">)</span>                        right <span class="token operator">-=</span> <span class="token number">1</span>            left <span class="token operator">+=</span> <span class="token number">1</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>æ–¹æ³•äºŒï¼šå¿«æ…¢æŒ‡é’ˆ</p><pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token keyword">class</span> <span class="token class-name">Solution</span><span class="token punctuation">:</span>    <span class="token keyword">def</span> <span class="token function">removeElement</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> nums<span class="token punctuation">:</span> List<span class="token punctuation">[</span><span class="token builtin">int</span><span class="token punctuation">]</span><span class="token punctuation">,</span> val<span class="token punctuation">:</span> <span class="token builtin">int</span><span class="token punctuation">)</span> <span class="token operator">-</span><span class="token operator">></span> <span class="token builtin">int</span><span class="token punctuation">:</span>        n <span class="token operator">=</span> <span class="token builtin">len</span><span class="token punctuation">(</span>nums<span class="token punctuation">)</span>        left<span class="token punctuation">,</span> right <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span>        <span class="token keyword">while</span> right<span class="token operator">&lt;</span>n<span class="token punctuation">:</span>            <span class="token keyword">if</span> nums<span class="token punctuation">[</span>right<span class="token punctuation">]</span> <span class="token operator">!=</span> val<span class="token punctuation">:</span>                nums<span class="token punctuation">[</span>left<span class="token punctuation">]</span> <span class="token operator">=</span> nums<span class="token punctuation">[</span>right<span class="token punctuation">]</span>                left <span class="token operator">+=</span> <span class="token number">1</span>            right <span class="token operator">+=</span> <span class="token number">1</span>        <span class="token keyword">return</span> left        <span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h2 id="59-èºæ—‹çŸ©é˜µ-II"><a href="#59-èºæ—‹çŸ©é˜µ-II" class="headerlink" title="59. èºæ—‹çŸ©é˜µ II"></a><a href="https://leetcode.cn/problems/spiral-matrix-ii/">59. èºæ—‹çŸ©é˜µ II</a></h2><blockquote><p>ç»™ä½ ä¸€ä¸ªæ­£æ•´æ•° <code>n</code> ï¼Œç”Ÿæˆä¸€ä¸ªåŒ…å« <code>1</code> åˆ° <code>n2</code> æ‰€æœ‰å…ƒç´ ï¼Œä¸”å…ƒç´ æŒ‰é¡ºæ—¶é’ˆé¡ºåºèºæ—‹æ’åˆ—çš„ <code>n x n</code> æ­£æ–¹å½¢çŸ©é˜µ <code>matrix</code> ã€‚</p></blockquote><p><img src="https://zhangtq-blog.oss-cn-hangzhou.aliyuncs.com/content_picture/image-20221201011720285.png" alt="image-20221201011720285"></p><pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token keyword">class</span> <span class="token class-name">Solution</span><span class="token punctuation">:</span>    <span class="token keyword">def</span> <span class="token function">generateMatrix</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> n<span class="token punctuation">:</span> <span class="token builtin">int</span><span class="token punctuation">)</span> <span class="token operator">-</span><span class="token operator">></span> List<span class="token punctuation">[</span>List<span class="token punctuation">[</span><span class="token builtin">int</span><span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">:</span>        left<span class="token punctuation">,</span> right <span class="token punctuation">,</span>top<span class="token punctuation">,</span> bottom  <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">,</span> n<span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> n<span class="token operator">-</span><span class="token number">1</span>        result <span class="token operator">=</span> <span class="token builtin">list</span><span class="token punctuation">(</span><span class="token punctuation">)</span>        board <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">[</span><span class="token string">"-"</span><span class="token punctuation">]</span> <span class="token operator">*</span> n <span class="token keyword">for</span> _ <span class="token keyword">in</span> <span class="token builtin">range</span><span class="token punctuation">(</span>n<span class="token punctuation">)</span><span class="token punctuation">]</span>        start <span class="token operator">=</span> <span class="token number">1</span>        <span class="token keyword">while</span> left <span class="token operator">&lt;=</span> right <span class="token keyword">and</span> top<span class="token operator">&lt;=</span> bottom<span class="token punctuation">:</span>                        <span class="token keyword">for</span> col <span class="token keyword">in</span> <span class="token builtin">range</span><span class="token punctuation">(</span>left<span class="token punctuation">,</span> right<span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">:</span>                <span class="token keyword">print</span><span class="token punctuation">(</span>col<span class="token punctuation">)</span>                <span class="token comment"># result.append(start)</span>                board<span class="token punctuation">[</span>top<span class="token punctuation">]</span><span class="token punctuation">[</span>col<span class="token punctuation">]</span> <span class="token operator">=</span> start                start <span class="token operator">+=</span> <span class="token number">1</span>            <span class="token keyword">for</span> row <span class="token keyword">in</span> <span class="token builtin">range</span><span class="token punctuation">(</span>top<span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">,</span> bottom<span class="token punctuation">)</span><span class="token punctuation">:</span>                <span class="token comment"># result.append(start)</span>                board<span class="token punctuation">[</span>row<span class="token punctuation">]</span><span class="token punctuation">[</span>right<span class="token punctuation">]</span> <span class="token operator">=</span> start                start <span class="token operator">+=</span> <span class="token number">1</span>            <span class="token keyword">if</span> left <span class="token operator">&lt;</span> right<span class="token punctuation">:</span>                <span class="token keyword">for</span> col <span class="token keyword">in</span> <span class="token builtin">range</span><span class="token punctuation">(</span>right<span class="token punctuation">,</span> left<span class="token punctuation">,</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">:</span>                    <span class="token comment"># result.append(start)</span>                    board<span class="token punctuation">[</span>bottom<span class="token punctuation">]</span><span class="token punctuation">[</span>col<span class="token punctuation">]</span> <span class="token operator">=</span> start                    start <span class="token operator">+=</span> <span class="token number">1</span>            <span class="token keyword">if</span> top <span class="token operator">&lt;</span> bottom<span class="token punctuation">:</span>                <span class="token keyword">for</span> row <span class="token keyword">in</span> <span class="token builtin">range</span><span class="token punctuation">(</span>bottom<span class="token punctuation">,</span> top<span class="token punctuation">,</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">:</span>                    <span class="token comment"># result.append(start)</span>                    board<span class="token punctuation">[</span>row<span class="token punctuation">]</span><span class="token punctuation">[</span>left<span class="token punctuation">]</span> <span class="token operator">=</span> start                    start <span class="token operator">+=</span> <span class="token number">1</span>            left <span class="token operator">+=</span> <span class="token number">1</span>            right <span class="token operator">-=</span> <span class="token number">1</span>            top <span class="token operator">+=</span> <span class="token number">1</span>            bottom <span class="token operator">-=</span> <span class="token number">1</span>        <span class="token keyword">return</span> board<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h2 id="209-é•¿åº¦æœ€å°çš„å­æ•°ç»„"><a href="#209-é•¿åº¦æœ€å°çš„å­æ•°ç»„" class="headerlink" title="209. é•¿åº¦æœ€å°çš„å­æ•°ç»„"></a><a href="https://leetcode.cn/problems/minimum-size-subarray-sum/">209. é•¿åº¦æœ€å°çš„å­æ•°ç»„</a></h2><blockquote><p>ç»™å®šä¸€ä¸ªå«æœ‰ n ä¸ªæ­£æ•´æ•°çš„æ•°ç»„å’Œä¸€ä¸ªæ­£æ•´æ•° target ã€‚</p><p>æ‰¾å‡ºè¯¥æ•°ç»„ä¸­æ»¡è¶³å…¶å’Œ â‰¥ target çš„é•¿åº¦æœ€å°çš„ è¿ç»­å­æ•°ç»„ [numsl, numsl+1, â€¦, numsr-1, numsr] ï¼Œå¹¶è¿”å›å…¶é•¿åº¦ã€‚å¦‚æœä¸å­˜åœ¨ç¬¦åˆæ¡ä»¶çš„å­æ•°ç»„ï¼Œè¿”å› 0 ã€‚</p></blockquote><p><img src="https://zhangtq-blog.oss-cn-hangzhou.aliyuncs.com/content_picture/image-20221201012100898.png" alt="image-20221201012100898"></p><pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token keyword">class</span> <span class="token class-name">Solution</span><span class="token punctuation">:</span>    <span class="token keyword">def</span> <span class="token function">minSubArrayLen</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> target<span class="token punctuation">:</span> <span class="token builtin">int</span><span class="token punctuation">,</span> nums<span class="token punctuation">:</span> List<span class="token punctuation">[</span><span class="token builtin">int</span><span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token operator">-</span><span class="token operator">></span> <span class="token builtin">int</span><span class="token punctuation">:</span>        <span class="token triple-quoted-string string">"""        æ»‘åŠ¨çª—å£        """</span>        n <span class="token operator">=</span> <span class="token builtin">len</span><span class="token punctuation">(</span>nums<span class="token punctuation">)</span>        left<span class="token punctuation">,</span> right <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span>        min_len <span class="token operator">=</span> n<span class="token operator">+</span><span class="token number">1</span>        total <span class="token operator">=</span> <span class="token number">0</span>        <span class="token keyword">while</span> left <span class="token operator">&lt;=</span> right<span class="token operator">&lt;</span> n<span class="token punctuation">:</span>            total <span class="token operator">+=</span> nums<span class="token punctuation">[</span>right<span class="token punctuation">]</span>            <span class="token keyword">while</span> left <span class="token operator">&lt;=</span> right <span class="token keyword">and</span> total<span class="token operator">>=</span> target<span class="token punctuation">:</span>                min_len <span class="token operator">=</span> <span class="token builtin">min</span><span class="token punctuation">(</span>right<span class="token operator">-</span> left <span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">,</span> min_len<span class="token punctuation">)</span>                <span class="token keyword">print</span><span class="token punctuation">(</span>min_len<span class="token punctuation">,</span> right<span class="token punctuation">,</span> left<span class="token punctuation">)</span>                total <span class="token operator">-=</span> nums<span class="token punctuation">[</span>left<span class="token punctuation">]</span>                left <span class="token operator">+=</span> <span class="token number">1</span>            right <span class="token operator">+=</span><span class="token number">1</span>        <span class="token keyword">return</span> <span class="token number">0</span> <span class="token keyword">if</span> min_len <span class="token operator">==</span> n<span class="token operator">+</span><span class="token number">1</span> <span class="token keyword">else</span> min_len<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h2 id="977-æœ‰åºæ•°ç»„çš„å¹³æ–¹"><a href="#977-æœ‰åºæ•°ç»„çš„å¹³æ–¹" class="headerlink" title="977. æœ‰åºæ•°ç»„çš„å¹³æ–¹"></a><a href="https://leetcode.cn/problems/squares-of-a-sorted-array/">977. æœ‰åºæ•°ç»„çš„å¹³æ–¹</a></h2><blockquote><p>ç»™ä½ ä¸€ä¸ªæŒ‰ éé€’å‡é¡ºåº æ’åºçš„æ•´æ•°æ•°ç»„ numsï¼Œè¿”å› æ¯ä¸ªæ•°å­—çš„å¹³æ–¹ ç»„æˆçš„æ–°æ•°ç»„ï¼Œè¦æ±‚ä¹ŸæŒ‰ éé€’å‡é¡ºåº æ’åºã€‚</p><p>ç¤ºä¾‹ 1ï¼š</p><p>è¾“å…¥ï¼šnums &#x3D; [-4,-1,0,3,10]<br>è¾“å‡ºï¼š[0,1,9,16,100]<br>è§£é‡Šï¼šå¹³æ–¹åï¼Œæ•°ç»„å˜ä¸º [16,1,0,9,100]<br>æ’åºåï¼Œæ•°ç»„å˜ä¸º [0,1,9,16,100]<br>ç¤ºä¾‹ 2ï¼š</p><p>è¾“å…¥ï¼šnums &#x3D; [-7,-3,2,3,11]<br>è¾“å‡ºï¼š[4,9,9,49,121]</p></blockquote><p>åŒæŒ‡é’ˆï¼š</p><pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token keyword">class</span> <span class="token class-name">Solution</span><span class="token punctuation">:</span>    <span class="token keyword">def</span> <span class="token function">sortedSquares</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> nums<span class="token punctuation">:</span> List<span class="token punctuation">[</span><span class="token builtin">int</span><span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token operator">-</span><span class="token operator">></span> List<span class="token punctuation">[</span><span class="token builtin">int</span><span class="token punctuation">]</span><span class="token punctuation">:</span>        <span class="token triple-quoted-string string">"""        å¯ä»¥å¹³æ–¹åå½’å¹¶æ’åº        è¿™é‡Œé‡‡ç”¨åŒæŒ‡é’ˆçš„æ–¹å¼        """</span>        left<span class="token punctuation">,</span> right<span class="token punctuation">,</span> result <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token builtin">len</span><span class="token punctuation">(</span>nums<span class="token punctuation">)</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>        <span class="token keyword">while</span> left <span class="token operator">&lt;=</span> right<span class="token punctuation">:</span>            <span class="token keyword">if</span> nums<span class="token punctuation">[</span>left<span class="token punctuation">]</span> <span class="token operator">**</span> <span class="token number">2</span> <span class="token operator">&lt;</span> nums<span class="token punctuation">[</span>right<span class="token punctuation">]</span> <span class="token operator">**</span> <span class="token number">2</span><span class="token punctuation">:</span>                result<span class="token punctuation">.</span>insert<span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> nums<span class="token punctuation">[</span>right<span class="token punctuation">]</span><span class="token operator">**</span><span class="token number">2</span><span class="token punctuation">)</span>                right <span class="token operator">-=</span> <span class="token number">1</span>            <span class="token keyword">else</span><span class="token punctuation">:</span>                result<span class="token punctuation">.</span>insert<span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> nums<span class="token punctuation">[</span>left<span class="token punctuation">]</span><span class="token operator">**</span><span class="token number">2</span><span class="token punctuation">)</span>                left <span class="token operator">+=</span> <span class="token number">1</span>        <span class="token keyword">return</span> result<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>åˆ†ç±»+åˆå¹¶æœ‰åºåˆ—è¡¨ï¼š</p><pre class="line-numbers language-pythoon" data-language="pythoon"><code class="language-pythoon">class Solution:    def sortedSquares(self, nums: List[int]) -&gt; List[int]:        # åˆ†æƒ…å†µè®¨è®º        neg &#x3D; []        non_neg &#x3D; []        for num in nums:            if num &lt; 0:                neg.append(num * num)            else:                non_neg.append(num * num)        neg.reverse()        # åˆå¹¶æœ‰åºåˆ—è¡¨        m, n &#x3D; len(neg), len(non_neg)        i &#x3D; j &#x3D; 0        ans &#x3D; []        while i &lt; m and j &lt; n:            if neg[i] &lt; non_neg[j]:                ans.append(neg[i])                i +&#x3D; 1            else:                ans.append(non_neg[j])                j +&#x3D; 1        ans +&#x3D; neg[i:]        ans +&#x3D; non_neg[j:]        return ans<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h1 id="é“¾è¡¨"><a href="#é“¾è¡¨" class="headerlink" title="é“¾è¡¨"></a>é“¾è¡¨</h1><h2 id="é“¾å¼ç»“æ„çš„å­˜å‚¨"><a href="#é“¾å¼ç»“æ„çš„å­˜å‚¨" class="headerlink" title="é“¾å¼ç»“æ„çš„å­˜å‚¨"></a>é“¾å¼ç»“æ„çš„å­˜å‚¨</h2><p><img src="https://zhangtq-blog.oss-cn-hangzhou.aliyuncs.com/content_picture/image-20221130204840602.png" alt="é“¾å¼å­˜å‚¨ç»“æ„"></p><ul><li><p>ç”¨ä¸€ç§ä»»æ„å­˜å‚¨å•å…ƒå­˜å‚¨æ•°æ®å…ƒç´ </p></li><li><p>å„ä¸ªå­˜å‚¨å•å…ƒåœ¨å†…å­˜ä¸­å¯ä»¥ä¸ç”¨è¿ç»­</p></li><li><p>é€šè¿‡æŒ‡é’ˆçš„å½¢å¼é“¾æ¥èµ·æ¥</p></li></ul><h2 id="å•é¡¹é“¾è¡¨"><a href="#å•é¡¹é“¾è¡¨" class="headerlink" title="å•é¡¹é“¾è¡¨"></a>å•é¡¹é“¾è¡¨</h2><ul><li>å¤šä¸ªèŠ‚ç‚¹ç›¸è¿</li><li>æ¯ä¸ªèŠ‚ç‚¹ä¸­åŒ…å«ä¸€ä¸ªæŒ‡é’ˆåŸŸ</li><li>å•é“¾è¡¨çš„æŒ‡é’ˆåŸŸæŒ‡å‘çš„æ˜¯ä¸‹ä¸€ä¸ªèŠ‚ç‚¹çš„åœ°å€</li><li>æŠŠæŒ‡å‘ä¸‹ä¸ªèŠ‚ç‚¹çš„æŒ‡é’ˆå«åšåç»§æŒ‡é’ˆ</li></ul><p><img src="C:\Users\zhangtq\AppData\Roaming\Typora\typora-user-images\image-20221130205630113.png" alt="image-20221130205630113"></p><ul><li>å•é“¾è¡¨çš„ç¬¬ä¸€ä¸ªèŠ‚ç‚¹çš„å­˜å‚¨ä½ç½®å«åšå¤´æŒ‡é’ˆï¼Œæœ€åä¸€ä¸ªèŠ‚ç‚¹çš„åç»§æŒ‡é’ˆä¸ºç©º</li></ul><p><img src="C:\Users\zhangtq\AppData\Roaming\Typora\typora-user-images\image-20221130210123345.png" alt="image-20221130210123345"></p><ul><li>æ­¤å¤–ï¼Œæœ‰æ—¶å€™ä¸ºäº†æ“ä½œï¼Œæˆ‘ä»¬ä¼šåœ¨ç¬¬ä¸€ä¸ªèŠ‚ç‚¹å‰é¢æ·»åŠ ä¸€ä¸ªèŠ‚ç‚¹ï¼Œç§°ä¸ºå¤´èŠ‚ç‚¹</li></ul><p><img src="https://zhangtq-blog.oss-cn-hangzhou.aliyuncs.com/content_picture/image-20221130210704820.png" alt="æ·»åŠ å¤´èŠ‚ç‚¹çš„é“¾è¡¨"></p><ul><li><p>å¤´æŒ‡é’ˆå’Œå’Œå¤´èŠ‚ç‚¹</p></li><li><blockquote><p>å¤´æŒ‡é’ˆæ˜¯æŒ‡å‘é“¾è¡¨ç¬¬ä¸€ä¸ªèŠ‚ç‚¹çš„æŒ‡é’ˆï¼Œå¤´æŒ‡é’ˆåœ¨é“¾è¡¨ä¸­å¿…é¡»å­˜åœ¨ï¼Œå› ä¸ºæˆ‘ä»¬è¦é€šè¿‡å¤´æŒ‡é’ˆç›´åˆ°é“¾è¡¨çš„ä½ç½®åœ¨å“ªé‡Œ</p><p>å¦‚æœå­˜åœ¨å¤´èŠ‚ç‚¹ï¼Œé‚£ä¹ˆå¤´æŒ‡é’ˆå°±æ˜¯æŒ‡å‘å¤´èŠ‚ç‚¹çš„æŒ‡é’ˆï¼Œå…¶å®å’Œä¸Šé¢ä¸€æ ·ï¼Œæœ‰å¤´èŠ‚ç‚¹çš„è¯ï¼Œç¬¬ä¸€ä¸ªèŠ‚ç‚¹å¿…æ˜¯å¤´æŒ‡é’ˆ</p></blockquote></li><li><blockquote><p>å¤´èŠ‚ç‚¹ä¸å…·æœ‰å®é™…æ„ä¹‰ï¼Œå¤´èŠ‚ç‚¹ä¸­ä¸å­˜å‚¨æ•°æ®å…ƒç´ ï¼Œåªæ˜¯æˆ‘ä»¬åœ¨åˆ é™¤æˆ–è€…æ’å…¥æ—¶ï¼Œä¸ºäº†ç»Ÿä¸€å¤´èŠ‚ç‚¹çš„æ“ä½œä¸“é—¨è®¾å®šçš„</p></blockquote></li></ul><h2 id="å•å‘é“¾è¡¨çš„æ’å…¥æ“ä½œ"><a href="#å•å‘é“¾è¡¨çš„æ’å…¥æ“ä½œ" class="headerlink" title="å•å‘é“¾è¡¨çš„æ’å…¥æ“ä½œ"></a>å•å‘é“¾è¡¨çš„æ’å…¥æ“ä½œ</h2><ul><li>å•é¡¹é“¾è¡¨æ’å…¥æ“ä½œ</li></ul><p><img src="https://zhangtq-blog.oss-cn-hangzhou.aliyuncs.com/content_picture/image-20221130212139357.png" alt="å•å‘é“¾è¡¨æ’å…¥"></p><ul><li>å¦‚ä¸Šå›¾ï¼Œå¦‚æœå°†tèŠ‚ç‚¹æ’å…¥åˆ°sèŠ‚ç‚¹åéœ€è¦<ul><li>å°†tèŠ‚ç‚¹çš„åç»§èŠ‚ç‚¹æŒ‡å‘sèŠ‚ç‚¹çš„åç»§èŠ‚ç‚¹</li><li>å°†sèŠ‚ç‚¹çš„åç»§èŠ‚ç‚¹æŒ‡å‘èŠ‚ç‚¹t</li></ul></li><li>å•é¡¹é“¾è¡¨çš„åˆ é™¤æ“ä½œ</li></ul><p><img src="https://zhangtq-blog.oss-cn-hangzhou.aliyuncs.com/content_picture/image-20221130213205047.png" alt="image-20221130213205047"></p><ul><li>ç”±å›¾å¯è§ï¼Œåˆ é™¤æ“ä½œçš„æœ¬è´¨å…¶å®æ˜¯ç»•è¿‡è¦åˆ é™¤çš„èŠ‚ç‚¹ï¼Œè¿™é‡ŒæŒ‡tèŠ‚ç‚¹</li><li>å…·ä½“æ“ä½œæ˜¯å°†èŠ‚ç‚¹sçš„åç»§æŒ‡é’ˆæŒ‡å‘èŠ‚ç‚¹tçš„åç»§æŒ‡é’ˆ</li></ul><h2 id="åŒå‘é“¾è¡¨"><a href="#åŒå‘é“¾è¡¨" class="headerlink" title="åŒå‘é“¾è¡¨"></a>åŒå‘é“¾è¡¨</h2><ul><li>åŒå‘é“¾è¡¨ï¼Œæœ‰ä¸¤ä¸ªæ–¹å‘ï¼Œç›¸å¯¹äºå•å‘é“¾è¡¨ï¼Œå¤šäº†ä¸€ä¸ªå‰é©±æŒ‡é’ˆprev,æŒ‡å‘å‰é©±èŠ‚ç‚¹</li><li>åŒå‘é“¾è¡¨å¯ä»¥å‘å‰èµ°ï¼Œä¹Ÿå¯ä»¥å‘å</li></ul><p><img src="https://zhangtq-blog.oss-cn-hangzhou.aliyuncs.com/content_picture/image-20221130223251256.png" alt="åŒå‘é“¾è¡¨"></p><ul><li>åŒå‘é“¾è¡¨ç”¨äº†ç©ºé—´æ¢æ—¶é—´ï¼Œä¼šæ›´å¿«</li></ul><h2 id="å•é¡¹é“¾è¡¨å’ŒåŒå‘é“¾è¡¨æ“ä½œå¯¹æ¯”"><a href="#å•é¡¹é“¾è¡¨å’ŒåŒå‘é“¾è¡¨æ“ä½œå¯¹æ¯”" class="headerlink" title="å•é¡¹é“¾è¡¨å’ŒåŒå‘é“¾è¡¨æ“ä½œå¯¹æ¯”"></a>å•é¡¹é“¾è¡¨å’ŒåŒå‘é“¾è¡¨æ“ä½œå¯¹æ¯”</h2><h3 id="é“¾è¡¨çš„æ’å…¥çš„ä¸¤ç§å‰ç½®æ¡ä»¶"><a href="#é“¾è¡¨çš„æ’å…¥çš„ä¸¤ç§å‰ç½®æ¡ä»¶" class="headerlink" title="é“¾è¡¨çš„æ’å…¥çš„ä¸¤ç§å‰ç½®æ¡ä»¶"></a>é“¾è¡¨çš„æ’å…¥çš„ä¸¤ç§å‰ç½®æ¡ä»¶</h3><ul><li><p>åœ¨dataåŸŸçš„æŸä¸ªç‰¹å®šå€¼çš„èŠ‚ç‚¹å‰åæ’å…¥æ–°çš„èŠ‚ç‚¹</p></li><li><p>åœ¨ç»™å®šçš„èŠ‚ç‚¹å‰åæ’å…¥æ–°çš„èŠ‚ç‚¹</p></li><li><p>é’ˆå¯¹ç¬¬ä¸€ç§æƒ…å†µï¼Œä¸¤ç§é“¾è¡¨çš„å¤æ‚åº¦ç›¸è¿‘</p><ul><li>ç¬¬ä¸€æ­¥æ˜¾ç¤ºè¡¨é‡Œé“¾è¡¨æ‰¾åˆ°å€¼ä¸ºç‰¹å®šå€¼çš„èŠ‚ç‚¹ï¼Œä¸¤ç§éƒ½æ˜¯ä»å¤´å¼€å§‹éå†å¤æ‚åº¦O(n)</li></ul><p><img src="https://zhangtq-blog.oss-cn-hangzhou.aliyuncs.com/content_picture/image-20221130224227799.png" alt="æ‰¾åˆ°ç‰¹å®šå€¼èŠ‚ç‚¹"></p><ul><li>ç¬¬äºŒæ­¥æ˜¯æ’å…¥æ“ä½œ<ul><li>å¦‚æœæ˜¯å‘åæ’å…¥ï¼Œé‚£ä¹ˆä¸¤ç§é“¾è¡¨æ—¶é—´å¤æ‚åº¦åŸºæœ¬ä¸€ç›´</li><li>å¦‚æœæ˜¯å‘å‰æ’å…¥ï¼Œå•é“¾è¡¨æ…¢ï¼Œå› ä¸ºå•é“¾è¡¨è¿˜éœ€è¦å†éå†ä¸€æ¬¡é“¾è¡¨æ‰¾åˆ°ç‰¹å®šå€¼èŠ‚ç‚¹çš„å‰é©±èŠ‚ç‚¹è¿™ä¸ªæ—¶é—´åˆæ˜¯O(n)ï¼Œä½†æ˜¯åŒå‘é“¾è¡¨å¯ä»¥ç›´æ¥æ‰¾åˆ°å‰é©±èŠ‚ç‚¹</li></ul></li></ul><p><img src="https://zhangtq-blog.oss-cn-hangzhou.aliyuncs.com/content_picture/image-20221130224740974.png" alt="image-20221130224740974"></p></li><li><p>é’ˆå¯¹ç¬¬äºŒç§æƒ…å†µï¼Œå’Œç¬¬ä¸€ç§ç±»ä¼¼ï¼Œå·²ç»çŸ¥é“èŠ‚ç‚¹çš„æƒ…å†µä¸‹å¦‚æœå‘åæ’å…¥ï¼Œå•é“¾è¡¨å’ŒåŒé“¾è¡¨æ²¡æœ‰åŒºåˆ« éƒ½æ˜¯O(1)</p></li><li><p>é’ˆå¯¹ç¬¬äºŒç§æƒ…å†µï¼Œå¦‚æœå‘å‰æ’å…¥ï¼Œå•é“¾è¡¨éœ€è¦å¾ªç¯é“¾è¡¨ï¼Œæ‰¾åˆ°å…ˆæ‰¾åˆ°å‰é©±èŠ‚ç‚¹ï¼Œè€ŒåŒå‘é“¾è¡¨å¯ä»¥ç›´æ¥æ’å…¥</p></li></ul><h3 id="ä¸¤ç§é“¾è¡¨çš„åˆ é™¤æ“ä½œ"><a href="#ä¸¤ç§é“¾è¡¨çš„åˆ é™¤æ“ä½œ" class="headerlink" title="ä¸¤ç§é“¾è¡¨çš„åˆ é™¤æ“ä½œ"></a>ä¸¤ç§é“¾è¡¨çš„åˆ é™¤æ“ä½œ</h3><h3 id="ä¸¤ç§å‰ç½®æ¡ä»¶"><a href="#ä¸¤ç§å‰ç½®æ¡ä»¶" class="headerlink" title="ä¸¤ç§å‰ç½®æ¡ä»¶"></a>ä¸¤ç§å‰ç½®æ¡ä»¶</h3><pre><code>- åœ¨æŸä¸ªdataåŸŸå€¼ç­‰äºç‰¹å®šå€¼å‰ååˆ é™¤- åœ¨æŸä¸ªèŠ‚ç‚¹å‰ååˆ é™¤</code></pre><ul><li>å¯¹äºæƒ…å†µä¸€<ul><li>ç¬¬ä¸€æ­¥ï¼Œéœ€è¦åœ¨dataåŸŸå€¼æ‰¾åˆ°ç‰¹å®šå€¼èŠ‚ç‚¹ï¼Œè¿™ä¸€æ­¥ä¸¤ç§é“¾è¡¨ç›¸åŒ</li><li>å¦‚æœæ˜¯å‘å‰åˆ é™¤ï¼Œé‚£ä¹ˆå•å‘é“¾è¡¨éœ€è¦å†éå†ä¸€æ¬¡é“¾è¡¨ï¼Œæ‰¾åˆ°ç‰¹å®šå€¼èŠ‚ç‚¹çš„å‰é©±èŠ‚ç‚¹ï¼Œè€ŒåŒå‘é“¾è¡¨å¯ä»¥ç›´æ¥åˆ é™¤</li><li>å¦‚æœæ˜¯å‘ååˆ é™¤ï¼Œä¸¤è€…æ—¶é—´å¤æ‚åº¦ç›¸ä¼¼</li></ul></li><li>é’ˆå¯¹æƒ…å†µäºŒï¼š<ul><li>å¦‚æœæ˜¯å‘å‰åˆ é™¤ï¼Œå•å‘é“¾è¡¨éœ€è¦éå†ï¼Œæ‰¾åˆ°å‰é©±èŠ‚ç‚¹æ‰å¯ä»¥åˆ é™¤ï¼ŒåŒå‘é“¾è¡¨å¯ä»¥ç›´æ¥åˆ©ç”¨prevæŒ‡é’ˆ</li><li>å¦‚æœæ˜¯å‘ååˆ é™¤ï¼Œä¸¤è€…æ—¶é—´å¤æ‚åº¦ç›¸ä¼¼</li></ul></li></ul><h2 id="19-åˆ é™¤é“¾è¡¨çš„å€’æ•°ç¬¬-N-ä¸ªç»“ç‚¹"><a href="#19-åˆ é™¤é“¾è¡¨çš„å€’æ•°ç¬¬-N-ä¸ªç»“ç‚¹" class="headerlink" title="19. åˆ é™¤é“¾è¡¨çš„å€’æ•°ç¬¬ N ä¸ªç»“ç‚¹"></a><a href="https://leetcode.cn/problems/remove-nth-node-from-end-of-list/">19. åˆ é™¤é“¾è¡¨çš„å€’æ•°ç¬¬ N ä¸ªç»“ç‚¹</a></h2><blockquote><p>ç»™ä½ ä¸€ä¸ªé“¾è¡¨ï¼Œåˆ é™¤é“¾è¡¨çš„å€’æ•°ç¬¬ <code>n</code> ä¸ªç»“ç‚¹ï¼Œå¹¶ä¸”è¿”å›é“¾è¡¨çš„å¤´ç»“ç‚¹ã€‚</p></blockquote><p><img src="https://zhangtq-blog.oss-cn-hangzhou.aliyuncs.com/content_picture/image-20221201182026892.png" alt="image-20221201182026892"></p><blockquote><pre class="line-numbers language-none"><code class="language-none">è¾“å…¥ï¼šhead &#x3D; [1,2,3,4,5], n &#x3D; 2è¾“å‡ºï¼š[1,2,3,5]<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre></blockquote><p>æ–¹æ³•ä¸€ï¼šæ‰¾åˆ°è¦åˆ é™¤çš„å‰é©±èŠ‚ç‚¹ï¼Œç›´æ¥åˆ é™¤ï¼Œæ³¨æ„å¤„ç†ç¬¬ä¸€ä¸ªèŠ‚ç‚¹ï¼Œè®¤ä¸ºæ·»åŠ ä¸€ä¸ªå¤´èŠ‚ç‚¹</p><pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token keyword">class</span> <span class="token class-name">Solution</span><span class="token punctuation">:</span>    <span class="token keyword">def</span> <span class="token function">removeNthFromEnd</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> head<span class="token punctuation">,</span> n<span class="token punctuation">:</span> <span class="token builtin">int</span><span class="token punctuation">)</span><span class="token punctuation">:</span>        <span class="token triple-quoted-string string">"""        å€’æ•°ç¬¬nä¸ªèŠ‚ç‚¹ï¼Œä¹Ÿå°±æ˜¯åˆ é™¤æ­£å‘çš„ç¬¬len-n +1 ä¸ªèŠ‚ç‚¹        é“¾è¡¨æ˜¯æ²¡æœ‰len æ–¹æ³•çš„ï¼Œéœ€è¦å…ˆæ‰¾åˆ°é“¾è¡¨çš„é•¿åº¦        ä¸ºäº†è®©ç¬¬ä¸€ä¸ªèŠ‚ç‚¹èƒ½æ“ä½œä¸€è‡´ï¼Œ æ·»åŠ ä¸€ä¸ªå¤´èŠ‚ç‚¹        new-head.next ä¸ºçœŸæ­£çš„å¤´èŠ‚ç‚¹        """</span>        dummary <span class="token operator">=</span> ListNode<span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> head<span class="token punctuation">)</span>        length <span class="token operator">=</span> <span class="token number">0</span>        <span class="token keyword">while</span> head<span class="token punctuation">:</span>            head <span class="token operator">=</span> head<span class="token punctuation">.</span><span class="token builtin">next</span>            length <span class="token operator">+=</span> <span class="token number">1</span>        cur <span class="token operator">=</span> dummary        <span class="token keyword">for</span> i <span class="token keyword">in</span> <span class="token builtin">range</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> length <span class="token operator">-</span> n <span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">:</span>            cur <span class="token operator">=</span> cur<span class="token punctuation">.</span><span class="token builtin">next</span>        cur<span class="token punctuation">.</span><span class="token builtin">next</span> <span class="token operator">=</span> cur<span class="token punctuation">.</span><span class="token builtin">next</span><span class="token punctuation">.</span><span class="token builtin">next</span>        <span class="token keyword">return</span> dummary<span class="token punctuation">.</span><span class="token builtin">next</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>æ–¹æ³•äºŒï¼šå€ŸåŠ©æ ˆçš„ç‰¹æ€§</p><pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token keyword">class</span> <span class="token class-name">Solution</span><span class="token punctuation">:</span>    <span class="token keyword">def</span> <span class="token function">removeNthFromEnd</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> head<span class="token punctuation">,</span> n<span class="token punctuation">:</span> <span class="token builtin">int</span><span class="token punctuation">)</span><span class="token punctuation">:</span><span class="token triple-quoted-string string">"""åˆ©ç”¨æ‰¾çš„ç‰¹æ€§åˆ™å‡ºæ ˆæ‰¾åˆ°è¦åˆ é™¤å‰Nä¸ªèŠ‚ç‚¹ï¼Œå‡ºæ ˆæ­¤æ—¶ï¼Œstack[-1] å³æ ˆé¡¶å°±æ˜¯è¦åˆ é™¤çš„å‰é©±èŠ‚ç‚¹æ‰¾åˆ°å‰é©±èŠ‚ç‚¹åï¼Œæ ¹æ®é“¾è¡¨çš„åˆ é™¤æ–¹æ³•ï¼Œåˆ é™¤èŠ‚ç‚¹å°±å¯ä»¥äº†"""</span>        <span class="token comment"># æ–¹æ³•äºŒï¼Œ å€ŸåŠ©æ ˆ</span>        dummy <span class="token operator">=</span> ListNode<span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> head<span class="token punctuation">)</span>        stack <span class="token operator">=</span> <span class="token builtin">list</span><span class="token punctuation">(</span><span class="token punctuation">)</span>        cur <span class="token operator">=</span> dummy        <span class="token keyword">while</span> cur<span class="token punctuation">:</span>            stack<span class="token punctuation">.</span>append<span class="token punctuation">(</span>cur<span class="token punctuation">)</span>            cur <span class="token operator">=</span> cur<span class="token punctuation">.</span><span class="token builtin">next</span>                <span class="token keyword">for</span> i <span class="token keyword">in</span> <span class="token builtin">range</span><span class="token punctuation">(</span>n<span class="token punctuation">)</span><span class="token punctuation">:</span>            stack<span class="token punctuation">.</span>pop<span class="token punctuation">(</span><span class="token punctuation">)</span>                <span class="token comment"># å‰é©±èŠ‚ç‚¹</span>        prev_node <span class="token operator">=</span> stack<span class="token punctuation">[</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">]</span>        prev_node<span class="token punctuation">.</span><span class="token builtin">next</span> <span class="token operator">=</span> prev_node<span class="token punctuation">.</span><span class="token builtin">next</span><span class="token punctuation">.</span><span class="token builtin">next</span>        <span class="token keyword">return</span> dummy<span class="token punctuation">.</span><span class="token builtin">next</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h2 id="24-ä¸¤ä¸¤äº¤æ¢é“¾è¡¨ä¸­çš„èŠ‚ç‚¹"><a href="#24-ä¸¤ä¸¤äº¤æ¢é“¾è¡¨ä¸­çš„èŠ‚ç‚¹" class="headerlink" title="24. ä¸¤ä¸¤äº¤æ¢é“¾è¡¨ä¸­çš„èŠ‚ç‚¹"></a><a href="https://leetcode.cn/problems/swap-nodes-in-pairs/">24. ä¸¤ä¸¤äº¤æ¢é“¾è¡¨ä¸­çš„èŠ‚ç‚¹</a></h2><blockquote><p>ç»™ä½ ä¸€ä¸ªé“¾è¡¨ï¼Œä¸¤ä¸¤äº¤æ¢å…¶ä¸­ç›¸é‚»çš„èŠ‚ç‚¹ï¼Œå¹¶è¿”å›äº¤æ¢åé“¾è¡¨çš„å¤´èŠ‚ç‚¹ã€‚ä½ å¿…é¡»åœ¨ä¸ä¿®æ”¹èŠ‚ç‚¹å†…éƒ¨çš„å€¼çš„æƒ…å†µä¸‹å®Œæˆæœ¬é¢˜ï¼ˆå³ï¼Œåªèƒ½è¿›è¡ŒèŠ‚ç‚¹äº¤æ¢ï¼‰ã€‚</p></blockquote><p><img src="https://zhangtq-blog.oss-cn-hangzhou.aliyuncs.com/content_picture/image-20221201212729257.png" alt="image-20221201212729257"></p><pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token comment"># Definition for singly-linked list.</span><span class="token comment"># class ListNode:</span><span class="token comment">#     def __init__(self, val=0, next=None):</span><span class="token comment">#         self.val = val</span><span class="token comment">#         self.next = next</span><span class="token keyword">class</span> <span class="token class-name">Solution</span><span class="token punctuation">:</span>    <span class="token keyword">def</span> <span class="token function">swapPairs</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> head<span class="token punctuation">)</span><span class="token punctuation">:</span>                dummy <span class="token operator">=</span> ListNode<span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> head<span class="token punctuation">)</span>        cur <span class="token operator">=</span> dummy        <span class="token keyword">while</span> cur<span class="token punctuation">.</span><span class="token builtin">next</span> <span class="token keyword">and</span> cur<span class="token punctuation">.</span><span class="token builtin">next</span><span class="token punctuation">.</span><span class="token builtin">next</span><span class="token punctuation">:</span>            node1 <span class="token operator">=</span> cur<span class="token punctuation">.</span><span class="token builtin">next</span>            node2 <span class="token operator">=</span> cur<span class="token punctuation">.</span><span class="token builtin">next</span><span class="token punctuation">.</span><span class="token builtin">next</span>            cur<span class="token punctuation">.</span><span class="token builtin">next</span> <span class="token operator">=</span> node2            node1<span class="token punctuation">.</span><span class="token builtin">next</span> <span class="token operator">=</span> node2<span class="token punctuation">.</span><span class="token builtin">next</span>            node2<span class="token punctuation">.</span><span class="token builtin">next</span> <span class="token operator">=</span> node1            cur <span class="token operator">=</span> node1        <span class="token keyword">return</span> dummy<span class="token punctuation">.</span><span class="token builtin">next</span>   <span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h2 id="25-K-ä¸ªä¸€ç»„ç¿»è½¬é“¾è¡¨ï¼ˆéœ€è¡¥å……è§£é¢˜æ–¹æ³•ï¼‰"><a href="#25-K-ä¸ªä¸€ç»„ç¿»è½¬é“¾è¡¨ï¼ˆéœ€è¡¥å……è§£é¢˜æ–¹æ³•ï¼‰" class="headerlink" title="25. K ä¸ªä¸€ç»„ç¿»è½¬é“¾è¡¨ï¼ˆéœ€è¡¥å……è§£é¢˜æ–¹æ³•ï¼‰"></a><a href="https://leetcode.cn/problems/reverse-nodes-in-k-group/">25. K ä¸ªä¸€ç»„ç¿»è½¬é“¾è¡¨ï¼ˆéœ€è¡¥å……è§£é¢˜æ–¹æ³•ï¼‰</a></h2><blockquote><p>ç»™ä½ é“¾è¡¨çš„å¤´èŠ‚ç‚¹ head ï¼Œæ¯ k ä¸ªèŠ‚ç‚¹ä¸€ç»„è¿›è¡Œç¿»è½¬ï¼Œè¯·ä½ è¿”å›ä¿®æ”¹åçš„é“¾è¡¨ã€‚</p><p>k æ˜¯ä¸€ä¸ªæ­£æ•´æ•°ï¼Œå®ƒçš„å€¼å°äºæˆ–ç­‰äºé“¾è¡¨çš„é•¿åº¦ã€‚å¦‚æœèŠ‚ç‚¹æ€»æ•°ä¸æ˜¯ k çš„æ•´æ•°å€ï¼Œé‚£ä¹ˆè¯·å°†æœ€åå‰©ä½™çš„èŠ‚ç‚¹ä¿æŒåŸæœ‰é¡ºåºã€‚</p><p>ä½ ä¸èƒ½åªæ˜¯å•çº¯çš„æ”¹å˜èŠ‚ç‚¹å†…éƒ¨çš„å€¼ï¼Œè€Œæ˜¯éœ€è¦å®é™…è¿›è¡ŒèŠ‚ç‚¹äº¤æ¢ã€‚</p></blockquote><pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token keyword">pass</span><span class="token comment"># å›°éš¾é¢˜ï¼Œåç»­è¡¥å……</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre><h2 id="141-ç¯å½¢é“¾è¡¨"><a href="#141-ç¯å½¢é“¾è¡¨" class="headerlink" title="141. ç¯å½¢é“¾è¡¨"></a><a href="https://leetcode.cn/problems/linked-list-cycle/">141. ç¯å½¢é“¾è¡¨</a></h2><blockquote><p>ç»™ä½ ä¸€ä¸ªé“¾è¡¨çš„å¤´èŠ‚ç‚¹ head ï¼Œåˆ¤æ–­é“¾è¡¨ä¸­æ˜¯å¦æœ‰ç¯ã€‚</p><p>å¦‚æœé“¾è¡¨ä¸­æœ‰æŸä¸ªèŠ‚ç‚¹ï¼Œå¯ä»¥é€šè¿‡è¿ç»­è·Ÿè¸ª next æŒ‡é’ˆå†æ¬¡åˆ°è¾¾ï¼Œåˆ™é“¾è¡¨ä¸­å­˜åœ¨ç¯ã€‚ ä¸ºäº†è¡¨ç¤ºç»™å®šé“¾è¡¨ä¸­çš„ç¯ï¼Œè¯„æµ‹ç³»ç»Ÿå†…éƒ¨ä½¿ç”¨æ•´æ•° pos æ¥è¡¨ç¤ºé“¾è¡¨å°¾è¿æ¥åˆ°é“¾è¡¨ä¸­çš„ä½ç½®ï¼ˆç´¢å¼•ä» 0 å¼€å§‹ï¼‰ã€‚æ³¨æ„ï¼špos ä¸ä½œä¸ºå‚æ•°è¿›è¡Œä¼ é€’ ã€‚ä»…ä»…æ˜¯ä¸ºäº†æ ‡è¯†é“¾è¡¨çš„å®é™…æƒ…å†µã€‚</p><p>å¦‚æœé“¾è¡¨ä¸­å­˜åœ¨ç¯ ï¼Œåˆ™è¿”å› true ã€‚ å¦åˆ™ï¼Œè¿”å› false ã€‚</p></blockquote><p><img src="https://zhangtq-blog.oss-cn-hangzhou.aliyuncs.com/content_picture/image-20221202013620665.png" alt="image-20221202013620665"></p><pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token comment"># Definition for singly-linked list.</span><span class="token comment"># class ListNode:</span><span class="token comment">#     def __init__(self, x):</span><span class="token comment">#         self.val = x</span><span class="token comment">#         self.next = None</span><span class="token keyword">class</span> <span class="token class-name">Solution</span><span class="token punctuation">:</span>    <span class="token comment"># å“ˆå¸Œsetçš„æ–¹å¼</span>    <span class="token keyword">def</span> <span class="token function">hasCycle</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> head<span class="token punctuation">:</span> Optional<span class="token punctuation">[</span>ListNode<span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token operator">-</span><span class="token operator">></span> <span class="token builtin">bool</span><span class="token punctuation">:</span>        viewed <span class="token operator">=</span> <span class="token builtin">set</span><span class="token punctuation">(</span><span class="token punctuation">)</span>        <span class="token keyword">while</span> head<span class="token punctuation">:</span>            <span class="token keyword">if</span> head <span class="token keyword">in</span> viewed<span class="token punctuation">:</span>                <span class="token keyword">return</span> <span class="token boolean">True</span>            viewed<span class="token punctuation">.</span>add<span class="token punctuation">(</span>head<span class="token punctuation">)</span>            head <span class="token operator">=</span> head<span class="token punctuation">.</span><span class="token builtin">next</span>        <span class="token keyword">return</span> <span class="token boolean">False</span>            <span class="token comment"># å¿«æ…¢æŒ‡é’ˆ</span>    <span class="token keyword">def</span> <span class="token function">hasCycle</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> head<span class="token punctuation">:</span> Optional<span class="token punctuation">[</span>ListNode<span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token operator">-</span><span class="token operator">></span> <span class="token builtin">bool</span><span class="token punctuation">:</span>        <span class="token keyword">if</span> <span class="token keyword">not</span> head<span class="token punctuation">:</span>            <span class="token keyword">return</span> <span class="token boolean">False</span>        slow <span class="token operator">=</span> fast <span class="token operator">=</span> head        <span class="token keyword">while</span> fast<span class="token punctuation">.</span><span class="token builtin">next</span> <span class="token keyword">and</span> fast<span class="token punctuation">.</span><span class="token builtin">next</span><span class="token punctuation">.</span><span class="token builtin">next</span><span class="token punctuation">:</span>            slow <span class="token operator">=</span> slow<span class="token punctuation">.</span><span class="token builtin">next</span>            fast <span class="token operator">=</span> fast<span class="token punctuation">.</span><span class="token builtin">next</span><span class="token punctuation">.</span><span class="token builtin">next</span>            <span class="token keyword">if</span> slow <span class="token keyword">is</span> fast<span class="token punctuation">:</span>                <span class="token keyword">return</span> <span class="token boolean">True</span>        <span class="token keyword">return</span> <span class="token boolean">False</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h2 id="142-ç¯å½¢é“¾è¡¨-II"><a href="#142-ç¯å½¢é“¾è¡¨-II" class="headerlink" title="142. ç¯å½¢é“¾è¡¨ II"></a><a href="https://leetcode.cn/problems/linked-list-cycle-ii/">142. ç¯å½¢é“¾è¡¨ II</a></h2><blockquote><p>ç»™å®šä¸€ä¸ªé“¾è¡¨çš„å¤´èŠ‚ç‚¹  head ï¼Œè¿”å›é“¾è¡¨å¼€å§‹å…¥ç¯çš„ç¬¬ä¸€ä¸ªèŠ‚ç‚¹ã€‚ å¦‚æœé“¾è¡¨æ— ç¯ï¼Œåˆ™è¿”å› nullã€‚</p><p>å¦‚æœé“¾è¡¨ä¸­æœ‰æŸä¸ªèŠ‚ç‚¹ï¼Œå¯ä»¥é€šè¿‡è¿ç»­è·Ÿè¸ª next æŒ‡é’ˆå†æ¬¡åˆ°è¾¾ï¼Œåˆ™é“¾è¡¨ä¸­å­˜åœ¨ç¯ã€‚ ä¸ºäº†è¡¨ç¤ºç»™å®šé“¾è¡¨ä¸­çš„ç¯ï¼Œè¯„æµ‹ç³»ç»Ÿå†…éƒ¨ä½¿ç”¨æ•´æ•° pos æ¥è¡¨ç¤ºé“¾è¡¨å°¾è¿æ¥åˆ°é“¾è¡¨ä¸­çš„ä½ç½®ï¼ˆç´¢å¼•ä» 0 å¼€å§‹ï¼‰ã€‚å¦‚æœ pos æ˜¯ -1ï¼Œåˆ™åœ¨è¯¥é“¾è¡¨ä¸­æ²¡æœ‰ç¯ã€‚æ³¨æ„ï¼špos ä¸ä½œä¸ºå‚æ•°è¿›è¡Œä¼ é€’ï¼Œä»…ä»…æ˜¯ä¸ºäº†æ ‡è¯†é“¾è¡¨çš„å®é™…æƒ…å†µã€‚</p><p>ä¸å…è®¸ä¿®æ”¹ é“¾è¡¨ã€‚</p></blockquote><ul><li>æ•°å­¦æ¨å¯¼+å¿«æ…¢æŒ‡é’ˆæ³•</li></ul><p><img src="https://zhangtq-blog.oss-cn-hangzhou.aliyuncs.com/content_picture/image-20221202142358917.png" alt="image-20221202142358917"></p><div class="uk-alert uk-alert-warning"><i class="fa fa-exclamation-circle"></i>    è®¾é“¾è¡¨çš„æ€»é•¿åº¦ä¸ºa+b ï¼Œå…¶ä¸­aä¸ºå¤´èŠ‚ç‚¹åˆ°å…¥å£å¤„çš„è·ç¦»ï¼Œbä¸ºç¯å½¢çš„é•¿åº¦ç°åœ¨å‡è®¾æœ‰ä¸¤ä¸ªäººå¼€å§‹è·‘æ­¥ï¼Œä¸€ä¸ªäººçš„é€Ÿåº¦æ˜¯å¦ä¸€ä¸ªäººçš„ä¸¤å€ï¼Œä»–ä»¬ä»¬åœ¨ç›¸é‡ç‚¹ç›¸é‡ï¼Œæ­¤æ—¶æˆ‘ä»¬çœ‹çœ‹ä»–ä»¬èµ°è¿‡çš„è·ç¦»å…³ç³»ç¬¬ä¸€æ¬¡ç›¸é‡1. ä»¤slowçš„èµ°è¿‡çš„è·ç¦»ä¸ºslow = s  --->fast = 2s2.  ç”±äºæ˜¯åœ¨ç¯å†…ç›¸é‡ï¼Œå¯çŸ¥fastä¸€å®šæ˜¯å¥—åœˆslowäº†ï¼Œä¸”å¿«çš„äººæ¯”æ…¢çš„äººåœ¨åœˆé‡Œå¤šè·‘äº†nåœˆï¼Œå³nb, ç”±äºæ…¢çš„äººèµ°äº†sï¼Œ æ‰€æœ‰å¿«çš„äººèµ°äº†fast = s + nb (å…·ä½“næ˜¯å‡ æœªçŸ¥)3.  æœ‰1å¼ å‡2å¯å¾—s = nb4. å¯ä»¥å†çœ‹ï¼Œ æ¯æ¬¡ç»è¿‡å…¥å£ç‚¹å¾—è·ç¦»k = a + nb5. ç”±äºså·²ç»æœäº†nbæ­¥ï¼Œ æ‰€ä»¥åªéœ€è¦å†èµ°aæ­¥å°±æ˜¯å…¥å£ç‚¹ï¼Œå¦‚ä½•å¾—åˆ°aæ­¥å‘¢ç¬¬äºŒæ¬¡ç›¸é‡1. ç”±ä¸Šé¢æ¨å¯¼æˆ‘ä»¬å¯å¾—slow å†èµ°aæ­¥å°±æ˜¯å…¥å£ç‚¹ï¼Œ1. æ­¤æ—¶è®©å¿«å¾—äººå»èµ·å§‹ç‚¹ï¼Œä¿æŒå’Œæ…¢å¾—äººä¸€è‡´å¾—é€Ÿåº¦ï¼Œå½“ä¸¤äººç›¸é‡æ—¶ï¼Œæ°å¥½èµ°äº†aæ­¥</div><pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token keyword">class</span> <span class="token class-name">Solution</span><span class="token punctuation">:</span>        <span class="token keyword">def</span> <span class="token function">detectCycle</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> head<span class="token punctuation">:</span> Optional<span class="token punctuation">[</span>ListNode<span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token operator">-</span><span class="token operator">></span> Optional<span class="token punctuation">[</span>ListNode<span class="token punctuation">]</span><span class="token punctuation">:</span>        fast <span class="token operator">=</span> slow <span class="token operator">=</span> head        <span class="token keyword">if</span> <span class="token keyword">not</span> head<span class="token punctuation">:</span>            <span class="token keyword">return</span> <span class="token boolean">None</span>        <span class="token keyword">while</span> fast<span class="token punctuation">.</span><span class="token builtin">next</span> <span class="token keyword">and</span> fast<span class="token punctuation">.</span><span class="token builtin">next</span><span class="token punctuation">.</span><span class="token builtin">next</span><span class="token punctuation">:</span>            fast <span class="token operator">=</span> fast<span class="token punctuation">.</span><span class="token builtin">next</span><span class="token punctuation">.</span><span class="token builtin">next</span>  <span class="token comment"># èµ°ä¸¤æ­¥</span>            slow <span class="token operator">=</span> slow<span class="token punctuation">.</span><span class="token builtin">next</span>            <span class="token keyword">if</span> fast <span class="token keyword">is</span> slow<span class="token punctuation">:</span>  <span class="token comment"># é¦–æ¬¡ç›¸é‡:</span>                fast <span class="token operator">=</span> head                <span class="token keyword">while</span> fast <span class="token keyword">is</span> <span class="token keyword">not</span> slow<span class="token punctuation">:</span>                    fast <span class="token operator">=</span> fast<span class="token punctuation">.</span><span class="token builtin">next</span>                    slow <span class="token operator">=</span> slow<span class="token punctuation">.</span><span class="token builtin">next</span>                    <span class="token comment">#if fast is slow:</span>                    <span class="token comment">#    return slow</span>                <span class="token keyword">return</span> fast        <span class="token keyword">return</span> <span class="token boolean">None</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h2 id="160-ç›¸äº¤é“¾è¡¨"><a href="#160-ç›¸äº¤é“¾è¡¨" class="headerlink" title="160. ç›¸äº¤é“¾è¡¨"></a><a href="https://leetcode.cn/problems/intersection-of-two-linked-lists/">160. ç›¸äº¤é“¾è¡¨</a></h2><blockquote><p>ç»™ä½ ä¸¤ä¸ªå•é“¾è¡¨çš„å¤´èŠ‚ç‚¹ headA å’Œ headB ï¼Œè¯·ä½ æ‰¾å‡ºå¹¶è¿”å›ä¸¤ä¸ªå•é“¾è¡¨ç›¸äº¤çš„èµ·å§‹èŠ‚ç‚¹ã€‚å¦‚æœä¸¤ä¸ªé“¾è¡¨ä¸å­˜åœ¨ç›¸äº¤èŠ‚ç‚¹ï¼Œè¿”å› null ã€‚</p><p>å›¾ç¤ºä¸¤ä¸ªé“¾è¡¨åœ¨èŠ‚ç‚¹ c1 å¼€å§‹ç›¸äº¤ï¼š</p></blockquote><p><img src="https://zhangtq-blog.oss-cn-hangzhou.aliyuncs.com/content_picture/image-20221202201030405.png" alt="image-20221202201030405"></p><blockquote><p>é¢˜ç›®æ•°æ® ä¿è¯ æ•´ä¸ªé“¾å¼ç»“æ„ä¸­ä¸å­˜åœ¨ç¯ã€‚</p><p>æ³¨æ„ï¼Œå‡½æ•°è¿”å›ç»“æœåï¼Œé“¾è¡¨å¿…é¡» ä¿æŒå…¶åŸå§‹ç»“æ„ ã€‚</p><p>è‡ªå®šä¹‰è¯„æµ‹ï¼š</p><p>è¯„æµ‹ç³»ç»Ÿ çš„è¾“å…¥å¦‚ä¸‹ï¼ˆä½ è®¾è®¡çš„ç¨‹åº ä¸é€‚ç”¨ æ­¤è¾“å…¥ï¼‰ï¼š</p><p>intersectVal - ç›¸äº¤çš„èµ·å§‹èŠ‚ç‚¹çš„å€¼ã€‚å¦‚æœä¸å­˜åœ¨ç›¸äº¤èŠ‚ç‚¹ï¼Œè¿™ä¸€å€¼ä¸º 0<br>listA - ç¬¬ä¸€ä¸ªé“¾è¡¨<br>listB - ç¬¬äºŒä¸ªé“¾è¡¨<br>skipA - åœ¨ listA ä¸­ï¼ˆä»å¤´èŠ‚ç‚¹å¼€å§‹ï¼‰è·³åˆ°äº¤å‰èŠ‚ç‚¹çš„èŠ‚ç‚¹æ•°<br>skipB - åœ¨ listB ä¸­ï¼ˆä»å¤´èŠ‚ç‚¹å¼€å§‹ï¼‰è·³åˆ°äº¤å‰èŠ‚ç‚¹çš„èŠ‚ç‚¹æ•°<br>è¯„æµ‹ç³»ç»Ÿå°†æ ¹æ®è¿™äº›è¾“å…¥åˆ›å»ºé“¾å¼æ•°æ®ç»“æ„ï¼Œå¹¶å°†ä¸¤ä¸ªå¤´èŠ‚ç‚¹ headA å’Œ headB ä¼ é€’ç»™ä½ çš„ç¨‹åºã€‚å¦‚æœç¨‹åºèƒ½å¤Ÿæ­£ç¡®è¿”å›ç›¸äº¤èŠ‚ç‚¹ï¼Œé‚£ä¹ˆä½ çš„è§£å†³æ–¹æ¡ˆå°†è¢« è§†ä½œæ­£ç¡®ç­”æ¡ˆ ã€‚</p></blockquote><p><img src="https://zhangtq-blog.oss-cn-hangzhou.aliyuncs.com/content_picture/image-20221202201321823.png" alt="image-20221202201321823"></p><ul><li>é‡‡ç”¨hash è¡¨çš„æ–¹å¼ï¼Œçœ‹æ˜¯å¦å­˜åœ¨hashè¡¨ä¸­</li></ul><pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token keyword">class</span> <span class="token class-name">Solution</span><span class="token punctuation">:</span>    <span class="token keyword">def</span> <span class="token function">getIntersectionNode</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> headA<span class="token punctuation">:</span> ListNode<span class="token punctuation">,</span> headB<span class="token punctuation">:</span> ListNode<span class="token punctuation">)</span> <span class="token operator">-</span><span class="token operator">></span> Optional<span class="token punctuation">[</span>ListNode<span class="token punctuation">]</span><span class="token punctuation">:</span>        viewed <span class="token operator">=</span> <span class="token builtin">set</span><span class="token punctuation">(</span><span class="token punctuation">)</span>        <span class="token keyword">while</span> headA<span class="token punctuation">:</span>            viewed<span class="token punctuation">.</span>add<span class="token punctuation">(</span>headA<span class="token punctuation">)</span>            headA <span class="token operator">=</span> headA<span class="token punctuation">.</span><span class="token builtin">next</span>        <span class="token keyword">while</span> headB<span class="token punctuation">:</span>            <span class="token keyword">if</span> headB <span class="token keyword">in</span> viewed<span class="token punctuation">:</span>                <span class="token keyword">return</span> headB            headB <span class="token operator">=</span> headB<span class="token punctuation">.</span><span class="token builtin">next</span>        <span class="token keyword">return</span> <span class="token boolean">None</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h2 id="143-é‡æ’é“¾è¡¨"><a href="#143-é‡æ’é“¾è¡¨" class="headerlink" title="143. é‡æ’é“¾è¡¨"></a><a href="https://leetcode.cn/problems/reorder-list/">143. é‡æ’é“¾è¡¨</a></h2><blockquote><p>ç»™å®šä¸€ä¸ªå•é“¾è¡¨ L çš„å¤´èŠ‚ç‚¹ head ï¼Œå•é“¾è¡¨ L è¡¨ç¤ºä¸ºï¼š</p><p>L0 â†’ L1 â†’ â€¦ â†’ Ln - 1 â†’ Ln<br>è¯·å°†å…¶é‡æ–°æ’åˆ—åå˜ä¸ºï¼š</p><p>L0 â†’ Ln â†’ L1 â†’ Ln - 1 â†’ L2 â†’ Ln - 2 â†’ â€¦<br>ä¸èƒ½åªæ˜¯å•çº¯çš„æ”¹å˜èŠ‚ç‚¹å†…éƒ¨çš„å€¼ï¼Œè€Œæ˜¯éœ€è¦å®é™…çš„è¿›è¡ŒèŠ‚ç‚¹äº¤æ¢ã€‚</p></blockquote><p><img src="https://zhangtq-blog.oss-cn-hangzhou.aliyuncs.com/content_picture/image-20221202143938115.png" alt="image-20221202143938115"></p><p>æ–¹æ³•ä¸€ï¼š æ ˆ+ è®¡ç®—ä¸­é—´èŠ‚ç‚¹å¾—å‰é©±èŠ‚ç‚¹+é“¾è¡¨åŸåœ°æ’å…¥</p><pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token keyword">class</span> <span class="token class-name">Solution</span><span class="token punctuation">(</span><span class="token builtin">object</span><span class="token punctuation">)</span><span class="token punctuation">:</span>    <span class="token keyword">def</span> <span class="token function">reorderList</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> head<span class="token punctuation">)</span><span class="token punctuation">:</span>        <span class="token triple-quoted-string string">"""        :type head: ListNode        :rtype: None Do not return anything, modify head in-place instead.        """</span>        <span class="token keyword">if</span> <span class="token keyword">not</span> head<span class="token punctuation">:</span> <span class="token keyword">return</span> <span class="token boolean">None</span>                stack <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>        cur <span class="token operator">=</span> head        <span class="token keyword">while</span> cur<span class="token punctuation">:</span>            stack<span class="token punctuation">.</span>append<span class="token punctuation">(</span>cur<span class="token punctuation">)</span>            cur <span class="token operator">=</span> cur<span class="token punctuation">.</span><span class="token builtin">next</span>        n <span class="token operator">=</span> <span class="token builtin">len</span><span class="token punctuation">(</span>stack<span class="token punctuation">)</span>        middle <span class="token operator">=</span> <span class="token punctuation">(</span>n<span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span> <span class="token operator">//</span><span class="token number">2</span>        cur <span class="token operator">=</span> head        <span class="token keyword">while</span> middle<span class="token punctuation">:</span>            tmp <span class="token operator">=</span> stack<span class="token punctuation">.</span>pop<span class="token punctuation">(</span><span class="token punctuation">)</span>            <span class="token comment"># å°†æ ˆä¸­å¾—å…ƒç´ æ’å…¥åˆ°headä¸­</span>            tmp<span class="token punctuation">.</span><span class="token builtin">next</span> <span class="token operator">=</span> cur<span class="token punctuation">.</span><span class="token builtin">next</span>            cur<span class="token punctuation">.</span><span class="token builtin">next</span> <span class="token operator">=</span> tmp            cur <span class="token operator">=</span> cur<span class="token punctuation">.</span><span class="token builtin">next</span><span class="token punctuation">.</span><span class="token builtin">next</span>            middle <span class="token operator">-=</span> <span class="token number">1</span>        stack<span class="token punctuation">.</span>pop<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token builtin">next</span> <span class="token operator">=</span> <span class="token boolean">None</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>æ–¹æ³•äºŒï¼šåè½¬é“¾è¡¨ + é“¾è¡¨ä¸­ç‚¹ + é“¾è¡¨æ‹¼æ¥</p><pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token keyword">class</span> <span class="token class-name">Solution</span><span class="token punctuation">(</span><span class="token builtin">object</span><span class="token punctuation">)</span><span class="token punctuation">:</span>    <span class="token keyword">def</span> <span class="token function">reorderList</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> head<span class="token punctuation">)</span><span class="token punctuation">:</span>        <span class="token triple-quoted-string string">"""        :type head: ListNode        :rtype: None Do not return anything, modify head in-place instead.        """</span>        <span class="token keyword">if</span> <span class="token keyword">not</span> head <span class="token keyword">or</span> <span class="token keyword">not</span> head<span class="token punctuation">.</span><span class="token builtin">next</span><span class="token punctuation">:</span>            <span class="token keyword">return</span> head        <span class="token keyword">def</span> <span class="token function">middle_node</span><span class="token punctuation">(</span>head<span class="token punctuation">)</span><span class="token punctuation">:</span>            slow <span class="token operator">=</span> fast <span class="token operator">=</span> head            <span class="token keyword">while</span> fast<span class="token punctuation">.</span><span class="token builtin">next</span> <span class="token keyword">and</span> fast<span class="token punctuation">.</span><span class="token builtin">next</span><span class="token punctuation">.</span><span class="token builtin">next</span><span class="token punctuation">:</span>                slow <span class="token operator">=</span> slow<span class="token punctuation">.</span><span class="token builtin">next</span>                fast <span class="token operator">=</span> fast<span class="token punctuation">.</span><span class="token builtin">next</span><span class="token punctuation">.</span><span class="token builtin">next</span>            <span class="token keyword">return</span> slow        <span class="token keyword">def</span> <span class="token function">reverse_link</span><span class="token punctuation">(</span>head<span class="token punctuation">)</span><span class="token punctuation">:</span>            <span class="token triple-quoted-string string">"""            åŸåœ°é€†ç½®æ³•            åˆå§‹åŒ–ä¸¤ä¸ªä¸‰ä¸ªæŒ‡é’ˆï¼Œä¸€ä¸ªæŒ‡å‘å¤´èŠ‚ç‚¹ï¼Œä¸€ä¸ªæŒ‡å‘ç¬¬ä¸€ä¸ªèŠ‚ç‚¹ï¼Œä¸€ä¸ªæŒ‡å‘ç¬¬äºŒä¸ªèŠ‚ç‚¹            """</span>            beg<span class="token operator">=</span> head            end <span class="token operator">=</span> head<span class="token punctuation">.</span><span class="token builtin">next</span>            <span class="token keyword">while</span> end<span class="token punctuation">:</span>                beg<span class="token punctuation">.</span><span class="token builtin">next</span> <span class="token operator">=</span> end<span class="token punctuation">.</span><span class="token builtin">next</span>                end<span class="token punctuation">.</span><span class="token builtin">next</span> <span class="token operator">=</span> head                head <span class="token operator">=</span> end                end <span class="token operator">=</span> beg<span class="token punctuation">.</span><span class="token builtin">next</span>            <span class="token keyword">return</span> head        <span class="token keyword">def</span> <span class="token function">mergeList</span><span class="token punctuation">(</span>l1<span class="token punctuation">,</span> l2<span class="token punctuation">)</span><span class="token punctuation">:</span>            <span class="token keyword">while</span> l1 <span class="token keyword">and</span> l2<span class="token punctuation">:</span>                l1_next <span class="token operator">=</span> l1<span class="token punctuation">.</span><span class="token builtin">next</span>                l2_next <span class="token operator">=</span> l2<span class="token punctuation">.</span><span class="token builtin">next</span>                l1<span class="token punctuation">.</span><span class="token builtin">next</span> <span class="token operator">=</span> l2                l1 <span class="token operator">=</span> l1_next                l2<span class="token punctuation">.</span><span class="token builtin">next</span> <span class="token operator">=</span> l1                l2 <span class="token operator">=</span> l2_next        node <span class="token operator">=</span> middle_node<span class="token punctuation">(</span>head<span class="token punctuation">)</span>        right <span class="token operator">=</span> node<span class="token punctuation">.</span><span class="token builtin">next</span> <span class="token comment">#å³åŠéƒ¨é“¾è¡¨</span>        node<span class="token punctuation">.</span><span class="token builtin">next</span> <span class="token operator">=</span> <span class="token boolean">None</span>  <span class="token comment"># æ³¨æ„ä¸€å®šè¦æ–­é“¾</span>        <span class="token comment"># é€†ç½®é“¾è¡¨</span>        right <span class="token operator">=</span> reverse_link<span class="token punctuation">(</span>right<span class="token punctuation">)</span>        <span class="token comment"># åˆå¹¶ä¸¤ä¸ªé“¾è¡¨</span>        mergeList<span class="token punctuation">(</span>head<span class="token punctuation">,</span> right<span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h2 id="876-é“¾è¡¨çš„ä¸­é—´ç»“ç‚¹"><a href="#876-é“¾è¡¨çš„ä¸­é—´ç»“ç‚¹" class="headerlink" title="876. é“¾è¡¨çš„ä¸­é—´ç»“ç‚¹"></a><a href="https://leetcode.cn/problems/middle-of-the-linked-list/">876. é“¾è¡¨çš„ä¸­é—´ç»“ç‚¹</a></h2><blockquote><p>ç»™å®šä¸€ä¸ªå¤´ç»“ç‚¹ä¸º <code>head</code> çš„éç©ºå•é“¾è¡¨ï¼Œè¿”å›é“¾è¡¨çš„ä¸­é—´ç»“ç‚¹ã€‚</p><p>å¦‚æœæœ‰ä¸¤ä¸ªä¸­é—´ç»“ç‚¹ï¼Œåˆ™è¿”å›ç¬¬äºŒä¸ªä¸­é—´ç»“ç‚¹ã€‚</p></blockquote><h2 id="å¸¸è§åè½¬é“¾è¡¨çš„æ–¹æ³•"><a href="#å¸¸è§åè½¬é“¾è¡¨çš„æ–¹æ³•" class="headerlink" title="å¸¸è§åè½¬é“¾è¡¨çš„æ–¹æ³•"></a>å¸¸è§åè½¬é“¾è¡¨çš„æ–¹æ³•</h2><h3 id="å¤´æ’æ³•"><a href="#å¤´æ’æ³•" class="headerlink" title="å¤´æ’æ³•"></a>å¤´æ’æ³•</h3><ul><li>æ‰€è°“å¤´æ’æ³•ï¼Œæ˜¯æŒ‡åœ¨åŸæœ‰é“¾è¡¨çš„åŸºç¡€ä¸Šï¼Œä¾æ¬¡å°†ä½äºé“¾è¡¨å¤´éƒ¨çš„èŠ‚ç‚¹æ‘˜ä¸‹ï¼Œç„¶åé‡‡ç”¨ä»å¤´éƒ¨æ’å…¥çš„æ–¹å¼ç”Ÿæˆä¸€ä¸ªæ–°é“¾è¡¨ï¼Œåˆ™æ­¤é“¾è¡¨å³ä¸ºåŸé“¾è¡¨çš„åè½¬ç‰ˆ</li></ul><p><img src="https://zhangtq-blog.oss-cn-hangzhou.aliyuncs.com/content_picture/image-20221201234143662.png" alt="image-20221201234143662"></p><ul><li>æ–°å»ºä¸€ä¸ªå¤´æŒ‡é’ˆæŒ‡å‘ç©ºçš„èŠ‚ç‚¹</li><li>å°†åŸé“¾è¡¨çš„èŠ‚ç‚¹æ’å…¥æ–°èŠ‚ç‚¹çš„å¤´éƒ¨</li><li>é‡å¤ä¸Šé¢æ“ä½œï¼Œæ¯æ¬¡æ’å…¥å¤´éƒ¨ï¼Œè¿™æ ·æœ€ç»ˆå°±å®ç°äº†é€†ç½®</li></ul><pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token comment"># Definition for singly-linked list.</span><span class="token comment"># class ListNode:</span><span class="token comment">#     def __init__(self, val=0, next=None):</span><span class="token comment">#         self.val = val</span><span class="token comment">#         self.next = next</span><span class="token keyword">class</span> <span class="token class-name">Solution</span><span class="token punctuation">:</span>    <span class="token keyword">def</span> <span class="token function">reverseList</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> head<span class="token punctuation">:</span> Optional<span class="token punctuation">[</span>ListNode<span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token operator">-</span><span class="token operator">></span> Optional<span class="token punctuation">[</span>ListNode<span class="token punctuation">]</span><span class="token punctuation">:</span>        <span class="token triple-quoted-string string">"""        å¤´æ’æ³•        åŸåœ°é€†ç½®æ³•        """</span>        new_head <span class="token operator">=</span> <span class="token boolean">None</span>        <span class="token keyword">while</span> head<span class="token punctuation">:</span>            <span class="token builtin">next</span> <span class="token operator">=</span> head<span class="token punctuation">.</span><span class="token builtin">next</span>            head<span class="token punctuation">.</span><span class="token builtin">next</span> <span class="token operator">=</span> new_head            new_head <span class="token operator">=</span> head            head <span class="token operator">=</span> <span class="token builtin">next</span>        <span class="token keyword">return</span> new_head<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h3 id="åŸåœ°é€†ç½®æ³•"><a href="#åŸåœ°é€†ç½®æ³•" class="headerlink" title="åŸåœ°é€†ç½®æ³•"></a>åŸåœ°é€†ç½®æ³•</h3><p>å¤´æ’æ³•éœ€è¦å»ºç«‹æ–°çš„é“¾è¡¨ï¼Œè€ŒåŸåœ°é€†ç½®æ³•æ˜¯åœ¨åŸæ¥é“¾è¡¨çš„åŸºç¡€ä¸Šç›´æ¥è¿›è¡Œä¿®æ”¹ã€‚æ­¤æ—¶éœ€è¦å€ŸåŠ©ä¸¤ä¸ªæŒ‡é’ˆ</p><ul><li>åˆå§‹çŠ¶æ€ä¸‹ï¼Œ head æŒ‡å‘å¤´èŠ‚ç‚¹ï¼Œ begæŒ‡å‘ç¬¬ä¸€ä¸ªèŠ‚ç‚¹ï¼Œend æŒ‡å‘ç¬¬äºŒä¸ªèŠ‚ç‚¹</li><li>ç¬¬ä¸€è½®äº¤æ¢ï¼Œå°†end èŠ‚ç‚¹æ‘˜å‡ºæ¥ï¼Œ ç„¶åæ·»åŠ è‡³é“¾è¡¨çš„å¤´éƒ¨</li><li>å°†endæŒ‡å‘bed.nextèŠ‚ç‚¹ï¼Œç„¶åå°†endæŒ‡å‘çš„èŠ‚ç‚¹ä»é“¾è¡¨ä¸­æ‘˜é™¤ï¼Œç„¶åå°†endèŠ‚ç‚¹æ·»åŠ è‡³å¤´éƒ¨</li><li>ä¾æ¬¡é‡å¤æœ€åå®Œæˆåè½¬é“¾è¡¨</li></ul><div class="uk-alert uk-alert-warning"><i class="fa fa-exclamation-circle"></i> æ³¨æ„è¾¹ç•Œæ¡ä»¶ä»¥åŠåˆå§‹åŒ–begå’ŒendæŒ‡é’ˆ</div><p><img src="https://zhangtq-blog.oss-cn-hangzhou.aliyuncs.com/content_picture/image-20221202002039580.png" alt="image-20221202002039580"></p><pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token comment"># Definition for singly-linked list.</span><span class="token comment"># class ListNode:</span><span class="token comment">#     def __init__(self, val=0, next=None):</span><span class="token comment">#         self.val = val</span><span class="token comment">#         self.next = next</span><span class="token keyword">class</span> <span class="token class-name">Solution</span><span class="token punctuation">:</span>    <span class="token keyword">def</span> <span class="token function">reverseList</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> head<span class="token punctuation">:</span> Optional<span class="token punctuation">[</span>ListNode<span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token operator">-</span><span class="token operator">></span> Optional<span class="token punctuation">[</span>ListNode<span class="token punctuation">]</span><span class="token punctuation">:</span>        <span class="token triple-quoted-string string">"""        åŸåœ°é€†ç½®æ³•        """</span>        <span class="token keyword">if</span> <span class="token keyword">not</span> head <span class="token keyword">or</span> <span class="token keyword">not</span> head<span class="token punctuation">.</span><span class="token builtin">next</span><span class="token punctuation">:</span>            <span class="token keyword">return</span> head        <span class="token comment"># åˆå§‹åŒ–ä¸¤ä¸ªæŒ‡é’ˆ</span>        beg <span class="token operator">=</span> head        end <span class="token operator">=</span> head<span class="token punctuation">.</span><span class="token builtin">next</span>        <span class="token keyword">while</span> end<span class="token punctuation">:</span>            <span class="token comment">#beg = head</span>            <span class="token comment">#end = head.next</span>            beg<span class="token punctuation">.</span><span class="token builtin">next</span> <span class="token operator">=</span> end<span class="token punctuation">.</span><span class="token builtin">next</span>            end<span class="token punctuation">.</span><span class="token builtin">next</span> <span class="token operator">=</span> head            head <span class="token operator">=</span> end            end <span class="token operator">=</span> beg<span class="token punctuation">.</span><span class="token builtin">next</span>        <span class="token keyword">return</span> head<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h1 id="å †ã€æ ˆã€é˜Ÿåˆ—"><a href="#å †ã€æ ˆã€é˜Ÿåˆ—" class="headerlink" title="å †ã€æ ˆã€é˜Ÿåˆ—"></a>å †ã€æ ˆã€é˜Ÿåˆ—</h1><h2 id="225-ç”¨é˜Ÿåˆ—å®ç°æ ˆ"><a href="#225-ç”¨é˜Ÿåˆ—å®ç°æ ˆ" class="headerlink" title="225. ç”¨é˜Ÿåˆ—å®ç°æ ˆ"></a><a href="https://leetcode.cn/problems/implement-stack-using-queues/">225. ç”¨é˜Ÿåˆ—å®ç°æ ˆ</a></h2><blockquote><p>è¯·ä½ ä»…ä½¿ç”¨ä¸¤ä¸ªé˜Ÿåˆ—å®ç°ä¸€ä¸ªåå…¥å…ˆå‡ºï¼ˆLIFOï¼‰çš„æ ˆï¼Œå¹¶æ”¯æŒæ™®é€šæ ˆçš„å…¨éƒ¨å››ç§æ“ä½œï¼ˆpushã€topã€pop å’Œ emptyï¼‰ã€‚</p><p>å®ç° MyStack ç±»ï¼š</p><p>void push(int x) å°†å…ƒç´  x å‹å…¥æ ˆé¡¶ã€‚<br>int pop() ç§»é™¤å¹¶è¿”å›æ ˆé¡¶å…ƒç´ ã€‚<br>int top() è¿”å›æ ˆé¡¶å…ƒç´ ã€‚<br>boolean empty() å¦‚æœæ ˆæ˜¯ç©ºçš„ï¼Œè¿”å› true ï¼›å¦åˆ™ï¼Œè¿”å› false ã€‚</p></blockquote><pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token keyword">class</span> <span class="token class-name">MyStack</span><span class="token punctuation">:</span>    <span class="token keyword">def</span> <span class="token function">__init__</span><span class="token punctuation">(</span>self<span class="token punctuation">)</span><span class="token punctuation">:</span>        self<span class="token punctuation">.</span>queue1 <span class="token operator">=</span> collections<span class="token punctuation">.</span>deque<span class="token punctuation">(</span><span class="token punctuation">)</span>        self<span class="token punctuation">.</span>queue2 <span class="token operator">=</span> collections<span class="token punctuation">.</span>deque<span class="token punctuation">(</span><span class="token punctuation">)</span>    <span class="token keyword">def</span> <span class="token function">push</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> x<span class="token punctuation">:</span> <span class="token builtin">int</span><span class="token punctuation">)</span> <span class="token operator">-</span><span class="token operator">></span> <span class="token boolean">None</span><span class="token punctuation">:</span>        self<span class="token punctuation">.</span>queue2<span class="token punctuation">.</span>append<span class="token punctuation">(</span>x<span class="token punctuation">)</span>        <span class="token keyword">while</span> self<span class="token punctuation">.</span>queue1<span class="token punctuation">:</span>            self<span class="token punctuation">.</span>queue2<span class="token punctuation">.</span>append<span class="token punctuation">(</span>self<span class="token punctuation">.</span>queue1<span class="token punctuation">.</span>popleft<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>        self<span class="token punctuation">.</span>queue1<span class="token punctuation">,</span> self<span class="token punctuation">.</span>queue2 <span class="token operator">=</span> self<span class="token punctuation">.</span>queue2<span class="token punctuation">,</span> self<span class="token punctuation">.</span>queue1    <span class="token keyword">def</span> <span class="token function">pop</span><span class="token punctuation">(</span>self<span class="token punctuation">)</span> <span class="token operator">-</span><span class="token operator">></span> <span class="token builtin">int</span><span class="token punctuation">:</span>        <span class="token keyword">return</span> self<span class="token punctuation">.</span>queue1<span class="token punctuation">.</span>popleft<span class="token punctuation">(</span><span class="token punctuation">)</span>    <span class="token keyword">def</span> <span class="token function">top</span><span class="token punctuation">(</span>self<span class="token punctuation">)</span> <span class="token operator">-</span><span class="token operator">></span> <span class="token builtin">int</span><span class="token punctuation">:</span>        <span class="token keyword">return</span> self<span class="token punctuation">.</span>queue1<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span>    <span class="token keyword">def</span> <span class="token function">empty</span><span class="token punctuation">(</span>self<span class="token punctuation">)</span> <span class="token operator">-</span><span class="token operator">></span> <span class="token builtin">bool</span><span class="token punctuation">:</span>        <span class="token keyword">return</span> <span class="token boolean">True</span> <span class="token keyword">if</span> <span class="token builtin">len</span><span class="token punctuation">(</span>self<span class="token punctuation">.</span>queue1<span class="token punctuation">)</span> <span class="token operator">==</span><span class="token number">0</span> <span class="token keyword">else</span> <span class="token boolean">False</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h2 id="346-æ•°æ®æµä¸­çš„ç§»åŠ¨å¹³å‡å€¼"><a href="#346-æ•°æ®æµä¸­çš„ç§»åŠ¨å¹³å‡å€¼" class="headerlink" title="346. æ•°æ®æµä¸­çš„ç§»åŠ¨å¹³å‡å€¼"></a><a href="https://leetcode.cn/problems/moving-average-from-data-stream/">346. æ•°æ®æµä¸­çš„ç§»åŠ¨å¹³å‡å€¼</a></h2><blockquote><p>ç»™å®šä¸€ä¸ªæ•´æ•°æ•°æ®æµå’Œä¸€ä¸ªçª—å£å¤§å°ï¼Œæ ¹æ®è¯¥æ»‘åŠ¨çª—å£çš„å¤§å°ï¼Œè®¡ç®—å…¶æ‰€æœ‰æ•´æ•°çš„ç§»åŠ¨å¹³å‡å€¼ã€‚</p><p>å®ç° MovingAverage ç±»ï¼š</p><p>MovingAverage(int size) ç”¨çª—å£å¤§å° size åˆå§‹åŒ–å¯¹è±¡ã€‚<br>double next(int val) è®¡ç®—å¹¶è¿”å›æ•°æ®æµä¸­æœ€å size ä¸ªå€¼çš„ç§»åŠ¨å¹³å‡å€¼ã€‚</p></blockquote><p><img src="https://zhangtq-blog.oss-cn-hangzhou.aliyuncs.com/content_picture/image-20221204091756212.png" alt="image-20221204091756212"></p><pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token keyword">class</span> <span class="token class-name">MovingAverage</span><span class="token punctuation">:</span>    <span class="token keyword">def</span> <span class="token function">__init__</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> size<span class="token punctuation">:</span> <span class="token builtin">int</span><span class="token punctuation">)</span><span class="token punctuation">:</span>        self<span class="token punctuation">.</span>size <span class="token operator">=</span> size        self<span class="token punctuation">.</span>queue <span class="token operator">=</span> collections<span class="token punctuation">.</span>deque<span class="token punctuation">(</span><span class="token punctuation">)</span>        self<span class="token punctuation">.</span>total <span class="token operator">=</span> <span class="token number">0</span>    <span class="token keyword">def</span> <span class="token function">next</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> val<span class="token punctuation">:</span> <span class="token builtin">int</span><span class="token punctuation">)</span> <span class="token operator">-</span><span class="token operator">></span> <span class="token builtin">float</span><span class="token punctuation">:</span>        <span class="token keyword">if</span> <span class="token builtin">len</span><span class="token punctuation">(</span>self<span class="token punctuation">.</span>queue<span class="token punctuation">)</span> <span class="token operator">>=</span>self<span class="token punctuation">.</span>size<span class="token punctuation">:</span>            self<span class="token punctuation">.</span>queue<span class="token punctuation">.</span>popleft<span class="token punctuation">(</span><span class="token punctuation">)</span>        self<span class="token punctuation">.</span>queue<span class="token punctuation">.</span>append<span class="token punctuation">(</span>val<span class="token punctuation">)</span>        <span class="token keyword">return</span> <span class="token builtin">sum</span><span class="token punctuation">(</span>self<span class="token punctuation">.</span>queue<span class="token punctuation">)</span> <span class="token operator">/</span> <span class="token builtin">len</span><span class="token punctuation">(</span>self<span class="token punctuation">.</span>queue<span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h2 id="281-é”¯é½¿è¿­ä»£å™¨"><a href="#281-é”¯é½¿è¿­ä»£å™¨" class="headerlink" title="281. é”¯é½¿è¿­ä»£å™¨"></a><a href="https://leetcode.cn/problems/zigzag-iterator/">281. é”¯é½¿è¿­ä»£å™¨</a></h2><blockquote><p>ç»™å‡ºä¸¤ä¸ªä¸€ç»´çš„å‘é‡ï¼Œè¯·ä½ å®ç°ä¸€ä¸ªè¿­ä»£å™¨ï¼Œäº¤æ›¿è¿”å›å®ƒä»¬ä¸­é—´çš„å…ƒç´ ã€‚</p><p>ç¤ºä¾‹:</p><p>è¾“å…¥:<br>v1 &#x3D; [1,2]<br>v2 &#x3D; [3,4,5,6] </p><p>è¾“å‡º: [1,3,2,4,5,6]</p><p>è§£æ: é€šè¿‡è¿ç»­è°ƒç”¨ next å‡½æ•°ç›´åˆ° hasNext å‡½æ•°è¿”å› falseï¼Œ<br>     next å‡½æ•°è¿”å›å€¼çš„æ¬¡åºåº”ä¾æ¬¡ä¸º: [1,3,2,4,5,6]ã€‚</p></blockquote><pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token keyword">class</span> <span class="token class-name">ZigzagIterator</span><span class="token punctuation">:</span>    <span class="token triple-quoted-string string">"""    é€šè¿‡tagæ ‡è®°ä¸‹æ¬¡æ˜¯å–æ•°æ®çš„é˜Ÿåˆ—    """</span>    <span class="token keyword">def</span> <span class="token function">__init__</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> v1<span class="token punctuation">:</span> List<span class="token punctuation">[</span><span class="token builtin">int</span><span class="token punctuation">]</span><span class="token punctuation">,</span> v2<span class="token punctuation">:</span> List<span class="token punctuation">[</span><span class="token builtin">int</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">:</span>        self<span class="token punctuation">.</span>queue1 <span class="token operator">=</span> v1<span class="token punctuation">[</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">]</span>        self<span class="token punctuation">.</span>queue2 <span class="token operator">=</span> v2<span class="token punctuation">[</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">]</span>        self<span class="token punctuation">.</span>tag <span class="token operator">=</span> <span class="token number">1</span> <span class="token keyword">if</span> self<span class="token punctuation">.</span>queue1 <span class="token keyword">else</span> <span class="token number">2</span>    <span class="token keyword">def</span> <span class="token function">next</span><span class="token punctuation">(</span>self<span class="token punctuation">)</span> <span class="token operator">-</span><span class="token operator">></span> <span class="token builtin">int</span><span class="token punctuation">:</span>        <span class="token keyword">if</span> self<span class="token punctuation">.</span>queue1 <span class="token keyword">and</span> self<span class="token punctuation">.</span>tag <span class="token operator">==</span> <span class="token number">1</span><span class="token punctuation">:</span>                        <span class="token keyword">if</span> self<span class="token punctuation">.</span>queue2<span class="token punctuation">:</span>                self<span class="token punctuation">.</span>tag <span class="token operator">=</span> <span class="token number">2</span>            <span class="token keyword">return</span> self<span class="token punctuation">.</span>queue1<span class="token punctuation">.</span>pop<span class="token punctuation">(</span><span class="token punctuation">)</span>        <span class="token keyword">if</span> self<span class="token punctuation">.</span>queue2 <span class="token keyword">and</span> self<span class="token punctuation">.</span>tag <span class="token operator">==</span> <span class="token number">2</span><span class="token punctuation">:</span>            <span class="token keyword">if</span> self<span class="token punctuation">.</span>queue1<span class="token punctuation">:</span>                self<span class="token punctuation">.</span>tag <span class="token operator">=</span> <span class="token number">1</span>            <span class="token keyword">return</span> self<span class="token punctuation">.</span>queue2<span class="token punctuation">.</span>pop<span class="token punctuation">(</span><span class="token punctuation">)</span>                <span class="token keyword">def</span> <span class="token function">hasNext</span><span class="token punctuation">(</span>self<span class="token punctuation">)</span> <span class="token operator">-</span><span class="token operator">></span> <span class="token builtin">bool</span><span class="token punctuation">:</span>        <span class="token keyword">return</span> <span class="token boolean">True</span> <span class="token keyword">if</span> self<span class="token punctuation">.</span>queue1 <span class="token keyword">or</span> self<span class="token punctuation">.</span>queue2 <span class="token keyword">else</span> <span class="token boolean">False</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h2 id="54-èºæ—‹çŸ©é˜µ"><a href="#54-èºæ—‹çŸ©é˜µ" class="headerlink" title="54. èºæ—‹çŸ©é˜µ"></a><a href="https://leetcode.cn/problems/spiral-matrix/">54. èºæ—‹çŸ©é˜µ</a></h2><blockquote><p>ç»™ä½ ä¸€ä¸ª <code>m</code> è¡Œ <code>n</code> åˆ—çš„çŸ©é˜µ <code>matrix</code> ï¼Œè¯·æŒ‰ç…§ <strong>é¡ºæ—¶é’ˆèºæ—‹é¡ºåº</strong> ï¼Œè¿”å›çŸ©é˜µä¸­çš„æ‰€æœ‰å…ƒç´ ã€‚</p></blockquote><p><img src="https://zhangtq-blog.oss-cn-hangzhou.aliyuncs.com/content_picture/image-20221206110053748.png" alt="image-20221206110053748"></p><pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token keyword">class</span> <span class="token class-name">Solution</span><span class="token punctuation">:</span>    <span class="token keyword">def</span> <span class="token function">spiralOrder</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> matrix<span class="token punctuation">:</span> List<span class="token punctuation">[</span>List<span class="token punctuation">[</span><span class="token builtin">int</span><span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token operator">-</span><span class="token operator">></span> List<span class="token punctuation">[</span><span class="token builtin">int</span><span class="token punctuation">]</span><span class="token punctuation">:</span>        <span class="token keyword">if</span> <span class="token keyword">not</span> matrix<span class="token punctuation">:</span>            <span class="token keyword">return</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>        m <span class="token operator">=</span> <span class="token builtin">len</span><span class="token punctuation">(</span>matrix<span class="token punctuation">)</span>        n <span class="token operator">=</span> <span class="token builtin">len</span><span class="token punctuation">(</span>matrix<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">)</span>        result <span class="token operator">=</span> <span class="token builtin">list</span><span class="token punctuation">(</span><span class="token punctuation">)</span>        left<span class="token punctuation">,</span> right<span class="token punctuation">,</span> top<span class="token punctuation">,</span> bottom <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">,</span> n<span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> m<span class="token operator">-</span><span class="token number">1</span>        <span class="token keyword">while</span> left <span class="token operator">&lt;=</span> right <span class="token keyword">and</span> top <span class="token operator">&lt;=</span> bottom<span class="token punctuation">:</span>            <span class="token keyword">for</span> col <span class="token keyword">in</span> <span class="token builtin">range</span><span class="token punctuation">(</span>left<span class="token punctuation">,</span> right<span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">:</span>                result<span class="token punctuation">.</span>append<span class="token punctuation">(</span>matrix<span class="token punctuation">[</span>top<span class="token punctuation">]</span><span class="token punctuation">[</span>col<span class="token punctuation">]</span><span class="token punctuation">)</span>            <span class="token keyword">for</span> row <span class="token keyword">in</span> <span class="token builtin">range</span><span class="token punctuation">(</span>top<span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">,</span> bottom<span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">:</span>                result<span class="token punctuation">.</span>append<span class="token punctuation">(</span>matrix<span class="token punctuation">[</span>row<span class="token punctuation">]</span><span class="token punctuation">[</span>right<span class="token punctuation">]</span><span class="token punctuation">)</span>            <span class="token keyword">if</span> left <span class="token operator">&lt;</span> right <span class="token keyword">and</span> top <span class="token operator">&lt;</span> bottom<span class="token punctuation">:</span>                <span class="token keyword">for</span> col <span class="token keyword">in</span> <span class="token builtin">range</span><span class="token punctuation">(</span>right<span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">,</span> left<span class="token punctuation">,</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">:</span>                    result<span class="token punctuation">.</span>append<span class="token punctuation">(</span>matrix<span class="token punctuation">[</span>bottom<span class="token punctuation">]</span><span class="token punctuation">[</span>col<span class="token punctuation">]</span><span class="token punctuation">)</span>                <span class="token keyword">for</span> row <span class="token keyword">in</span> <span class="token builtin">range</span><span class="token punctuation">(</span>bottom<span class="token punctuation">,</span> top<span class="token punctuation">,</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">:</span>                    result<span class="token punctuation">.</span>append<span class="token punctuation">(</span>matrix<span class="token punctuation">[</span>row<span class="token punctuation">]</span><span class="token punctuation">[</span>left<span class="token punctuation">]</span><span class="token punctuation">)</span>            left <span class="token operator">+=</span> <span class="token number">1</span>            right <span class="token operator">-=</span> <span class="token number">1</span>            top <span class="token operator">+=</span> <span class="token number">1</span>            bottom <span class="token operator">-=</span> <span class="token number">1</span>        <span class="token keyword">return</span> result<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h2 id="362-æ•²å‡»è®¡æ•°å™¨"><a href="#362-æ•²å‡»è®¡æ•°å™¨" class="headerlink" title="362. æ•²å‡»è®¡æ•°å™¨"></a><a href="https://leetcode.cn/problems/design-hit-counter/">362. æ•²å‡»è®¡æ•°å™¨</a></h2><blockquote><p>è®¾è®¡ä¸€ä¸ªæ•²å‡»è®¡æ•°å™¨ï¼Œä½¿å®ƒå¯ä»¥ç»Ÿè®¡åœ¨è¿‡å» 5 åˆ†é’Ÿå†…è¢«æ•²å‡»æ¬¡æ•°ã€‚ï¼ˆå³è¿‡å» 300 ç§’ï¼‰</p><p>æ‚¨çš„ç³»ç»Ÿåº”è¯¥æ¥å—ä¸€ä¸ªæ—¶é—´æˆ³å‚æ•° timestamp (å•ä½ä¸º ç§’ )ï¼Œå¹¶ä¸”æ‚¨å¯ä»¥å‡å®šå¯¹ç³»ç»Ÿçš„è°ƒç”¨æ˜¯æŒ‰æ—¶é—´é¡ºåºè¿›è¡Œçš„(å³ timestamp æ˜¯å•è°ƒé€’å¢çš„)ã€‚å‡ æ¬¡æ’å‡»å¯èƒ½åŒæ—¶å‘ç”Ÿã€‚</p></blockquote><pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token keyword">class</span> <span class="token class-name">HitCounter</span><span class="token punctuation">:</span>    <span class="token triple-quoted-string string">"""    ç›¸å½“äºä¸€ä¸ªå›ºå®šå¤§å°çš„çª—å£ï¼Œå†çª—å£å†…æ‰¾åˆ°åˆé€‚æ•°æ®    """</span>    <span class="token keyword">def</span> <span class="token function">__init__</span><span class="token punctuation">(</span>self<span class="token punctuation">)</span><span class="token punctuation">:</span>        self<span class="token punctuation">.</span>queue1 <span class="token operator">=</span> collections<span class="token punctuation">.</span>deque<span class="token punctuation">(</span><span class="token punctuation">)</span>        self<span class="token punctuation">.</span>queue2 <span class="token operator">=</span> collections<span class="token punctuation">.</span>deque<span class="token punctuation">(</span><span class="token punctuation">)</span>    <span class="token keyword">def</span> <span class="token function">hit</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> timestamp<span class="token punctuation">:</span> <span class="token builtin">int</span><span class="token punctuation">)</span> <span class="token operator">-</span><span class="token operator">></span> <span class="token boolean">None</span><span class="token punctuation">:</span>        self<span class="token punctuation">.</span>queue1<span class="token punctuation">.</span>append<span class="token punctuation">(</span>timestamp<span class="token punctuation">)</span>        <span class="token keyword">while</span> self<span class="token punctuation">.</span>queue1 <span class="token keyword">and</span> timestamp <span class="token operator">-</span> self<span class="token punctuation">.</span>queue1<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token operator">>=</span><span class="token number">300</span><span class="token punctuation">:</span>            self<span class="token punctuation">.</span>queue1<span class="token punctuation">.</span>popleft<span class="token punctuation">(</span><span class="token punctuation">)</span>    <span class="token keyword">def</span> <span class="token function">getHits</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> timestamp<span class="token punctuation">:</span> <span class="token builtin">int</span><span class="token punctuation">)</span> <span class="token operator">-</span><span class="token operator">></span> <span class="token builtin">int</span><span class="token punctuation">:</span>        <span class="token keyword">while</span> self<span class="token punctuation">.</span>queue1 <span class="token keyword">and</span> timestamp <span class="token operator">-</span> self<span class="token punctuation">.</span>queue1<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token operator">>=</span><span class="token number">300</span><span class="token punctuation">:</span>            self<span class="token punctuation">.</span>queue1<span class="token punctuation">.</span>popleft<span class="token punctuation">(</span><span class="token punctuation">)</span>              <span class="token keyword">return</span> <span class="token builtin">len</span><span class="token punctuation">(</span>self<span class="token punctuation">.</span>queue1<span class="token punctuation">)</span><span class="token comment"># Your HitCounter object will be instantiated and called as such:</span><span class="token comment"># obj = HitCounter()</span><span class="token comment"># obj.hit(timestamp)</span><span class="token comment"># param_2 = obj.getHits(timestamp)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h2 id="155-æœ€å°æ ˆ"><a href="#155-æœ€å°æ ˆ" class="headerlink" title="155. æœ€å°æ ˆ"></a><a href="https://leetcode.cn/problems/min-stack/">155. æœ€å°æ ˆ</a></h2><blockquote><p>è®¾è®¡ä¸€ä¸ªæ”¯æŒ push ï¼Œpop ï¼Œtop æ“ä½œï¼Œå¹¶èƒ½åœ¨å¸¸æ•°æ—¶é—´å†…æ£€ç´¢åˆ°æœ€å°å…ƒç´ çš„æ ˆã€‚</p><p>å®ç° MinStack ç±»:</p><p>MinStack() åˆå§‹åŒ–å †æ ˆå¯¹è±¡ã€‚<br>void push(int val) å°†å…ƒç´ valæ¨å…¥å †æ ˆã€‚<br>void pop() åˆ é™¤å †æ ˆé¡¶éƒ¨çš„å…ƒç´ ã€‚<br>int top() è·å–å †æ ˆé¡¶éƒ¨çš„å…ƒç´ ã€‚<br>int getMin() è·å–å †æ ˆä¸­çš„æœ€å°å…ƒç´ ã€‚</p></blockquote><pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token keyword">class</span> <span class="token class-name">MinStack</span><span class="token punctuation">:</span>    <span class="token keyword">def</span> <span class="token function">__init__</span><span class="token punctuation">(</span>self<span class="token punctuation">)</span><span class="token punctuation">:</span>        self<span class="token punctuation">.</span><span class="token builtin">min</span> <span class="token operator">=</span> <span class="token builtin">list</span><span class="token punctuation">(</span><span class="token punctuation">)</span>        self<span class="token punctuation">.</span>stack <span class="token operator">=</span> <span class="token builtin">list</span><span class="token punctuation">(</span><span class="token punctuation">)</span>    <span class="token keyword">def</span> <span class="token function">push</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> val<span class="token punctuation">:</span> <span class="token builtin">int</span><span class="token punctuation">)</span> <span class="token operator">-</span><span class="token operator">></span> <span class="token boolean">None</span><span class="token punctuation">:</span>        <span class="token comment">#self.min = val if not self.min  else min(self.min, val)</span>        <span class="token keyword">if</span> <span class="token keyword">not</span> self<span class="token punctuation">.</span><span class="token builtin">min</span><span class="token punctuation">:</span>            self<span class="token punctuation">.</span><span class="token builtin">min</span><span class="token punctuation">.</span>append<span class="token punctuation">(</span>val<span class="token punctuation">)</span>        <span class="token keyword">else</span><span class="token punctuation">:</span>            <span class="token keyword">if</span> self<span class="token punctuation">.</span><span class="token builtin">min</span><span class="token punctuation">[</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">>=</span> val<span class="token punctuation">:</span>                self<span class="token punctuation">.</span><span class="token builtin">min</span><span class="token punctuation">.</span>append<span class="token punctuation">(</span>val<span class="token punctuation">)</span>        self<span class="token punctuation">.</span>stack<span class="token punctuation">.</span>append<span class="token punctuation">(</span>val<span class="token punctuation">)</span>    <span class="token keyword">def</span> <span class="token function">pop</span><span class="token punctuation">(</span>self<span class="token punctuation">)</span> <span class="token operator">-</span><span class="token operator">></span> <span class="token boolean">None</span><span class="token punctuation">:</span>        num <span class="token operator">=</span> self<span class="token punctuation">.</span>stack<span class="token punctuation">.</span>pop<span class="token punctuation">(</span><span class="token punctuation">)</span>        <span class="token keyword">if</span> self<span class="token punctuation">.</span><span class="token builtin">min</span> <span class="token keyword">and</span> self<span class="token punctuation">.</span><span class="token builtin">min</span><span class="token punctuation">[</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">==</span> num<span class="token punctuation">:</span>            self<span class="token punctuation">.</span><span class="token builtin">min</span><span class="token punctuation">.</span>pop<span class="token punctuation">(</span><span class="token punctuation">)</span>        <span class="token keyword">return</span> num    <span class="token keyword">def</span> <span class="token function">top</span><span class="token punctuation">(</span>self<span class="token punctuation">)</span> <span class="token operator">-</span><span class="token operator">></span> <span class="token builtin">int</span><span class="token punctuation">:</span>        <span class="token keyword">return</span> self<span class="token punctuation">.</span>stack<span class="token punctuation">[</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">]</span>    <span class="token keyword">def</span> <span class="token function">getMin</span><span class="token punctuation">(</span>self<span class="token punctuation">)</span> <span class="token operator">-</span><span class="token operator">></span> <span class="token builtin">int</span><span class="token punctuation">:</span>        <span class="token keyword">return</span> self<span class="token punctuation">.</span><span class="token builtin">min</span><span class="token punctuation">[</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token comment"># Your MinStack object will be instantiated and called as such:</span><span class="token comment"># obj = MinStack()</span><span class="token comment"># obj.push(val)</span><span class="token comment"># obj.pop()</span><span class="token comment"># param_3 = obj.top()</span><span class="token comment"># param_4 = obj.getMin()</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h2 id="232-ç”¨æ ˆå®ç°é˜Ÿåˆ—"><a href="#232-ç”¨æ ˆå®ç°é˜Ÿåˆ—" class="headerlink" title="232. ç”¨æ ˆå®ç°é˜Ÿåˆ—"></a><a href="https://leetcode.cn/problems/implement-queue-using-stacks/">232. ç”¨æ ˆå®ç°é˜Ÿåˆ—</a></h2><blockquote><p>è¯·ä½ ä»…ä½¿ç”¨ä¸¤ä¸ªæ ˆå®ç°å…ˆå…¥å…ˆå‡ºé˜Ÿåˆ—ã€‚é˜Ÿåˆ—åº”å½“æ”¯æŒä¸€èˆ¬é˜Ÿåˆ—æ”¯æŒçš„æ‰€æœ‰æ“ä½œï¼ˆpushã€popã€peekã€emptyï¼‰ï¼š</p><p>å®ç° MyQueue ç±»ï¼š</p><p>void push(int x) å°†å…ƒç´  x æ¨åˆ°é˜Ÿåˆ—çš„æœ«å°¾<br>int pop() ä»é˜Ÿåˆ—çš„å¼€å¤´ç§»é™¤å¹¶è¿”å›å…ƒç´ <br>int peek() è¿”å›é˜Ÿåˆ—å¼€å¤´çš„å…ƒç´ <br>boolean empty() å¦‚æœé˜Ÿåˆ—ä¸ºç©ºï¼Œè¿”å› true ï¼›å¦åˆ™ï¼Œè¿”å› false<br>è¯´æ˜ï¼š</p><p>ä½  åªèƒ½ ä½¿ç”¨æ ‡å‡†çš„æ ˆæ“ä½œ â€”â€” ä¹Ÿå°±æ˜¯åªæœ‰ push to top, peek&#x2F;pop from top, size, å’Œ is empty æ“ä½œæ˜¯åˆæ³•çš„ã€‚<br>ä½ æ‰€ä½¿ç”¨çš„è¯­è¨€ä¹Ÿè®¸ä¸æ”¯æŒæ ˆã€‚ä½ å¯ä»¥ä½¿ç”¨ list æˆ–è€… dequeï¼ˆåŒç«¯é˜Ÿåˆ—ï¼‰æ¥æ¨¡æ‹Ÿä¸€ä¸ªæ ˆï¼Œåªè¦æ˜¯æ ‡å‡†çš„æ ˆæ“ä½œå³å¯ã€‚</p></blockquote><pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token keyword">class</span> <span class="token class-name">MyQueue</span><span class="token punctuation">:</span>    <span class="token keyword">def</span> <span class="token function">__init__</span><span class="token punctuation">(</span>self<span class="token punctuation">)</span><span class="token punctuation">:</span>        self<span class="token punctuation">.</span>stack1 <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>        self<span class="token punctuation">.</span>stack2 <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>    <span class="token keyword">def</span> <span class="token function">push</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> x<span class="token punctuation">:</span> <span class="token builtin">int</span><span class="token punctuation">)</span> <span class="token operator">-</span><span class="token operator">></span> <span class="token boolean">None</span><span class="token punctuation">:</span>        self<span class="token punctuation">.</span>stack1<span class="token punctuation">.</span>append<span class="token punctuation">(</span>x<span class="token punctuation">)</span>    <span class="token keyword">def</span> <span class="token function">pop</span><span class="token punctuation">(</span>self<span class="token punctuation">)</span> <span class="token operator">-</span><span class="token operator">></span> <span class="token builtin">int</span><span class="token punctuation">:</span>        <span class="token keyword">if</span> self<span class="token punctuation">.</span>stack2<span class="token punctuation">:</span>            <span class="token keyword">return</span> self<span class="token punctuation">.</span>stack2<span class="token punctuation">.</span>pop<span class="token punctuation">(</span><span class="token punctuation">)</span>        <span class="token keyword">else</span><span class="token punctuation">:</span>            <span class="token keyword">while</span> self<span class="token punctuation">.</span>stack1<span class="token punctuation">:</span>                self<span class="token punctuation">.</span>stack2<span class="token punctuation">.</span>append<span class="token punctuation">(</span>self<span class="token punctuation">.</span>stack1<span class="token punctuation">.</span>pop<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>            <span class="token keyword">return</span> self<span class="token punctuation">.</span>stack2<span class="token punctuation">.</span>pop<span class="token punctuation">(</span><span class="token punctuation">)</span>    <span class="token keyword">def</span> <span class="token function">peek</span><span class="token punctuation">(</span>self<span class="token punctuation">)</span> <span class="token operator">-</span><span class="token operator">></span> <span class="token builtin">int</span><span class="token punctuation">:</span>        <span class="token keyword">if</span> self<span class="token punctuation">.</span>stack2<span class="token punctuation">:</span>            <span class="token keyword">return</span> self<span class="token punctuation">.</span>stack2<span class="token punctuation">[</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">]</span>        <span class="token keyword">else</span><span class="token punctuation">:</span>            <span class="token keyword">while</span> self<span class="token punctuation">.</span>stack1<span class="token punctuation">:</span>                self<span class="token punctuation">.</span>stack2<span class="token punctuation">.</span>append<span class="token punctuation">(</span>self<span class="token punctuation">.</span>stack1<span class="token punctuation">.</span>pop<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>            <span class="token keyword">return</span> self<span class="token punctuation">.</span>stack2<span class="token punctuation">[</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">]</span>    <span class="token keyword">def</span> <span class="token function">empty</span><span class="token punctuation">(</span>self<span class="token punctuation">)</span> <span class="token operator">-</span><span class="token operator">></span> <span class="token builtin">bool</span><span class="token punctuation">:</span>        <span class="token keyword">return</span>  <span class="token boolean">False</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>self<span class="token punctuation">.</span>stack1 <span class="token keyword">or</span> self<span class="token punctuation">.</span>stack2<span class="token punctuation">)</span> <span class="token keyword">else</span> <span class="token boolean">True</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h2 id="150-é€†æ³¢å…°è¡¨è¾¾å¼æ±‚å€¼"><a href="#150-é€†æ³¢å…°è¡¨è¾¾å¼æ±‚å€¼" class="headerlink" title="150. é€†æ³¢å…°è¡¨è¾¾å¼æ±‚å€¼"></a><a href="https://leetcode.cn/problems/evaluate-reverse-polish-notation/">150. é€†æ³¢å…°è¡¨è¾¾å¼æ±‚å€¼</a></h2><blockquote><p>æ ¹æ® é€†æ³¢å…°è¡¨ç¤ºæ³•ï¼Œæ±‚è¡¨è¾¾å¼çš„å€¼ã€‚</p><p>æœ‰æ•ˆçš„ç®—ç¬¦åŒ…æ‹¬ +ã€-ã€*ã€&#x2F; ã€‚æ¯ä¸ªè¿ç®—å¯¹è±¡å¯ä»¥æ˜¯æ•´æ•°ï¼Œä¹Ÿå¯ä»¥æ˜¯å¦ä¸€ä¸ªé€†æ³¢å…°è¡¨è¾¾å¼ã€‚</p><p>æ³¨æ„ ä¸¤ä¸ªæ•´æ•°ä¹‹é—´çš„é™¤æ³•åªä¿ç•™æ•´æ•°éƒ¨åˆ†ã€‚</p><p>å¯ä»¥ä¿è¯ç»™å®šçš„é€†æ³¢å…°è¡¨è¾¾å¼æ€»æ˜¯æœ‰æ•ˆçš„ã€‚æ¢å¥è¯è¯´ï¼Œè¡¨è¾¾å¼æ€»ä¼šå¾—å‡ºæœ‰æ•ˆæ•°å€¼ä¸”ä¸å­˜åœ¨é™¤æ•°ä¸º 0 çš„æƒ…å†µã€‚</p></blockquote><pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token keyword">class</span> <span class="token class-name">Solution</span><span class="token punctuation">:</span>    <span class="token keyword">def</span> <span class="token function">evalRPN</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> tokens<span class="token punctuation">:</span> List<span class="token punctuation">[</span><span class="token builtin">str</span><span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token operator">-</span><span class="token operator">></span> <span class="token builtin">int</span><span class="token punctuation">:</span>        stack <span class="token operator">=</span> <span class="token builtin">list</span><span class="token punctuation">(</span><span class="token punctuation">)</span>        set1 <span class="token operator">=</span> <span class="token punctuation">&#123;</span><span class="token string">"/"</span><span class="token punctuation">,</span> <span class="token string">"+"</span><span class="token punctuation">,</span> <span class="token string">"-"</span><span class="token punctuation">,</span><span class="token string">"*"</span><span class="token punctuation">&#125;</span>        <span class="token keyword">for</span> <span class="token builtin">chr</span> <span class="token keyword">in</span> tokens<span class="token punctuation">:</span>            <span class="token keyword">if</span> <span class="token builtin">chr</span> <span class="token keyword">not</span> <span class="token keyword">in</span> set1<span class="token punctuation">:</span>                stack<span class="token punctuation">.</span>append<span class="token punctuation">(</span><span class="token builtin">int</span><span class="token punctuation">(</span><span class="token builtin">chr</span><span class="token punctuation">)</span><span class="token punctuation">)</span>            <span class="token keyword">else</span><span class="token punctuation">:</span>                num1 <span class="token operator">=</span> stack<span class="token punctuation">.</span>pop<span class="token punctuation">(</span><span class="token punctuation">)</span>                num2 <span class="token operator">=</span> stack<span class="token punctuation">.</span>pop<span class="token punctuation">(</span><span class="token punctuation">)</span>                <span class="token keyword">if</span> <span class="token builtin">chr</span> <span class="token operator">==</span> <span class="token string">"/"</span><span class="token punctuation">:</span>                    temp <span class="token operator">=</span> <span class="token builtin">int</span><span class="token punctuation">(</span>num2 <span class="token operator">/</span>  num1<span class="token punctuation">)</span>                <span class="token keyword">elif</span> <span class="token builtin">chr</span> <span class="token operator">==</span> <span class="token string">"*"</span><span class="token punctuation">:</span>                    temp <span class="token operator">=</span> num1 <span class="token operator">*</span> num2                <span class="token keyword">elif</span> <span class="token builtin">chr</span> <span class="token operator">==</span> <span class="token string">"+"</span><span class="token punctuation">:</span>                    temp <span class="token operator">=</span>num1 <span class="token operator">+</span> num2                <span class="token keyword">else</span><span class="token punctuation">:</span>                                        temp <span class="token operator">=</span> num2 <span class="token operator">-</span> num1                stack<span class="token punctuation">.</span>append<span class="token punctuation">(</span>temp<span class="token punctuation">)</span>        <span class="token keyword">return</span> stack<span class="token punctuation">[</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">]</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h2 id="20-æœ‰æ•ˆçš„æ‹¬å·"><a href="#20-æœ‰æ•ˆçš„æ‹¬å·" class="headerlink" title="20. æœ‰æ•ˆçš„æ‹¬å·"></a><a href="https://leetcode.cn/problems/valid-parentheses/">20. æœ‰æ•ˆçš„æ‹¬å·</a></h2><blockquote><p>ç»™å®šä¸€ä¸ªåªåŒ…æ‹¬ â€˜(â€˜ï¼Œâ€™)â€™ï¼Œâ€™{â€˜ï¼Œâ€™}â€™ï¼Œâ€™[â€˜ï¼Œâ€™]â€™ çš„å­—ç¬¦ä¸² s ï¼Œåˆ¤æ–­å­—ç¬¦ä¸²æ˜¯å¦æœ‰æ•ˆã€‚</p><p>æœ‰æ•ˆå­—ç¬¦ä¸²éœ€æ»¡è¶³ï¼š</p><p>å·¦æ‹¬å·å¿…é¡»ç”¨ç›¸åŒç±»å‹çš„å³æ‹¬å·é—­åˆã€‚<br>å·¦æ‹¬å·å¿…é¡»ä»¥æ­£ç¡®çš„é¡ºåºé—­åˆã€‚<br>æ¯ä¸ªå³æ‹¬å·éƒ½æœ‰ä¸€ä¸ªå¯¹åº”çš„ç›¸åŒç±»å‹çš„å·¦æ‹¬å·ã€‚</p></blockquote><pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token keyword">class</span> <span class="token class-name">Solution</span><span class="token punctuation">:</span>    <span class="token keyword">def</span> <span class="token function">isValid</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> s<span class="token punctuation">:</span> <span class="token builtin">str</span><span class="token punctuation">)</span> <span class="token operator">-</span><span class="token operator">></span> <span class="token builtin">bool</span><span class="token punctuation">:</span>        stack <span class="token operator">=</span> <span class="token builtin">list</span><span class="token punctuation">(</span><span class="token punctuation">)</span>        dict1 <span class="token operator">=</span> <span class="token punctuation">&#123;</span><span class="token string">")"</span><span class="token punctuation">:</span> <span class="token string">"("</span><span class="token punctuation">,</span> <span class="token string">"&#125;"</span><span class="token punctuation">:</span> <span class="token string">"&#123;"</span><span class="token punctuation">,</span>  <span class="token string">"]"</span><span class="token punctuation">:</span> <span class="token string">"["</span><span class="token punctuation">&#125;</span>        <span class="token keyword">for</span> ss <span class="token keyword">in</span> s<span class="token punctuation">:</span>            <span class="token keyword">if</span> ss <span class="token keyword">in</span> dict1<span class="token punctuation">:</span>                <span class="token keyword">if</span> stack <span class="token keyword">and</span> stack<span class="token punctuation">[</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">==</span> dict1<span class="token punctuation">.</span>get<span class="token punctuation">(</span>ss<span class="token punctuation">)</span><span class="token punctuation">:</span>                    stack<span class="token punctuation">.</span>pop<span class="token punctuation">(</span><span class="token punctuation">)</span>                <span class="token keyword">else</span><span class="token punctuation">:</span>                    <span class="token keyword">return</span> <span class="token boolean">False</span>            <span class="token keyword">else</span><span class="token punctuation">:</span>                stack<span class="token punctuation">.</span>append<span class="token punctuation">(</span>ss<span class="token punctuation">)</span>                <span class="token keyword">return</span> <span class="token boolean">True</span> <span class="token keyword">if</span> <span class="token keyword">not</span> stack <span class="token keyword">else</span> <span class="token boolean">False</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h2 id="1472-è®¾è®¡æµè§ˆå™¨å†å²è®°å½•"><a href="#1472-è®¾è®¡æµè§ˆå™¨å†å²è®°å½•" class="headerlink" title="1472. è®¾è®¡æµè§ˆå™¨å†å²è®°å½•"></a><a href="https://leetcode.cn/problems/design-browser-history/">1472. è®¾è®¡æµè§ˆå™¨å†å²è®°å½•</a></h2><blockquote><p>ä½ æœ‰ä¸€ä¸ªåªæ”¯æŒå•ä¸ªæ ‡ç­¾é¡µçš„ æµè§ˆå™¨ ï¼Œæœ€å¼€å§‹ä½ æµè§ˆçš„ç½‘é¡µæ˜¯ homepage ï¼Œä½ å¯ä»¥è®¿é—®å…¶ä»–çš„ç½‘ç«™ url ï¼Œä¹Ÿå¯ä»¥åœ¨æµè§ˆå†å²ä¸­åé€€ steps æ­¥æˆ–å‰è¿› steps æ­¥ã€‚</p><p>è¯·ä½ å®ç° BrowserHistory ç±»ï¼š</p><p>BrowserHistory(string homepage) ï¼Œç”¨ homepage åˆå§‹åŒ–æµè§ˆå™¨ç±»ã€‚<br>void visit(string url) ä»å½“å‰é¡µè·³è½¬è®¿é—® url å¯¹åº”çš„é¡µé¢  ã€‚æ‰§è¡Œæ­¤æ“ä½œä¼šæŠŠæµè§ˆå†å²å‰è¿›çš„è®°å½•å…¨éƒ¨åˆ é™¤ã€‚<br>string back(int steps) åœ¨æµè§ˆå†å²ä¸­åé€€ steps æ­¥ã€‚å¦‚æœä½ åªèƒ½åœ¨æµè§ˆå†å²ä¸­åé€€è‡³å¤š x æ­¥ä¸” steps &gt; x ï¼Œé‚£ä¹ˆä½ åªåé€€ x æ­¥ã€‚è¯·è¿”å›åé€€ è‡³å¤š steps æ­¥ä»¥åçš„ url ã€‚<br>string forward(int steps) åœ¨æµè§ˆå†å²ä¸­å‰è¿› steps æ­¥ã€‚å¦‚æœä½ åªèƒ½åœ¨æµè§ˆå†å²ä¸­å‰è¿›è‡³å¤š x æ­¥ä¸” steps &gt; x ï¼Œé‚£ä¹ˆä½ åªå‰è¿› x æ­¥ã€‚è¯·è¿”å›å‰è¿› è‡³å¤š stepsæ­¥ä»¥åçš„ url ã€‚</p></blockquote><pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token keyword">class</span> <span class="token class-name">BrowserHistory</span><span class="token punctuation">:</span>    <span class="token keyword">def</span> <span class="token function">__init__</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> homepage<span class="token punctuation">:</span> <span class="token builtin">str</span><span class="token punctuation">)</span><span class="token punctuation">:</span>        self<span class="token punctuation">.</span>stack <span class="token operator">=</span> <span class="token punctuation">[</span>homepage<span class="token punctuation">]</span>        self<span class="token punctuation">.</span>pos <span class="token operator">=</span> <span class="token number">0</span>    <span class="token keyword">def</span> <span class="token function">visit</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> url<span class="token punctuation">:</span> <span class="token builtin">str</span><span class="token punctuation">)</span> <span class="token operator">-</span><span class="token operator">></span> <span class="token boolean">None</span><span class="token punctuation">:</span>                self<span class="token punctuation">.</span>stack <span class="token operator">=</span> self<span class="token punctuation">.</span>stack<span class="token punctuation">[</span><span class="token punctuation">:</span>self<span class="token punctuation">.</span>pos<span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">]</span>        self<span class="token punctuation">.</span>stack<span class="token punctuation">.</span>append<span class="token punctuation">(</span>url<span class="token punctuation">)</span>        self<span class="token punctuation">.</span>pos <span class="token operator">=</span> <span class="token builtin">len</span><span class="token punctuation">(</span>self<span class="token punctuation">.</span>stack<span class="token punctuation">)</span> <span class="token operator">-</span><span class="token number">1</span>        <span class="token keyword">return</span> url            <span class="token keyword">def</span> <span class="token function">back</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> steps<span class="token punctuation">:</span> <span class="token builtin">int</span><span class="token punctuation">)</span> <span class="token operator">-</span><span class="token operator">></span> <span class="token builtin">str</span><span class="token punctuation">:</span>        <span class="token keyword">if</span> steps <span class="token operator">>=</span> self<span class="token punctuation">.</span>pos<span class="token punctuation">:</span>            self<span class="token punctuation">.</span>pos <span class="token operator">=</span> <span class="token number">0</span>            <span class="token keyword">return</span> self<span class="token punctuation">.</span>stack<span class="token punctuation">[</span>self<span class="token punctuation">.</span>pos<span class="token punctuation">]</span>              <span class="token keyword">else</span><span class="token punctuation">:</span>            self<span class="token punctuation">.</span>pos <span class="token operator">=</span> self<span class="token punctuation">.</span>pos<span class="token operator">-</span>steps            <span class="token keyword">return</span> self<span class="token punctuation">.</span>stack<span class="token punctuation">[</span>self<span class="token punctuation">.</span>pos<span class="token punctuation">]</span>    <span class="token keyword">def</span> <span class="token function">forward</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> steps<span class="token punctuation">:</span> <span class="token builtin">int</span><span class="token punctuation">)</span> <span class="token operator">-</span><span class="token operator">></span> <span class="token builtin">str</span><span class="token punctuation">:</span>        <span class="token keyword">if</span> <span class="token builtin">len</span><span class="token punctuation">(</span>self<span class="token punctuation">.</span>stack<span class="token punctuation">)</span> <span class="token operator">-</span> <span class="token punctuation">(</span>self<span class="token punctuation">.</span>pos<span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">)</span> <span class="token operator">&lt;</span> steps<span class="token punctuation">:</span>            self<span class="token punctuation">.</span>pos <span class="token operator">=</span> <span class="token builtin">len</span><span class="token punctuation">(</span>self<span class="token punctuation">.</span>stack<span class="token punctuation">)</span><span class="token operator">-</span><span class="token number">1</span>            <span class="token keyword">return</span> self<span class="token punctuation">.</span>stack<span class="token punctuation">[</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">]</span>        <span class="token keyword">else</span><span class="token punctuation">:</span>            self<span class="token punctuation">.</span>pos <span class="token operator">=</span> self<span class="token punctuation">.</span>pos <span class="token operator">+</span> steps            <span class="token keyword">return</span> self<span class="token punctuation">.</span>stack<span class="token punctuation">[</span>self<span class="token punctuation">.</span>pos<span class="token punctuation">]</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h2 id="735-è¡Œæ˜Ÿç¢°æ’"><a href="#735-è¡Œæ˜Ÿç¢°æ’" class="headerlink" title="735. è¡Œæ˜Ÿç¢°æ’"></a><a href="https://leetcode.cn/problems/asteroid-collision/">735. è¡Œæ˜Ÿç¢°æ’</a></h2><blockquote><p>ç»™å®šä¸€ä¸ªæ•´æ•°æ•°ç»„ asteroidsï¼Œè¡¨ç¤ºåœ¨åŒä¸€è¡Œçš„è¡Œæ˜Ÿã€‚</p><p>å¯¹äºæ•°ç»„ä¸­çš„æ¯ä¸€ä¸ªå…ƒç´ ï¼Œå…¶ç»å¯¹å€¼è¡¨ç¤ºè¡Œæ˜Ÿçš„å¤§å°ï¼Œæ­£è´Ÿè¡¨ç¤ºè¡Œæ˜Ÿçš„ç§»åŠ¨æ–¹å‘ï¼ˆæ­£è¡¨ç¤ºå‘å³ç§»åŠ¨ï¼Œè´Ÿè¡¨ç¤ºå‘å·¦ç§»åŠ¨ï¼‰ã€‚æ¯ä¸€é¢—è¡Œæ˜Ÿä»¥ç›¸åŒçš„é€Ÿåº¦ç§»åŠ¨ã€‚</p><p>æ‰¾å‡ºç¢°æ’åå‰©ä¸‹çš„æ‰€æœ‰è¡Œæ˜Ÿã€‚ç¢°æ’è§„åˆ™ï¼šä¸¤ä¸ªè¡Œæ˜Ÿç›¸äº’ç¢°æ’ï¼Œè¾ƒå°çš„è¡Œæ˜Ÿä¼šçˆ†ç‚¸ã€‚å¦‚æœä¸¤é¢—è¡Œæ˜Ÿå¤§å°ç›¸åŒï¼Œåˆ™ä¸¤é¢—è¡Œæ˜Ÿéƒ½ä¼šçˆ†ç‚¸ã€‚ä¸¤é¢—ç§»åŠ¨æ–¹å‘ç›¸åŒçš„è¡Œæ˜Ÿï¼Œæ°¸è¿œä¸ä¼šå‘ç”Ÿç¢°æ’ã€‚</p></blockquote><pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token keyword">class</span> <span class="token class-name">Solution</span><span class="token punctuation">:</span>    <span class="token keyword">def</span> <span class="token function">asteroidCollision</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> asteroids<span class="token punctuation">:</span> List<span class="token punctuation">[</span><span class="token builtin">int</span><span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token operator">-</span><span class="token operator">></span> List<span class="token punctuation">[</span><span class="token builtin">int</span><span class="token punctuation">]</span><span class="token punctuation">:</span>        stack <span class="token operator">=</span> <span class="token punctuation">[</span>asteroids<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">]</span>        asteroids <span class="token operator">=</span> asteroids<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">:</span><span class="token punctuation">]</span>        <span class="token keyword">for</span> i <span class="token keyword">in</span> <span class="token builtin">range</span><span class="token punctuation">(</span><span class="token builtin">len</span><span class="token punctuation">(</span>asteroids<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">:</span>            need_insert<span class="token operator">=</span> <span class="token boolean">True</span>            <span class="token keyword">while</span> stack<span class="token punctuation">:</span>                <span class="token comment"># print(stack[-1], asteroids[i])</span>                <span class="token keyword">if</span> <span class="token punctuation">(</span>stack<span class="token punctuation">[</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">></span><span class="token number">0</span> <span class="token keyword">and</span> asteroids<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token operator">></span><span class="token number">0</span> <span class="token keyword">or</span> <span class="token punctuation">(</span>stack<span class="token punctuation">[</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">&lt;</span><span class="token number">0</span> <span class="token keyword">and</span> asteroids<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">&lt;</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">:</span>                    stack<span class="token punctuation">.</span>append<span class="token punctuation">(</span>asteroids<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">)</span>                    need_insert <span class="token operator">=</span> <span class="token boolean">False</span>                    <span class="token keyword">break</span>                <span class="token comment"># ä¸‹é¢ä¸ºä¸é€šå‘çš„é€»è¾‘</span>                <span class="token comment"># å‰æ•°å‘å·¦ï¼Œåæ•°å‘å³</span>                <span class="token keyword">elif</span> stack<span class="token punctuation">[</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">&lt;</span><span class="token number">0</span> <span class="token keyword">and</span> asteroids<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">></span> <span class="token number">0</span><span class="token punctuation">:</span>                    need_insert <span class="token operator">=</span> <span class="token boolean">False</span>                    stack<span class="token punctuation">.</span>append<span class="token punctuation">(</span>asteroids<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">)</span>                    <span class="token keyword">break</span>                <span class="token comment"># ç›¸æ’ï¼Œ åå¤§äºå‰</span>                <span class="token keyword">elif</span> <span class="token builtin">abs</span><span class="token punctuation">(</span>stack<span class="token punctuation">[</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token operator">&lt;</span> <span class="token builtin">abs</span><span class="token punctuation">(</span>asteroids<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">:</span>                    <span class="token comment"># æ’å…¥åéœ€è¦åˆ¤æ–­å’ŒåŸæœ‰çš„stackä¸­çš„å¤§å°</span>                    stack<span class="token punctuation">.</span>pop<span class="token punctuation">(</span><span class="token punctuation">)</span>                <span class="token keyword">elif</span> <span class="token builtin">abs</span><span class="token punctuation">(</span>stack<span class="token punctuation">[</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token operator">==</span> <span class="token builtin">abs</span><span class="token punctuation">(</span>asteroids<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">:</span>                    stack<span class="token punctuation">.</span>pop<span class="token punctuation">(</span><span class="token punctuation">)</span>                    need_insert <span class="token operator">=</span> <span class="token boolean">False</span>                    <span class="token keyword">break</span>                <span class="token keyword">else</span><span class="token punctuation">:</span>                    need_insert <span class="token operator">=</span> <span class="token boolean">False</span>                    <span class="token keyword">break</span>            <span class="token keyword">if</span> <span class="token keyword">not</span> stack <span class="token keyword">and</span> need_insert<span class="token punctuation">:</span>                stack<span class="token punctuation">.</span>append<span class="token punctuation">(</span>asteroids<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">)</span>        <span class="token keyword">return</span> stack<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h2 id="åˆ é™¤å­—ç¬¦ä¸²ä¸­çš„æ‰€æœ‰ç›¸é‚»é‡å¤é¡¹-II"><a href="#åˆ é™¤å­—ç¬¦ä¸²ä¸­çš„æ‰€æœ‰ç›¸é‚»é‡å¤é¡¹-II" class="headerlink" title="åˆ é™¤å­—ç¬¦ä¸²ä¸­çš„æ‰€æœ‰ç›¸é‚»é‡å¤é¡¹ II"></a><a href="https://leetcode.cn/problems/remove-all-adjacent-duplicates-in-string-ii/">åˆ é™¤å­—ç¬¦ä¸²ä¸­çš„æ‰€æœ‰ç›¸é‚»é‡å¤é¡¹ II</a></h2><blockquote><p>ç»™ä½ ä¸€ä¸ªå­—ç¬¦ä¸² sï¼Œã€Œk å€é‡å¤é¡¹åˆ é™¤æ“ä½œã€å°†ä¼šä» s ä¸­é€‰æ‹© k ä¸ªç›¸é‚»ä¸”ç›¸ç­‰çš„å­—æ¯ï¼Œå¹¶åˆ é™¤å®ƒä»¬ï¼Œä½¿è¢«åˆ å»çš„å­—ç¬¦ä¸²çš„å·¦ä¾§å’Œå³ä¾§è¿åœ¨ä¸€èµ·ã€‚</p><p>ä½ éœ€è¦å¯¹ s é‡å¤è¿›è¡Œæ— é™æ¬¡è¿™æ ·çš„åˆ é™¤æ“ä½œï¼Œç›´åˆ°æ— æ³•ç»§ç»­ä¸ºæ­¢ã€‚</p><p>åœ¨æ‰§è¡Œå®Œæ‰€æœ‰åˆ é™¤æ“ä½œåï¼Œè¿”å›æœ€ç»ˆå¾—åˆ°çš„å­—ç¬¦ä¸²ã€‚</p><p>æœ¬é¢˜ç­”æ¡ˆä¿è¯å”¯ä¸€</p></blockquote><pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token keyword">class</span> <span class="token class-name">Solution</span><span class="token punctuation">:</span>    <span class="token keyword">def</span> <span class="token function">removeDuplicates</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> s<span class="token punctuation">:</span> <span class="token builtin">str</span><span class="token punctuation">,</span> k<span class="token punctuation">:</span> <span class="token builtin">int</span><span class="token punctuation">)</span> <span class="token operator">-</span><span class="token operator">></span> <span class="token builtin">str</span><span class="token punctuation">:</span>        <span class="token comment"># æ–¹æ³•ä¸€ï¼šä¼šè¶…æ—¶</span>        <span class="token comment"># result = list()</span>        <span class="token comment"># for ss in s:</span>        <span class="token comment">#     # ä¸è¶³k-1ä¸ªç›´æ¥åŠ å…¥</span>        <span class="token comment">#     if len(result) &lt; k-1:</span>        <span class="token comment">#         result.append(ss)</span>        <span class="token comment">#     else:</span>        <span class="token comment">#         # æ£€æµ‹åk-1å„å…ƒç´ æ˜¯å¦ç›¸åŒå¹¶ä¸”åŒä¸ºss</span>        <span class="token comment">#         is_valid = False</span>        <span class="token comment">#         result.append(ss)</span>        <span class="token comment">#         for i in range(-1, -k-1, -1):</span>        <span class="token comment">#             if result[i] != ss:</span>        <span class="token comment">#                 is_valid = True</span>        <span class="token comment">#                 break</span>        <span class="token comment">#         if not is_valid:</span>        <span class="token comment">#             result = result[:len(result)-k]</span>        <span class="token comment"># return "".join(result)</span>        <span class="token comment"># æ–¹æ³•äºŒ åˆ©ç”¨æ ˆ</span>        stack <span class="token operator">=</span> <span class="token builtin">list</span><span class="token punctuation">(</span><span class="token punctuation">)</span>        <span class="token keyword">for</span> ss <span class="token keyword">in</span> s<span class="token punctuation">:</span>            <span class="token keyword">if</span> stack<span class="token punctuation">:</span>                <span class="token keyword">if</span> ss <span class="token operator">==</span> stack<span class="token punctuation">[</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token keyword">and</span> stack<span class="token punctuation">[</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token operator">+</span><span class="token number">1</span> <span class="token operator">&lt;</span> k<span class="token punctuation">:</span>                    stack<span class="token punctuation">[</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">+=</span> <span class="token number">1</span>                <span class="token keyword">elif</span> ss <span class="token operator">==</span> stack<span class="token punctuation">[</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token keyword">and</span> stack<span class="token punctuation">[</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token operator">+</span><span class="token number">1</span> <span class="token operator">>=</span>k<span class="token punctuation">:</span>                    stack<span class="token punctuation">.</span>pop<span class="token punctuation">(</span><span class="token punctuation">)</span>                <span class="token keyword">else</span><span class="token punctuation">:</span>                    stack<span class="token punctuation">.</span>append<span class="token punctuation">(</span><span class="token punctuation">[</span>ss<span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">)</span>            <span class="token keyword">else</span><span class="token punctuation">:</span>                stack<span class="token punctuation">.</span>append<span class="token punctuation">(</span><span class="token punctuation">[</span>ss<span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">)</span>        result <span class="token operator">=</span> <span class="token builtin">list</span><span class="token punctuation">(</span><span class="token punctuation">)</span>        <span class="token keyword">for</span> <span class="token builtin">chr</span><span class="token punctuation">,</span> num <span class="token keyword">in</span> stack<span class="token punctuation">:</span>            result<span class="token punctuation">.</span>append<span class="token punctuation">(</span><span class="token builtin">chr</span><span class="token operator">*</span>num<span class="token punctuation">)</span>        <span class="token keyword">return</span> <span class="token string">""</span><span class="token punctuation">.</span>join<span class="token punctuation">(</span>result<span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h2 id="1249-ç§»é™¤æ— æ•ˆçš„æ‹¬å·"><a href="#1249-ç§»é™¤æ— æ•ˆçš„æ‹¬å·" class="headerlink" title="1249. ç§»é™¤æ— æ•ˆçš„æ‹¬å·"></a><a href="https://leetcode.cn/problems/minimum-remove-to-make-valid-parentheses/">1249. ç§»é™¤æ— æ•ˆçš„æ‹¬å·</a></h2><blockquote><p>ç»™ä½ ä¸€ä¸ªç”± â€˜(â€˜ã€â€™)â€™ å’Œå°å†™å­—æ¯ç»„æˆçš„å­—ç¬¦ä¸² sã€‚</p><p>ä½ éœ€è¦ä»å­—ç¬¦ä¸²ä¸­åˆ é™¤æœ€å°‘æ•°ç›®çš„ â€˜(â€˜ æˆ–è€… â€˜)â€™ ï¼ˆå¯ä»¥åˆ é™¤ä»»æ„ä½ç½®çš„æ‹¬å·)ï¼Œä½¿å¾—å‰©ä¸‹çš„ã€Œæ‹¬å·å­—ç¬¦ä¸²ã€æœ‰æ•ˆã€‚</p><p>è¯·è¿”å›ä»»æ„ä¸€ä¸ªåˆæ³•å­—ç¬¦ä¸²ã€‚</p><p>æœ‰æ•ˆã€Œæ‹¬å·å­—ç¬¦ä¸²ã€åº”å½“ç¬¦åˆä»¥ä¸‹ ä»»æ„ä¸€æ¡ è¦æ±‚ï¼š</p><p>ç©ºå­—ç¬¦ä¸²æˆ–åªåŒ…å«å°å†™å­—æ¯çš„å­—ç¬¦ä¸²<br>å¯ä»¥è¢«å†™ä½œ ABï¼ˆA è¿æ¥ Bï¼‰çš„å­—ç¬¦ä¸²ï¼Œå…¶ä¸­ A å’Œ B éƒ½æ˜¯æœ‰æ•ˆã€Œæ‹¬å·å­—ç¬¦ä¸²ã€<br>å¯ä»¥è¢«å†™ä½œ (A) çš„å­—ç¬¦ä¸²ï¼Œå…¶ä¸­ A æ˜¯ä¸€ä¸ªæœ‰æ•ˆçš„ã€Œæ‹¬å·å­—ç¬¦ä¸²ã€</p></blockquote><pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token keyword">class</span> <span class="token class-name">Solution</span><span class="token punctuation">:</span>    <span class="token keyword">def</span> <span class="token function">minRemoveToMakeValid</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> s<span class="token punctuation">:</span> <span class="token builtin">str</span><span class="token punctuation">)</span> <span class="token operator">-</span><span class="token operator">></span> <span class="token builtin">str</span><span class="token punctuation">:</span>        stack1 <span class="token operator">=</span> <span class="token builtin">list</span><span class="token punctuation">(</span><span class="token punctuation">)</span>        s<span class="token operator">=</span> <span class="token builtin">list</span><span class="token punctuation">(</span>s<span class="token punctuation">)</span>        <span class="token keyword">for</span> i <span class="token keyword">in</span> <span class="token builtin">range</span><span class="token punctuation">(</span><span class="token builtin">len</span><span class="token punctuation">(</span>s<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">:</span>            <span class="token keyword">if</span> s<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">==</span> <span class="token string">"("</span><span class="token punctuation">:</span>                stack1<span class="token punctuation">.</span>append<span class="token punctuation">(</span>i<span class="token punctuation">)</span>            <span class="token keyword">elif</span> s<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">==</span> <span class="token string">")"</span><span class="token punctuation">:</span>                <span class="token keyword">if</span> stack1<span class="token punctuation">:</span>                    stack1<span class="token punctuation">.</span>pop<span class="token punctuation">(</span><span class="token punctuation">)</span>                <span class="token keyword">else</span><span class="token punctuation">:</span>                    s<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token string">"0"</span>            <span class="token keyword">else</span><span class="token punctuation">:</span>                <span class="token keyword">pass</span>        <span class="token keyword">while</span> stack1<span class="token punctuation">:</span>            s<span class="token punctuation">[</span>stack1<span class="token punctuation">.</span>pop<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token operator">=</span><span class="token string">"0"</span>        s <span class="token operator">=</span> <span class="token string">""</span><span class="token punctuation">.</span>join<span class="token punctuation">(</span>s<span class="token punctuation">)</span>        s<span class="token operator">=</span> s<span class="token punctuation">.</span>replace<span class="token punctuation">(</span><span class="token string">"0"</span><span class="token punctuation">,</span> <span class="token string">""</span><span class="token punctuation">)</span>        <span class="token keyword">return</span> s<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h1 id="å“ˆå¸Œ-hashmap-x2F-hashset"><a href="#å“ˆå¸Œ-hashmap-x2F-hashset" class="headerlink" title="å“ˆå¸Œ(hashmap&#x2F;hashset)"></a>å“ˆå¸Œ(hashmap&#x2F;hashset)</h1><h2 id="1-ä¸¤æ•°ä¹‹å’Œ"><a href="#1-ä¸¤æ•°ä¹‹å’Œ" class="headerlink" title="1. ä¸¤æ•°ä¹‹å’Œ"></a><a href="https://leetcode.cn/problems/two-sum/">1. ä¸¤æ•°ä¹‹å’Œ</a></h2><blockquote><p>ç»™å®šä¸€ä¸ªæ•´æ•°æ•°ç»„ nums å’Œä¸€ä¸ªæ•´æ•°ç›®æ ‡å€¼ targetï¼Œè¯·ä½ åœ¨è¯¥æ•°ç»„ä¸­æ‰¾å‡º å’Œä¸ºç›®æ ‡å€¼ target  çš„é‚£ ä¸¤ä¸ª æ•´æ•°ï¼Œå¹¶è¿”å›å®ƒä»¬çš„æ•°ç»„ä¸‹æ ‡ã€‚</p><p>ä½ å¯ä»¥å‡è®¾æ¯ç§è¾“å…¥åªä¼šå¯¹åº”ä¸€ä¸ªç­”æ¡ˆã€‚ä½†æ˜¯ï¼Œæ•°ç»„ä¸­åŒä¸€ä¸ªå…ƒç´ åœ¨ç­”æ¡ˆé‡Œä¸èƒ½é‡å¤å‡ºç°ã€‚</p><p>ä½ å¯ä»¥æŒ‰ä»»æ„é¡ºåºè¿”å›ç­”æ¡ˆã€‚</p></blockquote><pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token keyword">class</span> <span class="token class-name">Solution</span><span class="token punctuation">:</span>    <span class="token comment"># # æ–¹æ³•ä¸€ å€ŸåŠ©hashmap</span>    <span class="token keyword">def</span> <span class="token function">twoSum</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> nums<span class="token punctuation">:</span> List<span class="token punctuation">[</span><span class="token builtin">int</span><span class="token punctuation">]</span><span class="token punctuation">,</span> target<span class="token punctuation">:</span> <span class="token builtin">int</span><span class="token punctuation">)</span> <span class="token operator">-</span><span class="token operator">></span> List<span class="token punctuation">[</span><span class="token builtin">int</span><span class="token punctuation">]</span><span class="token punctuation">:</span>                hashdict<span class="token operator">=</span> <span class="token builtin">dict</span><span class="token punctuation">(</span><span class="token punctuation">)</span>        <span class="token keyword">for</span> i <span class="token keyword">in</span> <span class="token builtin">range</span><span class="token punctuation">(</span><span class="token builtin">len</span><span class="token punctuation">(</span>nums<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">:</span>            temp <span class="token operator">=</span> target <span class="token operator">-</span> nums<span class="token punctuation">[</span>i<span class="token punctuation">]</span>            <span class="token keyword">if</span> temp <span class="token keyword">in</span> hashdict<span class="token punctuation">:</span>                <span class="token keyword">return</span> <span class="token punctuation">[</span>i<span class="token punctuation">,</span> hashdict<span class="token punctuation">.</span>get<span class="token punctuation">(</span>temp<span class="token punctuation">)</span><span class="token punctuation">]</span>            hashdict<span class="token punctuation">[</span>nums<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token operator">=</span> i    <span class="token comment"># æš´åŠ›è§£æ³•</span>    <span class="token comment"># def twoSum(self, nums: List[int], target: int) -> List[int]:</span>    <span class="token comment">#     for i in range(len(nums)):</span>    <span class="token comment">#         for j in range(i+1, len(nums)):</span>    <span class="token comment">#             if nums[i] + nums[j] == target:</span>    <span class="token comment">#                 return i, j</span>    <span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h2 id="146-LRU-ç¼“å­˜"><a href="#146-LRU-ç¼“å­˜" class="headerlink" title="146. LRU ç¼“å­˜"></a><a href="https://leetcode.cn/problems/lru-cache/">146. LRU ç¼“å­˜</a></h2><blockquote><p>è¯·ä½ è®¾è®¡å¹¶å®ç°ä¸€ä¸ªæ»¡è¶³  LRU (æœ€è¿‘æœ€å°‘ä½¿ç”¨) ç¼“å­˜ çº¦æŸçš„æ•°æ®ç»“æ„ã€‚<br>å®ç° LRUCache ç±»ï¼š<br>LRUCache(int capacity) ä»¥ æ­£æ•´æ•° ä½œä¸ºå®¹é‡ capacity åˆå§‹åŒ– LRU ç¼“å­˜<br>int get(int key) å¦‚æœå…³é”®å­— key å­˜åœ¨äºç¼“å­˜ä¸­ï¼Œåˆ™è¿”å›å…³é”®å­—çš„å€¼ï¼Œå¦åˆ™è¿”å› -1 ã€‚<br>void put(int key, int value) å¦‚æœå…³é”®å­— key å·²ç»å­˜åœ¨ï¼Œåˆ™å˜æ›´å…¶æ•°æ®å€¼ value ï¼›å¦‚æœä¸å­˜åœ¨ï¼Œåˆ™å‘ç¼“å­˜ä¸­æ’å…¥è¯¥ç»„ key-value ã€‚å¦‚æœæ’å…¥æ“ä½œå¯¼è‡´å…³é”®å­—æ•°é‡è¶…è¿‡ capacity ï¼Œåˆ™åº”è¯¥ é€å‡º æœ€ä¹…æœªä½¿ç”¨çš„å…³é”®å­—ã€‚<br>å‡½æ•° get å’Œ put å¿…é¡»ä»¥ O(1) çš„å¹³å‡æ—¶é—´å¤æ‚åº¦è¿è¡Œã€‚</p></blockquote><p><strong>hashmap + åŒç«¯é˜Ÿåˆ—</strong></p><blockquote><p>hashmap ä¸­æŒ‰ç…§å¯¹åº”çš„keyå­˜å‚¨èŠ‚ç‚¹ä¿¡æ¯ï¼Œåœ¨èŠ‚ä¿å­˜keyå’Œvalue</p></blockquote><pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token keyword">class</span> <span class="token class-name">LinkedNode</span><span class="token punctuation">:</span>        <span class="token keyword">def</span> <span class="token function">__init__</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> key<span class="token operator">=</span><span class="token boolean">None</span><span class="token punctuation">,</span> value<span class="token operator">=</span><span class="token boolean">None</span><span class="token punctuation">,</span> prev<span class="token operator">=</span><span class="token boolean">None</span><span class="token punctuation">,</span> nex<span class="token operator">=</span><span class="token boolean">None</span><span class="token punctuation">)</span><span class="token punctuation">:</span>        self<span class="token punctuation">.</span>key <span class="token operator">=</span> key        self<span class="token punctuation">.</span>value <span class="token operator">=</span> value        self<span class="token punctuation">.</span>prev <span class="token operator">=</span> prev        self<span class="token punctuation">.</span>nex <span class="token operator">=</span> nex<span class="token keyword">class</span> <span class="token class-name">LRUCache</span><span class="token punctuation">:</span>    <span class="token keyword">def</span> <span class="token function">__init__</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> capacity<span class="token punctuation">:</span> <span class="token builtin">int</span><span class="token punctuation">)</span><span class="token punctuation">:</span>        self<span class="token punctuation">.</span>capacity<span class="token operator">=</span> capacity        self<span class="token punctuation">.</span>lru <span class="token operator">=</span> <span class="token builtin">dict</span><span class="token punctuation">(</span><span class="token punctuation">)</span>        <span class="token comment">#  åˆå§‹åŒ–ä¸¤ä¸ªèŠ‚ç‚¹ä½œä¸ºé¦–å°¾èŠ‚ç‚¹ï¼Œå¹¶è¿æ¥èµ·æ¥</span>        self<span class="token punctuation">.</span>head <span class="token operator">=</span> LinkedNode<span class="token punctuation">(</span><span class="token punctuation">)</span>        self<span class="token punctuation">.</span>tail <span class="token operator">=</span> LinkedNode<span class="token punctuation">(</span><span class="token punctuation">)</span>        self<span class="token punctuation">.</span>head<span class="token punctuation">.</span>nex <span class="token operator">=</span> self<span class="token punctuation">.</span>tail        self<span class="token punctuation">.</span>tail<span class="token punctuation">.</span>prev <span class="token operator">=</span> self<span class="token punctuation">.</span>head    <span class="token keyword">def</span> <span class="token function">get</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> key<span class="token punctuation">:</span> <span class="token builtin">int</span><span class="token punctuation">)</span> <span class="token operator">-</span><span class="token operator">></span> <span class="token builtin">int</span><span class="token punctuation">:</span>        <span class="token keyword">if</span> key <span class="token keyword">in</span> self<span class="token punctuation">.</span>lru<span class="token punctuation">:</span>            node <span class="token operator">=</span> self<span class="token punctuation">.</span>lru<span class="token punctuation">.</span>get<span class="token punctuation">(</span>key<span class="token punctuation">)</span>            self<span class="token punctuation">.</span>node_to_tail<span class="token punctuation">(</span>node<span class="token punctuation">)</span>            <span class="token keyword">return</span> node<span class="token punctuation">.</span>value        <span class="token keyword">else</span><span class="token punctuation">:</span>             <span class="token keyword">return</span> <span class="token operator">-</span><span class="token number">1</span>    <span class="token keyword">def</span> <span class="token function">put</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> key<span class="token punctuation">:</span> <span class="token builtin">int</span><span class="token punctuation">,</span> value<span class="token punctuation">:</span> <span class="token builtin">int</span><span class="token punctuation">)</span> <span class="token operator">-</span><span class="token operator">></span> <span class="token boolean">None</span><span class="token punctuation">:</span>        <span class="token keyword">if</span> key <span class="token keyword">in</span> self<span class="token punctuation">.</span>lru<span class="token punctuation">:</span>  <span class="token comment"># to linkednode tail</span>            node <span class="token operator">=</span> self<span class="token punctuation">.</span>lru<span class="token punctuation">.</span>get<span class="token punctuation">(</span>key<span class="token punctuation">)</span>            node<span class="token punctuation">.</span>value <span class="token operator">=</span> value            self<span class="token punctuation">.</span>node_to_tail<span class="token punctuation">(</span>node<span class="token punctuation">)</span>            <span class="token keyword">return</span>        <span class="token keyword">if</span> <span class="token builtin">len</span><span class="token punctuation">(</span>self<span class="token punctuation">.</span>lru<span class="token punctuation">)</span> <span class="token operator">==</span> self<span class="token punctuation">.</span>capacity<span class="token punctuation">:</span>                        <span class="token comment"># remove head</span>            node <span class="token operator">=</span> self<span class="token punctuation">.</span>head<span class="token punctuation">.</span>nex            <span class="token keyword">del</span> self<span class="token punctuation">.</span>lru<span class="token punctuation">[</span>node<span class="token punctuation">.</span>key<span class="token punctuation">]</span>            <span class="token keyword">print</span><span class="token punctuation">(</span>self<span class="token punctuation">.</span>head<span class="token punctuation">.</span>nex<span class="token punctuation">.</span>value<span class="token punctuation">,</span> self<span class="token punctuation">.</span>head<span class="token punctuation">.</span>nex<span class="token punctuation">.</span>value<span class="token punctuation">)</span>            self<span class="token punctuation">.</span>remove_head_node<span class="token punctuation">(</span>node<span class="token punctuation">)</span>        node <span class="token operator">=</span> LinkedNode<span class="token punctuation">(</span>key<span class="token operator">=</span>key<span class="token punctuation">,</span> value<span class="token operator">=</span>value<span class="token punctuation">)</span>        self<span class="token punctuation">.</span>lru<span class="token punctuation">[</span>key<span class="token punctuation">]</span> <span class="token operator">=</span> node        self<span class="token punctuation">.</span>add_tail_node<span class="token punctuation">(</span>node<span class="token punctuation">)</span>    <span class="token keyword">def</span> <span class="token function">remove_head_node</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> node<span class="token punctuation">)</span><span class="token punctuation">:</span>        <span class="token triple-quoted-string string">"""        å»é™¤æŸä¸ªèŠ‚ç‚¹        """</span>        <span class="token comment"># å¼€å§‹ç§»é™¤</span>                node_prev <span class="token operator">=</span> node<span class="token punctuation">.</span>prev        node_nex <span class="token operator">=</span> node<span class="token punctuation">.</span>nex        node_prev<span class="token punctuation">.</span>nex <span class="token operator">=</span> node_nex        node_nex<span class="token punctuation">.</span>prev <span class="token operator">=</span> node_prev    <span class="token keyword">def</span> <span class="token function">add_tail_node</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> node<span class="token punctuation">)</span><span class="token punctuation">:</span>        <span class="token triple-quoted-string string">"""        æ·»åŠ è‡³æœ«å°¾ï¼Œæ­¤æ—¶éœ€è¦ä¿æŒå°¾èŠ‚ç‚¹ä¸å˜        """</span>        self<span class="token punctuation">.</span>tail<span class="token punctuation">.</span>prev<span class="token punctuation">.</span>nex <span class="token operator">=</span> node        node<span class="token punctuation">.</span>prev <span class="token operator">=</span> self<span class="token punctuation">.</span>tail<span class="token punctuation">.</span>prev        node<span class="token punctuation">.</span>nex <span class="token operator">=</span> self<span class="token punctuation">.</span>tail        self<span class="token punctuation">.</span>tail<span class="token punctuation">.</span>prev <span class="token operator">=</span> node    <span class="token keyword">def</span> <span class="token function">node_to_tail</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> node<span class="token punctuation">)</span><span class="token punctuation">:</span>        <span class="token triple-quoted-string string">"""        å°†ä»»æ„èŠ‚ç‚¹ç§»åŠ¨åˆ°å°¾éƒ¨        """</span>        self<span class="token punctuation">.</span>remove_head_node<span class="token punctuation">(</span>node<span class="token punctuation">)</span>        self<span class="token punctuation">.</span>add_tail_node<span class="token punctuation">(</span>node<span class="token punctuation">)</span><span class="token comment"># Your LRUCache object will be instantiated and called as such:</span><span class="token comment"># obj = LRUCache(capacity)</span><span class="token comment"># param_1 = obj.get(key)</span><span class="token comment"># obj.put(key,value)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h2 id="128-æœ€é•¿è¿ç»­åºåˆ—"><a href="#128-æœ€é•¿è¿ç»­åºåˆ—" class="headerlink" title="128. æœ€é•¿è¿ç»­åºåˆ—"></a><a href="https://leetcode.cn/problems/longest-consecutive-sequence/">128. æœ€é•¿è¿ç»­åºåˆ—</a></h2><blockquote><p>ç»™å®šä¸€ä¸ªæœªæ’åºçš„æ•´æ•°æ•°ç»„ nums ï¼Œæ‰¾å‡ºæ•°å­—è¿ç»­çš„æœ€é•¿åºåˆ—ï¼ˆä¸è¦æ±‚åºåˆ—å…ƒç´ åœ¨åŸæ•°ç»„ä¸­è¿ç»­ï¼‰çš„é•¿åº¦ã€‚</p><p>è¯·ä½ è®¾è®¡å¹¶å®ç°æ—¶é—´å¤æ‚åº¦ä¸º O(n) çš„ç®—æ³•è§£å†³æ­¤é—®é¢˜ã€‚</p></blockquote><ul><li>å€ŸåŠ©hashmap</li></ul><pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token keyword">class</span> <span class="token class-name">Solution</span><span class="token punctuation">:</span>    <span class="token triple-quoted-string string">"""    å€ŸåŠ©hashmapæ¥å®ç°    """</span>    <span class="token keyword">def</span> <span class="token function">longestConsecutive</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> nums<span class="token punctuation">:</span> List<span class="token punctuation">[</span><span class="token builtin">int</span><span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token operator">-</span><span class="token operator">></span> <span class="token builtin">int</span><span class="token punctuation">:</span>        <span class="token keyword">if</span> <span class="token keyword">not</span> nums<span class="token punctuation">:</span>            <span class="token keyword">return</span> <span class="token number">0</span>        max_len <span class="token operator">=</span> <span class="token number">0</span>        nums_set <span class="token operator">=</span> <span class="token builtin">set</span><span class="token punctuation">(</span>nums<span class="token punctuation">)</span>                <span class="token keyword">for</span> num <span class="token keyword">in</span> nums_set<span class="token punctuation">:</span>            pre_num <span class="token operator">=</span> num <span class="token operator">-</span><span class="token number">1</span>                        <span class="token keyword">if</span> pre_num <span class="token keyword">not</span> <span class="token keyword">in</span> nums_set<span class="token punctuation">:</span>                temp_len <span class="token operator">=</span> <span class="token number">1</span>                cur <span class="token operator">=</span> num                <span class="token keyword">while</span> cur<span class="token operator">+</span> <span class="token number">1</span> <span class="token keyword">in</span> nums_set<span class="token punctuation">:</span>                    cur <span class="token operator">+=</span><span class="token number">1</span>                    temp_len <span class="token operator">+=</span> <span class="token number">1</span>                max_len <span class="token operator">=</span> <span class="token builtin">max</span><span class="token punctuation">(</span>temp_len<span class="token punctuation">,</span> max_len<span class="token punctuation">)</span>                    <span class="token keyword">return</span> max_len        <span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><ul><li>åŠ¨æ€è§„åˆ’è§£æ³•</li></ul><pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token keyword">class</span> <span class="token class-name">Solution</span><span class="token punctuation">:</span>    <span class="token keyword">def</span> <span class="token function">longestConsecutive</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> nums<span class="token punctuation">:</span> List<span class="token punctuation">[</span><span class="token builtin">int</span><span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token operator">-</span><span class="token operator">></span> <span class="token builtin">int</span><span class="token punctuation">:</span>        res <span class="token operator">=</span> <span class="token number">0</span>        hash_dict <span class="token operator">=</span> <span class="token builtin">dict</span><span class="token punctuation">(</span><span class="token punctuation">)</span>        <span class="token keyword">for</span> num <span class="token keyword">in</span> nums<span class="token punctuation">:</span>            <span class="token keyword">if</span> num <span class="token keyword">not</span> <span class="token keyword">in</span> hash_dict<span class="token punctuation">:</span>                left <span class="token operator">=</span> hash_dict<span class="token punctuation">.</span>get<span class="token punctuation">(</span>num<span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span>                right <span class="token operator">=</span> hash_dict<span class="token punctuation">.</span>get<span class="token punctuation">(</span>num<span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span>                cur_lenght <span class="token operator">=</span> left <span class="token operator">+</span> right <span class="token operator">+</span><span class="token number">1</span>                res <span class="token operator">=</span> <span class="token builtin">max</span><span class="token punctuation">(</span>cur_lenght<span class="token punctuation">,</span> res<span class="token punctuation">)</span>                hash_dict<span class="token punctuation">[</span>num<span class="token punctuation">]</span> <span class="token operator">=</span> cur_lenght                hash_dict<span class="token punctuation">[</span>num<span class="token operator">-</span>left<span class="token punctuation">]</span><span class="token operator">=</span> cur_lenght                hash_dict<span class="token punctuation">[</span>num<span class="token operator">+</span>right<span class="token punctuation">]</span> <span class="token operator">=</span> cur_lenght        <span class="token keyword">return</span> res<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h2 id="73-çŸ©é˜µç½®é›¶"><a href="#73-çŸ©é˜µç½®é›¶" class="headerlink" title="73. çŸ©é˜µç½®é›¶"></a><a href="https://leetcode.cn/problems/set-matrix-zeroes/">73. çŸ©é˜µç½®é›¶</a></h2><blockquote><p>ç»™å®šä¸€ä¸ª <code>*m* x *n*</code> çš„çŸ©é˜µï¼Œå¦‚æœä¸€ä¸ªå…ƒç´ ä¸º <strong>0</strong> ï¼Œåˆ™å°†å…¶æ‰€åœ¨è¡Œå’Œåˆ—çš„æ‰€æœ‰å…ƒç´ éƒ½è®¾ä¸º <strong>0</strong> ã€‚è¯·ä½¿ç”¨ <strong><a href="http://baike.baidu.com/item/%E5%8E%9F%E5%9C%B0%E7%AE%97%E6%B3%95">åŸåœ°</a></strong> ç®—æ³•<strong>ã€‚</strong></p></blockquote><pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token keyword">class</span> <span class="token class-name">Solution</span><span class="token punctuation">:</span>    <span class="token keyword">def</span> <span class="token function">setZeroes</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> matrix<span class="token punctuation">:</span> List<span class="token punctuation">[</span>List<span class="token punctuation">[</span><span class="token builtin">int</span><span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token operator">-</span><span class="token operator">></span> <span class="token boolean">None</span><span class="token punctuation">:</span>        <span class="token triple-quoted-string string">"""        Do not return anything, modify matrix in-place instead.        """</span>        need_zero_raw <span class="token operator">=</span> <span class="token builtin">set</span><span class="token punctuation">(</span><span class="token punctuation">)</span>        need_zero_col <span class="token operator">=</span> <span class="token builtin">set</span><span class="token punctuation">(</span><span class="token punctuation">)</span>        <span class="token keyword">for</span> i <span class="token keyword">in</span> <span class="token builtin">range</span><span class="token punctuation">(</span><span class="token builtin">len</span><span class="token punctuation">(</span>matrix<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">:</span>            <span class="token keyword">for</span> j <span class="token keyword">in</span> <span class="token builtin">range</span><span class="token punctuation">(</span><span class="token builtin">len</span><span class="token punctuation">(</span>matrix<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">:</span>                <span class="token keyword">if</span> matrix<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">[</span>j<span class="token punctuation">]</span> <span class="token operator">==</span> <span class="token number">0</span><span class="token punctuation">:</span>                    need_zero_raw<span class="token punctuation">.</span>add<span class="token punctuation">(</span>i<span class="token punctuation">)</span>                    need_zero_col<span class="token punctuation">.</span>add<span class="token punctuation">(</span>j<span class="token punctuation">)</span>                <span class="token keyword">for</span> row <span class="token keyword">in</span> need_zero_raw<span class="token punctuation">:</span>            <span class="token keyword">for</span> j <span class="token keyword">in</span> <span class="token builtin">range</span><span class="token punctuation">(</span><span class="token builtin">len</span><span class="token punctuation">(</span>matrix<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">:</span>                matrix<span class="token punctuation">[</span>row<span class="token punctuation">]</span><span class="token punctuation">[</span>j<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token number">0</span>        <span class="token keyword">for</span> col <span class="token keyword">in</span> need_zero_col<span class="token punctuation">:</span>            <span class="token keyword">for</span> i <span class="token keyword">in</span> <span class="token builtin">range</span><span class="token punctuation">(</span><span class="token builtin">len</span><span class="token punctuation">(</span>matrix<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">:</span>                matrix<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">[</span>col<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token number">0</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><div class="uk-alert uk-alert-success"><i class="fa fa-check-circle"></i> ä¸€ç§æ”¹è¿›æ–¹æ³•æ˜¯ç”¨çŸ©é˜µå¾—ç¬¬ä¸€è¡Œå’Œç¬¬ä¸€åˆ—æ¥è®°å½•éœ€è¦ç½®ä¸º0å¾—è¡Œåˆ—ï¼Œå¦‚æœæŸè¡Œå¾—ç¬¬ä¸€ä¸ªå…ƒç´ ä¸º0åˆ™æ”¹è¡Œç½®ä¸º0ï¼ŒåŒç†è®¾ç½®åˆ—æ³¨æ„è¿™æ ·ä¼šæ”¹å˜è¡Œåˆ—å¾—å€¼ï¼Œæ‰€ä»¥è¦æå‰åˆ¤æ–­ç¬¬ä¸€è¡Œå’Œç¬¬ä¸€åˆ—æ˜¯å¦ä¸º0å°±å¯ä»¥äº†</div><h2 id="380-O-1-æ—¶é—´æ’å…¥ã€åˆ é™¤å’Œè·å–éšæœºå…ƒç´ "><a href="#380-O-1-æ—¶é—´æ’å…¥ã€åˆ é™¤å’Œè·å–éšæœºå…ƒç´ " class="headerlink" title="380. O(1) æ—¶é—´æ’å…¥ã€åˆ é™¤å’Œè·å–éšæœºå…ƒç´ "></a><a href="https://leetcode.cn/problems/insert-delete-getrandom-o1/">380. O(1) æ—¶é—´æ’å…¥ã€åˆ é™¤å’Œè·å–éšæœºå…ƒç´ </a></h2><blockquote><p> å®ç°RandomizedSet ç±»ï¼š</p><p> RandomizedSet() åˆå§‹åŒ– RandomizedSet å¯¹è±¡<br> bool insert(int val) å½“å…ƒç´  val ä¸å­˜åœ¨æ—¶ï¼Œå‘é›†åˆä¸­æ’å…¥è¯¥é¡¹ï¼Œå¹¶è¿”å› true ï¼›å¦åˆ™ï¼Œè¿”å› false ã€‚<br> bool remove(int val) å½“å…ƒç´  val å­˜åœ¨æ—¶ï¼Œä»é›†åˆä¸­ç§»é™¤è¯¥é¡¹ï¼Œå¹¶è¿”å› true ï¼›å¦åˆ™ï¼Œè¿”å› false ã€‚<br> int getRandom() éšæœºè¿”å›ç°æœ‰é›†åˆä¸­çš„ä¸€é¡¹ï¼ˆæµ‹è¯•ç”¨ä¾‹ä¿è¯è°ƒç”¨æ­¤æ–¹æ³•æ—¶é›†åˆä¸­è‡³å°‘å­˜åœ¨ä¸€ä¸ªå…ƒç´ ï¼‰ã€‚æ¯ä¸ªå…ƒç´ åº”è¯¥æœ‰ ç›¸åŒçš„æ¦‚ç‡ è¢«è¿”å›ã€‚<br> ä½ å¿…é¡»å®ç°ç±»çš„æ‰€æœ‰å‡½æ•°ï¼Œå¹¶æ»¡è¶³æ¯ä¸ªå‡½æ•°çš„ å¹³å‡ æ—¶é—´å¤æ‚åº¦ä¸º O(1) ã€‚</p></blockquote><pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token keyword">class</span> <span class="token class-name">RandomizedSet</span><span class="token punctuation">:</span>    <span class="token comment"># def __init__(self):</span>    <span class="token comment">#     self.data = set()</span>    <span class="token comment"># def insert(self, val: int) -> bool:</span>    <span class="token comment">#     if val not in self.data:</span>    <span class="token comment">#         self.data.add(val)</span>    <span class="token comment">#         return True</span>    <span class="token comment">#     else:</span>    <span class="token comment">#         return False</span>    <span class="token comment"># def remove(self, val: int) -> bool:</span>    <span class="token comment">#     if val in self.data:</span>    <span class="token comment">#         self.data.remove(val)</span>    <span class="token comment">#         return True</span>    <span class="token comment">#     else:</span>    <span class="token comment">#         return False</span>    <span class="token comment"># def getRandom(self) -> int:</span>    <span class="token comment">#     # æ­¤æ–¹æ³•listï¼ˆï¼‰æ—¶é—´å¤æ‚åº¦æ˜¯O(n)</span>    <span class="token comment">#     return random.choice(list(self.data))</span>    <span class="token keyword">def</span> <span class="token function">__init__</span><span class="token punctuation">(</span>self<span class="token punctuation">)</span><span class="token punctuation">:</span>        self<span class="token punctuation">.</span>data <span class="token operator">=</span> <span class="token builtin">dict</span><span class="token punctuation">(</span><span class="token punctuation">)</span>        self<span class="token punctuation">.</span>end_index <span class="token operator">=</span> <span class="token operator">-</span><span class="token number">1</span>        self<span class="token punctuation">.</span>nums <span class="token operator">=</span> <span class="token builtin">list</span><span class="token punctuation">(</span><span class="token punctuation">)</span>    <span class="token keyword">def</span> <span class="token function">insert</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> val<span class="token punctuation">:</span> <span class="token builtin">int</span><span class="token punctuation">)</span> <span class="token operator">-</span><span class="token operator">></span> <span class="token builtin">bool</span><span class="token punctuation">:</span>        <span class="token keyword">if</span> val <span class="token keyword">not</span> <span class="token keyword">in</span> self<span class="token punctuation">.</span>data<span class="token punctuation">:</span>            self<span class="token punctuation">.</span>end_index <span class="token operator">+=</span> <span class="token number">1</span>            self<span class="token punctuation">.</span>data<span class="token punctuation">[</span>val<span class="token punctuation">]</span><span class="token operator">=</span> self<span class="token punctuation">.</span>end_index            self<span class="token punctuation">.</span>nums<span class="token punctuation">.</span>append<span class="token punctuation">(</span>val<span class="token punctuation">)</span>            <span class="token keyword">return</span> <span class="token boolean">True</span>        <span class="token keyword">else</span><span class="token punctuation">:</span>            <span class="token keyword">return</span> <span class="token boolean">False</span>    <span class="token keyword">def</span> <span class="token function">remove</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> val<span class="token punctuation">:</span> <span class="token builtin">int</span><span class="token punctuation">)</span> <span class="token operator">-</span><span class="token operator">></span> <span class="token builtin">bool</span><span class="token punctuation">:</span>        <span class="token keyword">if</span> val <span class="token keyword">in</span> self<span class="token punctuation">.</span>data<span class="token punctuation">:</span>            index <span class="token operator">=</span> self<span class="token punctuation">.</span>data<span class="token punctuation">.</span>get<span class="token punctuation">(</span>val<span class="token punctuation">)</span>            end_num <span class="token operator">=</span> self<span class="token punctuation">.</span>nums<span class="token punctuation">[</span>self<span class="token punctuation">.</span>end_index<span class="token punctuation">]</span>            <span class="token comment"># ä¸èƒ½æ‰§è¡Œåˆ é™¤ï¼Œ éœ€è¦æ‰§è¡Œäº¤æ¢ï¼Œå°†æœ€åä¸€ä¸ªå…ƒç´ æ¢åˆ°index ä½ç½®ï¼Œç„¶ååˆ é™¤æœ€åä¸€ä¸ªå…ƒç´ </span>            <span class="token comment"># å°†end_index    -1</span>            self<span class="token punctuation">.</span>nums<span class="token punctuation">[</span>index<span class="token punctuation">]</span> <span class="token operator">=</span> end_num            self<span class="token punctuation">.</span>data<span class="token punctuation">[</span>end_num<span class="token punctuation">]</span> <span class="token operator">=</span> index            self<span class="token punctuation">.</span>nums<span class="token punctuation">.</span>pop<span class="token punctuation">(</span><span class="token punctuation">)</span>            <span class="token keyword">del</span> self<span class="token punctuation">.</span>data<span class="token punctuation">[</span>val<span class="token punctuation">]</span>            self<span class="token punctuation">.</span>end_index <span class="token operator">-=</span> <span class="token number">1</span>            <span class="token keyword">return</span> <span class="token boolean">True</span>        <span class="token keyword">else</span><span class="token punctuation">:</span>            <span class="token keyword">return</span> <span class="token boolean">False</span>    <span class="token keyword">def</span> <span class="token function">getRandom</span><span class="token punctuation">(</span>self<span class="token punctuation">)</span> <span class="token operator">-</span><span class="token operator">></span> <span class="token builtin">int</span><span class="token punctuation">:</span>        <span class="token keyword">return</span> random<span class="token punctuation">.</span>choice<span class="token punctuation">(</span>self<span class="token punctuation">.</span>nums<span class="token punctuation">)</span><span class="token comment"># Your RandomizedSet object will be instantiated and called as such:</span><span class="token comment"># obj = RandomizedSet()</span><span class="token comment"># param_1 = obj.insert(val)</span><span class="token comment"># param_2 = obj.remove(val)</span><span class="token comment"># param_3 = obj.getRandom()</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h2 id="49-å­—æ¯å¼‚ä½è¯åˆ†ç»„"><a href="#49-å­—æ¯å¼‚ä½è¯åˆ†ç»„" class="headerlink" title="49. å­—æ¯å¼‚ä½è¯åˆ†ç»„"></a><a href="https://leetcode.cn/problems/group-anagrams/">49. å­—æ¯å¼‚ä½è¯åˆ†ç»„</a></h2><blockquote><p>ç»™ä½ ä¸€ä¸ªå­—ç¬¦ä¸²æ•°ç»„ï¼Œè¯·ä½ å°† å­—æ¯å¼‚ä½è¯ ç»„åˆåœ¨ä¸€èµ·ã€‚å¯ä»¥æŒ‰ä»»æ„é¡ºåºè¿”å›ç»“æœåˆ—è¡¨ã€‚</p><p>å­—æ¯å¼‚ä½è¯ æ˜¯ç”±é‡æ–°æ’åˆ—æºå•è¯çš„å­—æ¯å¾—åˆ°çš„ä¸€ä¸ªæ–°å•è¯ï¼Œæ‰€æœ‰æºå•è¯ä¸­çš„å­—æ¯é€šå¸¸æ°å¥½åªç”¨ä¸€æ¬¡ã€‚</p><p>æ¥æºï¼šåŠ›æ‰£ï¼ˆLeetCodeï¼‰<br>é“¾æ¥ï¼š<a href="https://leetcode.cn/problems/group-anagrams">https://leetcode.cn/problems/group-anagrams</a><br>è‘—ä½œæƒå½’é¢†æ‰£ç½‘ç»œæ‰€æœ‰ã€‚å•†ä¸šè½¬è½½è¯·è”ç³»å®˜æ–¹æˆæƒï¼Œéå•†ä¸šè½¬è½½è¯·æ³¨æ˜å‡ºå¤„ã€‚</p></blockquote><pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token keyword">class</span> <span class="token class-name">Solution</span><span class="token punctuation">:</span>    <span class="token keyword">def</span> <span class="token function">groupAnagrams</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> strs<span class="token punctuation">:</span> List<span class="token punctuation">[</span><span class="token builtin">str</span><span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token operator">-</span><span class="token operator">></span> List<span class="token punctuation">[</span>List<span class="token punctuation">[</span><span class="token builtin">str</span><span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">:</span>        <span class="token triple-quoted-string string">"""        ä½¿ç”¨hashmap        """</span>        hashmap <span class="token operator">=</span> collections<span class="token punctuation">.</span>defaultdict<span class="token punctuation">(</span><span class="token builtin">list</span><span class="token punctuation">)</span>        <span class="token keyword">for</span> str_ <span class="token keyword">in</span> strs<span class="token punctuation">:</span>            key<span class="token operator">=</span> <span class="token builtin">sorted</span><span class="token punctuation">(</span>str_<span class="token punctuation">)</span>            key <span class="token operator">=</span> <span class="token string">""</span><span class="token punctuation">.</span>join<span class="token punctuation">(</span>key<span class="token punctuation">)</span>            hashmap<span class="token punctuation">[</span>key<span class="token punctuation">]</span><span class="token punctuation">.</span>append<span class="token punctuation">(</span>str_<span class="token punctuation">)</span>        <span class="token keyword">return</span> <span class="token punctuation">[</span>val <span class="token keyword">for</span> _<span class="token punctuation">,</span>val <span class="token keyword">in</span> hashmap<span class="token punctuation">.</span>items<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">]</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h2 id="299-çŒœæ•°å­—æ¸¸æˆ"><a href="#299-çŒœæ•°å­—æ¸¸æˆ" class="headerlink" title="299. çŒœæ•°å­—æ¸¸æˆ"></a><a href="https://leetcode.cn/problems/bulls-and-cows/">299. çŒœæ•°å­—æ¸¸æˆ</a></h2><blockquote><p>ä½ åœ¨å’Œæœ‹å‹ä¸€èµ·ç© çŒœæ•°å­—ï¼ˆBulls and Cowsï¼‰æ¸¸æˆï¼Œè¯¥æ¸¸æˆè§„åˆ™å¦‚ä¸‹ï¼š</p><p>å†™å‡ºä¸€ä¸ªç§˜å¯†æ•°å­—ï¼Œå¹¶è¯·æœ‹å‹çŒœè¿™ä¸ªæ•°å­—æ˜¯å¤šå°‘ã€‚æœ‹å‹æ¯çŒœæµ‹ä¸€æ¬¡ï¼Œä½ å°±ä¼šç»™ä»–ä¸€ä¸ªåŒ…å«ä¸‹è¿°ä¿¡æ¯çš„æç¤ºï¼š</p><p>çŒœæµ‹æ•°å­—ä¸­æœ‰å¤šå°‘ä½å±äºæ•°å­—å’Œç¡®åˆ‡ä½ç½®éƒ½çŒœå¯¹äº†ï¼ˆç§°ä¸º â€œBullsâ€ï¼Œå…¬ç‰›ï¼‰ï¼Œ<br>æœ‰å¤šå°‘ä½å±äºæ•°å­—çŒœå¯¹äº†ä½†æ˜¯ä½ç½®ä¸å¯¹ï¼ˆç§°ä¸º â€œCowsâ€ï¼Œå¥¶ç‰›ï¼‰ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œè¿™æ¬¡çŒœæµ‹ä¸­æœ‰å¤šå°‘ä½éå…¬ç‰›æ•°å­—å¯ä»¥é€šè¿‡é‡æ–°æ’åˆ—è½¬æ¢æˆå…¬ç‰›æ•°å­—ã€‚<br>ç»™ä½ ä¸€ä¸ªç§˜å¯†æ•°å­— secret å’Œæœ‹å‹çŒœæµ‹çš„æ•°å­— guess ï¼Œè¯·ä½ è¿”å›å¯¹æœ‹å‹è¿™æ¬¡çŒœæµ‹çš„æç¤ºã€‚</p><p>æç¤ºçš„æ ¼å¼ä¸º â€œxAyBâ€ ï¼Œx æ˜¯å…¬ç‰›ä¸ªæ•°ï¼Œ y æ˜¯å¥¶ç‰›ä¸ªæ•°ï¼ŒA è¡¨ç¤ºå…¬ç‰›ï¼ŒB è¡¨ç¤ºå¥¶ç‰›ã€‚</p><p>è¯·æ³¨æ„ç§˜å¯†æ•°å­—å’Œæœ‹å‹çŒœæµ‹çš„æ•°å­—éƒ½å¯èƒ½å«æœ‰é‡å¤æ•°å­—ã€‚</p><p>æ¥æºï¼šåŠ›æ‰£ï¼ˆLeetCodeï¼‰<br>é“¾æ¥ï¼š<a href="https://leetcode.cn/problems/bulls-and-cows">https://leetcode.cn/problems/bulls-and-cows</a><br>è‘—ä½œæƒå½’é¢†æ‰£ç½‘ç»œæ‰€æœ‰ã€‚å•†ä¸šè½¬è½½è¯·è”ç³»å®˜æ–¹æˆæƒï¼Œéå•†ä¸šè½¬è½½è¯·æ³¨æ˜å‡ºå¤„ã€‚</p></blockquote><pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token keyword">class</span> <span class="token class-name">Solution</span><span class="token punctuation">:</span>    <span class="token keyword">def</span> <span class="token function">getHint</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> secret<span class="token punctuation">:</span> <span class="token builtin">str</span><span class="token punctuation">,</span> guess<span class="token punctuation">:</span> <span class="token builtin">str</span><span class="token punctuation">)</span> <span class="token operator">-</span><span class="token operator">></span> <span class="token builtin">str</span><span class="token punctuation">:</span>        a <span class="token operator">=</span> b <span class="token operator">=</span> <span class="token number">0</span>        secret_dict <span class="token operator">=</span> collections<span class="token punctuation">.</span>defaultdict<span class="token punctuation">(</span><span class="token builtin">int</span><span class="token punctuation">)</span>        guess_dict <span class="token operator">=</span> collections<span class="token punctuation">.</span>defaultdict<span class="token punctuation">(</span><span class="token builtin">int</span><span class="token punctuation">)</span>        <span class="token keyword">for</span> s<span class="token punctuation">,</span> g <span class="token keyword">in</span> <span class="token builtin">zip</span><span class="token punctuation">(</span>secret<span class="token punctuation">,</span> guess<span class="token punctuation">)</span><span class="token punctuation">:</span>            <span class="token comment"># å…¬ç‰›</span>            <span class="token keyword">if</span> s <span class="token operator">==</span> g<span class="token punctuation">:</span>                a <span class="token operator">+=</span> <span class="token number">1</span>            <span class="token keyword">else</span><span class="token punctuation">:</span>                secret_dict<span class="token punctuation">[</span>s<span class="token punctuation">]</span> <span class="token operator">+=</span> <span class="token number">1</span>                guess_dict<span class="token punctuation">[</span>g<span class="token punctuation">]</span> <span class="token operator">+=</span> <span class="token number">1</span>        <span class="token comment"># ç»Ÿè®¡æ¯ç‰›å¾—ä¸ªæ•°</span>        <span class="token keyword">for</span> g <span class="token keyword">in</span> guess_dict<span class="token punctuation">:</span>            temp_num <span class="token operator">=</span> <span class="token builtin">min</span><span class="token punctuation">(</span>guess_dict<span class="token punctuation">.</span>get<span class="token punctuation">(</span>g<span class="token punctuation">)</span> <span class="token punctuation">,</span> secret_dict<span class="token punctuation">.</span>get<span class="token punctuation">(</span>g<span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">)</span>            b <span class="token operator">+=</span> temp_num                    <span class="token keyword">return</span> <span class="token string">"&#123;a&#125;A&#123;b&#125;B"</span><span class="token punctuation">.</span><span class="token builtin">format</span><span class="token punctuation">(</span>a<span class="token operator">=</span>a<span class="token punctuation">,</span> b<span class="token operator">=</span>b<span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h1 id="æ’åº"><a href="#æ’åº" class="headerlink" title="æ’åº"></a>æ’åº</h1><h2 id="å†’æ³¡æ’åº"><a href="#å†’æ³¡æ’åº" class="headerlink" title="å†’æ³¡æ’åº"></a>å†’æ³¡æ’åº</h2><blockquote><p>ä»¥ç¬¬ä¸€ä¸ªæ•°ä¸ºèµ·ç‚¹ï¼Œä¸åé¢å¾—æ•°ä¸€æ¬¡æ¯”è¾ƒï¼Œå¦‚æœæ¯”åŸºæ•°å¤§å°±äº¤æ¢ï¼Œè¿™æ ·æ¯ä¸€è¶Ÿç»“æŸéƒ½ä¼šå°†æœªæ’åºä¸­æœ€å¤§å¾—æ•°æ”¾åœ¨å·²æ’åºå¾—å¼€å¤´</p></blockquote><pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token keyword">def</span> <span class="token function">bubble</span><span class="token punctuation">(</span>nums<span class="token punctuation">)</span><span class="token punctuation">:</span>    n <span class="token operator">=</span> <span class="token builtin">len</span><span class="token punctuation">(</span>nums<span class="token punctuation">)</span><span class="token keyword">for</span> i <span class="token keyword">in</span> <span class="token builtin">range</span><span class="token punctuation">(</span>n<span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">:</span>        <span class="token keyword">for</span> j <span class="token keyword">in</span> <span class="token builtin">range</span><span class="token punctuation">(</span>n<span class="token operator">-</span><span class="token number">1</span><span class="token operator">-</span>i<span class="token punctuation">)</span><span class="token punctuation">:</span>            <span class="token keyword">if</span> num<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">&lt;</span> nums<span class="token punctuation">[</span>j<span class="token punctuation">]</span><span class="token punctuation">:</span>                nums<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">,</span> nums<span class="token punctuation">[</span>j<span class="token punctuation">]</span> <span class="token operator">=</span> nums<span class="token punctuation">[</span>j<span class="token punctuation">]</span><span class="token punctuation">,</span> nums<span class="token punctuation">[</span>i<span class="token punctuation">]</span>    <span class="token keyword">return</span> nums<span class="token keyword">def</span> <span class="token function">bubble_sort2</span><span class="token punctuation">(</span>nums<span class="token punctuation">)</span><span class="token punctuation">:</span>    n <span class="token operator">=</span> <span class="token builtin">len</span><span class="token punctuation">(</span>nums<span class="token punctuation">)</span>    <span class="token keyword">for</span> i <span class="token keyword">in</span> <span class="token builtin">range</span><span class="token punctuation">(</span>n<span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">:</span>        exchange <span class="token operator">=</span> <span class="token boolean">False</span>        <span class="token keyword">for</span> i <span class="token keyword">in</span> <span class="token builtin">range</span><span class="token punctuation">(</span>n<span class="token operator">-</span><span class="token number">1</span><span class="token operator">-</span>i<span class="token punctuation">)</span><span class="token punctuation">:</span>            <span class="token keyword">if</span> nums<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">&lt;</span> nums<span class="token punctuation">[</span>j<span class="token punctuation">]</span><span class="token punctuation">:</span>                nums<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">,</span> nums<span class="token punctuation">[</span>j<span class="token punctuation">]</span> <span class="token operator">=</span> nums<span class="token punctuation">[</span>j<span class="token punctuation">]</span><span class="token punctuation">,</span> nums<span class="token punctuation">[</span>i<span class="token punctuation">]</span>                exchange <span class="token operator">=</span> <span class="token boolean">True</span>        <span class="token keyword">if</span> <span class="token keyword">not</span> exchange<span class="token punctuation">:</span>            <span class="token keyword">break</span>    <span class="token keyword">return</span> nums                <span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h2 id="é€‰æ‹©æ’åº"><a href="#é€‰æ‹©æ’åº" class="headerlink" title="é€‰æ‹©æ’åº"></a>é€‰æ‹©æ’åº</h2><blockquote><p>è®¾å®šç¬¬ä¸€ä¸ªå…ƒç´ å¾—åæ ‡ä¸ºåŸºå‡†ä¸‹æ ‡ï¼Œç„¶åç”¨è¿™ä¸ªå…ƒç´ ä¸æ— åºæ•°ç»„ä¸­å¾—å…ƒç´ åšæ¯”è¾ƒï¼Œæ‰¾å‡ºæ­¤æ—¶å¾—æœ€å°ä¸‹æ ‡</p><p>æ¯ä¸€è½®å¾ªç¯ï¼Œéƒ½ä¼šå°†æ— åºä¸­å¾—æœ€å°å…ƒç´ äº¤æ¢è‡³æœ‰åºæ•°ç»„å¾—æœ«å°¾</p></blockquote><pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token keyword">def</span> <span class="token function">select_sort</span><span class="token punctuation">(</span>nums<span class="token punctuation">)</span><span class="token punctuation">:</span>    n <span class="token operator">=</span> <span class="token builtin">len</span><span class="token punctuation">(</span>nums<span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span>    <span class="token keyword">for</span> i <span class="token keyword">in</span> <span class="token builtin">range</span><span class="token punctuation">(</span>n<span class="token punctuation">)</span><span class="token punctuation">:</span>        basic <span class="token operator">=</span> nums<span class="token punctuation">[</span>i<span class="token punctuation">]</span>        <span class="token keyword">for</span> j <span class="token keyword">in</span> <span class="token builtin">range</span><span class="token punctuation">(</span>i<span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">,</span> n<span class="token punctuation">)</span><span class="token punctuation">:</span>                <span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h1 id="äºŒåˆ†æ³•"><a href="#äºŒåˆ†æ³•" class="headerlink" title="äºŒåˆ†æ³•"></a>äºŒåˆ†æ³•</h1><h2 id="34-åœ¨æ’åºæ•°ç»„ä¸­æŸ¥æ‰¾å…ƒç´ çš„ç¬¬ä¸€ä¸ªå’Œæœ€åä¸€ä¸ªä½ç½®"><a href="#34-åœ¨æ’åºæ•°ç»„ä¸­æŸ¥æ‰¾å…ƒç´ çš„ç¬¬ä¸€ä¸ªå’Œæœ€åä¸€ä¸ªä½ç½®" class="headerlink" title="34. åœ¨æ’åºæ•°ç»„ä¸­æŸ¥æ‰¾å…ƒç´ çš„ç¬¬ä¸€ä¸ªå’Œæœ€åä¸€ä¸ªä½ç½®"></a><a href="https://leetcode.cn/problems/find-first-and-last-position-of-element-in-sorted-array/">34. åœ¨æ’åºæ•°ç»„ä¸­æŸ¥æ‰¾å…ƒç´ çš„ç¬¬ä¸€ä¸ªå’Œæœ€åä¸€ä¸ªä½ç½®</a></h2><blockquote><p>ç»™ä½ ä¸€ä¸ªæŒ‰ç…§éé€’å‡é¡ºåºæ’åˆ—çš„æ•´æ•°æ•°ç»„ numsï¼Œå’Œä¸€ä¸ªç›®æ ‡å€¼ targetã€‚è¯·ä½ æ‰¾å‡ºç»™å®šç›®æ ‡å€¼åœ¨æ•°ç»„ä¸­çš„å¼€å§‹ä½ç½®å’Œç»“æŸä½ç½®ã€‚</p><p>å¦‚æœæ•°ç»„ä¸­ä¸å­˜åœ¨ç›®æ ‡å€¼ targetï¼Œè¿”å› [-1, -1]ã€‚</p><p>ä½ å¿…é¡»è®¾è®¡å¹¶å®ç°æ—¶é—´å¤æ‚åº¦ä¸º O(log n) çš„ç®—æ³•è§£å†³æ­¤é—®é¢˜ã€‚</p><p>æ¥æºï¼šåŠ›æ‰£ï¼ˆLeetCodeï¼‰<br>é“¾æ¥ï¼š<a href="https://leetcode.cn/problems/find-first-and-last-position-of-element-in-sorted-array">https://leetcode.cn/problems/find-first-and-last-position-of-element-in-sorted-array</a><br>è‘—ä½œæƒå½’é¢†æ‰£ç½‘ç»œæ‰€æœ‰ã€‚å•†ä¸šè½¬è½½è¯·è”ç³»å®˜æ–¹æˆæƒï¼Œéå•†ä¸šè½¬è½½è¯·æ³¨æ˜å‡ºå¤„ã€‚</p></blockquote><ul><li>æ–¹æ³•ä¸€ï¼š äºŒåˆ†+åŒæŒ‡é’ˆ</li></ul><pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token keyword">class</span> <span class="token class-name">Solution</span><span class="token punctuation">:</span>    <span class="token triple-quoted-string string">"""    å…ˆç”¨äºŒåˆ†æŸ¥æ‰¾æ‰¾åˆ°ç¬¬ä¸€ä¸ªå‡ºç°å¾—ä½ç½®ï¼Œç„¶åæ‰¾å‡ºå·¦å³è¾¹ç•Œ    """</span>    <span class="token keyword">def</span> <span class="token function">searchRange</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> nums<span class="token punctuation">:</span> List<span class="token punctuation">[</span><span class="token builtin">int</span><span class="token punctuation">]</span><span class="token punctuation">,</span> target<span class="token punctuation">:</span> <span class="token builtin">int</span><span class="token punctuation">)</span> <span class="token operator">-</span><span class="token operator">></span> List<span class="token punctuation">[</span><span class="token builtin">int</span><span class="token punctuation">]</span><span class="token punctuation">:</span>        left<span class="token punctuation">,</span> right <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token builtin">len</span><span class="token punctuation">(</span>nums<span class="token punctuation">)</span> <span class="token operator">-</span><span class="token number">1</span>  <span class="token comment"># left ä»£è¡¨æœ€å·¦è¾¹ï¼Œrightæœ€å³è¾¹</span>        <span class="token keyword">while</span> left <span class="token operator">&lt;=</span> right<span class="token punctuation">:</span>            mid <span class="token operator">=</span> <span class="token punctuation">(</span>left<span class="token operator">+</span>right<span class="token punctuation">)</span><span class="token operator">//</span><span class="token number">2</span>            <span class="token keyword">if</span> nums<span class="token punctuation">[</span>mid<span class="token punctuation">]</span><span class="token operator">==</span> target<span class="token punctuation">:</span>                left <span class="token operator">=</span> right <span class="token operator">=</span> mid                <span class="token keyword">while</span> left<span class="token operator">>=</span><span class="token number">0</span> <span class="token keyword">and</span> nums<span class="token punctuation">[</span>left<span class="token punctuation">]</span> <span class="token operator">==</span> target<span class="token punctuation">:</span>                    left <span class="token operator">-=</span><span class="token number">1</span>                <span class="token keyword">while</span> right <span class="token operator">&lt;=</span> <span class="token builtin">len</span><span class="token punctuation">(</span>nums<span class="token punctuation">)</span><span class="token operator">-</span><span class="token number">1</span> <span class="token keyword">and</span> nums<span class="token punctuation">[</span>right<span class="token punctuation">]</span> <span class="token operator">==</span> target<span class="token punctuation">:</span>                    right <span class="token operator">+=</span> <span class="token number">1</span>                 <span class="token keyword">return</span> <span class="token punctuation">[</span>left<span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">,</span> right<span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">]</span>            <span class="token keyword">elif</span> nums<span class="token punctuation">[</span>mid<span class="token punctuation">]</span> <span class="token operator">></span> target<span class="token punctuation">:</span>                right <span class="token operator">=</span> mid <span class="token operator">-</span><span class="token number">1</span>            <span class="token keyword">else</span><span class="token punctuation">:</span>                left <span class="token operator">=</span> mid <span class="token operator">+</span><span class="token number">1</span>                    <span class="token keyword">return</span> <span class="token punctuation">[</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">]</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><ul><li>æ–¹æ³•äºŒï¼š äºŒåˆ†+åˆ†åˆ«å¯»æ‰¾å·¦å³è¾¹ç•Œ</li></ul><pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token keyword">class</span> <span class="token class-name">Solution</span><span class="token punctuation">:</span>    <span class="token keyword">def</span> <span class="token function">searchRange</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> nums<span class="token punctuation">:</span> List<span class="token punctuation">[</span><span class="token builtin">int</span><span class="token punctuation">]</span><span class="token punctuation">,</span> target<span class="token punctuation">:</span> <span class="token builtin">int</span><span class="token punctuation">)</span> <span class="token operator">-</span><span class="token operator">></span> List<span class="token punctuation">[</span><span class="token builtin">int</span><span class="token punctuation">]</span><span class="token punctuation">:</span>        <span class="token keyword">def</span> <span class="token function">searchleft</span><span class="token punctuation">(</span>nums<span class="token punctuation">:</span> List<span class="token punctuation">[</span><span class="token builtin">int</span><span class="token punctuation">]</span><span class="token punctuation">,</span> target<span class="token punctuation">:</span><span class="token builtin">int</span><span class="token punctuation">)</span><span class="token punctuation">:</span>                        left<span class="token punctuation">,</span> right <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token builtin">len</span><span class="token punctuation">(</span>nums<span class="token punctuation">)</span> <span class="token operator">-</span><span class="token number">1</span>            <span class="token keyword">while</span> left <span class="token operator">&lt;=</span> right<span class="token punctuation">:</span>                mid <span class="token operator">=</span> <span class="token punctuation">(</span>left <span class="token operator">+</span> right<span class="token punctuation">)</span><span class="token operator">//</span><span class="token number">2</span>                <span class="token keyword">if</span> nums<span class="token punctuation">[</span>mid<span class="token punctuation">]</span> <span class="token operator">==</span> target<span class="token punctuation">:</span>                    right <span class="token operator">-=</span> <span class="token number">1</span>                <span class="token keyword">elif</span> nums<span class="token punctuation">[</span>mid<span class="token punctuation">]</span> <span class="token operator">></span> target<span class="token punctuation">:</span>                    right <span class="token operator">=</span> mid <span class="token operator">-</span><span class="token number">1</span>                <span class="token keyword">else</span><span class="token punctuation">:</span>                    left <span class="token operator">=</span> mid <span class="token operator">+</span> <span class="token number">1</span>            <span class="token keyword">return</span> left <span class="token keyword">if</span> nums<span class="token punctuation">[</span>left<span class="token punctuation">]</span> <span class="token operator">==</span> target <span class="token keyword">else</span> <span class="token operator">-</span><span class="token number">1</span>        <span class="token keyword">def</span> <span class="token function">searchright</span><span class="token punctuation">(</span>nums<span class="token punctuation">:</span>List<span class="token punctuation">[</span><span class="token builtin">int</span><span class="token punctuation">]</span><span class="token punctuation">,</span> target<span class="token punctuation">:</span> <span class="token builtin">int</span><span class="token punctuation">)</span><span class="token punctuation">:</span>            left<span class="token punctuation">,</span> right <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token builtin">len</span><span class="token punctuation">(</span>nums<span class="token punctuation">)</span> <span class="token operator">-</span><span class="token number">1</span>            <span class="token keyword">while</span> left <span class="token operator">&lt;=</span> right<span class="token punctuation">:</span>                mid <span class="token operator">=</span> <span class="token punctuation">(</span>left <span class="token operator">+</span> right<span class="token punctuation">)</span><span class="token operator">//</span><span class="token number">2</span>                <span class="token keyword">if</span> nums<span class="token punctuation">[</span>mid<span class="token punctuation">]</span> <span class="token operator">==</span> target<span class="token punctuation">:</span>                    left <span class="token operator">+=</span> <span class="token number">1</span>                <span class="token keyword">elif</span> nums<span class="token punctuation">[</span>mid<span class="token punctuation">]</span> <span class="token operator">></span> target<span class="token punctuation">:</span>                    right <span class="token operator">=</span> mid <span class="token operator">-</span><span class="token number">1</span>                <span class="token keyword">else</span><span class="token punctuation">:</span>                    left <span class="token operator">=</span> mid <span class="token operator">+</span> <span class="token number">1</span>            <span class="token keyword">return</span> right <span class="token keyword">if</span> nums<span class="token punctuation">[</span>right<span class="token punctuation">]</span><span class="token operator">==</span> target <span class="token keyword">else</span> <span class="token operator">-</span><span class="token number">1</span>        <span class="token keyword">if</span> <span class="token keyword">not</span> nums <span class="token keyword">or</span> nums<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token operator">></span> target <span class="token keyword">or</span> nums<span class="token punctuation">[</span><span class="token builtin">len</span><span class="token punctuation">(</span>nums<span class="token punctuation">)</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">&lt;</span>target<span class="token punctuation">:</span>            <span class="token keyword">return</span> <span class="token punctuation">[</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">]</span>        left<span class="token punctuation">,</span> right <span class="token operator">=</span> searchleft<span class="token punctuation">(</span>nums<span class="token punctuation">,</span> target<span class="token punctuation">)</span><span class="token punctuation">,</span> searchright<span class="token punctuation">(</span>nums<span class="token punctuation">,</span> target<span class="token punctuation">)</span>        <span class="token keyword">return</span> <span class="token punctuation">[</span>left<span class="token punctuation">,</span> right<span class="token punctuation">]</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h2 id="33-æœç´¢æ—‹è½¬æ’åºæ•°ç»„"><a href="#33-æœç´¢æ—‹è½¬æ’åºæ•°ç»„" class="headerlink" title="33. æœç´¢æ—‹è½¬æ’åºæ•°ç»„"></a><a href="https://leetcode.cn/problems/search-in-rotated-sorted-array/">33. æœç´¢æ—‹è½¬æ’åºæ•°ç»„</a></h2><blockquote><p>æ•´æ•°æ•°ç»„ nums æŒ‰å‡åºæ’åˆ—ï¼Œæ•°ç»„ä¸­çš„å€¼ äº’ä¸ç›¸åŒ ã€‚</p><p>åœ¨ä¼ é€’ç»™å‡½æ•°ä¹‹å‰ï¼Œnums åœ¨é¢„å…ˆæœªçŸ¥çš„æŸä¸ªä¸‹æ ‡ kï¼ˆ0 &lt;&#x3D; k &lt; nums.lengthï¼‰ä¸Šè¿›è¡Œäº† æ—‹è½¬ï¼Œä½¿æ•°ç»„å˜ä¸º [nums[k], nums[k+1], â€¦, nums[n-1], nums[0], nums[1], â€¦, nums[k-1]]ï¼ˆä¸‹æ ‡ ä» 0 å¼€å§‹ è®¡æ•°ï¼‰ã€‚ä¾‹å¦‚ï¼Œ [0,1,2,4,5,6,7] åœ¨ä¸‹æ ‡ 3 å¤„ç»æ—‹è½¬åå¯èƒ½å˜ä¸º [4,5,6,7,0,1,2] ã€‚</p><p>ç»™ä½  æ—‹è½¬å çš„æ•°ç»„ nums å’Œä¸€ä¸ªæ•´æ•° target ï¼Œå¦‚æœ nums ä¸­å­˜åœ¨è¿™ä¸ªç›®æ ‡å€¼ target ï¼Œåˆ™è¿”å›å®ƒçš„ä¸‹æ ‡ï¼Œå¦åˆ™è¿”å› -1 ã€‚</p><p>ä½ å¿…é¡»è®¾è®¡ä¸€ä¸ªæ—¶é—´å¤æ‚åº¦ä¸º O(log n) çš„ç®—æ³•è§£å†³æ­¤é—®é¢˜ã€‚</p><p>æ¥æºï¼šåŠ›æ‰£ï¼ˆLeetCodeï¼‰<br>é“¾æ¥ï¼š<a href="https://leetcode.cn/problems/search-in-rotated-sorted-array">https://leetcode.cn/problems/search-in-rotated-sorted-array</a><br>è‘—ä½œæƒå½’é¢†æ‰£ç½‘ç»œæ‰€æœ‰ã€‚å•†ä¸šè½¬è½½è¯·è”ç³»å®˜æ–¹æˆæƒï¼Œéå•†ä¸šè½¬è½½è¯·æ³¨æ˜å‡ºå¤„ã€‚</p></blockquote><pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token keyword">class</span> <span class="token class-name">Solution</span><span class="token punctuation">:</span>    <span class="token keyword">def</span> <span class="token function">search</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> nums<span class="token punctuation">:</span> List<span class="token punctuation">[</span><span class="token builtin">int</span><span class="token punctuation">]</span><span class="token punctuation">,</span> target<span class="token punctuation">:</span> <span class="token builtin">int</span><span class="token punctuation">)</span> <span class="token operator">-</span><span class="token operator">></span> <span class="token builtin">int</span><span class="token punctuation">:</span>        left<span class="token punctuation">,</span> right <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token builtin">len</span><span class="token punctuation">(</span>nums<span class="token punctuation">)</span> <span class="token operator">-</span><span class="token number">1</span>                <span class="token keyword">while</span> left <span class="token operator">&lt;=</span>right<span class="token punctuation">:</span>            mid <span class="token operator">=</span> <span class="token punctuation">(</span>left <span class="token operator">+</span> right<span class="token punctuation">)</span><span class="token operator">//</span><span class="token number">2</span>            <span class="token comment">#æœ‰åºéƒ¨åˆ†</span>            <span class="token keyword">if</span> nums<span class="token punctuation">[</span>mid<span class="token punctuation">]</span> <span class="token operator">==</span> target<span class="token punctuation">:</span>                <span class="token keyword">return</span> mid            <span class="token keyword">if</span> nums<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">&lt;=</span> nums<span class="token punctuation">[</span>mid<span class="token punctuation">]</span><span class="token punctuation">:</span>  <span class="token comment"># å†é€’å‡åºåˆ—é‡Œ</span>                <span class="token keyword">if</span> nums<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token operator">&lt;=</span>target<span class="token operator">&lt;</span> nums<span class="token punctuation">[</span>mid<span class="token punctuation">]</span><span class="token punctuation">:</span>                      right <span class="token operator">=</span> mid <span class="token operator">-</span><span class="token number">1</span>                <span class="token keyword">else</span><span class="token punctuation">:</span>                    left <span class="token operator">=</span> mid <span class="token operator">+</span><span class="token number">1</span>            <span class="token keyword">else</span><span class="token punctuation">:</span> <span class="token comment">#  ä¸€åŠå‡åºï¼Œä¸€åŠé™åºï¼Œå‰åŠéƒ¨åˆ†>ååŠéƒ¨åˆ†</span>                <span class="token keyword">if</span> nums<span class="token punctuation">[</span>mid<span class="token punctuation">]</span> <span class="token operator">&lt;</span> target<span class="token operator">&lt;=</span>nums<span class="token punctuation">[</span><span class="token builtin">len</span><span class="token punctuation">(</span>nums<span class="token punctuation">)</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">:</span>                    left <span class="token operator">=</span> mid <span class="token operator">+</span><span class="token number">1</span>                <span class="token keyword">else</span><span class="token punctuation">:</span>                    right <span class="token operator">=</span> mid <span class="token operator">-</span> <span class="token number">1</span>        <span class="token keyword">return</span> <span class="token operator">-</span><span class="token number">1</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h2 id="852-å±±è„‰æ•°ç»„çš„å³°é¡¶ç´¢å¼•"><a href="#852-å±±è„‰æ•°ç»„çš„å³°é¡¶ç´¢å¼•" class="headerlink" title="852. å±±è„‰æ•°ç»„çš„å³°é¡¶ç´¢å¼•"></a><a href="https://leetcode.cn/problems/peak-index-in-a-mountain-array/">852. å±±è„‰æ•°ç»„çš„å³°é¡¶ç´¢å¼•</a></h2><blockquote><p>ç¬¦åˆä¸‹åˆ—å±æ€§çš„æ•°ç»„ arr ç§°ä¸º å±±è„‰æ•°ç»„ ï¼š<br>arr.length &gt;&#x3D; 3<br>å­˜åœ¨ iï¼ˆ0 &lt; i &lt; arr.length - 1ï¼‰ä½¿å¾—ï¼š<br>arr[0] &lt; arr[1] &lt; â€¦ arr[i-1] &lt; arr[i]<br>arr[i] &gt; arr[i+1] &gt; â€¦ &gt; arr[arr.length - 1]<br>ç»™ä½ ç”±æ•´æ•°ç»„æˆçš„å±±è„‰æ•°ç»„ arr ï¼Œè¿”å›ä»»ä½•æ»¡è¶³ arr[0] &lt; arr[1] &lt; â€¦ arr[i - 1] &lt; arr[i] &gt; arr[i + 1] &gt; â€¦ &gt; arr[arr.length - 1] çš„ä¸‹æ ‡ i ã€‚</p><p>æ¥æºï¼šåŠ›æ‰£ï¼ˆLeetCodeï¼‰<br>é“¾æ¥ï¼š<a href="https://leetcode.cn/problems/peak-index-in-a-mountain-array">https://leetcode.cn/problems/peak-index-in-a-mountain-array</a><br>è‘—ä½œæƒå½’é¢†æ‰£ç½‘ç»œæ‰€æœ‰ã€‚å•†ä¸šè½¬è½½è¯·è”ç³»å®˜æ–¹æˆæƒï¼Œéå•†ä¸šè½¬è½½è¯·æ³¨æ˜å‡ºå¤„ã€‚</p></blockquote><pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token keyword">class</span> <span class="token class-name">Solution</span><span class="token punctuation">:</span>    <span class="token keyword">def</span> <span class="token function">peakIndexInMountainArray</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> arr<span class="token punctuation">:</span> List<span class="token punctuation">[</span><span class="token builtin">int</span><span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token operator">-</span><span class="token operator">></span> <span class="token builtin">int</span><span class="token punctuation">:</span>        left<span class="token punctuation">,</span> right <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token builtin">len</span><span class="token punctuation">(</span>arr<span class="token punctuation">)</span> <span class="token operator">-</span><span class="token number">1</span>        <span class="token keyword">while</span> left <span class="token operator">&lt;</span> right<span class="token punctuation">:</span>            mid <span class="token operator">=</span> <span class="token punctuation">(</span>left <span class="token operator">+</span> right<span class="token punctuation">)</span> <span class="token operator">//</span><span class="token number">2</span>            <span class="token keyword">if</span> arr<span class="token punctuation">[</span>mid<span class="token punctuation">]</span> <span class="token operator">></span> arr<span class="token punctuation">[</span>mid<span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token keyword">and</span> arr<span class="token punctuation">[</span>mid<span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">&lt;</span> arr<span class="token punctuation">[</span>mid<span class="token punctuation">]</span><span class="token punctuation">:</span>                <span class="token keyword">return</span> mid            <span class="token keyword">elif</span> arr<span class="token punctuation">[</span>mid<span class="token punctuation">]</span> <span class="token operator">&lt;</span> arr<span class="token punctuation">[</span>mid<span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">:</span>                left <span class="token operator">=</span> mid            <span class="token keyword">else</span><span class="token punctuation">:</span>                right <span class="token operator">=</span> mid<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h2 id="162-å¯»æ‰¾å³°å€¼"><a href="#162-å¯»æ‰¾å³°å€¼" class="headerlink" title="162. å¯»æ‰¾å³°å€¼"></a><a href="https://leetcode.cn/problems/find-peak-element/">162. å¯»æ‰¾å³°å€¼</a></h2><blockquote><p>å³°å€¼å…ƒç´ æ˜¯æŒ‡å…¶å€¼ä¸¥æ ¼å¤§äºå·¦å³ç›¸é‚»å€¼çš„å…ƒç´ ã€‚</p><p>ç»™ä½ ä¸€ä¸ªæ•´æ•°æ•°ç»„ numsï¼Œæ‰¾åˆ°å³°å€¼å…ƒç´ å¹¶è¿”å›å…¶ç´¢å¼•ã€‚æ•°ç»„å¯èƒ½åŒ…å«å¤šä¸ªå³°å€¼ï¼Œåœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œè¿”å› ä»»ä½•ä¸€ä¸ªå³°å€¼ æ‰€åœ¨ä½ç½®å³å¯ã€‚</p><p>ä½ å¯ä»¥å‡è®¾ nums[-1] &#x3D; nums[n] &#x3D; -âˆ ã€‚</p><p>ä½ å¿…é¡»å®ç°æ—¶é—´å¤æ‚åº¦ä¸º O(log n) çš„ç®—æ³•æ¥è§£å†³æ­¤é—®é¢˜ã€‚</p><p>æ¥æºï¼šåŠ›æ‰£ï¼ˆLeetCodeï¼‰<br>é“¾æ¥ï¼š<a href="https://leetcode.cn/problems/find-peak-element">https://leetcode.cn/problems/find-peak-element</a><br>è‘—ä½œæƒå½’é¢†æ‰£ç½‘ç»œæ‰€æœ‰ã€‚å•†ä¸šè½¬è½½è¯·è”ç³»å®˜æ–¹æˆæƒï¼Œéå•†ä¸šè½¬è½½è¯·æ³¨æ˜å‡ºå¤„ã€‚</p></blockquote><pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token keyword">class</span> <span class="token class-name">Solution</span><span class="token punctuation">:</span>    <span class="token triple-quoted-string string">"""    target = nums[mid-1]&lt;numd[mid]> nums[mid+1]    """</span>    <span class="token keyword">def</span> <span class="token function">findPeakElement</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> nums<span class="token punctuation">:</span> List<span class="token punctuation">[</span><span class="token builtin">int</span><span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token operator">-</span><span class="token operator">></span> <span class="token builtin">int</span><span class="token punctuation">:</span>                left<span class="token punctuation">,</span> right <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token builtin">len</span><span class="token punctuation">(</span>nums<span class="token punctuation">)</span><span class="token operator">-</span><span class="token number">1</span>        <span class="token keyword">while</span> left<span class="token operator">+</span><span class="token number">1</span><span class="token operator">&lt;=</span>right<span class="token punctuation">:</span>            mid <span class="token operator">=</span> <span class="token punctuation">(</span>left <span class="token operator">+</span>right<span class="token punctuation">)</span><span class="token operator">//</span><span class="token number">2</span>            <span class="token keyword">if</span> nums<span class="token punctuation">[</span>mid<span class="token punctuation">]</span> <span class="token operator">></span> nums<span class="token punctuation">[</span>mid<span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">:</span>                right <span class="token operator">=</span> mid            <span class="token keyword">else</span><span class="token punctuation">:</span>                left <span class="token operator">=</span> mid <span class="token operator">+</span><span class="token number">1</span>        <span class="token keyword">return</span> <span class="token punctuation">(</span>left <span class="token operator">+</span>right<span class="token punctuation">)</span><span class="token operator">//</span><span class="token number">2</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h2 id="278-ç¬¬ä¸€ä¸ªé”™è¯¯çš„ç‰ˆæœ¬"><a href="#278-ç¬¬ä¸€ä¸ªé”™è¯¯çš„ç‰ˆæœ¬" class="headerlink" title="278. ç¬¬ä¸€ä¸ªé”™è¯¯çš„ç‰ˆæœ¬"></a><a href="https://leetcode.cn/problems/first-bad-version/">278. ç¬¬ä¸€ä¸ªé”™è¯¯çš„ç‰ˆæœ¬</a></h2><blockquote><p>ä½ æ˜¯äº§å“ç»ç†ï¼Œç›®å‰æ­£åœ¨å¸¦é¢†ä¸€ä¸ªå›¢é˜Ÿå¼€å‘æ–°çš„äº§å“ã€‚ä¸å¹¸çš„æ˜¯ï¼Œä½ çš„äº§å“çš„æœ€æ–°ç‰ˆæœ¬æ²¡æœ‰é€šè¿‡è´¨é‡æ£€æµ‹ã€‚ç”±äºæ¯ä¸ªç‰ˆæœ¬éƒ½æ˜¯åŸºäºä¹‹å‰çš„ç‰ˆæœ¬å¼€å‘çš„ï¼Œæ‰€ä»¥é”™è¯¯çš„ç‰ˆæœ¬ä¹‹åçš„æ‰€æœ‰ç‰ˆæœ¬éƒ½æ˜¯é”™çš„ã€‚</p><p>å‡è®¾ä½ æœ‰ n ä¸ªç‰ˆæœ¬ [1, 2, â€¦, n]ï¼Œä½ æƒ³æ‰¾å‡ºå¯¼è‡´ä¹‹åæ‰€æœ‰ç‰ˆæœ¬å‡ºé”™çš„ç¬¬ä¸€ä¸ªé”™è¯¯çš„ç‰ˆæœ¬ã€‚</p><p>ä½ å¯ä»¥é€šè¿‡è°ƒç”¨ bool isBadVersion(version) æ¥å£æ¥åˆ¤æ–­ç‰ˆæœ¬å· version æ˜¯å¦åœ¨å•å…ƒæµ‹è¯•ä¸­å‡ºé”™ã€‚å®ç°ä¸€ä¸ªå‡½æ•°æ¥æŸ¥æ‰¾ç¬¬ä¸€ä¸ªé”™è¯¯çš„ç‰ˆæœ¬ã€‚ä½ åº”è¯¥å°½é‡å‡å°‘å¯¹è°ƒç”¨ API çš„æ¬¡æ•°ã€‚</p><p>æ¥æºï¼šåŠ›æ‰£ï¼ˆLeetCodeï¼‰<br>é“¾æ¥ï¼š<a href="https://leetcode.cn/problems/first-bad-version">https://leetcode.cn/problems/first-bad-version</a><br>è‘—ä½œæƒå½’é¢†æ‰£ç½‘ç»œæ‰€æœ‰ã€‚å•†ä¸šè½¬è½½è¯·è”ç³»å®˜æ–¹æˆæƒï¼Œéå•†ä¸šè½¬è½½è¯·æ³¨æ˜å‡ºå¤„ã€‚</p></blockquote><pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token comment"># The isBadVersion API is already defined for you.</span><span class="token comment"># def isBadVersion(version: int) -> bool:</span><span class="token keyword">class</span> <span class="token class-name">Solution</span><span class="token punctuation">:</span>    <span class="token keyword">def</span> <span class="token function">firstBadVersion</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> n<span class="token punctuation">:</span> <span class="token builtin">int</span><span class="token punctuation">)</span> <span class="token operator">-</span><span class="token operator">></span> <span class="token builtin">int</span><span class="token punctuation">:</span>        left<span class="token punctuation">,</span> right <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">,</span> n        <span class="token keyword">while</span> left<span class="token operator">&lt;</span>right<span class="token punctuation">:</span>                        mid <span class="token operator">=</span> <span class="token punctuation">(</span>left <span class="token operator">+</span> right<span class="token punctuation">)</span><span class="token operator">//</span><span class="token number">2</span>            tag1 <span class="token operator">=</span> isBadVersion<span class="token punctuation">(</span>mid<span class="token punctuation">)</span>            <span class="token keyword">if</span> tag1<span class="token punctuation">:</span>                right <span class="token operator">=</span> mid            <span class="token keyword">else</span><span class="token punctuation">:</span>                left <span class="token operator">=</span> mid <span class="token operator">+</span><span class="token number">1</span>                    <span class="token keyword">return</span> right<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h2 id="74-æœç´¢äºŒç»´çŸ©é˜µ"><a href="#74-æœç´¢äºŒç»´çŸ©é˜µ" class="headerlink" title="74. æœç´¢äºŒç»´çŸ©é˜µ"></a><a href="https://leetcode.cn/problems/search-a-2d-matrix/">74. æœç´¢äºŒç»´çŸ©é˜µ</a></h2><blockquote><p>ç¼–å†™ä¸€ä¸ªé«˜æ•ˆçš„ç®—æ³•æ¥åˆ¤æ–­ m x n çŸ©é˜µä¸­ï¼Œæ˜¯å¦å­˜åœ¨ä¸€ä¸ªç›®æ ‡å€¼ã€‚è¯¥çŸ©é˜µå…·æœ‰å¦‚ä¸‹ç‰¹æ€§ï¼š</p><p>æ¯è¡Œä¸­çš„æ•´æ•°ä»å·¦åˆ°å³æŒ‰å‡åºæ’åˆ—ã€‚<br>æ¯è¡Œçš„ç¬¬ä¸€ä¸ªæ•´æ•°å¤§äºå‰ä¸€è¡Œçš„æœ€åä¸€ä¸ªæ•´æ•°ã€‚</p><p>æ¥æºï¼šåŠ›æ‰£ï¼ˆLeetCodeï¼‰<br>é“¾æ¥ï¼š<a href="https://leetcode.cn/problems/search-a-2d-matrix">https://leetcode.cn/problems/search-a-2d-matrix</a><br>è‘—ä½œæƒå½’é¢†æ‰£ç½‘ç»œæ‰€æœ‰ã€‚å•†ä¸šè½¬è½½è¯·è”ç³»å®˜æ–¹æˆæƒï¼Œéå•†ä¸šè½¬è½½è¯·æ³¨æ˜å‡ºå¤„ã€‚</p></blockquote><p><img src="https://zhangtq-blog.oss-cn-hangzhou.aliyuncs.com/content_picture/image-20230109131318316.png" alt="image-20230109131318316"></p><pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token keyword">class</span> <span class="token class-name">Solution</span><span class="token punctuation">:</span>    <span class="token keyword">def</span> <span class="token function">searchMatrix</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> matrix<span class="token punctuation">:</span> List<span class="token punctuation">[</span>List<span class="token punctuation">[</span><span class="token builtin">int</span><span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">,</span> target<span class="token punctuation">:</span> <span class="token builtin">int</span><span class="token punctuation">)</span> <span class="token operator">-</span><span class="token operator">></span> <span class="token builtin">bool</span><span class="token punctuation">:</span>        m <span class="token operator">=</span> <span class="token builtin">len</span><span class="token punctuation">(</span>matrix<span class="token punctuation">)</span> <span class="token operator">-</span><span class="token number">1</span>        n <span class="token operator">=</span> <span class="token builtin">len</span><span class="token punctuation">(</span>matrix<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token operator">-</span><span class="token number">1</span>        <span class="token comment"># TODO å…ˆç”¨äºŒåˆ†æŸ¥æ‰¾åˆ¤æ–­åœ¨å“ªä¸€è¡Œ</span>        top<span class="token punctuation">,</span> buttom <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">,</span> m        possible_row <span class="token operator">=</span> <span class="token operator">-</span><span class="token number">1</span>        <span class="token keyword">while</span> top<span class="token operator">&lt;=</span>buttom<span class="token punctuation">:</span>            mid <span class="token operator">=</span> <span class="token punctuation">(</span>top<span class="token operator">+</span>buttom<span class="token punctuation">)</span><span class="token operator">//</span> <span class="token number">2</span>            <span class="token keyword">if</span> matrix<span class="token punctuation">[</span>mid<span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token operator">></span>target<span class="token punctuation">:</span>                buttom <span class="token operator">=</span> mid <span class="token operator">-</span><span class="token number">1</span>            <span class="token keyword">elif</span> matrix<span class="token punctuation">[</span>mid<span class="token punctuation">]</span><span class="token punctuation">[</span>n<span class="token punctuation">]</span><span class="token operator">&lt;</span>target<span class="token punctuation">:</span>                top <span class="token operator">=</span> mid<span class="token operator">+</span><span class="token number">1</span>            <span class="token keyword">elif</span> matrix<span class="token punctuation">[</span>mid<span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">&lt;=</span>target <span class="token operator">&lt;=</span> matrix<span class="token punctuation">[</span>mid<span class="token punctuation">]</span><span class="token punctuation">[</span>n<span class="token punctuation">]</span><span class="token punctuation">:</span>                <span class="token keyword">if</span> matrix<span class="token punctuation">[</span>mid<span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">==</span> target <span class="token keyword">or</span> matrix<span class="token punctuation">[</span>mid<span class="token punctuation">]</span><span class="token punctuation">[</span>n<span class="token punctuation">]</span> <span class="token operator">==</span> target<span class="token punctuation">:</span>                    <span class="token keyword">return</span> <span class="token boolean">True</span>                possible_row <span class="token operator">=</span> mid                <span class="token keyword">break</span>        <span class="token comment"># æ²¡æœ‰æ‰¾åˆ°åˆé€‚çš„åŒºé—´è¡Œï¼Œè¿”å›false</span>        <span class="token keyword">if</span> possible_row <span class="token operator">==</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">:</span>            <span class="token keyword">return</span> <span class="token boolean">False</span>        <span class="token comment"># TODO ç”¨äºŒåˆ†æŸ¥æ‰¾æ˜¯å¦æ˜¯åœ¨è¿™ä¸€è¡Œé‡Œ</span>        left<span class="token punctuation">,</span> right <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">,</span> n        row <span class="token operator">=</span> matrix<span class="token punctuation">[</span>possible_row<span class="token punctuation">]</span>        <span class="token keyword">while</span> left <span class="token operator">&lt;=</span> right<span class="token punctuation">:</span>            mid <span class="token operator">=</span> <span class="token punctuation">(</span>left <span class="token operator">+</span>right<span class="token punctuation">)</span><span class="token operator">//</span><span class="token number">2</span>            <span class="token keyword">if</span> row<span class="token punctuation">[</span>mid<span class="token punctuation">]</span> <span class="token operator">==</span> target<span class="token punctuation">:</span>                <span class="token keyword">return</span> <span class="token boolean">True</span>            <span class="token keyword">elif</span> row<span class="token punctuation">[</span>mid<span class="token punctuation">]</span> <span class="token operator">></span> target<span class="token punctuation">:</span>                right <span class="token operator">=</span>mid<span class="token operator">-</span><span class="token number">1</span>            <span class="token keyword">else</span><span class="token punctuation">:</span>                left <span class="token operator">=</span> mid <span class="token operator">+</span><span class="token number">1</span>        <span class="token keyword">return</span> <span class="token boolean">False</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h2 id="240-æœç´¢äºŒç»´çŸ©é˜µ-II"><a href="#240-æœç´¢äºŒç»´çŸ©é˜µ-II" class="headerlink" title="240. æœç´¢äºŒç»´çŸ©é˜µ II"></a><a href="https://leetcode.cn/problems/search-a-2d-matrix-ii/">240. æœç´¢äºŒç»´çŸ©é˜µ II</a></h2><blockquote><p>ç¼–å†™ä¸€ä¸ªé«˜æ•ˆçš„ç®—æ³•æ¥æœç´¢ m x n çŸ©é˜µ matrix ä¸­çš„ä¸€ä¸ªç›®æ ‡å€¼ target ã€‚è¯¥çŸ©é˜µå…·æœ‰ä»¥ä¸‹ç‰¹æ€§ï¼š</p><p>æ¯è¡Œçš„å…ƒç´ ä»å·¦åˆ°å³å‡åºæ’åˆ—ã€‚<br>æ¯åˆ—çš„å…ƒç´ ä»ä¸Šåˆ°ä¸‹å‡åºæ’åˆ—ã€‚</p><p>æ¥æºï¼šåŠ›æ‰£ï¼ˆLeetCodeï¼‰<br>é“¾æ¥ï¼š<a href="https://leetcode.cn/problems/search-a-2d-matrix-ii">https://leetcode.cn/problems/search-a-2d-matrix-ii</a><br>è‘—ä½œæƒå½’é¢†æ‰£ç½‘ç»œæ‰€æœ‰ã€‚å•†ä¸šè½¬è½½è¯·è”ç³»å®˜æ–¹æˆæƒï¼Œéå•†ä¸šè½¬è½½è¯·æ³¨æ˜å‡ºå¤„ã€‚</p></blockquote><p><img src="https://zhangtq-blog.oss-cn-hangzhou.aliyuncs.com/content_picture/image-20230109134725241.png" alt="image-20230109134725241"></p><pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token keyword">class</span> <span class="token class-name">Solution</span><span class="token punctuation">:</span>    <span class="token keyword">def</span> <span class="token function">searchMatrix</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> matrix<span class="token punctuation">:</span> List<span class="token punctuation">[</span>List<span class="token punctuation">[</span><span class="token builtin">int</span><span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">,</span> target<span class="token punctuation">:</span> <span class="token builtin">int</span><span class="token punctuation">)</span> <span class="token operator">-</span><span class="token operator">></span> <span class="token builtin">bool</span><span class="token punctuation">:</span>        <span class="token keyword">if</span> <span class="token keyword">not</span> matrix<span class="token punctuation">:</span>            <span class="token keyword">return</span> <span class="token boolean">False</span>        m <span class="token operator">=</span> <span class="token builtin">len</span><span class="token punctuation">(</span>matrix<span class="token punctuation">)</span><span class="token operator">-</span><span class="token number">1</span>        n <span class="token operator">=</span> <span class="token builtin">len</span><span class="token punctuation">(</span>matrix<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token operator">-</span><span class="token number">1</span>                <span class="token comment"># æ¯ä¸€è¡Œä¸­è¿›è¡ŒäºŒåˆ†æŸ¥æ‰¾</span>        <span class="token keyword">for</span> i <span class="token keyword">in</span> <span class="token builtin">range</span><span class="token punctuation">(</span>m<span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">:</span>            row <span class="token operator">=</span> matrix<span class="token punctuation">[</span>i<span class="token punctuation">]</span>            left<span class="token punctuation">,</span> right <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">,</span> n            <span class="token keyword">while</span> left <span class="token operator">&lt;=</span> right<span class="token punctuation">:</span>                mid <span class="token operator">=</span> <span class="token punctuation">(</span>left <span class="token operator">+</span> right<span class="token punctuation">)</span><span class="token operator">//</span><span class="token number">2</span>                <span class="token keyword">if</span> row<span class="token punctuation">[</span>mid<span class="token punctuation">]</span> <span class="token operator">==</span> target<span class="token punctuation">:</span>                    <span class="token keyword">return</span> <span class="token boolean">True</span>                <span class="token keyword">elif</span> row<span class="token punctuation">[</span>mid<span class="token punctuation">]</span> <span class="token operator">&lt;</span> target<span class="token punctuation">:</span>                    left <span class="token operator">=</span> mid <span class="token operator">+</span><span class="token number">1</span>                <span class="token keyword">else</span><span class="token punctuation">:</span>                    right <span class="token operator">=</span> mid <span class="token operator">-</span><span class="token number">1</span>        <span class="token keyword">return</span> <span class="token boolean">False</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h2 id="69-x-çš„å¹³æ–¹æ ¹"><a href="#69-x-çš„å¹³æ–¹æ ¹" class="headerlink" title="69. x çš„å¹³æ–¹æ ¹ "></a><a href="https://leetcode.cn/problems/sqrtx/">69. x çš„å¹³æ–¹æ ¹ </a></h2><blockquote><p>ç»™ä½ ä¸€ä¸ªéè´Ÿæ•´æ•° x ï¼Œè®¡ç®—å¹¶è¿”å› x çš„ ç®—æœ¯å¹³æ–¹æ ¹ ã€‚</p><p>ç”±äºè¿”å›ç±»å‹æ˜¯æ•´æ•°ï¼Œç»“æœåªä¿ç•™ æ•´æ•°éƒ¨åˆ† ï¼Œå°æ•°éƒ¨åˆ†å°†è¢« èˆå» ã€‚</p><p>æ³¨æ„ï¼šä¸å…è®¸ä½¿ç”¨ä»»ä½•å†…ç½®æŒ‡æ•°å‡½æ•°å’Œç®—ç¬¦ï¼Œä¾‹å¦‚ pow(x, 0.5) æˆ–è€… x ** 0.5 ã€‚</p><p>æ¥æºï¼šåŠ›æ‰£ï¼ˆLeetCodeï¼‰<br>é“¾æ¥ï¼š<a href="https://leetcode.cn/problems/sqrtx">https://leetcode.cn/problems/sqrtx</a><br>è‘—ä½œæƒå½’é¢†æ‰£ç½‘ç»œæ‰€æœ‰ã€‚å•†ä¸šè½¬è½½è¯·è”ç³»å®˜æ–¹æˆæƒï¼Œéå•†ä¸šè½¬è½½è¯·æ³¨æ˜å‡ºå¤„ã€‚</p></blockquote><pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token keyword">class</span> <span class="token class-name">Solution</span><span class="token punctuation">:</span>    <span class="token keyword">def</span> <span class="token function">mySqrt</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> x<span class="token punctuation">:</span> <span class="token builtin">int</span><span class="token punctuation">)</span> <span class="token operator">-</span><span class="token operator">></span> <span class="token builtin">int</span><span class="token punctuation">:</span>        <span class="token comment"># xï¼šä¸ºæ­£æ•´æ•°   æ±‚æ•°å¹³æ–¹æ ¹ ç»“æœå‘ä¸‹å–æ•´</span>        left<span class="token punctuation">,</span> right <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">,</span> x                <span class="token keyword">while</span> left <span class="token operator">&lt;=</span>right<span class="token punctuation">:</span>            mid <span class="token operator">=</span> <span class="token punctuation">(</span>left <span class="token operator">+</span> right<span class="token punctuation">)</span><span class="token operator">//</span><span class="token number">2</span>            <span class="token keyword">if</span> <span class="token punctuation">(</span>mid<span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">)</span> <span class="token operator">*</span> <span class="token punctuation">(</span>mid<span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">)</span> <span class="token operator">></span> x <span class="token keyword">and</span> mid <span class="token operator">*</span> mid <span class="token operator">&lt;=</span> x <span class="token punctuation">:</span>                <span class="token keyword">return</span> mid            <span class="token keyword">elif</span> mid <span class="token operator">*</span> mid <span class="token operator">&lt;</span> x<span class="token punctuation">:</span>                left <span class="token operator">=</span> mid <span class="token operator">+</span><span class="token number">1</span>            <span class="token keyword">else</span><span class="token punctuation">:</span>                right <span class="token operator">=</span> mid <span class="token operator">-</span><span class="token number">1</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h2 id="540-æœ‰åºæ•°ç»„ä¸­çš„å•ä¸€å…ƒç´ "><a href="#540-æœ‰åºæ•°ç»„ä¸­çš„å•ä¸€å…ƒç´ " class="headerlink" title="540. æœ‰åºæ•°ç»„ä¸­çš„å•ä¸€å…ƒç´ "></a><a href="https://leetcode.cn/problems/single-element-in-a-sorted-array/">540. æœ‰åºæ•°ç»„ä¸­çš„å•ä¸€å…ƒç´ </a></h2><blockquote><p>ç»™ä½ ä¸€ä¸ªä»…ç”±æ•´æ•°ç»„æˆçš„æœ‰åºæ•°ç»„ï¼Œå…¶ä¸­æ¯ä¸ªå…ƒç´ éƒ½ä¼šå‡ºç°ä¸¤æ¬¡ï¼Œå”¯æœ‰ä¸€ä¸ªæ•°åªä¼šå‡ºç°ä¸€æ¬¡ã€‚</p><p>è¯·ä½ æ‰¾å‡ºå¹¶è¿”å›åªå‡ºç°ä¸€æ¬¡çš„é‚£ä¸ªæ•°ã€‚</p><p>ä½ è®¾è®¡çš„è§£å†³æ–¹æ¡ˆå¿…é¡»æ»¡è¶³ O(log n) æ—¶é—´å¤æ‚åº¦å’Œ O(1) ç©ºé—´å¤æ‚åº¦ã€‚</p><p>æ¥æºï¼šåŠ›æ‰£ï¼ˆLeetCodeï¼‰<br>é“¾æ¥ï¼š<a href="https://leetcode.cn/problems/single-element-in-a-sorted-array">https://leetcode.cn/problems/single-element-in-a-sorted-array</a><br>è‘—ä½œæƒå½’é¢†æ‰£ç½‘ç»œæ‰€æœ‰ã€‚å•†ä¸šè½¬è½½è¯·è”ç³»å®˜æ–¹æˆæƒï¼Œéå•†ä¸šè½¬è½½è¯·æ³¨æ˜å‡ºå¤„ã€‚</p></blockquote><pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token keyword">class</span> <span class="token class-name">Solution</span><span class="token punctuation">:</span>    <span class="token triple-quoted-string string">"""    å½“ \textit&#123;mid&#125;mid æ˜¯å¶æ•°æ—¶ï¼Œmid + 1 = mid^1ï¼›    å½“ \textit&#123;mid&#125;mid æ˜¯å¥‡æ•°æ—¶ï¼Œmid - 1 = mid^1ã€‚    """</span>    <span class="token keyword">def</span> <span class="token function">singleNonDuplicate</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> nums<span class="token punctuation">:</span> List<span class="token punctuation">[</span><span class="token builtin">int</span><span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token operator">-</span><span class="token operator">></span> <span class="token builtin">int</span><span class="token punctuation">:</span>        low<span class="token punctuation">,</span> high <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token builtin">len</span><span class="token punctuation">(</span>nums<span class="token punctuation">)</span> <span class="token operator">-</span> <span class="token number">1</span>        <span class="token keyword">while</span> low <span class="token operator">&lt;</span> high<span class="token punctuation">:</span>            mid <span class="token operator">=</span> <span class="token punctuation">(</span>low <span class="token operator">+</span> high<span class="token punctuation">)</span> <span class="token operator">//</span> <span class="token number">2</span>            <span class="token keyword">if</span> nums<span class="token punctuation">[</span>mid<span class="token punctuation">]</span> <span class="token operator">==</span> nums<span class="token punctuation">[</span>mid <span class="token operator">^</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">:</span>                low <span class="token operator">=</span> mid <span class="token operator">+</span> <span class="token number">1</span>            <span class="token keyword">else</span><span class="token punctuation">:</span>                high <span class="token operator">=</span> mid        <span class="token keyword">return</span> nums<span class="token punctuation">[</span>low<span class="token punctuation">]</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h2 id="528-æŒ‰æƒé‡éšæœºé€‰æ‹©"><a href="#528-æŒ‰æƒé‡éšæœºé€‰æ‹©" class="headerlink" title="528. æŒ‰æƒé‡éšæœºé€‰æ‹©"></a><a href="https://leetcode.cn/problems/random-pick-with-weight/">528. æŒ‰æƒé‡éšæœºé€‰æ‹©</a></h2><blockquote><p>ç»™ä½ ä¸€ä¸ª ä¸‹æ ‡ä» 0 å¼€å§‹ çš„æ­£æ•´æ•°æ•°ç»„ w ï¼Œå…¶ä¸­ w[i] ä»£è¡¨ç¬¬ i ä¸ªä¸‹æ ‡çš„æƒé‡ã€‚</p><p>è¯·ä½ å®ç°ä¸€ä¸ªå‡½æ•° pickIndex ï¼Œå®ƒå¯ä»¥ éšæœºåœ° ä»èŒƒå›´ [0, w.length - 1] å†…ï¼ˆå« 0 å’Œ w.length - 1ï¼‰é€‰å‡ºå¹¶è¿”å›ä¸€ä¸ªä¸‹æ ‡ã€‚é€‰å–ä¸‹æ ‡ i çš„ æ¦‚ç‡ ä¸º w[i] &#x2F; sum(w) ã€‚</p><p>ä¾‹å¦‚ï¼Œå¯¹äº w &#x3D; [1, 3]ï¼ŒæŒ‘é€‰ä¸‹æ ‡ 0 çš„æ¦‚ç‡ä¸º 1 &#x2F; (1 + 3) &#x3D; 0.25 ï¼ˆå³ï¼Œ25%ï¼‰ï¼Œè€Œé€‰å–ä¸‹æ ‡ 1 çš„æ¦‚ç‡ä¸º 3 &#x2F; (1 + 3) &#x3D; 0.75ï¼ˆå³ï¼Œ75%ï¼‰ã€‚</p><p>æ¥æºï¼šåŠ›æ‰£ï¼ˆLeetCodeï¼‰<br>é“¾æ¥ï¼š<a href="https://leetcode.cn/problems/random-pick-with-weight">https://leetcode.cn/problems/random-pick-with-weight</a><br>è‘—ä½œæƒå½’é¢†æ‰£ç½‘ç»œæ‰€æœ‰ã€‚å•†ä¸šè½¬è½½è¯·è”ç³»å®˜æ–¹æˆæƒï¼Œéå•†ä¸šè½¬è½½è¯·æ³¨æ˜å‡ºå¤„ã€‚</p></blockquote><p><img src="https://zhangtq-blog.oss-cn-hangzhou.aliyuncs.com/content_picture/image-20230110183654906.png" alt="image-20230110183654906"></p><pre class="line-numbers language-python" data-language="python"><code class="language-python">åç»­è¡¥å……<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><h1 id="åŒæŒ‡é’ˆ"><a href="#åŒæŒ‡é’ˆ" class="headerlink" title="åŒæŒ‡é’ˆ"></a>åŒæŒ‡é’ˆ</h1><p><strong>åŸºç¡€çŸ¥è¯†ï¼šå¸¸è§åŒæŒ‡é’ˆç®—æ³•åˆ†ä¸ºä¸‰ç±»ï¼ŒåŒå‘ï¼ˆå³ä¸¤ä¸ªæŒ‡é’ˆéƒ½ç›¸åŒä¸€ä¸ªæ–¹å‘ç§»åŠ¨ï¼‰ï¼ŒèƒŒå‘ï¼ˆä¸¤ä¸ªæŒ‡é’ˆä»ç›¸åŒæˆ–è€…ç›¸é‚»çš„ä½ç½®å‡ºå‘ï¼ŒèƒŒå‘ç§»åŠ¨ç›´åˆ°å…¶ä¸­ä¸€æ ¹æŒ‡é’ˆåˆ°è¾¾è¾¹ç•Œä¸ºæ­¢ï¼‰ï¼Œç›¸å‘ï¼ˆä¸¤ä¸ªæŒ‡é’ˆä»ä¸¤è¾¹å‡ºå‘ä¸€èµ·å‘ä¸­é—´ç§»åŠ¨ç›´åˆ°ä¸¤ä¸ªæŒ‡é’ˆç›¸é‡ï¼‰</strong></p><h2 id="èƒŒå‘åŒæŒ‡é’ˆ"><a href="#èƒŒå‘åŒæŒ‡é’ˆ" class="headerlink" title="èƒŒå‘åŒæŒ‡é’ˆ"></a>èƒŒå‘åŒæŒ‡é’ˆ</h2><h3 id="409-æœ€é•¿å›æ–‡ä¸²"><a href="#409-æœ€é•¿å›æ–‡ä¸²" class="headerlink" title="409. æœ€é•¿å›æ–‡ä¸²"></a><a href="https://leetcode.cn/problems/longest-palindrome/">409. æœ€é•¿å›æ–‡ä¸²</a></h3><blockquote><p>ç»™å®šä¸€ä¸ªåŒ…å«å¤§å†™å­—æ¯å’Œå°å†™å­—æ¯çš„å­—ç¬¦ä¸² s ï¼Œè¿”å› é€šè¿‡è¿™äº›å­—æ¯æ„é€ æˆçš„ æœ€é•¿çš„å›æ–‡ä¸² ã€‚</p><p>åœ¨æ„é€ è¿‡ç¨‹ä¸­ï¼Œè¯·æ³¨æ„ åŒºåˆ†å¤§å°å†™ ã€‚æ¯”å¦‚ â€œAaâ€ ä¸èƒ½å½“åšä¸€ä¸ªå›æ–‡å­—ç¬¦ä¸²ã€‚</p><p>æ¥æºï¼šåŠ›æ‰£ï¼ˆLeetCodeï¼‰<br>é“¾æ¥ï¼š<a href="https://leetcode.cn/problems/longest-palindrome">https://leetcode.cn/problems/longest-palindrome</a><br>è‘—ä½œæƒå½’é¢†æ‰£ç½‘ç»œæ‰€æœ‰ã€‚å•†ä¸šè½¬è½½è¯·è”ç³»å®˜æ–¹æˆæƒï¼Œéå•†ä¸šè½¬è½½è¯·æ³¨æ˜å‡ºå¤„ã€‚</p></blockquote><p><img src="https://zhangtq-blog.oss-cn-hangzhou.aliyuncs.com/content_picture/image-20230110185049415.png" alt="image-20230110185049415"></p><pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token keyword">class</span> <span class="token class-name">Solution</span><span class="token punctuation">:</span>    <span class="token keyword">def</span> <span class="token function">longestPalindrome</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> s<span class="token punctuation">:</span> <span class="token builtin">str</span><span class="token punctuation">)</span> <span class="token operator">-</span><span class="token operator">></span> <span class="token builtin">int</span><span class="token punctuation">:</span>        ans <span class="token operator">=</span> <span class="token number">0</span>        count <span class="token operator">=</span> collections<span class="token punctuation">.</span>Counter<span class="token punctuation">(</span>s<span class="token punctuation">)</span>        <span class="token keyword">for</span> v <span class="token keyword">in</span> count<span class="token punctuation">.</span>values<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span>            ans <span class="token operator">+=</span> v<span class="token operator">//</span><span class="token number">2</span> <span class="token operator">*</span> <span class="token number">2</span>            <span class="token keyword">if</span> v<span class="token operator">%</span><span class="token number">2</span> <span class="token operator">==</span><span class="token number">1</span> <span class="token keyword">and</span> ans <span class="token operator">%</span><span class="token number">2</span> <span class="token operator">==</span><span class="token number">0</span><span class="token punctuation">:</span>                ans <span class="token operator">+=</span> <span class="token number">1</span>        <span class="token keyword">return</span> ans        <span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h2 id="125-éªŒè¯å›æ–‡ä¸²"><a href="#125-éªŒè¯å›æ–‡ä¸²" class="headerlink" title="125. éªŒè¯å›æ–‡ä¸²"></a><a href="https://leetcode.cn/problems/valid-palindrome/">125. éªŒè¯å›æ–‡ä¸²</a></h2><blockquote><p>å¦‚æœåœ¨å°†æ‰€æœ‰å¤§å†™å­—ç¬¦è½¬æ¢ä¸ºå°å†™å­—ç¬¦ã€å¹¶ç§»é™¤æ‰€æœ‰éå­—æ¯æ•°å­—å­—ç¬¦ä¹‹åï¼ŒçŸ­è¯­æ­£ç€è¯»å’Œåç€è¯»éƒ½ä¸€æ ·ã€‚åˆ™å¯ä»¥è®¤ä¸ºè¯¥çŸ­è¯­æ˜¯ä¸€ä¸ª å›æ–‡ä¸² ã€‚</p><p>å­—æ¯å’Œæ•°å­—éƒ½å±äºå­—æ¯æ•°å­—å­—ç¬¦ã€‚</p><p>ç»™ä½ ä¸€ä¸ªå­—ç¬¦ä¸² sï¼Œå¦‚æœå®ƒæ˜¯ å›æ–‡ä¸² ï¼Œè¿”å› true ï¼›å¦åˆ™ï¼Œè¿”å› false ã€‚</p><p>æ¥æºï¼šåŠ›æ‰£ï¼ˆLeetCodeï¼‰<br>é“¾æ¥ï¼š<a href="https://leetcode.cn/problems/valid-palindrome">https://leetcode.cn/problems/valid-palindrome</a><br>è‘—ä½œæƒå½’é¢†æ‰£ç½‘ç»œæ‰€æœ‰ã€‚å•†ä¸šè½¬è½½è¯·è”ç³»å®˜æ–¹æˆæƒï¼Œéå•†ä¸šè½¬è½½è¯·æ³¨æ˜å‡ºå¤„ã€‚</p></blockquote><p><img src="https://zhangtq-blog.oss-cn-hangzhou.aliyuncs.com/content_picture/image-20230110200409992.png" alt="image-20230110200409992"></p><pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token keyword">class</span> <span class="token class-name">Solution</span><span class="token punctuation">:</span>    <span class="token keyword">def</span> <span class="token function">isPalindrome</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> s<span class="token punctuation">:</span> <span class="token builtin">str</span><span class="token punctuation">)</span> <span class="token operator">-</span><span class="token operator">></span> <span class="token builtin">bool</span><span class="token punctuation">:</span>        ss <span class="token operator">=</span> re<span class="token punctuation">.</span>findall<span class="token punctuation">(</span><span class="token string">r'[a-zA-Z0-9]'</span><span class="token punctuation">,</span> s<span class="token punctuation">)</span>                left<span class="token punctuation">,</span> right <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token builtin">len</span><span class="token punctuation">(</span>ss<span class="token punctuation">)</span> <span class="token operator">-</span> <span class="token number">1</span>        <span class="token keyword">while</span> left <span class="token operator">&lt;</span> right<span class="token punctuation">:</span>            <span class="token keyword">if</span> ss<span class="token punctuation">[</span>left<span class="token punctuation">]</span><span class="token punctuation">.</span>lower<span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">==</span> ss<span class="token punctuation">[</span>right<span class="token punctuation">]</span><span class="token punctuation">.</span>lower<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span>                left <span class="token operator">+=</span> <span class="token number">1</span>                right <span class="token operator">-=</span> <span class="token number">1</span>            <span class="token keyword">else</span><span class="token punctuation">:</span>                <span class="token keyword">return</span> <span class="token boolean">False</span>        <span class="token keyword">return</span> <span class="token boolean">True</span>                <span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h2 id="5-æœ€é•¿å›æ–‡å­ä¸²"><a href="#5-æœ€é•¿å›æ–‡å­ä¸²" class="headerlink" title="5. æœ€é•¿å›æ–‡å­ä¸²"></a><a href="https://leetcode.cn/problems/longest-palindromic-substring/">5. æœ€é•¿å›æ–‡å­ä¸²</a></h2><blockquote><p>ç»™ä½ ä¸€ä¸ªå­—ç¬¦ä¸² <code>s</code>ï¼Œæ‰¾åˆ° <code>s</code> ä¸­æœ€é•¿çš„å›æ–‡å­ä¸²ã€‚</p><p>å¦‚æœå­—ç¬¦ä¸²çš„ååºä¸åŸå§‹å­—ç¬¦ä¸²ç›¸åŒï¼Œåˆ™è¯¥å­—ç¬¦ä¸²ç§°ä¸ºå›æ–‡å­—ç¬¦ä¸²ã€‚</p></blockquote><pre class="line-numbers language-python" data-language="python"><code class="language-python"><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><h1 id="äºŒå‰æ ‘"><a href="#äºŒå‰æ ‘" class="headerlink" title="äºŒå‰æ ‘"></a>äºŒå‰æ ‘</h1><h2 id="äºŒå‰æ ‘éå†"><a href="#äºŒå‰æ ‘éå†" class="headerlink" title="äºŒå‰æ ‘éå†"></a>äºŒå‰æ ‘éå†</h2><h3 id="å‰ä¸­ååºéå†"><a href="#å‰ä¸­ååºéå†" class="headerlink" title="å‰ä¸­ååºéå†"></a>å‰ä¸­ååºéå†</h3><h3 id="å±‚æ¬¡éå†"><a href="#å±‚æ¬¡éå†" class="headerlink" title="å±‚æ¬¡éå†"></a>å±‚æ¬¡éå†</h3><h2 id="äºŒå‰æœç´¢æ ‘"><a href="#äºŒå‰æœç´¢æ ‘" class="headerlink" title="äºŒå‰æœç´¢æ ‘"></a>äºŒå‰æœç´¢æ ‘</h2><h2 id="å¹³è¡¡äºŒå‰æ ‘"><a href="#å¹³è¡¡äºŒå‰æ ‘" class="headerlink" title="å¹³è¡¡äºŒå‰æ ‘"></a>å¹³è¡¡äºŒå‰æ ‘</h2><h1 id="KMPç®—æ³•"><a href="#KMPç®—æ³•" class="headerlink" title="KMPç®—æ³•"></a>KMPç®—æ³•</h1><h1 id="è´ªå¿ƒç®—æ³•"><a href="#è´ªå¿ƒç®—æ³•" class="headerlink" title="è´ªå¿ƒç®—æ³•"></a>è´ªå¿ƒç®—æ³•</h1><h1 id="åŠ¨æ€è§„åˆ’"><a href="#åŠ¨æ€è§„åˆ’" class="headerlink" title="åŠ¨æ€è§„åˆ’"></a>åŠ¨æ€è§„åˆ’</h1><h1 id="0-1èƒŒåŒ…"><a href="#0-1èƒŒåŒ…" class="headerlink" title="0-1èƒŒåŒ…"></a>0-1èƒŒåŒ…</h1><h1 id="å®Œå…¨èƒŒåŒ…"><a href="#å®Œå…¨èƒŒåŒ…" class="headerlink" title="å®Œå…¨èƒŒåŒ…"></a>å®Œå…¨èƒŒåŒ…</h1><h1 id="å›æº¯"><a href="#å›æº¯" class="headerlink" title="å›æº¯"></a>å›æº¯</h1><h1 id="æ·±åº¦ä¼˜å…ˆå’Œå¹¿åº¦ä¼˜å…ˆ"><a href="#æ·±åº¦ä¼˜å…ˆå’Œå¹¿åº¦ä¼˜å…ˆ" class="headerlink" title="æ·±åº¦ä¼˜å…ˆå’Œå¹¿åº¦ä¼˜å…ˆ"></a>æ·±åº¦ä¼˜å…ˆå’Œå¹¿åº¦ä¼˜å…ˆ</h1><h1 id="å­—å…¸æ ‘"><a href="#å­—å…¸æ ‘" class="headerlink" title="å­—å…¸æ ‘"></a>å­—å…¸æ ‘</h1><h1 id="ä½è¿ç®—"><a href="#ä½è¿ç®—" class="headerlink" title="ä½è¿ç®—"></a>ä½è¿ç®—</h1><h1 id="å¹¶æŸ¥é›†"><a href="#å¹¶æŸ¥é›†" class="headerlink" title="å¹¶æŸ¥é›†"></a>å¹¶æŸ¥é›†</h1>]]></content>
      
      
      <categories>
          
          <category> æ•°æ®ç»“æ„ä¸ç®—æ³• </category>
          
      </categories>
      
      
        <tags>
            
            <tag> ç®—æ³•é¢˜ </tag>
            
            <tag> leetcode </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>httpåè®®</title>
      <link href="/posts/20687.html"/>
      <url>/posts/20687.html</url>
      
        <content type="html"><![CDATA[<h1 id="httpå¿…çŸ¥å¿…ä¼š"><a href="#httpå¿…çŸ¥å¿…ä¼š" class="headerlink" title="httpå¿…çŸ¥å¿…ä¼š"></a>httpå¿…çŸ¥å¿…ä¼š</h1><h1 id="http-è¯·æ±‚æ–¹å¼"><a href="#http-è¯·æ±‚æ–¹å¼" class="headerlink" title="http è¯·æ±‚æ–¹å¼"></a>http è¯·æ±‚æ–¹å¼</h1><ul><li><p>get: è¯·æ±‚æœåŠ¡å™¨çš„æŸäº›èµ„æº</p></li><li><p>post: å‘æœåŠ¡å™¨æäº¤æŸäº›èµ„æº</p></li><li><p>put; ç”¨äºæ–°å¢èµ„æº</p></li><li><p>patch: å¯¹èµ„æºè¿›è¡Œéƒ¨åˆ†ä¿®æ”¹</p></li><li><p>delete: åˆ é™¤èµ„æº</p></li><li><p>head: è¯·æ±‚èµ„æºçš„å¤´éƒ¨ä¿¡æ¯ï¼Œ è·å–äºpostæˆ–è€…getç›¸åŒçš„å¤´ä¿¡æ¯ï¼Œ  è¯¥è¯·æ±‚æ–¹æ³•çš„ä¸€ä¸ªä½¿ç”¨åœºæ™¯æ˜¯åœ¨ä¸‹è½½ä¸€ä¸ªå¤§æ–‡ä»¶å‰å…ˆè·å–å…¶å¤§å°å†å†³å®šæ˜¯å¦è¦ä¸‹è½½, ä»¥æ­¤å¯ä»¥èŠ‚çº¦å¸¦å®½èµ„æº </p></li><li><p>opstions:  æ£€æµ‹èµ„æºæ”¯æŒçš„é€šä¿¡é€‰é¡¹ï¼Œ æ¯”å¦‚ï¼šâ€˜ï¼userâ€™è·¯ç”±æ”¯æŒå“ªäº›æ–¹æ³•ï¼šgetã€postã€delete</p></li><li><p>trace: å›æ˜¾æœåŠ¡å™¨æ”¶åˆ°çš„è¯·æ±‚ï¼Œä¸€èˆ¬ç”¨ä½œæµ‹è¯•æˆ–è€…ç½‘ç»œè¯Šæ–­</p></li></ul><h1 id="GET-å’ŒPOSTæœ‰ä»€ä¹ˆåŒºåˆ«"><a href="#GET-å’ŒPOSTæœ‰ä»€ä¹ˆåŒºåˆ«" class="headerlink" title="GET å’ŒPOSTæœ‰ä»€ä¹ˆåŒºåˆ«"></a>GET å’ŒPOSTæœ‰ä»€ä¹ˆåŒºåˆ«</h1><ul><li>æ•°æ®ä¼ è¾“æ–¹å¼ä¸åŒï¼Œ getä½¿ç”¨urlä¼ è¾“æ•°æ®ï¼Œè€Œpostçš„æ•°æ®ä¸€èˆ¬é€šè¿‡è¯·æ±‚ä½“ä¼ è¾“</li><li>å®‰å…¨æ€§ä¸åŒï¼špostæ•°æ®åœ¨è¯·æ±‚ä½“å†…ï¼Œæœ‰ä¸€å®šçš„å®‰å…¨æ€§ä¿éšœï¼Œè€Œgetåœ¨urlï¼Œ å¾ˆå®¹æ˜“æŸ¥åˆ°æ•°æ®ä¿¡æ¯</li><li>æ•°æ®ç±»å‹ä¸åŒï¼šgetåªæ˜¯æ°¸ç»­asciiç ï¼Œpostæ²¡æœ‰é™åˆ¶</li><li>getè¯·æ±‚æ— å®³ï¼š åˆ·æ–°ï¼Œåé€€ç­‰æ“ä½œï¼Œpostå¯èƒ½ä¼šé‡å¤æäº¤è¡¨å•</li><li>getä¼ å‚æ˜¯ï¼Œå‚æ•°çš„æ•°æ®é‡å°äºpost</li></ul><h1 id="ä»€ä¹ˆæ˜¯æ— çŠ¶æ€åè®®ï¼Œ-httpæ˜¯æ— çŠ¶æ€åè®®å—ï¼Œæ€ä¹ˆè§£å†³"><a href="#ä»€ä¹ˆæ˜¯æ— çŠ¶æ€åè®®ï¼Œ-httpæ˜¯æ— çŠ¶æ€åè®®å—ï¼Œæ€ä¹ˆè§£å†³" class="headerlink" title="ä»€ä¹ˆæ˜¯æ— çŠ¶æ€åè®®ï¼Œ httpæ˜¯æ— çŠ¶æ€åè®®å—ï¼Œæ€ä¹ˆè§£å†³"></a>ä»€ä¹ˆæ˜¯æ— çŠ¶æ€åè®®ï¼Œ httpæ˜¯æ— çŠ¶æ€åè®®å—ï¼Œæ€ä¹ˆè§£å†³</h1><ul><li>æ— çŠ¶æ€åè®®æ˜¯æŒ‡å¯¹ä¼šè¯æ²¡æœ‰è®°å¿†åŠŸèƒ½ã€‚ç¼ºå°‘çŠ¶æ€æ„å‘³ç€åé¢å¤„ç†éœ€è¦å‰é¢è¯·æ±‚åˆ°çš„çŠ¶æ€ä¿¡æ¯ã€‚è§£å†³åŠæ³•ï¼šcookie, session å’Œjwt</li></ul><h1 id="udpå’Œtcpçš„åŒºåˆ«"><a href="#udpå’Œtcpçš„åŒºåˆ«" class="headerlink" title="udpå’Œtcpçš„åŒºåˆ«"></a>udpå’Œtcpçš„åŒºåˆ«</h1><ul><li><p>udp æ˜¯ä»€ä¹ˆ</p><blockquote><p>udpæ˜¯ç”¨æˆ·æ•°æ®æŠ¥åè®®ã€‚ä»–ä¸éœ€è¦æ¡æ‰‹æ“ä½œï¼Œä»è€ŒåŠ å¿«äº†é€šä¿¡é€Ÿåº¦ï¼Œå…è®¸ç½‘ç»œä¸Šçš„å…¶ä»–ä¸»æœºåœ¨åŒæ„ä¹‹å‰ä¼ è¾“æ•°æ®</p></blockquote></li><li><p>udpçš„ç‰¹ç‚¹</p><ul><li>èƒ½å¤Ÿæ”¯æŒå®¹å¿æ•°æ®åŒ…ä¸¢å¤±çš„å¸¦å®½å¯†é›†å‹åº”ç”¨ç¨‹åº</li><li>å…·æœ‰ä½å»¶è¿Ÿçš„ç‰¹ç‚¹</li><li>èƒ½å¤Ÿå‘é€å¤§é‡çš„æ•°æ®åŒ…</li><li>èƒ½å¤Ÿå…è®¸dnsæŸ¥æ‰¾ï¼Œdnsæ˜¯å»ºç«‹åœ¨udpä¸Šçš„åº”ç”¨å±‚åè®®</li></ul></li><li><p>tcp æ˜¯ä»€ä¹ˆ</p><blockquote><p>tcoä¼ è¾“æ§åˆ¶åè®®ï¼Œèƒ½å¤Ÿå¸®åŠ©ä½ ç¡®å®šè®¡ç®—æœºè¿æ¥åˆ°internetä»¥åŠä»–ä»¬ä¹‹é—´è¿›è¡Œæ•°æ®ä¼ è¾“ï¼Œé€šè¿‡ä¸‰æ¬¡æ¡æ‰‹æ¥å¯åŠ¨å’Œç¡®è®¤tcpçš„è¿æ¥è¿‡ç¨‹</p></blockquote></li><li><p>tcp çš„ä¸»è¦ç‰¹ç‚¹</p><ul><li>èƒ½å¤Ÿç¡®ä¿è¿æ¥çš„ç¡®ç«‹å’Œæ•°æ®åŒ…çš„å‘é€</li><li>æ”¯æŒé”™è¯¯é‡ä¼ </li><li>æä¾›é”™è¯¯æ ¡éªŒ</li></ul></li><li><p>tcp å’Œudpçš„åŒºåˆ«</p><ul><li>tcp æ˜¯é¢å‘è¿æ¥çš„åè®®ï¼Œudpæ˜¯æ— è¿æ¥çš„åè®®</li><li>tcpåœ¨å‘é€æ•°æ®å‰å»ºç«‹è¿æ¥ï¼Œç„¶åå†å‘é€æ•°æ®ï¼Œudp æ— åºå»ºç«‹è¿æ¥å°±å¯ä»¥ç›´æ¥å‘é€æ•°æ®</li><li>tcpä¼šæŒ‰ç…§ç‰¹å®šé¡ºåºé‡æ–°æ’åˆ—æ•°æ®åŒ…ã€‚udpæ•°æ®åŒ…æ²¡æœ‰å›ºå®šé¡ºåºï¼Œæ‰€æœ‰çš„æ•°æ®åŒ…éƒ½æ˜¯ç›¸äº’ç‹¬ç«‹çš„</li><li>tcpçš„ä¼ è¾“é€Ÿåº¦æ¯”è¾ƒæ…¢ï¼Œudpä¼ è¾“ä¼šæ›´å¿«</li><li>tcpçš„å¤´éƒ¨æœ‰20å­—èŠ‚, udpåªæœ‰8å­—èŠ‚</li><li>tcpæ˜¯é‡é‡çº§çš„ï¼Œåœ¨å‘é€ä»»ä½•ç”¨æˆ·æ•°æ®å‰ï¼Œtcpéƒ½éœ€è¦ä¸‰æ¬¡æ¡æ‰‹ç¡®è®¤è¿æ¥ï¼Œudpæ˜¯è½»é‡çº§çš„ï¼Œæ²¡æœ‰è·Ÿè¸ªè¿æ¥ï¼Œæ¶ˆæ¯æ’åºç­‰åŠŸèƒ½</li><li>tcp èƒ½å¤Ÿè¿›è¡Œé”™è¯¯æ ¡éªŒï¼Œå¹¶ä¸”èƒ½è¿›è¡Œé”™è¯¯æ¢å¤ï¼Œ udp ä¹Ÿä¼šè¿›è¡Œé”™è¯¯æ£€æŸ¥ï¼Œä½†æ˜¯ä¼šä¸¢å¼ƒé”™è¯¯çš„æ•°æ®åŒ…</li><li>tcp æœ‰å‘é€ç¡®è®¤ï¼Œudpæ²¡æœ‰å‘é€ç¡®è®¤</li><li>tcpæ˜¯å¯é çš„ï¼Œèƒ½ç¡®ä¿æ•°æ®å‘é€åˆ°ç›®æ ‡åœ°å€ï¼Œ udpä¸èƒ½ä¿è¯</li></ul></li></ul><h1 id="httpä¸­çš„302çŠ¶ä½“"><a href="#httpä¸­çš„302çŠ¶ä½“" class="headerlink" title="httpä¸­çš„302çŠ¶ä½“"></a>httpä¸­çš„302çŠ¶ä½“</h1><ul><li>302è¡¨ç¤ºé‡å®šå‘ï¼Œè¿™ç§æƒ…å†µä¸‹ï¼Œè¿”å›çš„å¤´éƒ¨ä¿¡æ¯ä¸­ä¼šåŒ…å«locationå­—æ®µï¼Œå†…å®¹æ˜¯é‡å®šå‘çš„url</li></ul><h1 id="http-åè®®ç”±ä»€ä¹ˆç»„æˆ"><a href="#http-åè®®ç”±ä»€ä¹ˆç»„æˆ" class="headerlink" title="http åè®®ç”±ä»€ä¹ˆç»„æˆ"></a>http åè®®ç”±ä»€ä¹ˆç»„æˆ</h1><ul><li>èµ·å§‹è¡Œï¼ˆstart lineï¼‰ã€å¤´éƒ¨ï¼ˆheaderï¼‰å’Œä¸»ä½“ï¼ˆbodyï¼‰ä¸‰éƒ¨åˆ†ç»„æˆï¼Œèµ·å§‹è¡Œæ˜¯å¯¹æŠ¥æ–‡è¿›è¡Œçš„æè¿°ï¼Œå¤´éƒ¨åŒ…å«æŠ¥æ–‡çš„ä¸€äº›å±æ€§ï¼Œä¸»ä½“åŒ…å«æŠ¥æ–‡çš„æ•°æ®</li></ul><p><img src="https://zhangtq-blog.oss-cn-hangzhou.aliyuncs.com/content_picture/1668574410255.png" alt="1668574410255"></p><h1 id="cookie-å’Œsessionçš„åŒºåˆ«"><a href="#cookie-å’Œsessionçš„åŒºåˆ«" class="headerlink" title="cookie å’Œsessionçš„åŒºåˆ«"></a>cookie å’Œsessionçš„åŒºåˆ«</h1><blockquote><p>cookie ä¿å­˜åœ¨æµè§ˆå™¨ä¸Šï¼Œsessionä¿å­˜åœ¨æµè§ˆå™¨ä¸Š</p><p>session ä¸­ä¿å­˜çš„æ˜¯å¯¹è±¡ï¼Œcookieä¿å­˜çš„æ˜¯å­—ç¬¦ä¸²</p><p>cookieçš„å®‰å…¨æ€§ä¸€èˆ¬ï¼Œåœ¨å®‰å…¨æ€§ç¬¬ä¸€çš„åŸåˆ™ä¸‹ï¼Œä¼˜å…ˆé€‰æ‹©session</p><p>å•ä¸ªcookieä¿å­˜çš„æ•°æ®ä¸èƒ½è¶…è¿‡4k</p><p>sessionå¯ä»¥æ”¾åœ¨æ–‡ä»¶å†…å­˜æˆ–è€…æ•°æ®åº“ä¸­</p><p>sessionä¸­è¿è¡Œæ—¶ä¾èµ–sessionId, è€ŒsessionIdæ—¶å­˜åœ¨cookieä¸­ï¼Œä¹Ÿå°±æ˜¯è¯´ï¼Œå¦‚æœæµè§ˆå™¨ç¦ç”¨äº†cookieï¼Œsessionä¹Ÿä¼šå¤±æ•ˆï¼ˆä½†æ˜¯å¯ä»¥é€šè¿‡å…¶ä»–æ–¹å¼å®ç°ï¼Œæ¯”å¦‚åœ¨urlä¸­ä¼ é€’sessionIdï¼‰</p></blockquote><h1 id="httpåè®®æœ‰ä»€ä¹ˆç‰¹ç‚¹"><a href="#httpåè®®æœ‰ä»€ä¹ˆç‰¹ç‚¹" class="headerlink" title="httpåè®®æœ‰ä»€ä¹ˆç‰¹ç‚¹"></a>httpåè®®æœ‰ä»€ä¹ˆç‰¹ç‚¹</h1><ul><li>æ— çŠ¶æ€</li><li>c&#x2F;sæ¨¡å‹</li><li>ç®€å•å¿«é€Ÿ</li><li>çµæ´»ï¼šå¯ä»¥ä¼ è¾“ä»»ä½•ç±»å‹çš„æ•°æ®</li></ul><h1 id="httpå’Œhttpsæœ‰ä»€ä¹ˆåŒºåˆ«"><a href="#httpå’Œhttpsæœ‰ä»€ä¹ˆåŒºåˆ«" class="headerlink" title="httpå’Œhttpsæœ‰ä»€ä¹ˆåŒºåˆ«"></a>httpå’Œhttpsæœ‰ä»€ä¹ˆåŒºåˆ«</h1><ul><li>httpsæœ‰caè¯ä¹¦ï¼Œhttpä¸€èˆ¬æ²¡æœ‰</li><li>httpæ—¶è¶…æ–‡æœ¬ä¼ è¾“åè®®ï¼Œä¿¡æ¯æ—¶æ˜æ–‡ä¼ è¾“çš„ï¼Œhttpåˆ™æ˜¯å…·æœ‰å®‰å…¨æ€§çš„sslåŠ å¯†ä¼ è¾“</li><li>httpé»˜è®¤ç«¯å£æ—¶80ï¼Œ httpsé»˜è®¤ç«¯å£æ—¶443</li></ul><h1 id="httpä¸­çš„keep-aliveæ˜¯ç”¨æ¥å¹²ä»€ä¹ˆçš„"><a href="#httpä¸­çš„keep-aliveæ˜¯ç”¨æ¥å¹²ä»€ä¹ˆçš„" class="headerlink" title="httpä¸­çš„keep-aliveæ˜¯ç”¨æ¥å¹²ä»€ä¹ˆçš„"></a>httpä¸­çš„keep-aliveæ˜¯ç”¨æ¥å¹²ä»€ä¹ˆçš„</h1><ul><li>åœ¨æ—©æœŸçš„http1.0ä¸­ï¼Œæ¯æ¬¡httpè¯·æ±‚éƒ½æ˜¯éœ€è¦åˆ›å»ºä¸€ä¸ªè¿æ¥ï¼Œè€Œåˆ›å»ºè¿æ¥çš„è¿‡ç¨‹éœ€è¦æ¶ˆè€—èµ„æºå’Œæ—¶é—´ï¼Œä¸ºäº†å‡å°‘èµ„æºæ¶ˆè€—ï¼Œç¼©çŸ­å“åº”æ—¶é—´ï¼Œå°±éœ€è¦é‡ç”¨è¿æ¥ï¼Œåœ¨åæ¥ï¼Œå¼•å…¥äº†é‡ç”¨è¿æ¥æœºåˆ¶ï¼Œå°±æ˜¯åœ¨httpè¯·æ±‚å¤´ä¸­åŠ å…¥äº†connectionï¼škeep-aliveå‘Šè¯‰å¯¹æ–¹è¿™ä¸ªè¯·æ±‚å“åº”å®Œæˆåä¸è¦å…³é—­ï¼Œä¸‹ä¸€æ¬¡ç»§ç»­ä½¿ç”¨</li><li>keep-aliveçš„ä¼˜ç‚¹ï¼š<ul><li>å‡å°‘cpuå’Œå†…å­˜çš„ä½¿ç”¨</li><li>è¯·æ±‚å’Œåº”ç­”ä¹‹é—´ç®¡çº¿åŒ–</li><li>é™ä½æ‹¥å¡æ§åˆ¶ï¼ˆtcpè¿æ¥å‡å°‘äº†ï¼‰</li><li>å‡å°‘äº†åç»­çš„è¯·æ±‚å»¶è¿Ÿï¼ˆæ— åºåœ¨è¿›è¡Œæ¡æ‰‹ï¼‰</li></ul></li></ul><h1 id="http-ä¸‰æ¬¡æ¡æ‰‹å’Œå››æ¬¡æŒ¥æ‰‹"><a href="#http-ä¸‰æ¬¡æ¡æ‰‹å’Œå››æ¬¡æŒ¥æ‰‹" class="headerlink" title="http ä¸‰æ¬¡æ¡æ‰‹å’Œå››æ¬¡æŒ¥æ‰‹"></a>http ä¸‰æ¬¡æ¡æ‰‹å’Œå››æ¬¡æŒ¥æ‰‹</h1><ul><li><p>ä¸‰æ¬¡æ¡æ‰‹è¿‡ç¨‹</p><blockquote><ol><li>å®¢æˆ·ç«¯å‘æœåŠ¡ç«¯å‘é€synæŠ¥æ–‡ï¼Œ åŒæ—¶å‘é€è‡ªå·±çš„åˆå§‹åŒ–åºåˆ—å·isnï¼Œæ­¤æ—¶å®¢æˆ·ç«¯å¤„äºsyn_send</li><li>æœåŠ¡ç«¯æ”¶åˆ°åç„¶ä¼šsynæŠ¥æ–‡ï¼Œå‘é€è‡ªå·±çš„åˆå§‹åŒ–åºåˆ—å·ï¼ŒåŒæ—¶è¿”å›ackï¼Œackçš„å€¼ä¸ºisn +1, syn-revd</li><li>å®¢æˆ·ç«¯æ”¶åˆ°æœåŠ¡ç«¯è¿”å›çš„synæŠ¥æ–‡åï¼Œä¼šè¿”å›ackï¼Œå€¼ä¸ºæœåŠ¡ç«¯è‰²isn+1,æ­¤æ—¶å®¢æˆ·ç«¯å¤„äºestablishedçŠ¶æ€</li><li>æœåŠ¡ç«¯æ”¶åˆ°ååä¹Ÿå¤„äºestablishedçŠ¶æ€</li></ol></blockquote></li><li><p>å››æ¬¡æŒ¥æ‰‹è¿‡ç¨‹</p><blockquote><ol><li>ç¬¬ä¸€æ¬¡æŒ¥æ‰‹ï¼šå®¢æˆ·ç«¯å‘é€ä¸€ä¸ªfinæŠ¥æ–‡ï¼ŒæŠ¥æ–‡ä¼šæŒ‡å®šä¸€ä¸ªåºåˆ—å·ï¼Œæ­¤æ—¶å®¢æˆ·ç«¯å¤„äºfin_waitçŠ¶æ€</li><li>ç¬¬äºŒæ¬¡æŒ¥æ‰‹ï¼šæœåŠ¡ç«¯æ”¶åˆ°finä¹‹åï¼Œä¼šå‘é€ackæŠ¥æ–‡ï¼Œå€¼ä¸ºisn+1ï¼Œè¡¨æ˜æ”¶åˆ°å®¢æˆ·ç«¯çš„æŠ¥æ–‡ï¼Œæ­¤æ—¶å®¢æˆ·ç«¯å¤„äºclose_waitingçŠ¶æ€</li><li>ç¬¬ä¸‰æ¬¡æŒ¥æ‰‹ï¼šæœåŠ¡ç«¯æ­¤æ—¶ä¹Ÿæƒ³æ–­å¼€äº†ï¼Œå’Œå®¢æˆ·ç«¯ä¸€æ ·ï¼Œå‘é€finæŠ¥æ–‡ï¼Œå¹¶ä¸”æŒ‡å®šåºåˆ—å·ï¼Œæ­¤æ—¶æœåŠ¡ç«¯å¤„äºlast-ackçŠ¶æ€</li><li>ç¬¬å››æ¬¡æŒ¥æ‰‹ï¼šå®¢æˆ·ç«¯æ”¶åˆ°finä¹‹åï¼Œä¸€æ ·ä¼šå‘é€ä¸€ä¸ªackæŠ¥æ–‡ä½œä¸ºåº”ç­”ï¼Œä¸”æŠŠæœåŠ¡ç«¯çš„åºåˆ—å·ï¼ˆisnï¼‰ +1ä½œæ–‡è‡ªå·±çš„ackï¼Œæ­¤æ—¶å®¢æˆ·ç«¯å¤„äºtime_waitçŠ¶æ€ï¼Œéœ€è¦è¿‡ä¸€é˜µç­‰æœåŠ¡ç«¯æ”¶åˆ°è‡ªå·±çš„ackæŠ¥æ–‡åè¿›å…¥closeçŠ¶æ€</li><li>æœåŠ¡ç«¯æ”¶åˆ°ackæŠ¥æ–‡åï¼Œå¤„äºcloseçŠ¶æ€</li></ol></blockquote></li></ul><h1 id="è¯·æ±‚è½¬å‘å’Œé‡å®šå‘çš„åŒºåˆ«"><a href="#è¯·æ±‚è½¬å‘å’Œé‡å®šå‘çš„åŒºåˆ«" class="headerlink" title="è¯·æ±‚è½¬å‘å’Œé‡å®šå‘çš„åŒºåˆ«"></a>è¯·æ±‚è½¬å‘å’Œé‡å®šå‘çš„åŒºåˆ«</h1><blockquote><p>è½¬å‘è¿‡ç¨‹ï¼š</p><p>å®¢æˆ·ç«¯æµè§ˆå™¨å‘å‡ºè¯·æ±‚â€”&gt; æœåŠ¡ç«¯æ¥æ”¶è¯·æ±‚â€”&gt;è°ƒç”¨å†…éƒ¨æ–¹æ³•åœ¨å®¹å™¨å†…éƒ¨å®Œæˆè¯·æ±‚å¤„ç†å’Œè½¬å‘è¿‡ç¨‹â€”&gt; å°†ç›®æ ‡èµ„æºå‘é€ç»™å®¢æˆ·ç«¯ è½¬å‘çš„è·¯å¾„å¿…é¡»æ˜¯åŒä¸€webå®¹å™¨ä¸‹çš„urlï¼Œä¸èƒ½è½¬å‘åˆ°å…¶ä»–webè·¯å¾„ä¸Šï¼Œä¸­é—´ä¼ é€’çš„æ˜¯è‡ªå·±çš„å®¹å™¨å†…request, åœ¨å®¢æˆ·ç«¯æµè§ˆå™¨è·¯å¾„ä¾ç„¶æ˜¾ç¤ºçš„æ˜¯è‡ªå·±ç¬¬ä¸€æ¬¡è®¿é—®çš„è·¯å¾„ï¼Œä¹Ÿå°±æ˜¯è¯´å®¢æˆ·æ— æ„ŸçŸ¥ã€‚è½¬å‘è¡Œä¸ºæµè§ˆå™¨åªæ˜¯åšäº†ä¸€æ¬¡è¯·æ±‚</p><p>é‡å®šå‘è¿‡ç¨‹ï¼š</p><p>å®¢æˆ·ä½†æµè§ˆå™¨å‘é€httpè¯·æ±‚â€”&gt;æœåŠ¡ç«¯æ¥å—è¯·æ±‚â€”&gt; è¿”å›302çŠ¶æ€ç ä»¥åŠåœ¨å¤´éƒ¨æ·»åŠ locationå­—æ®µï¼Œè¡¨æ˜é‡å®šå‘çš„urlâ€”&gt; æµè§ˆå™¨å‘ç°å“åº”å¼302çŠ¶æ€ï¼Œåˆ™è‡ªåŠ¨å‘é€ä¸€ä¸ªæ–°çš„httpè¯·æ±‚ï¼Œè¯·æ±‚urlæ˜¯locationåœ°å€â€”&gt;æœåŠ¡ç«¯ä¾æ®è¯·æ±‚è¿”å›æ•°æ®ã€‚è¿™é‡Œçš„locationå¯ä»¥é‡å®šå‘åˆ°ä»»ä½•åœ°å€ï¼Œåœ¨æµè§ˆå™¨çš„åœ°å€æ å¯ä»¥çœ‹åˆ°è¯·æ±‚åœ°å€å‘ç”Ÿäº†å˜åŒ–ï¼Œé‡å®šå‘è¡Œä¸ºæµè§ˆå™¨è‡³å°‘å‘ç”Ÿäº†ä¸¤æ¬¡è¯·æ±‚</p></blockquote>]]></content>
      
      
      <categories>
          
          <category> ç½‘ç»œé€šä¿¡ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> httpåè®® </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>istioå¾®æœåŠ¡</title>
      <link href="/posts/50921.html"/>
      <url>/posts/50921.html</url>
      
        <content type="html"><![CDATA[<h1 id="istioèƒ½åšä»€ä¹ˆ"><a href="#istioèƒ½åšä»€ä¹ˆ" class="headerlink" title="istioèƒ½åšä»€ä¹ˆ"></a>istioèƒ½åšä»€ä¹ˆ</h1><ul><li>è¿æ¥ï¼š æ™ºèƒ½æ§åˆ¶æœåŠ¡ä¹‹é—´çš„è°ƒç”¨æµé‡ï¼Œ å®ç°ç°åº¦å‡çº§ï¼Œabæµ‹è¯•å’Œè“ç»¿éƒ¨ç½²ç­‰</li><li>å®‰å…¨åŠ å›ºï¼š è‡ªåŠ¨ä¸ºæœåŠ¡ä¹‹é—´çš„è°ƒç”¨æä¾›è®¤è®¤è¯ã€æˆæƒå’ŒåŠ å¯†</li><li>æ§åˆ¶ï¼šåº”ç”¨ç”¨æˆ·å®šä¹‰çš„policy,ä¿è¯èµ„æºåœ¨æ¶ˆè´¹è€…ä¸­å…¬å¹³åˆ†é…</li><li>è§‚å¯Ÿï¼šæŸ¥çœ‹æœåŠ¡è¿è¡ŒæœŸé—´çš„å„ç§æ•°æ®ï¼Œæ¯”å¦‚æ—¥å¿—ï¼Œç›‘æ§ï¼Œäº†è§£æœåŠ¡çš„è¿è¡Œæƒ…å†µ</li></ul><p>istiosæ˜¯servicemesh çš„äº§å“åŒ–è½åœ°ï¼Œå¯ä»¥é€šè¿‡ç°æœ‰çš„æœåŠ¡å™¨æ–°å¢éƒ¨ç½²è¾¹è½¦ä»£ç†ï¼ˆsidecar proxyï¼‰,åº”ç”¨ç¨‹åºä¸ç”¨æ”¹ä»£ç ï¼Œå°±èƒ½å®ç°ä»¥ä¸‹åŸºæœ¬åŠŸèƒ½ï¼š</p><ul><li><p>å¸®åŠ©å¾®æœåŠ¡ä¹‹é—´å»ºç«‹è¿æ¥</p></li><li><p>å¸®åŠ©å¾®æœåŠ¡åˆ†å±‚è§£è€¦ï¼Œè§£è€¦åçš„proxy ä»£ç†å±‚èƒ½ä¸“æ³¨äºæä¾›åŸºç¡€æ¶æ„èƒ½åŠ›</p><ul><li><p>æœåŠ¡å‘ç°</p><ul><li><blockquote><p>æœåŠ¡æ³¨å†Œ å°†æœåŠ¡æ³¨å†Œåˆ°æœåŠ¡ä¸­å¿ƒä¸Š</p><p>æœåŠ¡å‘ç° ä»æ³¨å†Œä¸­å¿ƒè·å–æœåŠ¡ä¿¡æ¯</p></blockquote></li></ul></li><li><p>è´Ÿè½½å‡è¡¡</p><ul><li><blockquote><p>æµé‡åˆ†æµã€‚ å¸¸è§çš„è´Ÿè½½å‡è¡¡ï¼ˆnginx, haproxy, lvsï¼‰</p></blockquote></li></ul></li><li><p>æ•…éšœæ¢å¤</p><ul><li><blockquote><p>å…·å¤‡å‡ºç°æ•…éšœè‡ªåŠ¨æ¢å¤çš„åŠŸèƒ½</p></blockquote></li></ul></li><li><p>æœåŠ¡åº¦é‡</p><ul><li><blockquote><p>http:</p><p>è¯·æ±‚ä¸ªæ•°</p><p>è¯·æ±‚æŒç»­æ—¶é—´</p><p>è¯·æ±‚å¤§å°</p><p>å“åº”å¤§å°</p><p>tcp:</p><p>tcp å‘é€å­—èŠ‚æ•°</p><p>tcp æ¥æ”¶å­—èŠ‚æ•°</p><p>tcp æ‰“å¼€è¿æ¥æ•°</p><p>tcp å…³é—­è¿æ¥æ•°</p></blockquote></li></ul></li><li><p>æœåŠ¡ç›‘æ§</p></li><li><p>A&#x2F;Bæµ‹è¯•</p></li><li><p>ç°åº¦å‘å¸ƒ</p><ul><li><blockquote><p>é€šè¿‡è´Ÿè½½å‡è¡¡ç­‰ç­–ç•¥ï¼Œå…ˆå°†å°‘é‡çš„æµé‡å¯¼å…¥æ–°ç‰ˆæœ¬ï¼Œç„¶åé€šè¿‡ç›‘æ§ç­‰ç¡®è®¤é‡‘ä¸é›€æ²¡æœ‰é—®é¢˜åï¼Œè¿›è¡ŒæœåŠ¡æ‰©å®¹ï¼Œæœ€ç»ˆå°†è€ç‰ˆæœ¬å…¨éƒ¨ä¸‹çº¿ï¼Œå°†æ‰€æœ‰æµé‡æ‰“å…¥æ–°ç‰ˆæœ¬</p></blockquote></li></ul></li><li><p>é™æµé™é€Ÿ</p></li><li><p>è®¿é—®æ§åˆ¶</p></li><li><p>èº«ä»½è®¤è¯</p></li></ul></li></ul><h1 id="istio-æ ¸å¿ƒç‰¹æ€§"><a href="#istio-æ ¸å¿ƒç‰¹æ€§" class="headerlink" title="istio æ ¸å¿ƒç‰¹æ€§"></a>istio æ ¸å¿ƒç‰¹æ€§</h1><ul><li><strong>æµæ§ï¼ˆæ–­è·¯å™¨ è¶…æ—¶ï¼Œ é‡è¯•ï¼Œå¤šè·¯ç”±è§„åˆ™ï¼Œabæµ‹è¯•ï¼Œ ç°åº¦å‘å¸ƒï¼‰</strong></li><li>å®‰å…¨ï¼ˆåŠ å¯†ï¼Œèº«ä»½è®¤è¯ç­‰ï¼‰</li><li><strong>å¯è§‚å¯Ÿï¼ˆè¿½è¸ªï¼Œç›‘æ§æ•°æ®æ”¶é›†ï¼Œï¼‰</strong></li><li>å¹³å°æ— å…³æ€§</li><li>é›†æˆä¸å®šåˆ¶</li></ul><h2 id="æœåŠ¡ç†”æ–­å’Œé™çº§-æ–­è·¯å™¨"><a href="#æœåŠ¡ç†”æ–­å’Œé™çº§-æ–­è·¯å™¨" class="headerlink" title="æœåŠ¡ç†”æ–­å’Œé™çº§- æ–­è·¯å™¨"></a>æœåŠ¡ç†”æ–­å’Œé™çº§- æ–­è·¯å™¨</h2><ul><li>ä¸‹æ¸¸çš„æœåŠ¡å› ä¸ºæŸç§åŸå› çªç„¶å˜å¾—ä¸å¯ç”¨æˆ–å“åº”è¿‡æ…¢ï¼Œä¸Šæ¸¸æœåŠ¡ä¸ºäº†ä¿è¯è‡ªå·±æ•´ä½“æœåŠ¡çš„å¯ç”¨æ€§</li><li>ä¸å†ç»§ç»­è°ƒç”¨ç›®æ ‡æœåŠ¡ï¼Œç›´æ¥è¿”å›ï¼Œå¿«é€Ÿé‡Šæ”¾èµ„æºã€‚å¦‚æœç›®æ ‡æœåŠ¡æƒ…å†µå¥½è½¬åˆ™æ¢å¤è°ƒç”¨</li></ul><h2 id="æœåŠ¡ç†”æ–­çš„åŸç†"><a href="#æœåŠ¡ç†”æ–­çš„åŸç†" class="headerlink" title="æœåŠ¡ç†”æ–­çš„åŸç†"></a>æœåŠ¡ç†”æ–­çš„åŸç†</h2><ul><li>å½“è¿œç¨‹æœåŠ¡è¢«è°ƒç”¨æ—¶ï¼Œæ–­è·¯å™¨å°†ç›‘è§†è¿™ä¸ªè°ƒç”¨ï¼Œå¦‚è°ƒç”¨æ—¶é—´å¤ªé•¿ï¼Œæ–­è·¯å™¨å°†ä¼šä»‹å…¥å¹¶ä¸­æ–­è°ƒç”¨ã€‚</li><li>æ­¤å¤–ï¼Œæ–­è·¯å™¨å°†ç›‘è§†æ‰€æœ‰å¯¹è¿œç¨‹èµ„æºçš„è°ƒç”¨ï¼Œå¦‚å¯¹æŸä¸€ä¸ªè¿œç¨‹èµ„æºçš„è°ƒç”¨å¤±è´¥æ¬¡æ•°è¶³å¤Ÿå¤š</li><li>é‚£ä¹ˆæ–­è·¯å™¨ä¼šå‡ºç°å¹¶é‡‡å–å¿«é€Ÿå¤±è´¥ï¼Œé˜»æ­¢å°†æ¥è°ƒç”¨æ­¤è¿œç¨‹èµ„æºçš„è¯·æ±‚.</li><li>æ–­è·¯å™¨æ¨¡å¼çš„çŠ¶æ€å›¾</li></ul><p><img src="/1667998383076.png" alt="1667998383076"></p><ul><li>æœ€å¼€å§‹å¤„äºclosedçŠ¶æ€ï¼Œä¸€æ—¦æ£€æµ‹åˆ°é”™è¯¯åˆ°è¾¾ä¸€å®šé˜ˆå€¼ï¼Œä¾¿è½¬ä¸ºopençŠ¶æ€ï¼›</li><li>è¿™æ—¶å€™ä¼šæœ‰ä¸ª reset timeoutï¼Œåˆ°äº†è¿™ä¸ªæ—¶é—´äº†ï¼Œä¼šè½¬ç§»åˆ°half opençŠ¶æ€ï¼Œå°è¯•æ”¾è¡Œä¸€éƒ¨åˆ†è¯·æ±‚åˆ°åç«¯</li><li>ä¸€æ—¦æ£€æµ‹æˆåŠŸä¾¿å›å½’åˆ°closedçŠ¶æ€ï¼Œå³æ¢å¤æœåŠ¡</li></ul><h2 id="æœåŠ¡é™çº§"><a href="#æœåŠ¡é™çº§" class="headerlink" title="æœåŠ¡é™çº§"></a>æœåŠ¡é™çº§</h2><p><strong>æœåŠ¡ç†”æ–­æ˜¯æœåŠ¡é™çº§çš„ä¸€ç§æ–¹å¼</strong></p><ul><li>å½“ä¸‹æ¸¸çš„æœåŠ¡å› ä¸ºæŸç§åŸå› å“åº”è¿‡æ…¢ï¼Œä¸‹æ¸¸æœåŠ¡ä¸»åŠ¨åœæ‰ä¸€äº›ä¸å¤ªé‡è¦çš„ä¸šåŠ¡ï¼Œé‡Šæ”¾å‡ºæœåŠ¡å™¨èµ„æºï¼Œå¢åŠ å“åº”é€Ÿåº¦ï¼</li><li>äºŒã€å½“ä¸‹æ¸¸çš„æœåŠ¡å› ä¸ºæŸç§åŸå› ä¸å¯ç”¨ï¼Œä¸Šæ¸¸ä¸»åŠ¨è°ƒç”¨æœ¬åœ°çš„ä¸€äº›é™çº§é€»è¾‘ï¼Œé¿å…å¡é¡¿ï¼Œè¿…é€Ÿè¿”å›ç»™ç”¨æˆ·ï¼</li></ul><p><strong>åœ¨å®é™…å·¥ä½œä¸­ï¼Œé‡‡ç”¨ä»¥ä¸‹çš„æ–¹å¼æ¥å®Œæˆé™çº§å·¥ä½œ</strong></p><ul><li>æ¢³ç†å‡ºæ ¸å¿ƒä¸šåŠ¡å’Œéæ ¸å¿ƒä¸šåŠ¡æµç¨‹</li><li>åœ¨éæ ¸å¿ƒä¸šåŠ¡ä¸Šå¢åŠ å¼€å…³ï¼Œ ä¸€æ—¦å‘ç°ç³»ç»Ÿæ‰›ä¸ä½ï¼Œå…³æ‰å¼€å…³ï¼Œç»“æŸè¿™äº›æ¬¡è¦æµç¨‹</li><li>ä¸€ä¸ªå¾®æœåŠ¡æ¶æ„ä¸‹æœ‰å¾ˆå¤šåŠŸèƒ½ï¼Œéœ€è¦åŒºåˆ†æ ¸å¿ƒåŠŸèƒ½å’Œéæ ¸å¿ƒåŠŸèƒ½</li><li>ç„¶åæ¬¡è¦åŠŸèƒ½åŠ ä¸Šå¼€å…³ï¼Œéœ€è¦é™çº§çš„æ—¶å€™ï¼ŒæŠŠæ¬¡è¦åŠŸèƒ½å…³äº†å§ </li><li>é™ä½ä¸€è‡´æ€§äº†ï¼Œå³å°†æ ¸å¿ƒä¸šåŠ¡æµç¨‹çš„åŒæ­¥æ”¹å¼‚æ­¥ï¼Œå°†å¼ºä¸€è‡´æ€§æ”¹æœ€ç»ˆä¸€è‡´æ€§</li></ul><h2 id="æœåŠ¡è¶…æ—¶"><a href="#æœåŠ¡è¶…æ—¶" class="headerlink" title="æœåŠ¡è¶…æ—¶"></a>æœåŠ¡è¶…æ—¶</h2><h2 id="é‡è¯•"><a href="#é‡è¯•" class="headerlink" title="é‡è¯•"></a>é‡è¯•</h2><h2 id="å¤šè·¯ç”±è§„åˆ™"><a href="#å¤šè·¯ç”±è§„åˆ™" class="headerlink" title="å¤šè·¯ç”±è§„åˆ™"></a>å¤šè·¯ç”±è§„åˆ™</h2><ol><li>httpé‡å®šå‘</li><li>httpé‡å†™</li><li>httpé‡è¯•</li><li>httpæ•…éšœæ³¨å…¥</li><li>http è·¨åŸŸèµ„æºå…±äº«</li></ol><h1 id="istio-æ¶æ„"><a href="#istio-æ¶æ„" class="headerlink" title="istio æ¶æ„"></a>istio æ¶æ„</h1><h2 id="æµé‡æ²»ç†"><a href="#æµé‡æ²»ç†" class="headerlink" title="æµé‡æ²»ç†"></a>æµé‡æ²»ç†</h2><ul><li><p>åœ¨æ§åˆ¶å¹³é¢ä¼šç»è¿‡å¦‚ä¸‹æµç¨‹</p><ul><li>ç®¡ç†å‘˜é€šè¿‡å‘½ä»¤è¡Œæˆ–è€…apiåˆ›å»ºæµé‡è§„åˆ™</li><li>pilotå°†è§„åˆ™è½¬åŒ–ä¸ºenvoyçš„æ ‡å‡†æ ¼å¼</li><li>polit å°†è§„åˆ™ä¸‹å‘ç»™envoy</li></ul></li><li><p>åœ¨æ•°æ®å¹³é¢ä¼šæœ‰å¦‚ä¸‹æµç¨‹ï¼š</p><ul><li>envoyæ‹¦æˆªpodä¸Šæœ¬åœ°å®¹å™¨çš„inboundå’Œoutboundæµé‡</li><li>åœ¨æµé‡ç»è¿‡envoyæ—¶å¯¹æµé‡è¿›è¡Œæ²»ç†</li></ul></li></ul><p><img src="/1668052000960.png" alt="1668052000960"></p><h2 id="æ•°æ®å¹³é¢å’Œæ§åˆ¶å¹³é¢"><a href="#æ•°æ®å¹³é¢å’Œæ§åˆ¶å¹³é¢" class="headerlink" title="æ•°æ®å¹³é¢å’Œæ§åˆ¶å¹³é¢"></a>æ•°æ®å¹³é¢å’Œæ§åˆ¶å¹³é¢</h2><ul><li>æ•°æ®å¹³é¢<ul><li>æ•°æ®å¹³é¢æ—¶æœ‰ä¸€ç»„sidecaræ–¹å¼éƒ¨ç½²çš„åªèƒ½ä»£ç†ï¼ˆenvoy+sidecarï¼‰ç»„æˆ</li><li>sidecaræ§åˆ¶å¾®æœåŠ¡ä¹‹é—´çš„æ‰€æœ‰ç½‘ç»œé€šä¿¡ï¼Œç®¡ç†å…¥å£å’Œå‡ºå£æµé‡</li><li>sidecarä¸€èˆ¬å’Œä¸šåŠ¡å®¹å™¨ç»‘å®šåœ¨ä¸€èµ·ï¼ˆåœ¨k8sä¸­ä»¥è‡ªåŠ¨æ³¨å…¥çš„æ–¹å¼æ³¨å…¥åˆ°ä¼ä¸špodä¸­ï¼‰æ¥åŠ«æŒä¸šåŠ¡ å®¹å™¨çš„æµé‡ï¼Œå¹¶ä¸”æ¥å—æ§åˆ¶å¹³é¢çš„çš„æ§åˆ¶ï¼ŒåŒæ—¶å‘æ§åˆ¶é¢è¾“å‡ºæ—¥å¿—ï¼Œè¿½è¸ªä»¥åŠç›‘æ§æ•°æ®ç­‰</li><li>envoy å’Œpilotæ‰“åŒ…åœ¨åŒä¸€ä¸ªé•œåƒä¸­ï¼Œå³sidecar proxy</li></ul></li><li>æ§åˆ¶å¹³é¢<ul><li>è´Ÿè´£ç®¡ç†å’Œç®¡ç†å’Œé…ç½®ä»£ç†</li><li>æ§åˆ¶å¹³é¢çš„æ ¸å¿ƒï¼Œç®¡ç†istioçš„æ‰€æœ‰åŠŸèƒ½ï¼Œä¸»è¦åŒ…æ‹¬istod (pilot,mixer,ciadelç­‰æœåŠ¡ç»„ä»¶çš„é›†æˆ)</li></ul></li></ul><h2 id="åŸºç¡€æ¶æ„"><a href="#åŸºç¡€æ¶æ„" class="headerlink" title="åŸºç¡€æ¶æ„"></a>åŸºç¡€æ¶æ„</h2><h3 id="æ¶æ„å›¾"><a href="#æ¶æ„å›¾" class="headerlink" title="æ¶æ„å›¾"></a>æ¶æ„å›¾</h3><p> <img src="/image-20220909112116832.a1bd212f.png" alt="img"> </p><h3 id="ç‰¹æ€§æè¿°"><a href="#ç‰¹æ€§æè¿°" class="headerlink" title="ç‰¹æ€§æè¿°"></a>ç‰¹æ€§æè¿°</h3><ol><li><p>è‡ªåŠ¨æ³¨å…¥</p><ul><li>åœ¨åˆ›å»ºåº”ç”¨ç¨‹åºæ—¶è‡ªåŠ¨æ³¨å…¥sidecarä»£ç†envoyç¨‹åº</li><li>åœ¨kubernetesä¸­åˆ›å»ºpodçš„æ—¶å€™ï¼Œkube-apiserver è°ƒç”¨æ§åˆ¶é¢ç»„ä»¶sidecar-injectoræœåŠ¡ï¼Œè‡ªåŠ¨ä¿®æ”¹ç¨‹åºçš„æè¿°ä¿¡æ¯å¹¶æ³¨å…¥sidecar</li><li>çœŸæ­£åˆ›å»ºpodæ—¶ï¼Œåœ¨åˆ›å»ºä¸šåŠ¡å®¹å™¨podä¸­åŒæ—¶åˆ›å»ºsidecarå®¹å™¨</li></ul></li><li><p>æµé‡æ‹¦æˆª</p><ul><li>åœ¨podåˆå§‹åŒ–æ—¶è®¾ç½®iptableæµé‡è§„åˆ™ï¼ŒåŸºäºé…ç½®çš„iptableè§„åˆ™æ‹¦æˆªä¸šåŠ¡å®¹å™¨çš„è¿›å‡ºå£æµé‡åˆ°sidecarä¸Š</li><li>åº”ç”¨ç¨‹åºæ— æ„ŸçŸ¥</li><li>ä¸Šå›¾ä¸­ï¼Œæµå‡º frontend æœåŠ¡çš„æµé‡ä¼šè¢« frontend æœåŠ¡ä¾§çš„ Envoy æ‹¦æˆªï¼Œè€Œå½“æµé‡åˆ°è¾¾ forecastå®¹å™¨æ—¶ï¼ŒInbound æµé‡è¢« forecast æœåŠ¡ä¾§çš„ Envoy æ‹¦æˆª</li></ul></li><li><p>æœåŠ¡å‘ç°</p><ul><li>åŠ¡å‘èµ·æ–¹çš„ Envoy è°ƒç”¨æ§åˆ¶é¢ç»„ä»¶ Pilot çš„æœåŠ¡å‘ç°æ¥å£è·å–ç›®æ ‡æœåŠ¡çš„å®ä¾‹åˆ—è¡¨ </li><li>ä¸Šå›¾ä¸­ï¼Œfrontend æœåŠ¡ä¾§çš„ Envoy é€šè¿‡ Pilot çš„æœåŠ¡å‘ç°æ¥å£å¾—åˆ° forecast æœåŠ¡å„ä¸ªå®ä¾‹çš„åœ°å€</li></ul></li><li><p>è´Ÿè½½å‡è¡¡</p><ul><li>æœåŠ¡å‘èµ·æ–¹çš„ Envoy æ ¹æ®é…ç½®çš„è´Ÿè½½å‡è¡¡ç­–ç•¥é€‰æ‹©æœåŠ¡å®ä¾‹ï¼Œå¹¶è¿æ¥å¯¹åº”çš„å®ä¾‹åœ°å€ã€‚</li><li>ä¸Šå›¾ä¸­ï¼Œæ•°æ®é¢çš„å„ä¸ª Envoy ä» Pilot ä¸­è·å– forecast æœåŠ¡çš„è´Ÿè½½å‡è¡¡é…ç½®ï¼Œå¹¶æ‰§è¡Œè´Ÿè½½å‡è¡¡åŠ¨ä½œã€‚</li></ul></li><li><p>æµé‡æ²»ç†</p><ul><li>envoy ä» Pilot ä¸­è·å–é…ç½®çš„æµé‡è§„åˆ™ï¼Œåœ¨æ‹¦æˆªåˆ° Inbound æµé‡å’Œ Outbound æµé‡æ—¶æ‰§è¡Œæ²»ç†é€»è¾‘ã€‚</li><li>ä¸Šå›¾ä¸­ï¼Œ frontend æœåŠ¡ä¾§çš„ Envoy ä» Pilot ä¸­è·å–æµé‡æ²»ç†è§„åˆ™ï¼Œå¹¶æ ¹æ®è¯¥æµé‡æ²»ç†è§„åˆ™å°†ä¸åŒç‰¹å¾çš„æµé‡åˆ†å‘åˆ° forecast æœåŠ¡çš„ v1 æˆ– v2 ç‰ˆæœ¬ã€‚</li></ul></li><li><p>è®¿é—®å®‰å…¨</p><ul><li>åœ¨æœåŠ¡é—´è®¿é—®æ—¶é€šè¿‡åŒæ–¹çš„ Envoy è¿›è¡ŒåŒå‘è®¤è¯å’Œé€šé“åŠ å¯†ï¼Œå¹¶åŸºäºæœåŠ¡çš„èº«ä»½è¿›è¡Œæˆæƒç®¡ç†ã€‚</li><li>ä¸Šå›¾ä¸­ï¼ŒPilot ä¸‹å‘å®‰å…¨ç›¸å…³é…ç½®ï¼Œåœ¨ frontend æœåŠ¡å’Œ forecast æœåŠ¡çš„ Envoy ä¸Šè‡ªåŠ¨åŠ è½½è¯ä¹¦å’Œå¯†é’¥æ¥å®ç°åŒå‘è®¤è¯</li><li>å…¶ä¸­çš„è¯ä¹¦å’Œå¯†é’¥ç”±å¦ä¸€ä¸ªç®¡ç†é¢ç»„ä»¶ Citadel ç»´æŠ¤ã€‚</li></ul></li><li><p>æœåŠ¡ç›‘æµ‹</p><ul><li>åœ¨æœåŠ¡é—´é€šä¿¡æ—¶ï¼Œé€šä¿¡åŒæ–¹çš„ Envoy éƒ½ä¼šè¿æ¥ç®¡ç†é¢ç»„ä»¶ Mixer ä¸ŠæŠ¥è®¿é—®æ•°æ®ï¼Œå¹¶é€šè¿‡Mixer å°†æ•°æ®è½¬å‘ç»™å¯¹åº”çš„ç›‘æ§åç«¯ã€‚</li><li>ä¸Šå›¾ä¸­ï¼Œfrontend æœåŠ¡å¯¹ forecast æœåŠ¡çš„è®¿é—®ç›‘æ§æŒ‡æ ‡ã€æ—¥å¿—å’Œè°ƒç”¨é“¾éƒ½å¯ä»¥é€šè¿‡è¿™ç§æ–¹å¼æ”¶é›†åˆ°å¯¹åº”çš„ç›‘æ§åç«¯ã€‚</li></ul></li><li><p>ç­–ç•¥æ‰§è¡Œ</p><ul><li>åœ¨è¿›è¡ŒæœåŠ¡è®¿é—®æ—¶ï¼Œé€šè¿‡ Mixer è¿æ¥åç«¯æœåŠ¡æ¥æ§åˆ¶æœåŠ¡é—´çš„è®¿é—®ï¼Œåˆ¤æ–­å¯¹è®¿é—®æ˜¯æ”¾è¡Œè¿˜æ˜¯æ‹’ç»ã€‚</li><li>ä¸Šå›¾ä¸­ï¼ŒMixer åç«¯å¯ä»¥å¯¹æ¥ä¸€ä¸ªé™æµæœåŠ¡å¯¹ä» frontend æœåŠ¡åˆ° forecast æœåŠ¡çš„è®¿é—®è¿›è¡Œé€Ÿç‡æ§åˆ¶ç­‰æ“ä½œã€‚</li></ul></li><li><p>å¤–éƒ¨è®¿é—®</p><ul><li><p>åœ¨ç½‘æ ¼çš„å…¥å£å¤„æœ‰ä¸€ä¸ª Envoy æ‰®æ¼”å…¥å£ç½‘å…³çš„è§’ è‰²ã€‚</p></li><li><p>ä¸Šå›¾ä¸­ï¼Œå¤–éƒ¨æœåŠ¡é€šè¿‡ Gateway è®¿é—®å…¥å£æœåŠ¡ frontendï¼Œå¯¹ frontend æœåŠ¡çš„è´Ÿè½½å‡è¡¡å’Œä¸€äº›æµé‡æ²»ç†ç­–ç•¥éƒ½åœ¨è¿™ä¸ª Gateway ä¸Šæ‰§è¡Œ</p></li></ul></li></ol><h3 id="istio-ç»„ä»¶ä½œç”¨"><a href="#istio-ç»„ä»¶ä½œç”¨" class="headerlink" title="istio ç»„ä»¶ä½œç”¨"></a>istio ç»„ä»¶ä½œç”¨</h3><h4 id="pilotç»„ä»¶"><a href="#pilotç»„ä»¶" class="headerlink" title="pilotç»„ä»¶"></a>pilotç»„ä»¶</h4><ul><li><p>pilotæ˜¯ä¸»è¦çš„æ§åˆ¶ç»„ä»¶ï¼Œä¸‹å‘æŒ‡ä»¤æ§åˆ¶å®¢æˆ·ä½†ï¼Œåœ¨æ•´ä¸ªç³»ç»Ÿä¸­ï¼Œpilotå®Œæˆä»¥ä¸‹ä»»åŠ¡</p><ul><li>ä»kubernetesæˆ–è€…å…¶ä»–å¹³å°çš„æ³¨å†Œä¸­å¿ƒæˆ–è€…æœåŠ¡ä¿¡æ¯ï¼Œå®ŒæˆæœåŠ¡å‘ç°è¿‡ç¨‹</li><li>è¯»å–istioçš„å„é¡¹æ§åˆ¶é…ç½®ï¼Œåœ¨è¿›è¡Œè½¬æ¢ä¹‹å  ï¼Œå°†å…¶å‘é€ç»™æ•°æ®é¢æ‰§è¡Œ</li></ul></li><li><p>pilot å°†é…ç½®å†…å®¹å‘é€ç»™æ•°æ®é¢çš„envoyï¼Œenvoyæ›´å…·pilotæŒ‡ä»¤ï¼Œå°†è·¯ç”±ï¼ŒæœåŠ¡ï¼Œç›‘å¬ï¼Œé›†ç¾¤ç­‰å®šä¹‰ä¿¡æ¯è½¬æ¢ä¸ºæœ¬åœ°é…ç½®ï¼Œå®Œæˆæ§åˆ¶è¡Œä¸ºçš„è½åœ°</p><ul><li>pilotä¸ºenvoyæä¾›æœåŠ¡å‘ç°</li><li>æä¾›æµé‡ç®¡ç†åŠŸèƒ½ï¼ˆa&#x2F;bæµ‹è¯•ï¼Œé‡‘ä¸é›€å‘å¸ƒï¼‰ä»¥åŠå¼¹æ€§åŠŸèƒ½ï¼ˆè¶…æ—¶ï¼Œé‡è¯•ï¼Œç†”æ–­ç­‰ï¼‰</li><li>ç”Ÿæˆenvoyé…ç½®</li><li>å¯åŠ¨envoy</li><li>ç›‘æ§å¹¶ä¸”ç®¡ç†envoyçš„è¿è¡ŒçŠ¶å†µ, æ¯”å¦‚envoyå‡ºé”™æ—¶ï¼Œ pilot-agentè´Ÿè´£é‡å¯ï¼Œæˆ–è€…envoyé…ç½®å˜æ›´åï¼Œpilot è´Ÿè´£é‡å¯</li></ul></li><li><p>pilot-agentæ˜¯ä»€ä¹ˆ</p><ul><li>Envoy ä¸ç›´æ¥è·Ÿ k8s äº¤äº’ï¼Œé€šè¿‡ pilot-agent ç®¡ç†çš„</li><li>Pilot-agent è¿›ç¨‹æ ¹æ® K8S APIserver ä¸­çš„é…ç½®ä¿¡æ¯ç”Ÿæˆ Envoy çš„é…ç½®æ–‡ä»¶ï¼Œå¹¶è´Ÿè´£å¯åŠ¨ Envoy è¿›ç¨‹ã€‚</li><li>Envoy ç”± Pilot-agent è¿›ç¨‹å¯åŠ¨ï¼Œå¯åŠ¨åï¼ŒEnvoy è¯»å– Pilot-agent ä¸ºå®ƒç”Ÿæˆçš„é…ç½®æ–‡ä»¶</li><li>ç„¶åæ ¹æ®è¯¥æ–‡ä»¶çš„é…ç½®è·å–åˆ°Pilot çš„åœ°å€ï¼Œé€šè¿‡æ•°æ®é¢ä» pilot æ‹‰å–åŠ¨æ€é…ç½®ä¿¡æ¯</li><li>åŒ…æ‹¬è·¯ç”±(routeï¼‰ï¼Œç›‘å¬å™¨(1istenerï¼‰ï¼ŒæœåŠ¡é›†ç¾¤(clusterï¼‰å’ŒæœåŠ¡ç«¯ç‚¹ (endpoint)</li></ul></li></ul><h4 id="envoyç»„ä»¶"><a href="#envoyç»„ä»¶" class="headerlink" title="envoyç»„ä»¶"></a>envoyç»„ä»¶</h4><ol><li>envoyæ˜¯ä»€ä¹ˆ <ul><li>envoyæ˜¯c++å¼€å‘çš„é«˜æ€§èƒ½ä»£ç†ï¼Œç”¨äºåè°ƒç½‘ç»œä¸­æ‰€æœ‰æœåŠ¡çš„å…¥å£å’Œå‡ºå£æµé‡</li><li>envoyæœ‰è®¸å¤šå¼ºå¤§çš„åŠŸèƒ½ï¼šåŠ¨æ€æœåŠ¡å‘ç°ã€è´Ÿè½½å‡è¡¡ã€tlsç»ˆç«¯ã€http\grpcä»£ç†ã€</li><li>æ–­è·¯å™¨ã€å¥åº·æ£€æŸ¥ã€æµé‡æ‹†åˆ†ç°åº¦å‘å¸ƒã€æ•…éšœæ³¨å…¥</li></ul></li><li>istio ä¸envoyçš„å…³ç³»<ul><li>envoy å’ŒserviceAåŒå±äºä¸€ä¸ªpodï¼Œ å…±äº«ç½‘ç»œå’Œå‘½åç©ºé—´ï¼Œä»£ç†podAçš„æµé‡</li><li>å°†æµé‡æŒ‰ç…§è¯·æ±‚è§„åˆ™ä½œç”¨åœ¨serviceAä¸­</li></ul></li></ol><p><img src="/1668054370581.png" alt="1668054370581"></p><h4 id="Citadel"><a href="#Citadel" class="headerlink" title="Citadel"></a>Citadel</h4><ul><li>è´Ÿè´£å¤„ç†ç³»ç»Ÿä¸Šä¸åŒæœåŠ¡ä¹‹é—´çš„ TLS é€šä¿¡ã€‚</li><li>Citadel å……å½“è¯ä¹¦é¢å‘æœºæ„(CA)ï¼Œå¹¶ç”Ÿæˆè¯ä¹¦ä»¥å…è®¸åœ¨æ•°æ®å¹³é¢ä¸­è¿›è¡Œå®‰å…¨çš„ mTLS é€šä¿¡ã€‚</li><li>Citadel æ˜¯ Istio çš„æ ¸å¿ƒå®‰å…¨ç»„ä»¶ï¼Œæä¾›äº†è‡ªåŠ¨ç”Ÿ æˆã€åˆ†å‘ã€è½®æ¢ä¸æ’¤é”€å¯†é’¥å’Œè¯ä¹¦åŠŸèƒ½ã€‚</li><li>Citadel ä¸€ç›´ç›‘å¬ Kube- apiserverï¼Œä»¥ Secret çš„å½¢å¼ä¸ºæ¯ä¸ªæœåŠ¡éƒ½ç”Ÿæˆè¯ä¹¦å¯†é’¥ï¼Œå¹¶åœ¨ Pod åˆ›å»ºæ—¶æŒ‚è½½åˆ° Pod ä¸Š</li><li>ä»£ç†å®¹å™¨ä½¿ç”¨è¿™äº›æ–‡ä»¶æ¥åšæœåŠ¡èº«ä»½è®¤è¯ï¼Œè¿›è€Œä»£ ç†ä¸¤ç«¯æœåŠ¡å®ç°åŒå‘ TLS è®¤è¯ã€é€šé“åŠ å¯†ã€è®¿é—®æˆæƒç­‰å®‰å…¨åŠŸèƒ½</li><li>å¦‚å›¾ æ‰€ç¤ºï¼Œfrontend æœ åŠ¡å¯¹ forecast æœåŠ¡çš„è®¿é—®ç”¨åˆ°äº†HTTP æ–¹å¼ï¼Œé€šè¿‡é…ç½®å³å¯å¯¹æœåŠ¡å¢åŠ è®¤è¯åŠŸèƒ½</li><li>åŒæ–¹çš„ Envoy ä¼šå»ºç«‹åŒå‘è®¤è¯çš„ TLS é€šé“ï¼Œä»è€Œåœ¨æœåŠ¡é—´å¯ç”¨åŒå‘è®¤è¯çš„ HTTPS</li></ul><p><img src="/image-20220909142205117.2d6c0e8a.png" alt="img"></p><h4 id="Galley"><a href="#Galley" class="headerlink" title="Galley"></a>Galley</h4><ul><li>Galley æ˜¯ istio çš„é…ç½®éªŒè¯ã€æå–ã€å¤„ç†å’Œåˆ†å‘çš„ç»„ä»¶ã€‚</li><li>Galley æ˜¯æä¾›é…ç½®ç®¡ç†çš„æœåŠ¡ã€‚å®ç°åŸç†æ˜¯é€šè¿‡ k8s æä¾›çš„ ValidatingWebhook å¯¹é…ç½®è¿›è¡ŒéªŒè¯ã€‚</li><li>Galley ä½¿ Istio å¯ä»¥ä¸ Kubernetes ä¹‹å¤–çš„å…¶ä»–ç¯å¢ƒä¸€èµ·å·¥ä½œï¼Œå› ä¸ºå®ƒå¯ä»¥å°†ä¸åŒçš„é…ç½®æ•°æ®è½¬æ¢ä¸ºIstio å¯ä»¥ç†è§£çš„é€šç”¨æ ¼å¼ã€‚</li></ul><h4 id="Ingressgateway"><a href="#Ingressgateway" class="headerlink" title="Ingressgateway"></a>Ingressgateway</h4><ul><li>ingressgatewayå°±æ˜¯å…¥å£å¤„çš„gatewayï¼Œ ä»ç½‘æ ¼å¤–éƒ¨è®¿é—®ç½‘æ ¼å†…çš„æœåŠ¡å°±æ˜¯é€šè¿‡è¿™ä¸ªgatewayè¿›è¡Œçš„</li><li>istio-ingressgatewayæ˜¯ä¸€ä¸ªloadblanceç±»å‹çš„serviceï¼Œ ä¸åŒäºå…¶ä»–çš„æœåŠ¡ç»„ä»¶åªæœ‰ä¸€ä¸¤ä¸ªç«¯å£</li><li>istio-ingressgateway å¼€æ”¾äº†ä¸€ç»„ç«¯å£ï¼Œè¿™äº›å°±æ˜¯ç½‘æ ¼å†…æœåŠ¡çš„å¤–éƒ¨è®¿é—®ç«¯å£</li><li>å¦‚å›¾æ‰€ç¤ºï¼Œç½‘æ ¼å…¥å£ç½‘å…³çš„è´Ÿè½½å’Œç½‘æ ¼å†…çš„sidecaræ˜¯åŒæ ·çš„æ‰§è¡Œæµç¨‹</li><li>ä¹Ÿå’Œå†…éƒ¨çš„å…¶ä»–sidecarä¸€æ ·ï¼Œé€šè¿‡pilotå¤„æ¥å—æµé‡è§„åˆ™</li><li>**ç½‘å…³é…ç½®åº”ç”¨äºåœ¨ç½‘æ ¼è¾¹ç¼˜è¿è¡Œçš„ç‹¬ç«‹ Envoy ä»£ç†<code>ï¼Œ</code>è€Œä¸æ˜¯ä¸æœåŠ¡å·¥ä½œè´Ÿè½½ä¸€èµ·è¿è¡Œçš„ Sidecar Envoy ä»£ç†&#96; **</li></ul><p><img src="/1668055016859.png" alt="1668055016859"></p><h4 id="Sidecar-injector"><a href="#Sidecar-injector" class="headerlink" title="Sidecar-injector"></a>Sidecar-injector</h4><ul><li>Sidecar-injector æ˜¯è´Ÿè´£è‡ªåŠ¨æ³¨å…¥çš„ç»„ä»¶ï¼Œåªè¦å¼€å¯äº†è‡ªåŠ¨æ³¨ å…¥ï¼Œåœ¨ Pod åˆ›å»ºæ—¶å°±ä¼šè‡ªåŠ¨è°ƒç”¨istio-sidecar-injector å‘ Pod ä¸­æ³¨å…¥ Sidecar å®¹å™¨ã€‚</li><li>åœ¨ Kubernetes ç¯å¢ƒä¸‹ï¼Œæ ¹æ®è‡ªåŠ¨æ³¨å…¥é…ç½®ï¼ŒKube-apiserver åœ¨æ‹¦æˆªåˆ° Pod åˆ›å»ºçš„è¯·æ±‚æ—¶</li><li>ä¼šè°ƒç”¨è‡ªåŠ¨æ³¨å…¥æœåŠ¡ istio-sidecar-injector ç”Ÿæˆ Sidecar å®¹å™¨çš„æè¿°å¹¶å°†å…¶æ’å…¥åŸ Pod çš„å®šä¹‰ä¸­</li><li>è¿™æ ·ï¼Œåœ¨åˆ›å»ºçš„ Pod å†…é™¤äº†åŒ…æ‹¬ä¸šåŠ¡å®¹å™¨ï¼Œè¿˜åŒ…æ‹¬ Sidecar å®¹å™¨ï¼Œè¿™ä¸ªæ³¨å…¥è¿‡ç¨‹å¯¹ç”¨æˆ·é€æ˜ã€‚</li></ul><h1 id="ingresséƒ¨ç½²nginx"><a href="#ingresséƒ¨ç½²nginx" class="headerlink" title="# ingresséƒ¨ç½²nginx"></a># ingresséƒ¨ç½²nginx</h1><h2 id="å…¥å£ç½‘å…³"><a href="#å…¥å£ç½‘å…³" class="headerlink" title="å…¥å£ç½‘å…³"></a>å…¥å£ç½‘å…³</h2><ul><li>å…¥å£ç½‘å…³ï¼ˆingress getewayï¼‰æ—¶istisçš„é‡è¦èµ„æºä¹‹ä¸€ï¼Œæ—¶ç”¨äºç®¡ç†ç½‘æ ¼è¾¹ç¼˜å…¥ç«™çš„æµé‡</li><li>é€šè¿‡å…¥å£ç½‘å…³å¯ä»¥å¾ˆè½»æ¾çš„å°†ç½‘æ ¼å†…éƒ¨çš„æœåŠ¡æš´æ¼åˆ°å¤–éƒ¨æä¾›è®¿é—®</li><li>*<em>ç½‘å…³é…ç½®åº”ç”¨åœ¨ç½‘æ ¼è¾¹ç¼˜ç‹¬ç«‹è¿è¡Œçš„envoyä»£ç†ï¼Œè€Œä¸æ˜¯ä¸æœåŠ¡å·¥ä½œè´Ÿè½½ä¸€èµ·è¿è¡Œçš„sidecar envoyä»£ç†</em></li><li>æ‰€ä»¥æˆ‘ä»¬é…ç½®çš„gatewayèµ„æºæŒ‡ä»£çš„æ—¶ä¸‹å›¾ä¸­çš„2istio-ingressgateway</li></ul><p><img src="/1668222997922.png" alt="1668222997922"></p><h2 id="nginx-gateway-yaml"><a href="#nginx-gateway-yaml" class="headerlink" title="nginx-gateway.yaml"></a>nginx-gateway.yaml</h2><blockquote><p>é€šè¿‡å‘½ä»¤è®¿é—® curl -H â€œHost: nginx.gateway.comâ€ <a href="http://ingressgateway:nodeport/">http://ingressgateway:nodeport/</a> </p></blockquote><ul><li>istio-ingressgateway å°±æ˜¯å°åŒºçš„å¤§é—¨ï¼ˆå”¯ä¸€çš„å¤§é—¨ï¼‰ï¼Œæ‰€æœ‰è¿›å…¥çš„æµé‡éƒ½éœ€è¦ç»è¿‡ </li><li>ingressgateway ç›¸å½“äºè·¯æ ‡å¼•å¯¼å»åˆ°A B C Dçš„ä¸€æ ‹å»ºç­‘é‡Œé¢ï¼Œåˆ†å¼€åŸŸåå»å¯¼æµï¼Œ</li><li>virtualservice å°±åƒåˆ°å»ºç­‘é‡Œçš„ç”µæ¢¯ä¸€æ ·ï¼ŒæŒ‰ç…§ä¸åŒçš„æ¥¼å±‚è¿›è¡Œç®¡ç†è·¯ç”±çš„ä½œç”¨</li><li>destinationrule åˆ°è¾¾å…·ä½“çš„æ¥¼å±‚åæŒ‰ç…§ä¸åŒçš„é—¨æˆ¿å· 1 2 3 4 è¿›å…¥åˆ°çœŸæ­£çš„å±‹é‡Œå»</li></ul><blockquote><p>istioå®‰è£…åä¼šæœ‰ä¸‹é¢ä¸‰ä¸ªæœåŠ¡</p><p><code>istio-egressgateway</code> : ç®¡ç†è¿›å…¥çš„æµé‡</p><p><code>istio-ingressgateway</code> : ç®¡ç†å‡ºå»çš„æµé‡</p><p>istiod</p></blockquote><pre class="line-numbers language-yaml" data-language="yaml"><code class="language-yaml"><span class="token key atrule">piVersion</span><span class="token punctuation">:</span> networking.istio.io/v1alpha3<span class="token key atrule">kind</span><span class="token punctuation">:</span> Gateway  <span class="token comment"># â‘¡ nginx-gw æ˜¯ ingressgateway</span><span class="token key atrule">metadata</span><span class="token punctuation">:</span>   <span class="token key atrule">name</span><span class="token punctuation">:</span> nginx<span class="token punctuation">-</span>gw <span class="token key atrule">spec</span><span class="token punctuation">:</span>  <span class="token key atrule">selector</span><span class="token punctuation">:</span>    <span class="token key atrule">app</span><span class="token punctuation">:</span> istio<span class="token punctuation">-</span>ingressgateway  <span class="token comment"># â‘  istio-ingressgateway æ˜¯é»˜è®¤å·²ç»åˆ›å»ºå¥½çš„istioç½‘å…³æ§åˆ¶å™¨</span>                               <span class="token comment"># å°† ingressgatewayï¼ˆnginx-gwï¼‰å…³è”åˆ° ç½‘å…³ istio-ingressgateway</span>  <span class="token key atrule">servers</span><span class="token punctuation">:</span>  <span class="token punctuation">-</span> <span class="token key atrule">port</span><span class="token punctuation">:</span>      <span class="token key atrule">number</span><span class="token punctuation">:</span> <span class="token number">80</span>      <span class="token key atrule">name</span><span class="token punctuation">:</span> http      <span class="token key atrule">protocol</span><span class="token punctuation">:</span> HTTP    <span class="token key atrule">hosts</span><span class="token punctuation">:</span>    <span class="token punctuation">-</span> nginx.test.com<span class="token punctuation">---</span><span class="token key atrule">apiVersion</span><span class="token punctuation">:</span> networking.istio.io/v1alpha3<span class="token key atrule">kind</span><span class="token punctuation">:</span> VirtualService  <span class="token comment"># â‘¢ virtualservice </span><span class="token key atrule">metadata</span><span class="token punctuation">:</span>  <span class="token key atrule">name</span><span class="token punctuation">:</span> nginx<span class="token punctuation">-</span>vs<span class="token key atrule">spec</span><span class="token punctuation">:</span>  <span class="token key atrule">hosts</span><span class="token punctuation">:</span>  <span class="token punctuation">-</span> nginx.test.com  <span class="token key atrule">gateways</span><span class="token punctuation">:</span>  <span class="token punctuation">-</span> nginx<span class="token punctuation">-</span>gw  <span class="token key atrule">http</span><span class="token punctuation">:</span>  <span class="token punctuation">-</span> <span class="token key atrule">route</span><span class="token punctuation">:</span>    <span class="token punctuation">-</span> <span class="token key atrule">destination</span><span class="token punctuation">:</span>        <span class="token key atrule">host</span><span class="token punctuation">:</span> nginx<span class="token punctuation">-</span>svc<span class="token punctuation">---</span><span class="token key atrule">apiVersion</span><span class="token punctuation">:</span> v1<span class="token key atrule">kind</span><span class="token punctuation">:</span> Service<span class="token key atrule">metadata</span><span class="token punctuation">:</span>  <span class="token key atrule">name</span><span class="token punctuation">:</span> nginx<span class="token punctuation">-</span>svc<span class="token key atrule">spec</span><span class="token punctuation">:</span>  <span class="token key atrule">ports</span><span class="token punctuation">:</span>  <span class="token punctuation">-</span> <span class="token key atrule">port</span><span class="token punctuation">:</span> <span class="token number">80</span>    <span class="token key atrule">protocol</span><span class="token punctuation">:</span> TCP    <span class="token key atrule">targetPort</span><span class="token punctuation">:</span> <span class="token number">80</span>  <span class="token key atrule">selector</span><span class="token punctuation">:</span>    <span class="token key atrule">app</span><span class="token punctuation">:</span> nginx  <span class="token key atrule">type</span><span class="token punctuation">:</span> ClusterIP<span class="token punctuation">---</span><span class="token key atrule">apiVersion</span><span class="token punctuation">:</span> apps/v1<span class="token key atrule">kind</span><span class="token punctuation">:</span> Deployment<span class="token key atrule">metadata</span><span class="token punctuation">:</span>  <span class="token key atrule">labels</span><span class="token punctuation">:</span>    <span class="token key atrule">app</span><span class="token punctuation">:</span> nginx  <span class="token key atrule">name</span><span class="token punctuation">:</span> nginx<span class="token punctuation">-</span>deployment<span class="token key atrule">spec</span><span class="token punctuation">:</span>  <span class="token key atrule">replicas</span><span class="token punctuation">:</span> <span class="token number">1</span>  <span class="token key atrule">selector</span><span class="token punctuation">:</span>    <span class="token key atrule">matchLabels</span><span class="token punctuation">:</span>      <span class="token key atrule">app</span><span class="token punctuation">:</span> nginx  <span class="token key atrule">strategy</span><span class="token punctuation">:</span>    <span class="token key atrule">rollingUpdate</span><span class="token punctuation">:</span>      <span class="token key atrule">maxSurge</span><span class="token punctuation">:</span> 25%      <span class="token key atrule">maxUnavailable</span><span class="token punctuation">:</span> 25%    <span class="token key atrule">type</span><span class="token punctuation">:</span> RollingUpdate  <span class="token key atrule">template</span><span class="token punctuation">:</span>    <span class="token key atrule">metadata</span><span class="token punctuation">:</span>      <span class="token key atrule">labels</span><span class="token punctuation">:</span>        <span class="token key atrule">app</span><span class="token punctuation">:</span> nginx    <span class="token key atrule">spec</span><span class="token punctuation">:</span>      <span class="token key atrule">containers</span><span class="token punctuation">:</span>        <span class="token punctuation">-</span> <span class="token key atrule">image</span><span class="token punctuation">:</span> <span class="token string">'nginx:latest'</span>          <span class="token key atrule">name</span><span class="token punctuation">:</span> nginx<span class="token punctuation">-</span>deployment<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>]]></content>
      
      
      <categories>
          
          <category> å¾®æœåŠ¡ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> istio </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>istioå®ç°é‡‘ä¸é›€å‘å¸ƒ</title>
      <link href="/posts/51490.html"/>
      <url>/posts/51490.html</url>
      
        <content type="html"><![CDATA[<h1 id="1-istioå®ç°ç°åº¦å‘å¸ƒ"><a href="#1-istioå®ç°ç°åº¦å‘å¸ƒ" class="headerlink" title="1 istioå®ç°ç°åº¦å‘å¸ƒ"></a>1 istioå®ç°ç°åº¦å‘å¸ƒ</h1><h2 id="1-1-ä»€ä¹ˆæ˜¯ç°åº¦å‘å¸ƒ"><a href="#1-1-ä»€ä¹ˆæ˜¯ç°åº¦å‘å¸ƒ" class="headerlink" title="1.1 ä»€ä¹ˆæ˜¯ç°åº¦å‘å¸ƒ"></a>1.1 ä»€ä¹ˆæ˜¯ç°åº¦å‘å¸ƒ</h2><ul><li>ç°åº¦å‘å¸ƒä¹Ÿå«é‡‘ä¸é›€éƒ¨ç½² ï¼Œæ˜¯æŒ‡é€šè¿‡æ§åˆ¶æµé‡çš„æ¯”ä¾‹ï¼Œå®ç°æ–°è€ç‰ˆæœ¬çš„é€æ­¥æ›´æ›¿ã€‚<br>æ¯”å¦‚å¯¹äºæœåŠ¡ A æœ‰ version1ã€ version2 ä¸¤ä¸ªç‰ˆæœ¬ ï¼Œ å½“å‰ä¸¤ä¸ªç‰ˆæœ¬åŒæ—¶éƒ¨ç½²ï¼Œä½†æ˜¯ version1 æ¯”ä¾‹<br>90% ï¼Œversion2 æ¯”ä¾‹ 10% ï¼Œçœ‹è¿è¡Œæ•ˆæœï¼Œå¦‚æœæ•ˆæœå¥½é€æ­¥è°ƒæ•´æµé‡å æ¯” 80ï½20 ï¼Œ70ï½<br>30 Â·Â·Â·Â·Â·10ï½90 ï¼Œ0ï¼Œ100 ï¼Œæœ€ç»ˆ version1 ç‰ˆæœ¬ä¸‹çº¿ã€‚</li></ul><h2 id="1-2-ç°åº¦å‘å¸ƒçš„ç‰¹ç‚¹"><a href="#1-2-ç°åº¦å‘å¸ƒçš„ç‰¹ç‚¹" class="headerlink" title="1.2 ç°åº¦å‘å¸ƒçš„ç‰¹ç‚¹"></a>1.2 ç°åº¦å‘å¸ƒçš„ç‰¹ç‚¹</h2><ul><li><p>æ–°è€ç‰ˆæœ¬å…±å­˜</p></li><li><p>å¯ä»¥å®æ—¶æ ¹æ®åé¦ˆåŠ¨æ€è°ƒæ•´å æ¯”</p></li><li><p>ç†è®ºä¸Šä¸å­˜åœ¨æœåŠ¡å®Œå…¨å®•æœºçš„æƒ…å†µ</p></li><li><p>é€‚åˆäºæœåŠ¡çš„å¹³æ»‘å‡çº§ä¸åŠ¨æ€æ›´æ–°</p></li></ul><h2 id="1-3-ä½¿ç”¨istio-å®ç°é‡‘ä¸é›€å‘å¸ƒ"><a href="#1-3-ä½¿ç”¨istio-å®ç°é‡‘ä¸é›€å‘å¸ƒ" class="headerlink" title="1.3 ä½¿ç”¨istio å®ç°é‡‘ä¸é›€å‘å¸ƒ"></a>1.3 ä½¿ç”¨istio å®ç°é‡‘ä¸é›€å‘å¸ƒ</h2><pre class="line-numbers language-none"><code class="language-none">docker load -i canary-v2.tar.gzdocker load -i canary-v1.tar.gz<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre><ul><li><p>åˆ›å»ºé‡‘ä¸é›€æœåŠ¡ </p></li><li><pre><code>cat deployment.yamlï¼Œå†…å®¹å¦‚ä¸‹ï¼š <pre class="line-numbers language-none"><code class="language-none">- &#96;&#96;&#96;yamlapiVersion: apps&#x2F;v1 kind: Deployment metadata:  name: appv1  labels:  app: v1 spec:  replicas: 1  selector:  matchLabels:  app: v1  apply: canary  template:  metadata:  labels:  app: v1  apply: canary  spec:  containers:  - name: nginx  image: xianchao&#x2F;canary:v1  ports:  - containerPort: 80 --- apiVersion: apps&#x2F;v1 kind: Deployment metadata:  name: appv2  labels:  app: v2 spec:  replicas: 1  selector:  matchLabels:  app: v2  apply: canary  template:  metadata:  labels:  app: v2  apply: canary  spec:  containers:  - name: nginx  image: xianchao&#x2F;canary:v2  ports:  - containerPort: 80    <span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></code></pre></li><li><p>æ›´æ–°ï¼š </p></li><li><pre><code class="sh">kubectl apply -f deployment.yaml <pre class="line-numbers language-none"><code class="language-none">- &#96;&#96;&#96;sh  # åˆ›å»º service   cat service.yaml æ–‡ä»¶ï¼Œå†…å®¹å¦‚ä¸‹ï¼š <span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></code></pre></li><li><pre><code class="yaml">apiVersion: v1 kind: Service metadata:  name: canary  labels:  apply: canary spec:  selector:  apply: canary  ports:  - protocol: TCP  port: 80  targetPort: 80  <pre class="line-numbers language-none"><code class="language-none">- &#96;&#96;&#96;sh  # æ›´æ–° service.yaml æ–‡ä»¶   kubectl apply -f service.yaml <span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre></code></pre></li><li><pre><code class="sh"># åˆ›å»º gateway cat gateway.yaml æ–‡ä»¶ï¼Œå†…å®¹å¦‚ä¸‹ï¼š <pre class="line-numbers language-none"><code class="language-none">  - &#96;&#96;&#96;yaml  apiVersion: networking.istio.io&#x2F;v1beta1   kind: Gateway   metadata:    name: canary-gateway   spec:    selector:    istio: ingressgateway    servers:    - port:    number: 80    name: http    protocol: HTTP    hosts:   - &quot;*&quot; <span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></code></pre></li><li><pre><code class="sh"># æ›´æ–° gateway.yaml kubectl apply -f gateway.yaml <pre class="line-numbers language-none"><code class="language-none">- &#96;&#96;&#96;sh  # åˆ›å»º virtualservice   cat virtual.yamlï¼Œå†…å®¹å¦‚ä¸‹ï¼š <span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre></code></pre></li><li><pre><code class="yaml">apiVersion: networking.istio.io/v1beta1 kind: VirtualService metadata:  name: canary spec:  hosts:  - &quot;*&quot;  gateways:  - canary-gateway  http:  - route:  - destination:  host: canary.default.svc.cluster.local  subset: v1  weight: 90  - destination:  host: canary.default.svc.cluster.local  subset: v2  weight: 10 --- apiVersion: networking.istio.io/v1beta1 kind: DestinationRule metadata:  name: canary spec:  host: canary.default.svc.cluster.local  subsets:  - name: v1  labels:  app: v1  - name: v2  labels:  app: v2 <pre class="line-numbers language-none"><code class="language-none">- &#96;&#96;&#96;sh  # æ›´æ–° virtual.yaml æ–‡ä»¶   kubectl apply -f virtual.yaml      <span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></code></pre></li><li><pre><code class="sh"># è·å– Ingress_port: kubectl -n istio-system get service istio-ingressgateway -o jsonpath=&#39;&#123;.spec.ports[?(@.name==&quot;http2&quot;)].nodePort&#125;&#39;  </code></pre></li><li><p>æ˜¾ç¤ºç»“æœæ˜¯ 30871<br>éªŒè¯é‡‘ä¸é›€å‘å¸ƒæ•ˆæœï¼š<br>for i in <code>seq 1 100</code>; do curl 192.168.40.180:30871;done &gt; 1.txt<br>æ‰“å¼€ 1.txt å¯ä»¥çœ‹åˆ°ç»“æœæœ‰ 90 æ¬¡å‡ºç° v1ï¼Œ10 æ¬¡å‡ºç° canary-v2,ç¬¦åˆæˆ‘ä»¬é¢„å…ˆè®¾è®¡çš„æµé‡èµ°å‘ã€‚</p></li></ul>]]></content>
      
      
      <categories>
          
          <category> å¾®æœåŠ¡ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> istio </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>istioéƒ¨ç½²å¾®æœåŠ¡</title>
      <link href="/posts/22626.html"/>
      <url>/posts/22626.html</url>
      
        <content type="html"><![CDATA[<h1 id="istioéƒ¨ç½²å¾®æœåŠ¡"><a href="#istioéƒ¨ç½²å¾®æœåŠ¡" class="headerlink" title="istioéƒ¨ç½²å¾®æœåŠ¡"></a>istioéƒ¨ç½²å¾®æœåŠ¡</h1><h2 id="é¡¹ç›®ä»‹ç»"><a href="#é¡¹ç›®ä»‹ç»" class="headerlink" title="é¡¹ç›®ä»‹ç»"></a>é¡¹ç›®ä»‹ç»</h2><ul><li>è¯¥é¡¹ç›®ç”±å››ä¸ªå¾®æœåŠ¡æ„æˆï¼Œè¿™ä¸ªåº”ç”¨æ¨¡ä»¿åœ¨çº¿ä¹¦åº—çš„ä¸€ä¸ªåˆ†ç±»ï¼Œæ˜¾ç¤ºä¸€æœ¬ä¹¦çš„ä¿¡æ¯</li><li>é¡µé¢ä¸Šä¼šæ˜¾ç¤ºä¸€æœ¬ä¹¦çš„æè¿°ï¼Œä¹¦ç±çš„ç»†èŠ‚ï¼Œä»¥åŠå…³äºè¿™æœ¬ä¹¦çš„è¯„è®º</li><li>Bookinfoåº”ç”¨åˆ†ä¸ºå››ä¸ªå•ç‹¬çš„å¾®æœåŠ¡<ul><li>productpage è¿™ä¸ªæœåŠ¡ä¼šè°ƒç”¨detailå’Œreviewsä¸¤ä¸ªå¾®æœåŠ¡ï¼Œç”¨æ¥ç”Ÿæˆé¡µé¢</li><li>detailè¿™ä¸ªå¾®æœåŠ¡ä¸­åŒ…å«äº†ä¹¦ç±çš„ä¿¡æ¯</li><li>reviewsè¿™ä¸ªå¾®æœåŠ¡åŒ…å«äº†ä¹¦ç±ç›¸å…³çš„è¯„è®ºï¼Œä»–è¿˜ä¼šè°ƒç”¨ratingså¾®æœåŠ¡</li><li>ratingsè¿™ä¸ªå¾®æœåŠ¡åŒ…å«äº†ç”±ä¹¦ç±ç»„æˆçš„è¯„çº§ä¿¡æ¯</li></ul></li><li>reviewsè¿™ä¸ªå¾®æœåŠ¡æœ‰ä¸‰ä¸ªç‰ˆæœ¬<ul><li>v1ç‰ˆæœ¬ä¸ä¼šè°ƒç”¨ratingsæœåŠ¡</li><li>v2ç‰ˆæœ¬è°ƒç”¨ratingsæœåŠ¡ï¼Œå¹¶ä½¿ç”¨1-5ä¸ªé»‘è‰²æ˜Ÿå½¢æ¥è¿›è¡Œè¯„çº§</li><li>v3ç‰ˆæœ¬è°ƒç”¨ratingsæœåŠ¡ï¼Œå¹¶ä½¿ç”¨1-5ä¸ªçº¢è‰²æ˜Ÿå½¢æ¥è¿›è¡Œè¯„çº§</li></ul></li></ul><h2 id="æ³¨å…¥envoy-sidecar"><a href="#æ³¨å…¥envoy-sidecar" class="headerlink" title="æ³¨å…¥envoy sidecar"></a>æ³¨å…¥envoy sidecar</h2><ol><li><p>æ¶æ„è¯´æ˜</p><ul><li>è¦åœ¨istioä¸­è¿è¡Œè¿™ä»¥åº”ç”¨ï¼Œæ— åºå¯¹è‡ªèº«åšå‡ºä»»ä½•æ”¹å˜</li><li>åªè¦ç®€å•çš„åœ¨istioç¯å¢ƒä¸­å¯¹æœåŠ¡è¿›è¡Œé…ç½®å’Œè¿è¡Œï¼Œå…·ä½“ä¸€ç‚¹å°±æ˜¯æŠŠenvoy sidecar æ³¨å…¥åˆ°æ¯ä¸ªæœåŠ¡ä¸­</li><li>æ‰€æœ‰çš„å¾®æœåŠ¡éƒ½å’Œenvoy sidecaré›†æˆåœ¨ä¸€èµ·ï¼Œè¢«é›†æˆæœåŠ¡çš„æ‰€æœ‰æµé‡éƒ½è¢«envoy sidecaråŠ«æŒ</li><li>è¿™æ ·å°±ä¸ºå¤–éƒ¨æ§åˆ¶å‡†å¤‡äº†æ‰€éœ€è¦çš„hook,ç„¶åå°±å¯ä»¥åˆ©ç”¨istioæ§åˆ¶å¹³é¢ä¸ºåº”ç”¨æä¾›æœåŠ¡è·¯ç”±ã€é¥æµ‹æ•°æ®æ”¶é›†ä»¥åŠç­–ç•¥å®æ–½åŠŸèƒ½</li></ul><p><img src="/istio%E9%83%A8%E7%BD%B2%E5%BE%AE%E6%9C%8D%E5%8A%A1/1668224234009.png" alt="1668224234009"></p></li><li><p>æ‰“æ ‡ç­¾æ³¨å…¥</p><ul><li><p>è¿›å…¥istioç›®å½•</p></li><li><p>istioé»˜è®¤è‡ªåŠ¨æ³¨å…¥sidecarï¼Œéœ€è¦ä¸ºdefaultå‘½åç©ºé—´æ‰“ä¸Šæ ‡ç­¾istio-injection&#x3D;enable</p></li><li><p>æ‰“å®Œæ ‡ç­¾åï¼Œdefaultå‘½åç©ºé—´çš„æ‰€æœ‰podéƒ½ä¼šè‡ªåŠ¨æ³¨å…¥sidecarä»£ç†</p></li><li><pre><code>kubectl label namespace default istio-injection=enabled <pre class="line-numbers language-none"><code class="language-none">  -  ä½¿ç”¨kubectléƒ¨ç½²åº”ç”¨- ä¸Šé¢çš„å‘½ä»¤ä¼šå¯åŠ¨å…¨éƒ¨çš„å››ä¸ªæœåŠ¡ï¼Œå…¶ä¸­ä¹ŸåŒ…æ‹¬äº†reviewsæœåŠ¡çš„ä¸‰ä¸ªç‰ˆæœ¬ï¼ˆv1, v2,v3ï¼‰- &#96;&#96;&#96;sh  cd istio-1.10.1   kubectl apply -f samples&#x2F;bookinfo&#x2F;platform&#x2F;kube&#x2F;bookinfo.yaml   <span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></code></pre></li></ul></li><li><p>istio-initå’Œistio-proxy</p><ul><li><p>è¿™ä¸ªæ—¶å€™å†å»çœ‹ä¸‹æ–°çš„podä¿¡æ¯ï¼Œå·²ç»è¢«è‡ªåŠ¨æ³¨å…¥äº†ä»¥ä¸‹ä¸¤ä¸ªå®¹å™¨ï¼šistio-proxyã€istio-init</p></li><li><p>istio-init</p><ul><li>ä½œç”¨æ˜¯é…ç½®iptablesè§„åˆ™ï¼Œå°†å‡ºå…¥ç«™çš„æµé‡äº¤ç»™istio-proxyä»£ç†</li><li>istio-init å®¹å™¨ä¼šåœ¨åº”ç”¨å®¹å™¨å¯åŠ¨ä¹‹å‰è¿è¡Œï¼Œå¹¶ä¸”æ‰§è¡Œå®Œæˆåå°±é€€å‡ºäº†ï¼Œé€šå¸¸ç”¨æ¥å®Œæˆä¸€äº›åˆå§‹åŒ–ä»»åŠ¡</li></ul></li><li><p>istio-proxy</p><ul><li><p>çœŸæ­£çš„sidecar, åŸºäºenvoy å®ç°</p></li><li><p>istio-proxyæ˜¯å¦‚ä½•è·å–åº”ç”¨å®¹å™¨çš„å…¥ç«™å’Œå‡ºç«™æµé‡çš„ï¼Ÿç­”æ¡ˆå°±åœ¨istio-initè¿™ä¸ªå®¹å™¨çš„iptableä¸­</p></li><li><p>iptableä¸­ä¼šå°†å‡ºå…¥æµé‡é‡å®šå‘åˆ°istio-proxyå®¹å™¨å¯¹åº”çš„ç«¯å£</p></li><li><pre><code class="sh">-p 15001 è¡¨ç¤ºå‡ºç«™æµé‡è¢« iptable é‡å®šå‘åˆ° Envoy çš„15001 ç«¯å£-z 15006 è¡¨ç¤ºå…¥ç«™æµé‡è¢« iptable é‡å®šå‘åˆ° Envoy çš„15006 ç«¯å£-u 1337 ç”¨äºæ’é™¤ç”¨æˆ·ID ä¸º1337 å³ istio-proxy è‡ªèº«çš„æµé‡<pre class="line-numbers language-none"><code class="language-none">     ![1668224937623](istioéƒ¨ç½²å¾®æœåŠ¡&#x2F;1668224937623.png)# éƒ¨ç½²æœåŠ¡## bookinfo.yaml&gt; å®˜æ–¹åœ°å€ï¼š&gt;&gt; - https:&#x2F;&#x2F;istio.io&#x2F;latest&#x2F;docs&#x2F;examples&#x2F;bookinfo&#x2F;&gt; - https:&#x2F;&#x2F;raw.githubusercontent.com&#x2F;istio&#x2F;istio&#x2F;release-1.15&#x2F;samples&#x2F;bookinfo&#x2F;platform&#x2F;kube&#x2F;bookinfo.yaml1. detailä¹¦ç±ä¿¡æ¯&#96;&#96;&#96;yaml################################################################################################### Details service##################################################################################################apiVersion: v1kind: Service   # Serviceæœ¬è´¨å°±æ˜¯ä¸€ä¸ªLBè´Ÿè½½å‡è¡¡å™¨metadata:  name: details  labels:    app: details    service: detailsspec:  ports:  - port: 9080    name: http  selector:    app: details---apiVersion: v1kind: ServiceAccount  # ServiceAccountç»™podé‡Œé¢çš„è¿›ç¨‹ä½¿ç”¨ï¼Œä¸ºpodæä¾›å¿…è¦çš„èº«ä»½è®¤è¯metadata:  name: bookinfo-details  labels:    account: details---apiVersion: apps&#x2F;v1kind: Deployment     # Deploymentæ§åˆ¶å™¨ç®¡ç†Podå¯¹è±¡ï¼Œæ»šåŠ¨æ›´æ–°ç­‰metadata:  name: details-v1   # æ§åˆ¶å™¨çš„åå­—æ˜¯ â€œdetails-v1â€  labels:    app: details    version: v1spec:  replicas: 1       # æŒ‡å®š â€œdetails-v1â€è¿™ä¸ªæ§åˆ¶å™¨ç®¡ç†çš„podæ˜¯1ä¸ª  selector:    matchLabels:   # ç»™podæŒ‡å®šæ ‡ç­¾      app: details      version: v1  template:        # ä¸Šé¢æ§åˆ¶å™¨åˆ›å»ºçš„podä½¿ç”¨çš„éƒ½æ˜¯è¿™ä¸ªæ¨¡æ¿æ¥å®šä¹‰çš„    metadata:      labels:        app: details   # æŒ‡å®šåˆ›å»ºçš„podæœ‰é‚£äº›æ ‡ç­¾        version: v1    spec:      serviceAccountName: bookinfo-details      containers:      - name: details  # æŒ‡å®šå®¹å™¨çš„åå­—æ˜¯ details        image: docker.io&#x2F;istio&#x2F;examples-bookinfo-details-v1:1.17.0  # ä½¿ç”¨é•œåƒç‰ˆæœ¬        imagePullPolicy: IfNotPresent        ports:        - containerPort: 9080        securityContext:          runAsUser: 1000---<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></code></pre></li></ul></li></ul></li><li><p>ratingsä¹¦ç±è¯„ä»·</p><pre class="line-numbers language-yaml" data-language="yaml"><code class="language-yaml"><span class="token comment">##################################################################################################</span><span class="token comment"># Ratings service</span><span class="token comment">##################################################################################################</span><span class="token key atrule">apiVersion</span><span class="token punctuation">:</span> v1<span class="token key atrule">kind</span><span class="token punctuation">:</span> Service<span class="token key atrule">metadata</span><span class="token punctuation">:</span>  <span class="token key atrule">name</span><span class="token punctuation">:</span> ratings  <span class="token key atrule">labels</span><span class="token punctuation">:</span>    <span class="token key atrule">app</span><span class="token punctuation">:</span> ratings    <span class="token key atrule">service</span><span class="token punctuation">:</span> ratings<span class="token key atrule">spec</span><span class="token punctuation">:</span>  <span class="token key atrule">ports</span><span class="token punctuation">:</span>  <span class="token punctuation">-</span> <span class="token key atrule">port</span><span class="token punctuation">:</span> <span class="token number">9080</span>    <span class="token key atrule">name</span><span class="token punctuation">:</span> http  <span class="token key atrule">selector</span><span class="token punctuation">:</span>    <span class="token key atrule">app</span><span class="token punctuation">:</span> ratings<span class="token punctuation">---</span><span class="token key atrule">apiVersion</span><span class="token punctuation">:</span> v1<span class="token key atrule">kind</span><span class="token punctuation">:</span> ServiceAccount<span class="token key atrule">metadata</span><span class="token punctuation">:</span>  <span class="token key atrule">name</span><span class="token punctuation">:</span> bookinfo<span class="token punctuation">-</span>ratings  <span class="token key atrule">labels</span><span class="token punctuation">:</span>    <span class="token key atrule">account</span><span class="token punctuation">:</span> ratings<span class="token punctuation">---</span><span class="token key atrule">apiVersion</span><span class="token punctuation">:</span> apps/v1<span class="token key atrule">kind</span><span class="token punctuation">:</span> Deployment<span class="token key atrule">metadata</span><span class="token punctuation">:</span>  <span class="token key atrule">name</span><span class="token punctuation">:</span> ratings<span class="token punctuation">-</span>v1  <span class="token key atrule">labels</span><span class="token punctuation">:</span>    <span class="token key atrule">app</span><span class="token punctuation">:</span> ratings    <span class="token key atrule">version</span><span class="token punctuation">:</span> v1<span class="token key atrule">spec</span><span class="token punctuation">:</span>  <span class="token key atrule">replicas</span><span class="token punctuation">:</span> <span class="token number">1</span>  <span class="token key atrule">selector</span><span class="token punctuation">:</span>    <span class="token key atrule">matchLabels</span><span class="token punctuation">:</span>      <span class="token key atrule">app</span><span class="token punctuation">:</span> ratings      <span class="token key atrule">version</span><span class="token punctuation">:</span> v1  <span class="token key atrule">template</span><span class="token punctuation">:</span>    <span class="token key atrule">metadata</span><span class="token punctuation">:</span>      <span class="token key atrule">labels</span><span class="token punctuation">:</span>        <span class="token key atrule">app</span><span class="token punctuation">:</span> ratings        <span class="token key atrule">version</span><span class="token punctuation">:</span> v1    <span class="token key atrule">spec</span><span class="token punctuation">:</span>      <span class="token key atrule">serviceAccountName</span><span class="token punctuation">:</span> bookinfo<span class="token punctuation">-</span>ratings      <span class="token key atrule">containers</span><span class="token punctuation">:</span>      <span class="token punctuation">-</span> <span class="token key atrule">name</span><span class="token punctuation">:</span> ratings        <span class="token key atrule">image</span><span class="token punctuation">:</span> docker.io/istio/examples<span class="token punctuation">-</span>bookinfo<span class="token punctuation">-</span>ratings<span class="token punctuation">-</span>v1<span class="token punctuation">:</span>1.17.0        <span class="token key atrule">imagePullPolicy</span><span class="token punctuation">:</span> IfNotPresent        <span class="token key atrule">ports</span><span class="token punctuation">:</span>        <span class="token punctuation">-</span> <span class="token key atrule">containerPort</span><span class="token punctuation">:</span> <span class="token number">9080</span>        <span class="token key atrule">securityContext</span><span class="token punctuation">:</span>          <span class="token key atrule">runAsUser</span><span class="token punctuation">:</span> <span class="token number">1000</span><span class="token punctuation">---</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></li><li><p>reviewsä¹¦ç±è¯„è®ºv1,v2, v3</p><pre class="line-numbers language-yaml" data-language="yaml"><code class="language-yaml"><span class="token comment">##################################################################################################</span><span class="token comment"># Reviews service</span><span class="token comment">##################################################################################################</span><span class="token key atrule">apiVersion</span><span class="token punctuation">:</span> v1<span class="token key atrule">kind</span><span class="token punctuation">:</span> Service<span class="token key atrule">metadata</span><span class="token punctuation">:</span>  <span class="token key atrule">name</span><span class="token punctuation">:</span> reviews  <span class="token key atrule">labels</span><span class="token punctuation">:</span>    <span class="token key atrule">app</span><span class="token punctuation">:</span> reviews    <span class="token key atrule">service</span><span class="token punctuation">:</span> reviews<span class="token key atrule">spec</span><span class="token punctuation">:</span>  <span class="token key atrule">ports</span><span class="token punctuation">:</span>  <span class="token punctuation">-</span> <span class="token key atrule">port</span><span class="token punctuation">:</span> <span class="token number">9080</span>    <span class="token key atrule">name</span><span class="token punctuation">:</span> http  <span class="token key atrule">selector</span><span class="token punctuation">:</span>    <span class="token key atrule">app</span><span class="token punctuation">:</span> reviews<span class="token punctuation">---</span><span class="token key atrule">apiVersion</span><span class="token punctuation">:</span> v1<span class="token key atrule">kind</span><span class="token punctuation">:</span> ServiceAccount<span class="token key atrule">metadata</span><span class="token punctuation">:</span>  <span class="token key atrule">name</span><span class="token punctuation">:</span> bookinfo<span class="token punctuation">-</span>reviews  <span class="token key atrule">labels</span><span class="token punctuation">:</span>    <span class="token key atrule">account</span><span class="token punctuation">:</span> reviews<span class="token punctuation">---</span><span class="token key atrule">apiVersion</span><span class="token punctuation">:</span> apps/v1<span class="token key atrule">kind</span><span class="token punctuation">:</span> Deployment<span class="token key atrule">metadata</span><span class="token punctuation">:</span>  <span class="token key atrule">name</span><span class="token punctuation">:</span> reviews<span class="token punctuation">-</span>v1  <span class="token key atrule">labels</span><span class="token punctuation">:</span>    <span class="token key atrule">app</span><span class="token punctuation">:</span> reviews    <span class="token key atrule">version</span><span class="token punctuation">:</span> v1<span class="token key atrule">spec</span><span class="token punctuation">:</span>  <span class="token key atrule">replicas</span><span class="token punctuation">:</span> <span class="token number">1</span>  <span class="token key atrule">selector</span><span class="token punctuation">:</span>    <span class="token key atrule">matchLabels</span><span class="token punctuation">:</span>      <span class="token key atrule">app</span><span class="token punctuation">:</span> reviews      <span class="token key atrule">version</span><span class="token punctuation">:</span> v1  <span class="token key atrule">template</span><span class="token punctuation">:</span>    <span class="token key atrule">metadata</span><span class="token punctuation">:</span>      <span class="token key atrule">labels</span><span class="token punctuation">:</span>        <span class="token key atrule">app</span><span class="token punctuation">:</span> reviews        <span class="token key atrule">version</span><span class="token punctuation">:</span> v1    <span class="token key atrule">spec</span><span class="token punctuation">:</span>      <span class="token key atrule">serviceAccountName</span><span class="token punctuation">:</span> bookinfo<span class="token punctuation">-</span>reviews      <span class="token key atrule">containers</span><span class="token punctuation">:</span>      <span class="token punctuation">-</span> <span class="token key atrule">name</span><span class="token punctuation">:</span> reviews        <span class="token key atrule">image</span><span class="token punctuation">:</span> docker.io/istio/examples<span class="token punctuation">-</span>bookinfo<span class="token punctuation">-</span>reviews<span class="token punctuation">-</span>v1<span class="token punctuation">:</span>1.17.0        <span class="token key atrule">imagePullPolicy</span><span class="token punctuation">:</span> IfNotPresent        <span class="token key atrule">env</span><span class="token punctuation">:</span>        <span class="token punctuation">-</span> <span class="token key atrule">name</span><span class="token punctuation">:</span> LOG_DIR          <span class="token key atrule">value</span><span class="token punctuation">:</span> <span class="token string">"/tmp/logs"</span>        <span class="token key atrule">ports</span><span class="token punctuation">:</span>        <span class="token punctuation">-</span> <span class="token key atrule">containerPort</span><span class="token punctuation">:</span> <span class="token number">9080</span>        <span class="token key atrule">volumeMounts</span><span class="token punctuation">:</span>        <span class="token punctuation">-</span> <span class="token key atrule">name</span><span class="token punctuation">:</span> tmp          <span class="token key atrule">mountPath</span><span class="token punctuation">:</span> /tmp        <span class="token punctuation">-</span> <span class="token key atrule">name</span><span class="token punctuation">:</span> wlp<span class="token punctuation">-</span>output          <span class="token key atrule">mountPath</span><span class="token punctuation">:</span> /opt/ibm/wlp/output        <span class="token key atrule">securityContext</span><span class="token punctuation">:</span>          <span class="token key atrule">runAsUser</span><span class="token punctuation">:</span> <span class="token number">1000</span>      <span class="token key atrule">volumes</span><span class="token punctuation">:</span>      <span class="token punctuation">-</span> <span class="token key atrule">name</span><span class="token punctuation">:</span> wlp<span class="token punctuation">-</span>output        <span class="token key atrule">emptyDir</span><span class="token punctuation">:</span> <span class="token punctuation">&#123;</span><span class="token punctuation">&#125;</span>      <span class="token punctuation">-</span> <span class="token key atrule">name</span><span class="token punctuation">:</span> tmp        <span class="token key atrule">emptyDir</span><span class="token punctuation">:</span> <span class="token punctuation">&#123;</span><span class="token punctuation">&#125;</span><span class="token punctuation">---</span><span class="token key atrule">apiVersion</span><span class="token punctuation">:</span> apps/v1<span class="token key atrule">kind</span><span class="token punctuation">:</span> Deployment<span class="token key atrule">metadata</span><span class="token punctuation">:</span>  <span class="token key atrule">name</span><span class="token punctuation">:</span> reviews<span class="token punctuation">-</span>v2  <span class="token key atrule">labels</span><span class="token punctuation">:</span>    <span class="token key atrule">app</span><span class="token punctuation">:</span> reviews    <span class="token key atrule">version</span><span class="token punctuation">:</span> v2<span class="token key atrule">spec</span><span class="token punctuation">:</span>  <span class="token key atrule">replicas</span><span class="token punctuation">:</span> <span class="token number">1</span>  <span class="token key atrule">selector</span><span class="token punctuation">:</span>    <span class="token key atrule">matchLabels</span><span class="token punctuation">:</span>      <span class="token key atrule">app</span><span class="token punctuation">:</span> reviews      <span class="token key atrule">version</span><span class="token punctuation">:</span> v2  <span class="token key atrule">template</span><span class="token punctuation">:</span>    <span class="token key atrule">metadata</span><span class="token punctuation">:</span>      <span class="token key atrule">labels</span><span class="token punctuation">:</span>        <span class="token key atrule">app</span><span class="token punctuation">:</span> reviews        <span class="token key atrule">version</span><span class="token punctuation">:</span> v2    <span class="token key atrule">spec</span><span class="token punctuation">:</span>      <span class="token key atrule">serviceAccountName</span><span class="token punctuation">:</span> bookinfo<span class="token punctuation">-</span>reviews      <span class="token key atrule">containers</span><span class="token punctuation">:</span>      <span class="token punctuation">-</span> <span class="token key atrule">name</span><span class="token punctuation">:</span> reviews        <span class="token key atrule">image</span><span class="token punctuation">:</span> docker.io/istio/examples<span class="token punctuation">-</span>bookinfo<span class="token punctuation">-</span>reviews<span class="token punctuation">-</span>v2<span class="token punctuation">:</span>1.17.0        <span class="token key atrule">imagePullPolicy</span><span class="token punctuation">:</span> IfNotPresent        <span class="token key atrule">env</span><span class="token punctuation">:</span>        <span class="token punctuation">-</span> <span class="token key atrule">name</span><span class="token punctuation">:</span> LOG_DIR          <span class="token key atrule">value</span><span class="token punctuation">:</span> <span class="token string">"/tmp/logs"</span>        <span class="token key atrule">ports</span><span class="token punctuation">:</span>        <span class="token punctuation">-</span> <span class="token key atrule">containerPort</span><span class="token punctuation">:</span> <span class="token number">9080</span>        <span class="token key atrule">volumeMounts</span><span class="token punctuation">:</span>        <span class="token punctuation">-</span> <span class="token key atrule">name</span><span class="token punctuation">:</span> tmp          <span class="token key atrule">mountPath</span><span class="token punctuation">:</span> /tmp        <span class="token punctuation">-</span> <span class="token key atrule">name</span><span class="token punctuation">:</span> wlp<span class="token punctuation">-</span>output          <span class="token key atrule">mountPath</span><span class="token punctuation">:</span> /opt/ibm/wlp/output        <span class="token key atrule">securityContext</span><span class="token punctuation">:</span>          <span class="token key atrule">runAsUser</span><span class="token punctuation">:</span> <span class="token number">1000</span>      <span class="token key atrule">volumes</span><span class="token punctuation">:</span>      <span class="token punctuation">-</span> <span class="token key atrule">name</span><span class="token punctuation">:</span> wlp<span class="token punctuation">-</span>output        <span class="token key atrule">emptyDir</span><span class="token punctuation">:</span> <span class="token punctuation">&#123;</span><span class="token punctuation">&#125;</span>      <span class="token punctuation">-</span> <span class="token key atrule">name</span><span class="token punctuation">:</span> tmp        <span class="token key atrule">emptyDir</span><span class="token punctuation">:</span> <span class="token punctuation">&#123;</span><span class="token punctuation">&#125;</span><span class="token punctuation">---</span><span class="token key atrule">apiVersion</span><span class="token punctuation">:</span> apps/v1<span class="token key atrule">kind</span><span class="token punctuation">:</span> Deployment<span class="token key atrule">metadata</span><span class="token punctuation">:</span>  <span class="token key atrule">name</span><span class="token punctuation">:</span> reviews<span class="token punctuation">-</span>v3  <span class="token key atrule">labels</span><span class="token punctuation">:</span>    <span class="token key atrule">app</span><span class="token punctuation">:</span> reviews    <span class="token key atrule">version</span><span class="token punctuation">:</span> v3<span class="token key atrule">spec</span><span class="token punctuation">:</span>  <span class="token key atrule">replicas</span><span class="token punctuation">:</span> <span class="token number">1</span>  <span class="token key atrule">selector</span><span class="token punctuation">:</span>    <span class="token key atrule">matchLabels</span><span class="token punctuation">:</span>      <span class="token key atrule">app</span><span class="token punctuation">:</span> reviews      <span class="token key atrule">version</span><span class="token punctuation">:</span> v3  <span class="token key atrule">template</span><span class="token punctuation">:</span>    <span class="token key atrule">metadata</span><span class="token punctuation">:</span>      <span class="token key atrule">labels</span><span class="token punctuation">:</span>        <span class="token key atrule">app</span><span class="token punctuation">:</span> reviews        <span class="token key atrule">version</span><span class="token punctuation">:</span> v3    <span class="token key atrule">spec</span><span class="token punctuation">:</span>      <span class="token key atrule">serviceAccountName</span><span class="token punctuation">:</span> bookinfo<span class="token punctuation">-</span>reviews      <span class="token key atrule">containers</span><span class="token punctuation">:</span>      <span class="token punctuation">-</span> <span class="token key atrule">name</span><span class="token punctuation">:</span> reviews        <span class="token key atrule">image</span><span class="token punctuation">:</span> docker.io/istio/examples<span class="token punctuation">-</span>bookinfo<span class="token punctuation">-</span>reviews<span class="token punctuation">-</span>v3<span class="token punctuation">:</span>1.17.0        <span class="token key atrule">imagePullPolicy</span><span class="token punctuation">:</span> IfNotPresent        <span class="token key atrule">env</span><span class="token punctuation">:</span>        <span class="token punctuation">-</span> <span class="token key atrule">name</span><span class="token punctuation">:</span> LOG_DIR          <span class="token key atrule">value</span><span class="token punctuation">:</span> <span class="token string">"/tmp/logs"</span>        <span class="token key atrule">ports</span><span class="token punctuation">:</span>        <span class="token punctuation">-</span> <span class="token key atrule">containerPort</span><span class="token punctuation">:</span> <span class="token number">9080</span>        <span class="token key atrule">volumeMounts</span><span class="token punctuation">:</span>        <span class="token punctuation">-</span> <span class="token key atrule">name</span><span class="token punctuation">:</span> tmp          <span class="token key atrule">mountPath</span><span class="token punctuation">:</span> /tmp        <span class="token punctuation">-</span> <span class="token key atrule">name</span><span class="token punctuation">:</span> wlp<span class="token punctuation">-</span>output          <span class="token key atrule">mountPath</span><span class="token punctuation">:</span> /opt/ibm/wlp/output        <span class="token key atrule">securityContext</span><span class="token punctuation">:</span>          <span class="token key atrule">runAsUser</span><span class="token punctuation">:</span> <span class="token number">1000</span>      <span class="token key atrule">volumes</span><span class="token punctuation">:</span>      <span class="token punctuation">-</span> <span class="token key atrule">name</span><span class="token punctuation">:</span> wlp<span class="token punctuation">-</span>output        <span class="token key atrule">emptyDir</span><span class="token punctuation">:</span> <span class="token punctuation">&#123;</span><span class="token punctuation">&#125;</span>      <span class="token punctuation">-</span> <span class="token key atrule">name</span><span class="token punctuation">:</span> tmp        <span class="token key atrule">emptyDir</span><span class="token punctuation">:</span> <span class="token punctuation">&#123;</span><span class="token punctuation">&#125;</span><span class="token punctuation">---</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></li><li><p>productpageå‰ç«¯é¡µé¢</p><pre class="line-numbers language-yaml" data-language="yaml"><code class="language-yaml"><span class="token comment">##################################################################################################</span><span class="token comment"># Productpage services</span><span class="token comment">##################################################################################################</span><span class="token key atrule">apiVersion</span><span class="token punctuation">:</span> v1<span class="token key atrule">kind</span><span class="token punctuation">:</span> Service<span class="token key atrule">metadata</span><span class="token punctuation">:</span>  <span class="token key atrule">name</span><span class="token punctuation">:</span> productpage  <span class="token key atrule">labels</span><span class="token punctuation">:</span>    <span class="token key atrule">app</span><span class="token punctuation">:</span> productpage    <span class="token key atrule">service</span><span class="token punctuation">:</span> productpage<span class="token key atrule">spec</span><span class="token punctuation">:</span>  <span class="token key atrule">ports</span><span class="token punctuation">:</span>  <span class="token punctuation">-</span> <span class="token key atrule">port</span><span class="token punctuation">:</span> <span class="token number">9080</span>    <span class="token key atrule">name</span><span class="token punctuation">:</span> http  <span class="token key atrule">selector</span><span class="token punctuation">:</span>    <span class="token key atrule">app</span><span class="token punctuation">:</span> productpage<span class="token punctuation">---</span><span class="token key atrule">apiVersion</span><span class="token punctuation">:</span> v1<span class="token key atrule">kind</span><span class="token punctuation">:</span> ServiceAccount<span class="token key atrule">metadata</span><span class="token punctuation">:</span>  <span class="token key atrule">name</span><span class="token punctuation">:</span> bookinfo<span class="token punctuation">-</span>productpage  <span class="token key atrule">labels</span><span class="token punctuation">:</span>    <span class="token key atrule">account</span><span class="token punctuation">:</span> productpage<span class="token punctuation">---</span><span class="token key atrule">apiVersion</span><span class="token punctuation">:</span> apps/v1<span class="token key atrule">kind</span><span class="token punctuation">:</span> Deployment<span class="token key atrule">metadata</span><span class="token punctuation">:</span>  <span class="token key atrule">name</span><span class="token punctuation">:</span> productpage<span class="token punctuation">-</span>v1  <span class="token key atrule">labels</span><span class="token punctuation">:</span>    <span class="token key atrule">app</span><span class="token punctuation">:</span> productpage    <span class="token key atrule">version</span><span class="token punctuation">:</span> v1<span class="token key atrule">spec</span><span class="token punctuation">:</span>  <span class="token key atrule">replicas</span><span class="token punctuation">:</span> <span class="token number">1</span>  <span class="token key atrule">selector</span><span class="token punctuation">:</span>    <span class="token key atrule">matchLabels</span><span class="token punctuation">:</span>      <span class="token key atrule">app</span><span class="token punctuation">:</span> productpage      <span class="token key atrule">version</span><span class="token punctuation">:</span> v1  <span class="token key atrule">template</span><span class="token punctuation">:</span>    <span class="token key atrule">metadata</span><span class="token punctuation">:</span>      <span class="token key atrule">labels</span><span class="token punctuation">:</span>        <span class="token key atrule">app</span><span class="token punctuation">:</span> productpage        <span class="token key atrule">version</span><span class="token punctuation">:</span> v1    <span class="token key atrule">spec</span><span class="token punctuation">:</span>      <span class="token key atrule">serviceAccountName</span><span class="token punctuation">:</span> bookinfo<span class="token punctuation">-</span>productpage      <span class="token key atrule">containers</span><span class="token punctuation">:</span>      <span class="token punctuation">-</span> <span class="token key atrule">name</span><span class="token punctuation">:</span> productpage        <span class="token key atrule">image</span><span class="token punctuation">:</span> docker.io/istio/examples<span class="token punctuation">-</span>bookinfo<span class="token punctuation">-</span>productpage<span class="token punctuation">-</span>v1<span class="token punctuation">:</span>1.17.0        <span class="token key atrule">imagePullPolicy</span><span class="token punctuation">:</span> IfNotPresent        <span class="token key atrule">ports</span><span class="token punctuation">:</span>        <span class="token punctuation">-</span> <span class="token key atrule">containerPort</span><span class="token punctuation">:</span> <span class="token number">9080</span>        <span class="token key atrule">volumeMounts</span><span class="token punctuation">:</span>        <span class="token punctuation">-</span> <span class="token key atrule">name</span><span class="token punctuation">:</span> tmp          <span class="token key atrule">mountPath</span><span class="token punctuation">:</span> /tmp        <span class="token key atrule">securityContext</span><span class="token punctuation">:</span>          <span class="token key atrule">runAsUser</span><span class="token punctuation">:</span> <span class="token number">1000</span>      <span class="token key atrule">volumes</span><span class="token punctuation">:</span>      <span class="token punctuation">-</span> <span class="token key atrule">name</span><span class="token punctuation">:</span> tmp        <span class="token key atrule">emptyDir</span><span class="token punctuation">:</span> <span class="token punctuation">&#123;</span><span class="token punctuation">&#125;</span><span class="token punctuation">---</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></li></ol><h2 id="bookinfo-gateway-yaml"><a href="#bookinfo-gateway-yaml" class="headerlink" title="bookinfo-gateway.yaml"></a>bookinfo-gateway.yaml</h2><ul><li><p><a href="https://raw.githubusercontent.com/istio/istio/release-1.15/samples/bookinfo/networking/bookinfo-gateway.yaml">https://raw.githubusercontent.com/istio/istio/release-1.15/samples/bookinfo/networking/bookinfo-gateway.yaml</a></p></li><li><p>ç½‘å…³æ¥å—åˆ°è¯·æ±‚åä¼šæŒ‰ç…§è·¯ç”±é…ç½®è½¬å‘åˆ°VirtualServiceè™šæ‹ŸæœåŠ¡</p></li><li><pre><code>$ kubectl apply -f samples/bookinfo/networking/bookinfo-gateway.yaml<pre class="line-numbers language-none"><code class="language-none">- &#96;&#96;&#96;  apiVersion: networking.istio.io&#x2F;v1alpha3  kind: Gateway  # istioçš„ç½‘å…³èµ„æº  metadata:    name: bookinfo-gateway  # ç½‘å…³åå­—(è¿™ä¸ªèµ„æºæ˜¯ ingressgateway)  spec:    selector:      istio: ingressgateway  # ä½¿ç”¨istioé»˜è®¤æ§åˆ¶å™¨(å°†ingressgatewayå…³è”åˆ°istio-ingressgatewayå…¨å±€ç½‘å…³)                             # å¤–ç½‘æ˜¯é€šè¿‡ istio-ingressgateway ç½‘å…³æ¥ä»£ç†æµé‡ç»™ ingressgateway çš„    servers:    - port:        number: 80  # ç½‘å…³ç›‘å¬ç«¯å£        name: http        protocol: HTTP      hosts:      - &quot;*&quot;  ---  apiVersion: networking.istio.io&#x2F;v1alpha3  kind: VirtualService  # VirtualServiceè™šæ‹ŸæœåŠ¡  metadata:    name: bookinfo  spec:    hosts:    - &quot;*&quot;    gateways:    - bookinfo-gateway  # å°†è™šæ‹ŸæœåŠ¡ç»‘å®šåˆ°istio bookinfo-gatewayè¿™ä¸ªç½‘å…³    http:    - match:  # å®šä¹‰åŒ¹é…è§„åˆ™ï¼Œè®¿é—®è¿™äº›urlå°±ä¼šè½¬å‘åˆ° productpageæœåŠ¡      - uri:          exact: &#x2F;productpage      - uri:          prefix: &#x2F;static      - uri:          exact: &#x2F;login      - uri:          exact: &#x2F;logout      - uri:          prefix: &#x2F;api&#x2F;v1&#x2F;products      route:      - destination:          host: productpage  # productpageæ˜¯æœåŠ¡åå­— é»˜è®¤åç¼€æ˜¯ .default.svc.cluster.local          port:            number: 9080  <span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></code></pre></li><li><p>é…ç½®ingressgatewayç½‘å…³</p></li><li><pre><code>kubectl edit svc istio- ingressgateway-n istio-system<pre class="line-numbers language-none"><code class="language-none">- ![1668225417686](istioéƒ¨ç½²å¾®æœåŠ¡&#x2F;1668225417686.png)- æ­¤æ—¶ä½¿ç”¨http:&#x2F;&#x2F;æœ¬æœºåœ°å€&#x2F;productionpage è®¿é—®é¡µé¢## istioæ ¸å¿ƒèµ„æº## gateway- åœ¨kubernetesç¯å¢ƒä¸­ï¼Œingress controlç”¨äºç®¡ç†è¿›å…¥é›†ç¾¤çš„æµé‡- åœ¨istioæœåŠ¡ç½‘æ ¼ä¸­ï¼Œistio ingress gatewayæ‰¿æ‹…å“åº”çš„è§’è‰²- ä»–ä½¿ç”¨æ–°çš„é…ç½®æ¨¡å‹ï¼ˆgateway å’Œvirtualserviceï¼‰å®Œæˆæµé‡ç®¡ç†åŠŸèƒ½-  &#96;ç½‘å…³é…ç½®åº”ç”¨äºåœ¨ç½‘æ ¼è¾¹ç¼˜è¿è¡Œçš„ç‹¬ç«‹ Envoy ä»£ç†&#96;ï¼Œ&#96;è€Œä¸æ˜¯ä¸æœåŠ¡å·¥ä½œè´Ÿè½½ä¸€èµ·è¿è¡Œçš„ Sidecar Envoy ä»£ç†&#96; - æ‰€ä»¥æˆ‘ä»¬é…ç½®çš„ gatewayèµ„æºæŒ‡çš„æ˜¯ ä¸‹å›¾ä¸­çš„ â‘¡ istio-ingressgateway### è®¿é—®æµç¨‹1. ç”¨æˆ·å‘æŸç«¯å£å‘å‡ºè¯·æ±‚2. è´Ÿè½½å‡è¡¡å™¨ç›‘å¬ç«¯å£ï¼Œå¹¶å°†è¯·æ±‚è½¬å‘åˆ°é›†ç¾¤çš„æŸä¸ªèŠ‚ç‚¹ä¸Š   1. istio ingress gateway service ä¼šç›‘å¬é›†ç¾¤èŠ‚ç‚¹ç«¯å£è¯·æ±‚3. istio ingress gate serviceå°†è¯·æ±‚äº¤ç»™ istio ingres gateway podè¯·æ±‚   - ingress gateway pod é€šè¿‡gatewayå’Œvirtualserviceé…ç½®è§„åˆ™å¤„ç†è¯·æ±‚   - å…¶ä¸­ï¼Œ gatewayç”¨æ¥é…ç½®ç«¯å£ï¼Œåè®®å’Œè¯ä¹¦ï¼›virtualserviceç”¨æ¥é…ç½®ä¸€äº›è·¯ç”±ä¿¡æ¯ï¼ˆæ‰¾åˆ°è¯·æ±‚å¯¹åº”å¤„ç†æœåŠ¡app serviceï¼‰4. istio ingress gateway pod å°†è¯·æ±‚è½¬ç»™app service5. æœ€ç»ˆçš„è¯·æ±‚ä¼šäº¤ç»™app servieå…³è”çš„app deploymentå¤„ç†![1668226196017](istioéƒ¨ç½²å¾®æœåŠ¡&#x2F;1668226196017.png)## gateway.yaml-  ç½‘å…³æ˜¯ä¸€ä¸ªè¿è¡Œåœ¨ç½‘æ ¼è¾¹ç¼˜çš„è´Ÿè½½å‡è¡¡å™¨ï¼Œç”¨äºæ¥æ”¶ä¼ å…¥æˆ–ä¼ å‡ºçš„ HTTP&#x2F;TCP è¿æ¥ -  ä¸»è¦å·¥ä½œæ˜¯æ¥å—å¤–éƒ¨è¯·æ±‚ï¼ŒæŠŠè¯·æ±‚è½¬å‘åˆ°å†…éƒ¨æœåŠ¡ - ç½‘æ ¼è¾¹ç¼˜çš„ Ingress æµé‡ï¼Œä¼šé€šè¿‡å¯¹åº”çš„ Istio IngressGateway Controller è¿›å…¥åˆ°é›†ç¾¤å†…éƒ¨ã€‚- åœ¨ä¸Šé¢è¿™ä¸ª yaml é‡Œæˆ‘ä»¬é…ç½®äº†ä¸€ä¸ªç›‘å¬ 80 ç«¯å£çš„å…¥å£ç½‘å…³ï¼Œå®ƒä¼šå°† 80 ç«¯å£çš„ http æµé‡å¯¼å…¥åˆ°é›†ç¾¤å†…å¯¹åº”çš„ Virtual Service ä¸Šã€‚- **istio gatewayå‘Šè¯‰k8s istio-ingressgatewayå¯ä»¥æ‰“å¼€å“ªäº›ç«¯å£**- &#96;&#96;&#96;yaml  apiVersion: networking.istio.io&#x2F;v1beta1  kind: Gateway  metadata:    name: canary-gateway  spec:    selector:      istio: ingressgateway    servers:    - port:        number: 80        name: http        protocol: HTTP      hosts:      - &quot;*&quot;    # *è¡¨ç¤ºé€šé…ç¬¦ï¼Œé€šè¿‡ä»»ä½•åŸŸåéƒ½å¯ä»¥è®¿é—®<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></code></pre></li></ul><h2 id="VirtualService"><a href="#VirtualService" class="headerlink" title="VirtualService"></a>VirtualService</h2><ul><li>VirtualService æ˜¯ Istio æµé‡æ²»ç†çš„ä¸€ä¸ªæ ¸å¿ƒé…ç½®ï¼Œå¯ä»¥è¯´æ˜¯ Istio æµé‡æ²»ç†ä¸­æœ€é‡è¦ã€æœ€å¤æ‚çš„ã€‚</li><li>VirtualService åœ¨å½¢å¼ä¸Šè¡¨ç¤ºä¸€ä¸ªè™šæ‹ŸæœåŠ¡ï¼Œå°†æ»¡è¶³æ¡ä»¶çš„æµé‡éƒ½è½¬å‘åˆ°å¯¹åº”çš„æœåŠ¡åç«¯</li><li>è¿™ä¸ªæœåŠ¡åç«¯å¯ä»¥æ˜¯ä¸€ä¸ªæœåŠ¡ï¼Œä¹Ÿå¯ä»¥æ˜¯åœ¨ DestinationRule ä¸­å®šä¹‰çš„æœåŠ¡çš„å­é›†ã€‚</li></ul><ol><li><h4 id="virtual-yaml"><a href="#virtual-yaml" class="headerlink" title="virtual.yaml"></a>virtual.yaml</h4><ul><li><p>è¿™ä¸ªè™šæ‹ŸæœåŠ¡ä¼šæ”¶åˆ°ä¸Šä¸€ä¸ª gateway ä¸­æ‰€æœ‰ 80 ç«¯å£æ¥çš„ http æµé‡</p></li><li><pre><code class="yaml">apiVersion: networking.istio.io/v1beta1kind: VirtualServicemetadata:  name: canaryspec:  hosts:  - &quot;*&quot;  # *è¡¨ç¤ºé€šé…ç¬¦ï¼Œä»»ä½•åŸŸåéƒ½å¯ä»¥ï¼Œä¹Ÿå¯ä»¥é…ç½®å…·ä½“åŸŸå eg: www.example.com         # 1ï¼‰hostsï¼šè™šæ‹Ÿä¸»æœºåç§°ï¼Œå®ƒæ˜¯å®¢æˆ·ç«¯å‘æœåŠ¡å‘é€è¯·æ±‚æ—¶ä½¿ç”¨çš„ä¸€ä¸ªæˆ–å¤šä¸ªåœ°å€         # é€šè¿‡è¯¥å­—æ®µæä¾›çš„åœ°å€è®¿é—® virtual serviceï¼Œè¿›è€Œè®¿é—®åç«¯æœåŠ¡         # åœ¨é›†ç¾¤å†…éƒ¨(ç½‘æ ¼å†…)ä½¿ç”¨æ—¶é€šå¸¸ä¸ kubernetes çš„ Service åŒå         # å½“éœ€è¦åœ¨é›†ç¾¤å¤–éƒ¨(ç½‘æ ¼å¤–)è®¿é—®æ—¶ï¼Œè¯¥å­—æ®µä¸º gateway è¯·æ±‚çš„åœ°å€ï¼Œå³ä¸ gateway çš„ hosts å­—æ®µç›¸åŒ  gateways:  - canary-gateway  http:  - route:    - destination:        host: canary.default.svc.cluster.local        subset: v1      weight: 90    - destination:        host: canary.default.svc.cluster.local        subset: v2      weight: 10<pre class="line-numbers language-none"><code class="language-none">   - 2. headersåŒ¹é…   &#96;&#96;&#96;yaml   apiVersion: networking.istio.io&#x2F;v1alpha3   kind: VirtualService   metadata:     name: reviews   spec:     hosts:     - reviews     http:     - match:       - headers:             end-user:  # æ­¤è·¯ç”±æ¥æ”¶æ¥è‡ª â€jasonâ€œ ç”¨æˆ·çš„æ‰€æœ‰è¯·æ±‚ï¼ŒæŠŠè¯·æ±‚å‘é€åˆ° destination æŒ‡å®šçš„ v2 å­é›†               exact: jason       route:       - destination:           host: reviews           subset: v2     - route:       - destination:  # ä¸æ»¡è¶³ç¬¬ä¸€ä¸ªè·¯ç”±è§„åˆ™çš„æµé‡å‡æµå‘ä¸€ä¸ªé»˜è®¤çš„ç›®æ ‡ï¼Œç¬¬äºŒæ¡è§„åˆ™æ²¡æœ‰ match æ¡ä»¶ï¼Œç›´æ¥å°†æµé‡å¯¼å‘ v3 å­é›†           host: reviews           subset: v3   <span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></code></pre></li></ul></li><li><p>å¤šè·¯ç”±è§„åˆ™</p><pre class="line-numbers language-none"><code class="language-none">è·¯ç”±è§„åˆ™æ˜¯å°†ç‰¹å®šæµé‡å­é›†è·¯ç”±åˆ°æŒ‡å®šç›®æ ‡åœ°å€çš„å·¥å…·ã€‚å¯ä»¥åœ¨æµé‡ç«¯å£ã€header å­—æ®µã€URI ç­‰å†…å®¹ä¸Šè®¾ç½®åŒ¹é…æ¡ä»¶ã€‚ä¾‹å¦‚ï¼Œä¸‹é¢è¿™ä¸ªè™šæ‹ŸæœåŠ¡è®©ç”¨æˆ·å‘é€è¯·æ±‚åˆ°ä¸¤ä¸ªç‹¬ç«‹çš„æœåŠ¡ï¼šratings å’Œ reviewsï¼Œhttp:&#x2F;&#x2F;bookinfo.com&#x2F;ratings è¯·æ±‚è½¬å‘åˆ° ratings æœåŠ¡http:&#x2F;&#x2F;bookinfo.com&#x2F;reviews è¯·æ±‚è½¬å‘åˆ° reviews æœåŠ¡è™šæ‹ŸæœåŠ¡è§„åˆ™æ ¹æ®è¯·æ±‚çš„ URI æŠŠè¯·æ±‚è·¯ç”±åˆ°ç‰¹å®šçš„ç›®æ ‡åœ°å€<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><pre class="line-numbers language-yaml" data-language="yaml"><code class="language-yaml"><span class="token key atrule">kind</span><span class="token punctuation">:</span> VirtualService<span class="token key atrule">metadata</span><span class="token punctuation">:</span>  <span class="token key atrule">name</span><span class="token punctuation">:</span> bookinfo<span class="token key atrule">spec</span><span class="token punctuation">:</span>  <span class="token key atrule">hosts</span><span class="token punctuation">:</span>    <span class="token punctuation">-</span> bookinfo.com         <span class="token comment"># 1ï¼‰hostsï¼šè™šæ‹Ÿä¸»æœºåç§°ï¼Œå®ƒæ˜¯å®¢æˆ·ç«¯å‘æœåŠ¡å‘é€è¯·æ±‚æ—¶ä½¿ç”¨çš„ä¸€ä¸ªæˆ–å¤šä¸ªåœ°å€</span>         <span class="token comment"># é€šè¿‡è¯¥å­—æ®µæä¾›çš„åœ°å€è®¿é—® virtual serviceï¼Œè¿›è€Œè®¿é—®åç«¯æœåŠ¡</span>         <span class="token comment"># åœ¨é›†ç¾¤å†…éƒ¨(ç½‘æ ¼å†…)ä½¿ç”¨æ—¶é€šå¸¸ä¸ kubernetes çš„ Service åŒå</span>         <span class="token comment"># å½“éœ€è¦åœ¨é›†ç¾¤å¤–éƒ¨(ç½‘æ ¼å¤–)è®¿é—®æ—¶ï¼Œè¯¥å­—æ®µä¸º gateway è¯·æ±‚çš„åœ°å€ï¼Œå³ä¸ gateway çš„ hosts å­—æ®µç›¸åŒ</span>  <span class="token key atrule">http</span><span class="token punctuation">:</span>  <span class="token punctuation">-</span> <span class="token key atrule">match</span><span class="token punctuation">:</span>    <span class="token punctuation">-</span> <span class="token key atrule">uri</span><span class="token punctuation">:</span>         <span class="token key atrule">prefix</span><span class="token punctuation">:</span> /reviews    <span class="token key atrule">route</span><span class="token punctuation">:</span>    <span class="token punctuation">-</span> <span class="token key atrule">destination</span><span class="token punctuation">:</span>        <span class="token key atrule">host</span><span class="token punctuation">:</span> reviews  <span class="token comment"># è·¯ç”±çš„ destination å­—æ®µæŒ‡å®šäº†åŒ¹é…æ¡ä»¶çš„æµé‡çš„å®é™…åœ°å€</span>                       <span class="token comment"># ä¸ virtual service çš„ä¸»æœºä¸åŒï¼Œè¯¥host å¿…é¡»æ˜¯å­˜åœ¨äº istio çš„æœåŠ¡æ³¨å†Œè¡¨</span>                       <span class="token comment"># (å¦‚ kubernetes servicesï¼Œconsul services ç­‰)ä¸­çš„çœŸå®ç›®çš„åœ°æˆ–ç”± ServiceEntries å£°æ˜çš„ hosts</span>                       <span class="token comment"># å¦åˆ™ Envoy ä¸çŸ¥é“åº”è¯¥å°†æµé‡å‘é€åˆ°å“ªé‡Œ</span>  <span class="token punctuation">-</span> <span class="token key atrule">match</span><span class="token punctuation">:</span>    <span class="token punctuation">-</span> <span class="token key atrule">uri</span><span class="token punctuation">:</span>        <span class="token key atrule">prefix</span><span class="token punctuation">:</span> /ratings    <span class="token key atrule">route</span><span class="token punctuation">:</span>    <span class="token punctuation">-</span> <span class="token key atrule">destination</span><span class="token punctuation">:</span>        <span class="token key atrule">host</span><span class="token punctuation">:</span> ratings        <span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></li><li><h3 id="DestinationRule-yaml"><a href="#DestinationRule-yaml" class="headerlink" title="DestinationRule.yaml"></a>DestinationRule.yaml</h3><ul><li>destination rule æ˜¯ istio æµé‡è·¯ç”±åŠŸèƒ½çš„é‡è¦ç»„æˆéƒ¨åˆ†ã€‚</li><li>ä¸€ä¸ª virtual service å¯ä»¥çœ‹ä½œæ˜¯å¦‚ä½•å°†æµé‡åˆ†å‘ç»™ç‰¹å®šçš„ç›®çš„åœ°ï¼Œç„¶åè°ƒç”¨ destination rule æ¥é…ç½®åˆ†å‘åˆ°è¯¥ç›®çš„åœ°çš„æµé‡ã€‚</li><li>destination rule åœ¨ virtual service çš„è·¯ç”±è§„åˆ™ä¹‹åèµ·ä½œç”¨ï¼Œåº”ç”¨äºçœŸå®çš„ç›®çš„åœ°ã€‚<ul><li>(å³åœ¨ virtual service çš„ math-&gt;route-destination ä¹‹åèµ·ä½œç”¨ï¼Œæ­¤æ—¶æµé‡å·²ç»åˆ†å‘åˆ°çœŸå®çš„ service ä¸Š)</li></ul></li><li>å¯ä»¥ä½¿ç”¨ destination rule æ¥æŒ‡å®šå‘½åçš„æœåŠ¡å­é›†ï¼Œä¾‹å¦‚æ ¹æ®ç‰ˆæœ¬å¯¹æœåŠ¡çš„å®ä¾‹è¿›è¡Œåˆ†ç»„</li><li>ç„¶åé€šè¿‡ virtual service çš„è·¯ç”±è§„åˆ™ä¸­çš„æœåŠ¡å­é›†å°†æ§åˆ¶æµé‡åˆ†å‘åˆ°ä¸åŒæœåŠ¡çš„å®ä¾‹ä¸­</li></ul><pre class="line-numbers language-none"><code class="language-none">apiVersion: networking.istio.io&#x2F;v1beta1 kind: DestinationRule metadata:   name: canary spec:   host: canary.default.svc.cluster.local   subsets:   - name: v1     labels:       app: v1   - name: v2     labels:       app: v2<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></li></ol>]]></content>
      
      
      <categories>
          
          <category> å¾®æœåŠ¡ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> istio </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>å¾®æœåŠ¡æ¶æ„</title>
      <link href="/posts/19213.html"/>
      <url>/posts/19213.html</url>
      
        <content type="html"><![CDATA[<h1 id="å¾®æœåŠ¡æ¶æ„ä»‹ç»"><a href="#å¾®æœåŠ¡æ¶æ„ä»‹ç»" class="headerlink" title="å¾®æœåŠ¡æ¶æ„ä»‹ç»"></a>å¾®æœåŠ¡æ¶æ„ä»‹ç»</h1><blockquote><p>å¾®æœåŠ¡æ¶æ„æ˜¯ä¸€ç§æ¶æ„æ¦‚å¿µ</p><p>é€šè¿‡å°†åŠŸèƒ½åˆ†è§£åˆ°ç¦»æ•£çš„æœåŠ¡ä¸­å·²å®ç°å¯¹è§£å†³æ–¹æ¡ˆçš„è§£è€¦ï¼Œ é™ä½è€¦åˆæ€§</p></blockquote><ul><li>æ¦‚å¿µï¼šæŠŠä¸€ä¸ªå¤§å‹çš„ å•ä¸ªåº”ç”¨ç¨‹åºå’ŒæœåŠ¡æ‹†åˆ†ä¸ºæ•°ä¸ªç”šè‡³æ•°åä¸ªæ”¯æŒçš„å¾®æœåŠ¡</li><li>å®šä¹‰ï¼šå›´ç»•ä¸šåŠ¡é¢†åŸŸåˆ›å»ºåº”ç”¨ï¼Œä¸åŒåº”ç”¨å¯ä»¥è¿›è¡Œç‹¬ç«‹å¼€å‘ï¼Œç®¡ç†å’Œè¿­ä»£ã€‚åœ¨åˆ†æ•£çš„ç»„ä»¶ä¸­ä½¿ç”¨äº‘æ¶æ„å’Œå¹³å°å¼éƒ¨ç½²ã€ç®¡ç†å’ŒæœåŠ¡åŠŸèƒ½ï¼Œ ä½¿äº§å“äº¤ä»˜å˜å¾—æ›´åŠ ç®€å•</li><li>æœ¬è´¨ï¼šç”¨ä¸€äº›åŠŸèƒ½æ¯”è¾ƒæ˜ç¡®ã€ä¸šåŠ¡æ¯”è¾ƒç²¾ç‚¼çš„æœåŠ¡å–è§£å†³æ›´å¤§æ›´å®é™…çš„é—®é¢˜</li></ul><h1 id="ä¼ ç»Ÿå¼€å‘æ¨¡å¼å’Œå¾®æœåŠ¡çš„åŒºåˆ«"><a href="#ä¼ ç»Ÿå¼€å‘æ¨¡å¼å’Œå¾®æœåŠ¡çš„åŒºåˆ«" class="headerlink" title="ä¼ ç»Ÿå¼€å‘æ¨¡å¼å’Œå¾®æœåŠ¡çš„åŒºåˆ«"></a>ä¼ ç»Ÿå¼€å‘æ¨¡å¼å’Œå¾®æœåŠ¡çš„åŒºåˆ«</h1><p>ä¼ ç»Ÿå¼€å‘ï¼šå³å•ä½“å¼€å‘ï¼Œæ‰€æœ‰çš„åŠŸèƒ½åœ¨ä¸€ä¸ªtaråŒ…é‡Œ</p><h2 id="ä¼˜ç‚¹ï¼š"><a href="#ä¼˜ç‚¹ï¼š" class="headerlink" title="ä¼˜ç‚¹ï¼š"></a>ä¼˜ç‚¹ï¼š</h2><ul><li>å¼€å‘ç®€å•ï¼Œé›†ä¸­å¼ç®¡ç†</li><li>åŸºæœ¬ä¸ä¼šé‡å¤å¼€å‘</li><li>åŠŸèƒ½éƒ½åœ¨æœ¬åœ°ï¼Œæ²¡æœ‰åˆ†å¸ƒå¼çš„ç®¡ç†å’Œè°ƒç”¨æ¶ˆè€—</li></ul><h2 id="ç¼ºç‚¹"><a href="#ç¼ºç‚¹" class="headerlink" title="ç¼ºç‚¹"></a>ç¼ºç‚¹</h2><ul><li>å¼€å‘æ•ˆç‡ä½ï¼šå¼€å‘éƒ½åœ¨ä¸€ä¸ªé¡¹ç›®æ”¹ä»£ç ï¼Œç›¸äº’ç­‰å¾…ï¼Œå†²çªä¸æ–­</li><li>ç»´æŠ¤éš¾ï¼šåŠŸèƒ½ä¸¥é‡è€¦åˆï¼Œä¸çŸ¥å¦‚ä½•ä¸‹æ‰‹</li><li>ä¸çµæ´»ï¼šæ„å»ºæ—¶é—´é•¿ï¼Œä»»ä½•å°çš„é—®é¢˜éƒ½å¯èƒ½å¯¼è‡´æ•´ä¸ªåº”ç”¨æœåŠ¡æŒ‚æ‰</li><li>ç¨³å®šæ€§å·®ï¼šä¸€ä¸ªå¾®å°çš„é—®é¢˜éƒ½å¯èƒ½å¯¼è‡´æ•´ä¸ªåº”ç”¨æŒ‚æ‰</li><li>æ‰©å±•æ€§å·®ï¼šæ— æ³•æ»¡è¶³é«˜å¹¶å‘ä¸‹çš„ä¸šåŠ¡éœ€æ±‚</li></ul><p><img src="https://zhangtq-blog.oss-cn-hangzhou.aliyuncs.com/content_picture/image-20221124234338253.png" alt="image-20221124234338253"></p><h1 id="ç³»ç»Ÿæ¶æ„éµå¾ªçš„ä¸‰ä¸ªæ ‡å‡†å’Œä¸šåŠ¡é©±åŠ¨åŠ›"><a href="#ç³»ç»Ÿæ¶æ„éµå¾ªçš„ä¸‰ä¸ªæ ‡å‡†å’Œä¸šåŠ¡é©±åŠ¨åŠ›" class="headerlink" title="ç³»ç»Ÿæ¶æ„éµå¾ªçš„ä¸‰ä¸ªæ ‡å‡†å’Œä¸šåŠ¡é©±åŠ¨åŠ›"></a><strong>ç³»ç»Ÿæ¶æ„éµå¾ªçš„ä¸‰ä¸ªæ ‡å‡†å’Œä¸šåŠ¡é©±åŠ¨åŠ›</strong></h1><ul><li>æé«˜æ•æ·æ€§</li><li>æå‡ç”¨æˆ·ä½“éªŒ</li><li>é™ä½æˆæœ¬</li></ul><h1 id="åŸºäºå¾®æœåŠ¡çš„æ¶æ„"><a href="#åŸºäºå¾®æœåŠ¡çš„æ¶æ„" class="headerlink" title="åŸºäºå¾®æœåŠ¡çš„æ¶æ„"></a>åŸºäºå¾®æœåŠ¡çš„æ¶æ„</h1><blockquote><p>ç›®çš„ï¼šæœ‰æ•ˆçš„æ‹†åˆ†åº”ç”¨ï¼Œå®ç°æ•æ·å¼€å‘å’Œéƒ¨ç½²</p></blockquote><p><img src="https://zhangtq-blog.oss-cn-hangzhou.aliyuncs.com/content_picture/image-20221124234424371.png" alt="image-20221124234424371"></p><h2 id="å¾®æœåŠ¡çš„å…·ä½“ç‰¹å¾"><a href="#å¾®æœåŠ¡çš„å…·ä½“ç‰¹å¾" class="headerlink" title="å¾®æœåŠ¡çš„å…·ä½“ç‰¹å¾"></a>å¾®æœåŠ¡çš„å…·ä½“ç‰¹å¾</h2><ul><li>ç‹¬ç«‹çš„æœåŠ¡å…±åŒç»„æˆç³»ç»Ÿï¼Œå®ç°ç»„ä»¶åŒ–</li><li>å•ç‹¬éƒ¨ç½²ï¼Œè·‘åœ¨è‡ªå·±çš„è¿›ç¨‹ä¸­</li><li>æ¯ä¸ªæœåŠ¡ä¸ºç‹¬ç«‹çš„ä¸šåŠ¡å¼€å‘</li><li>åˆ†å¸ƒå¼ç®¡ç†</li><li>å¼ºè°ƒéš”ç¦»æ€§</li></ul><h2 id="å¾®æœåŠ¡çš„æ ‡å‡†"><a href="#å¾®æœåŠ¡çš„æ ‡å‡†" class="headerlink" title="å¾®æœåŠ¡çš„æ ‡å‡†"></a>å¾®æœåŠ¡çš„æ ‡å‡†</h2><ul><li>åˆ†å¸ƒå¼ç»„æˆçš„ç³»ç»Ÿ</li><li>æŒ‰ç…§ä¸šåŠ¡åˆ’åˆ†ï¼Œè€Œä¸æ˜¯æŒ‰ç…§æŠ€æœ¯åˆ’åˆ†ç»„ç»‡</li><li>åšæœ‰ç”Ÿå‘½çš„äº§å“è€Œä¸æ˜¯é¡¹ç›®</li><li>å¼ºæœåŠ¡ä¸ªä½“å’Œè‹¥é€šä¿¡</li><li>è‡ªåŠ¨åŒ–è¿ç»´</li><li>é«˜åº¦å®¹é”™æ€§</li><li>å¿«é€Ÿæ¼”åŒ–å’Œè¿­ä»£</li><li>å»ä¸­å¿ƒåŒ–</li></ul><h1 id="SOAå’Œå¾®æœåŠ¡çš„åŒºåˆ«"><a href="#SOAå’Œå¾®æœåŠ¡çš„åŒºåˆ«" class="headerlink" title="SOAå’Œå¾®æœåŠ¡çš„åŒºåˆ«"></a>SOAå’Œå¾®æœåŠ¡çš„åŒºåˆ«</h1><blockquote><p>soa æ¶æ„ç‰¹ç‚¹ï¼š </p><ol><li>ç³»ç»Ÿé›†æˆï¼Œå°†åŸæœ¬ç½‘çŠ¶ç»“æ„ï¼Œé€šè¿‡ESBæ€»çº¿ï¼Œæ¢³ç†æˆæ˜Ÿå½¢ç»“æ„ è¿™ä¸€æ­¥è§£å†³çš„æ ¸å¿ƒé—®é¢˜æ˜¯ã€æœ‰åºã€‘ </li><li>ç³»ç»Ÿçš„æœåŠ¡åŒ–ï¼š æŠŠåŸå…ˆå›ºæœ‰çš„ä¸šåŠ¡åŠŸèƒ½è½¬å˜ä¸ºé€šç”¨ çš„ä¸šåŠ¡æœåŠ¡ï¼Œå®ç°ä¸šåŠ¡é€»è¾‘çš„å¿«é€Ÿå¤ç”¨ï¼›è¿™ä¸€æ­¥è§£å†³ çš„æ ¸å¿ƒé—®é¢˜æ˜¯ã€å¤ç”¨ã€‘ </li><li>ä¸šåŠ¡çš„æœåŠ¡åŒ–ï¼š ä»¥ä¸šåŠ¡é©±åŠ¨æŠŠä¸€ä¸ªä¸šåŠ¡å•å…ƒå°è£…æˆä¸€é¡¹æœåŠ¡ã€‚è¿™ä¸€æ­¥è§£å†³çš„æ ¸å¿ƒé—®é¢˜æ˜¯ã€é«˜æ•ˆã€‘</li></ol></blockquote><ul><li>soa å–œæ¬¢é‡ç”¨ï¼Œå¾®æœåŠ¡å–œæ¬¢é‡å†™</li><li>soa çœ‹é‡æ°´å¹³ä¸šåŠ¡ï¼Œå¾®æœåŠ¡çœ‹é‡å‚ç›´ä¸šåŠ¡</li><li>soa å–œæ¬¢è‡ªä¸Šè€Œä¸‹ï¼Œå¾®æœåŠ¡å–œæ¬¢è‡ªä¸‹è€Œä¸Š</li></ul><p>ä¸»è¦åŒºåˆ«</p><p><img src="https://zhangtq-blog.oss-cn-hangzhou.aliyuncs.com/content_picture/image-20221124234443285.png" alt="image-20221124234443285"></p><h1 id="å¾®æœåŠ¡å®è·µ"><a href="#å¾®æœåŠ¡å®è·µ" class="headerlink" title="å¾®æœåŠ¡å®è·µ"></a>å¾®æœåŠ¡å®è·µ</h1><p>è¦å®é™…åº”ç”¨å¾®æœåŠ¡ï¼Œè¦è§£å†³ä»¥ä¸‹å››ç‚¹</p><ul><li>å®¢æˆ·ç«¯å¦‚ä½•è®¿é—®å¾®æœåŠ¡</li><li>æ¯ä¸ªå¾®æœåŠ¡ä¹‹é—´å¦‚ä½•é€šä¿¡</li><li>å¦‚æ­¤å¤šçš„å¾®æœåŠ¡ï¼Œå¦‚ä½•å®ç°</li><li>æœåŠ¡æŒ‚äº†å¦‚ä½•è§£å†³ï¼ˆå¤‡ä»½æ–¹æ¡ˆï¼Œåº”æ€¥æœºåˆ¶ï¼‰</li></ul><h2 id="å®¢æˆ·ç«¯å¦‚ä½•è®¿é—®è¿™äº›æœåŠ¡"><a href="#å®¢æˆ·ç«¯å¦‚ä½•è®¿é—®è¿™äº›æœåŠ¡" class="headerlink" title="å®¢æˆ·ç«¯å¦‚ä½•è®¿é—®è¿™äº›æœåŠ¡"></a>å®¢æˆ·ç«¯å¦‚ä½•è®¿é—®è¿™äº›æœåŠ¡</h2><p> ä¸€èˆ¬åœ¨åå°Nä¸ªæœåŠ¡å’ŒUIä¹‹é—´ä¸€èˆ¬ä¼šä¸€ä¸ªä»£ç†æˆ–è€…å«API Gateway ï¼Œä»–çš„ä½œç”¨ï¼š</p><ol><li>æä¾›ç»Ÿä¸€çš„æœåŠ¡å…¥å£ï¼Œè®©å¾®æœåŠ¡å¯¹å‰å°é€æ˜</li><li>èšåˆåå°æœåŠ¡ï¼ŒèŠ‚çœæµé‡ï¼Œæä¸Šæ€§èƒ½</li><li>æä¾›å®‰å…¨ï¼Œè¿‡æ»¤ï¼Œ é™æµç­‰APIç®¡ç†åŠŸèƒ½</li></ol><h2 id="æ¯ä¸ªæœåŠ¡ä¹‹é—´å¦‚ä½•é€šä¿¡"><a href="#æ¯ä¸ªæœåŠ¡ä¹‹é—´å¦‚ä½•é€šä¿¡" class="headerlink" title="æ¯ä¸ªæœåŠ¡ä¹‹é—´å¦‚ä½•é€šä¿¡"></a>æ¯ä¸ªæœåŠ¡ä¹‹é—´å¦‚ä½•é€šä¿¡</h2><p> æ‰€æœ‰çš„å¾®æœåŠ¡éƒ½æ˜¯ç‹¬ç«‹è¿›ç¨‹è·‘åœ¨ç‹¬ç«‹æœºå™¨ä¸Šï¼Œæ‰€ä»¥æœåŠ¡é—´çš„é€šä¿¡å°±æ˜¯IPCï¼ˆinter process communicationï¼‰ é€šå¸¸æœ‰ä»¥ä¸‹ä¸¤ç§æ–¹å¼</p><ul><li><p>åŒæ­¥è°ƒç”¨</p><ul><li>REST</li><li>RPC(Thrift, dubbo)</li></ul></li><li><p>å¼‚æ­¥è°ƒç”¨</p><ul><li>kafka</li><li>notify</li><li>metaQ</li></ul><p><img src="https://zhangtq-blog.oss-cn-hangzhou.aliyuncs.com/content_picture/image-20221124234505712.png" alt="image-20221124234505712"></p></li></ul><blockquote><p>åŒæ­¥è°ƒç”¨æ¯”è¾ƒç®€å•ï¼Œä¸€è‡´æ€§å¼ºï¼Œä½†æ˜¯å®¹æ˜“å‡ºç°è°ƒç”¨é—®é¢˜ï¼Œæ–°èƒ½ä½“éªŒä¸Šä¼šå·®ç‚¹ï¼Œè€Œå¼‚æ­¥è°ƒç”¨çš„æ–¹å¼åœ¨åˆ†å¸ƒå¼ç³»ç»Ÿä¸­æœ‰å¹¿æ³›çš„åº”ç”¨ï¼Œèƒ½å‡æœåŠ¡ä¹‹é—´çš„è€¦åˆï¼Œåˆèƒ½æˆä¸ºè°ƒç”¨ä¹‹é—´çš„ç¼“å†²ï¼Œç¡®ä¿æ¶ˆæ¯ç§¯å‹ä¸ä¼šå†²å®è¢«è°ƒç”¨æ–¹ï¼ŒåŒæ—¶ä¿è¯è°ƒç”¨æ–¹çš„æœåŠ¡ä½“éªŒï¼Œç»§ç»­å¹²è‡ªå·±çš„äº‹æƒ…ï¼Œä¸è‡³äºè¢«åå°æ€§èƒ½æ‹–æ…¢</p><p>ä¸€èˆ¬reståŸºäºhttpï¼Œæ›´å®¹æ˜“å®ç°ï¼Œæ›´å®¹æ˜“è¢«æ¥å—ï¼Œå„ä¸ªè¯­è¨€éƒ½èƒ½æ”¯æŒï¼Œå¯¹å®¢æˆ·ç«¯æ²¡æœ‰è¦æ±‚ï¼Œåªæ˜¯åˆ†è£…äº†hâ€™tâ€™tâ€™pçš„sdkå°±èƒ½è°ƒç”¨</p><p>rpcä¹Ÿæœ‰è‡ªå·±çš„ä¼˜åŠ¿ï¼Œä¼ è¾“æ•ˆç‡æ›´é«˜æ•ˆï¼Œå®‰å…¨æ›´å¯æ§</p></blockquote><h2 id="å¦‚æ­¤å¤šçš„æœåŠ¡å¦‚ä½•å®ç°"><a href="#å¦‚æ­¤å¤šçš„æœåŠ¡å¦‚ä½•å®ç°" class="headerlink" title="å¦‚æ­¤å¤šçš„æœåŠ¡å¦‚ä½•å®ç°"></a>å¦‚æ­¤å¤šçš„æœåŠ¡å¦‚ä½•å®ç°</h2><blockquote><p>åœ¨å¾®æœåŠ¡æ¶æ„ä¸­ï¼Œä¸€èˆ¬æ¯ä¸ªç»„ä»¶éƒ½æœ‰å¤šä¸ªæ‹·è´ç”¨æ¥åšè´Ÿè½½å‡è¡¡ï¼Œä¸€ä¸ªæœåŠ¡éšæ—¶å¯èƒ½ä¸‹çº¿ï¼Œä¹Ÿå¯èƒ½éšæ—¶é¢ä¸´è®¿é—®å‹åŠ›å¢åŠ æ–°çš„æœåŠ¡èŠ‚ç‚¹ï¼ŒæœåŠ¡ä¹‹é—´å¦‚ä½•æ„ŸçŸ¥ï¼ŒæœåŠ¡å¦‚ä½•ç®¡ç†ï¼Ÿ</p><p>è¿™å°±æ˜¯å¾®æœåŠ¡å‘ç°é—®é¢˜</p></blockquote><p>å¾®æœåŠ¡å‘ç°ä¸€èˆ¬æœ‰ä¸¤ç±»åšæ³•</p><p>é€šè¿‡zookkeeperç­‰ç±»ä¼¼æ¡†æ¶åšæœåŠ¡æ³¨å†Œä¿¡æ¯çš„åˆ†å¸ƒå¼ç®¡ç†ï¼Œå½“æœåŠ¡ä¸Šçº¿æ—¶ï¼ŒæœåŠ¡æä¾›è‡ªå·±çš„æœåŠ¡ä¿¡æ¯æ³¨å†Œåˆ°zookeeper,å¹¶ä¸”é€šè¿‡å¿ƒè·³ç»´æŒé•¿é“¾æ¥ï¼Œè°ƒç”¨è¿™é€šè¿‡zkå¯»å€æ ¹æ®å®šåˆ¶ç®—æ³•æ‰¾åˆ°ä¸€ä¸ªæœåŠ¡ï¼Œå½“æœåŠ¡ä¸‹çº¿æ—¶ï¼Œzkä¼šå‘é€šçŸ¥ç»™å®¢æˆ·ç«¯</p><ul><li>é€šè¿‡å®¢æˆ·ç«¯åšï¼Œ ä¼˜ç‚¹æ˜¯æ¶æ„ç®€å•ï¼Œæ‰©å±•çµæ´»ï¼Œåªå¯¹æœåŠ¡æ³¨å†Œå™¨ä¾èµ–ï¼Œç¼ºç‚¹æ˜¯å®¢æˆ·ç«¯è¦ç»´æŠ¤æ‰€æœ‰è°ƒç”¨æœåŠ¡åœ°å€ï¼Œæœ‰æŠ€æœ¯éš¾åº¦ï¼Œä¸€èˆ¬å¤§å…¬å¸éƒ½æœ‰æˆç†Ÿçš„æŠ€æœ¯æ¡†æ¶æ”¯æŒæ¯”å¦‚dubbo</li><li>é€šè¿‡æœåŠ¡ç«¯åšï¼Œä¼˜ç‚¹æ˜¯ç®€å•æ‰€æœ‰æœåŠ¡å¯¹å‰å°è°ƒç”¨æ–¹é€æ˜</li></ul><p><img src="https://zhangtq-blog.oss-cn-hangzhou.aliyuncs.com/content_picture/image-20221124234524482.png" alt="image-20221124234524482"></p><h1 id="æœåŠ¡æŒ‚äº†ï¼Œå¦‚ä½•è§£å†³"><a href="#æœåŠ¡æŒ‚äº†ï¼Œå¦‚ä½•è§£å†³" class="headerlink" title="æœåŠ¡æŒ‚äº†ï¼Œå¦‚ä½•è§£å†³"></a>æœåŠ¡æŒ‚äº†ï¼Œå¦‚ä½•è§£å†³</h1><ul><li>é‡è¯•</li><li>é™æµ</li><li>ç†”æ–­</li><li>è´Ÿè½½å‡è¡¡</li><li>é™çº§ï¼ˆæœ¬åœ°ç¼“å­˜ï¼‰</li></ul>]]></content>
      
      
      <categories>
          
          <category> å¾®æœåŠ¡ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> å¾®æœåŠ¡ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>redis</title>
      <link href="/posts/44296.html"/>
      <url>/posts/44296.html</url>
      
        <content type="html"><![CDATA[<h1 id="reids-åŸºç¡€"><a href="#reids-åŸºç¡€" class="headerlink" title="reids åŸºç¡€"></a>reids åŸºç¡€</h1><p>åç»­è¡¥å……</p><p>ååˆ†å£«å¤§å¤«ä½†æ˜¯</p><p>é˜¿å‡¡è¾¾å‘è¾¾å‘è¾¾</p><p>é˜¿è¿ªæ–¯å‘ç¬¬ä¸‰æ–¹</p><p>çˆ±ä¸ŠèŒƒå¾·è¨å‘å¤§æ°´</p><p>é˜¿è¨èŒƒå¾·è¨å‘</p><p>å•Šå‘æ’’æ‰“å‘</p><p>é˜¿é£å€’è¨å•Šå‘</p><p>å•Šå‘æ’’æ‰“å‘</p><p>é˜¿å‡¡è¾¾æ˜¯å¦</p><p>é˜¿å‡¡è¾¾çš„æ”¾å¤§</p><p>å®‰æŠšæ‰“å‘æ‰“å‘</p><p>å®‰æŠšå¤§ä½¿æ³•å¤§å¸ˆå‚…</p>]]></content>
      
      
      <categories>
          
          <category> redis </category>
          
      </categories>
      
      
        <tags>
            
            <tag> redis </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>leetcodeç®—æ³•é¢˜I</title>
      <link href="/posts/46634.html"/>
      <url>/posts/46634.html</url>
      
        <content type="html"><![CDATA[<h1 id="å¸¸è§ç®—æ³•é¢˜"><a href="#å¸¸è§ç®—æ³•é¢˜" class="headerlink" title="å¸¸è§ç®—æ³•é¢˜"></a>å¸¸è§ç®—æ³•é¢˜</h1><h2 id="æ±‚ä¸¤æ•°ä¹‹å’Œ"><a href="#æ±‚ä¸¤æ•°ä¹‹å’Œ" class="headerlink" title="æ±‚ä¸¤æ•°ä¹‹å’Œ"></a>æ±‚ä¸¤æ•°ä¹‹å’Œ</h2><blockquote><p>ç»™å®šä¸€ä¸ªæ•´æ•°æ•°ç»„ nums å’Œä¸€ä¸ªæ•´æ•°ç›®æ ‡å€¼ targetï¼Œè¯·ä½ åœ¨è¯¥æ•°ç»„ä¸­æ‰¾å‡º å’Œä¸ºç›®æ ‡å€¼ target  çš„é‚£ ä¸¤ä¸ª æ•´æ•°ï¼Œå¹¶è¿”å›å®ƒä»¬çš„æ•°ç»„ä¸‹æ ‡ã€‚ä½ å¯ä»¥å‡è®¾æ¯ç§è¾“å…¥åªä¼šå¯¹åº”ä¸€ä¸ªç­”æ¡ˆã€‚ä½†æ˜¯ï¼Œæ•°ç»„ä¸­åŒä¸€ä¸ªå…ƒç´ åœ¨ç­”æ¡ˆé‡Œä¸èƒ½é‡å¤å‡ºç°ã€‚ä½ å¯ä»¥æŒ‰ä»»æ„é¡ºåºè¿”å›ç­”æ¡ˆã€‚</p></blockquote><pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token comment"># class Solution:</span><span class="token comment">#     def twoSum(self, nums: List[int], target: int) -> List[int]:</span><span class="token comment">#         #for num in nums:</span><span class="token comment">#         #    other = target - num</span><span class="token comment">#         for i in range(len(nums)):</span><span class="token comment">#             other = target - nums[i]</span><span class="token comment">#             for j in range(i+1, len(nums)):</span><span class="token comment">#                 if nums[j] == other:</span><span class="token comment">#                     return [i, j]</span><span class="token comment">#         return None</span><span class="token keyword">class</span> <span class="token class-name">Solution</span><span class="token punctuation">:</span>    <span class="token keyword">def</span> <span class="token function">twoSum</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> nums<span class="token punctuation">:</span> List<span class="token punctuation">[</span><span class="token builtin">int</span><span class="token punctuation">]</span><span class="token punctuation">,</span> target<span class="token punctuation">:</span> <span class="token builtin">int</span><span class="token punctuation">)</span> <span class="token operator">-</span><span class="token operator">></span> List<span class="token punctuation">[</span><span class="token builtin">int</span><span class="token punctuation">]</span><span class="token punctuation">:</span>        tmp <span class="token operator">=</span> <span class="token builtin">dict</span><span class="token punctuation">(</span><span class="token punctuation">)</span>        <span class="token keyword">for</span> index<span class="token punctuation">,</span> val <span class="token keyword">in</span> <span class="token builtin">enumerate</span><span class="token punctuation">(</span>nums<span class="token punctuation">)</span><span class="token punctuation">:</span>            other <span class="token operator">=</span> target<span class="token operator">-</span>val            <span class="token keyword">if</span> other <span class="token keyword">in</span> tmp<span class="token punctuation">:</span>                <span class="token keyword">return</span> tmp<span class="token punctuation">[</span>other<span class="token punctuation">]</span><span class="token punctuation">,</span> index            tmp<span class="token punctuation">[</span>val<span class="token punctuation">]</span> <span class="token operator">=</span> index        <span class="token keyword">return</span> <span class="token boolean">None</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h2 id="æ— é‡å¤æœ€é•¿å­—ä¸²"><a href="#æ— é‡å¤æœ€é•¿å­—ä¸²" class="headerlink" title="æ— é‡å¤æœ€é•¿å­—ä¸²"></a>æ— é‡å¤æœ€é•¿å­—ä¸²</h2><blockquote><p> ç»™å®šä¸€ä¸ªå­—ç¬¦ä¸² <code>s</code> ï¼Œè¯·ä½ æ‰¾å‡ºå…¶ä¸­ä¸å«æœ‰é‡å¤å­—ç¬¦çš„ <strong>æœ€é•¿å­ä¸²</strong> çš„é•¿åº¦ã€‚ </p></blockquote><pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token comment"># æ»‘åŠ¨çª—å£æ³•</span><span class="token keyword">class</span> <span class="token class-name">Solution</span><span class="token punctuation">:</span>    <span class="token keyword">def</span> <span class="token function">lengthOfLongestSubstring</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> s<span class="token punctuation">:</span> <span class="token builtin">str</span><span class="token punctuation">)</span> <span class="token operator">-</span><span class="token operator">></span> <span class="token builtin">int</span><span class="token punctuation">:</span>        l <span class="token operator">=</span> r <span class="token operator">=</span> <span class="token number">0</span>        tmp <span class="token operator">=</span> <span class="token builtin">set</span><span class="token punctuation">(</span><span class="token punctuation">)</span>        max_num <span class="token operator">=</span> <span class="token number">0</span>        <span class="token keyword">for</span> i <span class="token keyword">in</span> <span class="token builtin">range</span><span class="token punctuation">(</span><span class="token builtin">len</span><span class="token punctuation">(</span>s<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">:</span>            <span class="token comment"># é‡å¤åè¦å»é™¤é‡å¤å…ƒç´ ä»¥åŠé‡å¤å…ƒç´ ä¹‹å‰çš„ï¼ŒåŒæ—¶l + 1</span>            <span class="token keyword">if</span> i<span class="token operator">!=</span><span class="token number">0</span><span class="token punctuation">:</span>                tmp<span class="token punctuation">.</span>remove<span class="token punctuation">(</span>s<span class="token punctuation">[</span>i<span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">)</span>                l <span class="token operator">+=</span> <span class="token number">1</span>            <span class="token keyword">while</span> r<span class="token operator">&lt;</span> <span class="token builtin">len</span><span class="token punctuation">(</span>s<span class="token punctuation">)</span> <span class="token keyword">and</span> s<span class="token punctuation">[</span>r<span class="token punctuation">]</span> <span class="token keyword">not</span> <span class="token keyword">in</span> tmp<span class="token punctuation">:</span> <span class="token comment"># ä¸é‡å¤åŠ å…¥</span>                tmp<span class="token punctuation">.</span>add<span class="token punctuation">(</span>s<span class="token punctuation">[</span>r<span class="token punctuation">]</span><span class="token punctuation">)</span>                r<span class="token operator">+=</span><span class="token number">1</span>                            <span class="token keyword">print</span><span class="token punctuation">(</span>tmp<span class="token punctuation">)</span>            max_num <span class="token operator">=</span> <span class="token builtin">max</span><span class="token punctuation">(</span>r<span class="token operator">-</span>l<span class="token punctuation">,</span> max_num<span class="token punctuation">)</span>        <span class="token keyword">return</span> max_num<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h2 id="zå­—å½¢å˜æ¢"><a href="#zå­—å½¢å˜æ¢" class="headerlink" title="zå­—å½¢å˜æ¢"></a>zå­—å½¢å˜æ¢</h2><blockquote><p>å°†ä¸€ä¸ªç»™å®šå­—ç¬¦ä¸² s æ ¹æ®ç»™å®šçš„è¡Œæ•° numRows ï¼Œä»¥ä»ä¸Šå¾€ä¸‹ã€ä»å·¦åˆ°å³è¿›è¡Œ Z å­—å½¢æ’åˆ—ã€‚</p><p>æ¯”å¦‚è¾“å…¥å­—ç¬¦ä¸²ä¸º â€œPAYPALISHIRINGâ€ è¡Œæ•°ä¸º 3 æ—¶ï¼Œæ’åˆ—å¦‚ä¸‹ï¼š</p><p>P   A   H   N<br>A P L S I I G<br>Y   I   R<br>ä¹‹åï¼Œä½ çš„è¾“å‡ºéœ€è¦ä»å·¦å¾€å³é€è¡Œè¯»å–ï¼Œäº§ç”Ÿå‡ºä¸€ä¸ªæ–°çš„å­—ç¬¦ä¸²ï¼Œæ¯”å¦‚ï¼šâ€PAHNAPLSIIGYIRâ€ã€‚</p></blockquote><pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token keyword">def</span> <span class="token function">solution</span><span class="token punctuation">(</span>s<span class="token punctuation">,</span> rows<span class="token punctuation">)</span><span class="token punctuation">:</span>    <span class="token triple-quoted-string string">"""    æ¨¡æ‹ŸäºŒç»´çŸ©é˜µ    çŸ©é˜µå¦‚ä½•åˆå§‹åŒ–    å¦‚ä½•æ¨¡æ‹Ÿ    å‘ä¸Šå–æ•´é€šç”¨åšæ³• int((a+b -1) /b)        æ¯ä¸ªå‘¨æœŸä¸º 2r -2, æ¯ä¸ªå‘¨æœŸå†…çš„åˆ—æ•°ä¸ºr-1    """</span>    n<span class="token punctuation">,</span> r <span class="token operator">=</span> <span class="token builtin">len</span><span class="token punctuation">(</span>s<span class="token punctuation">)</span><span class="token punctuation">,</span> numRows    <span class="token keyword">if</span> r <span class="token operator">&lt;</span><span class="token number">2</span><span class="token punctuation">:</span>        <span class="token keyword">return</span> s    t <span class="token operator">=</span> <span class="token number">2</span><span class="token operator">*</span> r<span class="token operator">-</span><span class="token number">2</span>    <span class="token comment"># æ ¹æ®å‘¨æœŸæ±‚åˆ—æ•°  ï¼Œæ¯ä¸ªå‘¨æœŸå†…çš„åˆ—æ•°ä¸ºr-1åˆ—</span>    c <span class="token operator">=</span> <span class="token punctuation">(</span>r<span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span> <span class="token operator">*</span> <span class="token builtin">int</span><span class="token punctuation">(</span><span class="token punctuation">(</span>n <span class="token operator">+</span>t <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token operator">/</span>t<span class="token punctuation">)</span>    <span class="token comment"># åˆå§‹åŒ–æ•°ç»„</span>    dp <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">[</span><span class="token string">""</span><span class="token punctuation">]</span><span class="token operator">*</span>c <span class="token keyword">for</span> _ <span class="token keyword">in</span> <span class="token builtin">range</span><span class="token punctuation">(</span>r<span class="token punctuation">)</span><span class="token punctuation">]</span>    x<span class="token punctuation">,</span> y <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span>    <span class="token keyword">for</span> index_<span class="token punctuation">,</span> ss <span class="token keyword">in</span> <span class="token builtin">enumerate</span><span class="token punctuation">(</span>s<span class="token punctuation">)</span><span class="token punctuation">:</span>        dp<span class="token punctuation">[</span>x<span class="token punctuation">]</span><span class="token punctuation">[</span>y<span class="token punctuation">]</span> <span class="token operator">=</span> ss        <span class="token keyword">if</span> index_<span class="token operator">%</span>t <span class="token operator">&lt;</span> r<span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">:</span>            x<span class="token operator">+=</span><span class="token number">1</span>            <span class="token keyword">else</span><span class="token punctuation">:</span>                x <span class="token operator">-=</span> <span class="token number">1</span>                y <span class="token operator">+=</span> <span class="token number">1</span>                    <span class="token keyword">return</span>   <span class="token string">""</span><span class="token punctuation">.</span>join<span class="token punctuation">(</span><span class="token punctuation">[</span>ch <span class="token keyword">for</span> list1 <span class="token keyword">in</span> dp <span class="token keyword">for</span> ch <span class="token keyword">in</span> list1 <span class="token keyword">if</span> ch <span class="token operator">!=</span><span class="token string">""</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h2 id="æ•°å­—åè½¬"><a href="#æ•°å­—åè½¬" class="headerlink" title="æ•°å­—åè½¬"></a>æ•°å­—åè½¬</h2><p>ç»™ä½ ä¸€ä¸ª 32 ä½çš„æœ‰ç¬¦å·æ•´æ•° x ï¼Œè¿”å›å°† x ä¸­çš„æ•°å­—éƒ¨åˆ†åè½¬åçš„ç»“æœã€‚</p><p>å¦‚æœåè½¬åæ•´æ•°è¶…è¿‡ 32 ä½çš„æœ‰ç¬¦å·æ•´æ•°çš„èŒƒå›´ [âˆ’231,  231 âˆ’ 1] ï¼Œå°±è¿”å› 0ã€‚</p><pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token keyword">class</span> <span class="token class-name">Solution</span><span class="token punctuation">:</span>    <span class="token keyword">def</span> <span class="token function">reverse</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> x<span class="token punctuation">:</span> <span class="token builtin">int</span><span class="token punctuation">)</span> <span class="token operator">-</span><span class="token operator">></span> <span class="token builtin">int</span><span class="token punctuation">:</span>        <span class="token triple-quoted-string string">"""        é™¤10æ¯æ¬¡å–è¯ï¼Œç›´åˆ°è¢«é™¤æ•°&lt;10ä¸ºæ­¢        """</span>        <span class="token comment"># if x&lt; -(2&lt;&lt;31) or x >(2&lt;&lt;31 - 1):</span>        <span class="token comment">#     return 0</span>        y<span class="token punctuation">,</span> res <span class="token operator">=</span> <span class="token builtin">abs</span><span class="token punctuation">(</span>x<span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token number">0</span>        <span class="token keyword">while</span> y <span class="token operator">!=</span><span class="token number">0</span> <span class="token punctuation">:</span>            <span class="token keyword">if</span> res <span class="token operator">&lt;</span> <span class="token operator">-</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token operator">&lt;&lt;</span><span class="token number">30</span><span class="token punctuation">)</span><span class="token operator">/</span><span class="token number">10</span> <span class="token keyword">or</span> res<span class="token operator">></span> <span class="token punctuation">(</span><span class="token number">2</span><span class="token operator">&lt;&lt;</span><span class="token number">30</span><span class="token punctuation">)</span><span class="token operator">/</span><span class="token number">10</span><span class="token punctuation">:</span>                <span class="token keyword">return</span> <span class="token number">0</span>            res <span class="token operator">=</span> res<span class="token operator">*</span><span class="token number">10</span> <span class="token operator">+</span> y<span class="token operator">%</span><span class="token number">10</span>            y <span class="token operator">//=</span><span class="token number">10</span>        <span class="token keyword">return</span> res <span class="token keyword">if</span> x<span class="token operator">>=</span><span class="token number">0</span> <span class="token keyword">else</span> <span class="token number">0</span><span class="token operator">-</span>res<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h2 id="æ•´æ•°è½¬ç½—é©¬æ•°ç»„"><a href="#æ•´æ•°è½¬ç½—é©¬æ•°ç»„" class="headerlink" title="æ•´æ•°è½¬ç½—é©¬æ•°ç»„"></a>æ•´æ•°è½¬ç½—é©¬æ•°ç»„</h2><blockquote><p>ç½—é©¬æ•°å­—åŒ…å«ä»¥ä¸‹ä¸ƒç§å­—ç¬¦ï¼š Iï¼Œ Vï¼Œ Xï¼Œ Lï¼ŒCï¼ŒD å’Œ Mã€‚</p><p>å­—ç¬¦          æ•°å€¼<br>I             1<br>V             5<br>X             10<br>L             50<br>C             100<br>D             500<br>M             1000<br>ä¾‹å¦‚ï¼Œ ç½—é©¬æ•°å­— 2 å†™åš II ï¼Œå³ä¸ºä¸¤ä¸ªå¹¶åˆ—çš„ 1ã€‚12 å†™åš XII ï¼Œå³ä¸º X + II ã€‚ 27 å†™åš  XXVII, å³ä¸º XX + V + II ã€‚</p><p>é€šå¸¸æƒ…å†µä¸‹ï¼Œç½—é©¬æ•°å­—ä¸­å°çš„æ•°å­—åœ¨å¤§çš„æ•°å­—çš„å³è¾¹ã€‚ä½†ä¹Ÿå­˜åœ¨ç‰¹ä¾‹ï¼Œä¾‹å¦‚ 4 ä¸å†™åš IIIIï¼Œè€Œæ˜¯ IVã€‚æ•°å­— 1 åœ¨æ•°å­— 5 çš„å·¦è¾¹ï¼Œæ‰€è¡¨ç¤ºçš„æ•°ç­‰äºå¤§æ•° 5 å‡å°æ•° 1 å¾—åˆ°çš„æ•°å€¼ 4 ã€‚åŒæ ·åœ°ï¼Œæ•°å­— 9 è¡¨ç¤ºä¸º IXã€‚è¿™ä¸ªç‰¹æ®Šçš„è§„åˆ™åªé€‚ç”¨äºä»¥ä¸‹å…­ç§æƒ…å†µï¼š</p><p>I å¯ä»¥æ”¾åœ¨ V (5) å’Œ X (10) çš„å·¦è¾¹ï¼Œæ¥è¡¨ç¤º 4 å’Œ 9ã€‚<br>X å¯ä»¥æ”¾åœ¨ L (50) å’Œ C (100) çš„å·¦è¾¹ï¼Œæ¥è¡¨ç¤º 40 å’Œ 90ã€‚<br>C å¯ä»¥æ”¾åœ¨ D (500) å’Œ M (1000) çš„å·¦è¾¹ï¼Œæ¥è¡¨ç¤º 400 å’Œ 900ã€‚<br>ç»™ä½ ä¸€ä¸ªæ•´æ•°ï¼Œå°†å…¶è½¬ä¸ºç½—é©¬æ•°å­—ã€‚</p></blockquote><pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token keyword">class</span> <span class="token class-name">Solution</span><span class="token punctuation">:</span>    <span class="token keyword">def</span> <span class="token function">intToRoman</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> num<span class="token punctuation">:</span> <span class="token builtin">int</span><span class="token punctuation">)</span> <span class="token operator">-</span><span class="token operator">></span> <span class="token builtin">str</span><span class="token punctuation">:</span>                list2 <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">(</span><span class="token number">1000</span><span class="token punctuation">,</span> <span class="token string">'M'</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token number">900</span><span class="token punctuation">,</span> <span class="token string">'CM'</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token number">500</span><span class="token punctuation">,</span> <span class="token string">'D'</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token number">400</span><span class="token punctuation">,</span> <span class="token string">'CD'</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token number">100</span><span class="token punctuation">,</span> <span class="token string">'C'</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token number">90</span><span class="token punctuation">,</span> <span class="token string">'XC'</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token number">50</span><span class="token punctuation">,</span> <span class="token string">'L'</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token number">40</span><span class="token punctuation">,</span> <span class="token string">'XL'</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">,</span> <span class="token string">'X'</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token number">9</span><span class="token punctuation">,</span> <span class="token string">'IX'</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token number">5</span><span class="token punctuation">,</span> <span class="token string">'V'</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token number">4</span><span class="token punctuation">,</span> <span class="token string">'IV'</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token string">'I'</span><span class="token punctuation">)</span><span class="token punctuation">]</span>        str1 <span class="token operator">=</span> <span class="token string">""</span>        <span class="token keyword">for</span> index_<span class="token punctuation">,</span>  <span class="token punctuation">(</span>n<span class="token punctuation">,</span> ch<span class="token punctuation">)</span> <span class="token keyword">in</span> <span class="token builtin">enumerate</span><span class="token punctuation">(</span>list2<span class="token punctuation">)</span><span class="token punctuation">:</span>            <span class="token keyword">while</span> num <span class="token operator">>=</span> n<span class="token punctuation">:</span>                v <span class="token operator">=</span> num <span class="token operator">//</span> n                str1 <span class="token operator">+=</span> v<span class="token operator">*</span>ch                num <span class="token operator">=</span> num <span class="token operator">%</span> n        <span class="token keyword">return</span> str1<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h2 id="æ•°å­—è½¬ç½—é©¬æ•°å­—"><a href="#æ•°å­—è½¬ç½—é©¬æ•°å­—" class="headerlink" title="æ•°å­—è½¬ç½—é©¬æ•°å­—"></a>æ•°å­—è½¬ç½—é©¬æ•°å­—</h2><blockquote><p>ç½—é©¬æ•°å­—åŒ…å«ä»¥ä¸‹ä¸ƒç§å­—ç¬¦: Iï¼Œ Vï¼Œ Xï¼Œ Lï¼ŒCï¼ŒD å’Œ Mã€‚</p></blockquote><p>å­—ç¬¦          æ•°å€¼<br>I             1<br>V             5<br>X             10<br>L             50<br>C             100<br>D             500<br>M             1000<br>ä¾‹å¦‚ï¼Œ ç½—é©¬æ•°å­— 2 å†™åš II ï¼Œå³ä¸ºä¸¤ä¸ªå¹¶åˆ—çš„ 1 ã€‚12 å†™åš XII ï¼Œå³ä¸º X + II ã€‚ 27 å†™åš  XXVII, å³ä¸º XX + V + II ã€‚</p><p>é€šå¸¸æƒ…å†µä¸‹ï¼Œç½—é©¬æ•°å­—ä¸­å°çš„æ•°å­—åœ¨å¤§çš„æ•°å­—çš„å³è¾¹ã€‚ä½†ä¹Ÿå­˜åœ¨ç‰¹ä¾‹ï¼Œä¾‹å¦‚ 4 ä¸å†™åš IIIIï¼Œè€Œæ˜¯ IVã€‚æ•°å­— 1 åœ¨æ•°å­— 5 çš„å·¦è¾¹ï¼Œæ‰€è¡¨ç¤ºçš„æ•°ç­‰äºå¤§æ•° 5 å‡å°æ•° 1 å¾—åˆ°çš„æ•°å€¼ 4 ã€‚åŒæ ·åœ°ï¼Œæ•°å­— 9 è¡¨ç¤ºä¸º IXã€‚è¿™ä¸ªç‰¹æ®Šçš„è§„åˆ™åªé€‚ç”¨äºä»¥ä¸‹å…­ç§æƒ…å†µï¼š</p><p>I å¯ä»¥æ”¾åœ¨ V (5) å’Œ X (10) çš„å·¦è¾¹ï¼Œæ¥è¡¨ç¤º 4 å’Œ 9ã€‚<br>X å¯ä»¥æ”¾åœ¨ L (50) å’Œ C (100) çš„å·¦è¾¹ï¼Œæ¥è¡¨ç¤º 40 å’Œ 90ã€‚<br>C å¯ä»¥æ”¾åœ¨ D (500) å’Œ M (1000) çš„å·¦è¾¹ï¼Œæ¥è¡¨ç¤º 400 å’Œ 900ã€‚<br>ç»™å®šä¸€ä¸ªç½—é©¬æ•°å­—ï¼Œå°†å…¶è½¬æ¢æˆæ•´æ•°ã€‚</p><pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token keyword">class</span> <span class="token class-name">Solution</span><span class="token punctuation">:</span>    <span class="token keyword">def</span> <span class="token function">romanToInt</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> s<span class="token punctuation">:</span> <span class="token builtin">str</span><span class="token punctuation">)</span> <span class="token operator">-</span><span class="token operator">></span> <span class="token builtin">int</span><span class="token punctuation">:</span>        list1 <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">(</span><span class="token string">'M'</span><span class="token punctuation">,</span> <span class="token number">1000</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token string">'CM'</span><span class="token punctuation">,</span> <span class="token number">900</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token string">'D'</span><span class="token punctuation">,</span> <span class="token number">500</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token string">'CD'</span><span class="token punctuation">,</span> <span class="token number">400</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token string">'C'</span><span class="token punctuation">,</span> <span class="token number">100</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token string">'XC'</span><span class="token punctuation">,</span> <span class="token number">90</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token string">'L'</span><span class="token punctuation">,</span> <span class="token number">50</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token string">'XL'</span><span class="token punctuation">,</span> <span class="token number">40</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token string">'X'</span><span class="token punctuation">,</span> <span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token string">'IX'</span><span class="token punctuation">,</span> <span class="token number">9</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token string">'V'</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token string">'IV'</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token string">'I'</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">]</span>        num <span class="token operator">=</span> <span class="token number">0</span>        <span class="token keyword">for</span> _<span class="token punctuation">,</span><span class="token punctuation">(</span>ch<span class="token punctuation">,</span> n<span class="token punctuation">)</span> <span class="token keyword">in</span> <span class="token builtin">enumerate</span><span class="token punctuation">(</span>list1<span class="token punctuation">)</span><span class="token punctuation">:</span>            <span class="token keyword">while</span> s<span class="token punctuation">.</span>startswith<span class="token punctuation">(</span>ch<span class="token punctuation">)</span><span class="token punctuation">:</span>                num <span class="token operator">+=</span> n                s <span class="token operator">=</span> s<span class="token punctuation">[</span><span class="token builtin">len</span><span class="token punctuation">(</span>ch<span class="token punctuation">)</span><span class="token punctuation">:</span><span class="token punctuation">]</span>        <span class="token keyword">return</span> num<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h2 id="æœ€é•¿å…¬å…±å‰ç¼€"><a href="#æœ€é•¿å…¬å…±å‰ç¼€" class="headerlink" title="æœ€é•¿å…¬å…±å‰ç¼€"></a>æœ€é•¿å…¬å…±å‰ç¼€</h2><pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token keyword">class</span> <span class="token class-name">Solution</span><span class="token punctuation">:</span>    <span class="token keyword">def</span> <span class="token function">longestCommonPrefix</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> strs<span class="token punctuation">:</span> List<span class="token punctuation">[</span><span class="token builtin">str</span><span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token operator">-</span><span class="token operator">></span> <span class="token builtin">str</span><span class="token punctuation">:</span>        first_ch <span class="token operator">=</span> strs<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span>        j <span class="token operator">=</span> <span class="token number">0</span>        res <span class="token operator">=</span> <span class="token string">""</span>        <span class="token keyword">while</span> j <span class="token operator">&lt;</span> <span class="token builtin">len</span><span class="token punctuation">(</span>first_ch<span class="token punctuation">)</span><span class="token punctuation">:</span>            ch <span class="token operator">=</span> first_ch<span class="token punctuation">[</span>j<span class="token punctuation">]</span>            tag <span class="token operator">=</span> <span class="token boolean">True</span>            <span class="token keyword">for</span> s <span class="token keyword">in</span> strs<span class="token punctuation">:</span>                <span class="token keyword">if</span> <span class="token builtin">len</span><span class="token punctuation">(</span>s<span class="token punctuation">)</span><span class="token operator">&lt;=</span> j <span class="token keyword">or</span> ch <span class="token operator">!=</span> s<span class="token punctuation">[</span>j<span class="token punctuation">]</span><span class="token punctuation">:</span>                    tag <span class="token operator">=</span> <span class="token boolean">False</span>            <span class="token keyword">if</span> tag<span class="token punctuation">:</span>                res <span class="token operator">+=</span> ch            <span class="token keyword">else</span><span class="token punctuation">:</span>                <span class="token keyword">break</span>            j <span class="token operator">+=</span><span class="token number">1</span>         <span class="token keyword">return</span> res<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h2 id="ä¸‰æ•°ä¹‹å’Œ"><a href="#ä¸‰æ•°ä¹‹å’Œ" class="headerlink" title="ä¸‰æ•°ä¹‹å’Œ"></a>ä¸‰æ•°ä¹‹å’Œ</h2><blockquote><p>ç»™ä½ ä¸€ä¸ªæ•´æ•°æ•°ç»„ nums ï¼Œåˆ¤æ–­æ˜¯å¦å­˜åœ¨ä¸‰å…ƒç»„ [nums[i], nums[j], nums[k]] æ»¡è¶³ i !&#x3D; jã€i !&#x3D; k ä¸” j !&#x3D; k ï¼ŒåŒæ—¶è¿˜æ»¡è¶³ nums[i] + nums[j] + nums[k] &#x3D;&#x3D; 0 ã€‚è¯·</p><p>ä½ è¿”å›æ‰€æœ‰å’Œä¸º 0 ä¸”ä¸é‡å¤çš„ä¸‰å…ƒç»„ã€‚</p><p>æ³¨æ„ï¼šç­”æ¡ˆä¸­ä¸å¯ä»¥åŒ…å«é‡å¤çš„ä¸‰å…ƒç»„ã€‚</p></blockquote><p><strong>æ’åº+åŒæŒ‡é’ˆ+å‰ªæ</strong></p><pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token keyword">class</span> <span class="token class-name">Solution</span><span class="token punctuation">:</span>    <span class="token keyword">def</span> <span class="token function">threeSum</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> nums<span class="token punctuation">:</span> List<span class="token punctuation">[</span><span class="token builtin">int</span><span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token operator">-</span><span class="token operator">></span> List<span class="token punctuation">[</span>List<span class="token punctuation">[</span><span class="token builtin">int</span><span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">:</span>        <span class="token comment"># æ’åºï¼Œ é˜²æ­¢é‡å¤</span>        nums<span class="token punctuation">.</span>sort<span class="token punctuation">(</span><span class="token punctuation">)</span>        n <span class="token operator">=</span> <span class="token builtin">len</span><span class="token punctuation">(</span>nums<span class="token punctuation">)</span>        tmp <span class="token operator">=</span> <span class="token builtin">list</span><span class="token punctuation">(</span><span class="token punctuation">)</span>        <span class="token keyword">for</span> i <span class="token keyword">in</span> <span class="token builtin">range</span><span class="token punctuation">(</span>n<span class="token punctuation">)</span><span class="token punctuation">:</span>                        first <span class="token operator">=</span> nums<span class="token punctuation">[</span>i<span class="token punctuation">]</span>            <span class="token keyword">if</span> i <span class="token operator">></span><span class="token number">0</span> <span class="token keyword">and</span> nums<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">==</span> nums<span class="token punctuation">[</span>i<span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">:</span>                <span class="token keyword">continue</span>            target <span class="token operator">=</span> <span class="token operator">-</span>first            <span class="token comment"># å‰ååŒæŒ‡é’ˆ</span>            left <span class="token operator">=</span> i <span class="token operator">+</span><span class="token number">1</span>            right <span class="token operator">=</span> n<span class="token operator">-</span><span class="token number">1</span>            <span class="token keyword">while</span> left <span class="token operator">&lt;</span> right<span class="token punctuation">:</span>                <span class="token comment"># å¦‚æœæœ‰é‡å¤çš„åˆ™å¿½ç•¥</span>                second <span class="token operator">=</span> nums<span class="token punctuation">[</span>left<span class="token punctuation">]</span>                third <span class="token operator">=</span> nums<span class="token punctuation">[</span>right<span class="token punctuation">]</span>                <span class="token keyword">if</span> second <span class="token operator">+</span> third <span class="token operator">==</span> target<span class="token punctuation">:</span>                    tmp<span class="token punctuation">.</span>append<span class="token punctuation">(</span><span class="token punctuation">[</span>first<span class="token punctuation">,</span> second<span class="token punctuation">,</span> third<span class="token punctuation">]</span><span class="token punctuation">)</span>                    <span class="token comment">#åˆ¤æ–­æ˜¯å¦æœ‰ç›¸åŒçš„å…ƒç´ ï¼Œ</span>                    <span class="token keyword">while</span> left <span class="token operator">&lt;</span> right <span class="token keyword">and</span> nums<span class="token punctuation">[</span>left<span class="token punctuation">]</span> <span class="token operator">==</span> nums<span class="token punctuation">[</span>left <span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">:</span>                        left <span class="token operator">+=</span><span class="token number">1</span>                    <span class="token keyword">while</span> left <span class="token operator">&lt;</span> right <span class="token keyword">and</span> nums<span class="token punctuation">[</span>right<span class="token punctuation">]</span> <span class="token operator">==</span> nums<span class="token punctuation">[</span>right <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">:</span>                        right <span class="token operator">-=</span> <span class="token number">1</span>                <span class="token keyword">if</span> second <span class="token operator">+</span>third <span class="token operator">></span> target<span class="token punctuation">:</span>                    right <span class="token operator">-=</span> <span class="token number">1</span>                    <span class="token keyword">continue</span>                <span class="token keyword">if</span> second <span class="token operator">+</span> third <span class="token operator">&lt;</span> target<span class="token punctuation">:</span>                    left <span class="token operator">+=</span> <span class="token number">1</span>                    <span class="token keyword">continue</span>                left <span class="token operator">+=</span> <span class="token number">1</span>                right <span class="token operator">-=</span> <span class="token number">1</span>        <span class="token keyword">return</span> tmp<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h2 id="æœ€æ¥è¿‘çš„ä¸‰æ•°ä¹‹å’Œ-leetcode-16"><a href="#æœ€æ¥è¿‘çš„ä¸‰æ•°ä¹‹å’Œ-leetcode-16" class="headerlink" title="æœ€æ¥è¿‘çš„ä¸‰æ•°ä¹‹å’Œ-leetcode 16"></a>æœ€æ¥è¿‘çš„ä¸‰æ•°ä¹‹å’Œ-leetcode 16</h2><blockquote><p>ç»™ä½ ä¸€ä¸ªé•¿åº¦ä¸º n çš„æ•´æ•°æ•°ç»„ nums å’Œ ä¸€ä¸ªç›®æ ‡å€¼ targetã€‚è¯·ä½ ä» nums ä¸­é€‰å‡ºä¸‰ä¸ªæ•´æ•°ï¼Œä½¿å®ƒä»¬çš„å’Œä¸ target æœ€æ¥è¿‘ã€‚</p><p>è¿”å›è¿™ä¸‰ä¸ªæ•°çš„å’Œã€‚</p><p>å‡å®šæ¯ç»„è¾“å…¥åªå­˜åœ¨æ°å¥½ä¸€ä¸ªè§£</p></blockquote><p><strong>æ’åº+åŒæŒ‡é’ˆ</strong></p><pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token keyword">class</span> <span class="token class-name">Solution</span><span class="token punctuation">:</span>    <span class="token keyword">def</span> <span class="token function">threeSumClosest</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> nums<span class="token punctuation">:</span> List<span class="token punctuation">[</span><span class="token builtin">int</span><span class="token punctuation">]</span><span class="token punctuation">,</span> target<span class="token punctuation">:</span> <span class="token builtin">int</span><span class="token punctuation">)</span> <span class="token operator">-</span><span class="token operator">></span> <span class="token builtin">int</span><span class="token punctuation">:</span>        nums<span class="token punctuation">.</span>sort<span class="token punctuation">(</span><span class="token punctuation">)</span>        min_num <span class="token operator">=</span> <span class="token number">10</span><span class="token operator">**</span><span class="token number">5</span>        <span class="token keyword">for</span> i <span class="token keyword">in</span> <span class="token builtin">range</span><span class="token punctuation">(</span><span class="token builtin">len</span><span class="token punctuation">(</span>nums<span class="token punctuation">)</span><span class="token operator">-</span><span class="token number">1</span> <span class="token punctuation">)</span><span class="token punctuation">:</span>            left<span class="token punctuation">,</span> right <span class="token operator">=</span> i <span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token builtin">len</span><span class="token punctuation">(</span>nums<span class="token punctuation">)</span><span class="token operator">-</span><span class="token number">1</span>                        <span class="token keyword">while</span> left <span class="token operator">&lt;</span> right<span class="token punctuation">:</span>                cur_target <span class="token operator">=</span> nums<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">+</span> nums<span class="token punctuation">[</span>left<span class="token punctuation">]</span> <span class="token operator">+</span> nums<span class="token punctuation">[</span>right<span class="token punctuation">]</span>                <span class="token keyword">if</span> <span class="token builtin">abs</span><span class="token punctuation">(</span>target<span class="token operator">-</span>cur_target<span class="token punctuation">)</span> <span class="token operator">&lt;</span> <span class="token builtin">abs</span><span class="token punctuation">(</span>target<span class="token operator">-</span>min_num<span class="token punctuation">)</span><span class="token punctuation">:</span>                    min_num <span class="token operator">=</span> cur_target                <span class="token keyword">if</span> cur_target <span class="token operator">==</span> target<span class="token punctuation">:</span>                    <span class="token keyword">return</span> cur_target                                <span class="token keyword">elif</span> cur_target <span class="token operator">&lt;</span> target<span class="token punctuation">:</span>                    left <span class="token operator">+=</span> <span class="token number">1</span>                <span class="token keyword">else</span><span class="token punctuation">:</span>                    right <span class="token operator">-=</span> <span class="token number">1</span>        <span class="token keyword">return</span> min_num<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h2 id="ä¸¤æ•°ç›¸é™¤"><a href="#ä¸¤æ•°ç›¸é™¤" class="headerlink" title="ä¸¤æ•°ç›¸é™¤"></a>ä¸¤æ•°ç›¸é™¤</h2><blockquote><p>å®šä¸¤ä¸ªæ•´æ•°ï¼Œè¢«é™¤æ•° dividend å’Œé™¤æ•° divisorã€‚å°†ä¸¤æ•°ç›¸é™¤ï¼Œè¦æ±‚ä¸ä½¿ç”¨ä¹˜æ³•ã€é™¤æ³•å’Œ mod è¿ç®—ç¬¦ã€‚</p><p>è¿”å›è¢«é™¤æ•° dividend é™¤ä»¥é™¤æ•° divisor å¾—åˆ°çš„å•†ã€‚</p><p>æ•´æ•°é™¤æ³•çš„ç»“æœåº”å½“æˆªå»ï¼ˆtruncateï¼‰å…¶å°æ•°éƒ¨åˆ†ï¼Œä¾‹å¦‚ï¼štruncate(8.345) &#x3D; 8 ä»¥åŠ truncate(-2.7335) &#x3D; -2</p></blockquote><pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token keyword">class</span> <span class="token class-name">Solution</span><span class="token punctuation">:</span>    <span class="token comment"># æ­¤æ–¹æ³•ä¼šè¶…æ—¶</span>    <span class="token comment"># def divide(self, dividend: int, divisor: int) -> int:</span>    <span class="token comment">#     # ç”±äºå–å€¼èŒƒå›´æ˜¯[âˆ’2**31,  2**31 âˆ’ 1] æ‰€ä»¥åŒä¸€ä½¿ç”¨è´Ÿæ•°æ¥å¤„ç†æº¢å‡ºé—®é¢˜</span>    <span class="token comment">#     flag = False  # æ˜¯å¦éœ€è¦åŠ è´Ÿå·</span>    <span class="token comment">#     if (dividend >0 and divisor &lt; 0) or (dividend &lt;0 and divisor >0):</span>    <span class="token comment">#         flag = True</span>    <span class="token comment">#     dividend = abs(dividend)</span>    <span class="token comment">#     divisor = abs(divisor)</span>    <span class="token comment">#     num = 0</span>    <span class="token comment">#     while divisor  &lt;= dividend:</span>    <span class="token comment">#         dividend -= divisor</span>    <span class="token comment">#         num -=1</span>    <span class="token comment">#     if num == (-2)**31:</span>    <span class="token comment">#         return 2**31-1</span>    <span class="token comment">#     else:</span>    <span class="token comment">#         return num if flag else -num</span>    <span class="token keyword">def</span> <span class="token function">divide</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> dividend<span class="token punctuation">:</span> <span class="token builtin">int</span><span class="token punctuation">,</span> divisor<span class="token punctuation">:</span> <span class="token builtin">int</span><span class="token punctuation">)</span> <span class="token operator">-</span><span class="token operator">></span> <span class="token builtin">int</span><span class="token punctuation">:</span>        <span class="token comment">#     # x &lt;&lt; i, å·¦ç§»ç›¸å½“äº x* 2^i</span>    <span class="token comment">#     # x >> i, å³ç§»ç›¸å½“äº x/ 2^i</span>        flag <span class="token operator">=</span> <span class="token punctuation">(</span>dividend <span class="token operator">&lt;</span><span class="token number">0</span><span class="token punctuation">)</span> <span class="token operator">!=</span> <span class="token punctuation">(</span>divisor<span class="token operator">&lt;</span><span class="token number">0</span><span class="token punctuation">)</span>        <span class="token keyword">print</span><span class="token punctuation">(</span>flag<span class="token punctuation">)</span>        limit <span class="token operator">=</span> <span class="token number">2</span><span class="token operator">**</span><span class="token number">31</span><span class="token operator">-</span><span class="token number">1</span>        dividend <span class="token operator">=</span> <span class="token builtin">abs</span><span class="token punctuation">(</span>dividend<span class="token punctuation">)</span>        divisor <span class="token operator">=</span> <span class="token builtin">abs</span><span class="token punctuation">(</span>divisor<span class="token punctuation">)</span>        res<span class="token punctuation">,</span>  div <span class="token punctuation">,</span> tmp <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">,</span> divisor<span class="token punctuation">,</span> <span class="token number">1</span>        <span class="token keyword">while</span> dividend <span class="token operator">>=</span>divisor<span class="token punctuation">:</span>            <span class="token keyword">while</span> dividend <span class="token operator">></span> <span class="token punctuation">(</span>div<span class="token operator">&lt;&lt;</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">:</span>                div <span class="token operator">&lt;&lt;</span><span class="token operator">=</span><span class="token number">1</span>                tmp <span class="token operator">&lt;&lt;</span><span class="token operator">=</span><span class="token number">1</span>            dividend <span class="token operator">-=</span> div            div <span class="token operator">=</span> divisor            res <span class="token operator">+=</span>tmp            tmp <span class="token operator">=</span> <span class="token number">1</span>                    <span class="token keyword">if</span> flag<span class="token punctuation">:</span>            res <span class="token operator">=</span> <span class="token operator">-</span>res        <span class="token keyword">print</span><span class="token punctuation">(</span>res<span class="token punctuation">,</span> <span class="token string">"res"</span><span class="token punctuation">)</span>                <span class="token keyword">if</span> res <span class="token operator">-</span><span class="token number">2</span><span class="token operator">**</span><span class="token number">31</span> <span class="token operator">&lt;=</span>res <span class="token operator">&lt;=</span><span class="token number">2</span><span class="token operator">**</span><span class="token number">31</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">:</span>            <span class="token keyword">return</span> res        <span class="token keyword">else</span><span class="token punctuation">:</span>            <span class="token keyword">return</span> limit<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h2 id="æœç´¢èºæ—‹æ’åºæ•°ç»„"><a href="#æœç´¢èºæ—‹æ’åºæ•°ç»„" class="headerlink" title="æœç´¢èºæ—‹æ’åºæ•°ç»„"></a>æœç´¢èºæ—‹æ’åºæ•°ç»„</h2><blockquote><p>æ•´æ•°æ•°ç»„ nums æŒ‰å‡åºæ’åˆ—ï¼Œæ•°ç»„ä¸­çš„å€¼ äº’ä¸ç›¸åŒ ã€‚</p><p>åœ¨ä¼ é€’ç»™å‡½æ•°ä¹‹å‰ï¼Œnums åœ¨é¢„å…ˆæœªçŸ¥çš„æŸä¸ªä¸‹æ ‡ kï¼ˆ0 &lt;&#x3D; k &lt; nums.lengthï¼‰ä¸Šè¿›è¡Œäº† æ—‹è½¬ï¼Œä½¿æ•°ç»„å˜ä¸º [nums[k], nums[k+1], â€¦, nums[n-1], nums[0], nums[1], â€¦, nums[k-1]]ï¼ˆä¸‹æ ‡ ä» 0 å¼€å§‹ è®¡æ•°ï¼‰ã€‚ä¾‹å¦‚ï¼Œ [0,1,2,4,5,6,7] åœ¨ä¸‹æ ‡ 3 å¤„ç»æ—‹è½¬åå¯èƒ½å˜ä¸º [4,5,6,7,0,1,2] ã€‚</p><p>ç»™ä½  æ—‹è½¬å çš„æ•°ç»„ nums å’Œä¸€ä¸ªæ•´æ•° target ï¼Œå¦‚æœ nums ä¸­å­˜åœ¨è¿™ä¸ªç›®æ ‡å€¼ target ï¼Œåˆ™è¿”å›å®ƒçš„ä¸‹æ ‡ï¼Œå¦åˆ™è¿”å› -1 ã€‚</p><p>ä½ å¿…é¡»è®¾è®¡ä¸€ä¸ªæ—¶é—´å¤æ‚åº¦ä¸º O(log n) çš„ç®—æ³•è§£å†³æ­¤é—®é¢˜ã€‚</p></blockquote><p><code> æ¯ä¸€æ¬¡äºŒåˆ†æŸ¥æ‰¾åï¼Œæ•°ç»„éƒ½è¢«åˆ†ä¸ºä¸€ä¸ªæœ‰åºçš„å’Œä¸€ä¸ªæ— åºçš„ï¼Œ ä¸¤ç§æƒ…å†µåˆ†åˆ«æŒ‰ç…§äºŒåˆ†æŸ¥æ‰¾çš„æ–¹å¼å¤„ç†å°±å¯ä»¥è§£å†³æ­¤é—®é¢˜</code></p><pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token keyword">class</span> <span class="token class-name">Solution</span><span class="token punctuation">:</span>    <span class="token keyword">def</span> <span class="token function">search</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> nums<span class="token punctuation">:</span> List<span class="token punctuation">[</span><span class="token builtin">int</span><span class="token punctuation">]</span><span class="token punctuation">,</span> target<span class="token punctuation">:</span> <span class="token builtin">int</span><span class="token punctuation">)</span> <span class="token operator">-</span><span class="token operator">></span> <span class="token builtin">int</span><span class="token punctuation">:</span>        <span class="token triple-quoted-string string">"""        å°†æ•°ç»„ä¸€åˆ†ä¸ºäºŒï¼Œå…¶ä¸­ä¸€å®šæœ‰ä¸€ä¸ªæ˜¯æœ‰åºçš„ï¼Œå¦ä¸€ä¸ªå¯èƒ½æ˜¯æœ‰åºï¼Œä¹Ÿèƒ½æ˜¯éƒ¨åˆ†æœ‰åºã€‚æ­¤æ—¶æœ‰åºéƒ¨åˆ†ç”¨äºŒåˆ†æ³•æŸ¥æ‰¾ã€‚æ—       åºéƒ¨åˆ†å†ä¸€åˆ†ä¸ºäºŒï¼Œå…¶ä¸­ä¸€ä¸ªä¸€å®šæœ‰åºï¼Œå¦ä¸€ä¸ªå¯èƒ½æœ‰åºï¼Œå¯èƒ½æ— åºã€‚å°±è¿™æ ·å¾ªç¯.        """</span>        left<span class="token punctuation">,</span> right <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token builtin">len</span><span class="token punctuation">(</span>nums<span class="token punctuation">)</span><span class="token operator">-</span><span class="token number">1</span>        <span class="token keyword">while</span> left <span class="token operator">&lt;=</span>right<span class="token punctuation">:</span>            mid <span class="token operator">=</span> <span class="token punctuation">(</span>left<span class="token operator">+</span>right<span class="token punctuation">)</span><span class="token operator">//</span><span class="token number">2</span>                        <span class="token keyword">if</span> nums<span class="token punctuation">[</span>mid<span class="token punctuation">]</span> <span class="token operator">==</span> target<span class="token punctuation">:</span>                <span class="token keyword">return</span> mid            <span class="token keyword">if</span> nums<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">&lt;=</span> nums<span class="token punctuation">[</span>mid<span class="token punctuation">]</span><span class="token punctuation">:</span> <span class="token comment"># å‰åŠéƒ¨åˆ†æœ‰åº,</span>                                <span class="token keyword">if</span> nums<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">&lt;=</span> target <span class="token operator">&lt;</span>nums<span class="token punctuation">[</span>mid<span class="token punctuation">]</span><span class="token punctuation">:</span>  <span class="token comment"># åˆ¤æ–­targetæ˜¯å¦åœ¨ä¸Šå‡åºåˆ—ä¸­ï¼Œå¦‚æœåœ¨ï¼Œéœ€è¦ç§»åŠ¨å³æŒ‡é’ˆ</span>                    right <span class="token operator">=</span> mid <span class="token operator">-</span><span class="token number">1</span>                <span class="token keyword">else</span><span class="token punctuation">:</span>                    left <span class="token operator">=</span> mid <span class="token operator">+</span> <span class="token number">1</span> <span class="token comment"># å¦‚æœä¸åœ¨ä¸Šå‡åºåˆ—ä¸­ï¼Œåˆ™èˆå¼ƒè¯¥åºåˆ—</span>            <span class="token keyword">else</span><span class="token punctuation">:</span>  <span class="token comment">#  ç±»æ— åºçš„ä¸€éƒ¨åˆ†</span>                <span class="token keyword">if</span> nums<span class="token punctuation">[</span>mid<span class="token punctuation">]</span> <span class="token operator">&lt;</span> target  <span class="token operator">&lt;=</span> nums<span class="token punctuation">[</span><span class="token builtin">len</span><span class="token punctuation">(</span>nums<span class="token punctuation">)</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">:</span>  <span class="token comment"># </span>                    left <span class="token operator">=</span> mid <span class="token operator">+</span><span class="token number">1</span>                <span class="token keyword">else</span><span class="token punctuation">:</span>                    right <span class="token operator">=</span> mid <span class="token operator">-</span><span class="token number">1</span>        <span class="token keyword">return</span> <span class="token operator">-</span><span class="token number">1</span>                <span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h2 id="åœ¨æ’åºæ•°ç»„ä¸­æŸ¥æ‰¾å…ƒç´ çš„ç¬¬ä¸€ä¸ªå’Œæœ€åä¸€ä¸ªä½ç½®-leetcode-34"><a href="#åœ¨æ’åºæ•°ç»„ä¸­æŸ¥æ‰¾å…ƒç´ çš„ç¬¬ä¸€ä¸ªå’Œæœ€åä¸€ä¸ªä½ç½®-leetcode-34" class="headerlink" title="åœ¨æ’åºæ•°ç»„ä¸­æŸ¥æ‰¾å…ƒç´ çš„ç¬¬ä¸€ä¸ªå’Œæœ€åä¸€ä¸ªä½ç½®-leetcode 34"></a>åœ¨æ’åºæ•°ç»„ä¸­æŸ¥æ‰¾å…ƒç´ çš„ç¬¬ä¸€ä¸ªå’Œæœ€åä¸€ä¸ªä½ç½®-leetcode 34</h2><blockquote><p>ç»™ä½ ä¸€ä¸ªæŒ‰ç…§éé€’å‡é¡ºåºæ’åˆ—çš„æ•´æ•°æ•°ç»„ numsï¼Œå’Œä¸€ä¸ªç›®æ ‡å€¼ targetã€‚è¯·ä½ æ‰¾å‡ºç»™å®šç›®æ ‡å€¼åœ¨æ•°ç»„ä¸­çš„å¼€å§‹ä½ç½®å’Œç»“æŸä½ç½®ã€‚</p><p>å¦‚æœæ•°ç»„ä¸­ä¸å­˜åœ¨ç›®æ ‡å€¼ targetï¼Œè¿”å› [-1, -1]ã€‚</p><p>ä½ å¿…é¡»è®¾è®¡å¹¶å®ç°æ—¶é—´å¤æ‚åº¦ä¸º O(log n) çš„ç®—æ³•è§£å†³æ­¤é—®é¢˜ã€‚</p></blockquote><pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token keyword">class</span> <span class="token class-name">Solution</span><span class="token punctuation">:</span>    <span class="token keyword">def</span> <span class="token function">searchRange</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> nums<span class="token punctuation">:</span> List<span class="token punctuation">[</span><span class="token builtin">int</span><span class="token punctuation">]</span><span class="token punctuation">,</span> target<span class="token punctuation">:</span> <span class="token builtin">int</span><span class="token punctuation">)</span> <span class="token operator">-</span><span class="token operator">></span> List<span class="token punctuation">[</span><span class="token builtin">int</span><span class="token punctuation">]</span><span class="token punctuation">:</span>        <span class="token triple-quoted-string string">"""        äºŒåˆ†æŸ¥æ‰¾å¯»æ‰¾å·¦å³è¾¹ç•Œ        """</span>        <span class="token keyword">def</span> <span class="token function">search_left</span><span class="token punctuation">(</span>nums<span class="token punctuation">,</span> target<span class="token punctuation">)</span><span class="token punctuation">:</span>            left<span class="token punctuation">,</span> right <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token builtin">len</span><span class="token punctuation">(</span>nums<span class="token punctuation">)</span><span class="token operator">-</span><span class="token number">1</span>            <span class="token keyword">while</span> left <span class="token operator">&lt;=</span> right<span class="token punctuation">:</span>                mid <span class="token operator">=</span> <span class="token punctuation">(</span>left <span class="token operator">+</span> right<span class="token punctuation">)</span> <span class="token operator">//</span><span class="token number">2</span>                <span class="token keyword">print</span><span class="token punctuation">(</span>mid<span class="token punctuation">,</span> <span class="token string">"mid"</span><span class="token punctuation">)</span>                <span class="token keyword">if</span> nums<span class="token punctuation">[</span>mid<span class="token punctuation">]</span> <span class="token operator">==</span> target<span class="token punctuation">:</span>                    right <span class="token operator">=</span> right <span class="token operator">-</span><span class="token number">1</span>                <span class="token keyword">elif</span> nums<span class="token punctuation">[</span>mid<span class="token punctuation">]</span> <span class="token operator">></span> target<span class="token punctuation">:</span>                    right <span class="token operator">=</span> mid<span class="token operator">-</span><span class="token number">1</span>                <span class="token keyword">else</span><span class="token punctuation">:</span>                    left <span class="token operator">=</span> mid <span class="token operator">+</span><span class="token number">1</span>                        <span class="token keyword">if</span> nums<span class="token punctuation">[</span>left<span class="token punctuation">]</span> <span class="token operator">==</span> target<span class="token punctuation">:</span>                <span class="token keyword">return</span> left            <span class="token keyword">else</span><span class="token punctuation">:</span>                <span class="token keyword">return</span> <span class="token operator">-</span><span class="token number">1</span>        <span class="token keyword">def</span> <span class="token function">search_right</span><span class="token punctuation">(</span>nums<span class="token punctuation">,</span> target<span class="token punctuation">)</span><span class="token punctuation">:</span>            left<span class="token punctuation">,</span> right <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token builtin">len</span><span class="token punctuation">(</span>nums<span class="token punctuation">)</span><span class="token operator">-</span><span class="token number">1</span>            <span class="token keyword">while</span> left <span class="token operator">&lt;=</span> right<span class="token punctuation">:</span>                mid <span class="token operator">=</span> <span class="token punctuation">(</span>left <span class="token operator">+</span>right<span class="token punctuation">)</span> <span class="token operator">//</span> <span class="token number">2</span>                <span class="token keyword">if</span> nums<span class="token punctuation">[</span>mid<span class="token punctuation">]</span> <span class="token operator">==</span> target<span class="token punctuation">:</span>                    left <span class="token operator">=</span> mid <span class="token operator">+</span><span class="token number">1</span>                <span class="token keyword">elif</span> nums<span class="token punctuation">[</span>mid<span class="token punctuation">]</span> <span class="token operator">></span>target<span class="token punctuation">:</span>                    right <span class="token operator">=</span> mid <span class="token operator">-</span><span class="token number">1</span>                <span class="token keyword">else</span><span class="token punctuation">:</span>                    left <span class="token operator">=</span> mid <span class="token operator">+</span><span class="token number">1</span>            <span class="token keyword">if</span> nums<span class="token punctuation">[</span>right<span class="token punctuation">]</span> <span class="token operator">==</span> target<span class="token punctuation">:</span>                <span class="token keyword">return</span> right            <span class="token keyword">else</span><span class="token punctuation">:</span>                <span class="token keyword">return</span> <span class="token operator">-</span><span class="token number">1</span>        <span class="token keyword">if</span> <span class="token keyword">not</span> nums <span class="token keyword">or</span> nums<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">></span> target <span class="token keyword">or</span> nums<span class="token punctuation">[</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">&lt;</span> target<span class="token punctuation">:</span>            <span class="token keyword">return</span> <span class="token punctuation">[</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">]</span>        l <span class="token operator">=</span> search_left<span class="token punctuation">(</span>nums<span class="token punctuation">,</span> target<span class="token punctuation">)</span>        r <span class="token operator">=</span> search_right<span class="token punctuation">(</span>nums<span class="token punctuation">,</span> target<span class="token punctuation">)</span>        <span class="token keyword">if</span> <span class="token builtin">all</span><span class="token punctuation">(</span><span class="token punctuation">[</span>l <span class="token operator">!=</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">,</span> r <span class="token operator">!=</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">:</span>            <span class="token keyword">return</span> <span class="token punctuation">[</span>l<span class="token punctuation">,</span> r<span class="token punctuation">]</span>        <span class="token keyword">else</span><span class="token punctuation">:</span>            <span class="token keyword">return</span> <span class="token punctuation">[</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">]</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h2 id="æœ‰æ•ˆçš„æ•°ç»„-â€“leetcode-36"><a href="#æœ‰æ•ˆçš„æ•°ç»„-â€“leetcode-36" class="headerlink" title="æœ‰æ•ˆçš„æ•°ç»„ â€“leetcode 36"></a>æœ‰æ•ˆçš„æ•°ç»„ â€“leetcode 36</h2><pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token keyword">from</span> collections <span class="token keyword">import</span> defaultdict<span class="token keyword">class</span> <span class="token class-name">Solution</span><span class="token punctuation">:</span>    <span class="token keyword">def</span> <span class="token function">isValidSudoku</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> board<span class="token punctuation">:</span> List<span class="token punctuation">[</span>List<span class="token punctuation">[</span><span class="token builtin">str</span><span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token operator">-</span><span class="token operator">></span> <span class="token builtin">bool</span><span class="token punctuation">:</span>        row<span class="token punctuation">,</span> col <span class="token punctuation">,</span> sqrt <span class="token operator">=</span> defaultdict<span class="token punctuation">(</span><span class="token builtin">set</span><span class="token punctuation">)</span><span class="token punctuation">,</span> defaultdict<span class="token punctuation">(</span><span class="token builtin">set</span><span class="token punctuation">)</span><span class="token punctuation">,</span> defaultdict<span class="token punctuation">(</span><span class="token builtin">set</span><span class="token punctuation">)</span>        <span class="token keyword">for</span> i <span class="token keyword">in</span> <span class="token builtin">range</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">9</span><span class="token punctuation">)</span><span class="token punctuation">:</span><span class="token comment"># è¡Œ</span>            <span class="token keyword">for</span> j <span class="token keyword">in</span> <span class="token builtin">range</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">9</span><span class="token punctuation">)</span><span class="token punctuation">:</span>  <span class="token comment"># åˆ—</span>                <span class="token keyword">if</span> board<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">[</span>j<span class="token punctuation">]</span> <span class="token operator">==</span> <span class="token string">"."</span><span class="token punctuation">:</span>                    <span class="token keyword">continue</span>                <span class="token keyword">if</span> board<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">[</span>j<span class="token punctuation">]</span> <span class="token keyword">in</span> row<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">:</span>                    <span class="token keyword">return</span> <span class="token boolean">False</span>                <span class="token keyword">if</span> board<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">[</span>j<span class="token punctuation">]</span> <span class="token keyword">in</span> col<span class="token punctuation">[</span>j<span class="token punctuation">]</span><span class="token punctuation">:</span>                    <span class="token keyword">return</span> <span class="token boolean">False</span>                <span class="token comment">## æ¨å¯¼i, j æ˜¯åœ¨å“ªä¸ªç›’å­</span>                <span class="token keyword">if</span> board<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">[</span>j<span class="token punctuation">]</span> <span class="token keyword">in</span> sqrt<span class="token punctuation">[</span>i<span class="token operator">//</span><span class="token number">3</span><span class="token punctuation">,</span> j<span class="token operator">//</span><span class="token number">3</span><span class="token punctuation">]</span><span class="token punctuation">:</span>                    <span class="token keyword">return</span> <span class="token boolean">False</span>                row<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">.</span>add<span class="token punctuation">(</span>board<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">[</span>j<span class="token punctuation">]</span><span class="token punctuation">)</span>                col<span class="token punctuation">[</span>j<span class="token punctuation">]</span><span class="token punctuation">.</span>add<span class="token punctuation">(</span>board<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">[</span>j<span class="token punctuation">]</span><span class="token punctuation">)</span>                sqrt<span class="token punctuation">[</span>i<span class="token operator">//</span><span class="token number">3</span><span class="token punctuation">,</span>j<span class="token operator">//</span><span class="token number">3</span><span class="token punctuation">]</span><span class="token punctuation">.</span>add<span class="token punctuation">(</span>board<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">[</span>j<span class="token punctuation">]</span><span class="token punctuation">)</span>        <span class="token keyword">return</span> <span class="token boolean">True</span>    <span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h2 id="å­—ç¬¦ä¸²ç›¸ä¹˜-leetcode-43"><a href="#å­—ç¬¦ä¸²ç›¸ä¹˜-leetcode-43" class="headerlink" title="å­—ç¬¦ä¸²ç›¸ä¹˜-leetcode 43"></a>å­—ç¬¦ä¸²ç›¸ä¹˜-leetcode 43</h2><blockquote><p>ç»™å®šä¸¤ä¸ªä»¥å­—ç¬¦ä¸²å½¢å¼è¡¨ç¤ºçš„éè´Ÿæ•´æ•° num1 å’Œ num2ï¼Œè¿”å› num1 å’Œ num2 çš„ä¹˜ç§¯ï¼Œå®ƒä»¬çš„ä¹˜ç§¯ä¹Ÿè¡¨ç¤ºä¸ºå­—ç¬¦ä¸²å½¢å¼ã€‚</p><p>æ³¨æ„ï¼šä¸èƒ½ä½¿ç”¨ä»»ä½•å†…ç½®çš„ BigInteger åº“æˆ–ç›´æ¥å°†è¾“å…¥è½¬æ¢ä¸ºæ•´æ•°</p></blockquote><p><strong>æ¨¡æ‹Ÿä¹˜æ³•è¿ç®—è¿‡ç¨‹ï¼Œæœ€åç»Ÿä¸€å¤„ç†è¿›ä½ï¼Œ æ³¨æ„æ¯æ¬¡ç›¸ä¹˜ç»“æœå¯¹è±¡è¦åŠ åˆ°åˆ—è¡¨çš„i+j+1å¤„</strong></p><pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token keyword">class</span> <span class="token class-name">Solution</span><span class="token punctuation">:</span>    <span class="token keyword">def</span> <span class="token function">multiply</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> num1<span class="token punctuation">:</span> <span class="token builtin">str</span><span class="token punctuation">,</span> num2<span class="token punctuation">:</span> <span class="token builtin">str</span><span class="token punctuation">)</span> <span class="token operator">-</span><span class="token operator">></span> <span class="token builtin">str</span><span class="token punctuation">:</span>        <span class="token keyword">if</span> num1 <span class="token operator">==</span> <span class="token string">"0"</span> <span class="token keyword">or</span> num2 <span class="token operator">==</span> <span class="token string">"0"</span><span class="token punctuation">:</span>            <span class="token keyword">return</span> <span class="token string">"0"</span>        m<span class="token punctuation">,</span> n <span class="token operator">=</span> <span class="token builtin">len</span><span class="token punctuation">(</span>num1<span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token builtin">len</span><span class="token punctuation">(</span>num2<span class="token punctuation">)</span>        temp <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token operator">*</span> <span class="token punctuation">(</span>m <span class="token operator">+</span> n<span class="token punctuation">)</span>        <span class="token keyword">for</span> i <span class="token keyword">in</span> <span class="token builtin">range</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> m<span class="token punctuation">)</span><span class="token punctuation">:</span>            <span class="token keyword">for</span> j <span class="token keyword">in</span> <span class="token builtin">range</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> n<span class="token punctuation">)</span><span class="token punctuation">:</span>                num <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token builtin">ord</span><span class="token punctuation">(</span>num1<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token operator">-</span> <span class="token builtin">ord</span><span class="token punctuation">(</span><span class="token string">"0"</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token operator">*</span> <span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token builtin">ord</span><span class="token punctuation">(</span>num2<span class="token punctuation">[</span>j<span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token operator">-</span> <span class="token builtin">ord</span><span class="token punctuation">(</span><span class="token string">"0"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span>                temp<span class="token punctuation">[</span>i <span class="token operator">+</span> j <span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">=</span> temp<span class="token punctuation">[</span>i<span class="token operator">+</span>j<span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">+</span> num        falg_num <span class="token operator">=</span> <span class="token number">0</span>        <span class="token keyword">for</span> n <span class="token keyword">in</span> <span class="token builtin">range</span><span class="token punctuation">(</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token operator">-</span><span class="token builtin">len</span><span class="token punctuation">(</span>temp<span class="token punctuation">)</span> <span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">:</span>                        this_num <span class="token operator">=</span> <span class="token punctuation">(</span>temp<span class="token punctuation">[</span>n<span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token operator">%</span> <span class="token number">10</span>            falg_num <span class="token operator">=</span> temp<span class="token punctuation">[</span>n<span class="token punctuation">]</span><span class="token operator">//</span> <span class="token number">10</span>            temp<span class="token punctuation">[</span>n<span class="token punctuation">]</span> <span class="token operator">=</span> this_num            temp<span class="token punctuation">[</span>n<span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">+=</span> falg_num        index <span class="token operator">=</span> <span class="token number">1</span> <span class="token keyword">if</span> temp<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">==</span> <span class="token number">0</span> <span class="token keyword">else</span> <span class="token number">0</span>        ans <span class="token operator">=</span> <span class="token string">""</span><span class="token punctuation">.</span>join<span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token builtin">str</span><span class="token punctuation">(</span>i<span class="token punctuation">)</span> <span class="token keyword">for</span> i <span class="token keyword">in</span> temp<span class="token punctuation">[</span>index<span class="token punctuation">:</span><span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">)</span>        <span class="token keyword">return</span> ans<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h2 id="è·³è·ƒæ¸¸æˆ-leetcode-45"><a href="#è·³è·ƒæ¸¸æˆ-leetcode-45" class="headerlink" title="è·³è·ƒæ¸¸æˆ-leetcode 45"></a>è·³è·ƒæ¸¸æˆ-leetcode 45</h2><blockquote><p>ç»™ä½ ä¸€ä¸ªéè´Ÿæ•´æ•°æ•°ç»„ nums ï¼Œä½ æœ€åˆä½äºæ•°ç»„çš„ç¬¬ä¸€ä¸ªä½ç½®ã€‚</p><p>æ•°ç»„ä¸­çš„æ¯ä¸ªå…ƒç´ ä»£è¡¨ä½ åœ¨è¯¥ä½ç½®å¯ä»¥è·³è·ƒçš„æœ€å¤§é•¿åº¦ã€‚</p><p>ä½ çš„ç›®æ ‡æ˜¯ä½¿ç”¨æœ€å°‘çš„è·³è·ƒæ¬¡æ•°åˆ°è¾¾æ•°ç»„çš„æœ€åä¸€ä¸ªä½ç½®ã€‚</p><p>å‡è®¾ä½ æ€»æ˜¯å¯ä»¥åˆ°è¾¾æ•°ç»„çš„æœ€åä¸€ä¸ªä½ç½®ã€‚</p></blockquote><h2 id="æ— é‡å¤å­—ç¬¦çš„æœ€é•¿å­ä¸²"><a href="#æ— é‡å¤å­—ç¬¦çš„æœ€é•¿å­ä¸²" class="headerlink" title="æ— é‡å¤å­—ç¬¦çš„æœ€é•¿å­ä¸²"></a>æ— é‡å¤å­—ç¬¦çš„æœ€é•¿å­ä¸²</h2><blockquote><p> ç»™å®šä¸€ä¸ªå­—ç¬¦ä¸² <code>s</code> ï¼Œè¯·ä½ æ‰¾å‡ºå…¶ä¸­ä¸å«æœ‰é‡å¤å­—ç¬¦çš„ <strong>æœ€é•¿å­ä¸²</strong> çš„é•¿åº¦ </p></blockquote><pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token keyword">class</span> <span class="token class-name">Solution</span><span class="token punctuation">:</span>    <span class="token triple-quoted-string string">"""    å¯ä»¥ä½¿ç”¨åŒæŒ‡é’ˆï¼Œä¹Ÿå¯ä»¥ä½¿ç”¨è´ªå¿ƒç®—æ³•ï¼Œè¿™é‡Œä½¿ç”¨è´ªå¿ƒç®—æ³•        è´ªå¿ƒç®—æ³•ï¼š è¦æƒ³ä½¿å­—ä¸²æœ€é•¿ï¼Œé‚£ä¹ˆï¼Œæ¯ä¸ªé‡å¤å­—æ¯ä¹‹é—´çš„è·ç¦»æœ€å¤§ï¼Œæœ€åçš„æœ€å¤§è·ç¦»å°±æ˜¯æœ€é•¿å­—ä¸²çš„é•¿åº¦     s = "abcabcbb"    """</span>    <span class="token keyword">def</span> <span class="token function">lengthOfLongestSubstring</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> s<span class="token punctuation">:</span> <span class="token builtin">str</span><span class="token punctuation">)</span> <span class="token operator">-</span><span class="token operator">></span> <span class="token builtin">int</span><span class="token punctuation">:</span>                max_len <span class="token operator">=</span> <span class="token number">0</span>        start <span class="token operator">=</span> <span class="token number">0</span>        char_index <span class="token operator">=</span> <span class="token builtin">dict</span><span class="token punctuation">(</span><span class="token punctuation">)</span>        <span class="token keyword">for</span>  i <span class="token keyword">in</span> <span class="token builtin">range</span><span class="token punctuation">(</span><span class="token builtin">len</span><span class="token punctuation">(</span>s<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">:</span>            <span class="token comment"># ä»»ä½•å­—ä¸²éƒ½ä¸èƒ½æœ‰é‡å¤çš„ï¼Œå¦‚æœè·å–åˆ°çš„ä¸‹æ ‡å°äºstart åˆ™ä¸æ›´æ–°startï¼Œ å¦‚æœå¤§äºç­‰äºï¼Œåˆ™æ›´æ–°start</span>            <span class="token keyword">if</span> s<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token keyword">in</span> char_index <span class="token keyword">and</span> char_index<span class="token punctuation">[</span>s<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token operator">>=</span>start<span class="token punctuation">:</span>                max_len <span class="token operator">=</span> <span class="token builtin">max</span><span class="token punctuation">(</span>i<span class="token operator">-</span>start<span class="token punctuation">,</span> max_len<span class="token punctuation">)</span>                start <span class="token operator">=</span> char_index<span class="token punctuation">[</span>s<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">]</span> <span class="token operator">+</span><span class="token number">1</span> <span class="token keyword">if</span> char_index<span class="token punctuation">[</span>s<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">]</span> <span class="token operator">>=</span> start <span class="token keyword">else</span> start            char_index<span class="token punctuation">[</span>s<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">]</span> <span class="token operator">=</span> i        <span class="token keyword">print</span><span class="token punctuation">(</span>max_len<span class="token punctuation">,</span> <span class="token builtin">len</span><span class="token punctuation">(</span>s<span class="token punctuation">)</span><span class="token operator">-</span> start<span class="token punctuation">)</span>        <span class="token keyword">return</span> <span class="token builtin">max</span><span class="token punctuation">(</span>max_len<span class="token punctuation">,</span> <span class="token builtin">len</span><span class="token punctuation">(</span>s<span class="token punctuation">)</span> <span class="token operator">-</span> start<span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h2 id="Power-x-n-leetcode-50"><a href="#Power-x-n-leetcode-50" class="headerlink" title="Power(x, n)-leetcode 50"></a>Power(x, n)-leetcode 50</h2><blockquote><p> å®ç° <a href="https://www.cplusplus.com/reference/valarray/pow/">pow(<em>x</em>, <em>n</em>)</a> ï¼Œå³è®¡ç®— <code>x</code> çš„æ•´æ•° <code>n</code> æ¬¡å¹‚å‡½æ•°ï¼ˆå³ï¼Œ<code>x**n</code> ï¼‰</p></blockquote><pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token keyword">class</span> <span class="token class-name">Solution</span><span class="token punctuation">:</span>    <span class="token triple-quoted-string string">"""    x ** 89       89//2  +1    x ** 88 88/2    """</span>    <span class="token keyword">def</span> <span class="token function">myPow</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> x<span class="token punctuation">:</span> <span class="token builtin">float</span><span class="token punctuation">,</span> n<span class="token punctuation">:</span> <span class="token builtin">int</span><span class="token punctuation">)</span> <span class="token operator">-</span><span class="token operator">></span> <span class="token builtin">float</span><span class="token punctuation">:</span>        <span class="token keyword">def</span> <span class="token function">quick_mul</span><span class="token punctuation">(</span>N<span class="token punctuation">)</span><span class="token punctuation">:</span>            <span class="token keyword">if</span> N <span class="token operator">==</span> <span class="token number">0</span><span class="token punctuation">:</span>                <span class="token keyword">return</span> <span class="token number">1.0</span>            y <span class="token operator">=</span> quick_mul<span class="token punctuation">(</span>N<span class="token operator">//</span><span class="token number">2</span><span class="token punctuation">)</span>            <span class="token keyword">return</span> y <span class="token operator">*</span>y <span class="token keyword">if</span> N <span class="token operator">%</span><span class="token number">2</span> <span class="token operator">==</span><span class="token number">0</span> <span class="token keyword">else</span> y<span class="token operator">*</span>y <span class="token operator">*</span>x        <span class="token keyword">return</span> quick_mul<span class="token punctuation">(</span>n<span class="token punctuation">)</span> <span class="token keyword">if</span> n<span class="token operator">>=</span><span class="token number">0</span> <span class="token keyword">else</span> <span class="token number">1</span><span class="token operator">/</span>quick_mul<span class="token punctuation">(</span><span class="token operator">-</span>n<span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h2 id="å­—æ¯å¼‚å‘³è¯åˆ†ç»„-leetcode-49"><a href="#å­—æ¯å¼‚å‘³è¯åˆ†ç»„-leetcode-49" class="headerlink" title="å­—æ¯å¼‚å‘³è¯åˆ†ç»„-leetcode 49"></a>å­—æ¯å¼‚å‘³è¯åˆ†ç»„-leetcode 49</h2><blockquote><p>ç»™ä½ ä¸€ä¸ªå­—ç¬¦ä¸²æ•°ç»„ï¼Œè¯·ä½ å°† å­—æ¯å¼‚ä½è¯ ç»„åˆåœ¨ä¸€èµ·ã€‚å¯ä»¥æŒ‰ä»»æ„é¡ºåºè¿”å›ç»“æœåˆ—è¡¨ã€‚</p><p>å­—æ¯å¼‚ä½è¯ æ˜¯ç”±é‡æ–°æ’åˆ—æºå•è¯çš„å­—æ¯å¾—åˆ°çš„ä¸€ä¸ªæ–°å•è¯ï¼Œæ‰€æœ‰æºå•è¯ä¸­çš„å­—æ¯é€šå¸¸æ°å¥½åªç”¨ä¸€æ¬¡ã€‚</p></blockquote><pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token keyword">import</span> collections<span class="token keyword">class</span> <span class="token class-name">Solution</span><span class="token punctuation">:</span>    <span class="token keyword">def</span> <span class="token function">groupAnagrams</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> strs<span class="token punctuation">:</span> List<span class="token punctuation">[</span><span class="token builtin">str</span><span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token operator">-</span><span class="token operator">></span> List<span class="token punctuation">[</span>List<span class="token punctuation">[</span><span class="token builtin">str</span><span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">:</span>        dict1 <span class="token operator">=</span> collections<span class="token punctuation">.</span>defaultdict<span class="token punctuation">(</span><span class="token builtin">list</span><span class="token punctuation">)</span>        <span class="token keyword">for</span> i <span class="token keyword">in</span> <span class="token builtin">range</span><span class="token punctuation">(</span><span class="token builtin">len</span><span class="token punctuation">(</span>strs<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">:</span>            key <span class="token operator">=</span> <span class="token builtin">tuple</span><span class="token punctuation">(</span><span class="token string">""</span><span class="token punctuation">.</span>join<span class="token punctuation">(</span><span class="token builtin">sorted</span><span class="token punctuation">(</span>strs<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span>            dict1<span class="token punctuation">[</span>key<span class="token punctuation">]</span><span class="token punctuation">.</span>append<span class="token punctuation">(</span>strs<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">)</span>        <span class="token keyword">return</span> <span class="token builtin">list</span><span class="token punctuation">(</span>dict1<span class="token punctuation">.</span>values<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h2 id="èºæ—‹çŸ©é˜µ-leetcode-54"><a href="#èºæ—‹çŸ©é˜µ-leetcode-54" class="headerlink" title="èºæ—‹çŸ©é˜µ-leetcode 54"></a>èºæ—‹çŸ©é˜µ-leetcode 54</h2><blockquote><p> ç»™ä½ ä¸€ä¸ª <code>m</code> è¡Œ <code>n</code> åˆ—çš„çŸ©é˜µ <code>matrix</code> ï¼Œè¯·æŒ‰ç…§ <strong>é¡ºæ—¶é’ˆèºæ—‹é¡ºåº</strong> ï¼Œè¿”å›çŸ©é˜µä¸­çš„æ‰€æœ‰å…ƒç´ ã€‚ </p></blockquote><pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token triple-quoted-string string">'''å¯¹äºæ¯å±‚ï¼Œä»å·¦ä¸Šæ–¹å¼€å§‹ä»¥é¡ºæ—¶é’ˆçš„é¡ºåºéå†æ‰€æœ‰å…ƒç´ ã€‚å‡è®¾å½“å‰å±‚çš„å·¦ä¸Šè§’ä½äº (top,left)ï¼Œå³ä¸‹è§’ä½äº (bottom,right)ï¼ŒæŒ‰ç…§å¦‚ä¸‹é¡ºåºéå†å½“å‰å±‚çš„å…ƒç´ ã€‚ä»å·¦åˆ°å³éå†ä¸Šä¾§å…ƒç´ ï¼Œä¾æ¬¡ä¸º (top,left) åˆ°(top,right)ã€‚ä»ä¸Šåˆ°ä¸‹éå†å³ä¾§å…ƒç´ ï¼Œä¾æ¬¡ä¸º (top+1,right) åˆ° (\textit&#123;bottom&#125;, (bottom,right)ã€‚å¦‚æœ left&lt;right ä¸” top&lt;bottomï¼Œåˆ™ä»å³åˆ°å·¦éå†ä¸‹ä¾§å…ƒç´ ï¼Œä¾æ¬¡ä¸º (bottom,rightâˆ’1) åˆ° )(bottom,left+1)ï¼Œä»¥åŠä»ä¸‹åˆ°ä¸Šéå†å·¦ä¾§å…ƒç´ ï¼Œä¾æ¬¡ä¸º(top+1,left)ã€‚éå†å®Œå½“å‰å±‚çš„å…ƒç´ ä¹‹åï¼Œå°† left å’Œtop åˆ†åˆ«å¢åŠ  1ï¼Œå°† right å’Œ bottom åˆ†åˆ«å‡å°‘ 11ï¼Œè¿›å…¥ä¸‹ä¸€å±‚ç»§ç»­éå†ï¼Œç›´åˆ°éå†å®Œæ‰€æœ‰å…ƒç´ ä¸ºæ­¢ã€‚'''</span><span class="token keyword">class</span> <span class="token class-name">Solution</span><span class="token punctuation">:</span>    <span class="token keyword">def</span> <span class="token function">spiralOrder</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> matrix<span class="token punctuation">:</span> List<span class="token punctuation">[</span>List<span class="token punctuation">[</span><span class="token builtin">int</span><span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token operator">-</span><span class="token operator">></span> List<span class="token punctuation">[</span><span class="token builtin">int</span><span class="token punctuation">]</span><span class="token punctuation">:</span>                <span class="token keyword">if</span> <span class="token builtin">len</span><span class="token punctuation">(</span>matrix<span class="token punctuation">)</span><span class="token operator">==</span><span class="token number">0</span><span class="token punctuation">:</span>            <span class="token keyword">return</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>        ret <span class="token operator">=</span> <span class="token builtin">list</span><span class="token punctuation">(</span><span class="token punctuation">)</span>        top<span class="token punctuation">,</span> bottom<span class="token punctuation">,</span> left<span class="token punctuation">,</span> right <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token builtin">len</span><span class="token punctuation">(</span>matrix<span class="token punctuation">)</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">,</span>  <span class="token number">0</span><span class="token punctuation">,</span> <span class="token builtin">len</span><span class="token punctuation">(</span>matrix<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token operator">-</span><span class="token number">1</span>        <span class="token keyword">while</span> left <span class="token operator">&lt;=</span> right <span class="token keyword">and</span> top <span class="token operator">&lt;=</span> bottom<span class="token punctuation">:</span>            <span class="token keyword">for</span> column <span class="token keyword">in</span> <span class="token builtin">range</span><span class="token punctuation">(</span>left<span class="token punctuation">,</span> right <span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">:</span>                ret<span class="token punctuation">.</span>append<span class="token punctuation">(</span>matrix<span class="token punctuation">[</span>top<span class="token punctuation">]</span><span class="token punctuation">[</span>column<span class="token punctuation">]</span><span class="token punctuation">)</span>            <span class="token keyword">for</span> row <span class="token keyword">in</span> <span class="token builtin">range</span><span class="token punctuation">(</span>top<span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">,</span> bottom<span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">:</span>                ret<span class="token punctuation">.</span>append<span class="token punctuation">(</span>matrix<span class="token punctuation">[</span>row<span class="token punctuation">]</span><span class="token punctuation">[</span>right<span class="token punctuation">]</span><span class="token punctuation">)</span>            <span class="token keyword">if</span> left <span class="token operator">&lt;</span> right <span class="token keyword">and</span> top <span class="token operator">&lt;</span> bottom<span class="token punctuation">:</span>                <span class="token keyword">for</span> column <span class="token keyword">in</span> <span class="token builtin">range</span><span class="token punctuation">(</span>right<span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">,</span> left<span class="token punctuation">,</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">:</span>                    ret<span class="token punctuation">.</span>append<span class="token punctuation">(</span>matrix<span class="token punctuation">[</span>bottom<span class="token punctuation">]</span><span class="token punctuation">[</span>column<span class="token punctuation">]</span><span class="token punctuation">)</span>                <span class="token keyword">for</span> row <span class="token keyword">in</span> <span class="token builtin">range</span><span class="token punctuation">(</span>bottom<span class="token punctuation">,</span> top<span class="token punctuation">,</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">:</span>                    ret<span class="token punctuation">.</span>append<span class="token punctuation">(</span>matrix<span class="token punctuation">[</span>row<span class="token punctuation">]</span><span class="token punctuation">[</span>left<span class="token punctuation">]</span><span class="token punctuation">)</span>            top <span class="token operator">+=</span><span class="token number">1</span>            bottom <span class="token operator">-=</span> <span class="token number">1</span>            left <span class="token operator">+=</span> <span class="token number">1</span>            right <span class="token operator">-=</span> <span class="token number">1</span>        <span class="token keyword">return</span> ret<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h2 id="åˆå¹¶åŒºé—´"><a href="#åˆå¹¶åŒºé—´" class="headerlink" title="åˆå¹¶åŒºé—´"></a>åˆå¹¶åŒºé—´</h2><blockquote><p>ä»¥æ•°ç»„ intervals è¡¨ç¤ºè‹¥å¹²ä¸ªåŒºé—´çš„é›†åˆï¼Œå…¶ä¸­å•ä¸ªåŒºé—´ä¸º intervals[i] &#x3D; [starti, endi] ã€‚è¯·ä½ åˆå¹¶æ‰€æœ‰é‡å çš„åŒºé—´ï¼Œå¹¶è¿”å› ä¸€ä¸ªä¸é‡å çš„åŒºé—´æ•°ç»„ï¼Œè¯¥æ•°ç»„éœ€æ°å¥½è¦†ç›–è¾“å…¥ä¸­çš„æ‰€æœ‰åŒºé—´ ã€‚</p></blockquote><pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token keyword">class</span> <span class="token class-name">Solution</span><span class="token punctuation">:</span>    <span class="token keyword">def</span> <span class="token function">merge</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> intervals<span class="token punctuation">:</span> List<span class="token punctuation">[</span>List<span class="token punctuation">[</span><span class="token builtin">int</span><span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token operator">-</span><span class="token operator">></span> List<span class="token punctuation">[</span>List<span class="token punctuation">[</span><span class="token builtin">int</span><span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">:</span>        ret <span class="token operator">=</span> <span class="token builtin">list</span><span class="token punctuation">(</span><span class="token punctuation">)</span>        intervals <span class="token operator">=</span> <span class="token builtin">sorted</span><span class="token punctuation">(</span>intervals<span class="token punctuation">,</span> key<span class="token operator">=</span><span class="token keyword">lambda</span> x<span class="token punctuation">:</span> <span class="token punctuation">(</span>x<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">,</span> x<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">)</span>        <span class="token keyword">for</span> i <span class="token keyword">in</span> <span class="token builtin">range</span><span class="token punctuation">(</span><span class="token builtin">len</span><span class="token punctuation">(</span>intervals<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">:</span>            <span class="token keyword">if</span> i <span class="token operator">==</span> <span class="token number">0</span><span class="token punctuation">:</span>                ret<span class="token punctuation">.</span>append<span class="token punctuation">(</span>intervals<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">)</span>                <span class="token keyword">continue</span>            pre_start <span class="token operator">=</span> ret<span class="token punctuation">[</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span>            pre_end <span class="token operator">=</span> ret<span class="token punctuation">[</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span>            nex_start <span class="token operator">=</span> intervals<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span>            nex_end <span class="token operator">=</span> intervals<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span>            <span class="token keyword">if</span> nex_start <span class="token operator">&lt;=</span> pre_end<span class="token punctuation">:</span>                ret<span class="token punctuation">[</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token operator">=</span><span class="token punctuation">[</span>pre_start<span class="token punctuation">,</span> <span class="token builtin">max</span><span class="token punctuation">(</span>pre_end<span class="token punctuation">,</span> nex_end<span class="token punctuation">)</span><span class="token punctuation">]</span>            <span class="token keyword">else</span><span class="token punctuation">:</span>                ret<span class="token punctuation">.</span>append<span class="token punctuation">(</span>intervals<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">)</span>                        <span class="token keyword">return</span> ret<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h2 id="æ’å…¥åŒºé—´-leetcode-57"><a href="#æ’å…¥åŒºé—´-leetcode-57" class="headerlink" title="æ’å…¥åŒºé—´-leetcode 57"></a>æ’å…¥åŒºé—´-leetcode 57</h2><pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token keyword">class</span> <span class="token class-name">Solution</span><span class="token punctuation">:</span>    <span class="token keyword">def</span> <span class="token function">insert</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> intervals<span class="token punctuation">:</span> List<span class="token punctuation">[</span>List<span class="token punctuation">[</span><span class="token builtin">int</span><span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">,</span> newInterval<span class="token punctuation">:</span> List<span class="token punctuation">[</span><span class="token builtin">int</span><span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token operator">-</span><span class="token operator">></span> List<span class="token punctuation">[</span>List<span class="token punctuation">[</span><span class="token builtin">int</span><span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">:</span>        ret <span class="token operator">=</span> <span class="token builtin">list</span><span class="token punctuation">(</span><span class="token punctuation">)</span>        start_new<span class="token punctuation">,</span> end_new <span class="token operator">=</span> newInterval        tag <span class="token operator">=</span> <span class="token boolean">False</span>        <span class="token keyword">for</span> start<span class="token punctuation">,</span> end <span class="token keyword">in</span> intervals<span class="token punctuation">:</span>                        <span class="token comment"># æ— ç›¸äº¤ï¼Œ å¯ä»¥ç›´æ¥åŠ å…¥è¿™ä¸ªå…ƒç´ çš„å·¦ä¾§</span>            <span class="token keyword">if</span> start <span class="token operator">></span> end_new<span class="token punctuation">:</span>                 <span class="token keyword">if</span> <span class="token keyword">not</span> tag<span class="token punctuation">:</span>                    ret<span class="token punctuation">.</span>append<span class="token punctuation">(</span><span class="token punctuation">[</span>start_new<span class="token punctuation">,</span> end_new<span class="token punctuation">]</span><span class="token punctuation">)</span>                    tag <span class="token operator">=</span> <span class="token boolean">True</span>                ret<span class="token punctuation">.</span>append<span class="token punctuation">(</span><span class="token punctuation">[</span>start<span class="token punctuation">,</span> end<span class="token punctuation">]</span><span class="token punctuation">)</span>                        <span class="token comment"># æœ‰ç›¸äº¤ï¼Œå°†æœ€å°çš„ä½œä¸ºæ’å…¥çš„èµ·å§‹ï¼Œæœ€å¤§çš„ä½œä¸ºæ’å…¥çš„ç»“å°¾</span>            <span class="token keyword">elif</span> end <span class="token operator">&lt;</span> start_new<span class="token punctuation">:</span>                ret<span class="token punctuation">.</span>append<span class="token punctuation">(</span><span class="token punctuation">[</span>start<span class="token punctuation">,</span> end<span class="token punctuation">]</span><span class="token punctuation">)</span>            <span class="token keyword">else</span><span class="token punctuation">:</span>                <span class="token comment"># æœ‰ç›¸äº¤</span>                <span class="token comment"># ä¸èƒ½ç›´æ¥æ’å…¥////</span>                start_new <span class="token operator">=</span> <span class="token builtin">min</span><span class="token punctuation">(</span>start<span class="token punctuation">,</span> start_new<span class="token punctuation">)</span>                end_new <span class="token operator">=</span> <span class="token builtin">max</span><span class="token punctuation">(</span>end<span class="token punctuation">,</span> end_new<span class="token punctuation">)</span>                                    <span class="token keyword">if</span> <span class="token keyword">not</span> tag<span class="token punctuation">:</span>            ret<span class="token punctuation">.</span>append<span class="token punctuation">(</span><span class="token punctuation">[</span>start_new<span class="token punctuation">,</span> end_new<span class="token punctuation">]</span><span class="token punctuation">)</span>        <span class="token keyword">return</span> ret<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h2 id="æœ€åä¸€ä¸ªå•è¯çš„é•¿åº¦-leetcode-51"><a href="#æœ€åä¸€ä¸ªå•è¯çš„é•¿åº¦-leetcode-51" class="headerlink" title="æœ€åä¸€ä¸ªå•è¯çš„é•¿åº¦-leetcode 51"></a>æœ€åä¸€ä¸ªå•è¯çš„é•¿åº¦-leetcode 51</h2><blockquote><p>ç»™ä½ ä¸€ä¸ªå­—ç¬¦ä¸² sï¼Œç”±è‹¥å¹²å•è¯ç»„æˆï¼Œå•è¯å‰åç”¨ä¸€äº›ç©ºæ ¼å­—ç¬¦éš”å¼€ã€‚è¿”å›å­—ç¬¦ä¸²ä¸­ æœ€åä¸€ä¸ª å•è¯çš„é•¿åº¦ã€‚</p><p>å•è¯ æ˜¯æŒ‡ä»…ç”±å­—æ¯ç»„æˆã€ä¸åŒ…å«ä»»ä½•ç©ºæ ¼å­—ç¬¦çš„æœ€å¤§å­å­—ç¬¦ä¸²ã€‚</p></blockquote><pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token keyword">class</span> <span class="token class-name">Solution</span><span class="token punctuation">:</span>    <span class="token keyword">def</span> <span class="token function">lengthOfLastWord</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> s<span class="token punctuation">:</span> <span class="token builtin">str</span><span class="token punctuation">)</span> <span class="token operator">-</span><span class="token operator">></span> <span class="token builtin">int</span><span class="token punctuation">:</span>        <span class="token comment"># s = s.rstrip(" ")</span>        <span class="token comment"># num = 0</span>        <span class="token comment"># if len(s) == 1:</span>        <span class="token comment">#     return 1</span>        <span class="token comment"># for i in range(-1, -len(s)-1, -1):</span>        <span class="token comment">#     if s[i] == " ":</span>        <span class="token comment">#         break</span>        <span class="token comment">#     num += 1</span>        <span class="token comment"># return num</span>                <span class="token comment"># ç”¨å†…ç½®æ–¹æ³•</span>        <span class="token keyword">return</span> <span class="token builtin">len</span><span class="token punctuation">(</span>s<span class="token punctuation">.</span>rstrip<span class="token punctuation">(</span><span class="token string">" "</span><span class="token punctuation">)</span><span class="token punctuation">.</span>split<span class="token punctuation">(</span><span class="token string">" "</span><span class="token punctuation">)</span><span class="token punctuation">[</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">.</span>lstrip<span class="token punctuation">(</span><span class="token string">" "</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h2 id="èºæ—‹çŸ©é˜µII-leetcode"><a href="#èºæ—‹çŸ©é˜µII-leetcode" class="headerlink" title="èºæ—‹çŸ©é˜µII -leetcode"></a>èºæ—‹çŸ©é˜µII -leetcode</h2><blockquote><p> ç»™ä½ ä¸€ä¸ªæ­£æ•´æ•° <code>n</code> ï¼Œç”Ÿæˆä¸€ä¸ªåŒ…å« <code>1</code> åˆ° <code>n**2</code> æ‰€æœ‰å…ƒç´ ï¼Œä¸”å…ƒç´ æŒ‰é¡ºæ—¶é’ˆé¡ºåºèºæ—‹æ’åˆ—çš„ <code>n x n</code> æ­£æ–¹å½¢çŸ©é˜µ <code>matrix</code> ã€‚ </p></blockquote><pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token keyword">class</span> <span class="token class-name">Solution</span><span class="token punctuation">:</span>    <span class="token triple-quoted-string string">"""     æ¨¡æ‹Ÿæ–¹å‘ï¼Œ æŒ‰ç…§é¡ºåºå¡«å…¥æ•°å­—     [[1,2,3],       [9,10,4],      [8,7,6]]    """</span>    <span class="token keyword">def</span> <span class="token function">generateMatrix</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> n<span class="token punctuation">:</span> <span class="token builtin">int</span><span class="token punctuation">)</span> <span class="token operator">-</span><span class="token operator">></span> List<span class="token punctuation">[</span>List<span class="token punctuation">[</span><span class="token builtin">int</span><span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">:</span>        left <span class="token operator">=</span> <span class="token number">0</span>        right <span class="token operator">=</span> n <span class="token operator">-</span><span class="token number">1</span>        top <span class="token operator">=</span> <span class="token number">0</span>        bottom <span class="token operator">=</span> n<span class="token operator">-</span><span class="token number">1</span>        board <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">[</span><span class="token string">"-"</span><span class="token punctuation">]</span><span class="token operator">*</span>n <span class="token keyword">for</span> _ <span class="token keyword">in</span> <span class="token builtin">range</span><span class="token punctuation">(</span>n<span class="token punctuation">)</span><span class="token punctuation">]</span>        start <span class="token operator">=</span> <span class="token number">0</span>        <span class="token keyword">while</span> top <span class="token operator">&lt;=</span> bottom <span class="token keyword">and</span> left <span class="token operator">&lt;=</span> right<span class="token punctuation">:</span>            <span class="token keyword">for</span> col <span class="token keyword">in</span> <span class="token builtin">range</span><span class="token punctuation">(</span>left<span class="token punctuation">,</span> right<span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">:</span>                start <span class="token operator">+=</span> <span class="token number">1</span>                board<span class="token punctuation">[</span>top<span class="token punctuation">]</span><span class="token punctuation">[</span>col<span class="token punctuation">]</span> <span class="token operator">=</span> start            <span class="token keyword">for</span> row <span class="token keyword">in</span> <span class="token builtin">range</span><span class="token punctuation">(</span>top<span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">,</span> bottom <span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">:</span>                start <span class="token operator">+=</span> <span class="token number">1</span>                board<span class="token punctuation">[</span>row<span class="token punctuation">]</span><span class="token punctuation">[</span>right<span class="token punctuation">]</span> <span class="token operator">=</span> start                        <span class="token keyword">if</span> left <span class="token operator">&lt;</span> right <span class="token keyword">and</span> top <span class="token operator">&lt;</span> bottom<span class="token punctuation">:</span>                <span class="token keyword">for</span> col <span class="token keyword">in</span> <span class="token builtin">range</span><span class="token punctuation">(</span>right<span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">,</span> left<span class="token punctuation">,</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">:</span>                    start <span class="token operator">+=</span> <span class="token number">1</span>                                        board<span class="token punctuation">[</span>bottom<span class="token punctuation">]</span><span class="token punctuation">[</span>col<span class="token punctuation">]</span> <span class="token operator">=</span> start                     <span class="token keyword">for</span> row <span class="token keyword">in</span> <span class="token builtin">range</span><span class="token punctuation">(</span>bottom<span class="token punctuation">,</span> top<span class="token punctuation">,</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">:</span>                    start<span class="token operator">+=</span> <span class="token number">1</span>                    board<span class="token punctuation">[</span>row<span class="token punctuation">]</span><span class="token punctuation">[</span>left<span class="token punctuation">]</span> <span class="token operator">=</span> start                        top <span class="token operator">+=</span> <span class="token number">1</span>            bottom <span class="token operator">-=</span> <span class="token number">1</span>            left <span class="token operator">+=</span> <span class="token number">1</span>            right <span class="token operator">-=</span> <span class="token number">1</span>        <span class="token keyword">return</span> board<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h2 id="æ’åºåºåˆ—-leetcode-60"><a href="#æ’åºåºåˆ—-leetcode-60" class="headerlink" title="æ’åºåºåˆ—-leetcode-60"></a>æ’åºåºåˆ—-leetcode-60</h2><blockquote><p>ç»™å‡ºé›†åˆ [1,2,3,â€¦,n]ï¼Œå…¶æ‰€æœ‰å…ƒç´ å…±æœ‰ n! ç§æ’åˆ—ã€‚</p><p>æŒ‰å¤§å°é¡ºåºåˆ—å‡ºæ‰€æœ‰æ’åˆ—æƒ…å†µï¼Œå¹¶ä¸€ä¸€æ ‡è®°ï¼Œå½“ n &#x3D; 3 æ—¶, æ‰€æœ‰æ’åˆ—å¦‚ä¸‹ï¼š</p><p>â€œ123â€<br>â€œ132â€<br>â€œ213â€<br>â€œ231â€<br>â€œ312â€<br>â€œ321â€<br>ç»™å®š n å’Œ kï¼Œè¿”å›ç¬¬ k ä¸ªæ’åˆ—</p></blockquote><pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token comment">#ä¼šè¶…æ—¶</span><span class="token keyword">class</span> <span class="token class-name">Solution</span><span class="token punctuation">:</span>    <span class="token triple-quoted-string string">"""    é€‚ç”¨å›æº¯æ³•    """</span>    <span class="token keyword">def</span> <span class="token function">getPermutation</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> n<span class="token punctuation">:</span> <span class="token builtin">int</span><span class="token punctuation">,</span> k<span class="token punctuation">:</span> <span class="token builtin">int</span><span class="token punctuation">)</span> <span class="token operator">-</span><span class="token operator">></span> <span class="token builtin">str</span><span class="token punctuation">:</span>        sums <span class="token operator">=</span> <span class="token punctuation">[</span>i <span class="token keyword">for</span> i <span class="token keyword">in</span> <span class="token builtin">range</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> n<span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">]</span>        <span class="token keyword">print</span><span class="token punctuation">(</span>sums<span class="token punctuation">)</span>        path <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>        result <span class="token operator">=</span> <span class="token builtin">list</span><span class="token punctuation">(</span><span class="token punctuation">)</span>        <span class="token keyword">def</span> <span class="token function">backtracing</span><span class="token punctuation">(</span>startindex<span class="token punctuation">,</span> path<span class="token punctuation">,</span> depth<span class="token punctuation">,</span> used<span class="token punctuation">)</span><span class="token punctuation">:</span>            <span class="token keyword">if</span> depth <span class="token operator">==</span> n<span class="token punctuation">:</span>                result<span class="token punctuation">.</span>append<span class="token punctuation">(</span>path<span class="token punctuation">[</span><span class="token punctuation">:</span><span class="token punctuation">]</span><span class="token punctuation">)</span>                <span class="token keyword">return</span>            <span class="token keyword">for</span> i <span class="token keyword">in</span> <span class="token builtin">range</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> n<span class="token punctuation">)</span><span class="token punctuation">:</span>                <span class="token keyword">if</span> used<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">:</span>                    <span class="token keyword">continue</span>                path<span class="token punctuation">.</span>append<span class="token punctuation">(</span><span class="token builtin">str</span><span class="token punctuation">(</span>sums<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">)</span>                used<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token boolean">True</span>                backtracing<span class="token punctuation">(</span>startindex <span class="token operator">+</span><span class="token number">1</span> <span class="token punctuation">,</span> path<span class="token punctuation">,</span> depth <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">,</span> used<span class="token punctuation">)</span>                path<span class="token punctuation">.</span>pop<span class="token punctuation">(</span><span class="token punctuation">)</span>                used<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token boolean">False</span>        backtracing<span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> path<span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token punctuation">&#123;</span>i<span class="token punctuation">:</span> <span class="token boolean">False</span> <span class="token keyword">for</span> i <span class="token keyword">in</span> <span class="token builtin">range</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> n<span class="token punctuation">)</span><span class="token punctuation">&#125;</span><span class="token punctuation">)</span>        <span class="token keyword">return</span> <span class="token string">""</span><span class="token punctuation">.</span>join<span class="token punctuation">(</span>result<span class="token punctuation">[</span>k<span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h2 id="æ—‹è½¬é“¾è¡¨"><a href="#æ—‹è½¬é“¾è¡¨" class="headerlink" title="æ—‹è½¬é“¾è¡¨"></a>æ—‹è½¬é“¾è¡¨</h2><blockquote><p> ç»™ä½ ä¸€ä¸ªé“¾è¡¨çš„å¤´èŠ‚ç‚¹ <code>head</code> ï¼Œæ—‹è½¬é“¾è¡¨ï¼Œå°†é“¾è¡¨æ¯ä¸ªèŠ‚ç‚¹å‘å³ç§»åŠ¨ <code>k</code> ä¸ªä½ç½®ã€‚ </p></blockquote><pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token comment"># Definition for singly-linked list.</span><span class="token comment"># class ListNode:</span><span class="token comment">#     def __init__(self, val=0, next=None):</span><span class="token comment">#         self.val = val</span><span class="token comment">#         self.next = next</span><span class="token keyword">class</span> <span class="token class-name">Solution</span><span class="token punctuation">:</span>        <span class="token triple-quoted-string string">"""    1. è®¡ç®—é“¾è¡¨çš„é•¿åº¦    2. æ‰¾å‡ºå€’æ•°ç¬¬k+1 ä¸ªèŠ‚ç‚¹     (len(head) - k) % len(head)        3. è½¬ä¸ºå¾ªç¯é“¾è¡¨    4. åœ¨ç¬¬k+1 ä¸ªèŠ‚ç‚¹å¤„æ–­å¼€        """</span>    <span class="token keyword">def</span> <span class="token function">rotateRight</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> head<span class="token punctuation">:</span> ListNode<span class="token punctuation">,</span> k<span class="token punctuation">:</span> <span class="token builtin">int</span><span class="token punctuation">)</span><span class="token punctuation">:</span>        <span class="token keyword">if</span> k <span class="token operator">==</span> <span class="token number">0</span> <span class="token keyword">or</span> <span class="token keyword">not</span> head <span class="token keyword">or</span> <span class="token keyword">not</span> head<span class="token punctuation">.</span><span class="token builtin">next</span><span class="token punctuation">:</span>            <span class="token keyword">return</span> head        n <span class="token operator">=</span> <span class="token number">1</span>        cur <span class="token operator">=</span> head                <span class="token keyword">while</span> cur<span class="token punctuation">.</span><span class="token builtin">next</span><span class="token punctuation">:</span>            cur <span class="token operator">=</span> cur<span class="token punctuation">.</span><span class="token builtin">next</span>  <span class="token comment"># æœ€åä¸€ä¸ªèŠ‚ç‚¹</span>            n <span class="token operator">+=</span> <span class="token number">1</span>        <span class="token comment"># å¯»æ‰¾æ–°é“¾è¡¨çš„ç»“å°¾ä½ç½®</span>        end <span class="token operator">=</span> <span class="token punctuation">(</span>n <span class="token operator">-</span> k<span class="token punctuation">)</span> <span class="token operator">%</span>n  <span class="token comment"># ä½™æ•°å³ä¸ºå€’æ•°ç¬¬k+1ä¸ªä½ç½®</span>        cur<span class="token punctuation">.</span><span class="token builtin">next</span> <span class="token operator">=</span> head   <span class="token comment"># ä½¿é“¾è¡¨æ”¶å°¾ç›¸è¿</span>        <span class="token keyword">if</span> end <span class="token operator">==</span> n<span class="token punctuation">:</span>            <span class="token keyword">return</span> end<span class="token punctuation">(</span><span class="token punctuation">)</span>        <span class="token keyword">while</span> end <span class="token operator">></span><span class="token number">0</span><span class="token punctuation">:</span>            cur <span class="token operator">=</span> cur<span class="token punctuation">.</span><span class="token builtin">next</span>            end <span class="token operator">-=</span> <span class="token number">1</span>        <span class="token comment"># ç»“æŸå¾ªç¯ï¼Œæ­¤æ—¶curå¤„äºå¾ªç¯é“¾è¡¨çš„ç»“å°¾ä½ç½®</span>        ret <span class="token operator">=</span> cur<span class="token punctuation">.</span><span class="token builtin">next</span>        cur<span class="token punctuation">.</span><span class="token builtin">next</span> <span class="token operator">=</span> <span class="token boolean">None</span>  <span class="token comment"># å°†é“¾è¡¨æ–­å¼€</span>        <span class="token keyword">return</span> ret        <span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h2 id="ä¸åŒè·¯å¾„-leetcode-62"><a href="#ä¸åŒè·¯å¾„-leetcode-62" class="headerlink" title="ä¸åŒè·¯å¾„-leetcode 62"></a>ä¸åŒè·¯å¾„-leetcode 62</h2><blockquote><p>ä¸€ä¸ªæœºå™¨äººä½äºä¸€ä¸ª m x n ç½‘æ ¼çš„å·¦ä¸Šè§’ ï¼ˆèµ·å§‹ç‚¹åœ¨ä¸‹å›¾ä¸­æ ‡è®°ä¸º â€œStartâ€ ï¼‰ã€‚</p><p>æœºå™¨äººæ¯æ¬¡åªèƒ½å‘ä¸‹æˆ–è€…å‘å³ç§»åŠ¨ä¸€æ­¥ã€‚æœºå™¨äººè¯•å›¾è¾¾åˆ°ç½‘æ ¼çš„å³ä¸‹è§’ï¼ˆåœ¨ä¸‹å›¾ä¸­æ ‡è®°ä¸º â€œFinishâ€ ï¼‰ã€‚</p><p>é—®æ€»å…±æœ‰å¤šå°‘æ¡ä¸åŒçš„è·¯å¾„ï¼Ÿ</p></blockquote><pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token keyword">class</span> <span class="token class-name">Solution</span><span class="token punctuation">:</span>    <span class="token keyword">def</span> <span class="token function">uniquePaths</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> m<span class="token punctuation">:</span> <span class="token builtin">int</span><span class="token punctuation">,</span> n<span class="token punctuation">:</span> <span class="token builtin">int</span><span class="token punctuation">)</span> <span class="token operator">-</span><span class="token operator">></span> <span class="token builtin">int</span><span class="token punctuation">:</span>        <span class="token comment"># dp[i][j] åœ¨ijä½ç½®å¤„çš„æ‰€æœ‰è·¯å¾„</span>        <span class="token comment"># é€’æ¨æ–¹ç¨‹ dp[i][j] =dp[i][j] + dp[i-1][j] + dp[i][j-1]</span>        <span class="token comment"># ç”Ÿæˆdp   åˆå§‹åŒ–ï¼Œ åªæœ‰ä¸€è¡Œï¼Œæˆ–è€…åªæœ‰ä¸€åˆ— åªæœ‰ä¸€ç§èµ°æ³•</span>                dp <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">*</span>n<span class="token punctuation">]</span> <span class="token operator">+</span> <span class="token punctuation">[</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token operator">+</span> <span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token operator">*</span> <span class="token punctuation">(</span>n<span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span> <span class="token keyword">for</span> _ <span class="token keyword">in</span> <span class="token builtin">range</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> m<span class="token punctuation">)</span><span class="token punctuation">]</span>        <span class="token keyword">for</span> i <span class="token keyword">in</span> <span class="token builtin">range</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> m<span class="token punctuation">)</span><span class="token punctuation">:</span>            <span class="token keyword">for</span> j <span class="token keyword">in</span> <span class="token builtin">range</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> n<span class="token punctuation">)</span><span class="token punctuation">:</span>                dp<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">[</span>j<span class="token punctuation">]</span> <span class="token operator">=</span> dp<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">[</span>j<span class="token punctuation">]</span> <span class="token operator">+</span> dp<span class="token punctuation">[</span>i<span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">[</span>j<span class="token punctuation">]</span> <span class="token operator">+</span> dp<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">[</span>j<span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">]</span>        <span class="token keyword">return</span> dp<span class="token punctuation">[</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">]</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h2 id="ä¸åŒè·¯å¾„II"><a href="#ä¸åŒè·¯å¾„II" class="headerlink" title="ä¸åŒè·¯å¾„II"></a>ä¸åŒè·¯å¾„II</h2><blockquote><p> ä¸€ä¸ªæœºå™¨äººä½äºä¸€ä¸ª m x n ç½‘æ ¼çš„å·¦ä¸Šè§’ ï¼ˆèµ·å§‹ç‚¹åœ¨ä¸‹å›¾ä¸­æ ‡è®°ä¸º â€œStartâ€ ï¼‰ã€‚</p><p>æœºå™¨äººæ¯æ¬¡åªèƒ½å‘ä¸‹æˆ–è€…å‘å³ç§»åŠ¨ä¸€æ­¥ã€‚æœºå™¨äººè¯•å›¾è¾¾åˆ°ç½‘æ ¼çš„å³ä¸‹è§’ï¼ˆåœ¨ä¸‹å›¾ä¸­æ ‡è®°ä¸º â€œFinishâ€ï¼‰ã€‚</p><p>ç°åœ¨è€ƒè™‘ç½‘æ ¼ä¸­æœ‰éšœç¢ç‰©ã€‚é‚£ä¹ˆä»å·¦ä¸Šè§’åˆ°å³ä¸‹è§’å°†ä¼šæœ‰å¤šå°‘æ¡ä¸åŒçš„è·¯å¾„ï¼Ÿ</p><p>ç½‘æ ¼ä¸­çš„éšœç¢ç‰©å’Œç©ºä½ç½®åˆ†åˆ«ç”¨ 1 å’Œ 0 æ¥è¡¨ç¤ºã€‚</p></blockquote><pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token keyword">class</span> <span class="token class-name">Solution</span><span class="token punctuation">:</span>    <span class="token keyword">def</span> <span class="token function">uniquePathsWithObstacles</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> obstacleGrid<span class="token punctuation">:</span> List<span class="token punctuation">[</span>List<span class="token punctuation">[</span><span class="token builtin">int</span><span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token operator">-</span><span class="token operator">></span> <span class="token builtin">int</span><span class="token punctuation">:</span>        <span class="token triple-quoted-string string">"""        1. dp[i][j]åˆ°è¾¾(i)(j)çš„è·¯å¾„æ•°        2. é€’æ¨å…¬å¼: dp[i][j] = dp[i][j] + dp[i-1][j] + dp[i][j-1]                    dp[i][j] = 0  # (i, j) å¤„æœ‰éšœç¢ç‰©ä½“        3. åˆå§‹åŒ–         """</span>        dp <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">*</span> <span class="token builtin">len</span><span class="token punctuation">(</span>obstacleGrid<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token keyword">for</span> _ <span class="token keyword">in</span> <span class="token builtin">range</span><span class="token punctuation">(</span><span class="token builtin">len</span><span class="token punctuation">(</span>obstacleGrid<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">]</span>        <span class="token keyword">for</span> i <span class="token keyword">in</span> <span class="token builtin">range</span><span class="token punctuation">(</span><span class="token builtin">len</span><span class="token punctuation">(</span>obstacleGrid<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">:</span>            <span class="token keyword">for</span> j <span class="token keyword">in</span> <span class="token builtin">range</span><span class="token punctuation">(</span><span class="token builtin">len</span><span class="token punctuation">(</span>obstacleGrid<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">:</span>                <span class="token keyword">if</span> i <span class="token operator">==</span><span class="token number">0</span> <span class="token keyword">and</span> j <span class="token operator">==</span><span class="token number">0</span> <span class="token keyword">and</span> obstacleGrid<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">[</span>j<span class="token punctuation">]</span> <span class="token operator">!=</span><span class="token number">1</span><span class="token punctuation">:</span>                    dp<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">[</span>j<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token number">1</span>                <span class="token keyword">else</span><span class="token punctuation">:</span>                    <span class="token keyword">if</span> obstacleGrid<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">[</span>j<span class="token punctuation">]</span> <span class="token operator">==</span> <span class="token number">0</span><span class="token punctuation">:</span>                        dp<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">[</span>j<span class="token punctuation">]</span> <span class="token operator">=</span> dp<span class="token punctuation">[</span>i<span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">[</span>j<span class="token punctuation">]</span> <span class="token operator">+</span> dp<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">[</span>j<span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">]</span>        <span class="token keyword">return</span> dp<span class="token punctuation">[</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">]</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h2 id="æœ€å°è·¯å¾„å’Œ-leetcode-64"><a href="#æœ€å°è·¯å¾„å’Œ-leetcode-64" class="headerlink" title="æœ€å°è·¯å¾„å’Œ - leetcode 64"></a>æœ€å°è·¯å¾„å’Œ - leetcode 64</h2><blockquote><p>ç»™å®šä¸€ä¸ªåŒ…å«éè´Ÿæ•´æ•°çš„ <code>*m* x *n*</code> ç½‘æ ¼ <code>grid</code> ï¼Œè¯·æ‰¾å‡ºä¸€æ¡ä»å·¦ä¸Šè§’åˆ°å³ä¸‹è§’çš„è·¯å¾„ï¼Œä½¿å¾—è·¯å¾„ä¸Šçš„æ•°å­—æ€»å’Œä¸ºæœ€å°ã€‚</p><p><strong>è¯´æ˜ï¼š</strong>æ¯æ¬¡åªèƒ½å‘ä¸‹æˆ–è€…å‘å³ç§»åŠ¨ä¸€æ­¥ã€‚</p></blockquote><pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token keyword">class</span> <span class="token class-name">Solution</span><span class="token punctuation">:</span>    <span class="token keyword">def</span> <span class="token function">minPathSum</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> grid<span class="token punctuation">:</span> List<span class="token punctuation">[</span>List<span class="token punctuation">[</span><span class="token builtin">int</span><span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token operator">-</span><span class="token operator">></span> <span class="token builtin">int</span><span class="token punctuation">:</span>        <span class="token triple-quoted-string string">"""        dp[i][j] åœ¨ï¼ˆiï¼Œjï¼‰ å¤„æœ€å°æ•°å­—æ€»å’Œ        dp[i][j] = min(dp[i-1][j], dp[i][j-1]) + grid[i][j]        """</span>        <span class="token keyword">for</span>  i <span class="token keyword">in</span> <span class="token builtin">range</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token builtin">len</span><span class="token punctuation">(</span>grid<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">:</span>                        grid<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">+=</span>  grid<span class="token punctuation">[</span>i<span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span>        <span class="token keyword">for</span> j <span class="token keyword">in</span> <span class="token builtin">range</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token builtin">len</span><span class="token punctuation">(</span>grid<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">:</span>            grid<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">[</span>j<span class="token punctuation">]</span> <span class="token operator">+=</span> grid<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">[</span>j<span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">]</span>                <span class="token keyword">print</span><span class="token punctuation">(</span>grid<span class="token punctuation">)</span>        <span class="token keyword">for</span> i <span class="token keyword">in</span> <span class="token builtin">range</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token builtin">len</span><span class="token punctuation">(</span>grid<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">:</span>            <span class="token keyword">for</span> j <span class="token keyword">in</span> <span class="token builtin">range</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token builtin">len</span><span class="token punctuation">(</span>grid<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">:</span>                grid<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">[</span>j<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token builtin">min</span><span class="token punctuation">(</span>grid<span class="token punctuation">[</span>i<span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">[</span>j<span class="token punctuation">]</span><span class="token punctuation">,</span> grid<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">[</span>j<span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token operator">+</span> grid<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">[</span>j<span class="token punctuation">]</span>                <span class="token keyword">return</span> grid<span class="token punctuation">[</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">]</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h2 id="åŠ ä¸€-leetcode-66"><a href="#åŠ ä¸€-leetcode-66" class="headerlink" title="åŠ ä¸€ -leetcode 66"></a>åŠ ä¸€ -leetcode 66</h2><blockquote><p>ç»™å®šä¸€ä¸ªç”± æ•´æ•° ç»„æˆçš„ éç©º æ•°ç»„æ‰€è¡¨ç¤ºçš„éè´Ÿæ•´æ•°ï¼Œåœ¨è¯¥æ•°çš„åŸºç¡€ä¸ŠåŠ ä¸€ã€‚</p><p>æœ€é«˜ä½æ•°å­—å­˜æ”¾åœ¨æ•°ç»„çš„é¦–ä½ï¼Œ æ•°ç»„ä¸­æ¯ä¸ªå…ƒç´ åªå­˜å‚¨å•ä¸ªæ•°å­—ã€‚</p><p>ä½ å¯ä»¥å‡è®¾é™¤äº†æ•´æ•° 0 ä¹‹å¤–ï¼Œè¿™ä¸ªæ•´æ•°ä¸ä¼šä»¥é›¶å¼€å¤´ã€‚</p></blockquote><pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token keyword">class</span> <span class="token class-name">Solution</span><span class="token punctuation">:</span>    <span class="token keyword">def</span> <span class="token function">plusOne</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> digits<span class="token punctuation">:</span> List<span class="token punctuation">[</span><span class="token builtin">int</span><span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token operator">-</span><span class="token operator">></span> List<span class="token punctuation">[</span><span class="token builtin">int</span><span class="token punctuation">]</span><span class="token punctuation">:</span>        <span class="token keyword">if</span> <span class="token keyword">not</span> digits<span class="token punctuation">:</span>            <span class="token keyword">return</span> digits        digits <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">+</span> digits        digits<span class="token punctuation">[</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">+=</span> <span class="token number">1</span>        flag <span class="token operator">=</span> <span class="token number">0</span>        <span class="token keyword">for</span> i <span class="token keyword">in</span> <span class="token builtin">range</span><span class="token punctuation">(</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token operator">-</span><span class="token builtin">len</span><span class="token punctuation">(</span>digits<span class="token punctuation">)</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">:</span>                        num <span class="token operator">=</span> <span class="token punctuation">(</span>digits<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">+</span> flag<span class="token punctuation">)</span> <span class="token operator">%</span> <span class="token number">10</span>            flag <span class="token operator">=</span> <span class="token punctuation">(</span>digits<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">+</span> flag<span class="token punctuation">)</span> <span class="token operator">//</span> <span class="token number">10</span>            digits<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">=</span> num        <span class="token keyword">return</span> digits<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">:</span><span class="token punctuation">]</span> <span class="token keyword">if</span> digits<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">==</span> <span class="token number">0</span> <span class="token keyword">else</span> digits               <span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h2 id="äºŒè¿›åˆ¶æ±‚å’Œ"><a href="#äºŒè¿›åˆ¶æ±‚å’Œ" class="headerlink" title="äºŒè¿›åˆ¶æ±‚å’Œ"></a>äºŒè¿›åˆ¶æ±‚å’Œ</h2><blockquote><p> ç»™ä½ ä¸¤ä¸ªäºŒè¿›åˆ¶å­—ç¬¦ä¸² <code>a</code> å’Œ <code>b</code> ï¼Œä»¥äºŒè¿›åˆ¶å­—ç¬¦ä¸²çš„å½¢å¼è¿”å›å®ƒä»¬çš„å’Œã€‚ </p></blockquote><pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token keyword">class</span> <span class="token class-name">Solution</span><span class="token punctuation">:</span>    <span class="token keyword">def</span> <span class="token function">addBinary</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> a<span class="token punctuation">:</span> <span class="token builtin">str</span><span class="token punctuation">,</span> b<span class="token punctuation">:</span> <span class="token builtin">str</span><span class="token punctuation">)</span> <span class="token operator">-</span><span class="token operator">></span> <span class="token builtin">str</span><span class="token punctuation">:</span>        n <span class="token operator">=</span> <span class="token builtin">max</span><span class="token punctuation">(</span><span class="token builtin">len</span><span class="token punctuation">(</span>a<span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token builtin">len</span><span class="token punctuation">(</span>b<span class="token punctuation">)</span><span class="token punctuation">)</span>        a <span class="token operator">=</span>  <span class="token string">"0"</span> <span class="token operator">+</span> <span class="token punctuation">(</span>n <span class="token operator">-</span> <span class="token builtin">len</span><span class="token punctuation">(</span>a<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token operator">*</span> <span class="token string">"0"</span> <span class="token operator">+</span> a        b <span class="token operator">=</span> <span class="token string">"0"</span> <span class="token operator">+</span> <span class="token punctuation">(</span>n <span class="token operator">-</span> <span class="token builtin">len</span><span class="token punctuation">(</span>b<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token operator">*</span> <span class="token string">"0"</span> <span class="token operator">+</span> b        flag <span class="token operator">=</span> <span class="token number">0</span>        ret <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">*</span> <span class="token builtin">len</span><span class="token punctuation">(</span>a<span class="token punctuation">)</span>        <span class="token keyword">for</span> i <span class="token keyword">in</span> <span class="token builtin">range</span><span class="token punctuation">(</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token operator">-</span><span class="token builtin">len</span><span class="token punctuation">(</span>ret<span class="token punctuation">)</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">:</span>            num <span class="token operator">=</span> <span class="token builtin">ord</span><span class="token punctuation">(</span>a<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token operator">-</span> <span class="token builtin">ord</span><span class="token punctuation">(</span><span class="token string">"0"</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token builtin">ord</span><span class="token punctuation">(</span>b<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token operator">-</span> <span class="token builtin">ord</span><span class="token punctuation">(</span><span class="token string">"0"</span><span class="token punctuation">)</span> <span class="token operator">+</span> flag            cur <span class="token operator">=</span> num <span class="token operator">%</span><span class="token number">2</span>             flag <span class="token operator">=</span> num<span class="token operator">//</span><span class="token number">2</span>            ret<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token builtin">str</span><span class="token punctuation">(</span>cur<span class="token punctuation">)</span>        <span class="token keyword">if</span> <span class="token builtin">len</span><span class="token punctuation">(</span>ret<span class="token punctuation">)</span> <span class="token operator">==</span> <span class="token number">1</span><span class="token punctuation">:</span>            <span class="token keyword">return</span> <span class="token string">""</span><span class="token punctuation">.</span>join<span class="token punctuation">(</span>ret<span class="token punctuation">)</span>        ret <span class="token operator">=</span> ret<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">:</span><span class="token punctuation">]</span> <span class="token keyword">if</span> ret<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">==</span> <span class="token string">"0"</span> <span class="token keyword">else</span> ret        <span class="token keyword">return</span> <span class="token string">""</span><span class="token punctuation">.</span>join<span class="token punctuation">(</span>ret<span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h2 id="xçš„å¹³æ–¹æ ¹-leetcode-69"><a href="#xçš„å¹³æ–¹æ ¹-leetcode-69" class="headerlink" title="xçš„å¹³æ–¹æ ¹ - leetcode 69"></a>xçš„å¹³æ–¹æ ¹ - leetcode 69</h2><blockquote><p>ç»™ä½ ä¸€ä¸ªéè´Ÿæ•´æ•° x ï¼Œè®¡ç®—å¹¶è¿”å› x çš„ ç®—æœ¯å¹³æ–¹æ ¹ ã€‚</p><p>ç”±äºè¿”å›ç±»å‹æ˜¯æ•´æ•°ï¼Œç»“æœåªä¿ç•™ æ•´æ•°éƒ¨åˆ† ï¼Œå°æ•°éƒ¨åˆ†å°†è¢« èˆå» ã€‚</p><p>æ³¨æ„ï¼šä¸å…è®¸ä½¿ç”¨ä»»ä½•å†…ç½®æŒ‡æ•°å‡½æ•°å’Œç®—ç¬¦ï¼Œä¾‹å¦‚ pow(x, 0.5) æˆ–è€… x ** 0.5</p></blockquote><pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token keyword">class</span> <span class="token class-name">Solution</span><span class="token punctuation">:</span>    <span class="token triple-quoted-string string">"""    ç»“æœå‘ä¸‹å–æ•´    """</span>    <span class="token keyword">def</span> <span class="token function">mySqrt</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> x<span class="token punctuation">:</span> <span class="token builtin">int</span><span class="token punctuation">)</span> <span class="token operator">-</span><span class="token operator">></span> <span class="token builtin">int</span><span class="token punctuation">:</span>        left<span class="token punctuation">,</span> right<span class="token punctuation">,</span> ans <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">,</span> x<span class="token punctuation">,</span> <span class="token number">0</span>        <span class="token keyword">if</span> x <span class="token keyword">in</span> <span class="token punctuation">&#123;</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">&#125;</span><span class="token punctuation">:</span>            <span class="token keyword">return</span> x        <span class="token keyword">while</span> left <span class="token operator">&lt;=</span>right<span class="token punctuation">:</span>            mid <span class="token operator">=</span> <span class="token punctuation">(</span>left <span class="token operator">+</span> right<span class="token punctuation">)</span> <span class="token operator">//</span> <span class="token number">2</span>            <span class="token keyword">if</span> mid <span class="token operator">*</span> mid <span class="token operator">&lt;=</span> x <span class="token keyword">and</span> <span class="token punctuation">(</span>mid<span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token operator">*</span><span class="token punctuation">(</span>mid<span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">)</span> <span class="token operator">></span>x<span class="token punctuation">:</span>                <span class="token keyword">return</span> mid            <span class="token keyword">elif</span> mid <span class="token operator">*</span> mid <span class="token operator">&lt;</span>x<span class="token punctuation">:</span>                left <span class="token operator">=</span> mid<span class="token operator">+</span><span class="token number">1</span>                        <span class="token keyword">else</span><span class="token punctuation">:</span>                right <span class="token operator">=</span> mid<span class="token operator">-</span><span class="token number">1</span>        <span class="token keyword">return</span> x<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h2 id="çˆ¬æ¥¼æ¢¯"><a href="#çˆ¬æ¥¼æ¢¯" class="headerlink" title="çˆ¬æ¥¼æ¢¯"></a>çˆ¬æ¥¼æ¢¯</h2><blockquote><p>å‡è®¾ä½ æ­£åœ¨çˆ¬æ¥¼æ¢¯ã€‚éœ€è¦ <code>n</code> é˜¶ä½ æ‰èƒ½åˆ°è¾¾æ¥¼é¡¶ã€‚</p><p>æ¯æ¬¡ä½ å¯ä»¥çˆ¬ <code>1</code> æˆ– <code>2</code> ä¸ªå°é˜¶ã€‚ä½ æœ‰å¤šå°‘ç§ä¸åŒçš„æ–¹æ³•å¯ä»¥çˆ¬åˆ°æ¥¼é¡¶å‘¢ï¼Ÿ</p></blockquote><pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token keyword">class</span> <span class="token class-name">Solution</span><span class="token punctuation">:</span>    <span class="token keyword">def</span> <span class="token function">climbStairs</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> n<span class="token punctuation">:</span> <span class="token builtin">int</span><span class="token punctuation">)</span> <span class="token operator">-</span><span class="token operator">></span> <span class="token builtin">int</span><span class="token punctuation">:</span>        dp <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">]</span>        <span class="token keyword">if</span> n <span class="token keyword">in</span> <span class="token punctuation">&#123;</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">&#125;</span><span class="token punctuation">:</span>            <span class="token keyword">return</span> dp<span class="token punctuation">[</span>n<span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">]</span>        x <span class="token operator">=</span> <span class="token number">3</span>        <span class="token keyword">while</span> x <span class="token operator">&lt;=</span> n<span class="token punctuation">:</span>            dp<span class="token punctuation">.</span>append<span class="token punctuation">(</span>dp<span class="token punctuation">[</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">+</span> dp<span class="token punctuation">[</span><span class="token operator">-</span><span class="token number">2</span><span class="token punctuation">]</span><span class="token punctuation">)</span>            x <span class="token operator">+=</span><span class="token number">1</span>         <span class="token keyword">return</span> dp<span class="token punctuation">[</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">]</span>        <span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h2 id="ç®€åŒ–è·¯å¾„-leetcode-71"><a href="#ç®€åŒ–è·¯å¾„-leetcode-71" class="headerlink" title="ç®€åŒ–è·¯å¾„ -leetcode 71"></a>ç®€åŒ–è·¯å¾„ -leetcode 71</h2><blockquote><p>ç»™ä½ ä¸€ä¸ªå­—ç¬¦ä¸² path ï¼Œè¡¨ç¤ºæŒ‡å‘æŸä¸€æ–‡ä»¶æˆ–ç›®å½•çš„ Unix é£æ ¼ ç»å¯¹è·¯å¾„ ï¼ˆä»¥ â€˜&#x2F;â€˜ å¼€å¤´ï¼‰ï¼Œè¯·ä½ å°†å…¶è½¬åŒ–ä¸ºæ›´åŠ ç®€æ´çš„è§„èŒƒè·¯å¾„ã€‚</p><p>åœ¨ Unix é£æ ¼çš„æ–‡ä»¶ç³»ç»Ÿä¸­ï¼Œä¸€ä¸ªç‚¹ï¼ˆ.ï¼‰è¡¨ç¤ºå½“å‰ç›®å½•æœ¬èº«ï¼›æ­¤å¤–ï¼Œä¸¤ä¸ªç‚¹ ï¼ˆ..ï¼‰ è¡¨ç¤ºå°†ç›®å½•åˆ‡æ¢åˆ°ä¸Šä¸€çº§ï¼ˆæŒ‡å‘çˆ¶ç›®å½•ï¼‰ï¼›ä¸¤è€…éƒ½å¯ä»¥æ˜¯å¤æ‚ç›¸å¯¹è·¯å¾„çš„ç»„æˆéƒ¨åˆ†ã€‚ä»»æ„å¤šä¸ªè¿ç»­çš„æ–œæ ï¼ˆå³ï¼Œâ€™&#x2F;&#x2F;â€˜ï¼‰éƒ½è¢«è§†ä¸ºå•ä¸ªæ–œæ  â€˜&#x2F;â€˜ ã€‚ å¯¹äºæ­¤é—®é¢˜ï¼Œä»»ä½•å…¶ä»–æ ¼å¼çš„ç‚¹ï¼ˆä¾‹å¦‚ï¼Œâ€™â€¦â€™ï¼‰å‡è¢«è§†ä¸ºæ–‡ä»¶&#x2F;ç›®å½•åç§°ã€‚</p><p>è¯·æ³¨æ„ï¼Œè¿”å›çš„ è§„èŒƒè·¯å¾„ å¿…é¡»éµå¾ªä¸‹è¿°æ ¼å¼ï¼š</p><p>å§‹ç»ˆä»¥æ–œæ  â€˜&#x2F;â€˜ å¼€å¤´ã€‚<br>ä¸¤ä¸ªç›®å½•åä¹‹é—´å¿…é¡»åªæœ‰ä¸€ä¸ªæ–œæ  â€˜&#x2F;â€˜ ã€‚<br>æœ€åä¸€ä¸ªç›®å½•åï¼ˆå¦‚æœå­˜åœ¨ï¼‰ä¸èƒ½ ä»¥ â€˜&#x2F;â€˜ ç»“å°¾ã€‚<br>æ­¤å¤–ï¼Œè·¯å¾„ä»…åŒ…å«ä»æ ¹ç›®å½•åˆ°ç›®æ ‡æ–‡ä»¶æˆ–ç›®å½•çš„è·¯å¾„ä¸Šçš„ç›®å½•ï¼ˆå³ï¼Œä¸å« â€˜.â€™ æˆ– â€˜..â€™ï¼‰ã€‚<br>è¿”å›ç®€åŒ–åå¾—åˆ°çš„ è§„èŒƒè·¯å¾„ ã€‚</p></blockquote><pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token keyword">class</span> <span class="token class-name">Solution</span><span class="token punctuation">:</span>    <span class="token triple-quoted-string string">"""    ./  å½“å‰    ../ ä¸Šä¸€çº§    /c èƒ½è¿”å›    """</span>    <span class="token keyword">def</span> <span class="token function">simplifyPath</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> path<span class="token punctuation">:</span> <span class="token builtin">str</span><span class="token punctuation">)</span> <span class="token operator">-</span><span class="token operator">></span> <span class="token builtin">str</span><span class="token punctuation">:</span>        path <span class="token operator">=</span> path<span class="token punctuation">.</span>strip<span class="token punctuation">(</span><span class="token string">"/"</span><span class="token punctuation">)</span>        paths <span class="token operator">=</span> path<span class="token punctuation">.</span>split<span class="token punctuation">(</span><span class="token string">"/"</span><span class="token punctuation">)</span>        stack <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>        <span class="token keyword">for</span> cha <span class="token keyword">in</span> paths<span class="token punctuation">:</span>            <span class="token keyword">if</span> cha <span class="token operator">==</span> <span class="token string">".."</span><span class="token punctuation">:</span>                <span class="token keyword">if</span> stack<span class="token punctuation">:</span>                    stack<span class="token punctuation">.</span>pop<span class="token punctuation">(</span><span class="token punctuation">)</span>            <span class="token keyword">elif</span> cha <span class="token keyword">and</span> cha <span class="token operator">!=</span> <span class="token string">"."</span><span class="token punctuation">:</span>                stack<span class="token punctuation">.</span>append<span class="token punctuation">(</span>cha<span class="token punctuation">)</span>        <span class="token keyword">return</span>  <span class="token string">'/'</span> <span class="token operator">+</span> <span class="token string">'/'</span><span class="token punctuation">.</span>join<span class="token punctuation">(</span>stack<span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h2 id="çŸ©é˜µç½®é›¶-leetcode-73"><a href="#çŸ©é˜µç½®é›¶-leetcode-73" class="headerlink" title="çŸ©é˜µç½®é›¶ - leetcode 73"></a>çŸ©é˜µç½®é›¶ - leetcode 73</h2><blockquote><p> ç»™å®šä¸€ä¸ª <code>*m* x *n*</code> çš„çŸ©é˜µï¼Œå¦‚æœä¸€ä¸ªå…ƒç´ ä¸º <strong>0</strong> ï¼Œåˆ™å°†å…¶æ‰€åœ¨è¡Œå’Œåˆ—çš„æ‰€æœ‰å…ƒç´ éƒ½è®¾ä¸º <strong>0</strong> ã€‚è¯·ä½¿ç”¨ <strong><a href="http://baike.baidu.com/item/%E5%8E%9F%E5%9C%B0%E7%AE%97%E6%B3%95">åŸåœ°</a></strong> ç®—æ³•<strong>ã€‚</strong> </p></blockquote><pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token keyword">class</span> <span class="token class-name">Solution</span><span class="token punctuation">:</span>    <span class="token keyword">def</span> <span class="token function">setZeroes</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> matrix<span class="token punctuation">:</span> List<span class="token punctuation">[</span>List<span class="token punctuation">[</span><span class="token builtin">int</span><span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token operator">-</span><span class="token operator">></span> <span class="token boolean">None</span><span class="token punctuation">:</span>        <span class="token triple-quoted-string string">"""        Do not return anything, modify matrix in-place instead.        """</span>        cols <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">*</span> <span class="token builtin">len</span><span class="token punctuation">(</span>matrix<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">)</span>        rows <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">*</span> <span class="token builtin">len</span><span class="token punctuation">(</span>matrix<span class="token punctuation">)</span>        <span class="token keyword">for</span> i <span class="token keyword">in</span> <span class="token builtin">range</span><span class="token punctuation">(</span><span class="token builtin">len</span><span class="token punctuation">(</span>matrix<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">:</span>            <span class="token keyword">for</span> j <span class="token keyword">in</span> <span class="token builtin">range</span><span class="token punctuation">(</span><span class="token builtin">len</span><span class="token punctuation">(</span>matrix<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">:</span>                <span class="token keyword">if</span> matrix<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">[</span>j<span class="token punctuation">]</span> <span class="token operator">==</span> <span class="token number">0</span><span class="token punctuation">:</span>                    rows<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token number">0</span>                    cols<span class="token punctuation">[</span>j<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token number">0</span>        <span class="token keyword">for</span> i <span class="token keyword">in</span> <span class="token builtin">range</span><span class="token punctuation">(</span><span class="token builtin">len</span><span class="token punctuation">(</span>matrix<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">:</span>            <span class="token keyword">for</span> j <span class="token keyword">in</span> <span class="token builtin">range</span><span class="token punctuation">(</span><span class="token builtin">len</span><span class="token punctuation">(</span>matrix<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">:</span>                <span class="token keyword">if</span> rows<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">==</span> <span class="token number">0</span> <span class="token keyword">or</span> cols<span class="token punctuation">[</span>j<span class="token punctuation">]</span> <span class="token operator">==</span> <span class="token number">0</span><span class="token punctuation">:</span>                    matrix<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">[</span>j<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token number">0</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h2 id="æœç´¢äºŒç»´çŸ©é˜µ"><a href="#æœç´¢äºŒç»´çŸ©é˜µ" class="headerlink" title="æœç´¢äºŒç»´çŸ©é˜µ"></a>æœç´¢äºŒç»´çŸ©é˜µ</h2><blockquote><p>ç¼–å†™ä¸€ä¸ªé«˜æ•ˆçš„ç®—æ³•æ¥åˆ¤æ–­ m x n çŸ©é˜µä¸­ï¼Œæ˜¯å¦å­˜åœ¨ä¸€ä¸ªç›®æ ‡å€¼ã€‚è¯¥çŸ©é˜µå…·æœ‰å¦‚ä¸‹ç‰¹æ€§ï¼š</p><p>æ¯è¡Œä¸­çš„æ•´æ•°ä»å·¦åˆ°å³æŒ‰å‡åºæ’åˆ—ã€‚<br>æ¯è¡Œçš„ç¬¬ä¸€ä¸ªæ•´æ•°å¤§äºå‰ä¸€è¡Œçš„æœ€åä¸€ä¸ªæ•´æ•°ã€‚</p></blockquote><pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token keyword">class</span> <span class="token class-name">Solution</span><span class="token punctuation">:</span>    <span class="token keyword">def</span> <span class="token function">searchMatrix</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> matrix<span class="token punctuation">:</span> List<span class="token punctuation">[</span>List<span class="token punctuation">[</span><span class="token builtin">int</span><span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">,</span> target<span class="token punctuation">:</span> <span class="token builtin">int</span><span class="token punctuation">)</span> <span class="token operator">-</span><span class="token operator">></span> <span class="token builtin">bool</span><span class="token punctuation">:</span>        left<span class="token punctuation">,</span> right <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token builtin">len</span><span class="token punctuation">(</span>matrix<span class="token punctuation">)</span>        <span class="token keyword">while</span> left <span class="token operator">&lt;=</span>right <span class="token keyword">and</span> left <span class="token operator">&lt;</span> <span class="token builtin">len</span><span class="token punctuation">(</span>matrix<span class="token punctuation">)</span><span class="token punctuation">:</span>            mid <span class="token operator">=</span> <span class="token punctuation">(</span>left <span class="token operator">+</span> right<span class="token punctuation">)</span> <span class="token operator">//</span> <span class="token number">2</span>            <span class="token keyword">if</span> matrix<span class="token punctuation">[</span>mid<span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span>  <span class="token operator">></span> target<span class="token punctuation">:</span>                right <span class="token operator">=</span> mid <span class="token operator">-</span> <span class="token number">1</span>                <span class="token keyword">print</span><span class="token punctuation">(</span>right<span class="token punctuation">,</span> <span class="token string">"right"</span><span class="token punctuation">)</span>            <span class="token keyword">elif</span> matrix<span class="token punctuation">[</span>mid<span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">&lt;</span> target<span class="token punctuation">:</span>                left <span class="token operator">=</span> mid <span class="token operator">+</span> <span class="token number">1</span>            <span class="token keyword">else</span><span class="token punctuation">:</span>                <span class="token comment"># äºŒåˆ†æŸ¥æ‰¾matrix[mid]</span>                l<span class="token punctuation">,</span> r <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token builtin">len</span><span class="token punctuation">(</span>matrix<span class="token punctuation">[</span>mid<span class="token punctuation">]</span><span class="token punctuation">)</span>                <span class="token keyword">while</span> l<span class="token operator">&lt;=</span>r<span class="token punctuation">:</span>                    mid_mid <span class="token operator">=</span> <span class="token punctuation">(</span>l <span class="token operator">+</span> r<span class="token punctuation">)</span> <span class="token operator">//</span> <span class="token number">2</span>                    <span class="token keyword">if</span> matrix<span class="token punctuation">[</span>mid<span class="token punctuation">]</span><span class="token punctuation">[</span>mid_mid<span class="token punctuation">]</span> <span class="token operator">==</span> target<span class="token punctuation">:</span>                        <span class="token keyword">return</span> <span class="token boolean">True</span>                                        <span class="token keyword">elif</span> matrix<span class="token punctuation">[</span>mid<span class="token punctuation">]</span><span class="token punctuation">[</span>mid_mid<span class="token punctuation">]</span> <span class="token operator">></span> target<span class="token punctuation">:</span>                        r <span class="token operator">=</span> mid_mid <span class="token operator">-</span><span class="token number">1</span>                    <span class="token keyword">else</span><span class="token punctuation">:</span>                        l <span class="token operator">=</span> mid_mid <span class="token operator">+</span><span class="token number">1</span>                <span class="token keyword">break</span>                    <span class="token keyword">return</span> <span class="token boolean">False</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h2 id="é¢œè‰²åˆ†ç±»-leetcode-75"><a href="#é¢œè‰²åˆ†ç±»-leetcode-75" class="headerlink" title="é¢œè‰²åˆ†ç±» -leetcode 75"></a>é¢œè‰²åˆ†ç±» -leetcode 75</h2><blockquote><p>ç»™å®šä¸€ä¸ªåŒ…å«çº¢è‰²ã€ç™½è‰²å’Œè“è‰²ã€å…± n ä¸ªå…ƒç´ çš„æ•°ç»„ nums ï¼ŒåŸåœ°å¯¹å®ƒä»¬è¿›è¡Œæ’åºï¼Œä½¿å¾—ç›¸åŒé¢œè‰²çš„å…ƒç´ ç›¸é‚»ï¼Œå¹¶æŒ‰ç…§çº¢è‰²ã€ç™½è‰²ã€è“è‰²é¡ºåºæ’åˆ—ã€‚</p><p>æˆ‘ä»¬ä½¿ç”¨æ•´æ•° 0ã€ 1 å’Œ 2 åˆ†åˆ«è¡¨ç¤ºçº¢è‰²ã€ç™½è‰²å’Œè“è‰²ã€‚</p><p>å¿…é¡»åœ¨ä¸ä½¿ç”¨åº“çš„sortå‡½æ•°çš„æƒ…å†µä¸‹è§£å†³è¿™ä¸ªé—®é¢˜ã€‚</p></blockquote><pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token keyword">class</span> <span class="token class-name">Solution</span><span class="token punctuation">:</span>    <span class="token keyword">def</span> <span class="token function">sortColors</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> nums<span class="token punctuation">:</span> List<span class="token punctuation">[</span><span class="token builtin">int</span><span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token operator">-</span><span class="token operator">></span> <span class="token boolean">None</span><span class="token punctuation">:</span>        <span class="token triple-quoted-string string">"""        Do not return anything, modify nums in-place instead.        """</span>                <span class="token keyword">def</span> <span class="token function">quick_sort</span><span class="token punctuation">(</span>nums<span class="token punctuation">,</span> left<span class="token punctuation">,</span> right<span class="token punctuation">)</span><span class="token punctuation">:</span>            <span class="token keyword">if</span> left<span class="token operator">&lt;</span> right<span class="token punctuation">:</span>                mid <span class="token operator">=</span> partition<span class="token punctuation">(</span>nums<span class="token punctuation">,</span> left<span class="token punctuation">,</span> right<span class="token punctuation">)</span>                quick_sort<span class="token punctuation">(</span>nums<span class="token punctuation">,</span> left<span class="token punctuation">,</span> mid<span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span>                quick_sort<span class="token punctuation">(</span>nums<span class="token punctuation">,</span> mid<span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">,</span> right<span class="token punctuation">)</span>            <span class="token keyword">return</span> nums        <span class="token keyword">def</span> <span class="token function">partition</span><span class="token punctuation">(</span>data<span class="token punctuation">,</span> left<span class="token punctuation">,</span> right<span class="token punctuation">)</span><span class="token punctuation">:</span>            tmp <span class="token operator">=</span> data<span class="token punctuation">[</span>left<span class="token punctuation">]</span>            <span class="token keyword">while</span> left <span class="token operator">&lt;</span> right<span class="token punctuation">:</span>                <span class="token keyword">while</span> left <span class="token operator">&lt;</span> right <span class="token keyword">and</span> data<span class="token punctuation">[</span>right<span class="token punctuation">]</span> <span class="token operator">>=</span> tmp<span class="token punctuation">:</span>                    right <span class="token operator">-=</span> <span class="token number">1</span>                data<span class="token punctuation">[</span>left<span class="token punctuation">]</span> <span class="token operator">=</span> data<span class="token punctuation">[</span>right<span class="token punctuation">]</span>                <span class="token keyword">while</span> left <span class="token operator">&lt;</span> right <span class="token keyword">and</span> data<span class="token punctuation">[</span>left<span class="token punctuation">]</span> <span class="token operator">&lt;=</span> tmp<span class="token punctuation">:</span>                    left <span class="token operator">+=</span> <span class="token number">1</span>                data<span class="token punctuation">[</span>right<span class="token punctuation">]</span> <span class="token operator">=</span> data<span class="token punctuation">[</span>left<span class="token punctuation">]</span>            data<span class="token punctuation">[</span>left<span class="token punctuation">]</span> <span class="token operator">=</span> tmp            <span class="token keyword">return</span> left        <span class="token keyword">return</span> quick_sort<span class="token punctuation">(</span>nums<span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token builtin">len</span><span class="token punctuation">(</span>nums<span class="token punctuation">)</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h2 id="ç»„åˆ-leetcde-77"><a href="#ç»„åˆ-leetcde-77" class="headerlink" title="ç»„åˆ -leetcde 77"></a>ç»„åˆ -leetcde 77</h2><blockquote><p>ç»™å®šä¸¤ä¸ªæ•´æ•° <code>n</code> å’Œ <code>k</code>ï¼Œè¿”å›èŒƒå›´ <code>[1, n]</code> ä¸­æ‰€æœ‰å¯èƒ½çš„ <code>k</code> ä¸ªæ•°çš„ç»„åˆã€‚</p><p>ä½ å¯ä»¥æŒ‰ <strong>ä»»ä½•é¡ºåº</strong> è¿”å›ç­”æ¡ˆã€‚</p></blockquote><pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token keyword">class</span> <span class="token class-name">Solution</span><span class="token punctuation">:</span>    <span class="token keyword">def</span> <span class="token function">combine</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> n<span class="token punctuation">:</span> <span class="token builtin">int</span><span class="token punctuation">,</span> k<span class="token punctuation">:</span> <span class="token builtin">int</span><span class="token punctuation">)</span> <span class="token operator">-</span><span class="token operator">></span> List<span class="token punctuation">[</span>List<span class="token punctuation">[</span><span class="token builtin">int</span><span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">:</span>        result <span class="token operator">=</span> <span class="token builtin">list</span><span class="token punctuation">(</span><span class="token punctuation">)</span>        path <span class="token operator">=</span> <span class="token builtin">list</span><span class="token punctuation">(</span><span class="token punctuation">)</span>        <span class="token keyword">def</span> <span class="token function">backtracing</span><span class="token punctuation">(</span>start_index<span class="token punctuation">,</span> path<span class="token punctuation">)</span><span class="token punctuation">:</span>            <span class="token keyword">if</span> <span class="token builtin">len</span><span class="token punctuation">(</span>path<span class="token punctuation">)</span> <span class="token operator">==</span> k<span class="token punctuation">:</span>                result<span class="token punctuation">.</span>append<span class="token punctuation">(</span>path<span class="token punctuation">[</span><span class="token punctuation">:</span><span class="token punctuation">]</span><span class="token punctuation">)</span>            <span class="token keyword">for</span> i <span class="token keyword">in</span> <span class="token builtin">range</span><span class="token punctuation">(</span>start_index<span class="token punctuation">,</span> n <span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">:</span>                path<span class="token punctuation">.</span>append<span class="token punctuation">(</span>i<span class="token punctuation">)</span>                backtracing<span class="token punctuation">(</span>i <span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">,</span> path<span class="token punctuation">)</span>                path<span class="token punctuation">.</span>pop<span class="token punctuation">(</span><span class="token punctuation">)</span>        backtracing<span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> path<span class="token punctuation">)</span>        <span class="token keyword">return</span> result<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h2 id="å­é›†-leetcode-78"><a href="#å­é›†-leetcode-78" class="headerlink" title="å­é›† - leetcode 78"></a>å­é›† - leetcode 78</h2><blockquote><p>ç»™ä½ ä¸€ä¸ªæ•´æ•°æ•°ç»„ <code>nums</code> ï¼Œæ•°ç»„ä¸­çš„å…ƒç´  <strong>äº’ä¸ç›¸åŒ</strong> ã€‚è¿”å›è¯¥æ•°ç»„æ‰€æœ‰å¯èƒ½çš„å­é›†ï¼ˆå¹‚é›†ï¼‰ã€‚</p><p>è§£é›† <strong>ä¸èƒ½</strong> åŒ…å«é‡å¤çš„å­é›†ã€‚ä½ å¯ä»¥æŒ‰ <strong>ä»»æ„é¡ºåº</strong> è¿”å›è§£é›†ã€‚</p></blockquote><pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token keyword">class</span> <span class="token class-name">Solution</span><span class="token punctuation">:</span>    <span class="token keyword">def</span> <span class="token function">subsets</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> nums<span class="token punctuation">:</span> List<span class="token punctuation">[</span><span class="token builtin">int</span><span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token operator">-</span><span class="token operator">></span> List<span class="token punctuation">[</span>List<span class="token punctuation">[</span><span class="token builtin">int</span><span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">:</span>        result <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>        path <span class="token operator">=</span> <span class="token builtin">list</span><span class="token punctuation">(</span><span class="token punctuation">)</span>        <span class="token keyword">def</span> <span class="token function">backtracing</span><span class="token punctuation">(</span>start_index<span class="token punctuation">,</span> path<span class="token punctuation">)</span><span class="token punctuation">:</span>            result<span class="token punctuation">.</span>append<span class="token punctuation">(</span>path<span class="token punctuation">[</span><span class="token punctuation">:</span><span class="token punctuation">]</span><span class="token punctuation">)</span>            <span class="token keyword">if</span> <span class="token builtin">len</span><span class="token punctuation">(</span>path<span class="token punctuation">)</span> <span class="token operator">==</span> <span class="token builtin">len</span><span class="token punctuation">(</span>nums<span class="token punctuation">)</span><span class="token punctuation">:</span>                <span class="token keyword">return</span>            <span class="token keyword">for</span> i <span class="token keyword">in</span> <span class="token builtin">range</span><span class="token punctuation">(</span>start_index<span class="token punctuation">,</span> <span class="token builtin">len</span><span class="token punctuation">(</span>nums<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">:</span>                path<span class="token punctuation">.</span>append<span class="token punctuation">(</span>nums<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">)</span>                                backtracing<span class="token punctuation">(</span>i <span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">,</span> path<span class="token punctuation">)</span>                path<span class="token punctuation">.</span>pop<span class="token punctuation">(</span><span class="token punctuation">)</span>        backtracing<span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> path<span class="token punctuation">)</span>        <span class="token keyword">return</span> result<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h2 id="å•è¯æœç´¢-leetcode-79"><a href="#å•è¯æœç´¢-leetcode-79" class="headerlink" title="å•è¯æœç´¢ leetcode -79"></a>å•è¯æœç´¢ leetcode -79</h2><blockquote><p>ç»™å®šä¸€ä¸ª m x n äºŒç»´å­—ç¬¦ç½‘æ ¼ board å’Œä¸€ä¸ªå­—ç¬¦ä¸²å•è¯ word ã€‚å¦‚æœ word å­˜åœ¨äºç½‘æ ¼ä¸­ï¼Œè¿”å› true ï¼›å¦åˆ™ï¼Œè¿”å› false ã€‚</p><p>å•è¯å¿…é¡»æŒ‰ç…§å­—æ¯é¡ºåºï¼Œé€šè¿‡ç›¸é‚»çš„å•å…ƒæ ¼å†…çš„å­—æ¯æ„æˆï¼Œå…¶ä¸­â€œç›¸é‚»â€å•å…ƒæ ¼æ˜¯é‚£äº›æ°´å¹³ç›¸é‚»æˆ–å‚ç›´ç›¸é‚»çš„å•å…ƒæ ¼ã€‚åŒä¸€ä¸ªå•å…ƒæ ¼å†…çš„å­—æ¯ä¸å…è®¸è¢«é‡å¤ä½¿ç”¨ã€‚</p></blockquote><pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token keyword">class</span> <span class="token class-name">Solution</span><span class="token punctuation">:</span>    <span class="token keyword">def</span> <span class="token function">exist</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> board<span class="token punctuation">:</span> List<span class="token punctuation">[</span>List<span class="token punctuation">[</span><span class="token builtin">str</span><span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">,</span> word<span class="token punctuation">:</span> <span class="token builtin">str</span><span class="token punctuation">)</span> <span class="token operator">-</span><span class="token operator">></span> <span class="token builtin">bool</span><span class="token punctuation">:</span>        used <span class="token operator">=</span> <span class="token builtin">set</span><span class="token punctuation">(</span><span class="token punctuation">)</span>        directions <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">(</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">]</span>  <span class="token comment"># å¯¹åº”å·¦å³ä¸Šä¸‹å››ä¸ªæ–¹å‘</span>        <span class="token keyword">def</span> <span class="token function">backtracing</span><span class="token punctuation">(</span>i<span class="token punctuation">,</span> j<span class="token punctuation">,</span> k<span class="token punctuation">)</span><span class="token punctuation">:</span>            <span class="token keyword">if</span> board<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">[</span>j<span class="token punctuation">]</span> <span class="token operator">!=</span>  word<span class="token punctuation">[</span>k<span class="token punctuation">]</span><span class="token punctuation">:</span>                <span class="token keyword">return</span> <span class="token boolean">False</span>            <span class="token keyword">if</span> k <span class="token operator">==</span> <span class="token builtin">len</span><span class="token punctuation">(</span>word<span class="token punctuation">)</span> <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">:</span>                <span class="token keyword">return</span> <span class="token boolean">True</span>            <span class="token comment"># å¦‚æœboard[i][j] = word[k]:</span>            visited<span class="token punctuation">.</span>add<span class="token punctuation">(</span><span class="token punctuation">(</span>i<span class="token punctuation">,</span> j<span class="token punctuation">)</span><span class="token punctuation">)</span>            result <span class="token operator">=</span> <span class="token boolean">False</span>            <span class="token keyword">for</span> di<span class="token punctuation">,</span> dj <span class="token keyword">in</span> directions<span class="token punctuation">:</span>                newi<span class="token punctuation">,</span> newj <span class="token operator">=</span> i<span class="token operator">+</span>di<span class="token punctuation">,</span> j <span class="token operator">+</span> dj                <span class="token keyword">if</span> <span class="token number">0</span><span class="token operator">&lt;=</span>newi<span class="token operator">&lt;</span><span class="token builtin">len</span><span class="token punctuation">(</span>board<span class="token punctuation">)</span> <span class="token keyword">and</span> <span class="token number">0</span><span class="token operator">&lt;=</span>newj<span class="token operator">&lt;</span><span class="token builtin">len</span><span class="token punctuation">(</span>board<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">:</span>                    <span class="token keyword">if</span> <span class="token punctuation">(</span>newi<span class="token punctuation">,</span> newj<span class="token punctuation">)</span> <span class="token keyword">not</span> <span class="token keyword">in</span> visited<span class="token punctuation">:</span>                        <span class="token keyword">if</span> backtracing<span class="token punctuation">(</span>newi<span class="token punctuation">,</span> newj<span class="token punctuation">,</span> k <span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">:</span>                            result <span class="token operator">=</span> <span class="token boolean">True</span>                            <span class="token keyword">break</span>            visited<span class="token punctuation">.</span>remove<span class="token punctuation">(</span><span class="token punctuation">(</span>i<span class="token punctuation">,</span> j<span class="token punctuation">)</span><span class="token punctuation">)</span>            <span class="token keyword">return</span> result        visited <span class="token operator">=</span> <span class="token builtin">set</span><span class="token punctuation">(</span><span class="token punctuation">)</span>                       <span class="token keyword">for</span> i <span class="token keyword">in</span> <span class="token builtin">range</span><span class="token punctuation">(</span><span class="token builtin">len</span><span class="token punctuation">(</span>board<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">:</span>            <span class="token keyword">for</span> j <span class="token keyword">in</span> <span class="token builtin">range</span><span class="token punctuation">(</span><span class="token builtin">len</span><span class="token punctuation">(</span>board<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">:</span>                <span class="token keyword">if</span> backtracing<span class="token punctuation">(</span>i<span class="token punctuation">,</span> j<span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">:</span>                    <span class="token keyword">return</span> <span class="token boolean">True</span>        <span class="token keyword">return</span> <span class="token boolean">False</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h2 id="åˆ é™¤æœ‰åºæ•°ç»„ä¸­çš„é‡å¤é¡¹-leetcode-80"><a href="#åˆ é™¤æœ‰åºæ•°ç»„ä¸­çš„é‡å¤é¡¹-leetcode-80" class="headerlink" title="åˆ é™¤æœ‰åºæ•°ç»„ä¸­çš„é‡å¤é¡¹ leetcode 80"></a>åˆ é™¤æœ‰åºæ•°ç»„ä¸­çš„é‡å¤é¡¹ leetcode 80</h2><blockquote><p>ç»™ä½ ä¸€ä¸ªæœ‰åºæ•°ç»„ nums ï¼Œè¯·ä½  åŸåœ° åˆ é™¤é‡å¤å‡ºç°çš„å…ƒç´ ï¼Œä½¿å¾—å‡ºç°æ¬¡æ•°è¶…è¿‡ä¸¤æ¬¡çš„å…ƒç´ åªå‡ºç°ä¸¤æ¬¡ ï¼Œè¿”å›åˆ é™¤åæ•°ç»„çš„æ–°é•¿åº¦ã€‚</p><p>ä¸è¦ä½¿ç”¨é¢å¤–çš„æ•°ç»„ç©ºé—´ï¼Œä½ å¿…é¡»åœ¨ åŸåœ° ä¿®æ”¹è¾“å…¥æ•°ç»„ å¹¶åœ¨ä½¿ç”¨ O(1) é¢å¤–ç©ºé—´çš„æ¡ä»¶ä¸‹å®Œæˆã€‚</p></blockquote><pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token keyword">class</span> <span class="token class-name">Solution</span><span class="token punctuation">:</span>    <span class="token keyword">def</span> <span class="token function">removeDuplicates</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> nums<span class="token punctuation">:</span> List<span class="token punctuation">[</span><span class="token builtin">int</span><span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token operator">-</span><span class="token operator">></span> <span class="token builtin">int</span><span class="token punctuation">:</span>        start<span class="token punctuation">,</span> end <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span>        <span class="token keyword">while</span> end <span class="token operator">&lt;</span><span class="token builtin">len</span><span class="token punctuation">(</span>nums<span class="token punctuation">)</span><span class="token punctuation">:</span>            <span class="token keyword">while</span> nums<span class="token punctuation">[</span>start<span class="token punctuation">]</span> <span class="token operator">==</span> nums<span class="token punctuation">[</span>end<span class="token punctuation">]</span>  <span class="token keyword">and</span> end <span class="token operator">-</span> start <span class="token operator">>=</span><span class="token number">2</span><span class="token punctuation">:</span>            <span class="token comment">#if end - start >= 2:</span>                <span class="token keyword">del</span> nums<span class="token punctuation">[</span>start<span class="token punctuation">]</span>                end <span class="token operator">-=</span> <span class="token number">1</span>                <span class="token comment">#start += 1</span>            <span class="token comment"># æ­¤æ—¶ä¸¤è€…ä¹‹é—´çš„è·ç¦»å¿…å°äºäºŒï¼Œ å¦‚æœä¸ç›¸åŒï¼Œ åˆ™è¯´æ˜æœ‰äº†æ–°å…ƒç´ ï¼Œéœ€è¦ç§»åŠ¨èµ·å§‹æŒ‡é’ˆ</span>            <span class="token keyword">if</span> nums<span class="token punctuation">[</span>start<span class="token punctuation">]</span> <span class="token operator">!=</span> nums<span class="token punctuation">[</span>end<span class="token punctuation">]</span><span class="token punctuation">:</span>                start <span class="token operator">=</span> end                end <span class="token operator">+=</span> <span class="token number">1</span>            <span class="token comment"># å¦‚æœç›¸åŒï¼Œ èµ·å§‹ä¸å˜ï¼Œend + 1</span>            <span class="token keyword">else</span><span class="token punctuation">:</span>                end <span class="token operator">+=</span> <span class="token number">1</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h2 id="æœç´¢æ—‹è½¬æ’åˆ—æ•°ç»„II-leetcode-81"><a href="#æœç´¢æ—‹è½¬æ’åˆ—æ•°ç»„II-leetcode-81" class="headerlink" title="æœç´¢æ—‹è½¬æ’åˆ—æ•°ç»„II -leetcode 81"></a>æœç´¢æ—‹è½¬æ’åˆ—æ•°ç»„II -leetcode 81</h2><blockquote><p>å·²çŸ¥å­˜åœ¨ä¸€ä¸ªæŒ‰éé™åºæ’åˆ—çš„æ•´æ•°æ•°ç»„ nums ï¼Œæ•°ç»„ä¸­çš„å€¼ä¸å¿…äº’ä¸ç›¸åŒã€‚</p><p>åœ¨ä¼ é€’ç»™å‡½æ•°ä¹‹å‰ï¼Œnums åœ¨é¢„å…ˆæœªçŸ¥çš„æŸä¸ªä¸‹æ ‡ kï¼ˆ0 &lt;&#x3D; k &lt; nums.lengthï¼‰ä¸Šè¿›è¡Œäº† æ—‹è½¬ ï¼Œä½¿æ•°ç»„å˜ä¸º [nums[k], nums[k+1], â€¦, nums[n-1], nums[0], nums[1], â€¦, nums[k-1]]ï¼ˆä¸‹æ ‡ ä» 0 å¼€å§‹ è®¡æ•°ï¼‰ã€‚ä¾‹å¦‚ï¼Œ [0,1,2,4,4,4,5,6,6,7] åœ¨ä¸‹æ ‡ 5 å¤„ç»æ—‹è½¬åå¯èƒ½å˜ä¸º [4,5,6,6,7,0,1,2,4,4] ã€‚</p><p>ç»™ä½  æ—‹è½¬å çš„æ•°ç»„ nums å’Œä¸€ä¸ªæ•´æ•° target ï¼Œè¯·ä½ ç¼–å†™ä¸€ä¸ªå‡½æ•°æ¥åˆ¤æ–­ç»™å®šçš„ç›®æ ‡å€¼æ˜¯å¦å­˜åœ¨äºæ•°ç»„ä¸­ã€‚å¦‚æœ nums ä¸­å­˜åœ¨è¿™ä¸ªç›®æ ‡å€¼ target ï¼Œåˆ™è¿”å› true ï¼Œå¦åˆ™è¿”å› false ã€‚</p><p>ä½ å¿…é¡»å°½å¯èƒ½å‡å°‘æ•´ä¸ªæ“ä½œæ­¥éª¤ã€‚</p></blockquote><pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token keyword">class</span> <span class="token class-name">Solution</span><span class="token punctuation">:</span>    <span class="token triple-quoted-string string">"""    1. å°†æ•°ç»„åˆ†ä¸ºä¸¤è¾¹    2. æ—‹è½¬ä¹‹å‰æœ«å°¾æ‰€åœ¨çš„ä¸€è¾¹ï¼Œå¦‚æœæœ€åä¸€ä¸ªå…ƒç´ ä¸æ˜¯æœ€å¤§å€¼ï¼Œ åˆ™è¿™ä¸€åŠéƒ¨åˆ†æœ‰åºï¼Œæœ‰åºçš„åˆ†å‰²ç‚¹ä¸ºæœ€å¤§çš„ä¸€ä¸ªæ•°    3. æ—‹è½¬ä¹‹å‰æœ«å°¾ä¸åœ¨çš„ä¸€è¾¹ï¼Œ å®Œå…¨æœ‰åºï¼Œå¯ä»¥æŒ‰ç…§äºŒåˆ†æŸ¥æ‰¾    """</span>    <span class="token keyword">def</span> <span class="token function">search</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> nums<span class="token punctuation">:</span> List<span class="token punctuation">[</span><span class="token builtin">int</span><span class="token punctuation">]</span><span class="token punctuation">,</span> target<span class="token punctuation">:</span> <span class="token builtin">int</span><span class="token punctuation">)</span> <span class="token operator">-</span><span class="token operator">></span> <span class="token builtin">bool</span><span class="token punctuation">:</span>        <span class="token comment"># å°†æ•°ç»„æŒ‰ç…§ä¸‹æ ‡åˆ†ä¸ºä¸¤è¾¹</span>        left <span class="token punctuation">,</span> right <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token builtin">len</span><span class="token punctuation">(</span>nums<span class="token punctuation">)</span>        <span class="token keyword">while</span> left <span class="token operator">&lt;=</span> right<span class="token punctuation">:</span>            mid <span class="token operator">=</span> <span class="token punctuation">(</span>left <span class="token operator">+</span> right<span class="token punctuation">)</span> <span class="token operator">//</span> <span class="token number">2</span>            <span class="token keyword">if</span> nums<span class="token punctuation">[</span>mid<span class="token punctuation">]</span> <span class="token operator">==</span> target<span class="token punctuation">:</span>                <span class="token keyword">return</span> <span class="token boolean">True</span>            <span class="token keyword">if</span> num<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">&lt;</span> nums<span class="token punctuation">[</span>mid<span class="token punctuation">]</span><span class="token punctuation">:</span>                <span class="token keyword">if</span> nums<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">&lt;=</span> target<span class="token operator">&lt;</span> nums<span class="token punctuation">[</span>mid<span class="token punctuation">]</span><span class="token punctuation">:</span>  <span class="token comment"># è¿™åŠéƒ¨åˆ†æœ‰åº å¤„äºä¸Šå‡åºåˆ—ä¸­</span>                    right <span class="token operator">=</span> mid <span class="token operator">-</span><span class="token number">1</span>                <span class="token keyword">else</span><span class="token punctuation">:</span>                    left <span class="token operator">=</span> mid <span class="token operator">+</span><span class="token number">1</span>            <span class="token keyword">else</span><span class="token punctuation">:</span> <span class="token comment"># ä¸€åŠæœ‰åºï¼Œä¸€åŠéƒ¨åˆ†æœ‰åº</span>                <span class="token keyword">if</span> nums<span class="token punctuation">[</span>mid<span class="token punctuation">]</span> <span class="token operator">&lt;</span> target <span class="token operator">&lt;=</span> nums<span class="token punctuation">[</span><span class="token builtin">len</span><span class="token punctuation">(</span>nums<span class="token punctuation">)</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">:</span> <span class="token comment"># å¤„åœ¨æœ‰åºéƒ¨åˆ†</span>                    left <span class="token operator">+=</span> <span class="token number">1</span>                <span class="token keyword">else</span><span class="token punctuation">:</span>                    right <span class="token operator">-=</span> <span class="token number">1</span>        <span class="token keyword">return</span> <span class="token boolean">False</span>             <span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h2 id="åˆ é™¤æ’åºé“¾è¡¨ä¸­çš„é‡å¤å…ƒç´ -leecode-81"><a href="#åˆ é™¤æ’åºé“¾è¡¨ä¸­çš„é‡å¤å…ƒç´ -leecode-81" class="headerlink" title="åˆ é™¤æ’åºé“¾è¡¨ä¸­çš„é‡å¤å…ƒç´ -leecode 81"></a>åˆ é™¤æ’åºé“¾è¡¨ä¸­çš„é‡å¤å…ƒç´ -leecode 81</h2><p>â€‹</p><blockquote><p> ç»™å®šä¸€ä¸ªå·²æ’åºçš„é“¾è¡¨çš„å¤´ <code>head</code> ï¼Œ <em>åˆ é™¤æ‰€æœ‰é‡å¤çš„å…ƒç´ ï¼Œä½¿æ¯ä¸ªå…ƒç´ åªå‡ºç°ä¸€æ¬¡</em> ã€‚è¿”å› <em>å·²æ’åºçš„é“¾è¡¨</em> ã€‚ </p></blockquote><pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token comment"># Definition for singly-linked list.</span><span class="token comment"># class ListNode:</span><span class="token comment">#     def __init__(self, val=0, next=None):</span><span class="token comment">#         self.val = val</span><span class="token comment">#         self.next = next</span><span class="token keyword">class</span> <span class="token class-name">Solution</span><span class="token punctuation">:</span>    <span class="token keyword">def</span> <span class="token function">deleteDuplicates</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> head<span class="token punctuation">:</span> Optional<span class="token punctuation">[</span>ListNode<span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token operator">-</span><span class="token operator">></span> Optional<span class="token punctuation">[</span>ListNode<span class="token punctuation">]</span><span class="token punctuation">:</span>        <span class="token keyword">if</span> <span class="token keyword">not</span> head<span class="token punctuation">:</span>            <span class="token keyword">return</span> head        cur <span class="token operator">=</span> head        <span class="token keyword">while</span> cur<span class="token punctuation">.</span><span class="token builtin">next</span><span class="token punctuation">:</span>            <span class="token keyword">if</span> cur<span class="token punctuation">.</span>val <span class="token operator">==</span> cur<span class="token punctuation">.</span><span class="token builtin">next</span><span class="token punctuation">.</span>val<span class="token punctuation">:</span>                cur<span class="token punctuation">.</span><span class="token builtin">next</span> <span class="token operator">=</span> cur<span class="token punctuation">.</span><span class="token builtin">next</span><span class="token punctuation">.</span><span class="token builtin">next</span>            <span class="token keyword">else</span><span class="token punctuation">:</span>                cur <span class="token operator">=</span> cur<span class="token punctuation">.</span><span class="token builtin">next</span>        <span class="token keyword">return</span> head<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h2 id="åˆ é™¤æ’åºé“¾è¡¨ä¸­çš„é‡å¤å…ƒç´ II-leetcode-82"><a href="#åˆ é™¤æ’åºé“¾è¡¨ä¸­çš„é‡å¤å…ƒç´ II-leetcode-82" class="headerlink" title="åˆ é™¤æ’åºé“¾è¡¨ä¸­çš„é‡å¤å…ƒç´ II-leetcode 82"></a>åˆ é™¤æ’åºé“¾è¡¨ä¸­çš„é‡å¤å…ƒç´ II-leetcode 82</h2><blockquote><p> ç»™å®šä¸€ä¸ªå·²æ’åºçš„é“¾è¡¨çš„å¤´ <code>head</code> ï¼Œ <em>åˆ é™¤åŸå§‹é“¾è¡¨ä¸­æ‰€æœ‰é‡å¤æ•°å­—çš„èŠ‚ç‚¹ï¼Œåªç•™ä¸‹ä¸åŒçš„æ•°å­—</em> ã€‚è¿”å› <em>å·²æ’åºçš„é“¾è¡¨</em> ã€‚ </p></blockquote><pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token comment"># Definition for singly-linked list.</span><span class="token comment"># class ListNode:</span><span class="token comment">#     def __init__(self, val=0, next=None):</span><span class="token comment">#         self.val = val</span><span class="token comment">#         self.next = next</span><span class="token keyword">class</span> <span class="token class-name">Solution</span><span class="token punctuation">:</span>    <span class="token triple-quoted-string string">"""    æœ‰å¯èƒ½å¤´éƒ¨èŠ‚ç‚¹ä¹Ÿä¼šåˆ é™¤    åˆ é™¤æ¡ä»¶ head.val = head.next.val ç›´åˆ°æ‰¾åˆ°ä¸ç›¸ç­‰çš„è¿›è¡Œè¿æ¥    """</span>    <span class="token keyword">def</span> <span class="token function">deleteDuplicates</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> head<span class="token punctuation">:</span> Optional<span class="token punctuation">[</span>ListNode<span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token operator">-</span><span class="token operator">></span> Optional<span class="token punctuation">[</span>ListNode<span class="token punctuation">]</span><span class="token punctuation">:</span>        dummy <span class="token operator">=</span> ListNode<span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> head<span class="token punctuation">)</span>        cur <span class="token operator">=</span> dummy        <span class="token keyword">while</span> cur<span class="token punctuation">.</span><span class="token builtin">next</span> <span class="token keyword">and</span> cur<span class="token punctuation">.</span><span class="token builtin">next</span><span class="token punctuation">.</span><span class="token builtin">next</span><span class="token punctuation">:</span>            <span class="token keyword">if</span> cur<span class="token punctuation">.</span><span class="token builtin">next</span><span class="token punctuation">.</span>val <span class="token operator">==</span> cur<span class="token punctuation">.</span><span class="token builtin">next</span><span class="token punctuation">.</span><span class="token builtin">next</span><span class="token punctuation">.</span>val<span class="token punctuation">:</span>                repeat <span class="token operator">=</span> cur<span class="token punctuation">.</span><span class="token builtin">next</span><span class="token punctuation">.</span>val                <span class="token keyword">while</span> cur<span class="token punctuation">.</span><span class="token builtin">next</span> <span class="token keyword">and</span> cur<span class="token punctuation">.</span><span class="token builtin">next</span><span class="token punctuation">.</span>val <span class="token operator">==</span> repeat<span class="token punctuation">:</span>                    cur<span class="token punctuation">.</span><span class="token builtin">next</span> <span class="token operator">=</span> cur<span class="token punctuation">.</span><span class="token builtin">next</span><span class="token punctuation">.</span><span class="token builtin">next</span>            <span class="token keyword">else</span><span class="token punctuation">:</span>                cur <span class="token operator">=</span> cur<span class="token punctuation">.</span><span class="token builtin">next</span>        <span class="token keyword">return</span> dummy<span class="token punctuation">.</span><span class="token builtin">next</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h2 id="åˆå¹¶ä¸¤ä¸ªæœ‰åºæ•°ç»„-leetcode-88"><a href="#åˆå¹¶ä¸¤ä¸ªæœ‰åºæ•°ç»„-leetcode-88" class="headerlink" title="åˆå¹¶ä¸¤ä¸ªæœ‰åºæ•°ç»„ - leetcode 88"></a>åˆå¹¶ä¸¤ä¸ªæœ‰åºæ•°ç»„ - leetcode 88</h2><blockquote><p>ç»™ä½ ä¸¤ä¸ªæŒ‰ éé€’å‡é¡ºåº æ’åˆ—çš„æ•´æ•°æ•°ç»„ nums1 å’Œ nums2ï¼Œå¦æœ‰ä¸¤ä¸ªæ•´æ•° m å’Œ n ï¼Œåˆ†åˆ«è¡¨ç¤º nums1 å’Œ nums2 ä¸­çš„å…ƒç´ æ•°ç›®ã€‚</p><p>è¯·ä½  åˆå¹¶ nums2 åˆ° nums1 ä¸­ï¼Œä½¿åˆå¹¶åçš„æ•°ç»„åŒæ ·æŒ‰ éé€’å‡é¡ºåº æ’åˆ—ã€‚</p><p>æ³¨æ„ï¼šæœ€ç»ˆï¼Œåˆå¹¶åæ•°ç»„ä¸åº”ç”±å‡½æ•°è¿”å›ï¼Œè€Œæ˜¯å­˜å‚¨åœ¨æ•°ç»„ nums1 ä¸­ã€‚ä¸ºäº†åº”å¯¹è¿™ç§æƒ…å†µï¼Œnums1 çš„åˆå§‹é•¿åº¦ä¸º m + nï¼Œå…¶ä¸­å‰ m ä¸ªå…ƒç´ è¡¨ç¤ºåº”åˆå¹¶çš„å…ƒç´ ï¼Œå n ä¸ªå…ƒç´ ä¸º 0 ï¼Œåº”å¿½ç•¥ã€‚nums2 çš„é•¿åº¦ä¸º n ã€‚</p></blockquote><pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token keyword">class</span> <span class="token class-name">Solution</span><span class="token punctuation">:</span>    <span class="token keyword">def</span> <span class="token function">merge</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> nums1<span class="token punctuation">:</span> List<span class="token punctuation">[</span><span class="token builtin">int</span><span class="token punctuation">]</span><span class="token punctuation">,</span> m<span class="token punctuation">:</span> <span class="token builtin">int</span><span class="token punctuation">,</span> nums2<span class="token punctuation">:</span> List<span class="token punctuation">[</span><span class="token builtin">int</span><span class="token punctuation">]</span><span class="token punctuation">,</span> n<span class="token punctuation">:</span> <span class="token builtin">int</span><span class="token punctuation">)</span> <span class="token operator">-</span><span class="token operator">></span> <span class="token boolean">None</span><span class="token punctuation">:</span>        <span class="token triple-quoted-string string">"""        Do not return anything, modify nums1 in-place instead.        """</span>        l <span class="token operator">=</span> <span class="token number">0</span>        r <span class="token operator">=</span> <span class="token number">0</span>        ret <span class="token operator">=</span> <span class="token builtin">list</span><span class="token punctuation">(</span><span class="token punctuation">)</span>        <span class="token keyword">while</span> l <span class="token operator">&lt;</span>m <span class="token keyword">and</span> r <span class="token operator">&lt;</span> n<span class="token punctuation">:</span>            <span class="token keyword">if</span> nums1<span class="token punctuation">[</span>l<span class="token punctuation">]</span> <span class="token operator">&lt;=</span> nums2<span class="token punctuation">[</span>r<span class="token punctuation">]</span><span class="token punctuation">:</span>                ret<span class="token punctuation">.</span>append<span class="token punctuation">(</span>nums1<span class="token punctuation">[</span>l<span class="token punctuation">]</span><span class="token punctuation">)</span>                l <span class="token operator">+=</span> <span class="token number">1</span>            <span class="token keyword">else</span><span class="token punctuation">:</span>                ret<span class="token punctuation">.</span>append<span class="token punctuation">(</span>nums2<span class="token punctuation">[</span>r<span class="token punctuation">]</span><span class="token punctuation">)</span>                r <span class="token operator">+=</span> <span class="token number">1</span>        ret <span class="token operator">=</span> ret <span class="token operator">+</span> nums1<span class="token punctuation">[</span>l<span class="token punctuation">:</span>m<span class="token punctuation">]</span>        ret <span class="token operator">=</span> ret <span class="token operator">+</span> nums2<span class="token punctuation">[</span>r<span class="token punctuation">:</span><span class="token punctuation">]</span>        nums1<span class="token punctuation">[</span><span class="token punctuation">:</span><span class="token punctuation">]</span> <span class="token operator">=</span> ret<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h2 id="å­é›†II-leetcode-90"><a href="#å­é›†II-leetcode-90" class="headerlink" title="å­é›†II -leetcode 90"></a>å­é›†II -leetcode 90</h2><blockquote><p>ç»™ä½ ä¸€ä¸ªæ•´æ•°æ•°ç»„ nums ï¼Œå…¶ä¸­å¯èƒ½åŒ…å«é‡å¤å…ƒç´ ï¼Œè¯·ä½ è¿”å›è¯¥æ•°ç»„æ‰€æœ‰å¯èƒ½çš„å­é›†ï¼ˆå¹‚é›†ï¼‰ã€‚</p><p>è§£é›† ä¸èƒ½ åŒ…å«é‡å¤çš„å­é›†ã€‚è¿”å›çš„è§£é›†ä¸­ï¼Œå­é›†å¯ä»¥æŒ‰ ä»»æ„é¡ºåº æ’åˆ—ã€‚</p></blockquote><pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token keyword">class</span> <span class="token class-name">Solution</span><span class="token punctuation">:</span>    <span class="token keyword">def</span> <span class="token function">subsetsWithDup</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> nums<span class="token punctuation">:</span> List<span class="token punctuation">[</span><span class="token builtin">int</span><span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token operator">-</span><span class="token operator">></span> List<span class="token punctuation">[</span>List<span class="token punctuation">[</span><span class="token builtin">int</span><span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">:</span>                result <span class="token operator">=</span> <span class="token builtin">list</span><span class="token punctuation">(</span><span class="token punctuation">)</span>        path <span class="token operator">=</span> <span class="token builtin">list</span><span class="token punctuation">(</span><span class="token punctuation">)</span>        nums<span class="token punctuation">.</span>sort<span class="token punctuation">(</span><span class="token punctuation">)</span>        <span class="token keyword">def</span> <span class="token function">backtracing</span><span class="token punctuation">(</span>path<span class="token punctuation">,</span> start_index<span class="token punctuation">)</span><span class="token punctuation">:</span>            result<span class="token punctuation">.</span>append<span class="token punctuation">(</span>path<span class="token punctuation">[</span><span class="token punctuation">:</span><span class="token punctuation">]</span><span class="token punctuation">)</span>            <span class="token keyword">if</span> <span class="token builtin">len</span><span class="token punctuation">(</span>path<span class="token punctuation">)</span> <span class="token operator">>=</span> <span class="token builtin">len</span><span class="token punctuation">(</span>nums<span class="token punctuation">)</span><span class="token punctuation">:</span>                <span class="token keyword">return</span>            <span class="token keyword">for</span> i <span class="token keyword">in</span> <span class="token builtin">range</span><span class="token punctuation">(</span>start_index<span class="token punctuation">,</span> <span class="token builtin">len</span><span class="token punctuation">(</span>nums<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">:</span>                <span class="token keyword">if</span> i <span class="token operator">></span> start_index <span class="token keyword">and</span> nums<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">==</span> nums<span class="token punctuation">[</span>i<span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">:</span>                    <span class="token keyword">continue</span>                path<span class="token punctuation">.</span>append<span class="token punctuation">(</span>nums<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">)</span>                backtracing<span class="token punctuation">(</span>path<span class="token punctuation">,</span> i <span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">)</span>                path<span class="token punctuation">.</span>pop<span class="token punctuation">(</span><span class="token punctuation">)</span>        backtracing<span class="token punctuation">(</span>path<span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span>        <span class="token keyword">return</span> result<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h2 id="è§£ç æ–¹æ³•-leetcode-91"><a href="#è§£ç æ–¹æ³•-leetcode-91" class="headerlink" title="è§£ç æ–¹æ³• - leetcode 91"></a>è§£ç æ–¹æ³• - leetcode 91</h2><blockquote><p>ä¸€æ¡åŒ…å«å­—æ¯ A-Z çš„æ¶ˆæ¯é€šè¿‡ä»¥ä¸‹æ˜ å°„è¿›è¡Œäº† ç¼–ç  ï¼š</p><p>â€˜Aâ€™ -&gt; â€œ1â€<br>â€˜Bâ€™ -&gt; â€œ2â€<br>â€¦<br>â€˜Zâ€™ -&gt; â€œ26â€<br>è¦ è§£ç  å·²ç¼–ç çš„æ¶ˆæ¯ï¼Œæ‰€æœ‰æ•°å­—å¿…é¡»åŸºäºä¸Šè¿°æ˜ å°„çš„æ–¹æ³•ï¼Œåå‘æ˜ å°„å›å­—æ¯ï¼ˆå¯èƒ½æœ‰å¤šç§æ–¹æ³•ï¼‰ã€‚ä¾‹å¦‚ï¼Œâ€11106â€ å¯ä»¥æ˜ å°„ä¸ºï¼š</p><p>â€œAAJFâ€ ï¼Œå°†æ¶ˆæ¯åˆ†ç»„ä¸º (1 1 10 6)<br>â€œKJFâ€ ï¼Œå°†æ¶ˆæ¯åˆ†ç»„ä¸º (11 10 6)<br>æ³¨æ„ï¼Œæ¶ˆæ¯ä¸èƒ½åˆ†ç»„ä¸º  (1 11 06) ï¼Œå› ä¸º â€œ06â€ ä¸èƒ½æ˜ å°„ä¸º â€œFâ€ ï¼Œè¿™æ˜¯ç”±äº â€œ6â€ å’Œ â€œ06â€ åœ¨æ˜ å°„ä¸­å¹¶ä¸ç­‰ä»·ã€‚</p><p>ç»™ä½ ä¸€ä¸ªåªå«æ•°å­—çš„ éç©º å­—ç¬¦ä¸² s ï¼Œè¯·è®¡ç®—å¹¶è¿”å› è§£ç  æ–¹æ³•çš„ æ€»æ•° ã€‚</p><p>é¢˜ç›®æ•°æ®ä¿è¯ç­”æ¡ˆè‚¯å®šæ˜¯ä¸€ä¸ª 32 ä½ çš„æ•´æ•°ã€‚</p></blockquote><pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token keyword">class</span> <span class="token class-name">Solution</span><span class="token punctuation">:</span>    <span class="token keyword">def</span> <span class="token function">numDecodings</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> s<span class="token punctuation">:</span> <span class="token builtin">str</span><span class="token punctuation">)</span> <span class="token operator">-</span><span class="token operator">></span> <span class="token builtin">int</span><span class="token punctuation">:</span>        n <span class="token operator">=</span> <span class="token builtin">len</span><span class="token punctuation">(</span>s<span class="token punctuation">)</span>        dp <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">+</span> <span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">*</span> n        <span class="token keyword">for</span> i <span class="token keyword">in</span> <span class="token builtin">range</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> n<span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">:</span>            <span class="token keyword">if</span> s<span class="token punctuation">[</span>i<span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">!=</span> <span class="token string">"0"</span><span class="token punctuation">:</span>                dp<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">=</span> dp<span class="token punctuation">[</span>i<span class="token punctuation">]</span>  <span class="token operator">+</span> dp<span class="token punctuation">[</span>i<span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">]</span>                        <span class="token keyword">if</span> i <span class="token operator">></span> <span class="token number">1</span> <span class="token keyword">and</span> s<span class="token punctuation">[</span>i<span class="token operator">-</span><span class="token number">2</span><span class="token punctuation">]</span> <span class="token operator">!=</span> <span class="token string">"0"</span> <span class="token keyword">and</span> <span class="token builtin">int</span><span class="token punctuation">(</span>s<span class="token punctuation">[</span>i<span class="token operator">-</span><span class="token number">2</span><span class="token punctuation">:</span>i<span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token operator">&lt;=</span> <span class="token number">26</span><span class="token punctuation">:</span>                dp<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">=</span> dp<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">+</span> dp<span class="token punctuation">[</span>i<span class="token operator">-</span><span class="token number">2</span><span class="token punctuation">]</span>                    <span class="token keyword">return</span> dp<span class="token punctuation">[</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">]</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h2 id="åè½¬é“¾è¡¨II-leetcode-92"><a href="#åè½¬é“¾è¡¨II-leetcode-92" class="headerlink" title="åè½¬é“¾è¡¨II -leetcode 92"></a>åè½¬é“¾è¡¨II -leetcode 92</h2><blockquote><p>ç»™ä½ å•é“¾è¡¨çš„å¤´æŒ‡é’ˆ head å’Œä¸¤ä¸ªæ•´æ•° left å’Œ right ï¼Œå…¶ä¸­ left &lt;&#x3D; right ã€‚è¯·ä½ åè½¬ä»ä½ç½® left åˆ°ä½ç½® right çš„é“¾è¡¨èŠ‚ç‚¹ï¼Œè¿”å› åè½¬åçš„é“¾è¡¨ ã€‚</p></blockquote><pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token comment"># Definition for singly-linked list.</span><span class="token comment"># class ListNode:</span><span class="token comment">#     def __init__(self, val=0, next=None): </span><span class="token comment">#         self.val = val</span><span class="token comment">#         self.next = next</span><span class="token keyword">class</span> <span class="token class-name">Solution</span><span class="token punctuation">:</span>    <span class="token keyword">def</span> <span class="token function">reverseBetween</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> head<span class="token punctuation">:</span> Optional<span class="token punctuation">[</span>ListNode<span class="token punctuation">]</span><span class="token punctuation">,</span> left<span class="token punctuation">:</span> <span class="token builtin">int</span><span class="token punctuation">,</span> right<span class="token punctuation">:</span> <span class="token builtin">int</span><span class="token punctuation">)</span> <span class="token operator">-</span><span class="token operator">></span> Optional<span class="token punctuation">[</span>ListNode<span class="token punctuation">]</span><span class="token punctuation">:</span>        <span class="token keyword">def</span> <span class="token function">deverse_node</span><span class="token punctuation">(</span>head<span class="token punctuation">)</span><span class="token punctuation">:</span>                        <span class="token comment"># åŸåœ°é€†ç½®æ³•åè½¬é“¾è¡¨</span>            <span class="token comment"># bag = head</span>            <span class="token comment"># end = bag.next</span>            <span class="token comment"># while end:</span>            <span class="token comment">#     bag.next = end.next</span>            <span class="token comment">#     end.next = head</span>            <span class="token comment">#     head = end</span>            <span class="token comment">#     end = bag.next</span>            <span class="token comment"># print(head, 999)</span>                                    <span class="token comment"># å¤´æ’æ³•</span>            pre <span class="token operator">=</span> <span class="token boolean">None</span>            cur <span class="token operator">=</span> head            <span class="token keyword">while</span> cur<span class="token punctuation">:</span>                <span class="token builtin">next</span> <span class="token operator">=</span> cur<span class="token punctuation">.</span><span class="token builtin">next</span>  <span class="token comment"># æŒ‡é’ˆæŒ‡å‘ä¸‹ä¸€ä¸ªèŠ‚ç‚¹</span>                <span class="token comment"># åœ¨preçš„å¤´éƒ¨æ’å…¥curèŠ‚ç‚¹</span>                cur<span class="token punctuation">.</span><span class="token builtin">next</span> <span class="token operator">=</span> pre                pre <span class="token operator">=</span> cur                cur <span class="token operator">=</span> <span class="token builtin">next</span>            <span class="token comment"># åè½¬åå¤´èŠ‚ç‚¹æ˜¯right_node, å°¾èŠ‚ç‚¹æ˜¯left_node</span>        dummy <span class="token operator">=</span> ListNode<span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span>        dummy<span class="token punctuation">.</span><span class="token builtin">next</span> <span class="token operator">=</span> head        pre <span class="token operator">=</span> dummy        <span class="token keyword">for</span> _ <span class="token keyword">in</span> <span class="token builtin">range</span><span class="token punctuation">(</span>left <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">:</span>  <span class="token comment"># left çš„å‰ä¸€ä¸ªèŠ‚ç‚¹</span>            pre <span class="token operator">=</span> pre<span class="token punctuation">.</span><span class="token builtin">next</span>        right_node <span class="token operator">=</span> pre        <span class="token keyword">for</span> _ <span class="token keyword">in</span> <span class="token builtin">range</span><span class="token punctuation">(</span>right <span class="token operator">-</span> left <span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">:</span>  <span class="token comment"># æ¥åˆ°right èŠ‚ç‚¹</span>            right_node <span class="token operator">=</span> right_node<span class="token punctuation">.</span><span class="token builtin">next</span>        <span class="token comment"># åˆ‡æ–­å‡ºä¸€ä¸ªå­é“¾è¡¨ï¼ˆæˆªå–é“¾è¡¨ï¼‰</span>        left_node <span class="token operator">=</span> pre<span class="token punctuation">.</span><span class="token builtin">next</span>        curr <span class="token operator">=</span> right_node<span class="token punctuation">.</span><span class="token builtin">next</span>        <span class="token comment"># åˆ‡æ–­è¿æ¥</span>        pre<span class="token punctuation">.</span><span class="token builtin">next</span> <span class="token operator">=</span> <span class="token boolean">None</span>        right_node<span class="token punctuation">.</span><span class="token builtin">next</span> <span class="token operator">=</span> <span class="token boolean">None</span>        <span class="token comment"># é€†ç½®</span>        deverse_node<span class="token punctuation">(</span>left_node<span class="token punctuation">)</span>                <span class="token comment"># æ‹¼æ¥</span>        pre<span class="token punctuation">.</span><span class="token builtin">next</span> <span class="token operator">=</span> right_node        left_node<span class="token punctuation">.</span><span class="token builtin">next</span> <span class="token operator">=</span> curr        <span class="token keyword">return</span> dummy<span class="token punctuation">.</span><span class="token builtin">next</span>        <span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h2 id="å¤åŸipåœ°å€-leetcode93"><a href="#å¤åŸipåœ°å€-leetcode93" class="headerlink" title="å¤åŸipåœ°å€ - leetcode93"></a>å¤åŸipåœ°å€ - leetcode93</h2><blockquote><p>æœ‰æ•ˆ IP åœ°å€ æ­£å¥½ç”±å››ä¸ªæ•´æ•°ï¼ˆæ¯ä¸ªæ•´æ•°ä½äº 0 åˆ° 255 ä¹‹é—´ç»„æˆï¼Œä¸”ä¸èƒ½å«æœ‰å‰å¯¼ 0ï¼‰ï¼Œæ•´æ•°ä¹‹é—´ç”¨ â€˜.â€™ åˆ†éš”ã€‚</p><p>ä¾‹å¦‚ï¼šâ€0.1.2.201â€ å’Œ â€œ192.168.1.1â€ æ˜¯ æœ‰æ•ˆ IP åœ°å€ï¼Œä½†æ˜¯ â€œ0.011.255.245â€ã€â€192.168.1.312â€ å’Œ â€œ<a href="mailto:&#49;&#x39;&#50;&#46;&#49;&#54;&#x38;&#64;&#x31;&#x2e;&#49;">&#49;&#x39;&#50;&#46;&#49;&#54;&#x38;&#64;&#x31;&#x2e;&#49;</a>â€œ æ˜¯ æ— æ•ˆ IP åœ°å€ã€‚<br>ç»™å®šä¸€ä¸ªåªåŒ…å«æ•°å­—çš„å­—ç¬¦ä¸² s ï¼Œç”¨ä»¥è¡¨ç¤ºä¸€ä¸ª IP åœ°å€ï¼Œè¿”å›æ‰€æœ‰å¯èƒ½çš„æœ‰æ•ˆ IP åœ°å€ï¼Œè¿™äº›åœ°å€å¯ä»¥é€šè¿‡åœ¨ s ä¸­æ’å…¥ â€˜.â€™ æ¥å½¢æˆã€‚ä½  ä¸èƒ½ é‡æ–°æ’åºæˆ–åˆ é™¤ s ä¸­çš„ä»»ä½•æ•°å­—ã€‚ä½ å¯ä»¥æŒ‰ ä»»ä½• é¡ºåºè¿”å›ç­”æ¡ˆã€‚</p></blockquote><pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token keyword">class</span> <span class="token class-name">Solution</span><span class="token punctuation">:</span>    <span class="token keyword">def</span> <span class="token function">restoreIpAddresses</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> s<span class="token punctuation">:</span> <span class="token builtin">str</span><span class="token punctuation">)</span> <span class="token operator">-</span><span class="token operator">></span> List<span class="token punctuation">[</span><span class="token builtin">str</span><span class="token punctuation">]</span><span class="token punctuation">:</span>        result <span class="token operator">=</span> <span class="token builtin">list</span><span class="token punctuation">(</span><span class="token punctuation">)</span>        path <span class="token operator">=</span> <span class="token builtin">list</span><span class="token punctuation">(</span><span class="token punctuation">)</span>        <span class="token keyword">def</span> <span class="token function">backtracing</span><span class="token punctuation">(</span>path<span class="token punctuation">,</span> startindx<span class="token punctuation">)</span><span class="token punctuation">:</span>            <span class="token keyword">if</span> <span class="token builtin">len</span><span class="token punctuation">(</span>path<span class="token punctuation">)</span> <span class="token operator">==</span> <span class="token number">4</span> <span class="token keyword">and</span> startindx <span class="token operator">==</span> <span class="token builtin">len</span><span class="token punctuation">(</span>s<span class="token punctuation">)</span><span class="token punctuation">:</span>                result<span class="token punctuation">.</span>append<span class="token punctuation">(</span><span class="token string">"."</span><span class="token punctuation">.</span>join<span class="token punctuation">(</span>path<span class="token punctuation">[</span><span class="token punctuation">:</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">)</span>                <span class="token keyword">return</span>            <span class="token keyword">if</span> startindx <span class="token operator">==</span> <span class="token builtin">len</span><span class="token punctuation">(</span>s<span class="token punctuation">)</span><span class="token punctuation">:</span>                <span class="token keyword">return</span>            <span class="token keyword">if</span> s<span class="token punctuation">[</span>startindx<span class="token punctuation">]</span> <span class="token operator">==</span> <span class="token string">"0"</span><span class="token punctuation">:</span>                path<span class="token punctuation">.</span>append<span class="token punctuation">(</span><span class="token string">"0"</span><span class="token punctuation">)</span>                backtracing<span class="token punctuation">(</span>path<span class="token punctuation">,</span> startindx<span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">)</span>                                        path<span class="token punctuation">.</span>pop<span class="token punctuation">(</span><span class="token punctuation">)</span>            <span class="token keyword">for</span> i <span class="token keyword">in</span>  <span class="token builtin">range</span><span class="token punctuation">(</span>startindx<span class="token punctuation">,</span> <span class="token builtin">len</span><span class="token punctuation">(</span>s<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">:</span>                end <span class="token operator">=</span> i <span class="token operator">+</span><span class="token number">1</span>                temp <span class="token operator">=</span> <span class="token builtin">int</span><span class="token punctuation">(</span>s<span class="token punctuation">[</span>startindx<span class="token punctuation">:</span>end<span class="token punctuation">]</span><span class="token punctuation">)</span>                <span class="token keyword">if</span> <span class="token number">0</span> <span class="token operator">&lt;</span> temp <span class="token keyword">and</span> temp  <span class="token operator">&lt;=</span> <span class="token number">255</span><span class="token punctuation">:</span>                    path<span class="token punctuation">.</span>append<span class="token punctuation">(</span><span class="token builtin">str</span><span class="token punctuation">(</span>temp<span class="token punctuation">)</span><span class="token punctuation">)</span>                    backtracing<span class="token punctuation">(</span>path<span class="token punctuation">,</span> end<span class="token punctuation">)</span>                    path<span class="token punctuation">.</span>pop<span class="token punctuation">(</span><span class="token punctuation">)</span>                      <span class="token keyword">else</span><span class="token punctuation">:</span>                    <span class="token keyword">break</span>        backtracing<span class="token punctuation">(</span>path<span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span>        <span class="token keyword">return</span> result<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h2 id="äºŒå‰æ ‘çš„ä¸­åºéå†-leetcode-94"><a href="#äºŒå‰æ ‘çš„ä¸­åºéå†-leetcode-94" class="headerlink" title="äºŒå‰æ ‘çš„ä¸­åºéå† - leetcode 94"></a>äºŒå‰æ ‘çš„ä¸­åºéå† - leetcode 94</h2><pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token comment"># Definition for a binary tree node.</span><span class="token comment"># class TreeNode:</span><span class="token comment">#     def __init__(self, val=0, left=None, right=None):</span><span class="token comment">#         self.val = val</span><span class="token comment">#         self.left = left</span><span class="token comment">#         self.right = right</span><span class="token keyword">class</span> <span class="token class-name">Solution</span><span class="token punctuation">:</span>    <span class="token keyword">def</span> <span class="token function">inorderTraversal</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> root<span class="token punctuation">:</span> Optional<span class="token punctuation">[</span>TreeNode<span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token operator">-</span><span class="token operator">></span> List<span class="token punctuation">[</span><span class="token builtin">int</span><span class="token punctuation">]</span><span class="token punctuation">:</span>        <span class="token keyword">def</span> <span class="token function">mid_order</span><span class="token punctuation">(</span>root<span class="token punctuation">,</span> ret<span class="token operator">=</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">:</span>            <span class="token keyword">if</span> root <span class="token keyword">is</span> <span class="token boolean">None</span><span class="token punctuation">:</span>                <span class="token keyword">return</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>            mid_order<span class="token punctuation">(</span>root<span class="token punctuation">.</span>left<span class="token punctuation">,</span> ret<span class="token punctuation">)</span>            ret<span class="token punctuation">.</span>append<span class="token punctuation">(</span>root<span class="token punctuation">.</span>val<span class="token punctuation">)</span>            mid_order<span class="token punctuation">(</span>root<span class="token punctuation">.</span>right<span class="token punctuation">,</span> ret<span class="token punctuation">)</span>            <span class="token keyword">return</span> ret        <span class="token keyword">return</span> mid_order<span class="token punctuation">(</span>root<span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h2 id="ä¸åŒçš„äºŒå‰æœç´¢æ ‘-leetcode-92"><a href="#ä¸åŒçš„äºŒå‰æœç´¢æ ‘-leetcode-92" class="headerlink" title="ä¸åŒçš„äºŒå‰æœç´¢æ ‘ -leetcode 92"></a>ä¸åŒçš„äºŒå‰æœç´¢æ ‘ -leetcode 92</h2><blockquote><p>ç»™ä½ ä¸€ä¸ªæ•´æ•° <code>n</code> ï¼Œæ±‚æ°ç”± <code>n</code> ä¸ªèŠ‚ç‚¹ç»„æˆä¸”èŠ‚ç‚¹å€¼ä» <code>1</code> åˆ° <code>n</code> äº’ä¸ç›¸åŒçš„ <strong>äºŒå‰æœç´¢æ ‘</strong> æœ‰å¤šå°‘ç§ï¼Ÿè¿”å›æ»¡è¶³é¢˜æ„çš„äºŒå‰æœç´¢æ ‘çš„ç§æ•°ã€‚ </p></blockquote><pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token keyword">class</span> <span class="token class-name">Solution</span><span class="token punctuation">:</span>    <span class="token comment"># ä¼šè¶…æ—¶</span>    <span class="token comment"># def numTrees(self, n: int) -> int:</span>    <span class="token comment">#     def trees(start, end):</span>            <span class="token comment">#         if start > end:</span>    <span class="token comment">#             return [None, ]</span>    <span class="token comment">#         all_tress = list()  </span>    <span class="token comment">#         for i in range(start, end+1):</span>    <span class="token comment">#             left_trees = trees(start, i-1)</span>    <span class="token comment">#             right_trees = trees(i+1, end)</span>    <span class="token comment">#             for l in left_trees:</span>    <span class="token comment">#                 for r in right_trees:</span>    <span class="token comment">#                     all_tress.append("_")</span>    <span class="token comment">#         return all_tress</span>    <span class="token comment">#     return len(trees(1, n))</span>    <span class="token keyword">def</span> <span class="token function">numTrees</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> n<span class="token punctuation">:</span> <span class="token builtin">int</span><span class="token punctuation">)</span> <span class="token operator">-</span><span class="token operator">></span> <span class="token builtin">int</span><span class="token punctuation">:</span>        <span class="token triple-quoted-string string">"""        dp[i] è¡¨ç¤ºåœ¨iå¤„äº’ä¸ç›¸åŒçš„äºŒå‰æ ‘ä¸ªæ•°        G(n) è¡¨ç¤ºé•¿åº¦ä¸ºN çš„åºåˆ—ç»„æˆäºŒå‰æ ‘çš„æ€»ä¸ªæ•°        F(i, n) è¡¨ç¤ºä»¥ç¬¬iä¸ªå…ƒç´ ä¸ºä¸ºæ ¹ï¼Œ é•¿åº¦ä¸ºnçš„å…ƒç´ ç»„æˆäºŒå‰æ ‘çš„ä¸ªæ•°        G(n) = F(1, N) + F(2, n) + .... F(n,n)                F(i, n) = G(i-1)G(n-i)        G(i) += G(i-1)G(n-i)        """</span>        G <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">*</span> <span class="token punctuation">(</span>n<span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">)</span>        G<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token number">1</span>        G<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token number">1</span>        <span class="token keyword">for</span> i <span class="token keyword">in</span> <span class="token builtin">range</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">,</span> n<span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">:</span>            <span class="token keyword">for</span> j <span class="token keyword">in</span> <span class="token builtin">range</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> i<span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">:</span>  <span class="token comment"># é•¿åº¦ä¸ºi ä»¥j ä¸ºæ ¹çš„ä¸ªæ•°çš„æ€»ä¸ªæ•°</span>                G<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">+=</span> G<span class="token punctuation">[</span>j<span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token operator">*</span>G<span class="token punctuation">[</span>i<span class="token operator">-</span>j<span class="token punctuation">]</span>        <span class="token keyword">return</span> G<span class="token punctuation">[</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">]</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h2 id="ä¸åŒçš„äºŒå‰æœç´¢æ ‘II-leetcode-95"><a href="#ä¸åŒçš„äºŒå‰æœç´¢æ ‘II-leetcode-95" class="headerlink" title="ä¸åŒçš„äºŒå‰æœç´¢æ ‘II - leetcode 95"></a>ä¸åŒçš„äºŒå‰æœç´¢æ ‘II - leetcode 95</h2><blockquote><p>ç»™ä½ ä¸€ä¸ªæ•´æ•° <code>n</code> ï¼Œè¯·ä½ ç”Ÿæˆå¹¶è¿”å›æ‰€æœ‰ç”± <code>n</code> ä¸ªèŠ‚ç‚¹ç»„æˆä¸”èŠ‚ç‚¹å€¼ä» <code>1</code> åˆ° <code>n</code> äº’ä¸ç›¸åŒçš„ä¸åŒ <strong>äºŒå‰æœç´¢æ ‘</strong> ã€‚å¯ä»¥æŒ‰ <strong>ä»»æ„é¡ºåº</strong> è¿”å›ç­”æ¡ˆã€‚ </p></blockquote><pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token comment"># Definition for a binary tree node.</span><span class="token comment"># class TreeNode:</span><span class="token comment">#     def __init__(self, val=0, left=None, right=None):</span><span class="token comment">#         self.val = val</span><span class="token comment">#         self.left = left</span><span class="token comment">#         self.right = right</span><span class="token keyword">class</span> <span class="token class-name">Solution</span><span class="token punctuation">:</span>    <span class="token triple-quoted-string string">"""    å›æº¯æ³•    """</span>    <span class="token keyword">def</span> <span class="token function">generateTrees</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> n<span class="token punctuation">:</span> <span class="token builtin">int</span><span class="token punctuation">)</span> <span class="token operator">-</span><span class="token operator">></span> List<span class="token punctuation">[</span>Optional<span class="token punctuation">[</span>TreeNode<span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">:</span>        <span class="token keyword">def</span> <span class="token function">trees</span><span class="token punctuation">(</span>start<span class="token punctuation">,</span> end<span class="token punctuation">)</span><span class="token punctuation">:</span>            <span class="token keyword">if</span> start <span class="token operator">></span> end<span class="token punctuation">:</span>                <span class="token keyword">return</span> <span class="token punctuation">[</span><span class="token boolean">None</span><span class="token punctuation">,</span><span class="token punctuation">]</span>            allTress <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>            <span class="token keyword">for</span> i <span class="token keyword">in</span> <span class="token builtin">range</span><span class="token punctuation">(</span>start<span class="token punctuation">,</span> end<span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">:</span>                            <span class="token comment"># æ‰€æœ‰çš„å·¦å­æ ‘</span>                left_trees <span class="token operator">=</span> trees<span class="token punctuation">(</span>start<span class="token punctuation">,</span> i <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span>                <span class="token comment"># æ‰€æœ‰çš„å³å­æ ‘</span>                                right_tree <span class="token operator">=</span> trees<span class="token punctuation">(</span>i <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">,</span> end<span class="token punctuation">)</span>                <span class="token keyword">for</span> l <span class="token keyword">in</span> left_trees<span class="token punctuation">:</span>                    <span class="token keyword">for</span> r <span class="token keyword">in</span> right_tree<span class="token punctuation">:</span>                        curr_tree <span class="token operator">=</span> TreeNode<span class="token punctuation">(</span>i<span class="token punctuation">)</span>                        curr_tree<span class="token punctuation">.</span>left <span class="token operator">=</span> l                        curr_tree<span class="token punctuation">.</span>right <span class="token operator">=</span> r                        allTress<span class="token punctuation">.</span>append<span class="token punctuation">(</span>curr_tree<span class="token punctuation">)</span>            <span class="token keyword">return</span> allTress        <span class="token keyword">return</span> trees<span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> n<span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h2 id="äº¤é”™å­—ç¬¦ä¸²-leetcode-97"><a href="#äº¤é”™å­—ç¬¦ä¸²-leetcode-97" class="headerlink" title="äº¤é”™å­—ç¬¦ä¸² - leetcode 97"></a>äº¤é”™å­—ç¬¦ä¸² - leetcode 97</h2><blockquote><p>ç»™å®šä¸‰ä¸ªå­—ç¬¦ä¸² s1ã€s2ã€s3ï¼Œè¯·ä½ å¸®å¿™éªŒè¯ s3 æ˜¯å¦æ˜¯ç”± s1 å’Œ s2 äº¤é”™ ç»„æˆçš„ã€‚</p><p>ä¸¤ä¸ªå­—ç¬¦ä¸² s å’Œ t äº¤é”™ çš„å®šä¹‰ä¸è¿‡ç¨‹å¦‚ä¸‹ï¼Œå…¶ä¸­æ¯ä¸ªå­—ç¬¦ä¸²éƒ½ä¼šè¢«åˆ†å‰²æˆè‹¥å¹² éç©º å­å­—ç¬¦ä¸²ï¼š</p><p>s &#x3D; s1 + s2 + â€¦ + sn<br>t &#x3D; t1 + t2 + â€¦ + tm<br>|n - m| &lt;&#x3D; 1<br>äº¤é”™ æ˜¯ s1 + t1 + s2 + t2 + s3 + t3 + â€¦ æˆ–è€… t1 + s1 + t2 + s2 + t3 + s3 + â€¦<br>æ³¨æ„ï¼ša + b æ„å‘³ç€å­—ç¬¦ä¸² a å’Œ b è¿æ¥ã€‚</p></blockquote><pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token keyword">class</span> <span class="token class-name">Solution</span><span class="token punctuation">:</span>    <span class="token triple-quoted-string string">"""    å¦‚æœåœ¨i ä½ç½®æ˜¯äº¤é”™åˆ™    s1[0] + s2[0] + s1[1] +  s2[1] + .... s1[i] + s2[i] = s[2i]  or    s1[0] + s2[0] + s1[1] +  s2[1] + .... s1[i] = s[2i-1]  # æˆ–è€…å…ˆs2å†s1    åŠ¨æ€è§„åˆ’ï¼š    1. dp[i][j] = åœ¨s1[0:i] s2[0:j] å¤„äº¤é”™ç»„æˆçš„å­—ç¬¦ä¸²æ˜¯å¦å­˜åœ¨s3çš„å­—ä¸² s3[0:i+j]    2.æ¨å¯¼å…¬å¼        len(s1[i]) + len(s2[j]) = len(s[3])    åˆ¤æ–­æ˜¯å¦åœ¨æ˜¯s1[i] å¤„æ˜¯ç›¸äº¤éœ€è¦çœ‹æ˜¯dp[i-1][j]å¤„æ˜¯å¦ç›¸äº¤ä¸”s[i-1] == s3[i+j-1]    s2[j]  dp[i][j-1] ä¸”s2[j-1] = s3[i+j-1]         dp[0][0] = True è¡¨ç¤ºå–ç©º å¯ä»¥ç”Ÿæˆs3ä¸­çš„ç©º    2. é€’æ¨å…¬å¼ï¼š     """</span>    <span class="token keyword">def</span> <span class="token function">isInterleave</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> s1<span class="token punctuation">:</span> <span class="token builtin">str</span><span class="token punctuation">,</span> s2<span class="token punctuation">:</span> <span class="token builtin">str</span><span class="token punctuation">,</span> s3<span class="token punctuation">:</span> <span class="token builtin">str</span><span class="token punctuation">)</span> <span class="token operator">-</span><span class="token operator">></span> <span class="token builtin">bool</span><span class="token punctuation">:</span>                        <span class="token comment">#dp = [[False] * (len(s2)+1) for _ in range(len(s1)+1)]</span>        len1 <span class="token operator">=</span> <span class="token builtin">len</span><span class="token punctuation">(</span>s1<span class="token punctuation">)</span>        len2 <span class="token operator">=</span> <span class="token builtin">len</span><span class="token punctuation">(</span>s2<span class="token punctuation">)</span>        len3 <span class="token operator">=</span> <span class="token builtin">len</span><span class="token punctuation">(</span>s3<span class="token punctuation">)</span>        <span class="token keyword">if</span> len1 <span class="token operator">+</span> len2 <span class="token operator">!=</span> len3<span class="token punctuation">:</span>            <span class="token keyword">return</span> <span class="token boolean">False</span>                    dp<span class="token operator">=</span><span class="token punctuation">[</span><span class="token punctuation">[</span><span class="token boolean">False</span><span class="token punctuation">]</span><span class="token operator">*</span><span class="token punctuation">(</span>len2<span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">)</span> <span class="token keyword">for</span> _ <span class="token keyword">in</span> <span class="token builtin">range</span><span class="token punctuation">(</span>len1<span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">]</span>        dp<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token boolean">True</span>        <span class="token comment"># åˆå§‹åŒ–è¡Œåˆ—</span>        <span class="token comment"># print(dp)</span>        <span class="token keyword">for</span> i <span class="token keyword">in</span> <span class="token builtin">range</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token builtin">len</span><span class="token punctuation">(</span>s2<span class="token punctuation">)</span><span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">:</span>  <span class="token comment"># ç¬¬ä¸€è¡Œ</span>            <span class="token keyword">if</span> s2<span class="token punctuation">[</span>i<span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">==</span> s3<span class="token punctuation">[</span>i<span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">:</span>                dp<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">=</span> dp<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">[</span>i<span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">]</span>        <span class="token comment"># print(dp, "åˆå§‹åŒ–ç¬¬ä¸€è¡Œ")</span>        <span class="token keyword">for</span> i <span class="token keyword">in</span> <span class="token builtin">range</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token builtin">len</span><span class="token punctuation">(</span>s1<span class="token punctuation">)</span><span class="token operator">+</span><span class="token number">1</span> <span class="token punctuation">)</span><span class="token punctuation">:</span>  <span class="token comment"># ç¬¬ä¸€åˆ—</span>            <span class="token keyword">if</span> s1<span class="token punctuation">[</span>i<span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">==</span> s3<span class="token punctuation">[</span>i<span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">:</span>                dp<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">=</span> dp<span class="token punctuation">[</span>i<span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span>            <span class="token keyword">for</span> i <span class="token keyword">in</span> <span class="token builtin">range</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token builtin">len</span><span class="token punctuation">(</span>s1<span class="token punctuation">)</span><span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">:</span>            <span class="token keyword">for</span> j <span class="token keyword">in</span> <span class="token builtin">range</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token builtin">len</span><span class="token punctuation">(</span>s2<span class="token punctuation">)</span><span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">:</span>                <span class="token keyword">if</span> s1<span class="token punctuation">[</span>i<span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">==</span> s3<span class="token punctuation">[</span>i<span class="token operator">+</span>j<span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">:</span>                    dp<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">[</span>j<span class="token punctuation">]</span> <span class="token operator">=</span> dp<span class="token punctuation">[</span>i<span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">[</span>j<span class="token punctuation">]</span>                <span class="token keyword">if</span> s2<span class="token punctuation">[</span>j<span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">==</span> s3<span class="token punctuation">[</span>i<span class="token operator">+</span>j<span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">:</span>                    dp<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">[</span>j<span class="token punctuation">]</span> <span class="token operator">=</span> dp<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">[</span>j<span class="token punctuation">]</span> <span class="token keyword">or</span> dp<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">[</span>j<span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">]</span>        <span class="token keyword">return</span> dp<span class="token punctuation">[</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">]</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h1 id="åŠ¨æ€è§„åˆ’é—®é¢˜"><a href="#åŠ¨æ€è§„åˆ’é—®é¢˜" class="headerlink" title="åŠ¨æ€è§„åˆ’é—®é¢˜"></a>åŠ¨æ€è§„åˆ’é—®é¢˜</h1><ul><li><p>dp æ•°ç»„çš„å®šä¹‰ä»¥åŠä¸‹æ ‡çš„å«ä¹‰dp[i][j]</p></li><li><p>é€’æ¨å…¬å¼</p></li><li><p>dpæ•°ç»„å¦‚ä½•åˆå§‹åŒ–</p></li><li><p>éå†é¡ºåº</p></li><li><p>æ‰“å°dpæ•°ç»„</p></li></ul><h2 id="åŠ¨æ€è§„åˆ’è§£å†³æ–æ³¢é‚£å¥‘æ•°"><a href="#åŠ¨æ€è§„åˆ’è§£å†³æ–æ³¢é‚£å¥‘æ•°" class="headerlink" title="åŠ¨æ€è§„åˆ’è§£å†³æ–æ³¢é‚£å¥‘æ•°"></a>åŠ¨æ€è§„åˆ’è§£å†³æ–æ³¢é‚£å¥‘æ•°</h2><ol><li><p>dpæ•°ç»„ä¸‹æ ‡ä»¥åŠå«ä¹‰dp[i]ï¼Œ ç¬¬iä¸ªæ–æ³¢é‚£å¥‘æ•°ï¼Œdp[i]è¡¨ç¤ºç¬¬iä¸ªæ–æ³¢é‚£å¥‘æ•°å€¼</p></li><li><p>é€’æ¨å…¬å¼dp[i] &#x3D; dp[i-1]  +  dp[i-1]</p></li><li><p>åˆå§‹åŒ–ï¼šdp[0] &#x3D; 1 dp[1] &#x3D; 1</p></li><li><p>éå†é¡ºåºï¼šä»å‰å‘å</p></li><li><p>æ‰“å°dpæ•°ç»„</p></li></ol><pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token keyword">def</span> <span class="token function">fibonc</span><span class="token punctuation">(</span>n<span class="token punctuation">)</span><span class="token punctuation">:</span>    dp <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">]</span>    <span class="token comment">#dp[0], dp[1] = 1, 1</span>    <span class="token keyword">if</span> n <span class="token operator">==</span><span class="token number">0</span> <span class="token keyword">or</span> n <span class="token operator">==</span><span class="token number">1</span><span class="token punctuation">:</span>        <span class="token keyword">return</span> <span class="token number">1</span>    i <span class="token operator">=</span> <span class="token number">2</span>    <span class="token keyword">while</span> i <span class="token operator">&lt;=</span>n<span class="token punctuation">:</span>        dp<span class="token punctuation">.</span>append<span class="token punctuation">(</span>dp<span class="token punctuation">[</span>i<span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">+</span> dp<span class="token punctuation">[</span>i<span class="token operator">-</span><span class="token number">2</span><span class="token punctuation">]</span><span class="token punctuation">)</span>        i<span class="token operator">+=</span><span class="token number">1</span>    <span class="token keyword">return</span> dp<span class="token punctuation">[</span>i<span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token keyword">if</span> __name__ <span class="token operator">==</span> <span class="token string">"__main__"</span><span class="token punctuation">:</span>fibonc<span class="token punctuation">(</span>n<span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h2 id="åŠ¨æ€è§„åˆ’è§£å†³ä¸Šæ¥¼æ¢¯é—®é¢˜"><a href="#åŠ¨æ€è§„åˆ’è§£å†³ä¸Šæ¥¼æ¢¯é—®é¢˜" class="headerlink" title="åŠ¨æ€è§„åˆ’è§£å†³ä¸Šæ¥¼æ¢¯é—®é¢˜"></a>åŠ¨æ€è§„åˆ’è§£å†³ä¸Šæ¥¼æ¢¯é—®é¢˜</h2><blockquote><p>né˜¶å°é˜¶ï¼Œä¸€æ¬¡å¯ä»¥ä¸Šä¸€é˜¶æˆ–è€…ä¸¤é˜¶ï¼Œåˆ°è¾¾ç¬¬né˜¶æœ‰å‡ ç§æ–¹æ³•</p></blockquote><p>1é˜¶   1</p><p>2é˜¶  2</p><p>3é˜¶ 3</p><p>4é˜¶ 5</p><p>åŠ¨å½’äº”éƒ¨æ›²</p><ol><li>dp[i]  è¡¨ç¤ºä¸Šåˆ°ç¬¬ié˜¶çš„æ‰€æœ‰æ–¹æ³•</li><li>é€’æ¨å…¬å¼ï¼š dp[i]  &#x3D; dp[i-1]  + dp[i-2] </li><li>åˆå§‹åŒ–ï¼šdp[0] &#x3D; 0, dp[1]&#x3D;1,  dp[2] &#x3D; 2</li><li>ç¡®å®šéå†é¡ºåºï¼š ä»å¤´å‘å</li><li>æ‰“å°dpæ•°ç»„</li></ol><pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token keyword">def</span> <span class="token function">solution</span><span class="token punctuation">(</span>n<span class="token punctuation">)</span><span class="token punctuation">:</span>    dp <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">]</span>    <span class="token keyword">if</span> n <span class="token operator">==</span><span class="token number">1</span> <span class="token keyword">or</span> n <span class="token operator">==</span><span class="token number">2</span><span class="token punctuation">:</span>        <span class="token keyword">return</span> <span class="token number">1</span> <span class="token keyword">if</span> n<span class="token operator">==</span><span class="token number">1</span> <span class="token keyword">else</span> <span class="token number">2</span>    i <span class="token operator">=</span> <span class="token number">2</span>    <span class="token keyword">while</span> i <span class="token operator">&lt;=</span>n<span class="token punctuation">:</span>        dp<span class="token punctuation">.</span>append<span class="token punctuation">(</span>dp<span class="token punctuation">[</span>i<span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">+</span> dp<span class="token punctuation">[</span>i<span class="token operator">-</span><span class="token number">2</span><span class="token punctuation">]</span><span class="token punctuation">)</span>        i<span class="token operator">+=</span><span class="token number">1</span>    <span class="token keyword">return</span> dp<span class="token punctuation">[</span>n<span class="token punctuation">]</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>åŠ¨æ€è§„åˆ’ä¸Šæ¥¼æ¢¯è¿›é˜¶ç‰ˆ</p><blockquote><p>né˜¶å°é˜¶ï¼Œä¸€æ¬¡å¯ä»¥ä¸Š1, ,2, 5 ï¼Œåˆ°è¾¾ç¬¬né˜¶æœ‰å‡ ç§æ–¹æ³•</p></blockquote><p><code>æ­¤æ—¶çŠ¶æ€æ–¹ç¨‹ä¸ºdp[i]=dp[i-</code>1] + dp[i-2] + dp[i-5] , è¿›ä¸€æ­¥è½¬æ¢dp[i] &#x3D; dp[i] + dp[j], j in [1, 2, 5]&#96;</p><p>dp[i] &#x3D; dp[i] + dp[j] ç”±æ¥æ˜¯å› ä¸ºåˆå§‹åŒ–çš„æ—¶å€™dp[i] éƒ½ä¸º0 </p><pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token keyword">def</span> <span class="token function">solution</span><span class="token punctuation">(</span>n<span class="token punctuation">)</span><span class="token punctuation">:</span>steps <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">]</span>    dp <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">*</span> n    <span class="token keyword">for</span> i <span class="token keyword">in</span> <span class="token builtin">range</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> n<span class="token punctuation">)</span><span class="token punctuation">:</span>        <span class="token keyword">for</span> j <span class="token keyword">in</span> <span class="token builtin">range</span><span class="token punctuation">(</span><span class="token builtin">len</span><span class="token punctuation">(</span>steps<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">:</span>            step <span class="token operator">=</span> steps<span class="token punctuation">[</span>i<span class="token punctuation">]</span>            <span class="token keyword">if</span> i <span class="token operator">&lt;</span> step<span class="token punctuation">:</span>                <span class="token keyword">continue</span>            dp<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">=</span> dp<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">+</span> dp<span class="token punctuation">[</span>j<span class="token punctuation">]</span>    <span class="token keyword">return</span> dp<span class="token punctuation">[</span>n<span class="token punctuation">]</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h2 id="é›¶é’±å…‘æ¢II-leetcode-518"><a href="#é›¶é’±å…‘æ¢II-leetcode-518" class="headerlink" title="é›¶é’±å…‘æ¢II-leetcode 518"></a>é›¶é’±å…‘æ¢II-leetcode 518</h2><blockquote><p>ç»™ä½ ä¸€ä¸ªæ•´æ•°æ•°ç»„ coins è¡¨ç¤ºä¸åŒé¢é¢çš„ç¡¬å¸ï¼Œå¦ç»™ä¸€ä¸ªæ•´æ•° amount è¡¨ç¤ºæ€»é‡‘é¢ã€‚</p><p>è¯·ä½ è®¡ç®—å¹¶è¿”å›å¯ä»¥å‡‘æˆæ€»é‡‘é¢çš„ç¡¬å¸ç»„åˆæ•°ã€‚å¦‚æœä»»ä½•ç¡¬å¸ç»„åˆéƒ½æ— æ³•å‡‘å‡ºæ€»é‡‘é¢ï¼Œè¿”å› 0 ã€‚</p><p>å‡è®¾æ¯ä¸€ç§é¢é¢çš„ç¡¬å¸æœ‰æ— é™ä¸ªã€‚</p></blockquote><p><strong>ç”±äºé¢˜ç›®è¦æ±‚æ—¶æ±‚ç»„åˆæ•°ï¼Œæ‰€ä»¥è¦å…ˆéå†ç‰©å“ï¼Œå†éå†èƒŒåŒ…ï¼Œ å¦‚æœå…ˆéå†èƒŒåŒ…å†éå†ç‰©å“æ˜¯æ’åˆ—é—®é¢˜</strong></p><pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token keyword">class</span> <span class="token class-name">Solution</span><span class="token punctuation">:</span>    <span class="token keyword">def</span> <span class="token function">change</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> amount<span class="token punctuation">:</span> <span class="token builtin">int</span><span class="token punctuation">,</span> coins<span class="token punctuation">:</span> List<span class="token punctuation">[</span><span class="token builtin">int</span><span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token operator">-</span><span class="token operator">></span> <span class="token builtin">int</span><span class="token punctuation">:</span>        <span class="token triple-quoted-string string">"""        dp å½“ç¬¬ä¸ªæ—¶çš„ç»„åˆæ•°        dp[i] = dp[i] + dp[i-1]        ç±»ä¼¼äºä¸Šn é˜¶å°é˜¶ï¼Œ æ¯æ¬¡èƒ½ä¸Š[1, 3, 4, 5,]é˜¶ï¼Œç”±æ­¤æ¨å¯¼è¿‡æ¥               """</span>        dp <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">*</span> <span class="token punctuation">(</span>amount<span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">)</span>        dp<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token number">1</span>        <span class="token keyword">for</span> conin <span class="token keyword">in</span> coins<span class="token punctuation">:</span>            <span class="token keyword">for</span> i <span class="token keyword">in</span> <span class="token builtin">range</span><span class="token punctuation">(</span>conin<span class="token punctuation">,</span> amount<span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">:</span>                dp<span class="token punctuation">[</span>i<span class="token punctuation">]</span>  <span class="token operator">+=</span> dp<span class="token punctuation">[</span>i<span class="token operator">-</span>conin<span class="token punctuation">]</span>        <span class="token keyword">print</span><span class="token punctuation">(</span>dp<span class="token punctuation">)</span>        <span class="token keyword">return</span> dp<span class="token punctuation">[</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">]</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h2 id="é›¶é’±å…‘æ¢-leetcode-322"><a href="#é›¶é’±å…‘æ¢-leetcode-322" class="headerlink" title="é›¶é’±å…‘æ¢-leetcode 322"></a>é›¶é’±å…‘æ¢-leetcode 322</h2><pre class="line-numbers language-none"><code class="language-none">åç»­è¡¥å……<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><h2 id="ä¸åŒè·¯å¾„é—®é¢˜-leetcode-62"><a href="#ä¸åŒè·¯å¾„é—®é¢˜-leetcode-62" class="headerlink" title="ä¸åŒè·¯å¾„é—®é¢˜ - leetcode 62"></a>ä¸åŒè·¯å¾„é—®é¢˜ - leetcode 62</h2><blockquote><p>ä¸€ä¸ªæœºå™¨äººä½äºä¸€ä¸ª m x n ç½‘æ ¼çš„å·¦ä¸Šè§’ ï¼ˆèµ·å§‹ç‚¹åœ¨ä¸‹å›¾ä¸­æ ‡è®°ä¸º â€œStartâ€ ï¼‰ã€‚</p><p>æœºå™¨äººæ¯æ¬¡åªèƒ½å‘ä¸‹æˆ–è€…å‘å³ç§»åŠ¨ä¸€æ­¥ã€‚æœºå™¨äººè¯•å›¾è¾¾åˆ°ç½‘æ ¼çš„å³ä¸‹è§’ï¼ˆåœ¨ä¸‹å›¾ä¸­æ ‡è®°ä¸º â€œFinishâ€ ï¼‰ã€‚</p><p>é—®æ€»å…±æœ‰å¤šå°‘æ¡ä¸åŒçš„è·¯å¾„ï¼Ÿ</p></blockquote><p><img src="https://zhangtq-blog.oss-cn-hangzhou.aliyuncs.com/content_picture/image-20221124163848466.png" alt="è·¯å¾„é—®é¢˜"></p><pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token keyword">class</span> <span class="token class-name">Solution</span><span class="token punctuation">:</span>    <span class="token keyword">def</span> <span class="token function">uniquePaths</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> m<span class="token punctuation">:</span> <span class="token builtin">int</span><span class="token punctuation">,</span> n<span class="token punctuation">:</span> <span class="token builtin">int</span><span class="token punctuation">)</span> <span class="token operator">-</span><span class="token operator">></span> <span class="token builtin">int</span><span class="token punctuation">:</span>        <span class="token comment"># dp[i][j] åœ¨ijä½ç½®å¤„çš„æ‰€æœ‰è·¯å¾„</span>        <span class="token comment"># dp[i][j] = dp[i-1][j] + dp[i][j-1]</span>        dp <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token operator">*</span> n <span class="token punctuation">]</span> <span class="token operator">+</span> <span class="token punctuation">[</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">+</span> <span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token operator">*</span><span class="token punctuation">(</span>n<span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span> <span class="token keyword">for</span> _ <span class="token keyword">in</span> <span class="token builtin">range</span><span class="token punctuation">(</span>m<span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">]</span>  <span class="token comment"># mè¡Œ n åˆ—</span>        <span class="token keyword">for</span> i <span class="token keyword">in</span> <span class="token builtin">range</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> m<span class="token punctuation">)</span><span class="token punctuation">:</span>             <span class="token keyword">for</span> j <span class="token keyword">in</span> <span class="token builtin">range</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> n<span class="token punctuation">)</span><span class="token punctuation">:</span>                 dp<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">[</span>j<span class="token punctuation">]</span> <span class="token operator">=</span> dp<span class="token punctuation">[</span>i<span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">[</span>j<span class="token punctuation">]</span> <span class="token operator">+</span> dp<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">[</span>j<span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">]</span>        <span class="token keyword">return</span> dp<span class="token punctuation">[</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">]</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h2 id="åŠ¨æ€è§„åˆ’è§£å†³-0-1èƒŒåŒ…é—®é¢˜"><a href="#åŠ¨æ€è§„åˆ’è§£å†³-0-1èƒŒåŒ…é—®é¢˜" class="headerlink" title="åŠ¨æ€è§„åˆ’è§£å†³ 0-1èƒŒåŒ…é—®é¢˜"></a>åŠ¨æ€è§„åˆ’è§£å†³ 0-1èƒŒåŒ…é—®é¢˜</h2><p>0-1èƒŒåŒ…ï¼Œ nç§ç‰©å“ï¼Œæ¯ç§ç‰©å“åªæœ‰ä¸€ä¸ª</p><p>å®Œå…¨èƒŒåŒ…ï¼Œnç§ç‰©å“ï¼Œæ¯ç§ç‰©å“æœ‰æ— é™ä¸ª</p><p>å¤šé‡èƒŒåŒ…ï¼Œnç§ç‰©å“ï¼Œæ¯ç§ç‰©å“ä¸ªæ•°å„ä¸ç›¸åŒ</p><blockquote><p>01èƒŒåŒ…</p><p>èƒŒåŒ…é—®é¢˜å«ä¹‰æ˜¯Nä¸ªç‰©å“ï¼Œå®¹é‡VèƒŒåŒ…ï¼Œæ¯ä»¶ç‰©å“ä»…ç”¨ä¸€æ¬¡</p><p>æœ‰ Nä»¶ç‰©å“å’Œä¸€ä¸ªå®¹é‡æ˜¯ Vçš„èƒŒåŒ…ã€‚æ¯ä»¶ç‰©å“åªèƒ½ä½¿ç”¨ä¸€æ¬¡ã€‚</p><p>ç¬¬ i ä»¶ç‰©å“çš„ä½“ç§¯æ˜¯ viï¼Œä»·å€¼æ˜¯wiã€‚</p><p>æ±‚è§£å°†å“ªäº›ç‰©å“è£…å…¥èƒŒåŒ…ï¼Œå¯ä½¿è¿™äº›ç‰©å“çš„æ€»ä½“ç§¯ä¸è¶…è¿‡èƒŒåŒ…å®¹é‡ï¼Œä¸”æ€»ä»·å€¼æœ€å¤§ã€‚<br>è¾“å‡ºæœ€å¤§ä»·å€¼ã€‚</p></blockquote><p><img src="https://zhangtq-blog.oss-cn-hangzhou.aliyuncs.com/content_picture/image-20221124163942139.png" alt="0-1èƒŒåŒ…"></p><p>åŠ¨å½’äº”éƒ¨æ›²ï¼š</p><ol><li><p>å®šä¹‰dpæ•°ç»„ä»¥åŠå«ä¹‰dp[i][j]   0-iä¹‹é—´çš„ç‰©å“ä»»å–ï¼Œ æ”¾è¿›å®¹é‡ä¸ºjçš„èƒŒåŒ…é‡Œ</p></li><li><p>é€’æ¨å…¬å¼ï¼š ä¸æ”¾ç‰©å“i   dp[i-1][j]  æ”¾ç‰©å“i dp[i-1][j-weigh(i)]+ value[i]</p></li><li><p>åˆå§‹åŒ–dpæ•°ç»„ï¼Œ</p></li></ol><table><thead><tr><th></th><th>é‡é‡</th><th>ä»·å€¼</th></tr></thead><tbody><tr><td>ç‰©å“0</td><td></td><td></td></tr><tr><td>ç‰©å“1</td><td></td><td></td></tr><tr><td>ç‰©å“2</td><td></td><td></td></tr></tbody></table><pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token keyword">def</span> <span class="token function">solution</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span>    <span class="token triple-quoted-string string">"""    è®¾å®šdpæ•°ç»„ï¼š dp[i][j] ç¬¬iä¸ªç‰©å“æ”¾å…¥å®¹é‡ä¸ºjçš„èƒŒåŒ…ä¸­çš„æœ€å¤§ä»·å€¼    æ¨å¯¼å…¬å¼ï¼š å½“v[i]>j ä¸æ”¾ çš„dp[i][j] = dp[i-1][j]                å½“v[i]&lt;j, æ”¾å…¥ï¼Œmax(dp[i][j] = dp[i-1][j-v[i]] + w[i], dp[i][j]=dp[i-1][j])    åˆå§‹åŒ–dpæ•°ç»„ï¼šå½“å®¹é‡ä¸º0æ—¶ï¼Œä¸è®ºç‰©å“ï¼Œæœ€å¤§ä»·å€¼ä¸º0                 å½“ç‰©å“ä¸º0æ—¶ï¼Œä¸è®ºèƒŒåŒ…å®¹é‡ï¼Œæœ€å¤§ä»·å€¼ä¸º0    """</span>    c <span class="token operator">=</span> <span class="token number">10</span>    w <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">,</span> <span class="token number">7</span><span class="token punctuation">]</span>    v <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">,</span> <span class="token number">6</span><span class="token punctuation">,</span> <span class="token number">9</span><span class="token punctuation">]</span>    n <span class="token operator">=</span> <span class="token builtin">len</span><span class="token punctuation">(</span>w<span class="token punctuation">)</span>    <span class="token comment"># åˆå§‹åŒ–dpæ•°ç»„ï¼Œ n * c çš„æ•°ç»„</span>    dp <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token operator">*</span><span class="token punctuation">(</span>c<span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">)</span> <span class="token keyword">for</span> _ <span class="token keyword">in</span> <span class="token builtin">range</span><span class="token punctuation">(</span>n<span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">]</span>    w<span class="token punctuation">.</span>insert<span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span>    v<span class="token punctuation">.</span>insert<span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span>    <span class="token keyword">print</span><span class="token punctuation">(</span>dp<span class="token punctuation">)</span>    <span class="token keyword">for</span> i <span class="token keyword">in</span> <span class="token builtin">range</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> n<span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">:</span>  <span class="token comment"># ç‰©ä½“ç¼–å·</span>        <span class="token keyword">for</span> j <span class="token keyword">in</span> <span class="token builtin">range</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> c<span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">:</span>  <span class="token comment"># èƒŒåŒ…å®¹é‡</span>            <span class="token keyword">if</span> w<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">&lt;=</span> j<span class="token punctuation">:</span>                dp<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">[</span>j<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token builtin">max</span><span class="token punctuation">(</span>dp<span class="token punctuation">[</span>i<span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">[</span>j<span class="token punctuation">]</span><span class="token punctuation">,</span> dp<span class="token punctuation">[</span>i<span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">[</span>j<span class="token operator">-</span>w<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">]</span> <span class="token operator">+</span> v<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">)</span>            <span class="token keyword">else</span><span class="token punctuation">:</span>                dp<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">[</span>j<span class="token punctuation">]</span> <span class="token operator">=</span> dp<span class="token punctuation">[</span>i<span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">[</span>j<span class="token punctuation">]</span>    <span class="token keyword">print</span><span class="token punctuation">(</span>dp<span class="token punctuation">[</span>n<span class="token punctuation">]</span><span class="token punctuation">[</span>c<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token keyword">if</span> __name__ <span class="token operator">==</span> <span class="token string">"__main__"</span><span class="token punctuation">:</span>    solution<span class="token punctuation">(</span><span class="token punctuation">)</span>                                                                      <span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h2 id="åŠ¨æ€è§„åˆ’è§£å†³çŸ©é˜µæœ€å°è·¯å¾„ä¹‹å’Œ"><a href="#åŠ¨æ€è§„åˆ’è§£å†³çŸ©é˜µæœ€å°è·¯å¾„ä¹‹å’Œ" class="headerlink" title="åŠ¨æ€è§„åˆ’è§£å†³çŸ©é˜µæœ€å°è·¯å¾„ä¹‹å’Œ"></a>åŠ¨æ€è§„åˆ’è§£å†³çŸ©é˜µæœ€å°è·¯å¾„ä¹‹å’Œ</h2><blockquote><p> ç»™å®šä¸€ä¸ªçŸ©é˜µmï¼Œä»å·¦ä¸Šè§’å¼€å§‹æ¯æ¬¡åªèƒ½å‘å³èµ°æˆ–è€…å‘ä¸‹èµ°ï¼Œæœ€åè¾¾åˆ°å³ä¸‹è§’çš„ä½ç½®ï¼Œè·¯å¾„ä¸­æ‰€æœ‰æ•°å­—ç´¯åŠ èµ·æ¥å°±æ˜¯è·¯å¾„å’Œï¼Œè¿”å›æ‰€æœ‰è·¯å¾„çš„æœ€å°è·¯å¾„å’Œï¼Œå¦‚æœç»™å®šçš„må¦‚ä¸‹ï¼Œé‚£ä¹ˆè·¯å¾„1,3,1,0,6,1,0å°±æ˜¯æœ€å°è·¯å¾„å’Œï¼Œè¿”å›12. </p></blockquote><pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token keyword">def</span> <span class="token function">solution</span><span class="token punctuation">(</span>in_matrix<span class="token punctuation">)</span><span class="token punctuation">:</span>    <span class="token triple-quoted-string string">"""    å®šä¹‰dpæ•°ç»„ï¼› dp[i][j] è¡¨ç¤ºä»å‡ºå‘ç‚¹ï¼ˆ0ï¼Œ0ï¼‰ åˆ°ï¼ˆi, jï¼‰çš„æœ€çŸ­è·¯å¾„ä¸ºdp[i][j]    æ¨åˆ°å…¬å¼ï¼š å‘ä¸‹èµ° dp[i][j] = min(dp[i-1][j] + , dp[i][j-11]) + p[i][j]    åˆå§‹åŒ–dpæ•°ç»„: å½“ä¸Šé¢ä¸ºè¾¹ç•Œæ—¶ï¼Œ å€¼åªèƒ½ä»å·¦è¾¹æ¥ï¼Œ å½“åšä¸ºè¾¹ç•Œæ—¶ï¼Œå€¼åªèƒ½ä»ä¸Šè¾¹æ¥    å¾ªç¯æ–¹å‘ï¼š ä»å°åˆ°å¤§    """</span>    m <span class="token operator">=</span> <span class="token builtin">len</span><span class="token punctuation">(</span>in_matrix<span class="token punctuation">)</span>   <span class="token comment"># è¡Œæ•°</span>    n <span class="token operator">=</span> <span class="token builtin">len</span><span class="token punctuation">(</span>in_matrix<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token comment"># åˆ—æ•°</span>    <span class="token keyword">for</span> mm <span class="token keyword">in</span> <span class="token builtin">range</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> m<span class="token punctuation">)</span><span class="token punctuation">:</span> <span class="token comment"># ä¸Šè¾¹ç•Œ</span>        in_matrix<span class="token punctuation">[</span>mm<span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span>  <span class="token operator">+=</span> in_matrix<span class="token punctuation">[</span>mm<span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span>    <span class="token keyword">for</span> nn <span class="token keyword">in</span> <span class="token builtin">range</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> n<span class="token punctuation">)</span><span class="token punctuation">:</span>  <span class="token comment"># å³è¾¹ç•Œ</span>        in_matrix<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">[</span>nn<span class="token punctuation">]</span> <span class="token operator">+=</span> in_matrix<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">[</span>nn<span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">]</span>    <span class="token keyword">for</span> i <span class="token keyword">in</span> <span class="token builtin">range</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> m<span class="token punctuation">)</span><span class="token punctuation">:</span>        <span class="token keyword">for</span> j <span class="token keyword">in</span> <span class="token builtin">range</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> n<span class="token punctuation">)</span><span class="token punctuation">:</span>            in_matrix<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">[</span>j<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token builtin">min</span><span class="token punctuation">(</span>in_matrix<span class="token punctuation">[</span>i<span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">[</span>j<span class="token punctuation">]</span><span class="token punctuation">,</span> in_matrix<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">[</span>j<span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token operator">+</span> in_matrix<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">[</span>j<span class="token punctuation">]</span>    <span class="token keyword">return</span> in_matrix<span class="token punctuation">[</span>m<span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">[</span>n<span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token keyword">if</span> __name__ <span class="token operator">==</span> <span class="token string">"__main__"</span><span class="token punctuation">:</span>    p <span class="token operator">=</span> <span class="token punctuation">[</span>        <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">,</span>        <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">5</span><span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">,</span>        <span class="token punctuation">[</span><span class="token number">4</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">]</span>      <span class="token punctuation">]</span>    <span class="token keyword">print</span><span class="token punctuation">(</span>solution<span class="token punctuation">(</span>p<span class="token punctuation">)</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h2 id="åŠ¨æ€è§„åˆ’è§£å†³æœ€å°è·¯å¾„å’Œç»è¿‡çš„è·¯å¾„"><a href="#åŠ¨æ€è§„åˆ’è§£å†³æœ€å°è·¯å¾„å’Œç»è¿‡çš„è·¯å¾„" class="headerlink" title="åŠ¨æ€è§„åˆ’è§£å†³æœ€å°è·¯å¾„å’Œç»è¿‡çš„è·¯å¾„"></a>åŠ¨æ€è§„åˆ’è§£å†³æœ€å°è·¯å¾„å’Œç»è¿‡çš„è·¯å¾„</h2><pre class="line-numbers language-none"><code class="language-none">åç»­è¡¥å……<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><h2 id="åŠ¨æ€è§„åˆ’è§£å†³æœ€é•¿å›æ–‡å­—ä¸²é—®é¢˜"><a href="#åŠ¨æ€è§„åˆ’è§£å†³æœ€é•¿å›æ–‡å­—ä¸²é—®é¢˜" class="headerlink" title="åŠ¨æ€è§„åˆ’è§£å†³æœ€é•¿å›æ–‡å­—ä¸²é—®é¢˜"></a>åŠ¨æ€è§„åˆ’è§£å†³æœ€é•¿å›æ–‡å­—ä¸²é—®é¢˜</h2><blockquote><p> ç»™ä½ ä¸€ä¸ªå­—ç¬¦ä¸² <code>s</code>ï¼Œæ‰¾åˆ° <code>s</code> ä¸­æœ€é•¿çš„å›æ–‡å­ä¸² </p></blockquote><ul><li>å›æ–‡ä¸²ï¼Œå»é™¤å¤´å°¾ä¾æ—§æ˜¯å›æ–‡ä¸²</li></ul><p>åŠ¨å½’äº”æ­¥æ›²</p><ol><li>d[i][j]    è¡¨ç¤ºä¸‹æ ‡ä¸ºi, å’Œä¸‹æ ‡ä¸ºj æ˜¯å¦ä¸ºå›æ–‡å­—ä¸²</li><li>é€’æ¨å…¬å¼ d[i][j] &#x3D; True , åˆ™d[i+1][j-1] &#x3D;True &amp; s[i] &#x3D; s[j]</li><li>åˆå§‹åŒ–å¯¹è§’çº¿å…ƒç´ ï¼ˆå³å…ƒç´ ç›¸åŒæ—¶ï¼Œä¸€å®šäº‹å›æ–‡ä¸²ï¼‰</li><li>éå†é¡ºåºï¼Œç”±i+1 æ˜¯ä¸‹ä¸€è¡Œï¼Œj-1æ˜¯ä¸Šä¸€åˆ—ï¼Œæ‰€ä»¥i,j çš„çŠ¶æ€è½¬ç§»ä¾èµ–åšä¸‹ï¼Œæ‰€ä»¥å¡«è¡¨è¦æŒ‰ç…§åˆ—å¡«</li><li>æ‰“å°dp</li></ol><pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token keyword">def</span> <span class="token function">solution</span><span class="token punctuation">(</span>s<span class="token punctuation">)</span><span class="token punctuation">:</span>    <span class="token triple-quoted-string string">"""    æ¨åˆ°å…¬å¼ï¼šdp[i][j] = True  &lt;====> s[j] == s[j]  and (dp[i+1][j-1]= True or j-i &lt;3)                                         åˆå§‹åŒ–dpæ•°ç»„: å…¨éƒ¨åˆå§‹åŒ–ä¸ºfalseï¼Œ å¯¹è§’çº¿åˆå§‹åŒ–ä¸ºtrue    å¾ªç¯æ–¹å‘ï¼šå› ä¸ºdp[i][j] ä¾èµ–äºå·¦ä¸‹çš„å…ƒç´ ï¼Œæ‰€ä»¥å¾ªç¯æ–¹å‘ ä»å°åˆ°å¤§ï¼Œ ä»åˆ—åˆ°è¡Œ    """</span>    <span class="token keyword">if</span> <span class="token builtin">len</span><span class="token punctuation">(</span>s<span class="token punctuation">)</span> <span class="token operator">&lt;</span><span class="token number">2</span><span class="token punctuation">:</span>        <span class="token keyword">return</span> <span class="token builtin">len</span><span class="token punctuation">(</span>s<span class="token punctuation">)</span>    begin <span class="token operator">=</span> <span class="token number">0</span>    max_len <span class="token operator">=</span> <span class="token number">0</span>    dp <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">[</span><span class="token boolean">False</span><span class="token punctuation">]</span> <span class="token operator">*</span><span class="token builtin">len</span><span class="token punctuation">(</span>s<span class="token punctuation">)</span> <span class="token keyword">for</span> _ <span class="token keyword">in</span> <span class="token builtin">range</span><span class="token punctuation">(</span><span class="token builtin">len</span><span class="token punctuation">(</span>s<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">]</span>    <span class="token keyword">for</span> i <span class="token keyword">in</span> <span class="token builtin">range</span><span class="token punctuation">(</span><span class="token builtin">len</span><span class="token punctuation">(</span>s<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">:</span>        dp<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token boolean">True</span>    <span class="token keyword">print</span><span class="token punctuation">(</span>dp<span class="token punctuation">)</span>    <span class="token comment"># å¾ªç¯å±  </span>    <span class="token keyword">for</span> j <span class="token keyword">in</span> <span class="token builtin">range</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token builtin">len</span><span class="token punctuation">(</span>s<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">:</span>        <span class="token keyword">for</span> i <span class="token keyword">in</span> <span class="token builtin">range</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> i<span class="token punctuation">)</span><span class="token punctuation">:</span>            <span class="token keyword">if</span> s<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">==</span> s<span class="token punctuation">[</span>j<span class="token punctuation">]</span><span class="token punctuation">:</span>                <span class="token keyword">if</span> j<span class="token operator">-</span>i<span class="token operator">&lt;</span><span class="token number">3</span><span class="token punctuation">:</span>                   dp<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">[</span>j<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token boolean">True</span>                <span class="token keyword">else</span><span class="token punctuation">:</span>                    dp<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">[</span>j<span class="token punctuation">]</span> <span class="token operator">=</span> dp<span class="token punctuation">[</span>i<span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">[</span>j<span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">]</span>            <span class="token keyword">else</span><span class="token punctuation">:</span>                dp<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">[</span>j<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token boolean">False</span>            current <span class="token operator">=</span> j<span class="token operator">-</span>i<span class="token operator">+</span><span class="token number">1</span>            <span class="token keyword">if</span> dp<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">[</span>j<span class="token punctuation">]</span> <span class="token keyword">and</span> current <span class="token operator">></span> max_len<span class="token punctuation">:</span>                max_len <span class="token operator">=</span> current                begin <span class="token operator">=</span> i    <span class="token keyword">return</span> s<span class="token punctuation">[</span>begin<span class="token punctuation">:</span> begin<span class="token operator">+</span>max_len<span class="token punctuation">]</span><span class="token keyword">if</span> __name__ <span class="token operator">==</span> <span class="token string">"__main__"</span><span class="token punctuation">:</span>    p <span class="token operator">=</span> <span class="token string">"babab"</span>    <span class="token keyword">print</span><span class="token punctuation">(</span>solution<span class="token punctuation">(</span>p<span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token string">"ç»“æœ"</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h2 id="åŠ¨æ€è§„åˆ’è§£å†³åˆ†å‰²æ•°ç»„é—®é¢˜"><a href="#åŠ¨æ€è§„åˆ’è§£å†³åˆ†å‰²æ•°ç»„é—®é¢˜" class="headerlink" title="åŠ¨æ€è§„åˆ’è§£å†³åˆ†å‰²æ•°ç»„é—®é¢˜"></a>åŠ¨æ€è§„åˆ’è§£å†³åˆ†å‰²æ•°ç»„é—®é¢˜</h2><blockquote><p>ç»™ä½ ä¸€ä¸ª <strong>åªåŒ…å«æ­£æ•´æ•°</strong> çš„ <strong>éç©º</strong> æ•°ç»„ <code>nums</code> ã€‚è¯·ä½ åˆ¤æ–­æ˜¯å¦å¯ä»¥å°†è¿™ä¸ªæ•°ç»„åˆ†å‰²æˆä¸¤ä¸ªå­é›†ï¼Œä½¿å¾—ä¸¤ä¸ªå­é›†çš„å…ƒç´ å’Œç›¸ç­‰ã€‚ </p></blockquote><p>â€‹</p><p>è¯¥é¢˜ç­‰ä»·äºï¼Œ ç»™ä½ len(nums) ç‰©å“ï¼Œæ¯æ¬¡ä»numsä¸­å–ä¸€ä¸ªæ•°ï¼Œæ˜¯å¦æ°å¥½å­˜åœ¨å–åˆ°çš„æ•°å­—å’Œæ°å¥½ç­‰äºæ•°ç»„å’Œçš„ä¸€ä¸€åŠã€‚0-1èƒŒåŒ…é—®é¢˜</p><p>åŠ¨å½’äº”æ­¥æ›²ï¼š</p><ol><li>å®šä¹‰dpæ•°ç»„  dp[i][j], è¡¨ç¤ºä»æ•°ç»„çš„0-iiä¸‹æ ‡ä¸­é€‰å–è‹¥å¹²ä¸ªæ•°ï¼Œæ˜¯å¦å­˜åœ¨ä¸€ç§é€‰å–æ–¹æ¡ˆï¼Œä½¿å¾—è¢«é€‰å–æ•°ä¹‹å’Œæ°å¥½ç­‰äºj</li></ol><p>åˆå§‹æ—¶ï¼Œdpä¸­çš„æ‰€æœ‰å…ƒç´ éƒ½ä¸ºfalse</p><ol start="2"><li><p>é€’æ¨å…¬å¼ï¼š å¯¹äºnums[i]      å¦‚æœé€‰å–  dp[i, j] &#x3D; dp[i-1][j]ï¼Œ å¦‚æœä¸é€‰å» dp[i][j] &#x3D; dp[i-1][j-nums[i]]</p></li><li><p>åˆå§‹åŒ– å¯»æ‰¾è¾¹ç•Œ è€ƒè™‘ï¼Œå¦‚æœä¸å–ä»»ä½•æ•°ï¼Œåˆ™è¢«é€‰å–çš„æ­£æ•´æ•°&#x3D;0ï¼Œ æ‰€ä»¥å¯¹äºæ‰€æœ‰çš„d[i][0] &#x3D; True, å½“i &#x3D;&#x3D; 0æ—¶ï¼Œ åªæœ‰nums[0]è¢«é€‰å–ï¼Œdp[0][nums[0]] &#x3D;  true</p></li><li><p>ç¡®å®šæ‰“å°é¡ºåº</p><pre class="line-numbers language-python" data-language="python"><code class="language-python">å¾…è¡¥å……<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre></li></ol><h1 id="å›æº¯æ³•"><a href="#å›æº¯æ³•" class="headerlink" title="å›æº¯æ³•"></a>å›æº¯æ³•</h1><h2 id="ç»„åˆé—®é¢˜"><a href="#ç»„åˆé—®é¢˜" class="headerlink" title="ç»„åˆé—®é¢˜"></a>ç»„åˆé—®é¢˜</h2><h3 id="å›æº¯è§£å†³ç»„åˆé—®é¢˜-leetcode77"><a href="#å›æº¯è§£å†³ç»„åˆé—®é¢˜-leetcode77" class="headerlink" title="å›æº¯è§£å†³ç»„åˆé—®é¢˜-leetcode77"></a>å›æº¯è§£å†³ç»„åˆé—®é¢˜-leetcode77</h3><blockquote><p> ç»™å®šä¸¤ä¸ªæ•´æ•° n å’Œ kï¼Œè¿”å› 1 â€¦ n ä¸­æ‰€æœ‰å¯èƒ½çš„ k ä¸ªæ•°çš„ç»„åˆ </p></blockquote><p><strong>æ”¹å˜èµ·å§‹ç‚¹å‰ªæ</strong></p><pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token keyword">class</span> <span class="token class-name">Solution</span><span class="token punctuation">:</span>    <span class="token keyword">def</span> <span class="token function">combine</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> n<span class="token punctuation">:</span> <span class="token builtin">int</span><span class="token punctuation">,</span> k<span class="token punctuation">:</span> <span class="token builtin">int</span><span class="token punctuation">)</span> <span class="token operator">-</span><span class="token operator">></span> List<span class="token punctuation">[</span>List<span class="token punctuation">[</span><span class="token builtin">int</span><span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">:</span>        result <span class="token operator">=</span> <span class="token builtin">list</span><span class="token punctuation">(</span><span class="token punctuation">)</span>        path <span class="token operator">=</span> <span class="token builtin">list</span><span class="token punctuation">(</span><span class="token punctuation">)</span>        <span class="token keyword">def</span> <span class="token function">backtracking</span><span class="token punctuation">(</span>path<span class="token punctuation">,</span> depth<span class="token punctuation">,</span> startindex<span class="token punctuation">)</span><span class="token punctuation">:</span>            <span class="token keyword">if</span> depth <span class="token operator">==</span> k<span class="token punctuation">:</span>                result<span class="token punctuation">.</span>append<span class="token punctuation">(</span>path<span class="token punctuation">[</span><span class="token punctuation">:</span><span class="token punctuation">]</span><span class="token punctuation">)</span>                <span class="token keyword">return</span>            <span class="token keyword">for</span> i <span class="token keyword">in</span> <span class="token builtin">range</span><span class="token punctuation">(</span>startindex<span class="token punctuation">,</span> n<span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">:</span>                <span class="token comment"># åŒå±‚ä¹‹é—´ä¸º[1, n]ï¼Œ èµ·å§‹ç‚¹æ¯æ¬¡åŠ 1 æ‰€ä»¥åŒå±‚è‚¯å®šä¸ä¼šé‡å¤</span>                path<span class="token punctuation">.</span>append<span class="token punctuation">(</span>i<span class="token punctuation">)</span>                backtracking<span class="token punctuation">(</span>path<span class="token punctuation">,</span> depth <span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">,</span> i <span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">)</span>   <span class="token comment"># æ•°[1, n]ä¸ºä¸é‡å¤çš„æ•°å­—ï¼Œæ‰€ä»¥ i+1 å‘å®šä¸ä¼šé‡å¤</span>                path<span class="token punctuation">.</span>pop<span class="token punctuation">(</span><span class="token punctuation">)</span>        backtracking<span class="token punctuation">(</span>path<span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">)</span>        <span class="token keyword">return</span> result<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h3 id="å›æº¯è§£å†³ç»„åˆæ€»å’ŒIï¼ˆæ— é‡å¤å…ƒç´ ï¼ŒåŒä¸€å…ƒç´ å¯ä»¥å¤šæ¬¡é€‰å–ï¼‰leetcode-39"><a href="#å›æº¯è§£å†³ç»„åˆæ€»å’ŒIï¼ˆæ— é‡å¤å…ƒç´ ï¼ŒåŒä¸€å…ƒç´ å¯ä»¥å¤šæ¬¡é€‰å–ï¼‰leetcode-39" class="headerlink" title="å›æº¯è§£å†³ç»„åˆæ€»å’ŒIï¼ˆæ— é‡å¤å…ƒç´ ï¼ŒåŒä¸€å…ƒç´ å¯ä»¥å¤šæ¬¡é€‰å–ï¼‰leetcode 39"></a>å›æº¯è§£å†³ç»„åˆæ€»å’ŒIï¼ˆæ— é‡å¤å…ƒç´ ï¼ŒåŒä¸€å…ƒç´ å¯ä»¥å¤šæ¬¡é€‰å–ï¼‰leetcode 39</h3><blockquote><p>ç»™ä½ ä¸€ä¸ª æ— é‡å¤å…ƒç´  çš„æ•´æ•°æ•°ç»„ candidates å’Œä¸€ä¸ªç›®æ ‡æ•´æ•° target ï¼Œæ‰¾å‡º candidates ä¸­å¯ä»¥ä½¿æ•°å­—å’Œä¸ºç›®æ ‡æ•° target çš„ æ‰€æœ‰ ä¸åŒç»„åˆ ï¼Œå¹¶ä»¥åˆ—è¡¨å½¢å¼è¿”å›ã€‚ä½ å¯ä»¥æŒ‰ ä»»æ„é¡ºåº è¿”å›è¿™äº›ç»„åˆã€‚</p><p>candidates ä¸­çš„ åŒä¸€ä¸ª æ•°å­—å¯ä»¥ æ— é™åˆ¶é‡å¤è¢«é€‰å– ã€‚å¦‚æœè‡³å°‘ä¸€ä¸ªæ•°å­—çš„è¢«é€‰æ•°é‡ä¸åŒï¼Œåˆ™ä¸¤ç§ç»„åˆæ˜¯ä¸åŒçš„ã€‚ </p><p>å¯¹äºç»™å®šçš„è¾“å…¥ï¼Œä¿è¯å’Œä¸º target çš„ä¸åŒç»„åˆæ•°å°‘äº 150 ä¸ªã€‚</p></blockquote><p><strong>æ”¹å˜èµ·å§‹ç‚¹å‰ªæï¼Œ åŒä¸€å…ƒç´ å¤šæ¬¡æ‹¿å–ï¼Œ å‰ªææ—¶éœ€è¦åŒ…å«è‡ªèº«</strong></p><pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token keyword">class</span> <span class="token class-name">Solution</span><span class="token punctuation">:</span>    <span class="token triple-quoted-string string">"""    æ³¨æ„ï¼š æ¯æ¬¡å‘åå–ï¼Œæ‰€ä»¥è¦è®°ä½ä¸Šä¸€æ¬¡çš„èµ·å§‹ä½ç½®ï¼Œæ‰€ä»¥æœ‰startindex    backtracking(path, depath +1, i, total_num) , åº”ä¸ºå¯ä»¥é‡å¤æ”¾ç½®å…ƒç´ ï¼Œæ‰€ä»¥æ­¤æ—¶startindexä¸ºiï¼Œ ä¸éœ€è¦+1    """</span>    <span class="token keyword">def</span> <span class="token function">combinationSum</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> candidates<span class="token punctuation">:</span> List<span class="token punctuation">[</span><span class="token builtin">int</span><span class="token punctuation">]</span><span class="token punctuation">,</span> target<span class="token punctuation">:</span> <span class="token builtin">int</span><span class="token punctuation">)</span> <span class="token operator">-</span><span class="token operator">></span> List<span class="token punctuation">[</span>List<span class="token punctuation">[</span><span class="token builtin">int</span><span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">:</span>                result <span class="token operator">=</span> <span class="token builtin">list</span><span class="token punctuation">(</span><span class="token punctuation">)</span>        path <span class="token operator">=</span> <span class="token builtin">list</span><span class="token punctuation">(</span><span class="token punctuation">)</span>        <span class="token keyword">def</span> <span class="token function">backtracking</span><span class="token punctuation">(</span>path<span class="token punctuation">,</span> depath<span class="token punctuation">,</span> startindex<span class="token punctuation">,</span> total_num<span class="token punctuation">)</span><span class="token punctuation">:</span>            <span class="token keyword">if</span> total_num <span class="token operator">></span> target<span class="token punctuation">:</span>                <span class="token keyword">return</span>                        <span class="token keyword">if</span> total_num <span class="token operator">==</span> target<span class="token punctuation">:</span>                result<span class="token punctuation">.</span>append<span class="token punctuation">(</span>path<span class="token punctuation">[</span><span class="token punctuation">:</span><span class="token punctuation">]</span><span class="token punctuation">)</span>                <span class="token keyword">return</span>                         <span class="token keyword">for</span> i <span class="token keyword">in</span> <span class="token builtin">range</span><span class="token punctuation">(</span>startindex<span class="token punctuation">,</span> <span class="token builtin">len</span><span class="token punctuation">(</span>candidates<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">:</span>                total_num <span class="token operator">+=</span> candidates<span class="token punctuation">[</span>i<span class="token punctuation">]</span>                path<span class="token punctuation">.</span>append<span class="token punctuation">(</span>candidates<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">)</span>                backtracking<span class="token punctuation">(</span>path<span class="token punctuation">,</span> depath <span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">,</span> i<span class="token punctuation">,</span> total_num<span class="token punctuation">)</span>                 path<span class="token punctuation">.</span>pop<span class="token punctuation">(</span><span class="token punctuation">)</span>                total_num <span class="token operator">-=</span> candidates<span class="token punctuation">[</span>i<span class="token punctuation">]</span>        backtracking<span class="token punctuation">(</span>path<span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span>        <span class="token keyword">return</span> result<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h3 id="å›æº¯æ³•è§£å†³ç»„åˆæ€»å’ŒII-ï¼ˆæœ‰é‡å¤å…ƒç´ ï¼Œ-åŒä¸€å…ƒç´ ä¸å¯å¤šæ¬¡é€‰å–ï¼‰-letcode-40"><a href="#å›æº¯æ³•è§£å†³ç»„åˆæ€»å’ŒII-ï¼ˆæœ‰é‡å¤å…ƒç´ ï¼Œ-åŒä¸€å…ƒç´ ä¸å¯å¤šæ¬¡é€‰å–ï¼‰-letcode-40" class="headerlink" title="å›æº¯æ³•è§£å†³ç»„åˆæ€»å’ŒII ï¼ˆæœ‰é‡å¤å…ƒç´ ï¼Œ åŒä¸€å…ƒç´ ä¸å¯å¤šæ¬¡é€‰å–ï¼‰-letcode 40"></a>å›æº¯æ³•è§£å†³ç»„åˆæ€»å’ŒII ï¼ˆæœ‰é‡å¤å…ƒç´ ï¼Œ åŒä¸€å…ƒç´ ä¸å¯å¤šæ¬¡é€‰å–ï¼‰-letcode 40</h3><blockquote><p>ç»™å®šä¸€ä¸ªå€™é€‰äººç¼–å·çš„é›†åˆ candidates å’Œä¸€ä¸ªç›®æ ‡æ•° target ï¼Œæ‰¾å‡º candidates ä¸­æ‰€æœ‰å¯ä»¥ä½¿æ•°å­—å’Œä¸º target çš„ç»„åˆã€‚</p><p>candidates ä¸­çš„æ¯ä¸ªæ•°å­—åœ¨æ¯ä¸ªç»„åˆä¸­åªèƒ½ä½¿ç”¨ ä¸€æ¬¡ ã€‚</p><p>æ³¨æ„ï¼šè§£é›†ä¸èƒ½åŒ…å«é‡å¤çš„ç»„åˆã€‚ </p></blockquote><p><strong>æ”¹å˜èµ·å§‹ç‚¹ï¼Œ åŒå±‚é‡å¤å…ƒç´ å‰ªæ</strong></p><pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token keyword">class</span> <span class="token class-name">Solution</span><span class="token punctuation">:</span>    <span class="token triple-quoted-string string">"""    æ³¨æ„ï¼š 1. ç»™å®šçš„candidates æœ‰é‡å¤çš„å…ƒç´ ï¼Œ é¢˜ç›®è¦æ±‚è§£é›†ä¸èƒ½åŒ…å¥½é‡å¤çš„å…ƒç´ ï¼Œæ­¤æ—¶éœ€è¦å¯¹åŸæ¥çš„æ•°ç»„æ’åºï¼Œç„¶åé€šè¿‡åˆ¤æ–­i-1 è¿›è¡Œå‰ªæï¼Œé˜²æ­¢é‡å¤        """</span>    <span class="token keyword">def</span> <span class="token function">combinationSum2</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> candidates<span class="token punctuation">:</span> List<span class="token punctuation">[</span><span class="token builtin">int</span><span class="token punctuation">]</span><span class="token punctuation">,</span> target<span class="token punctuation">:</span> <span class="token builtin">int</span><span class="token punctuation">)</span> <span class="token operator">-</span><span class="token operator">></span> List<span class="token punctuation">[</span>List<span class="token punctuation">[</span><span class="token builtin">int</span><span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">:</span>        result <span class="token operator">=</span> <span class="token builtin">list</span><span class="token punctuation">(</span><span class="token punctuation">)</span>        path <span class="token operator">=</span> <span class="token builtin">list</span><span class="token punctuation">(</span><span class="token punctuation">)</span>        candidates<span class="token punctuation">.</span>sort<span class="token punctuation">(</span><span class="token punctuation">)</span>        <span class="token keyword">def</span> <span class="token function">backtracking</span><span class="token punctuation">(</span>startindex<span class="token punctuation">,</span> total_num<span class="token punctuation">)</span><span class="token punctuation">:</span>            <span class="token keyword">if</span> target <span class="token operator">==</span> total_num<span class="token punctuation">:</span>                result<span class="token punctuation">.</span>append<span class="token punctuation">(</span>path<span class="token punctuation">[</span><span class="token punctuation">:</span><span class="token punctuation">]</span><span class="token punctuation">)</span>                <span class="token keyword">return</span>            <span class="token keyword">if</span> total_num <span class="token operator">></span> target<span class="token punctuation">:</span>                <span class="token keyword">return</span>                        <span class="token keyword">for</span> i <span class="token keyword">in</span> <span class="token builtin">range</span><span class="token punctuation">(</span>startindex<span class="token punctuation">,</span> <span class="token builtin">len</span><span class="token punctuation">(</span>candidates<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">:</span>                <span class="token keyword">if</span> i <span class="token operator">></span> startindex <span class="token keyword">and</span> candidates<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">==</span> candidates<span class="token punctuation">[</span>i<span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">:</span>                    <span class="token keyword">continue</span>                path<span class="token punctuation">.</span>append<span class="token punctuation">(</span>candidates<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">)</span>                total_num <span class="token operator">+=</span> candidates<span class="token punctuation">[</span>i<span class="token punctuation">]</span>                backtracking<span class="token punctuation">(</span>i<span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">,</span> total_num<span class="token punctuation">)</span>                path<span class="token punctuation">.</span>pop<span class="token punctuation">(</span><span class="token punctuation">)</span>                total_num <span class="token operator">-=</span> candidates<span class="token punctuation">[</span>i<span class="token punctuation">]</span>        backtracking<span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span>        <span class="token keyword">return</span> result<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h3 id="å›æº¯æ³•è§£å†³ç»„åˆæ€»å’ŒIIIï¼ˆæ— é‡å¤ï¼Œ-æ¯ä¸ªå…ƒç´ ä¸å¯å¤šæ¬¡é€‰å–ï¼‰-leetcode-216"><a href="#å›æº¯æ³•è§£å†³ç»„åˆæ€»å’ŒIIIï¼ˆæ— é‡å¤ï¼Œ-æ¯ä¸ªå…ƒç´ ä¸å¯å¤šæ¬¡é€‰å–ï¼‰-leetcode-216" class="headerlink" title="å›æº¯æ³•è§£å†³ç»„åˆæ€»å’ŒIIIï¼ˆæ— é‡å¤ï¼Œ æ¯ä¸ªå…ƒç´ ä¸å¯å¤šæ¬¡é€‰å–ï¼‰-leetcode 216"></a>å›æº¯æ³•è§£å†³ç»„åˆæ€»å’ŒIIIï¼ˆæ— é‡å¤ï¼Œ æ¯ä¸ªå…ƒç´ ä¸å¯å¤šæ¬¡é€‰å–ï¼‰-leetcode 216</h3><blockquote><p>æ‰¾å‡ºæ‰€æœ‰ç›¸åŠ ä¹‹å’Œä¸º n çš„ k ä¸ªæ•°çš„ç»„åˆï¼Œä¸”æ»¡è¶³ä¸‹åˆ—æ¡ä»¶ï¼š</p><p>åªä½¿ç”¨æ•°å­—1åˆ°9<br>æ¯ä¸ªæ•°å­— æœ€å¤šä½¿ç”¨ä¸€æ¬¡<br>è¿”å› æ‰€æœ‰å¯èƒ½çš„æœ‰æ•ˆç»„åˆçš„åˆ—è¡¨ ã€‚è¯¥åˆ—è¡¨ä¸èƒ½åŒ…å«ç›¸åŒçš„ç»„åˆä¸¤æ¬¡ï¼Œç»„åˆå¯ä»¥ä»¥ä»»ä½•é¡ºåºè¿”å›ã€‚</p></blockquote><p><strong>æ”¹å˜èµ·å§‹ä½ç½®è¿›è¡Œå‰ªæ</strong></p><pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token keyword">class</span> <span class="token class-name">Solution</span><span class="token punctuation">:</span>    <span class="token keyword">def</span> <span class="token function">combinationSum3</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> k<span class="token punctuation">:</span> <span class="token builtin">int</span><span class="token punctuation">,</span> n<span class="token punctuation">:</span> <span class="token builtin">int</span><span class="token punctuation">)</span> <span class="token operator">-</span><span class="token operator">></span> List<span class="token punctuation">[</span>List<span class="token punctuation">[</span><span class="token builtin">int</span><span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">:</span>        result <span class="token operator">=</span> <span class="token builtin">list</span><span class="token punctuation">(</span><span class="token punctuation">)</span>        path <span class="token operator">=</span> <span class="token builtin">list</span><span class="token punctuation">(</span><span class="token punctuation">)</span>        <span class="token keyword">def</span> <span class="token function">backtracking</span><span class="token punctuation">(</span>startindex<span class="token punctuation">,</span> total_num<span class="token punctuation">)</span><span class="token punctuation">:</span>            <span class="token keyword">if</span> total_num <span class="token operator">></span> n <span class="token keyword">or</span> <span class="token builtin">len</span><span class="token punctuation">(</span>path<span class="token punctuation">)</span> <span class="token operator">></span> k<span class="token punctuation">:</span>                <span class="token keyword">return</span>            <span class="token keyword">elif</span> total_num <span class="token operator">==</span> n <span class="token keyword">and</span>  <span class="token builtin">len</span><span class="token punctuation">(</span>path<span class="token punctuation">)</span> <span class="token operator">==</span> k<span class="token punctuation">:</span>                result<span class="token punctuation">.</span>append<span class="token punctuation">(</span>path<span class="token punctuation">[</span><span class="token punctuation">:</span><span class="token punctuation">]</span><span class="token punctuation">)</span>                <span class="token keyword">return</span>                <span class="token keyword">for</span> i <span class="token keyword">in</span> <span class="token builtin">range</span><span class="token punctuation">(</span>startindex<span class="token punctuation">,</span> <span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">:</span>                path<span class="token punctuation">.</span>append<span class="token punctuation">(</span>i<span class="token punctuation">)</span>                total_num <span class="token operator">+=</span> i                backtracking<span class="token punctuation">(</span>i<span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">,</span> total_num<span class="token punctuation">)</span>                path<span class="token punctuation">.</span>pop<span class="token punctuation">(</span><span class="token punctuation">)</span>                total_num <span class="token operator">-=</span> i        backtracking<span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span>        <span class="token keyword">return</span> result<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h2 id="åˆ†å‰²é—®é¢˜"><a href="#åˆ†å‰²é—®é¢˜" class="headerlink" title="åˆ†å‰²é—®é¢˜"></a>åˆ†å‰²é—®é¢˜</h2><h3 id="å›æº¯æ³•è§£å†³åˆ†å‰²å›æ–‡ä¸²-for-å¾ªç¯é‡Œåˆ‡åˆ†å­—ç¬¦ä¸²-leetcode-131"><a href="#å›æº¯æ³•è§£å†³åˆ†å‰²å›æ–‡ä¸²-for-å¾ªç¯é‡Œåˆ‡åˆ†å­—ç¬¦ä¸²-leetcode-131" class="headerlink" title="å›æº¯æ³•è§£å†³åˆ†å‰²å›æ–‡ä¸²(for å¾ªç¯é‡Œåˆ‡åˆ†å­—ç¬¦ä¸²)-leetcode 131"></a>å›æº¯æ³•è§£å†³åˆ†å‰²å›æ–‡ä¸²(for å¾ªç¯é‡Œåˆ‡åˆ†å­—ç¬¦ä¸²)-leetcode 131</h3><blockquote><p>ç»™ä½ ä¸€ä¸ªå­—ç¬¦ä¸² <code>s</code>ï¼Œè¯·ä½ å°† <code>s</code> åˆ†å‰²æˆä¸€äº›å­ä¸²ï¼Œä½¿æ¯ä¸ªå­ä¸²éƒ½æ˜¯ <strong>å›æ–‡ä¸²</strong> ã€‚è¿”å› <code>s</code> æ‰€æœ‰å¯èƒ½çš„åˆ†å‰²æ–¹æ¡ˆã€‚</p><p><strong>å›æ–‡ä¸²</strong> æ˜¯æ­£ç€è¯»å’Œåç€è¯»éƒ½ä¸€æ ·çš„å­—ç¬¦ä¸²ã€‚</p></blockquote><p><strong>æ”¹å˜èµ·å§‹ä½ç½®ï¼Œä¾æ®å›æ–‡ä¸²çš„ç‰¹ç‚¹å‰ªæï¼Œæ³¨æ„éœ€è¦åˆ‡å‰²</strong></p><pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token keyword">class</span> <span class="token class-name">Solution</span><span class="token punctuation">:</span>    <span class="token keyword">def</span> <span class="token function">partition</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> s<span class="token punctuation">:</span> <span class="token builtin">str</span><span class="token punctuation">)</span> <span class="token operator">-</span><span class="token operator">></span> List<span class="token punctuation">[</span>List<span class="token punctuation">[</span><span class="token builtin">str</span><span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">:</span>        result <span class="token operator">=</span> <span class="token builtin">list</span><span class="token punctuation">(</span><span class="token punctuation">)</span>        path <span class="token operator">=</span> <span class="token builtin">list</span><span class="token punctuation">(</span><span class="token punctuation">)</span>        <span class="token keyword">def</span> <span class="token function">backtracking</span><span class="token punctuation">(</span>startindex<span class="token punctuation">,</span> path<span class="token punctuation">)</span><span class="token punctuation">:</span>            <span class="token keyword">if</span> startindex <span class="token operator">==</span> <span class="token builtin">len</span><span class="token punctuation">(</span>s<span class="token punctuation">)</span><span class="token punctuation">:</span>                result<span class="token punctuation">.</span>append<span class="token punctuation">(</span>path<span class="token punctuation">[</span><span class="token punctuation">:</span><span class="token punctuation">]</span><span class="token punctuation">)</span>                <span class="token keyword">return</span>            <span class="token keyword">for</span> i <span class="token keyword">in</span> <span class="token builtin">range</span><span class="token punctuation">(</span>startindex<span class="token punctuation">,</span> <span class="token builtin">len</span><span class="token punctuation">(</span>s<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">:</span>                ch <span class="token operator">=</span> s<span class="token punctuation">[</span>startindex<span class="token punctuation">:</span> i<span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">]</span>                <span class="token keyword">if</span> ch <span class="token operator">==</span> ch<span class="token punctuation">[</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">:</span>                    path<span class="token punctuation">.</span>append<span class="token punctuation">(</span>s<span class="token punctuation">[</span>startindex<span class="token punctuation">:</span> i<span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">)</span>                    backtracking<span class="token punctuation">(</span>i<span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">,</span> path<span class="token punctuation">)</span>                    path<span class="token punctuation">.</span>pop<span class="token punctuation">(</span><span class="token punctuation">)</span>                <span class="token keyword">else</span><span class="token punctuation">:</span>                    <span class="token keyword">continue</span>        backtracking<span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> path<span class="token punctuation">)</span>        <span class="token keyword">return</span> result                <span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h3 id="æ‹†åˆ†å­—ç¬¦ä¸²ä½¿å”¯ä¸€å­å­—ç¬¦ä¸²çš„æ•°ç›®æœ€å¤§-leetcode-1593"><a href="#æ‹†åˆ†å­—ç¬¦ä¸²ä½¿å”¯ä¸€å­å­—ç¬¦ä¸²çš„æ•°ç›®æœ€å¤§-leetcode-1593" class="headerlink" title="æ‹†åˆ†å­—ç¬¦ä¸²ä½¿å”¯ä¸€å­å­—ç¬¦ä¸²çš„æ•°ç›®æœ€å¤§ - leetcode 1593"></a>æ‹†åˆ†å­—ç¬¦ä¸²ä½¿å”¯ä¸€å­å­—ç¬¦ä¸²çš„æ•°ç›®æœ€å¤§ - leetcode 1593</h3><blockquote><p>ç»™ä½ ä¸€ä¸ªå­—ç¬¦ä¸² s ï¼Œè¯·ä½ æ‹†åˆ†è¯¥å­—ç¬¦ä¸²ï¼Œå¹¶è¿”å›æ‹†åˆ†åå”¯ä¸€å­å­—ç¬¦ä¸²çš„æœ€å¤§æ•°ç›®ã€‚</p><p>å­—ç¬¦ä¸² s æ‹†åˆ†åå¯ä»¥å¾—åˆ°è‹¥å¹² éç©ºå­å­—ç¬¦ä¸² ï¼Œè¿™äº›å­å­—ç¬¦ä¸²è¿æ¥ååº”å½“èƒ½å¤Ÿè¿˜åŸä¸ºåŸå­—ç¬¦ä¸²ã€‚ä½†æ˜¯æ‹†åˆ†å‡ºæ¥çš„æ¯ä¸ªå­å­—ç¬¦ä¸²éƒ½å¿…é¡»æ˜¯ å”¯ä¸€çš„ ã€‚</p><p>æ³¨æ„ï¼šå­å­—ç¬¦ä¸² æ˜¯å­—ç¬¦ä¸²ä¸­çš„ä¸€ä¸ªè¿ç»­å­—ç¬¦åºåˆ—ã€‚</p></blockquote><pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token keyword">class</span> <span class="token class-name">Solution</span><span class="token punctuation">:</span>    max_num <span class="token operator">=</span> <span class="token number">0</span>    <span class="token keyword">def</span> <span class="token function">maxUniqueSplit</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> s<span class="token punctuation">:</span> <span class="token builtin">str</span><span class="token punctuation">)</span> <span class="token operator">-</span><span class="token operator">></span> <span class="token builtin">int</span><span class="token punctuation">:</span>        path <span class="token operator">=</span> <span class="token builtin">list</span><span class="token punctuation">(</span><span class="token punctuation">)</span>        result <span class="token operator">=</span> <span class="token builtin">list</span><span class="token punctuation">(</span><span class="token punctuation">)</span>        <span class="token keyword">def</span> <span class="token function">backtracking</span><span class="token punctuation">(</span>startindex<span class="token punctuation">,</span> path<span class="token punctuation">)</span><span class="token punctuation">:</span>            <span class="token keyword">if</span> startindex <span class="token operator">==</span> <span class="token builtin">len</span><span class="token punctuation">(</span>s<span class="token punctuation">)</span><span class="token punctuation">:</span>                result<span class="token punctuation">.</span>append<span class="token punctuation">(</span>path<span class="token punctuation">[</span><span class="token punctuation">:</span><span class="token punctuation">]</span><span class="token punctuation">)</span>                <span class="token keyword">if</span> self<span class="token punctuation">.</span>max_num <span class="token operator">&lt;</span> <span class="token builtin">len</span><span class="token punctuation">(</span>path<span class="token punctuation">)</span><span class="token punctuation">:</span>                    self<span class="token punctuation">.</span>max_num <span class="token operator">=</span> <span class="token builtin">len</span><span class="token punctuation">(</span>path<span class="token punctuation">)</span>                    <span class="token keyword">return</span>            <span class="token keyword">for</span> i <span class="token keyword">in</span> <span class="token builtin">range</span><span class="token punctuation">(</span>startindex<span class="token punctuation">,</span> <span class="token builtin">len</span><span class="token punctuation">(</span>s<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">:</span>                ch <span class="token operator">=</span> s<span class="token punctuation">[</span>startindex<span class="token punctuation">:</span> i<span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">]</span>                <span class="token keyword">if</span> ch <span class="token keyword">in</span> path<span class="token punctuation">:</span>                    <span class="token keyword">continue</span>                <span class="token comment"># if i + 1 == len(s) -1 and len(path) + 1 &lt; max_len:</span>                <span class="token comment">#     continue</span>                path<span class="token punctuation">.</span>append<span class="token punctuation">(</span>ch<span class="token punctuation">)</span>                backtracking<span class="token punctuation">(</span>i<span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">,</span> path<span class="token punctuation">)</span>                path<span class="token punctuation">.</span>pop<span class="token punctuation">(</span><span class="token punctuation">)</span>        backtracking<span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> path<span class="token punctuation">)</span>        <span class="token keyword">return</span> self<span class="token punctuation">.</span>max_num<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h3 id="å•è¯æ‹†åˆ†ï¼ˆå›°éš¾leetcode140ï¼‰"><a href="#å•è¯æ‹†åˆ†ï¼ˆå›°éš¾leetcode140ï¼‰" class="headerlink" title="å•è¯æ‹†åˆ†ï¼ˆå›°éš¾leetcode140ï¼‰"></a>å•è¯æ‹†åˆ†ï¼ˆå›°éš¾leetcode140ï¼‰</h3><pre class="line-numbers language-none"><code class="language-none">åç»­è¡¥å……<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><h2 id="å­é›†é—®é¢˜"><a href="#å­é›†é—®é¢˜" class="headerlink" title="å­é›†é—®é¢˜"></a>å­é›†é—®é¢˜</h2><h3 id="å­é›†-leetcode-78-1"><a href="#å­é›†-leetcode-78-1" class="headerlink" title="å­é›†-leetcode 78"></a>å­é›†-leetcode 78</h3><blockquote><p>ç»™ä½ ä¸€ä¸ªæ•´æ•°æ•°ç»„ <code>nums</code> ï¼Œæ•°ç»„ä¸­çš„å…ƒç´  <strong>äº’ä¸ç›¸åŒ</strong> ã€‚è¿”å›è¯¥æ•°ç»„æ‰€æœ‰å¯èƒ½çš„å­é›†ï¼ˆå¹‚é›†ï¼‰ã€‚</p><p>è§£é›† <strong>ä¸èƒ½</strong> åŒ…å«é‡å¤çš„å­é›†ã€‚ä½ å¯ä»¥æŒ‰ <strong>ä»»æ„é¡ºåº</strong> è¿”å›è§£é›†ã€‚</p></blockquote><pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token keyword">class</span> <span class="token class-name">Solution</span><span class="token punctuation">:</span>    <span class="token keyword">def</span> <span class="token function">subsets</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> nums<span class="token punctuation">:</span> List<span class="token punctuation">[</span><span class="token builtin">int</span><span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token operator">-</span><span class="token operator">></span> List<span class="token punctuation">[</span>List<span class="token punctuation">[</span><span class="token builtin">int</span><span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">:</span>        result <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>        path <span class="token operator">=</span> <span class="token builtin">list</span><span class="token punctuation">(</span><span class="token punctuation">)</span>        <span class="token keyword">def</span> <span class="token function">backtracing</span><span class="token punctuation">(</span>startindex<span class="token punctuation">,</span> path<span class="token punctuation">)</span><span class="token punctuation">:</span>            result<span class="token punctuation">.</span>append<span class="token punctuation">(</span>path<span class="token punctuation">[</span><span class="token punctuation">:</span><span class="token punctuation">]</span><span class="token punctuation">)</span>            <span class="token keyword">for</span> i <span class="token keyword">in</span> <span class="token builtin">range</span><span class="token punctuation">(</span>startindex<span class="token punctuation">,</span> <span class="token builtin">len</span><span class="token punctuation">(</span>nums<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">:</span>                path<span class="token punctuation">.</span>append<span class="token punctuation">(</span>nums<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">)</span>                backtracing<span class="token punctuation">(</span>i <span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">,</span> path<span class="token punctuation">)</span>                path<span class="token punctuation">.</span>pop<span class="token punctuation">(</span><span class="token punctuation">)</span>        backtracing<span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> path<span class="token punctuation">)</span>                <span class="token keyword">return</span> result<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h3 id="å­é›†II-leetcode-90-åŒå±‚é€šè¿‡æ’åºåå’Œå‰ä¸€ä¸ªå¯¹æ¯”è¿›è¡Œå‰ªæ"><a href="#å­é›†II-leetcode-90-åŒå±‚é€šè¿‡æ’åºåå’Œå‰ä¸€ä¸ªå¯¹æ¯”è¿›è¡Œå‰ªæ" class="headerlink" title="å­é›†II-leetcode 90 (åŒå±‚é€šè¿‡æ’åºåå’Œå‰ä¸€ä¸ªå¯¹æ¯”è¿›è¡Œå‰ªæ)"></a>å­é›†II-leetcode 90 (åŒå±‚é€šè¿‡æ’åºåå’Œå‰ä¸€ä¸ªå¯¹æ¯”è¿›è¡Œå‰ªæ)</h3><blockquote><p>ç»™ä½ ä¸€ä¸ªæ•´æ•°æ•°ç»„ nums ï¼Œå…¶ä¸­å¯èƒ½åŒ…å«é‡å¤å…ƒç´ ï¼Œè¯·ä½ è¿”å›è¯¥æ•°ç»„æ‰€æœ‰å¯èƒ½çš„å­é›†ï¼ˆå¹‚é›†ï¼‰ã€‚</p><p>è§£é›† ä¸èƒ½ åŒ…å«é‡å¤çš„å­é›†ã€‚è¿”å›çš„è§£é›†ä¸­ï¼Œå­é›†å¯ä»¥æŒ‰ ä»»æ„é¡ºåº æ’åˆ—ã€‚</p></blockquote><pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token keyword">class</span> <span class="token class-name">Solution</span><span class="token punctuation">:</span>    <span class="token keyword">def</span> <span class="token function">subsetsWithDup</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> nums<span class="token punctuation">:</span> List<span class="token punctuation">[</span><span class="token builtin">int</span><span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token operator">-</span><span class="token operator">></span> List<span class="token punctuation">[</span>List<span class="token punctuation">[</span><span class="token builtin">int</span><span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">:</span>        result <span class="token operator">=</span> <span class="token builtin">list</span><span class="token punctuation">(</span><span class="token punctuation">)</span>        tmp <span class="token operator">=</span> <span class="token builtin">list</span><span class="token punctuation">(</span><span class="token punctuation">)</span>        nums<span class="token punctuation">.</span>sort<span class="token punctuation">(</span><span class="token punctuation">)</span>        <span class="token keyword">def</span> <span class="token function">backtracking</span><span class="token punctuation">(</span>startindex<span class="token punctuation">)</span><span class="token punctuation">:</span>            result<span class="token punctuation">.</span>append<span class="token punctuation">(</span>tmp<span class="token punctuation">[</span><span class="token punctuation">:</span><span class="token punctuation">]</span><span class="token punctuation">)</span>            <span class="token keyword">for</span> i <span class="token keyword">in</span> <span class="token builtin">range</span><span class="token punctuation">(</span>startindex<span class="token punctuation">,</span> <span class="token builtin">len</span><span class="token punctuation">(</span>nums<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">:</span>                <span class="token keyword">if</span> i<span class="token operator">></span>startindex <span class="token keyword">and</span> nums<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">==</span> nums<span class="token punctuation">[</span>i<span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">:</span>                    <span class="token keyword">continue</span>                                tmp<span class="token punctuation">.</span>append<span class="token punctuation">(</span>nums<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">)</span>                backtracking<span class="token punctuation">(</span>i<span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">)</span>                tmp<span class="token punctuation">.</span>pop<span class="token punctuation">(</span><span class="token punctuation">)</span>        backtracking<span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span>        <span class="token keyword">return</span> result<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h3 id="é€’å¢å­åºåˆ—-åŒå±‚é€šè¿‡setå‰ªæ-leetcode-491"><a href="#é€’å¢å­åºåˆ—-åŒå±‚é€šè¿‡setå‰ªæ-leetcode-491" class="headerlink" title="é€’å¢å­åºåˆ— (åŒå±‚é€šè¿‡setå‰ªæ)-leetcode 491"></a>é€’å¢å­åºåˆ— (åŒå±‚é€šè¿‡setå‰ªæ)-leetcode 491</h3><blockquote><p>ç»™ä½ ä¸€ä¸ªæ•´æ•°æ•°ç»„ nums ï¼Œæ‰¾å‡ºå¹¶è¿”å›æ‰€æœ‰è¯¥æ•°ç»„ä¸­ä¸åŒçš„é€’å¢å­åºåˆ—ï¼Œé€’å¢å­åºåˆ—ä¸­ è‡³å°‘æœ‰ä¸¤ä¸ªå…ƒç´  ã€‚ä½ å¯ä»¥æŒ‰ ä»»æ„é¡ºåº è¿”å›ç­”æ¡ˆã€‚</p><p>æ•°ç»„ä¸­å¯èƒ½å«æœ‰é‡å¤å…ƒç´ ï¼Œå¦‚å‡ºç°ä¸¤ä¸ªæ•´æ•°ç›¸ç­‰ï¼Œä¹Ÿå¯ä»¥è§†ä½œé€’å¢åºåˆ—çš„ä¸€ç§ç‰¹æ®Šæƒ…å†µ</p></blockquote><pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token keyword">class</span> <span class="token class-name">Solution</span><span class="token punctuation">:</span>    <span class="token keyword">def</span> <span class="token function">findSubsequences</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> nums<span class="token punctuation">:</span> List<span class="token punctuation">[</span><span class="token builtin">int</span><span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token operator">-</span><span class="token operator">></span> List<span class="token punctuation">[</span>List<span class="token punctuation">[</span><span class="token builtin">int</span><span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">:</span>        result <span class="token operator">=</span> <span class="token builtin">list</span><span class="token punctuation">(</span><span class="token punctuation">)</span>        path <span class="token operator">=</span> <span class="token builtin">list</span><span class="token punctuation">(</span><span class="token punctuation">)</span>                <span class="token keyword">def</span> <span class="token function">backtracing</span><span class="token punctuation">(</span>startindex<span class="token punctuation">,</span> path<span class="token punctuation">)</span><span class="token punctuation">:</span>            <span class="token keyword">if</span> <span class="token builtin">len</span><span class="token punctuation">(</span>path<span class="token punctuation">)</span> <span class="token operator">>=</span><span class="token number">2</span><span class="token punctuation">:</span>                result<span class="token punctuation">.</span>append<span class="token punctuation">(</span>path<span class="token punctuation">[</span><span class="token punctuation">:</span><span class="token punctuation">]</span><span class="token punctuation">)</span>            repeat <span class="token operator">=</span> <span class="token builtin">set</span><span class="token punctuation">(</span><span class="token punctuation">)</span>            <span class="token keyword">for</span> i <span class="token keyword">in</span> <span class="token builtin">range</span><span class="token punctuation">(</span>startindex<span class="token punctuation">,</span> <span class="token builtin">len</span><span class="token punctuation">(</span>nums<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">:</span>                <span class="token keyword">if</span> <span class="token builtin">len</span><span class="token punctuation">(</span>path<span class="token punctuation">)</span> <span class="token operator">></span> <span class="token number">0</span> <span class="token keyword">and</span> path<span class="token punctuation">[</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">></span> nums<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">:</span>                    <span class="token keyword">continue</span>                <span class="token keyword">if</span> nums<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token keyword">not</span> <span class="token keyword">in</span> repeat<span class="token punctuation">:</span>                    path<span class="token punctuation">.</span>append<span class="token punctuation">(</span>nums<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">)</span>                    repeat<span class="token punctuation">.</span>add<span class="token punctuation">(</span>nums<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">)</span>                    backtracing<span class="token punctuation">(</span>i<span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">,</span> path<span class="token punctuation">)</span>                    path<span class="token punctuation">.</span>pop<span class="token punctuation">(</span><span class="token punctuation">)</span>                    <span class="token comment"># repeat.remove(nums[i])</span>        backtracing<span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> path<span class="token punctuation">)</span>        <span class="token keyword">return</span> result<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h2 id="æ’åˆ—é—®é¢˜"><a href="#æ’åˆ—é—®é¢˜" class="headerlink" title="æ’åˆ—é—®é¢˜"></a>æ’åˆ—é—®é¢˜</h2><h3 id="å…¨æ’åˆ—-å›æº¯æ³•å§æ ‡å‡†æ¨¡æ¿-leetcode-46"><a href="#å…¨æ’åˆ—-å›æº¯æ³•å§æ ‡å‡†æ¨¡æ¿-leetcode-46" class="headerlink" title="å…¨æ’åˆ—(å›æº¯æ³•å§æ ‡å‡†æ¨¡æ¿)-leetcode 46"></a>å…¨æ’åˆ—(å›æº¯æ³•å§æ ‡å‡†æ¨¡æ¿)-leetcode 46</h3><blockquote><p> ç»™å®šä¸€ä¸ªä¸å«é‡å¤æ•°å­—çš„æ•°ç»„ <code>nums</code> ï¼Œè¿”å›å…¶ <em>æ‰€æœ‰å¯èƒ½çš„å…¨æ’åˆ—</em> ã€‚ä½ å¯ä»¥ <strong>æŒ‰ä»»æ„é¡ºåº</strong> è¿”å›ç­”æ¡ˆ </p></blockquote><p><strong>å…¨æ’åˆ—é—®é¢˜ï¼Œå¾ªç¯ä»0å¼€å§‹åˆ°len(nums)ç»“æŸï¼Œ é€šè¿‡ç»´æŠ¤åœ¨æ¯ä¸€å±‚æ¯ä¸ªå…ƒç´ çš„ä½¿ç”¨æƒ…å†µæ¥è¿›è¡Œå‰ªæ</strong></p><p><strong>ä¸åŒ…å«é‡å¤å…ƒç´ </strong></p><pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token keyword">class</span> <span class="token class-name">Solution</span><span class="token punctuation">:</span>    <span class="token keyword">def</span> <span class="token function">permute</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> nums<span class="token punctuation">:</span> List<span class="token punctuation">[</span><span class="token builtin">int</span><span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token operator">-</span><span class="token operator">></span> List<span class="token punctuation">[</span>List<span class="token punctuation">[</span><span class="token builtin">int</span><span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">:</span>        result <span class="token operator">=</span> <span class="token builtin">list</span><span class="token punctuation">(</span><span class="token punctuation">)</span>        path <span class="token operator">=</span> <span class="token builtin">list</span><span class="token punctuation">(</span><span class="token punctuation">)</span>        nums<span class="token punctuation">.</span>sort<span class="token punctuation">(</span><span class="token punctuation">)</span>        <span class="token keyword">def</span> <span class="token function">backtracking</span><span class="token punctuation">(</span>path<span class="token punctuation">,</span> depth<span class="token punctuation">,</span> used<span class="token punctuation">)</span><span class="token punctuation">:</span>            <span class="token keyword">if</span> depth <span class="token operator">==</span> <span class="token builtin">len</span><span class="token punctuation">(</span>nums<span class="token punctuation">)</span><span class="token punctuation">:</span>                result<span class="token punctuation">.</span>append<span class="token punctuation">(</span>path<span class="token punctuation">[</span><span class="token punctuation">:</span><span class="token punctuation">]</span><span class="token punctuation">)</span>                <span class="token keyword">return</span>                        <span class="token keyword">for</span> i <span class="token keyword">in</span> <span class="token builtin">range</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token builtin">len</span><span class="token punctuation">(</span>nums<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">:</span>                <span class="token keyword">if</span> used<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">:</span>                    <span class="token keyword">continue</span>                used<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token boolean">True</span>                path<span class="token punctuation">.</span>append<span class="token punctuation">(</span>nums<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">)</span>                backtracking<span class="token punctuation">(</span>path<span class="token punctuation">,</span> depth <span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">,</span> used<span class="token punctuation">)</span>                used<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token boolean">False</span>                path<span class="token punctuation">.</span>pop<span class="token punctuation">(</span><span class="token punctuation">)</span>        backtracking<span class="token punctuation">(</span>path<span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token punctuation">&#123;</span>index_<span class="token punctuation">:</span> <span class="token boolean">False</span> <span class="token keyword">for</span> index_<span class="token punctuation">,</span> _ <span class="token keyword">in</span> <span class="token builtin">enumerate</span><span class="token punctuation">(</span>nums<span class="token punctuation">)</span><span class="token punctuation">&#125;</span><span class="token punctuation">)</span>        <span class="token keyword">return</span> result<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h3 id="å…¨æ’åˆ—II-leetcode-47"><a href="#å…¨æ’åˆ—II-leetcode-47" class="headerlink" title="å…¨æ’åˆ—II-leetcode 47"></a>å…¨æ’åˆ—II-leetcode 47</h3><blockquote><p> ç»™å®šä¸€ä¸ªå¯åŒ…å«é‡å¤æ•°å­—çš„åºåˆ— <code>nums</code> ï¼Œ<em><strong>æŒ‰ä»»æ„é¡ºåº</strong></em> è¿”å›æ‰€æœ‰ä¸é‡å¤çš„å…¨æ’åˆ—ã€‚ </p></blockquote><p><strong>é€šè¿‡ç»´æŠ¤æ¯ä¸ªå…ƒç´ ä½¿ç”¨æƒ…å†µï¼Œå¯¹åŒå±‚å…ƒç´ è¿›è¡Œå‰ªæï¼Œé¿å…åŒå±‚å¤šæ¬¡é€‰å–ï¼Œç”±äºç»™å®šçš„å…ƒç´ æœ‰å¯èƒ½æœ‰é‡å¤ï¼Œéœ€è¦é€šè¿‡æ’åºå’Œä¸‹æ ‡çŠ¶æ€è¿›è¡Œå‰ªæ</strong></p><pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token keyword">class</span> <span class="token class-name">Solution</span><span class="token punctuation">:</span>    <span class="token keyword">def</span> <span class="token function">permuteUnique</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> nums<span class="token punctuation">:</span> List<span class="token punctuation">[</span><span class="token builtin">int</span><span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token operator">-</span><span class="token operator">></span> List<span class="token punctuation">[</span>List<span class="token punctuation">[</span><span class="token builtin">int</span><span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">:</span>        nums<span class="token punctuation">.</span>sort<span class="token punctuation">(</span><span class="token punctuation">)</span>        result <span class="token operator">=</span> <span class="token builtin">list</span><span class="token punctuation">(</span><span class="token punctuation">)</span>        path <span class="token operator">=</span> <span class="token builtin">list</span><span class="token punctuation">(</span><span class="token punctuation">)</span>        <span class="token keyword">def</span> <span class="token function">backtracking</span><span class="token punctuation">(</span>path<span class="token punctuation">,</span> used<span class="token punctuation">)</span><span class="token punctuation">:</span>                        <span class="token keyword">if</span> <span class="token builtin">len</span><span class="token punctuation">(</span>path<span class="token punctuation">)</span> <span class="token operator">==</span> <span class="token builtin">len</span><span class="token punctuation">(</span>nums<span class="token punctuation">)</span><span class="token punctuation">:</span>                result<span class="token punctuation">.</span>append<span class="token punctuation">(</span>path<span class="token punctuation">[</span><span class="token punctuation">:</span><span class="token punctuation">]</span><span class="token punctuation">)</span>                <span class="token keyword">return</span>            <span class="token keyword">for</span> i <span class="token keyword">in</span> <span class="token builtin">range</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token builtin">len</span><span class="token punctuation">(</span>nums<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">:</span>                <span class="token keyword">if</span> used<span class="token punctuation">.</span>get<span class="token punctuation">(</span>i<span class="token punctuation">,</span> <span class="token boolean">False</span><span class="token punctuation">)</span><span class="token punctuation">:</span>                    <span class="token keyword">continue</span>                <span class="token keyword">if</span> i <span class="token operator">></span> <span class="token number">0</span> <span class="token keyword">and</span> nums<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">==</span> nums<span class="token punctuation">[</span>i<span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token keyword">and</span> <span class="token keyword">not</span> used<span class="token punctuation">.</span>get<span class="token punctuation">(</span>i<span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token boolean">False</span><span class="token punctuation">)</span><span class="token punctuation">:</span>                     <span class="token keyword">continue</span>                path<span class="token punctuation">.</span>append<span class="token punctuation">(</span>nums<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">)</span>                used<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token boolean">True</span>                backtracking<span class="token punctuation">(</span>path<span class="token punctuation">,</span> used<span class="token punctuation">)</span>                path<span class="token punctuation">.</span>pop<span class="token punctuation">(</span><span class="token punctuation">)</span>                used<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token boolean">False</span>        backtracking<span class="token punctuation">(</span>path<span class="token punctuation">,</span> <span class="token punctuation">&#123;</span> k<span class="token punctuation">:</span> <span class="token boolean">False</span> <span class="token keyword">for</span> k <span class="token keyword">in</span> <span class="token builtin">range</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token builtin">len</span><span class="token punctuation">(</span>nums<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">&#125;</span><span class="token punctuation">)</span>        <span class="token keyword">return</span> result<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h3 id="å­—ç¬¦ä¸²çš„æ’åˆ—-å‰‘æŒ‡offer38"><a href="#å­—ç¬¦ä¸²çš„æ’åˆ—-å‰‘æŒ‡offer38" class="headerlink" title="å­—ç¬¦ä¸²çš„æ’åˆ—-å‰‘æŒ‡offer38"></a>å­—ç¬¦ä¸²çš„æ’åˆ—-å‰‘æŒ‡offer38</h3><blockquote><p>è¾“å…¥ä¸€ä¸ªå­—ç¬¦ä¸²ï¼Œæ‰“å°å‡ºè¯¥å­—ç¬¦ä¸²ä¸­å­—ç¬¦çš„æ‰€æœ‰æ’åˆ—ã€‚</p><p>ä½ å¯ä»¥ä»¥ä»»æ„é¡ºåºè¿”å›è¿™ä¸ªå­—ç¬¦ä¸²æ•°ç»„ï¼Œä½†é‡Œé¢ä¸èƒ½æœ‰é‡å¤å…ƒç´ ã€‚</p></blockquote><pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token keyword">class</span> <span class="token class-name">Solution</span><span class="token punctuation">:</span>    <span class="token keyword">def</span> <span class="token function">permutation</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> s<span class="token punctuation">:</span> <span class="token builtin">str</span><span class="token punctuation">)</span> <span class="token operator">-</span><span class="token operator">></span> List<span class="token punctuation">[</span><span class="token builtin">str</span><span class="token punctuation">]</span><span class="token punctuation">:</span>        result <span class="token operator">=</span> <span class="token builtin">list</span><span class="token punctuation">(</span><span class="token punctuation">)</span>        path <span class="token operator">=</span> <span class="token builtin">list</span><span class="token punctuation">(</span><span class="token punctuation">)</span>        tmp <span class="token operator">=</span> <span class="token punctuation">[</span>ss <span class="token keyword">for</span> ss <span class="token keyword">in</span> s<span class="token punctuation">]</span>        tmp<span class="token punctuation">.</span>sort<span class="token punctuation">(</span><span class="token punctuation">)</span>        s <span class="token operator">=</span> <span class="token string">""</span><span class="token punctuation">.</span>join<span class="token punctuation">(</span>tmp<span class="token punctuation">)</span>        <span class="token keyword">def</span> <span class="token function">backtracing</span><span class="token punctuation">(</span>startindex<span class="token punctuation">,</span> depth<span class="token punctuation">,</span> path<span class="token punctuation">,</span> used<span class="token punctuation">)</span><span class="token punctuation">:</span>            <span class="token keyword">if</span> <span class="token builtin">len</span><span class="token punctuation">(</span>path<span class="token punctuation">)</span> <span class="token operator">==</span> <span class="token builtin">len</span><span class="token punctuation">(</span>s<span class="token punctuation">)</span><span class="token punctuation">:</span>                result<span class="token punctuation">.</span>append<span class="token punctuation">(</span><span class="token string">""</span><span class="token punctuation">.</span>join<span class="token punctuation">(</span>path<span class="token punctuation">)</span><span class="token punctuation">)</span>                <span class="token keyword">return</span>            <span class="token keyword">for</span> i <span class="token keyword">in</span> <span class="token builtin">range</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token builtin">len</span><span class="token punctuation">(</span>s<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">:</span>                <span class="token keyword">if</span> i <span class="token operator">></span><span class="token number">0</span> <span class="token keyword">and</span> s<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">==</span> s<span class="token punctuation">[</span>i<span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token keyword">and</span> <span class="token keyword">not</span> used<span class="token punctuation">[</span>i<span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">:</span>                    <span class="token keyword">continue</span>                <span class="token keyword">if</span> used<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">:</span>                    <span class="token keyword">continue</span>                used<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token boolean">True</span>                path<span class="token punctuation">.</span>append<span class="token punctuation">(</span>s<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">)</span>                backtracing<span class="token punctuation">(</span>i<span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">,</span> depth<span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">,</span> path<span class="token punctuation">,</span> used<span class="token punctuation">)</span>                path<span class="token punctuation">.</span>pop<span class="token punctuation">(</span><span class="token punctuation">)</span>                used<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token boolean">False</span>        backtracing<span class="token punctuation">(</span><span class="token number">0</span> <span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> path<span class="token punctuation">,</span> <span class="token punctuation">&#123;</span>index_<span class="token punctuation">:</span> <span class="token boolean">False</span> <span class="token keyword">for</span> index_<span class="token punctuation">,</span> _ <span class="token keyword">in</span> <span class="token builtin">enumerate</span><span class="token punctuation">(</span>s<span class="token punctuation">)</span><span class="token punctuation">&#125;</span><span class="token punctuation">)</span>        <span class="token keyword">return</span> result<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h3 id="ä¼˜ç¾çš„æ’åˆ—-leetcode-526"><a href="#ä¼˜ç¾çš„æ’åˆ—-leetcode-526" class="headerlink" title="ä¼˜ç¾çš„æ’åˆ—-leetcode 526"></a>ä¼˜ç¾çš„æ’åˆ—-leetcode 526</h3><blockquote><p>å‡è®¾æœ‰ä» 1 åˆ° n çš„ n ä¸ªæ•´æ•°ã€‚ç”¨è¿™äº›æ•´æ•°æ„é€ ä¸€ä¸ªæ•°ç»„ permï¼ˆä¸‹æ ‡ä» 1 å¼€å§‹ï¼‰ï¼Œåªè¦æ»¡è¶³ä¸‹è¿°æ¡ä»¶ ä¹‹ä¸€ ï¼Œè¯¥æ•°ç»„å°±æ˜¯ä¸€ä¸ª ä¼˜ç¾çš„æ’åˆ— ï¼š</p><p>perm[i] èƒ½å¤Ÿè¢« i æ•´é™¤<br>i èƒ½å¤Ÿè¢« perm[i] æ•´é™¤<br>ç»™ä½ ä¸€ä¸ªæ•´æ•° n ï¼Œè¿”å›å¯ä»¥æ„é€ çš„ ä¼˜ç¾æ’åˆ— çš„ æ•°é‡ ã€‚</p></blockquote><pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token keyword">class</span> <span class="token class-name">Solution</span><span class="token punctuation">:</span>    <span class="token keyword">def</span> <span class="token function">countArrangement</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> n<span class="token punctuation">:</span> <span class="token builtin">int</span><span class="token punctuation">)</span> <span class="token operator">-</span><span class="token operator">></span> <span class="token builtin">int</span><span class="token punctuation">:</span>        result <span class="token operator">=</span> <span class="token builtin">list</span><span class="token punctuation">(</span><span class="token punctuation">)</span>        path <span class="token operator">=</span> <span class="token builtin">list</span><span class="token punctuation">(</span><span class="token punctuation">)</span>        <span class="token keyword">def</span> <span class="token function">backtracking</span><span class="token punctuation">(</span>path<span class="token punctuation">,</span> used<span class="token punctuation">)</span><span class="token punctuation">:</span>            <span class="token keyword">if</span> <span class="token builtin">len</span><span class="token punctuation">(</span>path<span class="token punctuation">)</span> <span class="token operator">==</span> n<span class="token punctuation">:</span>                result<span class="token punctuation">.</span>append<span class="token punctuation">(</span>path<span class="token punctuation">[</span><span class="token punctuation">:</span><span class="token punctuation">]</span><span class="token punctuation">)</span>                <span class="token keyword">return</span>                        <span class="token keyword">for</span> i <span class="token keyword">in</span> <span class="token builtin">range</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> n <span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">:</span>                <span class="token keyword">if</span> used<span class="token punctuation">.</span>get<span class="token punctuation">(</span>i<span class="token punctuation">,</span> <span class="token boolean">False</span><span class="token punctuation">)</span><span class="token punctuation">:</span>                    <span class="token keyword">continue</span>                path<span class="token punctuation">.</span>append<span class="token punctuation">(</span>i<span class="token punctuation">)</span>                <span class="token keyword">if</span> path<span class="token punctuation">[</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">%</span> <span class="token builtin">len</span><span class="token punctuation">(</span>path<span class="token punctuation">)</span><span class="token operator">==</span><span class="token number">0</span> <span class="token keyword">or</span> <span class="token builtin">len</span><span class="token punctuation">(</span>path<span class="token punctuation">)</span> <span class="token operator">%</span> path<span class="token punctuation">[</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">==</span> <span class="token number">0</span><span class="token punctuation">:</span>                    used<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token boolean">True</span>                    backtracking<span class="token punctuation">(</span>path<span class="token punctuation">,</span> used<span class="token punctuation">)</span>                                    path<span class="token punctuation">.</span>pop<span class="token punctuation">(</span><span class="token punctuation">)</span>                used<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token boolean">False</span>        backtracking<span class="token punctuation">(</span>path<span class="token punctuation">,</span> <span class="token punctuation">&#123;</span><span class="token punctuation">&#125;</span><span class="token punctuation">)</span>        <span class="token keyword">print</span><span class="token punctuation">(</span>result<span class="token punctuation">)</span>        <span class="token keyword">return</span> <span class="token builtin">len</span><span class="token punctuation">(</span>result<span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h2 id="æ£‹ç›˜é—®é¢˜"><a href="#æ£‹ç›˜é—®é¢˜" class="headerlink" title="æ£‹ç›˜é—®é¢˜"></a>æ£‹ç›˜é—®é¢˜</h2><h3 id="Nçš‡åI-leetcode-51"><a href="#Nçš‡åI-leetcode-51" class="headerlink" title="Nçš‡åI -leetcode 51"></a>Nçš‡åI -leetcode 51</h3><blockquote><p>æŒ‰ç…§å›½é™…è±¡æ£‹çš„è§„åˆ™ï¼Œçš‡åå¯ä»¥æ”»å‡»ä¸ä¹‹å¤„åœ¨åŒä¸€è¡Œæˆ–åŒä¸€åˆ—æˆ–åŒä¸€æ–œçº¿ä¸Šçš„æ£‹å­ã€‚</p><p>n çš‡åé—®é¢˜ ç ”ç©¶çš„æ˜¯å¦‚ä½•å°† n ä¸ªçš‡åæ”¾ç½®åœ¨ nÃ—n çš„æ£‹ç›˜ä¸Šï¼Œå¹¶ä¸”ä½¿çš‡åå½¼æ­¤ä¹‹é—´ä¸èƒ½ç›¸äº’æ”»å‡»ã€‚</p><p>ç»™ä½ ä¸€ä¸ªæ•´æ•° n ï¼Œè¿”å›æ‰€æœ‰ä¸åŒçš„ n çš‡åé—®é¢˜ çš„è§£å†³æ–¹æ¡ˆã€‚</p><p>æ¯ä¸€ç§è§£æ³•åŒ…å«ä¸€ä¸ªä¸åŒçš„ n çš‡åé—®é¢˜ çš„æ£‹å­æ”¾ç½®æ–¹æ¡ˆï¼Œè¯¥æ–¹æ¡ˆä¸­ â€˜Qâ€™ å’Œ â€˜.â€™ åˆ†åˆ«ä»£è¡¨äº†çš‡åå’Œç©ºä½ã€‚</p></blockquote><pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token keyword">class</span> <span class="token class-name">Solution</span><span class="token punctuation">:</span>    <span class="token keyword">def</span> <span class="token function">solveNQueens</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> n<span class="token punctuation">:</span> <span class="token builtin">int</span><span class="token punctuation">)</span> <span class="token operator">-</span><span class="token operator">></span> List<span class="token punctuation">[</span>List<span class="token punctuation">[</span><span class="token builtin">str</span><span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">:</span>        <span class="token keyword">if</span> <span class="token keyword">not</span> n<span class="token punctuation">:</span> <span class="token keyword">return</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>        board <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">[</span><span class="token string">'.'</span><span class="token punctuation">]</span> <span class="token operator">*</span> n <span class="token keyword">for</span> _ <span class="token keyword">in</span> <span class="token builtin">range</span><span class="token punctuation">(</span>n<span class="token punctuation">)</span><span class="token punctuation">]</span>        res <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>        <span class="token keyword">def</span> <span class="token function">isVaild</span><span class="token punctuation">(</span>board<span class="token punctuation">,</span>row<span class="token punctuation">,</span> col<span class="token punctuation">)</span><span class="token punctuation">:</span>            <span class="token comment">#åˆ¤æ–­åŒä¸€åˆ—æ˜¯å¦å†²çª</span>            <span class="token keyword">for</span> i <span class="token keyword">in</span> <span class="token builtin">range</span><span class="token punctuation">(</span><span class="token builtin">len</span><span class="token punctuation">(</span>board<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">:</span>                <span class="token keyword">if</span> board<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">[</span>col<span class="token punctuation">]</span> <span class="token operator">==</span> <span class="token string">'Q'</span><span class="token punctuation">:</span>                    <span class="token keyword">return</span> <span class="token boolean">False</span>            <span class="token comment"># åˆ¤æ–­å·¦ä¸Šè§’æ˜¯å¦å†²çª</span>            i <span class="token operator">=</span> row <span class="token operator">-</span><span class="token number">1</span>            j <span class="token operator">=</span> col <span class="token operator">-</span><span class="token number">1</span>            <span class="token keyword">while</span> i<span class="token operator">>=</span><span class="token number">0</span> <span class="token keyword">and</span> j<span class="token operator">>=</span><span class="token number">0</span><span class="token punctuation">:</span>                <span class="token keyword">if</span> board<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">[</span>j<span class="token punctuation">]</span> <span class="token operator">==</span> <span class="token string">'Q'</span><span class="token punctuation">:</span>                    <span class="token keyword">return</span> <span class="token boolean">False</span>                i <span class="token operator">-=</span> <span class="token number">1</span>                j <span class="token operator">-=</span> <span class="token number">1</span>            <span class="token comment"># åˆ¤æ–­å³ä¸Šè§’æ˜¯å¦å†²çª</span>            i <span class="token operator">=</span> row <span class="token operator">-</span> <span class="token number">1</span>            j <span class="token operator">=</span> col <span class="token operator">+</span> <span class="token number">1</span>            <span class="token keyword">while</span> i<span class="token operator">>=</span><span class="token number">0</span> <span class="token keyword">and</span> j <span class="token operator">&lt;</span> <span class="token builtin">len</span><span class="token punctuation">(</span>board<span class="token punctuation">)</span><span class="token punctuation">:</span>                <span class="token keyword">if</span> board<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">[</span>j<span class="token punctuation">]</span> <span class="token operator">==</span> <span class="token string">'Q'</span><span class="token punctuation">:</span>                    <span class="token keyword">return</span> <span class="token boolean">False</span>                i <span class="token operator">-=</span> <span class="token number">1</span>                j <span class="token operator">+=</span> <span class="token number">1</span>            <span class="token keyword">return</span> <span class="token boolean">True</span>        <span class="token keyword">def</span> <span class="token function">backtracking</span><span class="token punctuation">(</span>board<span class="token punctuation">,</span> row<span class="token punctuation">,</span> n<span class="token punctuation">)</span><span class="token punctuation">:</span>            <span class="token comment"># å¦‚æœèµ°åˆ°æœ€åä¸€è¡Œï¼Œè¯´æ˜å·²ç»æ‰¾åˆ°ä¸€ä¸ªè§£</span>            <span class="token keyword">if</span> row <span class="token operator">==</span> n<span class="token punctuation">:</span>                temp_res <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>                <span class="token keyword">for</span> temp <span class="token keyword">in</span> board<span class="token punctuation">:</span>                    temp_str <span class="token operator">=</span> <span class="token string">""</span><span class="token punctuation">.</span>join<span class="token punctuation">(</span>temp<span class="token punctuation">)</span>                    temp_res<span class="token punctuation">.</span>append<span class="token punctuation">(</span>temp_str<span class="token punctuation">)</span>                res<span class="token punctuation">.</span>append<span class="token punctuation">(</span>temp_res<span class="token punctuation">)</span>            <span class="token keyword">for</span> col <span class="token keyword">in</span> <span class="token builtin">range</span><span class="token punctuation">(</span>n<span class="token punctuation">)</span><span class="token punctuation">:</span>                <span class="token keyword">if</span> <span class="token keyword">not</span> isVaild<span class="token punctuation">(</span>board<span class="token punctuation">,</span> row<span class="token punctuation">,</span> col<span class="token punctuation">)</span><span class="token punctuation">:</span>                    <span class="token keyword">continue</span>                board<span class="token punctuation">[</span>row<span class="token punctuation">]</span><span class="token punctuation">[</span>col<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token string">'Q'</span>                backtracking<span class="token punctuation">(</span>board<span class="token punctuation">,</span> row<span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">,</span> n<span class="token punctuation">)</span>                board<span class="token punctuation">[</span>row<span class="token punctuation">]</span><span class="token punctuation">[</span>col<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token string">'.'</span>        backtracking<span class="token punctuation">(</span>board<span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> n<span class="token punctuation">)</span>        <span class="token keyword">return</span> res        <span class="token keyword">class</span> <span class="token class-name">Solution</span><span class="token punctuation">:</span>    <span class="token keyword">def</span> <span class="token function">solveNQueens</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> n<span class="token punctuation">:</span> <span class="token builtin">int</span><span class="token punctuation">)</span> <span class="token operator">-</span><span class="token operator">></span> List<span class="token punctuation">[</span>List<span class="token punctuation">[</span><span class="token builtin">str</span><span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">:</span>        <span class="token keyword">if</span> <span class="token keyword">not</span> n<span class="token punctuation">:</span>            <span class="token keyword">return</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>        board <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">[</span><span class="token string">"."</span><span class="token punctuation">]</span><span class="token operator">*</span>n <span class="token keyword">for</span> _ <span class="token keyword">in</span> <span class="token builtin">range</span><span class="token punctuation">(</span>n<span class="token punctuation">)</span><span class="token punctuation">]</span>  <span class="token comment">#åˆå§‹åŒ–æ£‹ç›˜</span>        res <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>        <span class="token comment"># åˆ¤æ–­è¯¥ç‚¹æ˜¯å¦å¯ä»¥æ”¾ç½®Q</span>        <span class="token keyword">def</span> <span class="token function">isValid</span><span class="token punctuation">(</span>board<span class="token punctuation">,</span> row<span class="token punctuation">,</span> col<span class="token punctuation">)</span><span class="token punctuation">:</span>            <span class="token comment"># åˆ¤æ–­åŒä¸€åˆ—æ˜¯å¦æ»¡è¶³</span>            <span class="token keyword">for</span> i <span class="token keyword">in</span> <span class="token builtin">range</span><span class="token punctuation">(</span><span class="token builtin">len</span><span class="token punctuation">(</span>board<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">:</span>                <span class="token keyword">if</span> board<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">[</span>col<span class="token punctuation">]</span> <span class="token operator">==</span> <span class="token string">"Q"</span><span class="token punctuation">:</span>                    <span class="token keyword">return</span> <span class="token boolean">False</span>            <span class="token comment"># åˆ¤æ–­å·¦ä¸Šè§’æ˜¯å¦æ»¡è¶³</span>            i <span class="token operator">=</span> row <span class="token operator">-</span><span class="token number">1</span>            j <span class="token operator">=</span> col <span class="token operator">-</span><span class="token number">1</span>            <span class="token keyword">while</span> i <span class="token operator">>=</span><span class="token number">0</span> <span class="token keyword">and</span> j <span class="token operator">>=</span><span class="token number">0</span><span class="token punctuation">:</span>                <span class="token keyword">if</span> board<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">[</span>j<span class="token punctuation">]</span> <span class="token operator">==</span> <span class="token string">"Q"</span><span class="token punctuation">:</span>                    <span class="token keyword">return</span> <span class="token boolean">False</span>                i <span class="token operator">-=</span> <span class="token number">1</span>                j <span class="token operator">-=</span> <span class="token number">1</span>            <span class="token comment"># åˆ¤æ–­å³ä¸Šæ˜¯å¦æ»¡è¶³</span>            i <span class="token operator">=</span> row <span class="token operator">-</span><span class="token number">1</span>            j <span class="token operator">=</span> col <span class="token operator">+</span><span class="token number">1</span>            <span class="token keyword">while</span> i <span class="token operator">>=</span><span class="token number">0</span> <span class="token keyword">and</span> j<span class="token operator">&lt;</span> <span class="token builtin">len</span><span class="token punctuation">(</span>board<span class="token punctuation">)</span><span class="token punctuation">:</span>                <span class="token keyword">if</span> board<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">[</span>j<span class="token punctuation">]</span> <span class="token operator">==</span> <span class="token string">"Q"</span><span class="token punctuation">:</span>                    <span class="token keyword">return</span> <span class="token boolean">False</span>                i <span class="token operator">-=</span> <span class="token number">1</span>                j <span class="token operator">+=</span> <span class="token number">1</span>            <span class="token keyword">return</span> <span class="token boolean">True</span>        <span class="token keyword">def</span> <span class="token function">backtracing</span><span class="token punctuation">(</span>board<span class="token punctuation">,</span> row<span class="token punctuation">,</span> n<span class="token punctuation">)</span><span class="token punctuation">:</span>            <span class="token keyword">if</span> row <span class="token operator">==</span> n<span class="token punctuation">:</span>                tmp_res <span class="token operator">=</span> <span class="token builtin">list</span><span class="token punctuation">(</span><span class="token punctuation">)</span>                <span class="token keyword">for</span> temp <span class="token keyword">in</span> board<span class="token punctuation">:</span>                    tmp_res<span class="token punctuation">.</span>append<span class="token punctuation">(</span><span class="token string">""</span><span class="token punctuation">.</span>join<span class="token punctuation">(</span>temp<span class="token punctuation">)</span><span class="token punctuation">)</span>                res<span class="token punctuation">.</span>append<span class="token punctuation">(</span>tmp_res<span class="token punctuation">[</span><span class="token punctuation">:</span><span class="token punctuation">]</span><span class="token punctuation">)</span>            <span class="token keyword">return</span>            <span class="token keyword">for</span> col <span class="token keyword">in</span> <span class="token builtin">range</span><span class="token punctuation">(</span>n<span class="token punctuation">)</span><span class="token punctuation">:</span>                <span class="token keyword">if</span> <span class="token keyword">not</span> isValid<span class="token punctuation">(</span>board<span class="token punctuation">,</span> row<span class="token punctuation">,</span> col<span class="token punctuation">)</span><span class="token punctuation">:</span>                    <span class="token keyword">continue</span>                board<span class="token punctuation">[</span>row<span class="token punctuation">]</span><span class="token punctuation">[</span>col<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token string">"Q"</span>                backtracing<span class="token punctuation">(</span>board<span class="token punctuation">,</span> row<span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">,</span> n<span class="token punctuation">)</span>                board<span class="token punctuation">[</span>row<span class="token punctuation">]</span><span class="token punctuation">[</span>col<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token string">"."</span>        backtracing<span class="token punctuation">(</span>board<span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> n<span class="token punctuation">)</span>        <span class="token keyword">return</span>  res<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h3 id="Nçš‡åII-leetcode-52"><a href="#Nçš‡åII-leetcode-52" class="headerlink" title="Nçš‡åII-leetcode 52"></a>Nçš‡åII-leetcode 52</h3><blockquote><p>n çš‡åé—®é¢˜ ç ”ç©¶çš„æ˜¯å¦‚ä½•å°† n ä¸ªçš‡åæ”¾ç½®åœ¨ n Ã— n çš„æ£‹ç›˜ä¸Šï¼Œå¹¶ä¸”ä½¿çš‡åå½¼æ­¤ä¹‹é—´ä¸èƒ½ç›¸äº’æ”»å‡»ã€‚</p><p>ç»™ä½ ä¸€ä¸ªæ•´æ•° n ï¼Œè¿”å› n çš‡åé—®é¢˜ ä¸åŒçš„è§£å†³æ–¹æ¡ˆçš„æ•°é‡ã€‚</p></blockquote><p><strong>æœ¬è´¨å’ŒNçš‡åIä¸€æ ·ï¼Œåªä¸è¿‡è¿™ä¸ªæ—¶éœ€è¦æ±‚ä¸ªæ•°</strong></p><pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token keyword">class</span> <span class="token class-name">Solution</span><span class="token punctuation">:</span>    num <span class="token operator">=</span> <span class="token number">0</span>    <span class="token keyword">def</span> <span class="token function">totalNQueens</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> n<span class="token punctuation">:</span> <span class="token builtin">int</span><span class="token punctuation">)</span> <span class="token operator">-</span><span class="token operator">></span> <span class="token builtin">int</span><span class="token punctuation">:</span>        <span class="token keyword">if</span> <span class="token keyword">not</span> n<span class="token punctuation">:</span>            <span class="token keyword">return</span> self<span class="token punctuation">.</span>num             board <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">[</span><span class="token string">"."</span><span class="token punctuation">]</span> <span class="token operator">*</span> n <span class="token keyword">for</span> _ <span class="token keyword">in</span> <span class="token builtin">range</span><span class="token punctuation">(</span>n<span class="token punctuation">)</span><span class="token punctuation">]</span>        <span class="token keyword">def</span> <span class="token function">isValid</span><span class="token punctuation">(</span>board<span class="token punctuation">,</span> row<span class="token punctuation">,</span> col<span class="token punctuation">)</span><span class="token punctuation">:</span>            <span class="token triple-quoted-string string">"""            åˆ¤æ–­è¯¥ç‚¹æ˜¯å¦å¯ä»¥æ”¾ç½®            """</span>            <span class="token comment"># åˆ¤æ–­æ¯ä¸€åˆ—</span>            <span class="token keyword">for</span> i <span class="token keyword">in</span> <span class="token builtin">range</span><span class="token punctuation">(</span>n<span class="token punctuation">)</span><span class="token punctuation">:</span>                <span class="token keyword">if</span> board<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">[</span>col<span class="token punctuation">]</span> <span class="token operator">==</span> <span class="token string">"Q"</span><span class="token punctuation">:</span>                    <span class="token keyword">return</span> <span class="token boolean">False</span>                      <span class="token comment"># åˆ¤æ–­å·¦ä¸Š</span>            i<span class="token punctuation">,</span> j <span class="token operator">=</span> row<span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">,</span> col<span class="token operator">-</span><span class="token number">1</span>            <span class="token keyword">while</span> i <span class="token operator">>=</span><span class="token number">0</span> <span class="token keyword">and</span> j<span class="token operator">>=</span><span class="token number">0</span><span class="token punctuation">:</span>                <span class="token keyword">if</span> board<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">[</span>j<span class="token punctuation">]</span> <span class="token operator">==</span> <span class="token string">"Q"</span><span class="token punctuation">:</span>                    <span class="token keyword">return</span> <span class="token boolean">False</span>                i <span class="token operator">-=</span> <span class="token number">1</span>                j <span class="token operator">-=</span> <span class="token number">1</span>            <span class="token comment"># åˆ¤æ–­å³ä¸Š</span>            i<span class="token punctuation">,</span> j <span class="token operator">=</span> row <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">,</span> col <span class="token operator">+</span> <span class="token number">1</span>            <span class="token keyword">while</span> i <span class="token operator">>=</span><span class="token number">0</span> <span class="token keyword">and</span> j <span class="token operator">&lt;</span>n<span class="token punctuation">:</span>                <span class="token keyword">if</span> board<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">[</span>j<span class="token punctuation">]</span> <span class="token operator">==</span> <span class="token string">"Q"</span><span class="token punctuation">:</span>                    <span class="token keyword">return</span> <span class="token boolean">False</span>                i <span class="token operator">-=</span> <span class="token number">1</span>                j <span class="token operator">+=</span> <span class="token number">1</span>            <span class="token keyword">return</span> <span class="token boolean">True</span>        <span class="token keyword">def</span> <span class="token function">backtracing</span><span class="token punctuation">(</span>board<span class="token punctuation">,</span> row<span class="token punctuation">,</span> n<span class="token punctuation">)</span><span class="token punctuation">:</span>            <span class="token keyword">if</span>  row <span class="token operator">==</span> n<span class="token punctuation">:</span>                self<span class="token punctuation">.</span>num <span class="token operator">+=</span> <span class="token number">1</span>            <span class="token keyword">for</span> col <span class="token keyword">in</span> <span class="token builtin">range</span><span class="token punctuation">(</span>n<span class="token punctuation">)</span><span class="token punctuation">:</span>                <span class="token keyword">if</span> <span class="token keyword">not</span> isValid<span class="token punctuation">(</span>board<span class="token punctuation">,</span> row<span class="token punctuation">,</span> col<span class="token punctuation">)</span><span class="token punctuation">:</span>                    <span class="token keyword">continue</span>                board<span class="token punctuation">[</span>row<span class="token punctuation">]</span><span class="token punctuation">[</span>col<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token string">"Q"</span>                backtracing<span class="token punctuation">(</span>board<span class="token punctuation">,</span> row<span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">,</span> n<span class="token punctuation">)</span>                board<span class="token punctuation">[</span>row<span class="token punctuation">]</span><span class="token punctuation">[</span>col<span class="token punctuation">]</span>  <span class="token operator">=</span> <span class="token string">"."</span>        backtracing<span class="token punctuation">(</span>board<span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> n<span class="token punctuation">)</span>          <span class="token keyword">return</span> self<span class="token punctuation">.</span>num<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h2 id="å‰ªææŠ€å·§æ€»ç»“"><a href="#å‰ªææŠ€å·§æ€»ç»“" class="headerlink" title="å‰ªææŠ€å·§æ€»ç»“"></a>å‰ªææŠ€å·§æ€»ç»“</h2><p>æ€»ç»“ä¸å®Œæ•´ï¼Œåç»­é‡æ–°æ€»ç»“</p><ul><li><p>ä¸€èˆ¬å¯¹æ•°ç»„æœ‰è¦æ±‚ï¼Œå¿…é¡»æ˜¯æœ‰åºæ•°ç»„ï¼Œè¿™ç‚¹éœ€è¦ä¿è¯ </p></li><li><p>æ ‡å¿—ä½ å­é›†IIæ˜¯ä¸ªä¾‹å­ï¼Œ ä½¿ç”¨æ ‡å¿—ä½used[i]&#x3D; True or Fasle è¿›è¡ŒåŒå±‚å‰ªæï¼Œä½¿å¾—ç”¨è¿‡çš„å…ƒç´ ä¸ä¼šé‡å¤ä½¿ç”¨</p></li><li><p>è§„å®šèµ·å§‹ç‚¹</p><ul><li>å¯ä»¥é‡å¤é€‰æ‹©åŒä¸€ä¸ªå…ƒç´ ï¼Œåªéœ€è¦æ›´æ–°èµ·å§‹ç‚¹å°±å¯ä»¥äº†ï¼Œä½¿å¾—èµ·å§‹ç‚¹&gt; ä¸Šä¸€æ¬¡ä½¿ç”¨çš„ç´¢å¼•å°±å¯ä»¥äº†ã€‚ä¾‹å¦‚leetcode 39</li><li>ä¸å¯ä»¥ä½¿ç”¨é‡å¤å…ƒç´ ï¼Œéœ€è¦ä¸æ–­æ›´æ–°èµ·å§‹ç‚¹æ‰å¯ä»¥å®Œæˆå‰ªæï¼Œä¾‹å¦‚leetcode å­é›†</li></ul></li><li><p>è·¨å±‚å‰ªæï¼š å…¨æ’åˆ—iiï¼Œ å¿…é¡»ä¼ é€’æ ‡å¿—ä½</p></li></ul><h1 id="è´ªå¿ƒé—®é¢˜"><a href="#è´ªå¿ƒé—®é¢˜" class="headerlink" title="è´ªå¿ƒé—®é¢˜"></a>è´ªå¿ƒé—®é¢˜</h1><h2 id="åˆ†å‘é¥¼å¹²-leetcode-455"><a href="#åˆ†å‘é¥¼å¹²-leetcode-455" class="headerlink" title="åˆ†å‘é¥¼å¹²-leetcode 455"></a>åˆ†å‘é¥¼å¹²-leetcode 455</h2><blockquote><p>å‡è®¾ä½ æ˜¯ä¸€ä½å¾ˆæ£’çš„å®¶é•¿ï¼Œæƒ³è¦ç»™ä½ çš„å­©å­ä»¬ä¸€äº›å°é¥¼å¹²ã€‚ä½†æ˜¯ï¼Œæ¯ä¸ªå­©å­æœ€å¤šåªèƒ½ç»™ä¸€å—é¥¼å¹²ã€‚</p><p>å¯¹æ¯ä¸ªå­©å­ iï¼Œéƒ½æœ‰ä¸€ä¸ªèƒƒå£å€¼ g[i]ï¼Œè¿™æ˜¯èƒ½è®©å­©å­ä»¬æ»¡è¶³èƒƒå£çš„é¥¼å¹²çš„æœ€å°å°ºå¯¸ï¼›å¹¶ä¸”æ¯å—é¥¼å¹² jï¼Œéƒ½æœ‰ä¸€ä¸ªå°ºå¯¸ s[j] ã€‚å¦‚æœ s[j] &gt;&#x3D; g[i]ï¼Œæˆ‘ä»¬å¯ä»¥å°†è¿™ä¸ªé¥¼å¹² j åˆ†é…ç»™å­©å­ i ï¼Œè¿™ä¸ªå­©å­ä¼šå¾—åˆ°æ»¡è¶³ã€‚ä½ çš„ç›®æ ‡æ˜¯å°½å¯èƒ½æ»¡è¶³è¶Šå¤šæ•°é‡çš„å­©å­ï¼Œå¹¶è¾“å‡ºè¿™ä¸ªæœ€å¤§æ•°å€¼ã€‚</p></blockquote><p><strong>è¿™é‡Œçš„è´ªå¿ƒç­–ç•¥æ˜¯ï¼Œç»™å‰©ä½™å­©å­é‡Œæœ€å°é¥¥é¥¿åº¦çš„å­©å­åˆ†é…æœ€å°çš„èƒ½é¥±è…¹çš„é¥¼å¹²</strong></p><pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token keyword">class</span> <span class="token class-name">Solution</span><span class="token punctuation">:</span>    <span class="token keyword">def</span> <span class="token function">findContentChildren</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> g<span class="token punctuation">:</span> List<span class="token punctuation">[</span><span class="token builtin">int</span><span class="token punctuation">]</span><span class="token punctuation">,</span> s<span class="token punctuation">:</span> List<span class="token punctuation">[</span><span class="token builtin">int</span><span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token operator">-</span><span class="token operator">></span> <span class="token builtin">int</span><span class="token punctuation">:</span>        <span class="token triple-quoted-string string">"""        ç»™èƒƒå£å€¼ä¸ºg[i]çš„å­©å­åˆ†é…å¤§å°ä¸ºs[j]çš„é¥¼å¹²ï¼Œå¦‚æœé¥¼å¹²è¿‡å°ï¼Œé‚£ä¹ˆå¯»æ‰¾ä¸‹ä¸€å—é¥¼å¹²ï¼Œç›´åˆ°æ‰¾åˆ°ä¸ºæ­¢        """</span>        g<span class="token punctuation">.</span>sort<span class="token punctuation">(</span><span class="token punctuation">)</span>        s<span class="token punctuation">.</span>sort<span class="token punctuation">(</span><span class="token punctuation">)</span>        num <span class="token operator">=</span> <span class="token number">0</span>        i <span class="token operator">=</span> j <span class="token operator">=</span> count <span class="token operator">=</span> <span class="token number">0</span>        <span class="token keyword">while</span> i <span class="token operator">&lt;</span> <span class="token builtin">len</span><span class="token punctuation">(</span>g<span class="token punctuation">)</span> <span class="token keyword">and</span> j <span class="token operator">&lt;</span><span class="token builtin">len</span><span class="token punctuation">(</span>s<span class="token punctuation">)</span><span class="token punctuation">:</span>            <span class="token keyword">while</span> j <span class="token operator">&lt;</span> <span class="token builtin">len</span><span class="token punctuation">(</span>s<span class="token punctuation">)</span> <span class="token keyword">and</span> g<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">></span> s<span class="token punctuation">[</span>j<span class="token punctuation">]</span><span class="token punctuation">:</span>                j <span class="token operator">+=</span> <span class="token number">1</span>            <span class="token keyword">if</span> j <span class="token operator">&lt;</span> <span class="token builtin">len</span><span class="token punctuation">(</span>s<span class="token punctuation">)</span><span class="token punctuation">:</span>                count <span class="token operator">+=</span> <span class="token number">1</span>            j <span class="token operator">+=</span> <span class="token number">1</span>            i <span class="token operator">+=</span> <span class="token number">1</span>        <span class="token keyword">return</span> count <span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h2 id="åˆ†å‘ç³–æœ-leetcode-135"><a href="#åˆ†å‘ç³–æœ-leetcode-135" class="headerlink" title="åˆ†å‘ç³–æœ-leetcode 135"></a>åˆ†å‘ç³–æœ-leetcode 135</h2><blockquote><p>n ä¸ªå­©å­ç«™æˆä¸€æ’ã€‚ç»™ä½ ä¸€ä¸ªæ•´æ•°æ•°ç»„ ratings è¡¨ç¤ºæ¯ä¸ªå­©å­çš„è¯„åˆ†ã€‚</p><p>ä½ éœ€è¦æŒ‰ç…§ä»¥ä¸‹è¦æ±‚ï¼Œç»™è¿™äº›å­©å­åˆ†å‘ç³–æœï¼š</p><p>æ¯ä¸ªå­©å­è‡³å°‘åˆ†é…åˆ° 1 ä¸ªç³–æœã€‚<br>ç›¸é‚»ä¸¤ä¸ªå­©å­è¯„åˆ†æ›´é«˜çš„å­©å­ä¼šè·å¾—æ›´å¤šçš„ç³–æœã€‚<br>è¯·ä½ ç»™æ¯ä¸ªå­©å­åˆ†å‘ç³–æœï¼Œè®¡ç®—å¹¶è¿”å›éœ€è¦å‡†å¤‡çš„ æœ€å°‘ç³–æœæ•°ç›® ã€‚</p></blockquote><pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token keyword">class</span> <span class="token class-name">Solution</span><span class="token punctuation">:</span>    <span class="token keyword">def</span> <span class="token function">candy</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> ratings<span class="token punctuation">:</span> List<span class="token punctuation">[</span><span class="token builtin">int</span><span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token operator">-</span><span class="token operator">></span> <span class="token builtin">int</span><span class="token punctuation">:</span>        <span class="token triple-quoted-string string">"""        ç›¸é‚»åˆ†ä¸ºå·¦ç›¸é‚»å’Œæœ‰ç›¸é‚»        å·¦ç›¸é‚»è§„åˆ™, å¦‚æœi &lt; i+1, åˆ™grade[i+1] = grade[i] +1, å¦åˆ™ï¼Œ åˆ†é…ä¸€é¢—ç³–æœ        å³ç›¸é‚»è§„åˆ™ï¼š        """</span>        nums <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">*</span> <span class="token builtin">len</span><span class="token punctuation">(</span>ratings<span class="token punctuation">)</span>                <span class="token keyword">for</span> i <span class="token keyword">in</span> <span class="token builtin">range</span><span class="token punctuation">(</span><span class="token builtin">len</span><span class="token punctuation">(</span>ratings<span class="token punctuation">)</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">:</span>                        <span class="token keyword">if</span> ratings<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">&lt;</span> ratings<span class="token punctuation">[</span>i<span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">:</span>                nums<span class="token punctuation">[</span>i<span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">=</span> nums<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">+</span><span class="token number">1</span>        <span class="token keyword">for</span> i <span class="token keyword">in</span> <span class="token builtin">range</span><span class="token punctuation">(</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token operator">-</span><span class="token builtin">len</span><span class="token punctuation">(</span>ratings<span class="token punctuation">)</span><span class="token operator">+</span><span class="token number">1</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">:</span>            <span class="token keyword">if</span> ratings<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">&lt;</span> ratings<span class="token punctuation">[</span>i<span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">:</span>                nums<span class="token punctuation">[</span>i<span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token builtin">max</span><span class="token punctuation">(</span>nums<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">,</span> nums<span class="token punctuation">[</span>i<span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">)</span>        <span class="token keyword">return</span> <span class="token builtin">sum</span><span class="token punctuation">(</span>nums<span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h2 id="æ— é‡å åŒºé—´-leetcode-435"><a href="#æ— é‡å åŒºé—´-leetcode-435" class="headerlink" title="æ— é‡å åŒºé—´-leetcode 435"></a>æ— é‡å åŒºé—´-leetcode 435</h2><blockquote><p>ç»™å®šä¸€ä¸ªåŒºé—´çš„é›†åˆ intervals ï¼Œå…¶ä¸­ intervals[i] &#x3D; [starti, endi] ã€‚è¿”å› éœ€è¦ç§»é™¤åŒºé—´çš„æœ€å°æ•°é‡ï¼Œä½¿å‰©ä½™åŒºé—´äº’ä¸é‡å  ã€‚</p></blockquote><pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token keyword">class</span> <span class="token class-name">Solution</span><span class="token punctuation">:</span>    <span class="token keyword">def</span> <span class="token function">eraseOverlapIntervals</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> intervals<span class="token punctuation">:</span> List<span class="token punctuation">[</span>List<span class="token punctuation">[</span><span class="token builtin">int</span><span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token operator">-</span><span class="token operator">></span> <span class="token builtin">int</span><span class="token punctuation">:</span>        <span class="token triple-quoted-string string">"""        åœ¨é€‰æ‹©è¦ä¿ç•™åŒºé—´æ—¶ï¼ŒåŒºé—´çš„ç»“å°¾ååˆ†é‡è¦ï¼šé€‰æ‹©çš„åŒºé—´ç»“å°¾è¶Šå°ï¼Œä½™ç•™ç»™å…¶ä»–åŒºé—´çš„ç©ºé—´å°±è¶Šå¤§ï¼Œå°±èƒ½ä¿ç•™æ›´å¤šçš„åŒºé—´ã€‚å› æ­¤ï¼Œæˆ‘ä»¬é‡‡å–çš„è´ªå¿ƒç­–ç•¥ä¸ºï¼Œä¼˜å…ˆä¿ç•™ç»“å°¾å°ä¸”ä¸ç›¸äº¤çš„åŒºé—´        """</span>        intervals <span class="token operator">=</span> <span class="token builtin">sorted</span><span class="token punctuation">(</span>intervals<span class="token punctuation">,</span> key <span class="token operator">=</span> <span class="token keyword">lambda</span> x<span class="token punctuation">:</span> <span class="token punctuation">(</span>x<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">,</span>x<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">)</span>        <span class="token keyword">print</span><span class="token punctuation">(</span>intervals<span class="token punctuation">)</span>        i <span class="token operator">=</span> del_num <span class="token operator">=</span> <span class="token number">0</span>        temp <span class="token operator">=</span> <span class="token builtin">list</span><span class="token punctuation">(</span><span class="token punctuation">)</span>        <span class="token keyword">while</span>  i <span class="token operator">&lt;</span> <span class="token builtin">len</span><span class="token punctuation">(</span>intervals<span class="token punctuation">)</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">:</span>            <span class="token keyword">if</span> i <span class="token operator">==</span> <span class="token number">0</span><span class="token punctuation">:</span>                temp<span class="token punctuation">.</span>append<span class="token punctuation">(</span>intervals<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">)</span>                pre_end <span class="token operator">=</span> temp<span class="token punctuation">[</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span>            nex_start<span class="token operator">=</span>intervals<span class="token punctuation">[</span>i<span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span>            <span class="token keyword">if</span> nex_start <span class="token operator">&lt;</span> pre_end<span class="token punctuation">:</span>                del_num <span class="token operator">+=</span><span class="token number">1</span>                i <span class="token operator">+</span> <span class="token number">1</span>             <span class="token keyword">else</span><span class="token punctuation">:</span>                temp<span class="token punctuation">.</span>append<span class="token punctuation">(</span>intervals<span class="token punctuation">[</span>i<span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">)</span>            i <span class="token operator">+=</span> <span class="token number">1</span>        <span class="token keyword">return</span> del_num<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h2 id="è·³è·ƒæ¸¸æˆ-leetcode-55"><a href="#è·³è·ƒæ¸¸æˆ-leetcode-55" class="headerlink" title="è·³è·ƒæ¸¸æˆ-leetcode 55"></a>è·³è·ƒæ¸¸æˆ-leetcode 55</h2><pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token keyword">class</span> <span class="token class-name">Solution</span><span class="token punctuation">:</span>    <span class="token keyword">def</span> <span class="token function">canJump</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> nums<span class="token punctuation">:</span> List<span class="token punctuation">[</span><span class="token builtin">int</span><span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token operator">-</span><span class="token operator">></span> <span class="token builtin">bool</span><span class="token punctuation">:</span>        <span class="token triple-quoted-string string">"""        ç”±äºæ¯å±‚æœ€å¤šå¯ä»¥è·³A[i]æ­¥ï¼Œä¹Ÿå¯ä»¥è·³0æ­¥æˆ–1æ­¥ï¼Œå› æ­¤å¦‚æœèƒ½åˆ°è¾¾æœ€é«˜å±‚ï¼Œåˆ™è¯´æ˜æ¯ä¸€å±‚éƒ½å¯ä»¥åˆ°è¾¾ã€‚æœ‰äº†è¿™ä¸ªæ¡ä»¶ï¼Œè¯´æ˜å¯ä»¥ç”¨è´ªå¿ƒç®—æ³•        æ­£å‘ï¼Œä»0å‡ºå‘ï¼Œä¸€å±‚ä¸€å±‚å¾€ä¸Šè·³ï¼Œçœ‹åˆ°æœ€åèƒ½ä¸èƒ½è¶…è¿‡æœ€é«˜å±‚ï¼Œèƒ½è¶…è¿‡åˆ™è¯´æ˜èƒ½åˆ°è¾¾ï¼Œå¦åˆ™ä¸èƒ½åˆ°è¾¾        """</span>        <span class="token triple-quoted-string string">"""          0  1  2  3  4        [ 2, 3, 1, 1, 4]        """</span>        <span class="token comment"># ç»´æŠ¤æœ€è¿œä¸‹æ ‡</span>        last_index <span class="token operator">=</span> <span class="token number">0</span>        <span class="token keyword">for</span> i <span class="token keyword">in</span> <span class="token builtin">range</span><span class="token punctuation">(</span><span class="token builtin">len</span><span class="token punctuation">(</span>nums<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">:</span>            <span class="token keyword">if</span> i <span class="token operator">&lt;=</span> last_index<span class="token punctuation">:</span>                last_index <span class="token operator">=</span> <span class="token builtin">max</span><span class="token punctuation">(</span>last_index<span class="token punctuation">,</span> i <span class="token operator">+</span> nums<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">)</span>            <span class="token keyword">if</span> last_index <span class="token operator">>=</span> <span class="token builtin">len</span><span class="token punctuation">(</span>nums<span class="token punctuation">)</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">:</span>                <span class="token keyword">return</span> <span class="token boolean">True</span>        <span class="token keyword">return</span> <span class="token boolean">False</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h2 id="è·³è·ƒæ¸¸æˆII-leetcode-45"><a href="#è·³è·ƒæ¸¸æˆII-leetcode-45" class="headerlink" title="è·³è·ƒæ¸¸æˆII-leetcode 45"></a>è·³è·ƒæ¸¸æˆII-leetcode 45</h2><blockquote><p>ç»™ä½ ä¸€ä¸ªéè´Ÿæ•´æ•°æ•°ç»„ nums ï¼Œä½ æœ€åˆä½äºæ•°ç»„çš„ç¬¬ä¸€ä¸ªä½ç½®ã€‚</p><p>æ•°ç»„ä¸­çš„æ¯ä¸ªå…ƒç´ ä»£è¡¨ä½ åœ¨è¯¥ä½ç½®å¯ä»¥è·³è·ƒçš„æœ€å¤§é•¿åº¦ã€‚</p><p>ä½ çš„ç›®æ ‡æ˜¯ä½¿ç”¨æœ€å°‘çš„è·³è·ƒæ¬¡æ•°åˆ°è¾¾æ•°ç»„çš„æœ€åä¸€ä¸ªä½ç½®ã€‚</p><p>å‡è®¾ä½ æ€»æ˜¯å¯ä»¥åˆ°è¾¾æ•°ç»„çš„æœ€åä¸€ä¸ªä½ç½®ã€‚</p></blockquote><p>**æˆ‘ä»¬ç»´æŠ¤å½“å‰èƒ½å¤Ÿåˆ°è¾¾çš„æœ€å¤§ä¸‹æ ‡ä½ç½®ï¼Œè®°ä¸ºè¾¹ç•Œã€‚æˆ‘ä»¬ä»å·¦åˆ°å³éå†æ•°ç»„ï¼Œåˆ°è¾¾è¾¹ç•Œæ—¶ï¼Œæ›´æ–°è¾¹ç•Œå¹¶å°†è·³è·ƒæ¬¡æ•°å¢åŠ  1 **</p><pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token keyword">class</span> <span class="token class-name">Solution</span><span class="token punctuation">:</span><span class="token comment">#     def jump(self, nums: List[int]) -> int:</span><span class="token comment">#         """</span><span class="token comment">#         å®šä¹‰dpæ•°ç»„ dp[i] è¡¨ç¤ºåœ¨i ä½ç½®å¤„çš„æœ€å°è·³è·ƒæ¬¡æ•°</span><span class="token comment">#         é€’æ¨å…¬å¼ï¼š dp[i]= min(dp[i], dp[j] +1)</span><span class="token comment">#         åŠ¨æ€è§„åˆ’ä¼šè¶…æ—¶</span><span class="token comment">#         """</span><span class="token comment">#         size = len(nums)</span><span class="token comment">#         dp = [float("inf") for _ in range(size)]</span><span class="token comment">#         dp[0] = 0</span><span class="token comment">#         for i in range(1, size):</span><span class="token comment">#             for j in range(i):</span><span class="token comment">#                 if j + nums[j] >= i:</span><span class="token comment">#                     dp[i] = min(dp[i], dp[j] + 1)</span><span class="token comment">#         return dp[size - 1]</span>    <span class="token keyword">def</span> <span class="token function">jump</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> nums<span class="token punctuation">:</span> List<span class="token punctuation">[</span><span class="token builtin">int</span><span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token operator">-</span><span class="token operator">></span> <span class="token builtin">int</span><span class="token punctuation">:</span>        <span class="token triple-quoted-string string">"""        ç»´æŠ¤è·³è‡³æ¯ä¸ªä¸‹æ ‡çš„æœ€å°æ¬¡æ•°ï¼Œåˆ™ï¼Œè·³è‡³æœ€åä¸€ä¸ªä½ç½®çš„æ¬¡æ•°å°±ä¸ºæœ€å°        """</span>        n <span class="token operator">=</span> <span class="token builtin">len</span><span class="token punctuation">(</span>nums<span class="token punctuation">)</span>        max_pos <span class="token operator">=</span> <span class="token number">0</span>        step <span class="token operator">=</span> <span class="token number">0</span>        end <span class="token operator">=</span> <span class="token number">0</span>        <span class="token keyword">for</span> i <span class="token keyword">in</span> <span class="token builtin">range</span><span class="token punctuation">(</span>n<span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">:</span>            <span class="token keyword">if</span> i<span class="token operator">&lt;=</span>max_pos<span class="token punctuation">:</span>                max_pos <span class="token operator">=</span> <span class="token builtin">max</span><span class="token punctuation">(</span>max_pos<span class="token punctuation">,</span> i <span class="token operator">+</span> nums<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">)</span>            <span class="token keyword">if</span> i <span class="token operator">==</span> end<span class="token punctuation">:</span>                step <span class="token operator">+=</span> <span class="token number">1</span>                end <span class="token operator">=</span> max_pos        <span class="token keyword">return</span> step<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h2 id="è‚¡ç¥¨ä¹°å–çš„æœ€ä½³æ—¶æœº-leetcode-121"><a href="#è‚¡ç¥¨ä¹°å–çš„æœ€ä½³æ—¶æœº-leetcode-121" class="headerlink" title="è‚¡ç¥¨ä¹°å–çš„æœ€ä½³æ—¶æœº-leetcode 121"></a>è‚¡ç¥¨ä¹°å–çš„æœ€ä½³æ—¶æœº-leetcode 121</h2><pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token keyword">class</span> <span class="token class-name">Solution</span><span class="token punctuation">:</span>    <span class="token keyword">def</span> <span class="token function">maxProfit</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> prices<span class="token punctuation">:</span> List<span class="token punctuation">[</span><span class="token builtin">int</span><span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token operator">-</span><span class="token operator">></span> <span class="token builtin">int</span><span class="token punctuation">:</span>        <span class="token triple-quoted-string string">"""        å‡è®¾å½“å¤©ä¸ºæœ€é«˜ç‚¹å–å‡ºï¼Œåªè¦ç›´åˆ°å‰é¢çš„æœ€ä½ç‚¹ï¼Œå°±å¯ä»¥ç®—æ³•å½“å‰çš„æœ€å¤§åˆ©æ¶¦        """</span>        min_p <span class="token operator">=</span> <span class="token number">0</span>        max_val <span class="token operator">=</span> <span class="token number">0</span>        <span class="token keyword">for</span> i <span class="token keyword">in</span> <span class="token builtin">range</span><span class="token punctuation">(</span><span class="token builtin">len</span><span class="token punctuation">(</span>prices<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">:</span>            <span class="token keyword">if</span> i <span class="token operator">==</span> <span class="token number">0</span><span class="token punctuation">:</span>                min_p <span class="token operator">=</span> prices<span class="token punctuation">[</span>i<span class="token punctuation">]</span>                <span class="token keyword">continue</span>            max_val <span class="token operator">=</span> <span class="token builtin">max</span><span class="token punctuation">(</span>max_val<span class="token punctuation">,</span> prices<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">-</span> min_p<span class="token punctuation">)</span>            min_p <span class="token operator">=</span> <span class="token builtin">min</span><span class="token punctuation">(</span>min_p<span class="token punctuation">,</span> prices<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">)</span>        <span class="token keyword">return</span> max_val<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h2 id="è‚¡ç¥¨ä¹°å–çš„æœ€ä½³æ—¶æœºII-leetcode-122"><a href="#è‚¡ç¥¨ä¹°å–çš„æœ€ä½³æ—¶æœºII-leetcode-122" class="headerlink" title="è‚¡ç¥¨ä¹°å–çš„æœ€ä½³æ—¶æœºII-leetcode 122"></a>è‚¡ç¥¨ä¹°å–çš„æœ€ä½³æ—¶æœºII-leetcode 122</h2><blockquote><p>ç»™ä½ ä¸€ä¸ªæ•´æ•°æ•°ç»„ prices ï¼Œå…¶ä¸­ prices[i] è¡¨ç¤ºæŸæ”¯è‚¡ç¥¨ç¬¬ i å¤©çš„ä»·æ ¼ã€‚</p><p>åœ¨æ¯ä¸€å¤©ï¼Œä½ å¯ä»¥å†³å®šæ˜¯å¦è´­ä¹°å’Œ&#x2F;æˆ–å‡ºå”®è‚¡ç¥¨ã€‚ä½ åœ¨ä»»ä½•æ—¶å€™ æœ€å¤š åªèƒ½æŒæœ‰ ä¸€è‚¡ è‚¡ç¥¨ã€‚ä½ ä¹Ÿå¯ä»¥å…ˆè´­ä¹°ï¼Œç„¶ååœ¨ åŒä¸€å¤© å‡ºå”®ã€‚</p><p>è¿”å› ä½ èƒ½è·å¾—çš„ æœ€å¤§ åˆ©æ¶¦ ã€‚</p></blockquote><pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token keyword">class</span> <span class="token class-name">Solution</span><span class="token punctuation">:</span>    <span class="token keyword">def</span> <span class="token function">maxProfit</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> prices<span class="token punctuation">:</span> List<span class="token punctuation">[</span><span class="token builtin">int</span><span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token operator">-</span><span class="token operator">></span> <span class="token builtin">int</span><span class="token punctuation">:</span>        <span class="token triple-quoted-string string">"""        æ‰¾åˆ°æ¯ä¸€ä¸ªä¸Šå¡ï¼Œç›¸åŠ å°±æ˜¯æœ€ç»ˆçš„ç»“æœ        """</span>        ans <span class="token operator">=</span> <span class="token number">0</span>        <span class="token keyword">for</span> i  <span class="token keyword">in</span> <span class="token builtin">range</span><span class="token punctuation">(</span><span class="token builtin">len</span><span class="token punctuation">(</span>prices<span class="token punctuation">)</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">:</span>            <span class="token keyword">if</span> prices<span class="token punctuation">[</span>i<span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">></span>prices<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">:</span>                ans <span class="token operator">+=</span> prices<span class="token punctuation">[</span>i<span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">-</span> prices<span class="token punctuation">[</span>i<span class="token punctuation">]</span>        <span class="token keyword">return</span> ans<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>]]></content>
      
      
      <categories>
          
          <category> æ•°æ®ç»“æ„ä¸ç®—æ³• </category>
          
      </categories>
      
      
        <tags>
            
            <tag> ç®—æ³•é¢˜ </tag>
            
            <tag> leetcode </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>æ’åºç®—æ³•ä¸äºŒåˆ†æŸ¥æ‰¾</title>
      <link href="/posts/17141.html"/>
      <url>/posts/17141.html</url>
      
        <content type="html"><![CDATA[<h1 id="æ’åºç®—æ³•"><a href="#æ’åºç®—æ³•" class="headerlink" title="æ’åºç®—æ³•"></a>æ’åºç®—æ³•</h1><h2 id="å†’æ³¡"><a href="#å†’æ³¡" class="headerlink" title="å†’æ³¡"></a>å†’æ³¡</h2><blockquote><p>åŸç†ï¼š æ‹¿æ¯æ¬¡å¾ªç¯å‡ºæ¥çš„å…ƒç´ ä¸è¯¥å…ƒç´ åé¢çš„è¿›è¡Œæ¯”è¾ƒï¼Œå¦‚æœä¸Šé¢ä¸€ä¸ªæ¯”è‡ªå·±å°ï¼Œå°±å°†è‡ªå·±å’Œä¸Šé¢çš„å…ƒç´ äº¤æ¢ä½ç½®ï¼Œä¸€æ¬¡æ¯”è¾ƒ</p><p>ç¬¬ä¸€è½®ç»“æŸåï¼Œæœ€åçš„å…ƒç´ ä¸€å®šæ˜¯æœ€å¤§çš„</p></blockquote><pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token keyword">def</span> <span class="token function">bubble_sort2</span><span class="token punctuation">(</span>li<span class="token punctuation">)</span><span class="token punctuation">:</span>    <span class="token keyword">for</span> i <span class="token keyword">in</span> <span class="token builtin">range</span><span class="token punctuation">(</span><span class="token builtin">len</span><span class="token punctuation">(</span>li<span class="token punctuation">)</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">:</span>        <span class="token keyword">for</span> j <span class="token keyword">in</span> <span class="token builtin">range</span><span class="token punctuation">(</span><span class="token builtin">len</span><span class="token punctuation">(</span>li<span class="token punctuation">)</span><span class="token operator">-</span>i<span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">:</span>            <span class="token keyword">if</span> li<span class="token punctuation">[</span>j<span class="token punctuation">]</span> <span class="token operator">></span> li<span class="token punctuation">[</span>j<span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">:</span>                                li<span class="token punctuation">[</span>j<span class="token punctuation">]</span><span class="token punctuation">,</span> li<span class="token punctuation">[</span>j<span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">=</span> li<span class="token punctuation">[</span>j<span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">,</span> li<span class="token punctuation">[</span>j<span class="token punctuation">]</span>    <span class="token keyword">print</span><span class="token punctuation">(</span>li<span class="token punctuation">)</span>    <span class="token keyword">return</span> li<span class="token comment"># ä¼˜åŒ–ç‰ˆ</span>ef bubble_sort2<span class="token punctuation">(</span>li<span class="token punctuation">)</span><span class="token punctuation">:</span>    <span class="token keyword">for</span> i <span class="token keyword">in</span> <span class="token builtin">range</span><span class="token punctuation">(</span><span class="token builtin">len</span><span class="token punctuation">(</span>li<span class="token punctuation">)</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">:</span>        exchange <span class="token operator">=</span> <span class="token boolean">False</span>        <span class="token keyword">for</span> j <span class="token keyword">in</span> <span class="token builtin">range</span><span class="token punctuation">(</span><span class="token builtin">len</span><span class="token punctuation">(</span>li<span class="token punctuation">)</span><span class="token operator">-</span>i<span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">:</span>            <span class="token keyword">if</span> li<span class="token punctuation">[</span>j<span class="token punctuation">]</span> <span class="token operator">></span> li<span class="token punctuation">[</span>j<span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">:</span>                li<span class="token punctuation">[</span>j<span class="token punctuation">]</span><span class="token punctuation">,</span> li<span class="token punctuation">[</span>j<span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">=</span> li<span class="token punctuation">[</span>j<span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">,</span> li<span class="token punctuation">[</span>j<span class="token punctuation">]</span>                exchange <span class="token operator">=</span> <span class="token boolean">True</span>        <span class="token keyword">if</span> <span class="token keyword">not</span> exchange<span class="token punctuation">:</span>  <span class="token comment"># æ²¡æœ‰äº¤æ¢è¯´æ˜æœ‰åºäº†</span>            <span class="token keyword">break</span>    <span class="token keyword">print</span><span class="token punctuation">(</span>li<span class="token punctuation">)</span>    <span class="token keyword">return</span> li<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h2 id="é€‰æ‹©"><a href="#é€‰æ‹©" class="headerlink" title="é€‰æ‹©"></a>é€‰æ‹©</h2><ul><li>è®¾å®šç¬¬ä¸€ä¸ªå…ƒç´ ä¸ºæœ€å°è®°å½•æ­¤æ—¶çš„æœ€å°ä¸‹æ ‡ï¼Œç„¶åç”¨è¿™ä¸ªæœ€å°ä¸‹æ ‡å¯¹åº”çš„å…ƒç´ ä¸€æ¬¡å’Œæ— åºåˆ—è¡¨ä¸­çš„å…ƒç´ æ¯”è¾ƒï¼Œæ‰¾å‡ºæ­¤æ—¶çš„æœ€å°ä¸‹æ ‡</li><li>æ¯ä¸€è½®å¾ªç¯ï¼Œéƒ½ä¼šå°†æœ€å°ä¸‹æ ‡å¯¹åº”çš„å…ƒç´ äº¤æ¢è‡³æœ‰åºéƒ¨åˆ†çš„æœ«å°¾</li></ul><pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token keyword">def</span> <span class="token function">select_sort</span><span class="token punctuation">(</span>li<span class="token punctuation">)</span><span class="token punctuation">:</span>    <span class="token keyword">for</span> i <span class="token keyword">in</span> <span class="token builtin">range</span><span class="token punctuation">(</span><span class="token builtin">len</span><span class="token punctuation">(</span>li<span class="token punctuation">)</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">:</span>        min_loc <span class="token operator">=</span> i        <span class="token keyword">for</span> j <span class="token keyword">in</span> <span class="token builtin">range</span><span class="token punctuation">(</span>i<span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token builtin">len</span><span class="token punctuation">(</span>li<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">:</span>            <span class="token keyword">if</span> li<span class="token punctuation">[</span>j<span class="token punctuation">]</span> <span class="token operator">&lt;</span> li<span class="token punctuation">[</span>min_loc<span class="token punctuation">]</span><span class="token punctuation">:</span>                min_loc <span class="token operator">=</span> j        li<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">,</span> li<span class="token punctuation">[</span>min_loc<span class="token punctuation">]</span> <span class="token operator">=</span> li<span class="token punctuation">[</span>min_loc<span class="token punctuation">]</span><span class="token punctuation">,</span> li<span class="token punctuation">[</span>i<span class="token punctuation">]</span>    <span class="token keyword">print</span><span class="token punctuation">(</span>li<span class="token punctuation">)</span>    <span class="token keyword">return</span> li<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h2 id="æ’å…¥"><a href="#æ’å…¥" class="headerlink" title="æ’å…¥"></a>æ’å…¥</h2><ul><li>åœ¨å…¶å®ç°è¿‡ç¨‹ä½¿ç”¨åŒå±‚å¾ªç¯ï¼Œå¤–å±‚å¾ªç¯å¯¹é™¤äº†ç¬¬ä¸€ä¸ªå…ƒç´ ä¹‹å¤–çš„æ‰€æœ‰å…ƒç´ ï¼Œå†…å±‚å¾ªç¯å¯¹å½“å‰å…ƒç´ å‰é¢æœ‰åºè¡¨è¿›è¡Œå¾…æ’å…¥ä½ç½®æŸ¥æ‰¾ï¼Œå¹¶è¿›è¡Œç§»åŠ¨</li></ul><pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token keyword">def</span> <span class="token function">insert_sort</span><span class="token punctuation">(</span>li<span class="token punctuation">)</span><span class="token punctuation">:</span>    <span class="token keyword">for</span> i <span class="token keyword">in</span> <span class="token builtin">range</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token builtin">len</span><span class="token punctuation">(</span>li<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">:</span>        <span class="token keyword">for</span> j <span class="token keyword">in</span> <span class="token builtin">range</span><span class="token punctuation">(</span>i<span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">:</span>            <span class="token keyword">if</span> li<span class="token punctuation">[</span>j<span class="token punctuation">]</span> <span class="token operator">&lt;</span> li<span class="token punctuation">[</span>j<span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">:</span>                li<span class="token punctuation">[</span>j<span class="token punctuation">]</span><span class="token punctuation">,</span> li<span class="token punctuation">[</span>j<span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">=</span> li<span class="token punctuation">[</span>j<span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">,</span> li<span class="token punctuation">[</span>j<span class="token punctuation">]</span>    <span class="token keyword">print</span><span class="token punctuation">(</span>li<span class="token punctuation">)</span>    <span class="token keyword">return</span> li<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h2 id="å¿«æ’"><a href="#å¿«æ’" class="headerlink" title="å¿«æ’"></a>å¿«æ’</h2><pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token keyword">def</span> <span class="token function">quick_sort</span><span class="token punctuation">(</span>li<span class="token punctuation">,</span> left<span class="token punctuation">,</span> right<span class="token punctuation">)</span><span class="token punctuation">:</span>    <span class="token keyword">if</span> left <span class="token operator">&lt;</span> right<span class="token punctuation">:</span>        mid <span class="token operator">=</span> partition<span class="token punctuation">(</span>li<span class="token punctuation">,</span> left<span class="token punctuation">,</span> right<span class="token punctuation">)</span>        quick_sort<span class="token punctuation">(</span>li<span class="token punctuation">,</span> left<span class="token punctuation">,</span> mid<span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span>        quick_sort<span class="token punctuation">(</span>li<span class="token punctuation">,</span> mid<span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">,</span> right<span class="token punctuation">)</span>    <span class="token keyword">print</span><span class="token punctuation">(</span>li<span class="token punctuation">)</span>    <span class="token keyword">return</span> li<span class="token keyword">def</span> <span class="token function">partition</span><span class="token punctuation">(</span>data<span class="token punctuation">,</span> left<span class="token punctuation">,</span> right<span class="token punctuation">)</span><span class="token punctuation">:</span>    tmp <span class="token operator">=</span> data<span class="token punctuation">[</span>left<span class="token punctuation">]</span>    <span class="token keyword">while</span> left <span class="token operator">&lt;</span> right<span class="token punctuation">:</span>        <span class="token keyword">while</span> left <span class="token operator">&lt;</span> right <span class="token keyword">and</span> data<span class="token punctuation">[</span>right<span class="token punctuation">]</span> <span class="token operator">>=</span> tmp<span class="token punctuation">:</span>            right <span class="token operator">-=</span> <span class="token number">1</span>        data<span class="token punctuation">[</span>left<span class="token punctuation">]</span> <span class="token operator">=</span> data<span class="token punctuation">[</span>right<span class="token punctuation">]</span>        <span class="token keyword">while</span> left <span class="token operator">&lt;</span> right <span class="token keyword">and</span> data<span class="token punctuation">[</span>left<span class="token punctuation">]</span> <span class="token operator">&lt;=</span> tmp<span class="token punctuation">:</span>            left <span class="token operator">+=</span> <span class="token number">1</span>        data<span class="token punctuation">[</span>right<span class="token punctuation">]</span> <span class="token operator">=</span> data<span class="token punctuation">[</span>left<span class="token punctuation">]</span>    data<span class="token punctuation">[</span>left<span class="token punctuation">]</span> <span class="token operator">=</span> tmp    <span class="token keyword">return</span> left<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h2 id="å½’å¹¶"><a href="#å½’å¹¶" class="headerlink" title="å½’å¹¶"></a>å½’å¹¶</h2><pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token keyword">def</span> <span class="token function">merge_sort</span><span class="token punctuation">(</span>li<span class="token punctuation">)</span><span class="token punctuation">:</span>    <span class="token keyword">if</span> <span class="token builtin">len</span><span class="token punctuation">(</span>li<span class="token punctuation">)</span> <span class="token operator">&lt;=</span> <span class="token number">1</span><span class="token punctuation">:</span>        <span class="token keyword">return</span> li    mid <span class="token operator">=</span> <span class="token builtin">len</span><span class="token punctuation">(</span>li<span class="token punctuation">)</span><span class="token operator">//</span><span class="token number">2</span>    left <span class="token operator">=</span> merge_sort<span class="token punctuation">(</span>li<span class="token punctuation">[</span><span class="token punctuation">:</span>mid<span class="token punctuation">]</span><span class="token punctuation">)</span>    right <span class="token operator">=</span> merge_sort<span class="token punctuation">(</span>li<span class="token punctuation">[</span>mid<span class="token punctuation">:</span><span class="token punctuation">]</span><span class="token punctuation">)</span>    <span class="token keyword">return</span> merge<span class="token punctuation">(</span>left<span class="token punctuation">,</span> right<span class="token punctuation">)</span><span class="token keyword">def</span> <span class="token function">merge</span><span class="token punctuation">(</span>left<span class="token punctuation">,</span> right<span class="token punctuation">)</span><span class="token punctuation">:</span>    l <span class="token operator">=</span> r <span class="token operator">=</span> <span class="token number">0</span>    tmp <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>    <span class="token keyword">while</span> l <span class="token operator">&lt;</span> <span class="token builtin">len</span><span class="token punctuation">(</span>left<span class="token punctuation">)</span> <span class="token keyword">and</span> r <span class="token operator">&lt;</span> <span class="token builtin">len</span><span class="token punctuation">(</span>right<span class="token punctuation">)</span><span class="token punctuation">:</span>        <span class="token keyword">if</span> left<span class="token punctuation">[</span>l<span class="token punctuation">]</span> <span class="token operator">&lt;</span> right<span class="token punctuation">[</span>r<span class="token punctuation">]</span><span class="token punctuation">:</span>            tmp<span class="token punctuation">.</span>append<span class="token punctuation">(</span>left<span class="token punctuation">[</span>l<span class="token punctuation">]</span><span class="token punctuation">)</span>            l<span class="token operator">+=</span><span class="token number">1</span>        <span class="token keyword">else</span><span class="token punctuation">:</span>            tmp<span class="token punctuation">.</span>append<span class="token punctuation">(</span>right<span class="token punctuation">[</span>r<span class="token punctuation">]</span><span class="token punctuation">)</span>            r<span class="token operator">+=</span><span class="token number">1</span>    tmp <span class="token operator">+=</span> left<span class="token punctuation">[</span>l<span class="token punctuation">:</span><span class="token punctuation">]</span>    tmp <span class="token operator">+=</span> right<span class="token punctuation">[</span>r<span class="token punctuation">:</span><span class="token punctuation">]</span>    <span class="token keyword">return</span> tmp<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h2 id="å †æ’"><a href="#å †æ’" class="headerlink" title="å †æ’"></a>å †æ’</h2><p> å¾…è¡¥å……</p><h1 id="äºŒåˆ†æŸ¥æ‰¾"><a href="#äºŒåˆ†æŸ¥æ‰¾" class="headerlink" title="äºŒåˆ†æŸ¥æ‰¾"></a>äºŒåˆ†æŸ¥æ‰¾</h1><pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token keyword">def</span> <span class="token function">binary_search</span><span class="token punctuation">(</span>li<span class="token punctuation">,</span> target<span class="token punctuation">)</span><span class="token punctuation">:</span><span class="token keyword">if</span> <span class="token builtin">len</span><span class="token punctuation">(</span>li<span class="token punctuation">)</span> <span class="token operator">&lt;</span><span class="token number">1</span><span class="token punctuation">:</span><span class="token keyword">return</span> <span class="token boolean">False</span>    left<span class="token punctuation">,</span> right <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token builtin">len</span><span class="token punctuation">(</span>li<span class="token punctuation">)</span>        <span class="token keyword">while</span> left <span class="token operator">&lt;</span> right<span class="token punctuation">:</span>                <span class="token keyword">if</span> left <span class="token operator">&lt;</span> ri<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>]]></content>
      
      
      <categories>
          
          <category> æ•°æ®ç»“æ„ä¸ç®—æ³• </category>
          
      </categories>
      
      
        <tags>
            
            <tag> æ•°æ®ç»“æ„ </tag>
            
            <tag> ç®—æ³• </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>æ­£åˆ™è¡¨è¾¾å¼</title>
      <link href="/posts/46563.html"/>
      <url>/posts/46563.html</url>
      
        <content type="html"><![CDATA[<h1 id="å®šä¹‰"><a href="#å®šä¹‰" class="headerlink" title="å®šä¹‰"></a>å®šä¹‰</h1><ul><li>æ­£åˆ™è¡¨è¾¾å¼æ˜¯åŒ¹é…ç±»ç¬¦å·</li><li>æ­£åˆ™è¡¨è¾¾å¼æ˜¯ä¸€ç§å¯ä»¥è®©ä¸€äº›å¤æ‚å­—ç¬¦ä¸²é—®é¢˜å˜å¾—ç®€å•çš„å·¥å…·</li></ul><h1 id="è¯­æ³•"><a href="#è¯­æ³•" class="headerlink" title="è¯­æ³•"></a>è¯­æ³•</h1><h2 id="reæ¨¡å—"><a href="#reæ¨¡å—" class="headerlink" title="reæ¨¡å—"></a>reæ¨¡å—</h2><ul><li>fullmatch(æ­£åˆ™è¡¨è¾¾å¼ï¼Œ å­—ç¬¦ä¸²) - åˆ¤æ–­æ•´ä¸ªå­—ç¬¦ä¸²æ˜¯å¦æ»¡è¶³æ­£åˆ™è¡¨è¾¾å¼æè¿°çš„è§„åˆ™</li><li>pythonæä¾›æ­£åˆ™è¡¨è¾¾å¼çš„æ–¹æ³•ï¼šæä¾›ä¸€ä¸ªå­—ç¬¦ä¸²ï¼Œå­—ç¬¦ä¸²çš„å†…å®¹æ˜¯ä¸€ä¸ªæ­£åˆ™è¡¨è¾¾å¼ï¼Œè¿™ä¸ªå­—ç¬¦ä¸²çš„æœ€å‰é¢éœ€è¦åŠ r</li><li>pythonçš„æ­£åˆ™è¡¨è¾¾å¼ï¼šrâ€™æ­£åˆ™â€˜</li></ul><h2 id="æ­£åˆ™è¯­æ³•å†…å®¹"><a href="#æ­£åˆ™è¯­æ³•å†…å®¹" class="headerlink" title="æ­£åˆ™è¯­æ³•å†…å®¹"></a>æ­£åˆ™è¯­æ³•å†…å®¹</h2><ul><li>åŒ…æ‹¬ï¼šåŒ¹é…ç±»ç¬¦å·ã€æ§åˆ¶æ¬¡æ•°ç¬¦å·ã€åˆ†ç»„ç¬¦å·ã€åˆ†æ”¯ã€æ£€æµ‹ç±»ç¬¦å·</li></ul><h2 id="åŒ¹é…ç±»ç¬¦å·"><a href="#åŒ¹é…ç±»ç¬¦å·" class="headerlink" title="åŒ¹é…ç±»ç¬¦å·"></a>åŒ¹é…ç±»ç¬¦å·</h2><h3 id="æ™®é€šç¬¦å·ï¼ˆå­—ç¬¦ï¼‰"><a href="#æ™®é€šç¬¦å·ï¼ˆå­—ç¬¦ï¼‰" class="headerlink" title="æ™®é€šç¬¦å·ï¼ˆå­—ç¬¦ï¼‰"></a>æ™®é€šç¬¦å·ï¼ˆå­—ç¬¦ï¼‰</h3><pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token keyword">from</span> re <span class="token keyword">import</span> fullmatchresult <span class="token operator">=</span> fullmatch<span class="token punctuation">(</span><span class="token string">r'abc'</span><span class="token punctuation">,</span> abc<span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre><h3 id="åŒ¹é…ä»»æ„ä¸€ä¸ªå­—ç¬¦"><a href="#åŒ¹é…ä»»æ„ä¸€ä¸ªå­—ç¬¦" class="headerlink" title=". åŒ¹é…ä»»æ„ä¸€ä¸ªå­—ç¬¦"></a>. åŒ¹é…ä»»æ„ä¸€ä¸ªå­—ç¬¦</h3><pre class="line-numbers language-python" data-language="python"><code class="language-python">result <span class="token operator">=</span> fulllmtch<span class="token punctuation">(</span><span class="token string">r".bc"</span><span class="token punctuation">,</span> <span class="token string">'abc'</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><h3 id="dåŒ¹é…ä»»æ„ä¸€ä¸ªæ•°å­—å­—ç¬¦"><a href="#dåŒ¹é…ä»»æ„ä¸€ä¸ªæ•°å­—å­—ç¬¦" class="headerlink" title="\dåŒ¹é…ä»»æ„ä¸€ä¸ªæ•°å­—å­—ç¬¦"></a>\dåŒ¹é…ä»»æ„ä¸€ä¸ªæ•°å­—å­—ç¬¦</h3><pre class="line-numbers language-python" data-language="python"><code class="language-python">result <span class="token operator">=</span> fullmatch<span class="token punctuation">(</span><span class="token string">r'x\dy'</span><span class="token punctuation">,</span> <span class="token string">'x7y'</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><h3 id="såŒ¹é…ä»»æ„ä¸€ä¸ªç©ºç™½å­—ç¬¦"><a href="#såŒ¹é…ä»»æ„ä¸€ä¸ªç©ºç™½å­—ç¬¦" class="headerlink" title="\såŒ¹é…ä»»æ„ä¸€ä¸ªç©ºç™½å­—ç¬¦"></a>\såŒ¹é…ä»»æ„ä¸€ä¸ªç©ºç™½å­—ç¬¦</h3><pre class="line-numbers language-python" data-language="python"><code class="language-python">result <span class="token operator">=</span> fullmatch<span class="token punctuation">(</span><span class="token string">r'x\s\y'</span><span class="token punctuation">,</span> x\ny<span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><h3 id="DåŒ¹é…ä»»æ„ä¸€ä¸ªéæ•°å­—"><a href="#DåŒ¹é…ä»»æ„ä¸€ä¸ªéæ•°å­—" class="headerlink" title="\DåŒ¹é…ä»»æ„ä¸€ä¸ªéæ•°å­—"></a>\DåŒ¹é…ä»»æ„ä¸€ä¸ªéæ•°å­—</h3><pre class="line-numbers language-python" data-language="python"><code class="language-python">result <span class="token operator">=</span> fullmatch<span class="token punctuation">(</span><span class="token string">r'x\Dy'</span><span class="token punctuation">,</span> <span class="token string">'xmy'</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><h3 id="SåŒ¹é…ä»»æ„ä¸€ä¸ªéç©ºç™½å­—ç¬¦"><a href="#SåŒ¹é…ä»»æ„ä¸€ä¸ªéç©ºç™½å­—ç¬¦" class="headerlink" title="\SåŒ¹é…ä»»æ„ä¸€ä¸ªéç©ºç™½å­—ç¬¦"></a>\SåŒ¹é…ä»»æ„ä¸€ä¸ªéç©ºç™½å­—ç¬¦</h3><pre class="line-numbers language-python" data-language="python"><code class="language-python">result <span class="token operator">=</span> fullmatch<span class="token punctuation">(</span><span class="token string">r'x\Sy'</span><span class="token punctuation">,</span> <span class="token string">'xmy'</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><h3 id="å­—ç¬¦é›†-åŒ¹é…å­—ç¬¦é›†ä¸­çš„ä»»æ„å­—ç¬¦"><a href="#å­—ç¬¦é›†-åŒ¹é…å­—ç¬¦é›†ä¸­çš„ä»»æ„å­—ç¬¦" class="headerlink" title="å­—ç¬¦é›†-åŒ¹é…å­—ç¬¦é›†ä¸­çš„ä»»æ„å­—ç¬¦"></a>å­—ç¬¦é›†-åŒ¹é…å­—ç¬¦é›†ä¸­çš„ä»»æ„å­—ç¬¦</h3><ul><li>v[mnab] - åŒ¹é…mæˆ–è€…næˆ–è€…aæˆ–è€…b</li><li>[\dmn]ã€[m\dn] - åŒ¹é…ä»»æ„æ•°å­—æˆ–è€…mæˆ–è€…n</li><li>[\d\s] - åŒ¹é…ä»»æ„æ•°å­—æˆ–è€…ä»»æ„ç©ºç™½</li><li>[1-9] - åŒ¹é…1åˆ°9ä¸­ä»»æ„æ•°å­—</li><li>[0-9] - å’Œ\dæ•ˆæœä¸€æ ·</li><li>[a-z] - åŒ¹é…ä»»æ„ä¸€ä¸ªå°å†™å­—æ¯</li><li>[1-5a-z] - åŒ¹é…æ•°å­—1åˆ°5æˆ–è€…ä»»æ„å°å†™å­—æ¯</li><li>[A-Za-z] - åŒ¹é…ä»»æ„ä¸€ä¸ªå­—æ¯</li><li>[\u4e00-\u9fa5] - åŒ¹é…ä»»æ„ä¸€ä¸ªä¸­æ–‡</li><li>[\u4e00-\u9fa5wp] - åŒ¹é…ä»»æ„ä¸€ä¸ªä¸­æ–‡æˆ–è€…wæˆ–è€…p</li></ul><pre class="line-numbers language-python" data-language="python"><code class="language-python">result <span class="token operator">=</span> fullmatch<span class="token punctuation">(</span><span class="token string">r'x[Mn3+]y'</span><span class="token punctuation">,</span> <span class="token string">'xMy'</span><span class="token punctuation">)</span><span class="token keyword">print</span><span class="token punctuation">(</span>result<span class="token punctuation">)</span>result <span class="token operator">=</span> fullmatch<span class="token punctuation">(</span><span class="token string">r'x[\u4e00-\u9fa5\dwp]y'</span><span class="token punctuation">,</span> <span class="token string">'x3y'</span><span class="token punctuation">)</span><span class="token keyword">print</span><span class="token punctuation">(</span>result<span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre><h3 id="å­—ç¬¦é›†-åŒ¹é…ä¸åœ¨å­—ç¬¦é›†ä¸­çš„ä»»æ„å­—ç¬¦"><a href="#å­—ç¬¦é›†-åŒ¹é…ä¸åœ¨å­—ç¬¦é›†ä¸­çš„ä»»æ„å­—ç¬¦" class="headerlink" title="[^å­—ç¬¦é›†]-åŒ¹é…ä¸åœ¨å­—ç¬¦é›†ä¸­çš„ä»»æ„å­—ç¬¦"></a>[^å­—ç¬¦é›†]-åŒ¹é…ä¸åœ¨å­—ç¬¦é›†ä¸­çš„ä»»æ„å­—ç¬¦</h3><pre class="line-numbers language-none"><code class="language-none">result &#x3D; fullmatch(r&#39;x[^mn]y&#39;, &#39;x-y&#39;)print(result)<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre><h3 id="æ§åˆ¶æ¬¡æ•°ç¬¦å·"><a href="#æ§åˆ¶æ¬¡æ•°ç¬¦å·" class="headerlink" title="æ§åˆ¶æ¬¡æ•°ç¬¦å·"></a>æ§åˆ¶æ¬¡æ•°ç¬¦å·</h3><h4 id="0æ¬¡æˆ–è€…æ— æ•°æ¬¡"><a href="#0æ¬¡æˆ–è€…æ— æ•°æ¬¡" class="headerlink" title="* 0æ¬¡æˆ–è€…æ— æ•°æ¬¡"></a>* 0æ¬¡æˆ–è€…æ— æ•°æ¬¡</h4><ul><li>* ä»»æ„æ¬¡æ•° a* å‡ºç°0æ¬¡æˆ–è€…å¤šæ¬¡a</li><li>\d* ä»»æ„æ•°å­—å‡ºç°0æ¬¡æˆ–è€…å¤šæ¬¡</li><li>[abc]* [abc]å‡ºç°0æ¬¡æˆ–è€…å¤šæ¬¡</li></ul><pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token keyword">print</span><span class="token punctuation">(</span>fullmatch<span class="token punctuation">(</span><span class="token string">r'xa*y'</span><span class="token punctuation">,</span> <span class="token string">'xy'</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token keyword">print</span><span class="token punctuation">(</span>fullmatch<span class="token punctuation">(</span><span class="token string">r'xa*y'</span><span class="token punctuation">,</span> <span class="token string">'xay'</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token keyword">print</span><span class="token punctuation">(</span>fullmatch<span class="token punctuation">(</span><span class="token string">r'xa*y'</span><span class="token punctuation">,</span> <span class="token string">'xaaaay'</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token keyword">print</span><span class="token punctuation">(</span>fullmatch<span class="token punctuation">(</span><span class="token string">r'x\d*y'</span><span class="token punctuation">,</span> <span class="token string">'xy'</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token keyword">print</span><span class="token punctuation">(</span>fullmatch<span class="token punctuation">(</span><span class="token string">r'x\d*y'</span><span class="token punctuation">,</span> <span class="token string">'x323232312y'</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre><h4 id="1æ¬¡æˆ–è€…å¤šæ¬¡ï¼ˆè‡³å°‘ä¸€æ¬¡ï¼‰"><a href="#1æ¬¡æˆ–è€…å¤šæ¬¡ï¼ˆè‡³å°‘ä¸€æ¬¡ï¼‰" class="headerlink" title="+  1æ¬¡æˆ–è€…å¤šæ¬¡ï¼ˆè‡³å°‘ä¸€æ¬¡ï¼‰"></a>+  1æ¬¡æˆ–è€…å¤šæ¬¡ï¼ˆè‡³å°‘ä¸€æ¬¡ï¼‰</h4><pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token keyword">print</span><span class="token punctuation">(</span>fullmatch<span class="token punctuation">(</span><span class="token string">r'xa+y'</span><span class="token punctuation">,</span> <span class="token string">'xy'</span><span class="token punctuation">)</span><span class="token punctuation">)</span>  <span class="token comment"># None</span><span class="token keyword">print</span><span class="token punctuation">(</span>fullmatch<span class="token punctuation">(</span><span class="token string">r'xa+y'</span><span class="token punctuation">,</span> <span class="token string">'xay'</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token keyword">print</span><span class="token punctuation">(</span>fullmatch<span class="token punctuation">(</span><span class="token string">r'xa+y'</span><span class="token punctuation">,</span> <span class="token string">'xaaaay'</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre><h4 id="0æ¬¡æˆ–è€…1æ¬¡"><a href="#0æ¬¡æˆ–è€…1æ¬¡" class="headerlink" title="?0æ¬¡æˆ–è€…1æ¬¡"></a>?0æ¬¡æˆ–è€…1æ¬¡</h4><pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token keyword">print</span><span class="token punctuation">(</span>fullmatch<span class="token punctuation">(</span><span class="token string">r'[+-]?[1-9]\d\d'</span><span class="token punctuation">,</span> <span class="token string">'810'</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token keyword">print</span><span class="token punctuation">(</span>fullmatch<span class="token punctuation">(</span><span class="token string">r'9?xy'</span><span class="token punctuation">,</span> <span class="token string">'9xy'</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre><h4 id="n-æ¬¡"><a href="#n-æ¬¡" class="headerlink" title="{n}æ¬¡"></a>{n}æ¬¡</h4><ul><li>{n} næ¬¡</li><li>{m, n} m-næ¬¡</li><li>{m, } è‡³å°‘mæ¬¡</li><li>{ï¼Œn} è‡³å¤šnæ¬¡</li></ul><pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token keyword">print</span><span class="token punctuation">(</span>fullmatch<span class="token punctuation">(</span><span class="token string">r'1[3-9]\d&#123;9&#125;'</span><span class="token punctuation">,</span> <span class="token string">'13123456789'</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token keyword">print</span><span class="token punctuation">(</span>fullmatch<span class="token punctuation">(</span><span class="token string">r'1[3-9]\d&#123;1,2&#125;'</span><span class="token punctuation">,</span> <span class="token string">'1345'</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token keyword">print</span><span class="token punctuation">(</span>fullmatch<span class="token punctuation">(</span><span class="token string">r'1[3-9]\d&#123;5,&#125;'</span><span class="token punctuation">,</span> <span class="token string">'131234567'</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token keyword">print</span><span class="token punctuation">(</span>fullmatch<span class="token punctuation">(</span><span class="token string">r'1[3-9\d&#123;, 3&#125;]'</span><span class="token punctuation">,</span> <span class="token string">'13123'</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre><h4 id="åˆ†ç»„"><a href="#åˆ†ç»„" class="headerlink" title="åˆ†ç»„"></a>åˆ†ç»„</h4><ul><li>æ•´ä½“æ“ä½œï¼š å°†æ­£åˆ™çš„ä¸€éƒ¨åˆ†ç”¨ï¼ˆï¼‰åŒ…è£¹èµ·æ¥è¡¨ç¤ºä¸€ä¸ªåˆ†ç»„ï¼Œç„¶åæ•´ä½“æ§åˆ¶æ¬¡æ•°</li><li>é‡å¤åŒ¹é…ç»“æœï¼š åœ¨æ­£åˆ™ä¸­ç”¨ï¼ˆï¼‰æ·»åŠ åˆ†ç»„ï¼Œç„¶ååœ¨æ­£åˆ™ç”¨\Mæ¥é‡å¤ä»–å‰é¢ç¬¬Måˆ†åˆ†ç»„çš„åŒ¹é…ç»“æœ</li><li>æ•è·ï¼šfindallå‡½æ•°åœ¨æ­£åˆ™è¡¨è¾¾å¼ä¸­æœ‰åˆ†ç»„çš„æ—¶å€™ï¼Œå€¼è·å–åˆ†ç»„åŒ¹é…åˆ°çš„ç»“æœ</li></ul><h4 id="è´ªå©ªåŒ¹é…å’Œéè´ªå©ªåŒ¹é…"><a href="#è´ªå©ªåŒ¹é…å’Œéè´ªå©ªåŒ¹é…" class="headerlink" title="è´ªå©ªåŒ¹é…å’Œéè´ªå©ªåŒ¹é…"></a>è´ªå©ªåŒ¹é…å’Œéè´ªå©ªåŒ¹é…</h4><ul><li><p>åœ¨åŒ¹é…æ¬¡æ•°ä¸ç¡®å®šçš„æ—¶å€™ï¼ŒåŒ¹é…æ¬¡æ•°æœ‰è´ªå©ªå’Œéè´ªå©ªä¸¤ç§æ¨¡å¼</p></li><li><p>è´ªå©ªæ¨¡å¼ï¼šå¦‚æœå¤šç§åŒ¹é…æ¬¡æ•°éƒ½å¯ä»¥åŒ¹é…æˆåŠŸï¼Œæœ€åå–æœ€å¤§çš„æ¬¡æ•°è¿›è¡ŒåŒ¹é… </p></li><li><p>é»˜è®¤è´ªå©ªæ¨¡å¼ï¼š*ã€ + ã€{m, n}ã€ {m, }, {, n}</p></li><li><p>éè´ªå©ªæ¨¡å¼ï¼š å¦‚æœå¤šç§åŒ¹é…æ¬¡æ•°éƒ½å¯ä»¥åŒ¹é…æˆåŠŸï¼Œæœ€åå–æœ€å°çš„æ¬¡æ•°è¿›è¡ŒåŒ¹é… </p><ul><li>*?ã€+?ã€{M,N}?ã€{M,}?ã€{,N}?</li></ul></li></ul><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token comment"># è´ªå©ª</span>print<span class="token punctuation">(</span>search<span class="token punctuation">(</span><span class="token string">'a.+b'</span>, <span class="token string">'ä¸Šè®¿æˆ·å¤§å¯Œè±ªamnbxybmnhjbæŒ‰å®é™…ç¬¦åˆsdf'</span><span class="token punctuation">))</span>      <span class="token comment"># 'amnbxyb'</span><span class="token comment"># éè´ªå©ª</span>print<span class="token punctuation">(</span>search<span class="token punctuation">(</span><span class="token string">'a.+?b'</span>, <span class="token string">'ä¸Šè®¿æˆ·å¤§å¯Œè±ªamnbxybmnhjbæŒ‰å®é™…ç¬¦åˆsdf'</span><span class="token punctuation">))</span>     <span class="token comment"># 'amnb'</span>print<span class="token punctuation">(</span>search<span class="token punctuation">(</span><span class="token string">'a.+b'</span>, <span class="token string">'ä¸Šè®¿æˆ·å¤§å¯Œè±ªaxybæŒ‰å®é™…ç¬¦åˆsdf'</span><span class="token punctuation">))</span>print<span class="token punctuation">(</span>search<span class="token punctuation">(</span><span class="token string">'a.+?b'</span>, <span class="token string">'ä¸Šè®¿æˆ·å¤§å¯Œè±ªaxybæŒ‰å®é™…ç¬¦åˆsdf'</span><span class="token punctuation">))</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h3 id="åˆ†ç»„-1"><a href="#åˆ†ç»„-1" class="headerlink" title="åˆ†ç»„"></a>åˆ†ç»„</h3><ul><li><p>æ•´ä½“æ“ä½œï¼šå°†æ­£åˆ™çš„ä¸€éƒ¨åˆ†ç”¨()æ‹¬èµ·æ¥è¡¨ç¤ºä¸€ä¸ªåˆ†ç»„ï¼Œç„¶åæ•´ä½“æ§åˆ¶æ¬¡æ•°</p></li><li><p>é‡å¤åŒ¹é…ç»“æœ: åœ¨æ­£åˆ™ä¸­ç”¨()æ·»åŠ åˆ†ç»„ï¼Œç„¶ååœ¨æ­£åˆ™ç”¨ \M æ¥é‡å¤å®ƒå‰é¢ç¬¬Mä¸ªåˆ†ç»„çš„åŒ¹é…ç»“æœ</p></li><li><p>æ•è·ï¼šfindallå‡½æ•°åœ¨æ­£åˆ™è¡¨è¾¾å¼ä¸­æœ‰åˆ†ç»„çš„æ—¶å€™ï¼Œåªè·å–åˆ†ç»„åŒ¹é…åˆ°çš„ç»“æœ</p></li></ul><pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token comment"># 1ï¼‰ æ•´ä½“æ“ä½œ</span><span class="token keyword">print</span><span class="token punctuation">(</span>fullmatch<span class="token punctuation">(</span><span class="token string">r'([a-z]&#123;2&#125;\d&#123;2&#125;)+'</span><span class="token punctuation">,</span> <span class="token string">'an23an23km78an23an23'</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token keyword">print</span><span class="token punctuation">(</span>fullmatch<span class="token punctuation">(</span><span class="token string">r'(ab)&#123;3&#125;'</span><span class="token punctuation">,</span> <span class="token string">'ababab'</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token comment"># 2)é‡å¤åŒ¹é…ç»“æœ</span><span class="token comment"># abc263mn263ã€abc009mn009</span><span class="token keyword">print</span><span class="token punctuation">(</span>fullmatch<span class="token punctuation">(</span><span class="token string">r'abc(\d&#123;3&#125;)mn\1'</span><span class="token punctuation">,</span> <span class="token string">'abc800mn800'</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token keyword">print</span><span class="token punctuation">(</span>fullmatch<span class="token punctuation">(</span><span class="token string">r'abc(\d&#123;3&#125;)mn\1'</span><span class="token punctuation">,</span> <span class="token string">'abc800mn801'</span><span class="token punctuation">)</span><span class="token punctuation">)</span>      <span class="token comment"># None</span><span class="token comment"># am622-622amã€mk293-293mk</span><span class="token keyword">print</span><span class="token punctuation">(</span>fullmatch<span class="token punctuation">(</span><span class="token string">r'([a-z]&#123;2&#125;)(\d&#123;3&#125;)-\2\1'</span><span class="token punctuation">,</span> <span class="token string">'mk293-293mk'</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token comment"># 3)æ•è·</span>str1 <span class="token operator">=</span> <span class="token string">'å¤§å§å¤«237æ”¶åˆ°w82hjjk===23sjs923.s,æ•°æ®ssd282'</span>result <span class="token operator">=</span> findall<span class="token punctuation">(</span><span class="token string">r'\d+'</span><span class="token punctuation">,</span> str1<span class="token punctuation">)</span><span class="token keyword">print</span><span class="token punctuation">(</span>result<span class="token punctuation">)</span>       <span class="token comment"># ['237', '82', '23', '923', '282']</span>result <span class="token operator">=</span> findall<span class="token punctuation">(</span><span class="token string">r'[a-zA-Z]\d+'</span><span class="token punctuation">,</span> str1<span class="token punctuation">)</span><span class="token keyword">print</span><span class="token punctuation">(</span>result<span class="token punctuation">)</span>       <span class="token comment"># ['w82', 's923', 'd282']</span>result <span class="token operator">=</span> findall<span class="token punctuation">(</span><span class="token string">r'[a-zA-Z](\d+)'</span><span class="token punctuation">,</span> str1<span class="token punctuation">)</span><span class="token keyword">print</span><span class="token punctuation">(</span>result<span class="token punctuation">)</span>       <span class="token comment"># ['82', '923', '282']</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h3 id="åˆ†æ”¯"><a href="#åˆ†æ”¯" class="headerlink" title="åˆ†æ”¯"></a>åˆ†æ”¯</h3><ul><li>æ­£åˆ™1|æ­£åˆ™2|æ­£åˆ™3</li><li>æ³¨æ„ï¼šå¦‚æœæ˜¯æ­£åˆ™çš„éƒ¨åˆ†è¦è¿›è¡Œåˆ†æ”¯é€‰æ‹©ï¼Œéœ€è¦å°†éƒ¨åˆ†åˆ†æ”¯åœ°æ–¹åŠ ()</li></ul><pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token comment"># abc12ã€abcMKã€abc29ã€abcTY</span><span class="token keyword">print</span><span class="token punctuation">(</span>fullmatch<span class="token punctuation">(</span><span class="token string">r'abc\d&#123;2&#125;|abc[A-Z]&#123;2&#125;'</span><span class="token punctuation">,</span> <span class="token string">'abc89'</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token keyword">print</span><span class="token punctuation">(</span>fullmatch<span class="token punctuation">(</span><span class="token string">r'abc(\d&#123;2&#125;|[A-Z]&#123;2&#125;)'</span><span class="token punctuation">,</span> <span class="token string">'abcKS'</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre><h3 id="æ£€æµ‹ç±»ç¬¦å·"><a href="#æ£€æµ‹ç±»ç¬¦å·" class="headerlink" title="æ£€æµ‹ç±»ç¬¦å·"></a>æ£€æµ‹ç±»ç¬¦å·</h3><h4 id="å•è¯è¾¹ç•Œ-b"><a href="#å•è¯è¾¹ç•Œ-b" class="headerlink" title="å•è¯è¾¹ç•Œ\b"></a>å•è¯è¾¹ç•Œ\b</h4><h4 id="å­—ç¬¦ä¸²å¼€å¤´"><a href="#å­—ç¬¦ä¸²å¼€å¤´" class="headerlink" title="å­—ç¬¦ä¸²å¼€å¤´^"></a>å­—ç¬¦ä¸²å¼€å¤´^</h4><h4 id="å­—ç¬¦ä¸²ç»“å°¾"><a href="#å­—ç¬¦ä¸²ç»“å°¾" class="headerlink" title="å­—ç¬¦ä¸²ç»“å°¾$"></a>å­—ç¬¦ä¸²ç»“å°¾$</h4><h1 id="reæ¨¡å—-1"><a href="#reæ¨¡å—-1" class="headerlink" title="reæ¨¡å—"></a>reæ¨¡å—</h1><ul><li>fullmatch(æ­£åˆ™, å­—ç¬¦ä¸²) - å®Œå…¨åŒ¹é…ï¼›åˆ¤æ–­æ•´ä¸ªå­—ç¬¦ä¸²æ˜¯å¦æ­£åˆ™æè¿°çš„è§„åˆ™ï¼Œå¦‚æœä¸æ»¡è¶³ç»“æœæ˜¯Noneï¼Œæ»¡è¶³è¿”å›åŒ¹é…å¯¹è±¡</li><li>match(æ­£åˆ™, å­—ç¬¦ä¸²) - åŒ¹é…å­—ç¬¦ä¸²å¼€å¤´;å¦‚æœä¸åŒ¹é…è¿”å›Noneï¼Œå¦åˆ™è¿”å›åŒ¹é…å¯¹è±¡</li><li>search(æ­£åˆ™, å­—ç¬¦ä¸²) - åœ¨æ•´ä¸ªå­—ç¬¦ä¸²ä¸­æŸ¥æ‰¾ç¬¬ä¸€ä¸ªæ»¡è¶³æ­£åˆ™è¡¨è¾¾å¼çš„å­ä¸²,å¦‚æœæ‰¾ä¸åˆ°è¿”å›None,å¦åˆ™è¿”å›åŒ¹é…å¯¹è±¡</li><li>findall(æ­£åˆ™, å­—ç¬¦ä¸²) - è·å–æ•´ä¸ªå­—ç¬¦ä¸²ä¸­æ‰€æœ‰æ»¡è¶³æ­£åˆ™çš„å­ä¸²ï¼Œè¿”å›ä¸€ä¸ªåˆ—è¡¨ (æ³¨æ„åˆ†ç»„é—®é¢˜)</li><li>finditer(æ­£åˆ™ï¼Œ å­—ç¬¦ä¸²) - è·å–æ•´ä¸ªå­—ç¬¦ä¸²ä¸­æ‰€æœ‰æ»¡è¶³æ­£åˆ™çš„å­ä¸²ï¼Œè¿”å›ä¸€ä¸ªè¿­ä»£å™¨ï¼Œè¿­ä»£å™¨ä¸­çš„å…ƒç´ æ˜¯åŒ¹é…å¯¹è±¡</li><li>sub(æ­£åˆ™, å­—ç¬¦ä¸²1ï¼Œ å­—ç¬¦ä¸²2) - å°†å­—ç¬¦ä¸²2ä¸­æ‰€æœ‰æ»¡è¶³æ­£åˆ™çš„å­—ä¸²å…¨éƒ¨æ›¿æ¢æˆå­—ç¬¦ä¸²1</li><li>split(æ­£åˆ™, å­—ç¬¦ä¸²) - å°†å­—ç¬¦ä¸²ä¸­æ‰€æœ‰æ»¡è¶³æ­£åˆ™çš„å­ä¸²ä½œä¸ºåˆ‡å‰²ç‚¹å¯¹å­—ç¬¦ä¸²è¿›è¡Œåˆ‡å‰²</li></ul><pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token keyword">print</span><span class="token punctuation">(</span>fullmatch<span class="token punctuation">(</span><span class="token string">r'\d&#123;3&#125;'</span><span class="token punctuation">,</span> <span class="token string">'123'</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token keyword">print</span><span class="token punctuation">(</span><span class="token keyword">match</span><span class="token punctuation">(</span><span class="token string">r'\d&#123;3&#125;'</span><span class="token punctuation">,</span> <span class="token string">'123é˜¿è¨å¾·å‘234234asfas'</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token keyword">print</span><span class="token punctuation">(</span>search<span class="token punctuation">(</span><span class="token string">r'\d&#123;3&#125;'</span><span class="token punctuation">,</span> <span class="token string">'é˜¿è¨892å¾·å‘208asf1023as'</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token keyword">print</span><span class="token punctuation">(</span>findall<span class="token punctuation">(</span><span class="token string">r'\d&#123;3&#125;'</span><span class="token punctuation">,</span> <span class="token string">'é˜¿è¨892å¾·å‘208asf1023as'</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token keyword">print</span><span class="token punctuation">(</span>findall<span class="token punctuation">(</span><span class="token string">r'[a-z](\d&#123;3&#125;)'</span><span class="token punctuation">,</span> <span class="token string">'é˜¿è¨892å¾·å‘208asf1023as'</span><span class="token punctuation">)</span><span class="token punctuation">)</span>str1 <span class="token operator">=</span> <span class="token string">'how are you? i am fine! thank you! and you?'</span>result <span class="token operator">=</span> str1<span class="token punctuation">.</span>replace<span class="token punctuation">(</span><span class="token string">'you'</span><span class="token punctuation">,</span> <span class="token string">'me'</span><span class="token punctuation">)</span><span class="token keyword">print</span><span class="token punctuation">(</span>result<span class="token punctuation">)</span>result <span class="token operator">=</span> sub<span class="token punctuation">(</span><span class="token string">r'you|i'</span><span class="token punctuation">,</span> <span class="token string">'me'</span><span class="token punctuation">,</span> str1<span class="token punctuation">)</span><span class="token keyword">print</span><span class="token punctuation">(</span>result<span class="token punctuation">)</span>str1 <span class="token operator">=</span> <span class="token string">'é˜¿è¨892å¾·å‘208asf1023as'</span>result <span class="token operator">=</span> sub<span class="token punctuation">(</span><span class="token string">r'\d'</span><span class="token punctuation">,</span> <span class="token string">'*'</span><span class="token punctuation">,</span> str1<span class="token punctuation">)</span><span class="token keyword">print</span><span class="token punctuation">(</span>result<span class="token punctuation">)</span>str1 <span class="token operator">=</span> <span class="token string">'how are you? i am fine! thank you! and you?'</span><span class="token keyword">print</span><span class="token punctuation">(</span>str1<span class="token punctuation">.</span>split<span class="token punctuation">(</span><span class="token string">'you'</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token keyword">print</span><span class="token punctuation">(</span>split<span class="token punctuation">(</span><span class="token string">r'you'</span><span class="token punctuation">,</span> str1<span class="token punctuation">)</span><span class="token punctuation">)</span>str1 <span class="token operator">=</span> <span class="token string">'hsj+23g-shdf-ahsf-æ°´ç”µè´¹+234'</span><span class="token keyword">print</span><span class="token punctuation">(</span>split<span class="token punctuation">(</span><span class="token string">r'[+-]'</span><span class="token punctuation">,</span> str1<span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h1 id="ç»ƒä¹ "><a href="#ç»ƒä¹ " class="headerlink" title="ç»ƒä¹ "></a>ç»ƒä¹ </h1><h2 id="ç”¨æˆ·ååŒ¹é…"><a href="#ç”¨æˆ·ååŒ¹é…" class="headerlink" title="ç”¨æˆ·ååŒ¹é…"></a>ç”¨æˆ·ååŒ¹é…</h2><ul><li>è¦æ±‚ï¼š ç”¨æˆ·ååªèƒ½åŒ…å¥½æ•°å­—å­—æ¯ä¸‹åˆ’çº¿</li><li>ä¸èƒ½ä»¥æ•°å­—å¼€å¤´</li><li>é•¿åº¦åœ¨6-16ä½</li></ul><pre class="line-numbers language-python" data-language="python"><code class="language-python">fullmatch<span class="token punctuation">(</span><span class="token string">r'[a-zA-Z_][\da-zA-Z_]&#123;5, 15&#125;'</span><span class="token punctuation">,</span><span class="token string">''</span>we_are_family9339<span class="token string">')'</span> <span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><h2 id="å¯†ç åŒ¹é…"><a href="#å¯†ç åŒ¹é…" class="headerlink" title="å¯†ç åŒ¹é…"></a>å¯†ç åŒ¹é…</h2><ul><li>ä¸èƒ½åŒ…å«!@#Â¥%^&amp;*è¿™äº›ç‰¹æ®Šç¬¦å· </li><li>å¿…é¡»ä»¥å­—æ¯å¼€å¤´ </li><li>â»“åº¦åœ¨ 6 åˆ° 12 ä½èŒƒå›´å†…</li></ul><pre class="line-numbers language-python" data-language="python"><code class="language-python">fullmatch<span class="token punctuation">(</span><span class="token string">r'[a-zA-Z][^!@#Â¥%^&amp;*]&#123;5, 11&#125;'</span><span class="token punctuation">,</span> <span class="token string">'s123!56'</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><h2 id="ipv4-æ ¼å¼çš„-ip-åœ°å€åŒ¹é…"><a href="#ipv4-æ ¼å¼çš„-ip-åœ°å€åŒ¹é…" class="headerlink" title="ipv4 æ ¼å¼çš„ ip åœ°å€åŒ¹é…"></a>ipv4 æ ¼å¼çš„ ip åœ°å€åŒ¹é…</h2><ul><li>IPåœ°å€çš„èŒƒå›´æ˜¯ 0.0.0.0 - 255.255.255.255</li></ul><pre class="line-numbers language-python" data-language="python"><code class="language-python">fullmatch<span class="token punctuation">(</span><span class="token string">r'(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5]\.)&#123;3&#125;\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5]'</span><span class="token punctuation">,</span> <span class="token string">''</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><h2 id="æå–ç”¨æˆ·è¾“å…¥æ•°æ®ä¸­çš„æ•°å€¼"><a href="#æå–ç”¨æˆ·è¾“å…¥æ•°æ®ä¸­çš„æ•°å€¼" class="headerlink" title="æå–ç”¨æˆ·è¾“å…¥æ•°æ®ä¸­çš„æ•°å€¼"></a>æå–ç”¨æˆ·è¾“å…¥æ•°æ®ä¸­çš„æ•°å€¼</h2><ul><li>æ•°å€¼åŒ…æ‹¬æ­£è´Ÿæ•° è¿˜åŒ…æ‹¬æ•´æ•°å’Œå°æ•°åœ¨å†… </li><li>æ±‚å’Œ</li></ul><pre class="line-numbers language-python" data-language="python"><code class="language-python">str1 <span class="token operator">=</span> <span class="token string">'-3.14good87nice19bye'</span>result <span class="token operator">=</span> findall<span class="token punctuation">(</span><span class="token string">r'[+-\d]\d*[.]\d*?'</span><span class="token punctuation">,</span> str1<span class="token punctuation">)</span>num <span class="token operator">=</span> <span class="token number">0</span><span class="token keyword">for</span> ret <span class="token keyword">in</span> result<span class="token punctuation">:</span> num <span class="token operator">+=</span> ret<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h2 id="éªŒè¯è¾“å…¥å†…å®¹åªèƒ½æ˜¯æ±‰å­—"><a href="#éªŒè¯è¾“å…¥å†…å®¹åªèƒ½æ˜¯æ±‰å­—" class="headerlink" title="éªŒè¯è¾“å…¥å†…å®¹åªèƒ½æ˜¯æ±‰å­—"></a>éªŒè¯è¾“å…¥å†…å®¹åªèƒ½æ˜¯æ±‰å­—</h2><pre class="line-numbers language-python" data-language="python"><code class="language-python">fullmatch<span class="token punctuation">(</span><span class="token string">r'[\u4e00-\u9fa5]+'</span><span class="token punctuation">,</span> <span class="token string">'æµ‹è¯•'</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><h2 id="åŒ¹é…æ•´æ•°æˆ–è€…å°æ•°"><a href="#åŒ¹é…æ•´æ•°æˆ–è€…å°æ•°" class="headerlink" title="åŒ¹é…æ•´æ•°æˆ–è€…å°æ•°"></a>åŒ¹é…æ•´æ•°æˆ–è€…å°æ•°</h2><pre class="line-numbers language-python" data-language="python"><code class="language-python">fullmatch<span class="token punctuation">(</span><span class="token string">r'[+-]?\d*[.]?\d*'</span><span class="token punctuation">,</span> <span class="token string">'0'</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><h2 id="éªŒè¯ç”¨æˆ·åå’Œqqå·æ˜¯å¦æœ‰æ•ˆï¼Œå¹¶ç»™å‡ºå¯¹åº”çš„æç¤º"><a href="#éªŒè¯ç”¨æˆ·åå’Œqqå·æ˜¯å¦æœ‰æ•ˆï¼Œå¹¶ç»™å‡ºå¯¹åº”çš„æç¤º" class="headerlink" title="éªŒè¯ç”¨æˆ·åå’Œqqå·æ˜¯å¦æœ‰æ•ˆï¼Œå¹¶ç»™å‡ºå¯¹åº”çš„æç¤º"></a>éªŒè¯ç”¨æˆ·åå’Œqqå·æ˜¯å¦æœ‰æ•ˆï¼Œå¹¶ç»™å‡ºå¯¹åº”çš„æç¤º</h2><ul><li>ç”¨æˆ·åå¿…é¡»ç”±å­—æ¯ã€æ•°å­—æˆ–ä¸‹åˆ’çº¿æ„æˆä¸”é•¿åº¦åœ¨6~20ä¸ªå­—ç¬¦ä¹‹é—´</li><li>QQå·æ˜¯5~12çš„æ•°å­—ä¸”é¦–ä½ä¸èƒ½ä¸º0</li></ul><pre class="line-numbers language-python" data-language="python"><code class="language-python">username <span class="token operator">=</span> <span class="token builtin">input</span><span class="token punctuation">(</span><span class="token string">'è¯·è¾“å…¥ç”¨æˆ·å'</span><span class="token punctuation">)</span>qq <span class="token operator">=</span> <span class="token builtin">input</span><span class="token punctuation">(</span><span class="token string">'è¯·è¾“å…¥qqå·ç '</span><span class="token punctuation">)</span>fullmatch<span class="token punctuation">(</span><span class="token string">r'[a-zA-Z\d_]&#123;6, 20&#125;'</span><span class="token punctuation">,</span> username<span class="token punctuation">)</span>fullmatch<span class="token punctuation">(</span><span class="token string">r'[1-9]\d&#123;4, 11&#125;'</span><span class="token punctuation">,</span> qq<span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre><h2 id="æå–ä¸€é¦–è¯—ä¸­çš„æ¯ä¸€å¥è¯"><a href="#æå–ä¸€é¦–è¯—ä¸­çš„æ¯ä¸€å¥è¯" class="headerlink" title="æå–ä¸€é¦–è¯—ä¸­çš„æ¯ä¸€å¥è¯"></a>æå–ä¸€é¦–è¯—ä¸­çš„æ¯ä¸€å¥è¯</h2><pre class="line-numbers language-none"><code class="language-none">poem &#x3D; &#39;çª—å‰æ˜æœˆå…‰ï¼Œç–‘æ˜¯åœ°ä¸Šéœœã€‚ä¸¾å¤´æœ›æ˜æœˆï¼Œä½å¤´æ€æ•…ä¹¡ã€‚&#39;result &#x3D; split(r&#39;[,ã€‚]&#39;,poem)<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre><h2 id="dï¼Œ-Wï¼Œ-sï¼Œ-Bï¼Œ-ï¼Œ-ï¼Œ-ï¼Œ-åˆ†åˆ«æ˜¯ä»€ä¹ˆ"><a href="#dï¼Œ-Wï¼Œ-sï¼Œ-Bï¼Œ-ï¼Œ-ï¼Œ-ï¼Œ-åˆ†åˆ«æ˜¯ä»€ä¹ˆ" class="headerlink" title="\dï¼Œ\Wï¼Œ\sï¼Œ\Bï¼Œ.ï¼Œ*ï¼Œ+ï¼Œ?åˆ†åˆ«æ˜¯ä»€ä¹ˆ"></a>\dï¼Œ\Wï¼Œ\sï¼Œ\Bï¼Œ.ï¼Œ*ï¼Œ+ï¼Œ?åˆ†åˆ«æ˜¯ä»€ä¹ˆ</h2><ul><li><p>\d è¡¨ç¤ºåŒ¹é…æ•°å­—</p></li><li><p>\w ç”¨äºåŒ¹é…å­—æ¯ï¼Œæ•°å­—æˆ–ä¸‹åˆ’çº¿å­—ç¬¦ </p></li><li><p>\W ç”¨äºåŒ¹é…æ‰€æœ‰ä¸\wä¸åŒ¹é…çš„å­—ç¬¦ </p></li><li><p>\s åŒ¹é…ç©ºæ ¼ç¬¦</p></li><li><p>\B è¡¨ç¤ºåœ¨å¼€å¤´ç»“å°¾ä¹‹é—´</p></li><li><p>. è¡¨ç¤ºåŒ¹é…ä»»æ„ä¸€ä¸ªå­—ç¬¦</p></li><li><p>*è¡¨ç¤ºå‡ºç°ä»»æ„å¤šæ¬¡</p></li><li><p>+è¡¨ç¤ºè‡³å°‘å‡ºç°ä¸€æ¬¡</p></li><li><p>ï¼Ÿè¡¨ç¤ºæœ€å¤šå‡ºç°ä¸€æ¬¡</p></li></ul><h2 id="x3D-a-ï¼Œ-lt-a-ï¼Œ-lt-x3D-a-ï¼Œ-a-åˆ†åˆ«æ˜¯ä»€ä¹ˆ"><a href="#x3D-a-ï¼Œ-lt-a-ï¼Œ-lt-x3D-a-ï¼Œ-a-åˆ†åˆ«æ˜¯ä»€ä¹ˆ" class="headerlink" title="(?&#x3D;a)ï¼Œ(?&lt;!a)ï¼Œ(?&lt;&#x3D;a)ï¼Œ(?!a)åˆ†åˆ«æ˜¯ä»€ä¹ˆ"></a>(?&#x3D;a)ï¼Œ(?&lt;!a)ï¼Œ(?&lt;&#x3D;a)ï¼Œ(?!a)åˆ†åˆ«æ˜¯ä»€ä¹ˆ</h2><ul><li>(?&#x3D;a) é›¶å®½æ­£å‘å…ˆè¡Œæ–­è¨€    è¯¥æ­£åˆ™åŒ¹é…æŸå­—ç¬¦å‰é¢çš„ä½ç½®ã€‚ </li><li>(?!a)é›¶å®½è´Ÿå‘å…ˆè¡Œæ–­è¨€     ä¸ä¸Šé¢çš„(?!a)ç›¸åï¼Œè¿™ä¸ªè¡¨è¾¾å¼åŒ¹é…åé¢æ²¡æœ‰aå­—ç¬¦çš„ä½ç½® </li><li>(?&lt;&#x3D;a)é›¶å®½æ­£å‘åè¡Œæ–­è¨€   ä¸(?&#x3D;a)ä½ç½®ç›¸åï¼ŒåŒ¹é…aå­—ç¬¦åé¢çš„ä½ç½® </li><li>(?&lt;!a)é›¶å®½è´Ÿå‘åè¡Œæ–­è¨€    ä¸(?!a)ä½ç½®ç›¸åï¼ŒåŒ¹é…å‰é¢æ²¡æœ‰aå­—ç¬¦çš„ä½ç½®</li></ul><h2 id="ä»€ä¹ˆæ˜¯è´ªå©ªåŒ¹é…å’Œæ‡’æƒ°åŒ¹é…"><a href="#ä»€ä¹ˆæ˜¯è´ªå©ªåŒ¹é…å’Œæ‡’æƒ°åŒ¹é…" class="headerlink" title="ä»€ä¹ˆæ˜¯è´ªå©ªåŒ¹é…å’Œæ‡’æƒ°åŒ¹é…"></a>ä»€ä¹ˆæ˜¯è´ªå©ªåŒ¹é…å’Œæ‡’æƒ°åŒ¹é…</h2><ul><li>è´ªå©ªåŒ¹é…  å¦‚æœå¤šç§åŒ¹é…æ¬¡æ•°éƒ½å¯ä»¥åŒ¹é…æˆåŠŸï¼Œæœ€åå–æœ€å¤§çš„æ¬¡æ•°è¿›è¡ŒåŒ¹é…</li><li>æ‡’æƒ°åŒ¹é…  å¦‚æœå¤šç§åŒ¹é…æ¬¡æ•°éƒ½å¯ä»¥åŒ¹é…æˆåŠŸï¼Œæœ€åå–æœ€å°çš„æ¬¡æ•°è¿›è¡ŒåŒ¹é…</li></ul><h2 id="d-1-2-è¿™æ ·çš„å†™æ³•å¯¹å—ï¼Ÿè¯·è¯´æ˜ç†ç”±"><a href="#d-1-2-è¿™æ ·çš„å†™æ³•å¯¹å—ï¼Ÿè¯·è¯´æ˜ç†ç”±" class="headerlink" title="\d{1,2}*è¿™æ ·çš„å†™æ³•å¯¹å—ï¼Ÿè¯·è¯´æ˜ç†ç”±"></a>\d{1,2}*è¿™æ ·çš„å†™æ³•å¯¹å—ï¼Ÿè¯·è¯´æ˜ç†ç”±</h2><p> <code>ä¸æ­£ç¡®ï¼Œè¿™æ˜¯å› ä¸ºæ‰€æœ‰é™å®šç±»å…ƒå­—ç¬¦ååªèƒ½ç´§è·Ÿ?è¿™ä¸ªé™å®šç±»å…ƒå­—ç¬¦ï¼Œå¦‚æœ``ç´§è·Ÿå…¶ä»–é™å®šç±»å…ƒå­—ç¬¦åˆ™ä¼šæŠ¥é”™ã€‚æ­£ç¡®çš„å†™æ³•æ˜¯(\d&#123;1,2&#125;)*</code> </p><h2 id="å†™å‡ºéªŒè¯ç”¨æˆ·åçš„æ­£åˆ™è¡¨è¾¾å¼ï¼Œç”¨æˆ·ååªèƒ½è¾“å…¥è‹±æ–‡ã€æ•°å­—å’Œä¸‹åˆ’çº¿ã€‚"><a href="#å†™å‡ºéªŒè¯ç”¨æˆ·åçš„æ­£åˆ™è¡¨è¾¾å¼ï¼Œç”¨æˆ·ååªèƒ½è¾“å…¥è‹±æ–‡ã€æ•°å­—å’Œä¸‹åˆ’çº¿ã€‚" class="headerlink" title="å†™å‡ºéªŒè¯ç”¨æˆ·åçš„æ­£åˆ™è¡¨è¾¾å¼ï¼Œç”¨æˆ·ååªèƒ½è¾“å…¥è‹±æ–‡ã€æ•°å­—å’Œä¸‹åˆ’çº¿ã€‚"></a>å†™å‡ºéªŒè¯ç”¨æˆ·åçš„æ­£åˆ™è¡¨è¾¾å¼ï¼Œç”¨æˆ·ååªèƒ½è¾“å…¥è‹±æ–‡ã€æ•°å­—å’Œä¸‹åˆ’çº¿ã€‚</h2><pre class="line-numbers language-none"><code class="language-none">[a-zA-Z\d_]+*     ^\w+$<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><h2 id="éªŒè¯ç”¨æˆ·å¯†ç ï¼Œé•¿åº¦åœ¨6-18-ä¹‹é—´ï¼Œåªèƒ½åŒ…å«è‹±æ–‡å’Œæ•°å­—"><a href="#éªŒè¯ç”¨æˆ·å¯†ç ï¼Œé•¿åº¦åœ¨6-18-ä¹‹é—´ï¼Œåªèƒ½åŒ…å«è‹±æ–‡å’Œæ•°å­—" class="headerlink" title="éªŒè¯ç”¨æˆ·å¯†ç ï¼Œé•¿åº¦åœ¨6~18 ä¹‹é—´ï¼Œåªèƒ½åŒ…å«è‹±æ–‡å’Œæ•°å­—"></a>éªŒè¯ç”¨æˆ·å¯†ç ï¼Œé•¿åº¦åœ¨6~18 ä¹‹é—´ï¼Œåªèƒ½åŒ…å«è‹±æ–‡å’Œæ•°å­—</h2><pre class="line-numbers language-none"><code class="language-none">^[a-zA-Z\d_]&#123;6, 18&#125;$<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><h2 id="éªŒè¯ç”¨æˆ·å¯†ç å¼ºåº¦ï¼Œæœ€å°‘6ä½ï¼Œè‡³å°‘åŒ…æ‹¬1ä¸ªå¤§å†™å­—æ¯ã€1ä¸ªå°å†™å­—æ¯ã€1ä¸ªæ•°å­—å’Œ1ä¸ªç‰¹æ®Šå­—ç¬¦"><a href="#éªŒè¯ç”¨æˆ·å¯†ç å¼ºåº¦ï¼Œæœ€å°‘6ä½ï¼Œè‡³å°‘åŒ…æ‹¬1ä¸ªå¤§å†™å­—æ¯ã€1ä¸ªå°å†™å­—æ¯ã€1ä¸ªæ•°å­—å’Œ1ä¸ªç‰¹æ®Šå­—ç¬¦" class="headerlink" title="éªŒè¯ç”¨æˆ·å¯†ç å¼ºåº¦ï¼Œæœ€å°‘6ä½ï¼Œè‡³å°‘åŒ…æ‹¬1ä¸ªå¤§å†™å­—æ¯ã€1ä¸ªå°å†™å­—æ¯ã€1ä¸ªæ•°å­—å’Œ1ä¸ªç‰¹æ®Šå­—ç¬¦"></a>éªŒè¯ç”¨æˆ·å¯†ç å¼ºåº¦ï¼Œæœ€å°‘6ä½ï¼Œè‡³å°‘åŒ…æ‹¬1ä¸ªå¤§å†™å­—æ¯ã€1ä¸ªå°å†™å­—æ¯ã€1ä¸ªæ•°å­—å’Œ1ä¸ªç‰¹æ®Šå­—ç¬¦</h2><pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token operator">^</span><span class="token punctuation">(</span>?<span class="token operator">=</span><span class="token punctuation">.</span><span class="token operator">*</span>\d<span class="token punctuation">)</span><span class="token punctuation">(</span>?<span class="token operator">=</span><span class="token punctuation">.</span><span class="token operator">*</span>\<span class="token punctuation">[</span>A<span class="token operator">-</span>Z<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">(</span>?<span class="token operator">=</span>a<span class="token operator">-</span>z<span class="token punctuation">)</span><span class="token punctuation">(</span>?<span class="token operator">=</span><span class="token punctuation">.</span><span class="token operator">*</span>\<span class="token punctuation">[</span><span class="token operator">^</span>  `!@<span class="token comment">#\$%\^&amp;\*\(\)\_\+\-\=\&#123;\&#125;\[\]\\\|\/?\.,>&lt;;:'" ]).&#123;6,&#125;$</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><h2 id="åŒ¹é…Emailåœ°å€"><a href="#åŒ¹é…Emailåœ°å€" class="headerlink" title="åŒ¹é…Emailåœ°å€"></a>åŒ¹é…Emailåœ°å€</h2><pre class="line-numbers language-none"><code class="language-none"># zhangsan-001@gmail.com[\w-]+@[\w]+\.[\w-]<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre><h2 id="åŒ¹é…yyyy-mm-ddæ ¼å¼çš„æ—¥æœŸ"><a href="#åŒ¹é…yyyy-mm-ddæ ¼å¼çš„æ—¥æœŸ" class="headerlink" title="åŒ¹é…yyyy-mm-ddæ ¼å¼çš„æ—¥æœŸ"></a>åŒ¹é…yyyy-mm-ddæ ¼å¼çš„æ—¥æœŸ</h2><pre class="line-numbers language-none"><code class="language-none">^[\d]&#123;4&#125;-(0[1-9]|1[1-2)-(0[1-9]|1[0-9]|2[0-9]|3[0-1]$)<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><h2 id="ç”¨æ­£åˆ™è¡¨è¾¾å¼åŒ¹é…å‡ºèº«ä»½è¯å·ä¸­çš„å‡ºç”Ÿæ—¥æœŸ"><a href="#ç”¨æ­£åˆ™è¡¨è¾¾å¼åŒ¹é…å‡ºèº«ä»½è¯å·ä¸­çš„å‡ºç”Ÿæ—¥æœŸ" class="headerlink" title="ç”¨æ­£åˆ™è¡¨è¾¾å¼åŒ¹é…å‡ºèº«ä»½è¯å·ä¸­çš„å‡ºç”Ÿæ—¥æœŸ"></a>ç”¨æ­£åˆ™è¡¨è¾¾å¼åŒ¹é…å‡ºèº«ä»½è¯å·ä¸­çš„å‡ºç”Ÿæ—¥æœŸ</h2><pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token keyword">import</span> reresult <span class="token operator">=</span> re<span class="token punctuation">.</span>search<span class="token punctuation">(</span><span class="token string">r'\d&#123;6&#125;(\d&#123;4&#125;)(\d&#123;2&#125;)(\d&#123;2&#125;)\d&#123;4&#125;'</span><span class="token punctuation">,</span> <span class="token string">'640521199307212518'</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre><h2 id="åŒ¹é…-lt-a-lt-123-gt-lt-456-gt-a-gt-ä¸­çš„æ•°å­—"><a href="#åŒ¹é…-lt-a-lt-123-gt-lt-456-gt-a-gt-ä¸­çš„æ•°å­—" class="headerlink" title="åŒ¹é…&lt;a &lt;123&gt; &lt;456&gt; a&gt;ä¸­çš„æ•°å­—"></a>åŒ¹é…&lt;a &lt;123&gt; &lt;456&gt; a&gt;ä¸­çš„æ•°å­—</h2><pre class="line-numbers language-none"><code class="language-none">str1 &#x3D; &#39;&lt;a &lt;123&gt; &lt;456&gt; a&gt;&#39;result &#x3D; re.findall(r&#39;(?&lt;&#x3D;&lt;)\d+(?&#x3D;&gt;)&#39;, str1)print(result)             <span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre><h2 id="åŒ¹é…ä»¥ä¸‹HTMLä¸­çš„URL"><a href="#åŒ¹é…ä»¥ä¸‹HTMLä¸­çš„URL" class="headerlink" title="åŒ¹é…ä»¥ä¸‹HTMLä¸­çš„URL"></a>åŒ¹é…ä»¥ä¸‹HTMLä¸­çš„URL</h2><pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token keyword">import</span> restr1  <span class="token operator">=</span> <span class="token string">"&lt;link rel=â€œsearchâ€ href=â€œhttps://www.baidu.comâ€ />(?&lt;=href=\s?â€œ).*?(?=â€\s?/>)"</span>result <span class="token operator">=</span> re<span class="token punctuation">.</span>findall<span class="token punctuation">(</span><span class="token string">r'(?&lt;=href=â€œ).*(?=â€ />)'</span><span class="token punctuation">,</span> str1<span class="token punctuation">)</span><span class="token keyword">print</span><span class="token punctuation">(</span>result<span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre><h2 id="åŒ¹é…ä»¥-comç»“å°¾çš„webåŸŸå"><a href="#åŒ¹é…ä»¥-comç»“å°¾çš„webåŸŸå" class="headerlink" title="åŒ¹é…ä»¥.comç»“å°¾çš„webåŸŸå"></a>åŒ¹é…ä»¥.comç»“å°¾çš„webåŸŸå</h2><p>Â·</p>]]></content>
      
      
      <categories>
          
          <category> python </category>
          
      </categories>
      
      
        <tags>
            
            <tag> æ­£åˆ™è¡¨è¾¾å¼ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>goåŸºç¡€</title>
      <link href="/posts/65207.html"/>
      <url>/posts/65207.html</url>
      
        <content type="html"><![CDATA[<h1 id="goè¯­è¨€å®‰è£…å’Œä»‹ç»"><a href="#goè¯­è¨€å®‰è£…å’Œä»‹ç»" class="headerlink" title="goè¯­è¨€å®‰è£…å’Œä»‹ç»"></a>goè¯­è¨€å®‰è£…å’Œä»‹ç»</h1><h2 id="goè¯­è¨€ä»‹ç»"><a href="#goè¯­è¨€ä»‹ç»" class="headerlink" title="goè¯­è¨€ä»‹ç»"></a>goè¯­è¨€ä»‹ç»</h2><blockquote><p>goè¯­è¨€æ˜¯googeåœ¨2009å¹´æ­£å¼å¯¹å¤–å‘å¸ƒçš„ä¸€é—¨ç¼–ç¨‹è¯­è¨€</p><p>æ ¹æ®goå¼€å‘è€…è‡ªè¿°ï¼Œè¿‘10å¤šå¹´ï¼Œè®¡ç®—æœºä»å•æœºcè¯­è¨€æ—¶ä»£åˆ°ç°åœ¨äº’è”ç½‘æ—¶ä»£çš„javaï¼Œéƒ½æ²¡æœ‰å‡ºç°ç‰¹åˆ«ä»¤äººæ»¡æ„çš„è¯­è¨€ã€‚c++ç»™äººçš„æ„Ÿè§‰æ˜¯ï¼Œ èŠ±äº†100%çš„ç²¾åŠ›ï¼Œå´åªæœ‰60%çš„å¼€å‘æ•ˆç‡ï¼Œäº§èƒ½æ¯”å¤ªä½ï¼Œjavaå’Œc#åˆæ¥æºäºc++</p><p>éšç€ç¡¬ä»¶çš„ä¸æ–­å‡çº§ï¼Œè¿™äº›è¯­è¨€ä¸èƒ½å……åˆ†çš„åˆ©ç”¨ç¡¬ä»¶ä»¥åŠcpu</p><p>å› æ­¤ï¼Œä¸€é—¨é«˜æ•ˆã€ç®€æ´ã€å¼€æºçš„è¯­è¨€è¯ç”Ÿäº†</p><p>goè¯­è¨€ä¸ä»…æ‹¥æœ‰é™æ€ç¼–è¯‘è¯­è¨€çš„å®‰å…¨å’Œé«˜æ€§èƒ½ï¼Œè€Œåˆè¾¾åˆ°äº†åŠ¨æ€è¯­è¨€çš„å¼€å‘é€Ÿåº¦å’Œæ˜“ç»´æŠ¤æ€§</p><p>æœ‰äººå½¢å®¹ï¼šgo &#x3D; c + python</p><p>goéå¸¸æœ‰æ½œåŠ›ï¼Œç›®å‰å‡ ä¸ªç«çˆ†çš„åœºæ™¯ä¸‹éƒ½æœ‰åº”ç”¨ï¼Œæ¯”å¦‚webå¼€å‘ã€åŒºå—é“¾ã€æ¸¸æˆæœåŠ¡ç«¯å¼€å‘ã€åˆ†å¸ƒå¼&#x2F;äº‘è®¡ç®—</p></blockquote><h2 id="goè¯­è¨€è§£å†³çš„é—®é¢˜"><a href="#goè¯­è¨€è§£å†³çš„é—®é¢˜" class="headerlink" title="goè¯­è¨€è§£å†³çš„é—®é¢˜"></a>goè¯­è¨€è§£å†³çš„é—®é¢˜</h2><ul><li>å¤šæ ¸ç¡¬ä»¶ä¸‹çš„èµ„æºåˆ©ç”¨é—®é¢˜</li><li>è¶…å¤§è§„æ¨¡åˆ†å¸ƒå¼è®¡ç®—é›†ç¾¤</li><li>webå¼€å‘æ¨¡å¼å¯¼è‡´çš„å‰æ‰€æœªæœ‰çš„å¼€å‘è§„æ¨¡å’Œæ›´æ–°é€Ÿåº¦</li></ul><h2 id="winå®‰è£…goè¯­è¨€"><a href="#winå®‰è£…goè¯­è¨€" class="headerlink" title="winå®‰è£…goè¯­è¨€"></a>winå®‰è£…goè¯­è¨€</h2><h3 id="ä¸‹è½½go"><a href="#ä¸‹è½½go" class="headerlink" title="ä¸‹è½½go"></a>ä¸‹è½½go</h3><ul><li><p><a href="https://golang.org/dl/">goå®˜ç½‘ä¸‹è½½</a></p></li><li><p><a href="https://golang.google.cn/dl/">goé•œåƒç«™ä¸‹è½½</a></p><p><img src="https://zhangtq-blog.oss-cn-hangzhou.aliyuncs.com/content_picture/1667039669273.png" alt="1667039669273"></p></li></ul><h3 id="éªŒè¯å®‰è£…"><a href="#éªŒè¯å®‰è£…" class="headerlink" title="éªŒè¯å®‰è£…"></a>éªŒè¯å®‰è£…</h3><ul><li><p>go 1.11åæ— éœ€æ‰‹åŠ¨é…ç½®ç¯å¢ƒå˜é‡ï¼Œä½¿ç”¨go mod ç®¡ç†é¡¹ç›®</p></li><li><p>ä¹Ÿä¸éœ€è¦å¿…é¡»æŠŠé¡¹ç›®æ”¾åœ¨gopath ç›®å½•ä¸‹ï¼Œå¯ä»¥å†ä»»ä½•ç›®å½•ä¸‹æ–°å»ºé¡¹ç›®</p></li><li><p>go1.13ä»¥åå½»åº•ä¸éœ€è¦gopathäº†</p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">go version   <span class="token comment"># æŸ¥çœ‹ç‰ˆæœ¬</span>go <span class="token function">env</span>       <span class="token comment"># æŸ¥çœ‹ç¯å¢ƒ</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre></li></ul><h3 id="å®‰è£…ä¾èµ–åŒ…"><a href="#å®‰è£…ä¾èµ–åŒ…" class="headerlink" title="å®‰è£…ä¾èµ–åŒ…"></a>å®‰è£…ä¾èµ–åŒ…</h3><ul><li><p>è¿™é‡Œçš„æ›´æ–°ä¸æ˜¯æŒ‡ç‰ˆæœ¬çš„æ›´æ–°,è€Œæ˜¯æŒ‡å¼•å…¥æ–°ä¾èµ–ï¼Œä¸ä½¿ç”¨ go get ,æˆ‘æ€ä¹ˆåœ¨é¡¹ç›®ä¸­åŠ æ–°åŒ…å‘¢?</p></li><li><p>ç›´æ¥é¡¹ç›®ä¸­ import è¿™ä¸ªåŒ…,ä¹‹åæ›´æ–°ä¾èµ–å³å¯ä¾èµ–æ›´æ–°è¯·ä»æ£€æµ‹ä¾èµ–éƒ¨åˆ†ä¸€ç›´æ‰§è¡Œå³å¯,å³</p></li><li><p>å‚è€ƒï¼š<a href="https://blog.csdn.net/weixin_41519463/article/details/103501485">https://blog.csdn.net/weixin_41519463/article/details/103501485</a></p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">go mod init      <span class="token comment"># åˆå§‹åŒ–go.mod</span>go mod tidy      <span class="token comment"># æ›´æ–°ä¾èµ–æ–‡ä»¶</span>go mod download    <span class="token comment"># ä¸‹è½½ä¾èµ–æ–‡ä»¶</span>go mod vendor     <span class="token comment"># å°†ä¾èµ–è½¬ç§»è‡³æœ¬åœ°çš„vendoræ–‡ä»¶</span>go mod edit      <span class="token comment"># æ‰‹åŠ¨ä¿®æ”¹ä¾èµ–æ–‡ä»¶</span>go mod graph      <span class="token comment"># æ‰“å°ä¾èµ–å›¾</span>go mod verify     <span class="token comment"># æ ¡éªŒä¾èµ–</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></li></ul><h1 id="vscodeé…ç½®"><a href="#vscodeé…ç½®" class="headerlink" title="vscodeé…ç½®"></a>vscodeé…ç½®</h1><h2 id="ä¸‹è½½vscode"><a href="#ä¸‹è½½vscode" class="headerlink" title="ä¸‹è½½vscode"></a>ä¸‹è½½vscode</h2><ul><li><a href="https://code.visualstudio.com/">å®˜ç½‘</a></li></ul><h2 id="æ±‰åŒ–"><a href="#æ±‰åŒ–" class="headerlink" title="æ±‰åŒ–"></a>æ±‰åŒ–</h2><p> <img src="https://zhangtq-blog.oss-cn-hangzhou.aliyuncs.com/content_picture/image-20210513210124050.a52b64f4.png" alt="image-20210513210124050.a52b64f4"></p><h2 id="å®‰è£…goè¯­è¨€æ’ä»¶"><a href="#å®‰è£…goè¯­è¨€æ’ä»¶" class="headerlink" title="å®‰è£…goè¯­è¨€æ’ä»¶"></a>å®‰è£…goè¯­è¨€æ’ä»¶</h2><p><img src="https://zhangtq-blog.oss-cn-hangzhou.aliyuncs.com/content_picture/image-20210513210342871.8ce13397.png" alt="image-20210513210342871.8ce13397"></p><h2 id="è¿è¡Œä¸€ä¸ªç¤ºä¾‹ç¨‹åº"><a href="#è¿è¡Œä¸€ä¸ªç¤ºä¾‹ç¨‹åº" class="headerlink" title="è¿è¡Œä¸€ä¸ªç¤ºä¾‹ç¨‹åº"></a>è¿è¡Œä¸€ä¸ªç¤ºä¾‹ç¨‹åº</h2><ul><li>è¿›å…¥é¡¹ç›®ç›®å½•æ–°å»ºæ–‡ä»¶main.go</li></ul><pre class="line-numbers language-go" data-language="go"><code class="language-go"><span class="token keyword">package</span> main<span class="token comment">// å¯¼å…¥è¯­å¥</span><span class="token keyword">import</span> <span class="token string">"fmt"</span><span class="token comment">// ç¨‹åºçš„å…¥å£</span><span class="token keyword">func</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>    fmt<span class="token punctuation">.</span><span class="token function">Print</span><span class="token punctuation">(</span><span class="token string">"hello world"</span><span class="token punctuation">)</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><ul><li>æ‰“å¼€ç»ˆç«¯é€‰æ‹©cmdæˆ–è€…powershell</li><li>æ‰§è¡Œå‘½ä»¤<strong>go build hello.go</strong></li><li>ç›®å½•ä¸‹ä¼šç”Ÿæˆ hello.exe ç„¶åè¿è¡Œå‘½ä»¤<strong>hello.exe</strong>ä¼šçœ‹åˆ°å‘½ä»¤è¡Œè¾“å‡ºhello world</li></ul><h2 id="åŸºæœ¬å‘½ä»¤"><a href="#åŸºæœ¬å‘½ä»¤" class="headerlink" title="åŸºæœ¬å‘½ä»¤"></a>åŸºæœ¬å‘½ä»¤</h2><ul><li><p>go run</p><ul><li>åƒæ‰§è¡Œè„šæœ¬æ–‡ä»¶ä¸€æ ·æ‰§è¡Œgoä»£ç </li></ul></li><li><p>go install</p><ul><li><p>åˆ†ä¸ºä¸¤æ­¥ï¼š</p><ol><li><p>æ‰§è¡Œgo buildå‘½ä»¤ï¼Œç„¶</p></li><li><p>åå°†exe æ‹·è´åˆ°go pathè·¯å¾„ä¸‹ï¼Œè¿™æ ·åœ¨ç¯å¢ƒå˜é‡é‡Œå°±å¯ä»¥ç”¨äº†</p></li></ol></li></ul></li></ul><h2 id="è·¨å¹³å°ç¼–è¯‘"><a href="#è·¨å¹³å°ç¼–è¯‘" class="headerlink" title="è·¨å¹³å°ç¼–è¯‘"></a>è·¨å¹³å°ç¼–è¯‘</h2><pre class="line-numbers language-cmd" data-language="cmd"><code class="language-cmd">CGO_ENABLED&#x3D;0 GOOS&#x3D;linuxGOARCH&#x3D;amd64go build main.go<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre><h2 id="vscode-åˆ‡æ¢é»˜è®¤ç»ˆç«¯"><a href="#vscode-åˆ‡æ¢é»˜è®¤ç»ˆç«¯" class="headerlink" title="vscode åˆ‡æ¢é»˜è®¤ç»ˆç«¯"></a>vscode åˆ‡æ¢é»˜è®¤ç»ˆç«¯</h2><ul><li><p>é€‰æ‹©é»˜è®¤é…ç½®æ–‡ä»¶</p><p><img src="https://zhangtq-blog.oss-cn-hangzhou.aliyuncs.com/content_picture/image-20230316101919989.png" alt="image-20230316101919989"></p></li><li><p>é€‰æ‹©cmdé…ç½®æ–‡ä»¶</p><p><img src="https://zhangtq-blog.oss-cn-hangzhou.aliyuncs.com/content_picture/image-20230316102038271.png" alt="image-20230316102038271"></p></li></ul><h1 id="åŸºæœ¬è¯­æ³•"><a href="#åŸºæœ¬è¯­æ³•" class="headerlink" title="åŸºæœ¬è¯­æ³•"></a>åŸºæœ¬è¯­æ³•</h1><h2 id="goè¯­è¨€æ–‡ä»¶çš„åŸºæœ¬ç»“æ„"><a href="#goè¯­è¨€æ–‡ä»¶çš„åŸºæœ¬ç»“æ„" class="headerlink" title="goè¯­è¨€æ–‡ä»¶çš„åŸºæœ¬ç»“æ„"></a>goè¯­è¨€æ–‡ä»¶çš„åŸºæœ¬ç»“æ„</h2><pre class="line-numbers language-go" data-language="go"><code class="language-go"><span class="token keyword">package</span> main<span class="token comment">// å¯¼å…¥è¯­å¥</span><span class="token keyword">import</span> <span class="token string">"fmt"</span><span class="token comment">// å‡½æ•°çš„å¤–éƒ¨åªèƒ½æ˜¯æ ‡è¯†ç¬¦ï¼ˆå˜é‡ã€å¸¸é‡ã€å‡½æ•°ã€ç±»å‹ï¼‰çš„å£°æ˜</span><span class="token comment">// å‡½æ•°çš„å…¥å£</span><span class="token keyword">func</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>    <span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h2 id="å˜é‡çš„å®šä¹‰æ–¹å¼"><a href="#å˜é‡çš„å®šä¹‰æ–¹å¼" class="headerlink" title="å˜é‡çš„å®šä¹‰æ–¹å¼"></a>å˜é‡çš„å®šä¹‰æ–¹å¼</h2><h3 id="var-å£°æ˜å•ä¸ªå˜é‡"><a href="#var-å£°æ˜å•ä¸ªå˜é‡" class="headerlink" title="var å£°æ˜å•ä¸ªå˜é‡"></a>var å£°æ˜å•ä¸ªå˜é‡</h3><pre class="line-numbers language-go" data-language="go"><code class="language-go"><span class="token keyword">var</span> name <span class="token builtin">string</span><span class="token keyword">var</span> age <span class="token builtin">int</span><span class="token keyword">var</span> isOk <span class="token builtin">bool</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre><h3 id="var-æ‰¹é‡å£°æ˜å˜é‡"><a href="#var-æ‰¹é‡å£°æ˜å˜é‡" class="headerlink" title="var æ‰¹é‡å£°æ˜å˜é‡"></a>var æ‰¹é‡å£°æ˜å˜é‡</h3><pre class="line-numbers language-go" data-language="go"><code class="language-go"><span class="token keyword">package</span> main<span class="token keyword">import</span> <span class="token string">"fmt"</span><span class="token keyword">var</span> <span class="token punctuation">&#123;</span>name strigage <span class="token builtin">int</span>isOk <span class="token builtin">bool</span><span class="token punctuation">&#125;</span><span class="token keyword">var</span> S1 <span class="token builtin">string</span><span class="token operator">=</span><span class="token string">"å¼ ä¸‰"</span>  <span class="token comment">// å£°æ˜å˜é‡åŒæ—¶èµ‹å€¼</span><span class="token keyword">func</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>    name <span class="token operator">=</span> <span class="token string">"å¼ ä¸‰"</span>    age <span class="token operator">=</span> <span class="token number">16</span>    isOk <span class="token operator">=</span> <span class="token boolean">true</span>    fmt<span class="token punctuation">.</span><span class="token function">Print</span><span class="token punctuation">(</span>isOk<span class="token punctuation">)</span> <span class="token comment">// åœ¨ç»ˆç«¯ä¸­æ‰“å°å†…å®¹</span>    fmt<span class="token punctuation">.</span><span class="token function">Printf</span><span class="token punctuation">(</span><span class="token string">"name:%s"</span>ï¼Œname<span class="token punctuation">)</span> <span class="token comment">// %så ä½ç¬¦ï¼Œä½¿ç”¨nameè¿™ä¸ªå˜é‡çš„å€¼æ›¿æ¢å ä½ç¬¦</span>    fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span>age<span class="token punctuation">)</span> <span class="token comment">// æ‰“å°å®ŒæŒ‡å®šçš„å†…å®¹ä¹‹åä¼šåœ¨åé¢åŠ ä¸€ä¸ªæ¢è¡Œç¬¦</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h3 id="å£°æ˜å˜é‡åŒæ—¶èµ‹å€¼"><a href="#å£°æ˜å˜é‡åŒæ—¶èµ‹å€¼" class="headerlink" title="å£°æ˜å˜é‡åŒæ—¶èµ‹å€¼"></a>å£°æ˜å˜é‡åŒæ—¶èµ‹å€¼</h3><pre class="line-numbers language-go" data-language="go"><code class="language-go"><span class="token keyword">package</span> main<span class="token keyword">import</span> <span class="token string">"fmt"</span><span class="token keyword">var</span> <span class="token punctuation">&#123;</span>name strigage <span class="token builtin">int</span>isOk <span class="token builtin">bool</span><span class="token punctuation">&#125;</span><span class="token keyword">var</span> S1 <span class="token builtin">string</span><span class="token operator">=</span><span class="token string">"å¼ ä¸‰"</span>  <span class="token comment">// å£°æ˜å˜é‡åŒæ—¶èµ‹å€¼</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h3 id="åˆ—è¡¨æ¨å¯¼å¼å£°æ˜å˜é‡"><a href="#åˆ—è¡¨æ¨å¯¼å¼å£°æ˜å˜é‡" class="headerlink" title="åˆ—è¡¨æ¨å¯¼å¼å£°æ˜å˜é‡"></a>åˆ—è¡¨æ¨å¯¼å¼å£°æ˜å˜é‡</h3><pre class="line-numbers language-go" data-language="go"><code class="language-go"><span class="token keyword">var</span> name <span class="token operator">=</span> <span class="token string">"å¼ ä¸‰"</span><span class="token keyword">var</span> age <span class="token operator">=</span> <span class="token number">18</span><span class="token keyword">var</span> isOk <span class="token operator">=</span> <span class="token builtin">bool</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre><h3 id="å‡½æ•°å†…ä½¿ç”¨ç®€çŸ­å˜é‡"><a href="#å‡½æ•°å†…ä½¿ç”¨ç®€çŸ­å˜é‡" class="headerlink" title="å‡½æ•°å†…ä½¿ç”¨ç®€çŸ­å˜é‡"></a>å‡½æ•°å†…ä½¿ç”¨ç®€çŸ­å˜é‡</h3><pre class="line-numbers language-go" data-language="go"><code class="language-go"><span class="token comment">// åªèƒ½åœ¨å‡½æ•°é‡Œä½¿ç”¨</span><span class="token keyword">func</span> main<span class="token punctuation">&#123;</span>age <span class="token operator">:=</span> <span class="token number">18</span>name <span class="token operator">:=</span> <span class="token string">"å¼ ä¸‰"</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre><h3 id="ç®€çŸ­å˜é‡"><a href="#ç®€çŸ­å˜é‡" class="headerlink" title="ç®€çŸ­å˜é‡"></a>ç®€çŸ­å˜é‡</h3><pre class="line-numbers language-go" data-language="go"><code class="language-go"><span class="token keyword">func</span> <span class="token function">foo</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token builtin">int</span><span class="token punctuation">,</span> <span class="token builtin">string</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span><span class="token keyword">return</span> <span class="token number">10</span><span class="token punctuation">,</span> <span class="token string">"åŒ¿åå˜é‡"</span><span class="token punctuation">&#125;</span><span class="token keyword">func</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>content<span class="token punctuation">,</span> <span class="token boolean">_</span> <span class="token operator">=</span> <span class="token function">foo</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p><strong>goè¯­è¨€ä¸­å£°æ˜çš„å±€éƒ¨å˜é‡å¿…é¡»ä½¿ç”¨ï¼Œä¸ä½¿ç”¨ç¼–è¯‘ä¸è¿‡å»</strong></p><p><strong>goè¯­è¨€ä¸­å˜é‡çš„å‘½åå»ºè®®ä½¿ç”¨å°é©¼å³°</strong></p><h3 id="åŒ¿åå˜é‡"><a href="#åŒ¿åå˜é‡" class="headerlink" title="åŒ¿åå˜é‡"></a>åŒ¿åå˜é‡</h3><pre class="line-numbers language-go" data-language="go"><code class="language-go"><span class="token keyword">package</span> main<span class="token keyword">import</span> <span class="token string">"fmt"</span><span class="token comment">// å‡½æ•°å¤–é¢åªèƒ½é˜²æ­¢æ ‡è¯†ç¬¦ï¼ˆå‡½æ•°/å˜é‡/å¸¸æ•°/ç±»å‹ï¼‰çš„ç”³æ˜</span><span class="token keyword">var</span> name <span class="token builtin">string</span><span class="token keyword">var</span> age <span class="token builtin">int</span><span class="token keyword">var</span> isOk <span class="token builtin">bool</span><span class="token comment">// æ‰¹é‡ç”³æ˜ï¼Œ æ¨èä½¿ç”¨å°é©¼å³°æ–¹å¼</span><span class="token keyword">var</span> <span class="token punctuation">(</span>name1 <span class="token builtin">string</span>age2  <span class="token builtin">int</span>isOk3 <span class="token builtin">bool</span><span class="token comment">//</span><span class="token punctuation">)</span><span class="token keyword">var</span><span class="token punctuation">(</span>nums <span class="token builtin">int</span>goods <span class="token builtin">string</span><span class="token punctuation">)</span><span class="token comment">// å¸¸é‡ï¼šå¸¸é‡æ˜¯æ’å®šä¸å˜çš„é‡</span><span class="token keyword">func</span> <span class="token function">foo</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token builtin">int</span><span class="token punctuation">,</span> <span class="token builtin">string</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span><span class="token keyword">return</span> <span class="token number">10</span><span class="token punctuation">,</span> <span class="token string">"åŒ¿åå˜é‡"</span><span class="token punctuation">&#125;</span><span class="token keyword">func</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span><span class="token keyword">var</span> username<span class="token punctuation">,</span> gender <span class="token builtin">string</span>username <span class="token operator">=</span> <span class="token string">"å¼ ä¸‰"</span>gender <span class="token operator">=</span> <span class="token string">"ç”·"</span>name <span class="token operator">=</span> <span class="token string">"ç†æƒ³"</span>age <span class="token operator">=</span> <span class="token number">16</span>isOk <span class="token operator">=</span> <span class="token boolean">true</span>fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span>username<span class="token punctuation">,</span> gender<span class="token punctuation">)</span>fmt<span class="token punctuation">.</span><span class="token function">Printf</span><span class="token punctuation">(</span><span class="token string">"%d"</span><span class="token punctuation">,</span> age<span class="token punctuation">)</span><span class="token comment">// goè¯­è¨€ä¸­ç”³æ˜çš„éå…¨å±€å˜é‡å¿…é¡»ä½¿ç”¨ï¼Œä¸ä½¿ç”¨ç¼–è¯‘ä¸è¿‡å»</span>fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token punctuation">)</span>                 <span class="token comment">// æ‰“å°ä¸€å¥è¯ï¼Œé»˜è®¤æ‰“å°æ¢è¡Œ</span>fmt<span class="token punctuation">.</span><span class="token function">Printf</span><span class="token punctuation">(</span><span class="token string">"name:%s\n"</span><span class="token punctuation">,</span> name<span class="token punctuation">)</span> <span class="token comment">// ä½¿ç”¨printf %så ä½ç¬¦</span>fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span>age<span class="token punctuation">)</span>fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span>isOk<span class="token punctuation">)</span>fmt<span class="token punctuation">.</span><span class="token function">Print</span><span class="token punctuation">(</span><span class="token string">"ä½ å¥½"</span><span class="token punctuation">)</span>  <span class="token comment">// ä¸ä¼šæ¢è¡Œ</span><span class="token comment">// ç®€çŸ­å˜é‡ç”³æ˜  </span>s3 <span class="token operator">:=</span> <span class="token string">"goè¯­è¨€çœŸæ˜¯å¤ªå¥½äº†"</span>fmt<span class="token punctuation">.</span><span class="token function">Printf</span><span class="token punctuation">(</span><span class="token string">"print: %v\n"</span><span class="token punctuation">,</span> s3<span class="token punctuation">)</span><span class="token comment">// åŒ¿åå˜é‡</span><span class="token boolean">_</span><span class="token punctuation">,</span> content <span class="token operator">:=</span> <span class="token function">foo</span><span class="token punctuation">(</span><span class="token punctuation">)</span>fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span>content<span class="token punctuation">)</span><span class="token comment">// åŒä¸€ä¸ªä½œç”¨åŸŸä¸­ä¸èƒ½ç”³æ˜åŒåçš„å˜é‡</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h2 id="å¸¸é‡"><a href="#å¸¸é‡" class="headerlink" title="å¸¸é‡"></a>å¸¸é‡</h2><h3 id="å¸¸é‡çš„å®šä¹‰"><a href="#å¸¸é‡çš„å®šä¹‰" class="headerlink" title="å¸¸é‡çš„å®šä¹‰"></a>å¸¸é‡çš„å®šä¹‰</h3><ul><li>å¸¸é‡ï¼š å®šä¹‰äº†ä¹‹åä¸èƒ½ä¿®æ”¹ï¼Œ åœ¨ç¨‹åºè¿è¡ŒæœŸé—´ä¸ä¼šæ”¹å˜çš„å€¼</li></ul><h3 id="å£°æ˜å¸¸é‡"><a href="#å£°æ˜å¸¸é‡" class="headerlink" title="å£°æ˜å¸¸é‡"></a>å£°æ˜å¸¸é‡</h3><pre class="line-numbers language-go" data-language="go"><code class="language-go"><span class="token keyword">const</span><span class="token punctuation">(</span>statusOk <span class="token operator">=</span> <span class="token number">200</span>notFound <span class="token operator">=</span> <span class="token number">404</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre><h3 id="æ‰¹é‡å£°æ˜å˜é‡"><a href="#æ‰¹é‡å£°æ˜å˜é‡" class="headerlink" title="æ‰¹é‡å£°æ˜å˜é‡"></a>æ‰¹é‡å£°æ˜å˜é‡</h3><ul><li>æ‰¹é‡å£°æ˜å˜é‡æ—¶ï¼Œå¦‚æœæŸä¸€è¡Œå£°æ˜åæ²¡æœ‰èµ‹å€¼ï¼Œé»˜è®¤å’Œä¸Šä¸€è¡Œçš„å€¼ç›¸åŒ</li></ul><pre class="line-numbers language-go" data-language="go"><code class="language-go"><span class="token keyword">const</span><span class="token punctuation">(</span>n1 <span class="token operator">=</span> <span class="token number">100</span>n2n3<span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre><h3 id="iota"><a href="#iota" class="headerlink" title="iota"></a>iota</h3><h4 id="iotaçš„å®šä¹‰"><a href="#iotaçš„å®šä¹‰" class="headerlink" title="iotaçš„å®šä¹‰"></a>iotaçš„å®šä¹‰</h4><ul><li><p>iota : goè¯­è¨€é‡Œçš„å¸¸é‡è®¡æ•°å™¨ï¼Œåªèƒ½åœ¨å¸¸é‡çš„è¡¨è¾¾å¼ä¸­ä½¿ç”¨</p></li><li><p>åœ¨const å…³é”®å­—å‡ºç°æ—¶å°†è¢«é‡ç½®ä¸º0ï¼Œ </p></li><li><p>constæ¯æ–°å¢ä¸€è¡Œå¸¸é‡å£°æ˜ï¼Œå°†ä½¿iotaçš„å€¼+1</p></li></ul><pre class="line-numbers language-go" data-language="go"><code class="language-go"><span class="token keyword">const</span> <span class="token punctuation">(</span>  a1 <span class="token operator">=</span> <span class="token boolean">iota</span>  <span class="token comment">// 0</span>  a2 <span class="token operator">=</span> <span class="token boolean">iota</span>  <span class="token comment">// 1</span>  <span class="token boolean">_</span> <span class="token operator">=</span> <span class="token boolean">iota</span>   <span class="token comment">// 2</span>  a3     <span class="token comment">// 3</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h4 id="iotaçš„ä½¿ç”¨"><a href="#iotaçš„ä½¿ç”¨" class="headerlink" title="iotaçš„ä½¿ç”¨"></a>iotaçš„ä½¿ç”¨</h4><ul><li>æ’é˜Ÿ</li></ul><pre class="line-numbers language-go" data-language="go"><code class="language-go"><span class="token keyword">const</span> <span class="token punctuation">(</span>  b1 <span class="token operator">=</span> <span class="token boolean">iota</span>  <span class="token comment">// 0</span>  b2 <span class="token operator">=</span> <span class="token number">100</span>  <span class="token comment">// 100</span>  b3 <span class="token operator">=</span> <span class="token boolean">iota</span>  <span class="token comment">// 2</span>  b4 <span class="token operator">=</span> <span class="token boolean">iota</span>  <span class="token comment">// 3</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><ul><li>å¤šä¸ªå˜é‡å£°æ˜åœ¨ä¸€è¡Œ, ä¸ä¼šiotaä¸ä¼šå¢åŠ ï¼Œåªæœ‰æ¢è¡Œæ‰ä¼šå¢åŠ </li></ul><pre class="line-numbers language-go" data-language="go"><code class="language-go"><span class="token keyword">const</span> <span class="token punctuation">(</span>  d1<span class="token punctuation">,</span> d2 <span class="token operator">=</span> <span class="token boolean">iota</span> <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token boolean">iota</span> <span class="token operator">+</span> <span class="token number">2</span>  <span class="token comment">// 1ï¼Œ 2</span>  d3<span class="token punctuation">,</span> d4 <span class="token operator">=</span> <span class="token boolean">iota</span> <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token boolean">iota</span> <span class="token operator">+</span> <span class="token number">2</span>  <span class="token comment">// 2ï¼Œ 3</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><ul><li>å®šä¹‰æ•°é‡çº§</li></ul><pre class="line-numbers language-go" data-language="go"><code class="language-go"><span class="token keyword">const</span> <span class="token punctuation">(</span>  <span class="token boolean">_</span> <span class="token operator">=</span> <span class="token boolean">iota</span>  KB <span class="token operator">=</span> <span class="token number">1</span><span class="token operator">&lt;&lt;</span> <span class="token punctuation">(</span><span class="token number">10</span><span class="token operator">*</span><span class="token boolean">iota</span><span class="token punctuation">)</span>  MB <span class="token operator">=</span> <span class="token number">1</span><span class="token operator">&lt;&lt;</span> <span class="token punctuation">(</span><span class="token number">10</span><span class="token operator">*</span><span class="token boolean">iota</span><span class="token punctuation">)</span>  GB <span class="token operator">=</span> <span class="token number">1</span><span class="token operator">&lt;&lt;</span> <span class="token punctuation">(</span><span class="token number">10</span><span class="token operator">*</span><span class="token boolean">iota</span><span class="token punctuation">)</span>  TB <span class="token operator">=</span> <span class="token number">1</span><span class="token operator">&lt;&lt;</span> <span class="token punctuation">(</span><span class="token number">10</span><span class="token operator">*</span><span class="token boolean">iota</span><span class="token punctuation">)</span>  PB <span class="token operator">=</span> <span class="token number">1</span><span class="token operator">&lt;&lt;</span> <span class="token punctuation">(</span><span class="token number">10</span><span class="token operator">*</span><span class="token boolean">iota</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token keyword">func</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>  fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span>a1<span class="token punctuation">,</span> a2<span class="token punctuation">,</span> a3<span class="token punctuation">)</span>  fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span>b1<span class="token punctuation">,</span> b2<span class="token punctuation">,</span> b3<span class="token punctuation">,</span> b4<span class="token punctuation">)</span>  fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span>d1<span class="token punctuation">,</span> d2<span class="token punctuation">,</span> d3<span class="token punctuation">,</span> d4<span class="token punctuation">)</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h2 id="fmt-åŒ…"><a href="#fmt-åŒ…" class="headerlink" title="fmt åŒ…"></a>fmt åŒ…</h2><h3 id="è¾“å‡ºæ–¹å¼æ¯”è¾ƒ"><a href="#è¾“å‡ºæ–¹å¼æ¯”è¾ƒ" class="headerlink" title="è¾“å‡ºæ–¹å¼æ¯”è¾ƒ"></a>è¾“å‡ºæ–¹å¼æ¯”è¾ƒ</h3><ul><li><p>Print</p><ul><li><p>ä¸€æ¬¡è¾“å…¥å¤šä¸ªå€¼çš„æ—¶å€™ä¸­é—´æ²¡æœ‰ç©ºæ ¼</p></li><li><p>Print ä¸ä¼šè‡ªåŠ¨æ¢è¡Œ</p></li></ul></li><li><p>Printf</p><ul><li>æ ¼å¼åŒ–è¾“å‡º</li></ul></li><li><p>Println</p><ul><li>ä¸€æ¬¡è¾“å…¥å¤šä¸ªå€¼çš„æ—¶å€™ä¸­é—´æœ‰ç©ºæ ¼</li><li>Pritlnä¼šè‡ªåŠ¨ç»™æ¢è¡Œ</li></ul></li></ul><h3 id="å®ä¾‹"><a href="#å®ä¾‹" class="headerlink" title="å®ä¾‹"></a>å®ä¾‹</h3><pre class="line-numbers language-go" data-language="go"><code class="language-go"><span class="token keyword">func</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span>  <span class="token punctuation">&#123;</span><span class="token keyword">var</span> n <span class="token operator">=</span> <span class="token number">100</span>fmt<span class="token punctuation">.</span><span class="token function">Printf</span><span class="token punctuation">(</span><span class="token string">"%T\n"</span><span class="token punctuation">,</span> n<span class="token punctuation">)</span>  <span class="token comment">// æŸ¥çœ‹ç±»å‹</span>fmt<span class="token punctuation">.</span><span class="token function">Printf</span><span class="token punctuation">(</span><span class="token string">"%v\n"</span><span class="token punctuation">,</span> n<span class="token punctuation">)</span>  <span class="token comment">// æŸ¥çœ‹å˜é‡çš„å€¼</span>fmt<span class="token punctuation">.</span><span class="token function">Printf</span><span class="token punctuation">(</span><span class="token string">"%b\n"</span><span class="token punctuation">,</span> n<span class="token punctuation">)</span>  <span class="token comment">// </span>fmt<span class="token punctuation">.</span><span class="token function">Printf</span><span class="token punctuation">(</span><span class="token string">"%d\n"</span><span class="token punctuation">,</span> n<span class="token punctuation">)</span>  <span class="token comment">// åè¿›åˆ¶</span>fmt<span class="token punctuation">.</span><span class="token function">Printf</span><span class="token punctuation">(</span><span class="token string">"%o\n"</span><span class="token punctuation">,</span> n<span class="token punctuation">)</span>  <span class="token comment">// </span>fmt<span class="token punctuation">.</span><span class="token function">Printf</span><span class="token punctuation">(</span><span class="token string">"%x\n"</span><span class="token punctuation">,</span> n<span class="token punctuation">)</span><span class="token keyword">var</span> s <span class="token operator">=</span> <span class="token string">"hello world"</span>fmt<span class="token punctuation">.</span><span class="token function">Printf</span><span class="token punctuation">(</span><span class="token string">"%T\n"</span><span class="token punctuation">,</span> s<span class="token punctuation">)</span>fmt<span class="token punctuation">.</span><span class="token function">Printf</span><span class="token punctuation">(</span><span class="token string">"%s\n"</span><span class="token punctuation">,</span> s<span class="token punctuation">)</span>fmt<span class="token punctuation">.</span><span class="token function">Printf</span><span class="token punctuation">(</span><span class="token string">"%v\n"</span><span class="token punctuation">,</span> s<span class="token punctuation">)</span>fmt<span class="token punctuation">.</span><span class="token function">Printf</span><span class="token punctuation">(</span><span class="token string">"%#v\n"</span><span class="token punctuation">,</span> s<span class="token punctuation">)</span>  <span class="token comment">// å­—ç¬¦ä¸²ä¼šæ˜¾ç¤ºå¼•å·</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h2 id="æ•´å½¢"><a href="#æ•´å½¢" class="headerlink" title="æ•´å½¢"></a>æ•´å½¢</h2><h3 id="ä»‹ç»"><a href="#ä»‹ç»" class="headerlink" title="ä»‹ç»"></a>ä»‹ç»</h3><blockquote><p>æ•´å½¢æ˜¯æ‰€æœ‰ç¼–ç¨‹è¯­è¨€é‡Œé¢çš„åŸºç¡€æ•°æ®ç±»å‹ï¼Œåœ¨<code>go</code>è¯­è¨€å½“ä¸­ï¼ŒåŒæ—¶æ”¯æŒ<code>int</code>å’Œ<code>uint</code>ä¸¤ç§ç±»å‹ã€‚ä½†æ˜¯å…·ä½“çš„é•¿åº¦è¿˜è¦å–å†³äºä¸åŒçš„ç¼–è¯‘å™¨å®ç°ã€‚<code>go</code>é‡Œé¢åŒæ ·æœ‰ç›´æ¥å®šä¹‰å¥½ä½æ•°çš„ç±»å‹ã€‚<br>å…¨éƒ¨çš„ç±»å‹å¦‚ä¸‹:</p></blockquote><p><img src="https://zhangtq-blog.oss-cn-hangzhou.aliyuncs.com/content_picture/image-20230320211244687.png" alt="image-20230320211244687"></p><h3 id="è¿›åˆ¶è½¬æ¢"><a href="#è¿›åˆ¶è½¬æ¢" class="headerlink" title="è¿›åˆ¶è½¬æ¢"></a>è¿›åˆ¶è½¬æ¢</h3><pre class="line-numbers language-go" data-language="go"><code class="language-go"><span class="token keyword">package</span> main<span class="token keyword">import</span> <span class="token string">"fmt"</span><span class="token comment">// æ•´å½¢</span><span class="token keyword">func</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span><span class="token keyword">var</span> i1 <span class="token operator">=</span> <span class="token number">101</span>fmt<span class="token punctuation">.</span><span class="token function">Printf</span><span class="token punctuation">(</span><span class="token string">"%d\n"</span><span class="token punctuation">,</span> i1<span class="token punctuation">)</span>fmt<span class="token punctuation">.</span><span class="token function">Printf</span><span class="token punctuation">(</span><span class="token string">"%b\n"</span><span class="token punctuation">,</span> i1<span class="token punctuation">)</span> <span class="token comment">// åè¿›åˆ¶è½¬äºŒè¿›åˆ¶</span>fmt<span class="token punctuation">.</span><span class="token function">Printf</span><span class="token punctuation">(</span><span class="token string">"%o\n"</span><span class="token punctuation">,</span> i1<span class="token punctuation">)</span>  <span class="token comment">// åè¿›åˆ¶è½¬å…«è¿›åˆ¶</span>fmt<span class="token punctuation">.</span><span class="token function">Printf</span><span class="token punctuation">(</span><span class="token string">"%x\n"</span><span class="token punctuation">,</span> i1<span class="token punctuation">)</span>  <span class="token comment">// åè¿›åˆ¶è½¬åå…­è¿›åˆ¶</span><span class="token comment">// å…«è¿›åˆ¶</span>i2 <span class="token operator">:=</span> <span class="token number">077</span>fmt<span class="token punctuation">.</span><span class="token function">Printf</span><span class="token punctuation">(</span><span class="token string">"%d\n"</span><span class="token punctuation">,</span> i2<span class="token punctuation">)</span><span class="token comment">// åå…­è¿›åˆ¶</span>i3 <span class="token operator">:=</span> <span class="token number">0xff</span>fmt<span class="token punctuation">.</span><span class="token function">Printf</span><span class="token punctuation">(</span><span class="token string">"%d\n"</span><span class="token punctuation">,</span> i3<span class="token punctuation">)</span>fmt<span class="token punctuation">.</span><span class="token function">Printf</span><span class="token punctuation">(</span><span class="token string">"%T\n"</span><span class="token punctuation">,</span> i3<span class="token punctuation">)</span><span class="token comment">// å£°æ˜intç±»å‹</span>i4 <span class="token operator">:=</span> <span class="token function">int8</span><span class="token punctuation">(</span><span class="token number">9</span><span class="token punctuation">)</span>fmt<span class="token punctuation">.</span><span class="token function">Printf</span><span class="token punctuation">(</span><span class="token string">"%d\n"</span><span class="token punctuation">,</span> i4<span class="token punctuation">)</span>fmt<span class="token punctuation">.</span><span class="token function">Printf</span><span class="token punctuation">(</span><span class="token string">"%T\n"</span><span class="token punctuation">,</span> i4<span class="token punctuation">)</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h2 id="æµ®ç‚¹æ•°"><a href="#æµ®ç‚¹æ•°" class="headerlink" title="æµ®ç‚¹æ•°"></a>æµ®ç‚¹æ•°</h2><blockquote><p>goè¯­è¨€æ‹¥æœ‰ä¸¤ç§æµ®ç‚¹ç±»å‹ï¼Œä¸€ç§æ˜¯float64ï¼Œæ¯ä¸ª64ä½çš„æµ®ç‚¹æ•°éœ€è¦å ç”¨8å­—èŠ‚ï¼Œå¦ä¸€ç§æ˜¯float32,å ç”¨4å­—èŠ‚ã€‚</p></blockquote><p><strong>goè¯­è¨€ä¸­é»˜è®¤çš„æµ®ç‚¹ç±»å‹ä½float64ä½ï¼Œ float32ä½ä¸èƒ½ç›´æ¥èµ‹å€¼ç»™float64ä½</strong></p><h2 id="å¤æ•°"><a href="#å¤æ•°" class="headerlink" title="å¤æ•°"></a>å¤æ•°</h2><p>ç•¥</p><h2 id="å¸ƒå°”å€¼"><a href="#å¸ƒå°”å€¼" class="headerlink" title="å¸ƒå°”å€¼"></a>å¸ƒå°”å€¼</h2><blockquote><p>goè¯­è¨€çš„bool ç”¨æ¥å£°æ˜å¸ƒå°”å˜é‡ï¼Œå¸ƒå°”ç±»å‹åªæœ‰trueå’Œfalseä¸¤ä¸ªå€¼</p></blockquote><p><strong>æ³¨æ„</strong></p><ul><li>å¸ƒå°”å˜é‡çš„é»˜è®¤å€¼ä½false</li><li>goè¯­è¨€ä¸­ä¸å…è®¸å°†æ•´å½¢å¼ºåˆ¶è½¬åŒ–ä½å¸ƒå°”ç±»å‹</li><li>å¸ƒå°”ç±»å‹æ— æ³•å‚ä¸è¿ç®—xï¼Œä¹Ÿæ— æ³•ä¸å…¶ä»–ç±»å‹è¿›è¡Œè½¬åŒ–</li></ul><h2 id="å­—ç¬¦ä¸²ç±»å‹"><a href="#å­—ç¬¦ä¸²ç±»å‹" class="headerlink" title="å­—ç¬¦ä¸²ç±»å‹"></a>å­—ç¬¦ä¸²ç±»å‹</h2><ul><li>Go è¯­è¨€é‡Œçš„å­—ç¬¦ä¸²çš„å†…éƒ¨å®ç°ä½¿ç”¨ UTF-8 ç¼–ç ã€‚</li></ul><h3 id="å­—ç¬¦ä¸²çš„è¡¨ç¤º"><a href="#å­—ç¬¦ä¸²çš„è¡¨ç¤º" class="headerlink" title="å­—ç¬¦ä¸²çš„è¡¨ç¤º"></a>å­—ç¬¦ä¸²çš„è¡¨ç¤º</h3><ul><li>å­—ç¬¦ä¸²çš„å€¼ä¸ºåŒå¼•å·(â€œ)ä¸­çš„å†…å®¹ï¼Œå¯ä»¥åœ¨ Go è¯­è¨€çš„æºç ä¸­ç›´æ¥æ·»åŠ é ASCII ç å­—ç¬¦ä¸²</li></ul><pre class="line-numbers language-go" data-language="go"><code class="language-go">s <span class="token operator">:=</span> <span class="token string">"æ²™æ²³"</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><h3 id="å­—ç¬¦"><a href="#å­—ç¬¦" class="headerlink" title="å­—ç¬¦"></a>å­—ç¬¦</h3><ul><li><p>å­—ç¬¦ï¼š å•å¼•å·è¡¨ç¤ºï¼Œå•ç‹¬çš„å­—æ¯æ•°å­—ç¬¦å·è¡¨ç¤ºä¸€ä¸ªå­—ç¬¦</p></li><li><p>go è¯­è¨€å­—ç¬¦æœ‰ä¸¤ç±»: byteç±»å‹  runeç±»å‹ï¼Œ ä»£è¡¨utf8å­—ç¬¦</p></li></ul><pre class="line-numbers language-go" data-language="go"><code class="language-go">c1 <span class="token operator">:=</span> <span class="token char">'æ²™'</span>c2 <span class="token operator">:=</span> <span class="token char">'s'</span>c3 <span class="token operator">:=</span> <span class="token char">'h'</span>fmt<span class="token punctuation">.</span><span class="token function">Printf</span><span class="token punctuation">(</span><span class="token string">"%s"</span><span class="token punctuation">,</span> s<span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre><h3 id="å­—èŠ‚"><a href="#å­—èŠ‚" class="headerlink" title="å­—èŠ‚"></a>å­—èŠ‚</h3><ul><li><p>ä¸€ä¸ªå­—èŠ‚&#x3D;8Bit(8ä¸ªäºŒè¿›åˆ¶ä½)</p></li><li><p>ä¸€ä¸ªâ€™aâ€™ å­—ç¬¦å ä¸€ä¸ªå­—èŠ‚</p></li><li><p>ä¸€ä¸ªutf8ç¼–ç çš„æ±‰å­—â€™æ²™â€™ ä¸€èˆ¬å 3ä¸ªå­—èŠ‚</p></li></ul><h3 id="è½¬ä¹‰å­—ç¬¦ä¸²"><a href="#è½¬ä¹‰å­—ç¬¦ä¸²" class="headerlink" title="è½¬ä¹‰å­—ç¬¦ä¸²"></a>è½¬ä¹‰å­—ç¬¦ä¸²</h3><table><thead><tr><th>è½¬ä¹‰ç¬¦</th><th>å«ä¹‰</th></tr></thead><tbody><tr><td>\r</td><td>å›è½¦ç¬¦å·</td></tr><tr><td>\n</td><td>æ¢è¡Œ</td></tr><tr><td>\t</td><td>åˆ¶è¡¨ç¬¦</td></tr><tr><td>\&#39;</td><td>å•å¼•å·</td></tr><tr><td>\&quot;</td><td>åŒå¼•å·</td></tr><tr><td>\\</td><td>åæ–œæ </td></tr></tbody></table><pre class="line-numbers language-go" data-language="go"><code class="language-go"><span class="token keyword">package</span> main<span class="token keyword">import</span> <span class="token string">"fmt"</span><span class="token keyword">func</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>    <span class="token comment">// è¾“å‡ºè·¯å¾„E:\ã€ç‰©è¯­ç»ˆç„‰ã€‘è€ç”·å­©å¸¦ä½ 21å‘¨æå®šGoè¯­è¨€ã€å…¨ 242ã€‘\01-50\01-50</span>path1 <span class="token operator">:=</span> <span class="token string">"E:\\ã€ç‰©è¯­ç»ˆç„‰ã€‘è€ç”·å­©å¸¦ä½ 21å‘¨æå®šGoè¯­è¨€ã€å…¨ 242ã€‘\\01-50\\01-50"</span>    <span class="token comment">// \ æœ¬æ¥å°±æ˜¯å…·æœ‰ç‰¹æ®Šæ„ä¹‰ï¼Œéœ€è¦å‘Šè¯‰ç³»ç»Ÿ\ å°±è¡¨ç¤ºå•çº¯çš„\ï¼Œæ­¤æ—¶éœ€è¦è½¬ä¹‰ç¬¦</span>        <span class="token comment">// è®©ç»“æœä¸­å¸¦æœ‰åŒå¼•å·</span>    path2 <span class="token operator">:=</span> <span class="token string">"\"E:\\ã€ç‰©è¯­ç»ˆç„‰ã€‘è€ç”·å­©å¸¦ä½ 21å‘¨æå®šGoè¯­è¨€ã€å…¨ 242ã€‘\\01-50\\01-50\""</span>    fmt<span class="token punctuation">.</span><span class="token function">Printf</span><span class="token punctuation">(</span>path2<span class="token punctuation">)</span>        <span class="token comment">// è®©ç»“æœä¸­å¸¦æœ‰å•å¼•å·</span>    path3 <span class="token operator">:=</span> <span class="token string">"'E:\\ã€ç‰©è¯­ç»ˆç„‰ã€‘è€ç”·å­©å¸¦ä½ 21å‘¨æå®šGoè¯­è¨€ã€å…¨ 242ã€‘\\01-50\\01-50'"</span>        <span class="token comment">// å¤šè¡Œå­—ç¬¦ä¸² ä½¿ç”¨åå¼•å·ï¼ŒåŸæ ·è¾“å‡º</span>    s <span class="token operator">:=</span> <span class="token string">`æç™½æœç”«`</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h3 id="å­—ç¬¦ä¸²æ‹¼æ¥"><a href="#å­—ç¬¦ä¸²æ‹¼æ¥" class="headerlink" title="å­—ç¬¦ä¸²æ‹¼æ¥"></a>å­—ç¬¦ä¸²æ‹¼æ¥</h3><pre class="line-numbers language-go" data-language="go"><code class="language-go">   name <span class="token operator">:=</span> <span class="token string">"æˆ‘æ˜¯"</span>content <span class="token operator">:=</span> <span class="token string">"ç¨‹åºçŒ¿"</span>ss <span class="token operator">:=</span> name <span class="token operator">+</span> contentfmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span>ss<span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre><h3 id="åˆ†å‰²"><a href="#åˆ†å‰²" class="headerlink" title="åˆ†å‰²"></a>åˆ†å‰²</h3><pre class="line-numbers language-go" data-language="go"><code class="language-go">path1 <span class="token operator">:=</span> <span class="token string">"E:\\ã€ç‰©è¯­ç»ˆç„‰ã€‘è€ç”·å­©å¸¦ä½ 21å‘¨æå®šGoè¯­è¨€ã€å…¨ 242ã€‘\\01-50\\01-50"</span>ret <span class="token operator">:=</span> strings<span class="token punctuation">.</span><span class="token function">Split</span><span class="token punctuation">(</span>path1<span class="token punctuation">,</span> <span class="token string">"\\"</span><span class="token punctuation">)</span>fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span>ret<span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre><h3 id="å‰åç¼€åŒ¹é…"><a href="#å‰åç¼€åŒ¹é…" class="headerlink" title="å‰åç¼€åŒ¹é…"></a>å‰åç¼€åŒ¹é…</h3><pre class="line-numbers language-go" data-language="go"><code class="language-go">ss2 <span class="token operator">:=</span> <span class="token string">"æˆ‘æ˜¯ä¸­å›½äºº"</span>fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span>strings<span class="token punctuation">.</span><span class="token function">Contains</span><span class="token punctuation">(</span>ss2<span class="token punctuation">,</span> <span class="token string">"æˆ‘æ˜¯"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token comment">// å‰ç¼€åŒ¹é…</span>fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span>strings<span class="token punctuation">.</span><span class="token function">HasPrefix</span><span class="token punctuation">(</span>ss2<span class="token punctuation">,</span> <span class="token string">"æˆ‘"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token comment">// åç¼€åŒ¹é…</span>fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span>strings<span class="token punctuation">.</span><span class="token function">HasSuffix</span><span class="token punctuation">(</span>ss2<span class="token punctuation">,</span> <span class="token string">"räºº"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h3 id="strings-Index"><a href="#strings-Index" class="headerlink" title="strings.Index()"></a>strings.Index()</h3><pre class="line-numbers language-go" data-language="go"><code class="language-go"><span class="token keyword">package</span> main<span class="token keyword">import</span> <span class="token punctuation">(</span><span class="token string">"fmt"</span><span class="token string">"strings"</span><span class="token punctuation">)</span><span class="token keyword">func</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span><span class="token keyword">var</span> str <span class="token operator">=</span> <span class="token string">"this is golang"</span><span class="token keyword">var</span> index <span class="token operator">=</span> strings<span class="token punctuation">.</span><span class="token function">Index</span><span class="token punctuation">(</span>str<span class="token punctuation">,</span> <span class="token string">"go"</span><span class="token punctuation">)</span> <span class="token comment">//ä»å‰å¾€å</span>fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span>index<span class="token punctuation">)</span>   <span class="token comment">// 8 ï¼ˆåˆ¤æ–­å­—ç¬¦ä¸² go å‡ºç°çš„ä½ç½®ï¼‰</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h3 id="joinæ‹¼æ¥"><a href="#joinæ‹¼æ¥" class="headerlink" title="joinæ‹¼æ¥"></a>joinæ‹¼æ¥</h3><pre class="line-numbers language-go" data-language="go"><code class="language-go"><span class="token keyword">package</span> main<span class="token keyword">import</span> <span class="token punctuation">(</span><span class="token string">"fmt"</span><span class="token string">"strings"</span><span class="token punctuation">)</span><span class="token keyword">func</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span><span class="token keyword">var</span> str <span class="token operator">=</span> <span class="token string">"123-456-789"</span><span class="token keyword">var</span> arr <span class="token operator">=</span> strings<span class="token punctuation">.</span><span class="token function">Split</span><span class="token punctuation">(</span>str<span class="token punctuation">,</span> <span class="token string">"-"</span><span class="token punctuation">)</span>    <span class="token comment">// [123 456 789]</span><span class="token keyword">var</span> str2 <span class="token operator">=</span> strings<span class="token punctuation">.</span><span class="token function">Join</span><span class="token punctuation">(</span>arr<span class="token punctuation">,</span> <span class="token string">"*"</span><span class="token punctuation">)</span>    <span class="token comment">// 123*456*789</span>fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span>arr<span class="token punctuation">)</span>fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span>str2<span class="token punctuation">)</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h3 id="å­—ç¬¦ä¸²çš„ä¿®æ”¹-rune"><a href="#å­—ç¬¦ä¸²çš„ä¿®æ”¹-rune" class="headerlink" title="å­—ç¬¦ä¸²çš„ä¿®æ”¹(rune)"></a>å­—ç¬¦ä¸²çš„ä¿®æ”¹(rune)</h3><pre class="line-numbers language-go" data-language="go"><code class="language-go"><span class="token keyword">package</span> main<span class="token keyword">import</span> <span class="token string">"fmt"</span><span class="token keyword">func</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span><span class="token comment">// å­—ç¬¦ä¸²ä¿®æ”¹ ï¼š å­—ç¬¦ä¸²ä¸èƒ½ç›´æ¥ä¿®æ”¹</span>s2 <span class="token operator">:=</span> <span class="token string">"ç™½èåœ"</span>s3 <span class="token operator">:=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token function">rune</span><span class="token punctuation">(</span>s2<span class="token punctuation">)</span>  <span class="token comment">// ['ç™½', 'è', 'è']  è½¬æ¢åæ˜¯å•ä¸ªå­—ç¬¦</span>s3<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token char">'çº¢'</span>  <span class="token comment">// æ›¿æ¢æ—¶éœ€è¦ç”¨å­—ç¬¦</span>fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token function">string</span><span class="token punctuation">(</span>s3<span class="token punctuation">)</span><span class="token punctuation">)</span>  <span class="token comment">// string å°†rune å¼ºåˆ¶è½¬æ¢ä¸ºå­—ç¬¦</span>c1 <span class="token operator">:=</span> <span class="token string">"çº¢"</span>c2 <span class="token operator">:=</span> <span class="token char">'çº¢'</span>  <span class="token comment">// rune ç±»å‹ int32</span>fmt<span class="token punctuation">.</span><span class="token function">Printf</span><span class="token punctuation">(</span><span class="token string">"c1: %T, c2:%T"</span><span class="token punctuation">,</span> c1<span class="token punctuation">,</span> c2<span class="token punctuation">)</span>c3 <span class="token operator">:=</span> <span class="token string">"h"</span>  <span class="token comment">// string</span>c4 <span class="token operator">:=</span> <span class="token char">'h'</span>  <span class="token comment">// int32</span>fmt<span class="token punctuation">.</span><span class="token function">Printf</span><span class="token punctuation">(</span><span class="token string">"c3: %T, c4:%T\n"</span><span class="token punctuation">,</span> c3<span class="token punctuation">,</span> c4<span class="token punctuation">)</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h3 id="è·å–æ¯ä¸€ä¸ªå­—ç¬¦"><a href="#è·å–æ¯ä¸€ä¸ªå­—ç¬¦" class="headerlink" title="è·å–æ¯ä¸€ä¸ªå­—ç¬¦"></a>è·å–æ¯ä¸€ä¸ªå­—ç¬¦</h3><pre class="line-numbers language-go" data-language="go"><code class="language-go"><span class="token keyword">package</span> main<span class="token keyword">import</span> <span class="token string">"fmt"</span><span class="token keyword">func</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>s <span class="token operator">:=</span> <span class="token string">"hello,æ²™æ²³"</span>n <span class="token operator">:=</span> <span class="token function">len</span><span class="token punctuation">(</span>s<span class="token punctuation">)</span>fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span>n<span class="token punctuation">)</span><span class="token keyword">for</span> <span class="token boolean">_</span><span class="token punctuation">,</span> c <span class="token operator">:=</span> <span class="token keyword">range</span> s<span class="token punctuation">&#123;</span> <span class="token comment">// ä»å­—ç¬¦ä¸­å–å‡ºæ¯ä¸ªå­—ç¬¦</span>fmt<span class="token punctuation">.</span><span class="token function">Printf</span><span class="token punctuation">(</span><span class="token string">"%c\n"</span><span class="token punctuation">,</span> c<span class="token punctuation">)</span> <span class="token comment">//%c : å­—ç¬¦</span><span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h2 id="if"><a href="#if" class="headerlink" title="if"></a>if</h2><pre class="line-numbers language-go" data-language="go"><code class="language-go"><span class="token keyword">package</span> main<span class="token keyword">import</span> <span class="token string">"fmt"</span><span class="token keyword">func</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>age <span class="token operator">:=</span> <span class="token number">10</span><span class="token keyword">if</span> age <span class="token operator">></span> <span class="token number">18</span> <span class="token punctuation">&#123;</span>fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token string">"é¥­åº—ä»Šå¤©å¼€ä¸šå•¦"</span><span class="token punctuation">)</span><span class="token punctuation">&#125;</span><span class="token keyword">else</span><span class="token punctuation">&#123;</span>fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token string">"æ”¹å†™ä½œä¸šäº†"</span><span class="token punctuation">)</span><span class="token punctuation">&#125;</span><span class="token keyword">if</span> age <span class="token operator">></span> <span class="token number">35</span> <span class="token punctuation">&#123;</span>fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token string">"ä¸­å¹´"</span><span class="token punctuation">)</span><span class="token punctuation">&#125;</span> <span class="token keyword">else</span> <span class="token keyword">if</span> age <span class="token operator">></span><span class="token number">18</span> <span class="token punctuation">&#123;</span>fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token string">"æˆå¹´"</span><span class="token punctuation">)</span><span class="token punctuation">&#125;</span> <span class="token keyword">else</span> <span class="token punctuation">&#123;</span>fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token string">"æœªæˆå¹´"</span><span class="token punctuation">)</span><span class="token punctuation">&#125;</span><span class="token keyword">if</span> age <span class="token operator">:=</span> <span class="token number">19</span><span class="token punctuation">;</span> age <span class="token operator">></span><span class="token number">18</span><span class="token punctuation">&#123;</span>fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token string">"ä»Šå¤©è¦å¼€å­¦äº†"</span><span class="token punctuation">)</span><span class="token punctuation">&#125;</span> <span class="token keyword">else</span><span class="token punctuation">&#123;</span>fmt<span class="token punctuation">.</span><span class="token function">Printf</span><span class="token punctuation">(</span><span class="token string">"ä»Šå¤©å¤©æ°”ä¸é”™"</span><span class="token punctuation">)</span><span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h2 id="for"><a href="#for" class="headerlink" title="for"></a>for</h2><pre class="line-numbers language-go" data-language="go"><code class="language-go"><span class="token keyword">package</span> main<span class="token keyword">import</span> <span class="token string">"fmt"</span><span class="token keyword">func</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span><span class="token comment">// åŸºæœ¬æ ¼å¼</span><span class="token keyword">for</span> i <span class="token operator">:=</span><span class="token number">0</span><span class="token punctuation">;</span> i<span class="token operator">&lt;</span><span class="token number">10</span><span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">&#123;</span>fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span>i<span class="token punctuation">)</span><span class="token punctuation">&#125;</span><span class="token comment">// å˜ç§1</span><span class="token keyword">var</span> i <span class="token operator">=</span> <span class="token number">5</span><span class="token keyword">for</span> <span class="token punctuation">;</span>i <span class="token operator">&lt;</span> <span class="token number">10</span><span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">&#123;</span>fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span>i<span class="token punctuation">)</span><span class="token punctuation">&#125;</span><span class="token comment">// å˜ç§2</span>j <span class="token operator">:=</span> <span class="token number">1</span><span class="token keyword">for</span> j<span class="token operator">&lt;</span><span class="token number">10</span> <span class="token punctuation">&#123;</span>fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token string">"æµ‹è¯•"</span><span class="token punctuation">)</span>fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span>j<span class="token punctuation">)</span>j<span class="token operator">++</span><span class="token punctuation">&#125;</span><span class="token comment">// for range è¿”å›å­—å­—ç¬¦ä¸²çš„ç´¢å¼•å’Œå€¼</span>s <span class="token operator">:=</span> <span class="token string">"helloæ²™æ²³"</span><span class="token keyword">for</span> i<span class="token punctuation">,</span> v <span class="token operator">:=</span> <span class="token keyword">range</span> s<span class="token punctuation">&#123;</span>fmt<span class="token punctuation">.</span><span class="token function">Printf</span><span class="token punctuation">(</span><span class="token string">"%d %c\n"</span><span class="token punctuation">,</span> i<span class="token punctuation">,</span> v<span class="token punctuation">)</span><span class="token punctuation">&#125;</span><span class="token comment">// æ‰“å°99ä¹˜æ³•è¡¨</span><span class="token keyword">for</span> i<span class="token operator">:=</span><span class="token number">1</span><span class="token punctuation">;</span> i<span class="token operator">&lt;</span><span class="token number">10</span><span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">&#123;</span><span class="token keyword">for</span> j<span class="token operator">:=</span><span class="token number">1</span><span class="token punctuation">;</span> j <span class="token operator">&lt;</span> <span class="token number">10</span><span class="token punctuation">;</span> j<span class="token operator">++</span><span class="token punctuation">&#123;</span><span class="token keyword">if</span> j<span class="token operator">&lt;=</span>i<span class="token punctuation">&#123;</span><span class="token keyword">if</span> i <span class="token operator">*</span> j <span class="token operator">&lt;</span><span class="token number">10</span><span class="token punctuation">&#123;</span>fmt<span class="token punctuation">.</span><span class="token function">Printf</span><span class="token punctuation">(</span><span class="token string">"%d * %d = %d     "</span><span class="token punctuation">,</span> j<span class="token punctuation">,</span> i<span class="token punctuation">,</span> i<span class="token operator">*</span>j<span class="token punctuation">)</span><span class="token punctuation">&#125;</span><span class="token keyword">else</span><span class="token punctuation">&#123;</span>fmt<span class="token punctuation">.</span><span class="token function">Printf</span><span class="token punctuation">(</span><span class="token string">"%d * %d = %d    "</span><span class="token punctuation">,</span> j<span class="token punctuation">,</span> i<span class="token punctuation">,</span> i<span class="token operator">*</span>j<span class="token punctuation">)</span><span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span class="token keyword">if</span> j <span class="token operator">==</span> i<span class="token punctuation">&#123;</span>fmt<span class="token punctuation">.</span><span class="token function">Printf</span><span class="token punctuation">(</span><span class="token string">"\n"</span><span class="token punctuation">)</span><span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span class="token comment">// å€ŸåŠ©åˆ¶è¡¨ç¬¦</span><span class="token keyword">for</span> i <span class="token operator">:=</span><span class="token number">1</span><span class="token punctuation">;</span> i<span class="token operator">&lt;</span><span class="token number">10</span><span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">&#123;</span><span class="token keyword">for</span> j <span class="token operator">:=</span> <span class="token number">1</span><span class="token punctuation">;</span> j <span class="token operator">&lt;=</span> i<span class="token punctuation">;</span> j<span class="token operator">++</span><span class="token punctuation">&#123;</span>fmt<span class="token punctuation">.</span><span class="token function">Printf</span><span class="token punctuation">(</span><span class="token string">"%d*%d=%d \t"</span><span class="token punctuation">,</span> j<span class="token punctuation">,</span> i<span class="token punctuation">,</span> i<span class="token operator">*</span>j<span class="token punctuation">)</span><span class="token punctuation">&#125;</span>fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h3 id="continueå’Œbreak"><a href="#continueå’Œbreak" class="headerlink" title="continueå’Œbreak"></a>continueå’Œbreak</h3><pre class="line-numbers language-go" data-language="go"><code class="language-go"><span class="token keyword">package</span> main<span class="token keyword">import</span> <span class="token string">"fmt"</span><span class="token comment">// func main() &#123;</span><span class="token comment">// for i := 0; i &lt; 10; i++ &#123;</span><span class="token comment">// if i == 5 &#123;</span><span class="token comment">// continue</span><span class="token comment">// &#125;</span><span class="token comment">// fmt.Println(i)</span><span class="token comment">// &#125;</span><span class="token comment">// &#125;</span><span class="token keyword">var</span> name <span class="token builtin">string</span><span class="token keyword">func</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span><span class="token keyword">for</span> i <span class="token operator">:=</span><span class="token number">0</span><span class="token punctuation">;</span> i<span class="token operator">&lt;=</span><span class="token number">10</span><span class="token punctuation">;</span> i<span class="token operator">++</span> <span class="token punctuation">&#123;</span><span class="token keyword">if</span> i<span class="token operator">==</span><span class="token number">5</span> <span class="token punctuation">&#123;</span><span class="token keyword">continue</span><span class="token punctuation">&#125;</span>fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span>i<span class="token punctuation">)</span><span class="token punctuation">&#125;</span>name <span class="token operator">=</span> <span class="token string">"å¼ ä¸‰æå››ç‹éº»å­"</span><span class="token keyword">for</span> i<span class="token punctuation">,</span> c <span class="token operator">:=</span> <span class="token keyword">range</span> name<span class="token punctuation">&#123;</span><span class="token comment">// fmt.Println(string(i), string(c))</span>fmt<span class="token punctuation">.</span><span class="token function">Printf</span><span class="token punctuation">(</span><span class="token string">"i: %d, c:%c\n"</span><span class="token punctuation">,</span> i<span class="token punctuation">,</span> c <span class="token punctuation">)</span><span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h3 id="switch"><a href="#switch" class="headerlink" title="switch"></a>switch</h3><pre class="line-numbers language-go" data-language="go"><code class="language-go"><span class="token keyword">package</span> main<span class="token keyword">import</span> <span class="token string">"fmt"</span><span class="token keyword">func</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>        <span class="token keyword">var</span> n<span class="token operator">=</span><span class="token number">5</span>        <span class="token keyword">switch</span> n <span class="token punctuation">&#123;</span>    <span class="token keyword">case</span> <span class="token number">1</span><span class="token punctuation">:</span>         fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token string">"å¤§æ‹‡æŒ‡"</span><span class="token punctuation">)</span>    <span class="token keyword">case</span> <span class="token number">2</span><span class="token punctuation">:</span>        fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token string">"é£ŸæŒ‡"</span><span class="token punctuation">)</span>    <span class="token keyword">case</span> <span class="token number">3</span><span class="token punctuation">:</span>        fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token string">"ä¸­æŒ‡"</span><span class="token punctuation">)</span>    <span class="token keyword">case</span> <span class="token number">4</span><span class="token punctuation">:</span>        fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token string">"æ— åæŒ‡"</span><span class="token punctuation">)</span>    <span class="token keyword">case</span> <span class="token number">5</span><span class="token punctuation">:</span>        fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token string">"å°æ‹‡æŒ‡"</span><span class="token punctuation">)</span>    <span class="token keyword">default</span><span class="token punctuation">:</span>        fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token string">"è„šè¶¾å¤´"</span><span class="token punctuation">)</span>    <span class="token punctuation">&#125;</span>    <span class="token comment">// å˜ç§</span><span class="token keyword">switch</span> n <span class="token operator">:=</span><span class="token number">3</span><span class="token punctuation">;</span>n <span class="token punctuation">&#123;</span><span class="token keyword">case</span> <span class="token number">1</span><span class="token punctuation">:</span>fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token string">"é£ŸæŒ‡"</span><span class="token punctuation">)</span><span class="token keyword">case</span> <span class="token number">2</span><span class="token punctuation">:</span>fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token string">"ä¸­æŒ‡"</span><span class="token punctuation">)</span><span class="token keyword">case</span> <span class="token number">3</span><span class="token punctuation">:</span>fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token string">"å¤§æ‹‡æŒ‡"</span><span class="token punctuation">)</span><span class="token keyword">case</span> <span class="token number">4</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">,</span> <span class="token number">6</span><span class="token punctuation">,</span> <span class="token number">7</span><span class="token punctuation">:</span>fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token string">"ä¸æ˜¯æŒ‡å¤´"</span><span class="token punctuation">)</span><span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h3 id="goto"><a href="#goto" class="headerlink" title="goto"></a>goto</h3><pre class="line-numbers language-go" data-language="go"><code class="language-go"><span class="token keyword">package</span> main<span class="token comment">// è·³å‡ºå¾ªç¯</span><span class="token keyword">func</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span><span class="token keyword">var</span> flag <span class="token operator">=</span> <span class="token boolean">false</span><span class="token keyword">for</span> i<span class="token operator">:=</span><span class="token number">0</span><span class="token punctuation">;</span> i<span class="token operator">&lt;</span><span class="token number">10</span><span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">&#123;</span><span class="token keyword">for</span> j <span class="token operator">:=</span> <span class="token number">0</span><span class="token punctuation">;</span> j<span class="token operator">&lt;</span><span class="token number">10</span><span class="token punctuation">;</span> j<span class="token operator">++</span><span class="token punctuation">&#123;</span><span class="token keyword">if</span> j <span class="token operator">==</span> <span class="token number">2</span> <span class="token punctuation">&#123;</span>flag <span class="token operator">=</span> <span class="token boolean">true</span><span class="token keyword">break</span>  <span class="token comment">// è·³å‡ºå†…å±‚å¾ªç¯</span><span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span class="token keyword">if</span> flag <span class="token operator">==</span> <span class="token boolean">true</span><span class="token punctuation">&#123;</span><span class="token keyword">break</span>  <span class="token comment">// è·³å‡ºå¤–å±‚å¾ªç¯</span><span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span class="token comment">// ä½¿ç”¨goto è·³å‡ºå¾ªç¯</span><span class="token keyword">for</span> i <span class="token operator">:=</span> <span class="token number">0</span><span class="token punctuation">;</span> i<span class="token operator">&lt;</span><span class="token number">10</span><span class="token punctuation">;</span> i<span class="token operator">++</span> <span class="token punctuation">&#123;</span><span class="token keyword">for</span> j <span class="token operator">:=</span> <span class="token number">0</span><span class="token punctuation">;</span> j<span class="token operator">&lt;</span><span class="token number">10</span><span class="token punctuation">;</span> j<span class="token operator">++</span><span class="token punctuation">&#123;</span><span class="token keyword">goto</span> xx   <span class="token comment">// è·³è½¬åˆ°xxæ ‡ç­¾</span><span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span>xx<span class="token punctuation">:</span>  <span class="token comment">// labelæ ‡ç­¾</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h2 id="å°ç»“"><a href="#å°ç»“" class="headerlink" title="å°ç»“"></a>å°ç»“</h2><h3 id="å†…å®¹å›é¡¾"><a href="#å†…å®¹å›é¡¾" class="headerlink" title="å†…å®¹å›é¡¾"></a>å†…å®¹å›é¡¾</h3><ul><li><p>GOPATH: goè¯­è¨€çš„å·¥ä½œåŒºï¼Œ ä»£ç å­˜æ”¾è·¯å¾„</p></li><li><p>go env: å‘½ä»¤è¡Œè¾“å…¥ï¼Œåˆ—å‡ºå’Œgoç›¸å…³çš„ç¯å¢ƒå˜é‡</p><p><img src="https://zhangtq-blog.oss-cn-hangzhou.aliyuncs.com/content_picture/image-20230401112155016.png" alt="image-20230401112155016"></p></li></ul><ul><li>GOPATH&#x2F;binæ·»åŠ åˆ°ç¯å¢ƒå˜é‡ï¼š go installå‘½ä»¤ä¼šæŠŠç”Ÿæˆçš„äºŒè¿›åˆ¶å¯æ‰§è¡Œæ–‡ä»¶æ‹·è´åˆ°GOPATH&#x2F;binè·¯å¾„ä¸‹</li></ul><ul><li>GOROOT: å®‰è£…goè¯­è¨€çš„è·¯å¾„</li></ul><h3 id="å‘½ä»¤"><a href="#å‘½ä»¤" class="headerlink" title="å‘½ä»¤"></a>å‘½ä»¤</h3><ul><li>go build  ç¼–è¯‘go ç¨‹åº</li><li>go build -o â€œxxxx.exeâ€  ç¼–è¯‘æˆxxx.exeå¯æ‰§è¡Œæ–‡ä»¶</li><li>go run main.go åƒæ‰§è¡Œè„šæœ¬ä¸€æ ·æ‰§è¡Œmain.go æ–‡ä»¶</li><li>go install  å…ˆç¼–è¯‘åæ‹·è´</li></ul><h3 id="go-è¯­è¨€æ–‡ä»¶åŸºç¡€è¯­æ³•"><a href="#go-è¯­è¨€æ–‡ä»¶åŸºç¡€è¯­æ³•" class="headerlink" title="go è¯­è¨€æ–‡ä»¶åŸºç¡€è¯­æ³•"></a>go è¯­è¨€æ–‡ä»¶åŸºç¡€è¯­æ³•</h3><p>å­˜æ”¾goæºä»£ç çš„æ–‡ä»¶åç¼€åæ˜¯.go</p><p>æ–‡ä»¶ç¬¬ä¸€è¡Œï¼š packageå…³é”®å­—å£°æ˜åŒ…</p><p>å¦‚æœè¦ç¼–å†™ä¸€ä¸ªå¯æ‰§è¡Œæ–‡ä»¶ï¼Œå¿…é¡»è¦æœ‰mainåŒ…å’Œmianå…¥å£å‡½æ•°</p><p>main å‡½æ•°å¤–çš„è¯­å¥å¿…é¡»ä»¥å…³é”®å­—å¼€å¤´</p><p>å‡½æ•°å†…éƒ¨å®šä¹‰çš„å˜é‡å¿…é¡»ä½¿ç”¨</p><pre class="line-numbers language-go" data-language="go"><code class="language-go"><span class="token keyword">package</span> main<span class="token comment">// å•è¡Œæ³¨é‡Š</span><span class="token comment">/* å¤šè¡Œæ³¨é‡Š */</span><span class="token keyword">func</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>    <span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h3 id="å˜é‡å’Œå¸¸é‡"><a href="#å˜é‡å’Œå¸¸é‡" class="headerlink" title="å˜é‡å’Œå¸¸é‡"></a>å˜é‡å’Œå¸¸é‡</h3><h4 id="å˜é‡å£°æ˜"><a href="#å˜é‡å£°æ˜" class="headerlink" title="å˜é‡å£°æ˜"></a>å˜é‡å£°æ˜</h4><ul><li><p>ä¸‰ç§å£°æ˜æ–¹å¼</p><ul><li><p>var name string</p></li><li><p>var name &#x3D; â€œæ²™æ²³â€</p></li><li><p>å‡½æ•°å†…éƒ¨ä¸“å± name :&#x3D; â€œæ²™æ²³â€</p></li></ul></li><li><p>åŒ¿åå˜é‡</p><ul><li>æŸäº›å˜é‡å¿…é¡»æ¥å—ä½†æ˜¯ä¸ä½¿ç”¨æ—¶ ç”¨_</li></ul></li></ul><h4 id="å¸¸é‡-1"><a href="#å¸¸é‡-1" class="headerlink" title="å¸¸é‡"></a>å¸¸é‡</h4><ul><li><p>constå£°æ˜</p><ul><li>const PI&#x3D;3.14</li></ul></li><li><p>iota</p><pre><code>- iotaåœ¨constå…³é”®å­—å‡ºç°çš„æ—¶å€™ç½®ä¸º0- constä¸­æ¯æ–°å¢ä¸€è¡Œï¼ŒiotaåŠ 1</code></pre></li></ul><h3 id="æµç¨‹æ§åˆ¶"><a href="#æµç¨‹æ§åˆ¶" class="headerlink" title="æµç¨‹æ§åˆ¶"></a>æµç¨‹æ§åˆ¶</h3><h4 id="if-1"><a href="#if-1" class="headerlink" title="if"></a>if</h4><pre class="line-numbers language-go" data-language="go"><code class="language-go"><span class="token keyword">var</span> age <span class="token operator">=</span> <span class="token number">20</span><span class="token keyword">if</span> age <span class="token operator">></span> <span class="token number">18</span><span class="token punctuation">&#123;</span>fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token string">"æˆå¹´äºº"</span><span class="token punctuation">)</span><span class="token punctuation">&#125;</span> <span class="token keyword">else</span><span class="token punctuation">&#123;</span>fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token string">"å­¦æˆ"</span><span class="token punctuation">)</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h4 id="for-1"><a href="#for-1" class="headerlink" title="for"></a>for</h4><pre class="line-numbers language-go" data-language="go"><code class="language-go"><span class="token comment">// æ–¹å¼ä¸€</span><span class="token keyword">for</span> i<span class="token operator">:=</span><span class="token number">0</span><span class="token punctuation">;</span>i<span class="token operator">&lt;</span><span class="token number">10</span><span class="token punctuation">;</span>i<span class="token operator">++</span><span class="token punctuation">&#123;</span>fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span>i<span class="token punctuation">)</span><span class="token punctuation">&#125;</span><span class="token comment">// æ–¹å¼äºŒ</span><span class="token keyword">var</span> i<span class="token operator">=</span><span class="token number">0</span><span class="token keyword">for</span> <span class="token punctuation">;</span>i<span class="token operator">&lt;</span><span class="token number">10</span><span class="token punctuation">;</span>i<span class="token operator">++</span><span class="token punctuation">&#123;</span>    fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span>i<span class="token punctuation">)</span><span class="token punctuation">&#125;</span><span class="token comment">// æ–¹å¼ä¸‰</span><span class="token keyword">var</span> j <span class="token operator">=</span> <span class="token number">0</span><span class="token keyword">for</span> j<span class="token operator">&lt;</span><span class="token number">10</span> <span class="token punctuation">&#123;</span>    <span class="token keyword">for</span><span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token string">"æ— çº¿å¾ªç¯"</span><span class="token punctuation">)</span><span class="token punctuation">&#125;</span><span class="token keyword">for</span> i<span class="token punctuation">,</span> v <span class="token operator">:=</span> <span class="token keyword">range</span> <span class="token string">"æ²™æ²³æœ‰æ²™åˆæœ‰æ²³"</span> <span class="token punctuation">&#123;</span>    fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span>i<span class="token punctuation">,</span> v<span class="token punctuation">)</span>    fmt<span class="token punctuation">.</span><span class="token function">Printf</span><span class="token punctuation">(</span>"<span class="token operator">%</span>d <span class="token operator">%</span>c\"<span class="token punctuation">,</span> i<span class="token punctuation">,</span> v<span class="token punctuation">)</span><span class="token punctuation">&#125;</span>                              <span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h3 id="åŸºæœ¬æ•°æ®ç±»å‹"><a href="#åŸºæœ¬æ•°æ®ç±»å‹" class="headerlink" title="åŸºæœ¬æ•°æ®ç±»å‹"></a>åŸºæœ¬æ•°æ®ç±»å‹</h3><ul><li><p>æ•´å½¢ï¼š</p><ul><li><p>æ— ç¬¦å·ï¼šuint8ã€uint16ã€uint32ã€uint64</p></li><li><p>å¸¦ç¬¦å·ï¼šint8ã€int16ã€int32ã€int64</p><p><em>intå…·ä½“æ˜¯32ä½è¿˜æ˜¯64ä½çœ‹æ“ä½œç³»ç»Ÿ</em></p></li><li><p>uintptr: è¡¨ç¤ºæŒ‡é’ˆ</p></li><li></li></ul></li><li><p>æµ®ç‚¹å‹ï¼š</p><ul><li>float64ã€float32</li><li>goè¯­è¨€é‡Œæµ®ç‚¹æ•°é»˜è®¤ffloat64</li></ul></li><li><p>å¤æ•°ï¼š</p><ul><li>complex128å’Œcomplex64</li></ul></li><li><p>å¸ƒå°”å€¼ï¼š</p><ul><li>trueå’Œflase</li><li>ä¸èƒ½å’Œå…¶ä»–å­—ç¬¦è½¬åšè½¬æ¢</li></ul></li><li><p>å­—ç¬¦ä¸²</p><ul><li>å¸¸ç”¨æ–¹æ³•</li><li>ä¸èƒ½è¢«ç›´æ¥ä¿®æ”¹</li></ul></li><li><p>å­—ç¬¦ä¸²ã€å­—ç¬¦ã€å­—èŠ‚éƒ½æ˜¯ä»€ä¹ˆï¼Ÿ</p><ul><li>å­—ç¬¦ä¸²ï¼šåŒå¼•å·åŒ…è£¹</li><li>å­—ç¬¦ï¼šå•å¼•å·åŒ…è£¹çš„æ˜¯å­—ç¬¦ï¼Œå•ä¸ªå­—æ¯ï¼Œç¬¦å·ï¼Œå•ä¸ªæ–‡å­—</li><li>å­—èŠ‚ï¼š1byte&#x3D;8bit</li><li>goè¯­è¨€ä¸­ç»™çš„å­—ç¬¦ä¸²éƒ½æ˜¯UTF8ç¼–ç ï¼ŒUTF8ä¸­ä¸€ä¸ªæ±‰å­—å¸¸å ç”¨3ä¸ªå­—èŠ‚</li></ul></li></ul><h2 id="è¿ç®—ç¬¦"><a href="#è¿ç®—ç¬¦" class="headerlink" title="è¿ç®—ç¬¦"></a>è¿ç®—ç¬¦</h2><ul><li>ç®—æ•°è¿ç®—ç¬¦</li></ul><p><img src="https://zhangtq-blog.oss-cn-hangzhou.aliyuncs.com/content_picture/image-20230403210843682.png" alt="image-20230403210843682"></p><ul><li>é€»è¾‘è¿ç®—ç¬¦</li></ul><p><img src="https://zhangtq-blog.oss-cn-hangzhou.aliyuncs.com/content_picture/image-20230403210941626.png" alt="image-20230403210941626"></p><ul><li>ä½è¿ç®—ç¬¦</li></ul><p><img src="https://zhangtq-blog.oss-cn-hangzhou.aliyuncs.com/content_picture/image-20230403211458044.png" alt="image-20230403211458044"></p><ul><li>èµ‹å€¼è¿ç®—ç¬¦</li></ul><p><img src="https://zhangtq-blog.oss-cn-hangzhou.aliyuncs.com/content_picture/image-20230403213421601.png" alt="image-20230403213421601"></p><pre class="line-numbers language-go" data-language="go"><code class="language-go"><span class="token keyword">package</span> main<span class="token keyword">import</span> <span class="token string">"fmt"</span><span class="token comment">// æµ‹è¯•è¿ç®—ç¬¦</span><span class="token keyword">func</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span><span class="token keyword">var</span><span class="token punctuation">(</span>a <span class="token operator">=</span> <span class="token number">5</span>b <span class="token operator">=</span> <span class="token number">8</span><span class="token punctuation">)</span>fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span>a<span class="token punctuation">,</span> b<span class="token punctuation">)</span><span class="token comment">// ç®—æœ¯è¿ç®—å‘</span>fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span> a <span class="token operator">+</span> b<span class="token punctuation">)</span>fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span> a <span class="token operator">-</span> b<span class="token punctuation">)</span>fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span> a <span class="token operator">*</span> b<span class="token punctuation">)</span>fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span> a <span class="token operator">/</span> b<span class="token punctuation">)</span>fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span> a <span class="token operator">%</span> b<span class="token punctuation">)</span>a <span class="token operator">++</span>   <span class="token comment">// a = a+1</span>b <span class="token operator">--</span>   <span class="token comment">// b = b-1</span><span class="token comment">// å…³ç³»è¿ç®—ç¬¦</span>fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span> a <span class="token operator">==</span> b<span class="token punctuation">)</span>fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span> a <span class="token operator">&lt;</span> b<span class="token punctuation">)</span>fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span> a <span class="token operator">&lt;=</span> b<span class="token punctuation">)</span>fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span> a <span class="token operator">></span> b<span class="token punctuation">)</span>fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span> a <span class="token operator">>=</span> b<span class="token punctuation">)</span>fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span> a <span class="token operator">!=</span> b<span class="token punctuation">)</span><span class="token comment">// é€»è¾‘è¿ç®—ç¬¦</span>age <span class="token operator">:=</span> <span class="token number">22</span><span class="token comment">// and </span><span class="token keyword">if</span> age <span class="token operator">></span><span class="token number">18</span> <span class="token operator">&amp;&amp;</span>age<span class="token operator">&lt;</span><span class="token number">60</span><span class="token punctuation">&#123;</span>fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token string">"è‹¦é€¼ä¸Šç­"</span><span class="token punctuation">)</span><span class="token punctuation">&#125;</span> <span class="token keyword">else</span> <span class="token punctuation">&#123;</span>fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token string">"ä¸ç”¨ä¸Šç­"</span><span class="token punctuation">)</span><span class="token punctuation">&#125;</span><span class="token comment">// or</span><span class="token keyword">if</span> age<span class="token operator">&lt;</span><span class="token number">18</span> <span class="token operator">||</span> age <span class="token operator">></span> <span class="token number">60</span> <span class="token punctuation">&#123;</span>fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token string">"ä¸ç”¨ä¸Šç­"</span><span class="token punctuation">)</span><span class="token punctuation">&#125;</span> <span class="token keyword">else</span> <span class="token punctuation">&#123;</span>fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token string">"è‹¦é€¼ä¸Šç­"</span><span class="token punctuation">)</span><span class="token punctuation">&#125;</span><span class="token comment">// å–å ï¼</span>is_finished <span class="token operator">:=</span> <span class="token boolean">false</span>fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span>is_finished<span class="token punctuation">)</span>fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token operator">!</span>is_finished<span class="token punctuation">)</span><span class="token comment">// ä½è¿ç®— é’ˆå¯¹äºŒè¿›åˆ¶æ•°</span><span class="token comment">// 5 çš„äºŒè¿›åˆ¶ 0101</span><span class="token comment">// 2 çš„äºŒè¿›åˆ¶ 0010</span><span class="token comment">// &amp;ï¼š æŒ‰ä½ä¸ å…¨1ä¸º1ï¼Œæœ‰0åˆ™0</span>fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token number">5</span> <span class="token operator">&amp;</span> <span class="token number">2</span><span class="token punctuation">)</span>  <span class="token comment">// 0000</span><span class="token comment">// |: æŒ‰ä½æˆ– æœ‰1ä¸º1</span>fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token number">5</span> <span class="token operator">|</span> <span class="token number">2</span><span class="token punctuation">)</span>  <span class="token comment">// 0111</span><span class="token comment">// ^: æŒ‰ä½å¼‚æˆ– ä¸¤ä½ä¸åŒåˆ™ä¸º1</span>fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token number">5</span><span class="token operator">^</span><span class="token number">2</span><span class="token punctuation">)</span> <span class="token comment">// 0111</span><span class="token comment">// &lt;&lt;: å·¦ç§»æŒ‡å®šä½æ•°  0101</span>fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span> <span class="token number">5</span> <span class="token operator">&lt;&lt;</span> <span class="token number">1</span><span class="token punctuation">)</span>  <span class="token comment">//1010  10\</span>fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token number">1</span> <span class="token operator">&lt;&lt;</span> <span class="token number">10</span><span class="token punctuation">)</span>  <span class="token comment">// 10000000000 => 1024</span><span class="token comment">// >> å³ç§»</span>fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token number">5</span> <span class="token operator">>></span> <span class="token number">1</span> <span class="token punctuation">)</span> <span class="token comment">// 0010</span>fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token number">5</span> <span class="token operator">>></span> <span class="token number">2</span> <span class="token punctuation">)</span> <span class="token comment">// 0001</span>fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token number">5</span> <span class="token operator">>></span> <span class="token number">3</span> <span class="token punctuation">)</span> <span class="token comment">// 0000</span><span class="token comment">/*var m = int8(1)fmt.Println(m&lt;&lt;10) // è¯¥å¥ä¼šæœ‰é—®é¢˜ï¼Œè¶…å‡ºä½æ•°*/</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h2 id="æ•°ç»„"><a href="#æ•°ç»„" class="headerlink" title="æ•°ç»„"></a>æ•°ç»„</h2><ul><li><p>å­˜æ”¾å…ƒç´ çš„å®¹å™¨</p></li><li><p>å¿…é¡»æŒ‡å®šå­˜æ”¾å…ƒç´ çš„ç±»å‹å’Œå®¹é‡ï¼ˆé•¿åº¦ï¼‰</p></li><li><p>æ•°ç»„çš„é•¿åº¦æ˜¯æ•°ç»„ç±»å‹çš„ä¸€éƒ¨åˆ†</p></li></ul><h3 id="å®šä¹‰ï¼š"><a href="#å®šä¹‰ï¼š" class="headerlink" title="å®šä¹‰ï¼š"></a>å®šä¹‰ï¼š</h3><pre class="line-numbers language-none"><code class="language-none">var æ•°ç»„å˜é‡å[å…ƒç´ æ•°é‡]T<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>æ¯”å¦‚ var a[5] int, æ•°ç»„çš„é•¿åº¦å¿…é¡»æ˜¯å¸¸é‡ï¼Œå¹¶ä¸”é•¿åº¦æ˜¯æ•°ç»„çš„ä¸€éƒ¨åˆ†ï¼Œä¸€æ—¦å®šä¹‰ï¼Œé•¿åº¦ä¸èƒ½æ”¹å˜ã€‚[5]int å’Œ[10]intæ˜¯ä¸åŒçš„ç±»å‹</p><pre class="line-numbers language-go" data-language="go"><code class="language-go"><span class="token keyword">var</span> a <span class="token punctuation">[</span><span class="token number">3</span><span class="token punctuation">]</span><span class="token builtin">int</span><span class="token keyword">var</span> b <span class="token punctuation">[</span><span class="token number">4</span><span class="token punctuation">]</span><span class="token builtin">int</span>a <span class="token operator">=</span> b <span class="token comment">// ä¸å¯ä»¥è¿™æ ·ï¼Œå› ä¸ºæ­¤æ—¶aå’Œbæ˜¯ä¸åŒçš„ç±»å‹</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre><h3 id="åˆå§‹åŒ–"><a href="#åˆå§‹åŒ–" class="headerlink" title="åˆå§‹åŒ–"></a>åˆå§‹åŒ–</h3><p>æ–¹æ³•ä¸€ï¼š</p><p>åˆå§‹åŒ–æ•°ç»„æ˜¯å¯ä»¥ä½¿ç”¨åˆå§‹åŒ–åˆ—è¡¨æ¥è®¾ç½®æ•°ç»„å…ƒç´ çš„å€¼</p><pre class="line-numbers language-go" data-language="go"><code class="language-go"><span class="token keyword">func</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span><span class="token keyword">var</span> a <span class="token punctuation">[</span><span class="token number">3</span><span class="token punctuation">]</span><span class="token builtin">int</span>    <span class="token keyword">var</span> b <span class="token punctuation">[</span><span class="token number">3</span><span class="token punctuation">]</span><span class="token builtin">int</span><span class="token punctuation">&#123;</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">&#125;</span>    <span class="token keyword">var</span> cityArray <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">3</span><span class="token punctuation">]</span><span class="token builtin">string</span><span class="token punctuation">&#123;</span><span class="token string">"åŒ—äº¬"</span><span class="token punctuation">,</span> <span class="token string">"ä¸Šæµ·"</span><span class="token punctuation">,</span> <span class="token string">"æ·±åœ³"</span><span class="token punctuation">&#125;</span>    fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span>a<span class="token punctuation">)</span>    fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span>b<span class="token punctuation">)</span>    fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span>cityArray<span class="token punctuation">)</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>æ–¹æ³•äºŒï¼š</p><p>ç¼–è¯‘å™¨æ ¹æ®åˆå§‹å€¼çš„ä¸ªæ•°è‡ªè¡Œæ¨æ–­æ•°ç»„çš„é•¿åº¦</p><pre class="line-numbers language-go" data-language="go"><code class="language-go"><span class="token keyword">func</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span><span class="token keyword">var</span> testArray <span class="token punctuation">[</span><span class="token number">3</span><span class="token punctuation">]</span><span class="token builtin">int</span><span class="token keyword">var</span> numArray <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token operator">...</span><span class="token punctuation">]</span><span class="token builtin">int</span><span class="token punctuation">&#123;</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">&#125;</span>    <span class="token keyword">var</span> cityArray <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token operator">...</span><span class="token punctuation">]</span><span class="token builtin">string</span><span class="token punctuation">&#123;</span><span class="token string">"åŒ—äº¬"</span>ï¼Œ<span class="token string">"ä¸Šæµ·"</span><span class="token punctuation">&#125;</span>    <span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>æ–¹æ³•ä¸‰ï¼š</p><p>æŒ‡å®šç´¢å¼•å€¼çš„æ–¹å¼åˆå§‹åŒ–æ•°ç»„</p><pre class="line-numbers language-go" data-language="go"><code class="language-go"><span class="token keyword">func</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>a <span class="token operator">:=</span> <span class="token punctuation">[</span><span class="token operator">...</span><span class="token punctuation">]</span><span class="token builtin">int</span><span class="token punctuation">&#123;</span><span class="token number">1</span><span class="token punctuation">:</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">:</span><span class="token number">5</span><span class="token punctuation">&#125;</span>fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span>a<span class="token punctuation">)</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre><h3 id="æ•°ç»„çš„éå†"><a href="#æ•°ç»„çš„éå†" class="headerlink" title="æ•°ç»„çš„éå†"></a>æ•°ç»„çš„éå†</h3><pre class="line-numbers language-go" data-language="go"><code class="language-go"><span class="token keyword">func</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>    <span class="token keyword">var</span> a <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token operator">...</span><span class="token punctuation">]</span><span class="token builtin">string</span><span class="token punctuation">&#123;</span><span class="token string">"åŒ—äº¬"</span>ï¼Œ<span class="token string">"ä¸Šæµ·"</span><span class="token punctuation">,</span> <span class="token string">"æ·±åœ³"</span><span class="token punctuation">&#125;</span>        <span class="token keyword">for</span> i <span class="token operator">:=</span> <span class="token number">0</span><span class="token punctuation">;</span>i <span class="token operator">&lt;</span> <span class="token function">len</span><span class="token punctuation">(</span>a<span class="token punctuation">)</span><span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">&#123;</span>        fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span>a<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">)</span>    <span class="token punctuation">&#125;</span>        <span class="token keyword">for</span> index<span class="token punctuation">,</span> value <span class="token operator">:=</span> <span class="token keyword">range</span> a<span class="token punctuation">&#123;</span>        fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span>index<span class="token punctuation">,</span> value<span class="token punctuation">)</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h3 id="å¤šç»´æ•°ç»„çš„å®šä¹‰"><a href="#å¤šç»´æ•°ç»„çš„å®šä¹‰" class="headerlink" title="å¤šç»´æ•°ç»„çš„å®šä¹‰"></a>å¤šç»´æ•°ç»„çš„å®šä¹‰</h3><pre class="line-numbers language-go" data-language="go"><code class="language-go"><span class="token keyword">func</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>    a <span class="token operator">:=</span> <span class="token punctuation">[</span><span class="token number">3</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span><span class="token builtin">string</span><span class="token punctuation">&#123;</span>        <span class="token punctuation">&#123;</span><span class="token string">"åŒ—äº¬"</span>ï¼Œ<span class="token string">"ä¸Šæµ·"</span><span class="token punctuation">&#125;</span>ï¼Œ        <span class="token punctuation">&#123;</span><span class="token string">"å¹¿å·"</span>ï¼Œ <span class="token string">"å¤©æ´¥"</span><span class="token punctuation">&#125;</span>ï¼Œ        <span class="token punctuation">&#123;</span><span class="token string">"æˆéƒ½"</span>ï¼Œ<span class="token string">"é‡åº†"</span><span class="token punctuation">&#125;</span>    <span class="token punctuation">&#125;</span>    fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span>a<span class="token punctuation">)</span> <span class="token comment">//[[åŒ—äº¬ ä¸Šæµ·] [å¹¿å· æ·±åœ³] [æˆéƒ½ é‡åº†]]</span>    fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span>a<span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token comment">//æ”¯æŒç´¢å¼•å–å€¼:é‡åº†</span>    <span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h3 id="äºŒç»´æ•°ç»„çš„éå†"><a href="#äºŒç»´æ•°ç»„çš„éå†" class="headerlink" title="äºŒç»´æ•°ç»„çš„éå†"></a>äºŒç»´æ•°ç»„çš„éå†</h3><pre class="line-numbers language-go" data-language="go"><code class="language-go"><span class="token keyword">func</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>a <span class="token operator">:=</span> <span class="token punctuation">[</span><span class="token number">3</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span><span class="token builtin">string</span><span class="token punctuation">&#123;</span><span class="token punctuation">&#123;</span><span class="token string">"åŒ—äº¬"</span><span class="token punctuation">,</span> <span class="token string">"ä¸Šæµ·"</span><span class="token punctuation">&#125;</span><span class="token punctuation">,</span><span class="token punctuation">&#123;</span><span class="token string">"å¹¿å·"</span><span class="token punctuation">,</span> <span class="token string">"æ·±åœ³"</span><span class="token punctuation">&#125;</span><span class="token punctuation">,</span><span class="token punctuation">&#123;</span><span class="token string">"æˆéƒ½"</span><span class="token punctuation">,</span> <span class="token string">"é‡åº†"</span><span class="token punctuation">&#125;</span><span class="token punctuation">,</span><span class="token punctuation">&#125;</span>        <span class="token keyword">for</span> <span class="token boolean">_</span><span class="token punctuation">,</span> v <span class="token operator">:=</span> <span class="token keyword">range</span> a<span class="token punctuation">&#123;</span>        <span class="token keyword">for</span> <span class="token boolean">_</span><span class="token punctuation">,</span> vv <span class="token operator">:=</span> <span class="token keyword">range</span> v<span class="token punctuation">&#123;</span>            fmt<span class="token punctuation">.</span><span class="token function">Printf</span><span class="token punctuation">(</span><span class="token string">"%s\t"</span><span class="token punctuation">,</span> vv<span class="token punctuation">)</span>        <span class="token punctuation">&#125;</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><div class="uk-alert uk-alert-danger"><i class="fas fa-exclamation-triangle"></i> æ³¨æ„ï¼šå¤šç»´æ•°ç»„åªæœ‰ç¬¬ä¸€å±‚å¯ä»¥ä½¿ç”¨...æ¥è®©ç¼–è¯‘å™¨æ¨åˆ°æ•°ç»„é•¿åº¦</div><pre class="line-numbers language-go" data-language="go"><code class="language-go"><span class="token comment">//æ”¯æŒçš„å†™æ³•</span>a <span class="token operator">:=</span> <span class="token punctuation">[</span><span class="token operator">...</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span><span class="token builtin">string</span><span class="token punctuation">&#123;</span><span class="token punctuation">&#123;</span><span class="token string">"åŒ—äº¬"</span><span class="token punctuation">,</span> <span class="token string">"ä¸Šæµ·"</span><span class="token punctuation">&#125;</span><span class="token punctuation">,</span><span class="token punctuation">&#123;</span><span class="token string">"å¹¿å·"</span><span class="token punctuation">,</span> <span class="token string">"æ·±åœ³"</span><span class="token punctuation">&#125;</span><span class="token punctuation">,</span><span class="token punctuation">&#123;</span><span class="token string">"æˆéƒ½"</span><span class="token punctuation">,</span> <span class="token string">"é‡åº†"</span><span class="token punctuation">&#125;</span><span class="token punctuation">,</span><span class="token punctuation">&#125;</span><span class="token comment">//ä¸æ”¯æŒå¤šç»´æ•°ç»„çš„å†…å±‚ä½¿ç”¨...</span>b <span class="token operator">:=</span> <span class="token punctuation">[</span><span class="token number">3</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token operator">...</span><span class="token punctuation">]</span><span class="token builtin">string</span><span class="token punctuation">&#123;</span><span class="token punctuation">&#123;</span><span class="token string">"åŒ—äº¬"</span><span class="token punctuation">,</span> <span class="token string">"ä¸Šæµ·"</span><span class="token punctuation">&#125;</span><span class="token punctuation">,</span><span class="token punctuation">&#123;</span><span class="token string">"å¹¿å·"</span><span class="token punctuation">,</span> <span class="token string">"æ·±åœ³"</span><span class="token punctuation">&#125;</span><span class="token punctuation">,</span><span class="token punctuation">&#123;</span><span class="token string">"æˆéƒ½"</span><span class="token punctuation">,</span> <span class="token string">"é‡åº†"</span><span class="token punctuation">&#125;</span><span class="token punctuation">,</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h3 id="æ•°ç»„æ˜¯å€¼ç±»å‹"><a href="#æ•°ç»„æ˜¯å€¼ç±»å‹" class="headerlink" title="æ•°ç»„æ˜¯å€¼ç±»å‹"></a>æ•°ç»„æ˜¯å€¼ç±»å‹</h3><p>æ•°ç»„æ—¶å€¼ç±»å‹(æ¯æ¬¡æ‹·è´éƒ½æ˜¯å®Œå…¨æ‹·è´)ï¼Œ åŒºåˆ«äºå¼•ç”¨ç±»å‹</p><pre class="line-numbers language-go" data-language="go"><code class="language-go">b1 <span class="token operator">:=</span> <span class="token punctuation">[</span><span class="token number">3</span><span class="token punctuation">]</span><span class="token builtin">int</span><span class="token punctuation">&#123;</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">&#125;</span>b2 <span class="token operator">:=</span> b1b2<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token number">100</span>fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span>b1<span class="token punctuation">,</span> b2<span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre><h3 id="ç»ƒä¹ "><a href="#ç»ƒä¹ " class="headerlink" title="ç»ƒä¹ "></a>ç»ƒä¹ </h3><ol><li><p>æ±‚æ•°ç»„[1, 3, 5, 7, 9]çš„å’Œ</p><pre class="line-numbers language-go" data-language="go"><code class="language-go">totalNum <span class="token operator">:=</span> <span class="token number">0</span><span class="token keyword">for</span> <span class="token boolean">_</span><span class="token punctuation">,</span> value <span class="token operator">:=</span> <span class="token keyword">range</span> numList <span class="token punctuation">&#123;</span>totalNum <span class="token operator">+=</span> valuefmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span>totalNum<span class="token punctuation">)</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre></li><li><p>æ‰¾å‡ºæ•°ç»„ä¸­å’Œä¸ºæŒ‡å®šå€¼çš„ä¸¤ä¸ªå…ƒç´ çš„ä¸‹æ ‡ï¼Œæ¯”å¦‚ä»æ•°ç»„<code>[1, 3, 5, 7, 8]</code>ä¸­æ‰¾å‡ºå’Œä¸º8çš„ä¸¤ä¸ªå…ƒç´ çš„ä¸‹æ ‡åˆ†åˆ«ä¸º<code>(0,3)</code>å’Œ<code>(1,2)</code>ã€‚</p><pre class="line-numbers language-go" data-language="go"><code class="language-go">numArray <span class="token operator">:=</span> <span class="token punctuation">[</span><span class="token operator">...</span><span class="token punctuation">]</span><span class="token builtin">int</span><span class="token punctuation">&#123;</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">,</span> <span class="token number">7</span><span class="token punctuation">,</span> <span class="token number">8</span><span class="token punctuation">&#125;</span><span class="token keyword">for</span> index1<span class="token punctuation">,</span> value1 <span class="token operator">:=</span> <span class="token keyword">range</span> numArray<span class="token punctuation">&#123;</span>target <span class="token operator">:=</span> <span class="token number">8</span> <span class="token operator">-</span> value1<span class="token keyword">for</span> index2<span class="token punctuation">,</span> value2 <span class="token operator">:=</span> <span class="token keyword">range</span> numArray<span class="token punctuation">&#123;</span><span class="token keyword">if</span> value2 <span class="token operator">==</span> target<span class="token punctuation">&#123;</span>fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span>index1<span class="token punctuation">,</span> index2<span class="token punctuation">)</span>   <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span>   <span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></li></ol><h3 id="åˆ‡ç‰‡"><a href="#åˆ‡ç‰‡" class="headerlink" title="åˆ‡ç‰‡"></a>åˆ‡ç‰‡</h3><p>å› ä¸ºæ•°ç»„çš„é•¿åº¦æ˜¯å›ºå®šçš„å¹¶ä¸”æ•°ç»„é•¿åº¦å±äºç±»å‹çš„ä¸€éƒ¨åˆ†ï¼Œæ‰€ä»¥æ•°ç»„æœ‰å¾ˆå¤šçš„å±€é™æ€§ã€‚</p><h4 id="å®šä¹‰"><a href="#å®šä¹‰" class="headerlink" title="å®šä¹‰"></a>å®šä¹‰</h4><p>åˆ‡ç‰‡ï¼ˆSliceï¼‰æ˜¯ä¸€ä¸ªæ‹¥æœ‰ç›¸åŒç±»å‹å…ƒç´ çš„å¯å˜é•¿åº¦çš„åºåˆ—ã€‚å®ƒæ˜¯åŸºäºæ•°ç»„ç±»å‹åšçš„ä¸€å±‚å°è£…ã€‚å®ƒéå¸¸çµæ´»ï¼Œæ”¯æŒè‡ªåŠ¨æ‰©å®¹ã€‚</p><p>åˆ‡ç‰‡æ˜¯ä¸€ä¸ªå¼•ç”¨ç±»å‹ï¼Œå®ƒçš„å†…éƒ¨ç»“æ„åŒ…å«<code>åœ°å€</code>ã€<code>é•¿åº¦</code>å’Œ<code>å®¹é‡</code>ã€‚åˆ‡ç‰‡ä¸€èˆ¬ç”¨äºå¿«é€Ÿåœ°æ“ä½œä¸€å—æ•°æ®é›†åˆã€‚</p><pre class="line-numbers language-go" data-language="go"><code class="language-go"><span class="token keyword">var</span> name <span class="token punctuation">[</span><span class="token punctuation">]</span>T<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>ç¤ºä¾‹</p><pre class="line-numbers language-go" data-language="go"><code class="language-go"><span class="token keyword">var</span> s1 <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token builtin">int</span>    <span class="token comment">//å®šä¹‰ä¸€ä¸ªå­˜æ”¾intç±»å‹å…ƒç´ çš„åˆ‡ç‰‡</span><span class="token keyword">var</span> s2 <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token builtin">string</span> <span class="token comment">//å®šä¹‰ä¸€ä¸ªå­˜æ”¾stringç±»å‹å…ƒç´ çš„åˆ‡ç‰‡</span>fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span>s1<span class="token punctuation">,</span> s2<span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre><h4 id="åˆå§‹åŒ–-1"><a href="#åˆå§‹åŒ–-1" class="headerlink" title="åˆå§‹åŒ–"></a>åˆå§‹åŒ–</h4><pre class="line-numbers language-go" data-language="go"><code class="language-go">s1 <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token builtin">int</span><span class="token punctuation">&#123;</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">&#125;</span>s2 <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token builtin">string</span><span class="token punctuation">&#123;</span><span class="token string">"æ²™æ²³"</span><span class="token punctuation">,</span> <span class="token string">"ç æ±Ÿ"</span><span class="token punctuation">,</span> <span class="token string">"å¹³å±±æ‘"</span><span class="token punctuation">&#125;</span><span class="token keyword">var</span> a <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token builtin">string</span><span class="token keyword">var</span> b <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token builtin">int</span><span class="token punctuation">&#123;</span><span class="token punctuation">&#125;</span><span class="token keyword">var</span> c <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token builtin">bool</span><span class="token punctuation">&#123;</span><span class="token boolean">false</span><span class="token punctuation">,</span> <span class="token boolean">true</span><span class="token punctuation">&#125;</span><span class="token keyword">var</span> d <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token builtin">bool</span><span class="token punctuation">&#123;</span><span class="token boolean">false</span><span class="token punctuation">,</span> <span class="token boolean">true</span><span class="token punctuation">&#125;</span>fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span>a<span class="token punctuation">)</span>fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span>b<span class="token punctuation">)</span>fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span>c<span class="token punctuation">)</span>fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span>d<span class="token punctuation">)</span>fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span>a <span class="token operator">==</span> <span class="token boolean">nil</span><span class="token punctuation">)</span> <span class="token comment">// true</span>fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span>b <span class="token operator">==</span> <span class="token boolean">nil</span><span class="token punctuation">)</span> <span class="token comment">// false</span>fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span>c <span class="token operator">==</span> <span class="token boolean">nil</span><span class="token punctuation">)</span> <span class="token comment">// false</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h4 id="åˆ‡ç‰‡æ¯”è¾ƒ"><a href="#åˆ‡ç‰‡æ¯”è¾ƒ" class="headerlink" title="åˆ‡ç‰‡æ¯”è¾ƒ"></a>åˆ‡ç‰‡æ¯”è¾ƒ</h4><pre class="line-numbers language-go" data-language="go"><code class="language-go"><span class="token keyword">var</span> c <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token builtin">bool</span><span class="token punctuation">&#123;</span><span class="token boolean">false</span><span class="token punctuation">,</span> <span class="token boolean">true</span><span class="token punctuation">&#125;</span><span class="token keyword">var</span> d <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token builtin">bool</span><span class="token punctuation">&#123;</span><span class="token boolean">false</span><span class="token punctuation">,</span> <span class="token boolean">true</span><span class="token punctuation">&#125;</span><span class="token comment">// fmt.Println(c == d)  // åˆ‡ç‰‡æ˜¯å¼•ç”¨ç±»å‹ä¸èƒ½ç›´æ¥æ¯”è¾ƒï¼Œåªèƒ½å’Œnilè¿›è¡Œæ¯”è¾ƒ</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre><h4 id="é•¿åº¦å’Œå®¹é‡"><a href="#é•¿åº¦å’Œå®¹é‡" class="headerlink" title="é•¿åº¦å’Œå®¹é‡"></a>é•¿åº¦å’Œå®¹é‡</h4><pre class="line-numbers language-go" data-language="go"><code class="language-go"><span class="token comment">// åˆ‡ç‰‡æ‹¥æœ‰è‡ªå·±çš„é•¿åº¦å’Œå®¹é‡ï¼Œé€šå¸¸ç”¨lenæ±‚é•¿åº¦ï¼Œç”¨capæ±‚å®¹é‡</span><span class="token comment">// æ³¨æ„len capçš„åŒºåˆ«, åˆ‡ç‰‡çš„å®¹é‡æ˜¯æŒ‡åº•å±‚æ•°ç»„çš„å®¹é‡</span>fmt<span class="token punctuation">.</span><span class="token function">Printf</span><span class="token punctuation">(</span><span class="token string">"len(s1):%d cap(s1): %d\n"</span><span class="token punctuation">,</span> <span class="token function">len</span><span class="token punctuation">(</span>s1<span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token function">len</span><span class="token punctuation">(</span>s1<span class="token punctuation">)</span><span class="token punctuation">)</span>fmt<span class="token punctuation">.</span><span class="token function">Printf</span><span class="token punctuation">(</span><span class="token string">"len(s1):%d cap(s2): %d\n"</span><span class="token punctuation">,</span> <span class="token function">len</span><span class="token punctuation">(</span>s1<span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token function">len</span><span class="token punctuation">(</span>s2<span class="token punctuation">)</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre><h4 id="ç”±æ•°ç»„å¾—åˆ°åˆ‡ç‰‡"><a href="#ç”±æ•°ç»„å¾—åˆ°åˆ‡ç‰‡" class="headerlink" title="ç”±æ•°ç»„å¾—åˆ°åˆ‡ç‰‡"></a>ç”±æ•°ç»„å¾—åˆ°åˆ‡ç‰‡</h4><pre class="line-numbers language-go" data-language="go"><code class="language-go">a1 <span class="token operator">:=</span> <span class="token punctuation">[</span><span class="token operator">...</span><span class="token punctuation">]</span><span class="token builtin">int</span><span class="token punctuation">&#123;</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">,</span> <span class="token number">7</span><span class="token punctuation">,</span> <span class="token number">9</span><span class="token punctuation">,</span> <span class="token number">11</span><span class="token punctuation">,</span> <span class="token number">13</span><span class="token punctuation">&#125;</span>s3 <span class="token operator">:=</span> a1<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">:</span><span class="token number">4</span><span class="token punctuation">]</span>fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span>s3<span class="token punctuation">)</span>s4 <span class="token operator">:=</span> a1<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">:</span><span class="token number">6</span><span class="token punctuation">]</span>fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span>s4<span class="token punctuation">)</span>s5 <span class="token operator">:=</span>a1<span class="token punctuation">[</span><span class="token punctuation">:</span><span class="token number">4</span><span class="token punctuation">]</span>s6 <span class="token operator">:=</span> a1<span class="token punctuation">[</span><span class="token number">3</span><span class="token punctuation">:</span><span class="token punctuation">]</span>s7 <span class="token operator">:=</span>a1<span class="token punctuation">[</span><span class="token punctuation">:</span><span class="token punctuation">]</span>fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span>s5<span class="token punctuation">,</span> s6<span class="token punctuation">,</span> s7<span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h4 id="åˆ‡ç‰‡å†åˆ‡ç‰‡"><a href="#åˆ‡ç‰‡å†åˆ‡ç‰‡" class="headerlink" title="åˆ‡ç‰‡å†åˆ‡ç‰‡"></a>åˆ‡ç‰‡å†åˆ‡ç‰‡</h4><pre class="line-numbers language-go" data-language="go"><code class="language-go"><span class="token comment">// åˆ‡ç‰‡å†åˆ‡ç‰‡</span>s8 <span class="token operator">:=</span> s6<span class="token punctuation">[</span><span class="token number">3</span><span class="token punctuation">:</span><span class="token punctuation">]</span>fmt<span class="token punctuation">.</span><span class="token function">Printf</span><span class="token punctuation">(</span><span class="token string">"len(s8): %d    cap(s8): %d\n"</span><span class="token punctuation">,</span> <span class="token function">len</span><span class="token punctuation">(</span>s8<span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token function">cap</span><span class="token punctuation">(</span>s8<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token comment">// åˆ‡ç‰‡æ˜¯ä¸€ä¸ªå¼•ç”¨ç±»å‹</span>fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token string">"s6:"</span><span class="token punctuation">,</span> s6<span class="token punctuation">)</span>a1<span class="token punctuation">[</span><span class="token number">6</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token number">1300</span>fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token string">"s6:"</span><span class="token punctuation">,</span> s6<span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h4 id="åˆ‡ç‰‡çš„æœ¬è´¨"><a href="#åˆ‡ç‰‡çš„æœ¬è´¨" class="headerlink" title="åˆ‡ç‰‡çš„æœ¬è´¨"></a>åˆ‡ç‰‡çš„æœ¬è´¨</h4><ul><li>åˆ‡ç‰‡çš„æœ¬è´¨å°±æ˜¯å¯¹åº•å±‚æ•°ç»„çš„å°è£…ï¼Œå®ƒåŒ…å«äº†ä¸‰ä¸ªä¿¡æ¯ï¼šåº•å±‚æ•°ç»„çš„æŒ‡é’ˆã€åˆ‡ç‰‡çš„é•¿åº¦ï¼ˆlenï¼‰å’Œåˆ‡ç‰‡çš„å®¹é‡ï¼ˆcapï¼‰ä¸¾ä¸ªä¾‹å­ï¼Œç°åœ¨æœ‰ä¸€ä¸ªæ•°ç»„<code>a := [8]int&#123;0, 1, 2, 3, 4, 5, 6, 7&#125;</code>ï¼Œåˆ‡ç‰‡<code>s1 := a[:5]</code>ï¼Œç›¸åº”ç¤ºæ„å›¾å¦‚ä¸‹</li></ul><p><img src="https://zhangtq-blog.oss-cn-hangzhou.aliyuncs.com/content_picture/image-20230404224746573.png" alt="image-20230404224746573"></p><ul><li>åˆ‡ç‰‡<code>s2 := a[3:6]</code>ï¼Œç›¸åº”ç¤ºæ„å›¾å¦‚ä¸‹ï¼š</li></ul><p><img src="https://zhangtq-blog.oss-cn-hangzhou.aliyuncs.com/content_picture/image-20230404224824013.png" alt="image-20230404224824013"></p><h4 id="åˆ‡ç‰‡åˆ¤ç©º"><a href="#åˆ‡ç‰‡åˆ¤ç©º" class="headerlink" title="åˆ‡ç‰‡åˆ¤ç©º"></a>åˆ‡ç‰‡åˆ¤ç©º</h4><ul><li>è¦æ£€æŸ¥åˆ‡ç‰‡æ˜¯å¦ä¸ºç©ºï¼Œè¯·å§‹ç»ˆä½¿ç”¨len(s) &#x3D;&#x3D; 0æ¥åˆ¤æ–­ï¼Œè€Œä¸åº”è¯¥ä½¿ç”¨s &#x3D;&#x3D; nilæ¥åˆ¤æ–­ã€‚</li></ul><h4 id="åˆ‡ç‰‡æ¯”è¾ƒ-1"><a href="#åˆ‡ç‰‡æ¯”è¾ƒ-1" class="headerlink" title="åˆ‡ç‰‡æ¯”è¾ƒ"></a>åˆ‡ç‰‡æ¯”è¾ƒ</h4><ul><li><p>åˆ‡ç‰‡ä¹‹é—´æ˜¯ä¸èƒ½æ¯”è¾ƒçš„ï¼Œæˆ‘ä»¬ä¸èƒ½ä½¿ç”¨<code>==</code>æ“ä½œç¬¦æ¥åˆ¤æ–­ä¸¤ä¸ªåˆ‡ç‰‡æ˜¯å¦å«æœ‰å…¨éƒ¨ç›¸ç­‰å…ƒç´ ã€‚ åˆ‡ç‰‡å”¯ä¸€åˆæ³•çš„æ¯”è¾ƒæ“ä½œæ˜¯å’Œ<code>nil</code>æ¯”è¾ƒã€‚ ä¸€ä¸ª<code>nil</code>å€¼çš„åˆ‡ç‰‡å¹¶æ²¡æœ‰åº•å±‚æ•°ç»„ï¼Œä¸€ä¸ª<code>nil</code>å€¼çš„åˆ‡ç‰‡çš„é•¿åº¦å’Œå®¹é‡éƒ½æ˜¯0ã€‚ä½†æ˜¯æˆ‘ä»¬ä¸èƒ½è¯´ä¸€ä¸ªé•¿åº¦å’Œå®¹é‡éƒ½æ˜¯0çš„åˆ‡ç‰‡ä¸€å®šæ˜¯<code>nil</code>ï¼Œä¾‹å¦‚ä¸‹é¢çš„ç¤ºä¾‹ï¼š</p><pre class="line-numbers language-go" data-language="go"><code class="language-go"><span class="token keyword">var</span> s1 <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token builtin">int</span>         <span class="token comment">//len(s1)=0;cap(s1)=0;s1==nil</span>s2 <span class="token operator">:=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token builtin">int</span><span class="token punctuation">&#123;</span><span class="token punctuation">&#125;</span>        <span class="token comment">//len(s2)=0;cap(s2)=0;s2!=nil</span>s3 <span class="token operator">:=</span> <span class="token function">make</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token builtin">int</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token comment">//len(s3)=0;cap(s3)=0;s3!=nil</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre></li><li><p>æ‰€ä»¥è¦åˆ¤æ–­ä¸€ä¸ªåˆ‡ç‰‡æ˜¯å¦æ˜¯ç©ºçš„ï¼Œè¦æ˜¯ç”¨<code>len(s) == 0</code>æ¥åˆ¤æ–­ï¼Œä¸åº”è¯¥ä½¿ç”¨<code>s == nil</code>æ¥åˆ¤æ–­ã€‚</p></li></ul><h4 id="åˆ‡ç‰‡èµ‹å€¼æ‹·è´"><a href="#åˆ‡ç‰‡èµ‹å€¼æ‹·è´" class="headerlink" title="åˆ‡ç‰‡èµ‹å€¼æ‹·è´"></a>åˆ‡ç‰‡èµ‹å€¼æ‹·è´</h4><pre class="line-numbers language-go" data-language="go"><code class="language-go"><span class="token keyword">func</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>s1 <span class="token operator">:=</span> <span class="token function">make</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token builtin">int</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">)</span> <span class="token comment">//[0 0 0]</span>s2 <span class="token operator">:=</span> s1             <span class="token comment">//å°†s1ç›´æ¥èµ‹å€¼ç»™s2ï¼Œs1å’Œs2å…±ç”¨ä¸€ä¸ªåº•å±‚æ•°ç»„</span>s2<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token number">100</span>fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span>s1<span class="token punctuation">)</span> <span class="token comment">//[100 0 0]</span>fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span>s2<span class="token punctuation">)</span> <span class="token comment">//[100 0 0]</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h4 id="makeå‡½æ•°ç”Ÿæˆåˆ‡ç‰‡"><a href="#makeå‡½æ•°ç”Ÿæˆåˆ‡ç‰‡" class="headerlink" title="makeå‡½æ•°ç”Ÿæˆåˆ‡ç‰‡"></a>makeå‡½æ•°ç”Ÿæˆåˆ‡ç‰‡</h4><pre class="line-numbers language-go" data-language="go"><code class="language-go"><span class="token keyword">func</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>s1 <span class="token operator">:=</span> <span class="token function">make</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token builtin">int</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">)</span> <span class="token comment">//[0 0 0]</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre><h4 id="åˆ‡ç‰‡çš„éå†"><a href="#åˆ‡ç‰‡çš„éå†" class="headerlink" title="åˆ‡ç‰‡çš„éå†"></a>åˆ‡ç‰‡çš„éå†</h4><pre class="line-numbers language-go" data-language="go"><code class="language-go"><span class="token keyword">func</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>s <span class="token operator">:=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token builtin">int</span><span class="token punctuation">&#123;</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">&#125;</span><span class="token keyword">for</span> i <span class="token operator">:=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> <span class="token function">len</span><span class="token punctuation">(</span>s<span class="token punctuation">)</span><span class="token punctuation">;</span> i<span class="token operator">++</span> <span class="token punctuation">&#123;</span>fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span>i<span class="token punctuation">,</span> s<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">&#125;</span><span class="token keyword">for</span> index<span class="token punctuation">,</span> value <span class="token operator">:=</span> <span class="token keyword">range</span> s <span class="token punctuation">&#123;</span>fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span>index<span class="token punctuation">,</span> value<span class="token punctuation">)</span><span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h4 id="appendæ–¹æ³•"><a href="#appendæ–¹æ³•" class="headerlink" title="appendæ–¹æ³•"></a>appendæ–¹æ³•</h4><pre class="line-numbers language-go" data-language="go"><code class="language-go"><span class="token keyword">var</span> s <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token builtin">int</span>s <span class="token operator">=</span> <span class="token function">append</span><span class="token punctuation">(</span>s<span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">)</span>s <span class="token operator">=</span> <span class="token function">append</span><span class="token punctuation">(</span>s<span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">)</span>s2 <span class="token operator">:=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token builtin">int</span><span class="token punctuation">&#123;</span><span class="token number">5</span><span class="token punctuation">,</span> <span class="token number">6</span><span class="token punctuation">,</span> <span class="token number">7</span><span class="token punctuation">&#125;</span>s <span class="token operator">=</span> <span class="token function">append</span><span class="token punctuation">(</span>s<span class="token punctuation">,</span> s2<span class="token operator">...</span><span class="token punctuation">)</span>fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span>s<span class="token punctuation">)</span><span class="token comment">// é€šè¿‡var å£°æ˜çš„é›¶å€¼åˆ‡ç‰‡å¯ä»¥ç›´æ¥append ,ä¸éœ€è¦åˆå§‹åŒ–ååœ¨append</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h4 id="åˆ‡ç‰‡çš„æ‰©å®¹"><a href="#åˆ‡ç‰‡çš„æ‰©å®¹" class="headerlink" title="åˆ‡ç‰‡çš„æ‰©å®¹"></a>åˆ‡ç‰‡çš„æ‰©å®¹</h4><pre class="line-numbers language-go" data-language="go"><code class="language-go">newcap <span class="token operator">:=</span> old<span class="token punctuation">.</span><span class="token builtin">cap</span>doublecap <span class="token operator">:=</span> newcap <span class="token operator">+</span> newcap<span class="token keyword">if</span> <span class="token builtin">cap</span> <span class="token operator">></span> doublecap <span class="token punctuation">&#123;</span>newcap <span class="token operator">=</span> <span class="token builtin">cap</span><span class="token punctuation">&#125;</span> <span class="token keyword">else</span> <span class="token punctuation">&#123;</span><span class="token keyword">if</span> old<span class="token punctuation">.</span><span class="token builtin">len</span> <span class="token operator">&lt;</span> <span class="token number">1024</span> <span class="token punctuation">&#123;</span>newcap <span class="token operator">=</span> doublecap<span class="token punctuation">&#125;</span> <span class="token keyword">else</span> <span class="token punctuation">&#123;</span><span class="token comment">// Check 0 &lt; newcap to detect overflow</span><span class="token comment">// and prevent an infinite loop.</span><span class="token keyword">for</span> <span class="token number">0</span> <span class="token operator">&lt;</span> newcap <span class="token operator">&amp;&amp;</span> newcap <span class="token operator">&lt;</span> <span class="token builtin">cap</span> <span class="token punctuation">&#123;</span>newcap <span class="token operator">+=</span> newcap <span class="token operator">/</span> <span class="token number">4</span><span class="token punctuation">&#125;</span><span class="token comment">// Set newcap to the requested cap when</span><span class="token comment">// the newcap calculation overflowed.</span><span class="token keyword">if</span> newcap <span class="token operator">&lt;=</span> <span class="token number">0</span> <span class="token punctuation">&#123;</span>newcap <span class="token operator">=</span> <span class="token builtin">cap</span><span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><ul><li>é¦–å…ˆåˆ¤æ–­ï¼Œå¦‚æœæ–°ç”³è¯·å®¹é‡ï¼ˆcapï¼‰å¤§äº2å€çš„æ—§å®¹é‡ï¼ˆold.capï¼‰ï¼Œæœ€ç»ˆå®¹é‡ï¼ˆnewcapï¼‰å°±æ˜¯æ–°ç”³è¯·çš„å®¹é‡ï¼ˆcapï¼‰ã€‚</li><li>å¦åˆ™åˆ¤æ–­ï¼Œå¦‚æœæ—§åˆ‡ç‰‡çš„é•¿åº¦å°äº1024ï¼Œåˆ™æœ€ç»ˆå®¹é‡(newcap)å°±æ˜¯æ—§å®¹é‡(old.cap)çš„ä¸¤å€ï¼Œå³ï¼ˆnewcap&#x3D;doublecapï¼‰ï¼Œ</li><li>å¦åˆ™åˆ¤æ–­ï¼Œå¦‚æœæ—§åˆ‡ç‰‡é•¿åº¦å¤§äºç­‰äº1024ï¼Œåˆ™æœ€ç»ˆå®¹é‡ï¼ˆnewcapï¼‰ä»æ—§å®¹é‡ï¼ˆold.capï¼‰å¼€å§‹å¾ªç¯å¢åŠ åŸæ¥çš„1&#x2F;4ï¼Œå³ï¼ˆnewcap&#x3D;old.cap,for {newcap +&#x3D; newcap&#x2F;4}ï¼‰ç›´åˆ°æœ€ç»ˆå®¹é‡ï¼ˆnewcapï¼‰å¤§äºç­‰äºæ–°ç”³è¯·çš„å®¹é‡(cap)ï¼Œå³ï¼ˆnewcap &gt;&#x3D; capï¼‰</li><li>å¦‚æœæœ€ç»ˆå®¹é‡ï¼ˆcapï¼‰è®¡ç®—å€¼æº¢å‡ºï¼Œåˆ™æœ€ç»ˆå®¹é‡ï¼ˆcapï¼‰å°±æ˜¯æ–°ç”³è¯·å®¹é‡ï¼ˆcapï¼‰ã€‚</li></ul><pre class="line-numbers language-go" data-language="go"><code class="language-go"><span class="token comment">// append æ·»åŠ å…ƒç´ å’Œæ‰©å®¹</span><span class="token keyword">var</span> numSlice <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token builtin">int</span><span class="token keyword">for</span> i <span class="token operator">:=</span><span class="token number">0</span><span class="token punctuation">;</span>i<span class="token operator">&lt;</span><span class="token number">10</span><span class="token punctuation">;</span>i<span class="token operator">++</span><span class="token punctuation">&#123;</span>numSlice <span class="token operator">=</span> <span class="token function">append</span><span class="token punctuation">(</span>numSlice<span class="token punctuation">,</span>i<span class="token punctuation">)</span>fmt<span class="token punctuation">.</span><span class="token function">Printf</span><span class="token punctuation">(</span><span class="token string">"%v  len: %d   cap: %d  ptr:%p\n"</span><span class="token punctuation">,</span> numSlice<span class="token punctuation">,</span> <span class="token function">len</span><span class="token punctuation">(</span>numSlice<span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token function">cap</span><span class="token punctuation">(</span>numSlice<span class="token punctuation">)</span><span class="token punctuation">,</span> numSlice<span class="token punctuation">)</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h4 id="copyå‡½æ•°"><a href="#copyå‡½æ•°" class="headerlink" title="copyå‡½æ•°"></a>copyå‡½æ•°</h4><p>ç”±äºåˆ‡ç‰‡æ˜¯å¼•ç”¨ç±»å‹ï¼Œæ‰€ä»¥aå’Œbå…¶å®éƒ½æŒ‡å‘äº†åŒä¸€å—å†…å­˜åœ°å€ã€‚ä¿®æ”¹bçš„åŒæ—¶açš„å€¼ä¹Ÿä¼šå‘ç”Ÿå˜åŒ–ã€‚</p><p>Goè¯­è¨€å†…å»ºçš„<code>copy()</code>å‡½æ•°å¯ä»¥è¿…é€Ÿåœ°å°†ä¸€ä¸ªåˆ‡ç‰‡çš„æ•°æ®å¤åˆ¶åˆ°å¦å¤–ä¸€ä¸ªåˆ‡ç‰‡ç©ºé—´ä¸­ï¼Œ<code>copy()</code>å‡½æ•°çš„ä½¿ç”¨æ ¼å¼å¦‚ä¸‹</p><pre class="line-numbers language-go" data-language="go"><code class="language-go"><span class="token comment">// copy(destSlice, srcSlice []T)</span><span class="token keyword">func</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span><span class="token comment">// copy()å¤åˆ¶åˆ‡ç‰‡</span>a <span class="token operator">:=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token builtin">int</span><span class="token punctuation">&#123;</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">&#125;</span>c <span class="token operator">:=</span> <span class="token function">make</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token builtin">int</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">)</span><span class="token function">copy</span><span class="token punctuation">(</span>c<span class="token punctuation">,</span> a<span class="token punctuation">)</span>     <span class="token comment">//ä½¿ç”¨copy()å‡½æ•°å°†åˆ‡ç‰‡aä¸­çš„å…ƒç´ å¤åˆ¶åˆ°åˆ‡ç‰‡c</span>fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span>a<span class="token punctuation">)</span> <span class="token comment">//[1 2 3 4 5]</span>fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span>c<span class="token punctuation">)</span> <span class="token comment">//[1 2 3 4 5]</span>c<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token number">1000</span>fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span>a<span class="token punctuation">)</span> <span class="token comment">//[1 2 3 4 5]</span>fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span>c<span class="token punctuation">)</span> <span class="token comment">//[1000 2 3 4 5]</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h4 id="åˆ é™¤å…ƒç´ "><a href="#åˆ é™¤å…ƒç´ " class="headerlink" title="åˆ é™¤å…ƒç´ "></a>åˆ é™¤å…ƒç´ </h4><ul><li>Goè¯­è¨€ä¸­å¹¶æ²¡æœ‰åˆ é™¤åˆ‡ç‰‡å…ƒç´ çš„ä¸“ç”¨æ–¹æ³•ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨åˆ‡ç‰‡æœ¬èº«çš„ç‰¹æ€§æ¥åˆ é™¤å…ƒç´ ã€‚ ä»£ç å¦‚ä¸‹</li></ul><pre class="line-numbers language-go" data-language="go"><code class="language-go"><span class="token keyword">func</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span><span class="token comment">// ä»åˆ‡ç‰‡ä¸­åˆ é™¤å…ƒç´ </span>a <span class="token operator">:=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token builtin">int</span><span class="token punctuation">&#123;</span><span class="token number">30</span><span class="token punctuation">,</span> <span class="token number">31</span><span class="token punctuation">,</span> <span class="token number">32</span><span class="token punctuation">,</span> <span class="token number">33</span><span class="token punctuation">,</span> <span class="token number">34</span><span class="token punctuation">,</span> <span class="token number">35</span><span class="token punctuation">,</span> <span class="token number">36</span><span class="token punctuation">,</span> <span class="token number">37</span><span class="token punctuation">&#125;</span><span class="token comment">// è¦åˆ é™¤ç´¢å¼•ä¸º2çš„å…ƒç´ </span>a <span class="token operator">=</span> <span class="token function">append</span><span class="token punctuation">(</span>a<span class="token punctuation">[</span><span class="token punctuation">:</span><span class="token number">2</span><span class="token punctuation">]</span><span class="token punctuation">,</span> a<span class="token punctuation">[</span><span class="token number">3</span><span class="token punctuation">:</span><span class="token punctuation">]</span><span class="token operator">...</span><span class="token punctuation">)</span>fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span>a<span class="token punctuation">)</span> <span class="token comment">//[30 31 33 34 35 36 37]</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><ul><li>æ€»ç»“ä¸€ä¸‹å°±æ˜¯ï¼šè¦ä»åˆ‡ç‰‡aä¸­åˆ é™¤ç´¢å¼•ä¸º<code>index</code>çš„å…ƒç´ ï¼Œæ“ä½œæ–¹æ³•æ˜¯<code>a = append(a[:index], a[index+1:]...)</code></li></ul><h2 id="æŒ‡é’ˆ"><a href="#æŒ‡é’ˆ" class="headerlink" title="æŒ‡é’ˆ"></a>æŒ‡é’ˆ</h2><blockquote><p>ä»»ä½•ç¨‹åºæ•°æ®è½½å…¥å†…å­˜åï¼Œåœ¨å†…å­˜éƒ½æœ‰ä»–ä»¬çš„åœ°å€ï¼Œè¿™å°±æ˜¯æŒ‡é’ˆã€‚è€Œä¸ºäº†ä¿å­˜ä¸€ä¸ªæ•°æ®åœ¨å†…å­˜ä¸­çš„åœ°å€ï¼Œæˆ‘ä»¬å°±éœ€è¦æŒ‡é’ˆå˜é‡ã€‚</p></blockquote><ul><li>å› æ­¤Goè¯­è¨€ä¸­çš„æŒ‡é’ˆæ“ä½œéå¸¸ç®€å•ï¼Œæˆ‘ä»¬åªéœ€è¦è®°ä½ä¸¤ä¸ªç¬¦å·ï¼š<code>&amp;</code>ï¼ˆå–åœ°å€ï¼‰å’Œ<code>*</code>ï¼ˆæ ¹æ®åœ°å€å–å€¼)</li></ul><h3 id="æŒ‡é’ˆåœ°å€å’ŒæŒ‡é’ˆç±»å‹"><a href="#æŒ‡é’ˆåœ°å€å’ŒæŒ‡é’ˆç±»å‹" class="headerlink" title="æŒ‡é’ˆåœ°å€å’ŒæŒ‡é’ˆç±»å‹"></a>æŒ‡é’ˆåœ°å€å’ŒæŒ‡é’ˆç±»å‹</h3><ul><li><p>æ¯ä¸ªå˜é‡åœ¨è¿è¡Œæ—¶éƒ½æ‹¥æœ‰ä¸€ä¸ªåœ°å€ï¼Œè¿™ä¸ªåœ°å€ä»£è¡¨å˜é‡åœ¨å†…å­˜ä¸­çš„ä½ç½®ã€‚Goè¯­è¨€ä¸­ä½¿ç”¨<code>&amp;</code>å­—ç¬¦æ”¾åœ¨å˜é‡å‰é¢å¯¹å˜é‡è¿›è¡Œâ€œå–åœ°å€â€æ“ä½œ</p></li><li><p>Goè¯­è¨€ä¸­çš„å€¼ç±»å‹ï¼ˆintã€floatã€boolã€stringã€arrayã€structï¼‰éƒ½æœ‰å¯¹åº”çš„æŒ‡é’ˆç±»å‹ï¼Œå¦‚ï¼š<code>*int</code>ã€<code>*int64</code>ã€<code>*string</code>ç­‰ã€‚</p></li><li><p>å–å˜é‡æŒ‡é’ˆçš„è¯­æ³•å¦‚ä¸‹</p></li></ul><pre class="line-numbers language-go" data-language="go"><code class="language-go">ptr <span class="token operator">:=</span> <span class="token operator">&amp;</span>v    <span class="token comment">// vçš„ç±»å‹ä¸ºT</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><ul><li>v:ä»£è¡¨è¢«å–åœ°å€çš„å˜é‡ï¼Œç±»å‹ä¸º<code>T</code></li><li>ptr:ç”¨äºæ¥æ”¶åœ°å€çš„å˜é‡ï¼Œptrçš„ç±»å‹å°±ä¸º<code>*T</code>ï¼Œç§°åšTçš„æŒ‡é’ˆç±»å‹ã€‚*ä»£è¡¨æŒ‡é’ˆã€‚</li></ul><pre class="line-numbers language-go" data-language="go"><code class="language-go"><span class="token keyword">package</span> main<span class="token keyword">import</span> <span class="token string">"fmt"</span><span class="token keyword">func</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span><span class="token comment">// &amp;: å–åœ°å€</span><span class="token comment">// *ï¼šæ ¹æ®åœ°å€å–å€¼</span>n <span class="token operator">:=</span> <span class="token number">18</span>fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>n<span class="token punctuation">)</span>p <span class="token operator">:=</span> <span class="token operator">&amp;</span>nfmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span>p<span class="token punctuation">)</span>fmt<span class="token punctuation">.</span><span class="token function">Printf</span><span class="token punctuation">(</span><span class="token string">"%T\n"</span><span class="token punctuation">,</span> p<span class="token punctuation">)</span>  <span class="token comment">// *int</span>m <span class="token operator">:=</span> <span class="token operator">*</span>pfmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span>m<span class="token punctuation">)</span>mm <span class="token operator">:=</span> <span class="token string">"ä½ å¥½"</span>fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>mm<span class="token punctuation">)</span>fmt<span class="token punctuation">.</span><span class="token function">Printf</span><span class="token punctuation">(</span><span class="token string">"%T"</span><span class="token punctuation">,</span> <span class="token operator">&amp;</span>mm<span class="token punctuation">)</span>  <span class="token comment">// *string</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h3 id="æŒ‡é’ˆå–å€¼"><a href="#æŒ‡é’ˆå–å€¼" class="headerlink" title="æŒ‡é’ˆå–å€¼"></a>æŒ‡é’ˆå–å€¼</h3><ul><li>åœ¨å¯¹æ™®é€šå˜é‡ä½¿ç”¨&amp;æ“ä½œç¬¦å–åœ°å€åä¼šè·å¾—è¿™ä¸ªå˜é‡çš„æŒ‡é’ˆï¼Œç„¶åå¯ä»¥å¯¹æŒ‡é’ˆä½¿ç”¨*æ“ä½œï¼Œä¹Ÿå°±æ˜¯æŒ‡é’ˆå–å€¼ï¼Œä»£ç å¦‚ä¸‹ã€‚</li></ul><pre class="line-numbers language-none"><code class="language-none">func main() &#123;&#x2F;&#x2F;æŒ‡é’ˆå–å€¼a :&#x3D; 10b :&#x3D; &amp;a &#x2F;&#x2F; å–å˜é‡açš„åœ°å€ï¼Œå°†æŒ‡é’ˆä¿å­˜åˆ°bä¸­fmt.Printf(&quot;type of b:%T\n&quot;, b)c :&#x3D; *b &#x2F;&#x2F; æŒ‡é’ˆå–å€¼ï¼ˆæ ¹æ®æŒ‡é’ˆå»å†…å­˜å–å€¼ï¼‰fmt.Printf(&quot;type of c:%T\n&quot;, c)fmt.Printf(&quot;value of c:%v\n&quot;, c)&#125;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h3 id="æŒ‡é’ˆä¼ å€¼"><a href="#æŒ‡é’ˆä¼ å€¼" class="headerlink" title="æŒ‡é’ˆä¼ å€¼"></a>æŒ‡é’ˆä¼ å€¼</h3><pre class="line-numbers language-go" data-language="go"><code class="language-go"><span class="token keyword">func</span> <span class="token function">modify1</span><span class="token punctuation">(</span>x <span class="token builtin">int</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>x <span class="token operator">=</span> <span class="token number">100</span><span class="token punctuation">&#125;</span><span class="token keyword">func</span> <span class="token function">modify2</span><span class="token punctuation">(</span>x <span class="token operator">*</span><span class="token builtin">int</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span><span class="token operator">*</span>x <span class="token operator">=</span> <span class="token number">100</span><span class="token punctuation">&#125;</span><span class="token keyword">func</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>a <span class="token operator">:=</span> <span class="token number">10</span><span class="token function">modify1</span><span class="token punctuation">(</span>a<span class="token punctuation">)</span>fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span>a<span class="token punctuation">)</span> <span class="token comment">// 10</span><span class="token function">modify2</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>a<span class="token punctuation">)</span>fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span>a<span class="token punctuation">)</span> <span class="token comment">// 100</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p><strong>æ€»ç»“</strong></p><ul><li>å–åœ°å€æ“ä½œç¬¦<code>&amp;</code>å’Œå–å€¼æ“ä½œç¬¦<code>*</code>æ˜¯ä¸€å¯¹äº’è¡¥æ“ä½œç¬¦ï¼Œ<code>&amp;</code>å–å‡ºåœ°å€ï¼Œ<code>*</code>æ ¹æ®åœ°å€å–å‡ºåœ°å€æŒ‡å‘çš„å€¼ã€‚</li></ul><h2 id="newå’Œmake"><a href="#newå’Œmake" class="headerlink" title="newå’Œmake"></a>newå’Œmake</h2><h3 id="new"><a href="#new" class="headerlink" title="new"></a>new</h3><p>newæ˜¯ä¸€ä¸ªå†…ç½®çš„å‡½æ•°ï¼Œå®ƒçš„å‡½æ•°ç­¾åå¦‚ä¸‹ï¼š</p><pre class="line-numbers language-go" data-language="go"><code class="language-go"><span class="token keyword">func</span> <span class="token function">new</span><span class="token punctuation">(</span>Type<span class="token punctuation">)</span> <span class="token operator">*</span>Type<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>å…¶ä¸­ï¼Œ</p><ul><li>Typeè¡¨ç¤ºç±»å‹ï¼Œnewå‡½æ•°åªæ¥å—ä¸€ä¸ªå‚æ•°ï¼Œè¿™ä¸ªå‚æ•°æ˜¯ä¸€ä¸ªç±»å‹</li><li>*Typeè¡¨ç¤ºç±»å‹æŒ‡é’ˆï¼Œnewå‡½æ•°è¿”å›ä¸€ä¸ªæŒ‡å‘è¯¥ç±»å‹å†…å­˜åœ°å€çš„æŒ‡é’ˆã€‚</li></ul><p>newå‡½æ•°ä¸å¤ªå¸¸ç”¨ï¼Œä½¿ç”¨newå‡½æ•°å¾—åˆ°çš„æ˜¯ä¸€ä¸ªç±»å‹çš„æŒ‡é’ˆï¼Œå¹¶ä¸”è¯¥æŒ‡é’ˆå¯¹åº”çš„å€¼ä¸ºè¯¥ç±»å‹çš„é›¶å€¼ã€‚ä¸¾ä¸ªä¾‹å­ï¼š</p><pre class="line-numbers language-go" data-language="go"><code class="language-go"><span class="token keyword">func</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>a <span class="token operator">:=</span> <span class="token function">new</span><span class="token punctuation">(</span><span class="token builtin">int</span><span class="token punctuation">)</span>b <span class="token operator">:=</span> <span class="token function">new</span><span class="token punctuation">(</span><span class="token builtin">bool</span><span class="token punctuation">)</span>fmt<span class="token punctuation">.</span><span class="token function">Printf</span><span class="token punctuation">(</span><span class="token string">"%T\n"</span><span class="token punctuation">,</span> a<span class="token punctuation">)</span> <span class="token comment">// *int</span>fmt<span class="token punctuation">.</span><span class="token function">Printf</span><span class="token punctuation">(</span><span class="token string">"%T\n"</span><span class="token punctuation">,</span> b<span class="token punctuation">)</span> <span class="token comment">// *bool</span>fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token operator">*</span>a<span class="token punctuation">)</span>       <span class="token comment">// 0</span>fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token operator">*</span>b<span class="token punctuation">)</span>       <span class="token comment">// false</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>æœ¬èŠ‚å¼€å§‹çš„ç¤ºä¾‹ä»£ç ä¸­<code>var a *int</code>åªæ˜¯å£°æ˜äº†ä¸€ä¸ªæŒ‡é’ˆå˜é‡aä½†æ˜¯æ²¡æœ‰åˆå§‹åŒ–ï¼ŒæŒ‡é’ˆä½œä¸ºå¼•ç”¨ç±»å‹éœ€è¦åˆå§‹åŒ–åæ‰ä¼šæ‹¥æœ‰å†…å­˜ç©ºé—´ï¼Œæ‰å¯ä»¥ç»™å®ƒèµ‹å€¼ã€‚åº”è¯¥æŒ‰ç…§å¦‚ä¸‹æ–¹å¼ä½¿ç”¨å†…ç½®çš„newå‡½æ•°å¯¹aè¿›è¡Œåˆå§‹åŒ–ä¹‹åå°±å¯ä»¥æ­£å¸¸å¯¹å…¶èµ‹å€¼äº†ï¼š</p><pre class="line-numbers language-go" data-language="go"><code class="language-go"><span class="token keyword">func</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span><span class="token keyword">var</span> a <span class="token operator">*</span><span class="token builtin">int</span>a <span class="token operator">=</span> <span class="token function">new</span><span class="token punctuation">(</span><span class="token builtin">int</span><span class="token punctuation">)</span><span class="token operator">*</span>a <span class="token operator">=</span> <span class="token number">10</span>fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token operator">*</span>a<span class="token punctuation">)</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h3 id="make"><a href="#make" class="headerlink" title="make"></a>make</h3><p>makeä¹Ÿæ˜¯ç”¨äºå†…å­˜åˆ†é…çš„ï¼ŒåŒºåˆ«äºnewï¼Œå®ƒåªç”¨äºsliceã€mapä»¥åŠchannelçš„å†…å­˜åˆ›å»ºï¼Œè€Œä¸”å®ƒè¿”å›çš„ç±»å‹å°±æ˜¯è¿™ä¸‰ä¸ªç±»å‹æœ¬èº«ï¼Œè€Œä¸æ˜¯ä»–ä»¬çš„æŒ‡é’ˆç±»å‹ï¼Œå› ä¸ºè¿™ä¸‰ç§ç±»å‹å°±æ˜¯å¼•ç”¨ç±»å‹ï¼Œæ‰€ä»¥å°±æ²¡æœ‰å¿…è¦è¿”å›ä»–ä»¬çš„æŒ‡é’ˆäº†ã€‚makeå‡½æ•°çš„å‡½æ•°ç­¾åå¦‚ä¸‹ï¼š</p><pre class="line-numbers language-go" data-language="go"><code class="language-go"><span class="token keyword">func</span> <span class="token function">make</span><span class="token punctuation">(</span>t Type<span class="token punctuation">,</span> size <span class="token operator">...</span>IntegerType<span class="token punctuation">)</span> Type<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>makeå‡½æ•°æ˜¯æ— å¯æ›¿ä»£çš„ï¼Œæˆ‘ä»¬åœ¨ä½¿ç”¨sliceã€mapä»¥åŠchannelçš„æ—¶å€™ï¼Œéƒ½éœ€è¦ä½¿ç”¨makeè¿›è¡Œåˆå§‹åŒ–ï¼Œç„¶åæ‰å¯ä»¥å¯¹å®ƒä»¬è¿›è¡Œæ“ä½œã€‚è¿™ä¸ªæˆ‘ä»¬åœ¨ä¸Šä¸€ç« ä¸­éƒ½æœ‰è¯´æ˜ï¼Œå…³äºchannelæˆ‘ä»¬ä¼šåœ¨åç»­çš„ç« èŠ‚è¯¦ç»†è¯´æ˜ã€‚</p><p>æœ¬èŠ‚å¼€å§‹çš„ç¤ºä¾‹ä¸­<code>var b map[string]int</code>åªæ˜¯å£°æ˜å˜é‡bæ˜¯ä¸€ä¸ªmapç±»å‹çš„å˜é‡ï¼Œéœ€è¦åƒä¸‹é¢çš„ç¤ºä¾‹ä»£ç ä¸€æ ·ä½¿ç”¨makeå‡½æ•°è¿›è¡Œåˆå§‹åŒ–æ“ä½œä¹‹åï¼Œæ‰èƒ½å¯¹å…¶è¿›è¡Œé”®å€¼å¯¹èµ‹å€¼ï¼š</p><pre class="line-numbers language-go" data-language="go"><code class="language-go"><span class="token keyword">func</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span><span class="token keyword">var</span> b <span class="token keyword">map</span><span class="token punctuation">[</span><span class="token builtin">string</span><span class="token punctuation">]</span><span class="token builtin">int</span>b <span class="token operator">=</span> <span class="token function">make</span><span class="token punctuation">(</span><span class="token keyword">map</span><span class="token punctuation">[</span><span class="token builtin">string</span><span class="token punctuation">]</span><span class="token builtin">int</span><span class="token punctuation">,</span> <span class="token number">10</span><span class="token punctuation">)</span>b<span class="token punctuation">[</span><span class="token string">"æ²™æ²³å¨œæ‰"</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token number">100</span>fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span>b<span class="token punctuation">)</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h3 id="newä¸makeçš„åŒºåˆ«"><a href="#newä¸makeçš„åŒºåˆ«" class="headerlink" title="newä¸makeçš„åŒºåˆ«"></a>newä¸makeçš„åŒºåˆ«</h3><ol><li>äºŒè€…éƒ½æ˜¯ç”¨æ¥åšå†…å­˜åˆ†é…çš„ã€‚</li><li>makeåªç”¨äºsliceã€mapä»¥åŠchannelçš„åˆå§‹åŒ–ï¼Œè¿”å›çš„è¿˜æ˜¯è¿™ä¸‰ä¸ªå¼•ç”¨ç±»å‹æœ¬èº«ï¼›</li><li>è€Œnewç”¨äºç±»å‹çš„å†…å­˜åˆ†é…ï¼Œå¹¶ä¸”å†…å­˜å¯¹åº”çš„å€¼ä¸ºç±»å‹é›¶å€¼ï¼Œè¿”å›çš„æ˜¯æŒ‡å‘ç±»å‹çš„æŒ‡é’ˆã€‚</li></ol><h2 id="map-å‡½æ•°"><a href="#map-å‡½æ•°" class="headerlink" title="map å‡½æ•°"></a>map å‡½æ•°</h2><blockquote><p>map æ˜¯ä¸€ç§åŸºäºkey-valueçš„æ•°æ®ç»“æ„ï¼Œ goè¯­è¨€ä¸­çš„mapæ˜¯ä¸€ç§å¼•ç”¨ç»“æ„ï¼Œç±»å‹ï¼Œå¿…é¡»åˆå§‹åŒ–æ‰èƒ½ä½¿ç”¨ï¼Œå…¶å†…éƒ¨ä½¿ç”¨hashæ¥å®ç°</p></blockquote><h3 id="å®šä¹‰-1"><a href="#å®šä¹‰-1" class="headerlink" title="å®šä¹‰"></a>å®šä¹‰</h3><p>Goè¯­è¨€ä¸­ <code>map</code>çš„å®šä¹‰è¯­æ³•å¦‚ä¸‹ï¼š</p><pre class="line-numbers language-go" data-language="go"><code class="language-go"><span class="token keyword">map</span><span class="token punctuation">[</span>KeyType<span class="token punctuation">]</span>ValueType<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>å…¶ä¸­ï¼Œ</p><ul><li>KeyType:è¡¨ç¤ºé”®çš„ç±»å‹ã€‚</li><li>ValueType:è¡¨ç¤ºé”®å¯¹åº”çš„å€¼çš„ç±»å‹ã€‚</li></ul><p>mapç±»å‹çš„å˜é‡é»˜è®¤åˆå§‹å€¼ä¸ºnilï¼Œéœ€è¦ä½¿ç”¨make()å‡½æ•°æ¥åˆ†é…å†…å­˜ã€‚è¯­æ³•ä¸ºï¼š</p><pre class="line-numbers language-go" data-language="go"><code class="language-go"><span class="token function">make</span><span class="token punctuation">(</span><span class="token keyword">map</span><span class="token punctuation">[</span>KeyType<span class="token punctuation">]</span>ValueType<span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token builtin">cap</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>å…¶ä¸­capè¡¨ç¤ºmapçš„å®¹é‡ï¼Œè¯¥å‚æ•°è™½ç„¶ä¸æ˜¯å¿…é¡»çš„ï¼Œä½†æ˜¯æˆ‘ä»¬åº”è¯¥åœ¨åˆå§‹åŒ–mapçš„æ—¶å€™å°±ä¸ºå…¶æŒ‡å®šä¸€ä¸ªåˆé€‚çš„å®¹é‡ã€‚</p><h3 id="mapçš„åŸºæœ¬ä½¿ç”¨"><a href="#mapçš„åŸºæœ¬ä½¿ç”¨" class="headerlink" title="mapçš„åŸºæœ¬ä½¿ç”¨"></a>mapçš„åŸºæœ¬ä½¿ç”¨</h3><pre class="line-numbers language-go" data-language="go"><code class="language-go"><span class="token keyword">package</span> main<span class="token keyword">import</span> <span class="token string">"fmt"</span><span class="token keyword">func</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span><span class="token keyword">var</span> m1 <span class="token keyword">map</span><span class="token punctuation">[</span><span class="token builtin">string</span><span class="token punctuation">]</span> <span class="token builtin">int</span>fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token punctuation">(</span>m1<span class="token operator">==</span><span class="token boolean">nil</span><span class="token punctuation">)</span><span class="token punctuation">)</span>m1 <span class="token operator">=</span> <span class="token function">make</span><span class="token punctuation">(</span><span class="token keyword">map</span><span class="token punctuation">[</span><span class="token builtin">string</span><span class="token punctuation">]</span><span class="token builtin">int</span><span class="token punctuation">,</span> <span class="token number">10</span><span class="token punctuation">)</span>  <span class="token comment">// ä¸€å®šè¦åˆå§‹åŒ–</span>m1<span class="token punctuation">[</span><span class="token string">"ç†æƒ³"</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token number">18</span>m1<span class="token punctuation">[</span><span class="token string">"jiwuming"</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token number">35</span>fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span>m1<span class="token punctuation">)</span>fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span>m1<span class="token punctuation">[</span><span class="token string">"ç†æƒ³"</span><span class="token punctuation">]</span><span class="token punctuation">)</span>    <span class="token comment">// å…ƒç´ ç±»å‹çš„ä¸ºmapçš„åˆ‡ç‰‡</span><span class="token keyword">var</span> s1 <span class="token operator">=</span> <span class="token function">make</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token keyword">map</span><span class="token punctuation">[</span><span class="token builtin">int</span><span class="token punctuation">]</span><span class="token builtin">string</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h3 id="map-åˆ¤æ–­é”®å€¼æ˜¯å¦å­˜åœ¨"><a href="#map-åˆ¤æ–­é”®å€¼æ˜¯å¦å­˜åœ¨" class="headerlink" title="map åˆ¤æ–­é”®å€¼æ˜¯å¦å­˜åœ¨"></a>map åˆ¤æ–­é”®å€¼æ˜¯å¦å­˜åœ¨</h3><ul><li>value, ok :&#x3D; map[key] åˆ¤æ–­æ˜¯ç‹—å­˜åœ¨æŸä¸ªkey</li></ul><pre class="line-numbers language-go" data-language="go"><code class="language-go"><span class="token comment">//value, ok := map[key] åˆ¤æ–­æ˜¯ç‹—å­˜åœ¨æŸä¸ªkey</span>scoreMap <span class="token operator">:=</span> <span class="token function">make</span><span class="token punctuation">(</span><span class="token keyword">map</span><span class="token punctuation">[</span><span class="token builtin">string</span><span class="token punctuation">]</span><span class="token builtin">int</span><span class="token punctuation">)</span>scoreMap<span class="token punctuation">[</span><span class="token string">"å¼ ä¸‰"</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token number">90</span>scoreMap<span class="token punctuation">[</span><span class="token string">"æå››"</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token number">100</span>v<span class="token punctuation">,</span> ok <span class="token operator">:=</span> scoreMap<span class="token punctuation">[</span><span class="token string">"å¼ ä¸‰"</span><span class="token punctuation">]</span><span class="token keyword">if</span> ok <span class="token punctuation">&#123;</span>fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span>v<span class="token punctuation">)</span><span class="token punctuation">&#125;</span> <span class="token keyword">else</span> <span class="token punctuation">&#123;</span>fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token string">"æŸ¥æ— æ­¤äºº"</span><span class="token punctuation">)</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h3 id="éå†"><a href="#éå†" class="headerlink" title="éå†"></a>éå†</h3><pre class="line-numbers language-go" data-language="go"><code class="language-go"><span class="token keyword">func</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>scoreMap <span class="token operator">:=</span> <span class="token function">make</span><span class="token punctuation">(</span><span class="token keyword">map</span><span class="token punctuation">[</span><span class="token builtin">string</span><span class="token punctuation">]</span><span class="token builtin">int</span><span class="token punctuation">)</span>scoreMap<span class="token punctuation">[</span><span class="token string">"å¼ ä¸‰"</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token number">90</span>scoreMap<span class="token punctuation">[</span><span class="token string">"å°æ˜"</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token number">100</span>scoreMap<span class="token punctuation">[</span><span class="token string">"å¨œæ‰"</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token number">60</span><span class="token keyword">for</span> k<span class="token punctuation">,</span> v <span class="token operator">:=</span> <span class="token keyword">range</span> scoreMap <span class="token punctuation">&#123;</span>fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span>k<span class="token punctuation">,</span> v<span class="token punctuation">)</span><span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>å¦‚æœåªæ˜¯éå†key å¯ä»¥ç”¨å¦‚ä¸‹å†™æ³•</p><pre class="line-numbers language-go" data-language="go"><code class="language-go"><span class="token keyword">func</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>scoreMap <span class="token operator">:=</span> <span class="token function">make</span><span class="token punctuation">(</span><span class="token keyword">map</span><span class="token punctuation">[</span><span class="token builtin">string</span><span class="token punctuation">]</span><span class="token builtin">int</span><span class="token punctuation">)</span>scoreMap<span class="token punctuation">[</span><span class="token string">"å¼ ä¸‰"</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token number">90</span>scoreMap<span class="token punctuation">[</span><span class="token string">"å°æ˜"</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token number">100</span>scoreMap<span class="token punctuation">[</span><span class="token string">"å¨œæ‰"</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token number">60</span><span class="token keyword">for</span> k <span class="token operator">:=</span> <span class="token keyword">range</span> scoreMap <span class="token punctuation">&#123;</span>fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span>k<span class="token punctuation">)</span><span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h3 id="åˆ é™¤"><a href="#åˆ é™¤" class="headerlink" title="åˆ é™¤"></a>åˆ é™¤</h3><ul><li>delete(map, key)è¡¨ç¤ºä»ä¸­åˆ é™¤ä¸€ç»„é”®å€¼å¯¹</li></ul><pre class="line-numbers language-go" data-language="go"><code class="language-go"><span class="token keyword">func</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>scoreMap <span class="token operator">:=</span> <span class="token function">make</span><span class="token punctuation">(</span><span class="token keyword">map</span><span class="token punctuation">[</span><span class="token builtin">string</span><span class="token punctuation">]</span><span class="token builtin">int</span><span class="token punctuation">)</span>scoreMap<span class="token punctuation">[</span><span class="token string">"å¼ ä¸‰"</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token number">90</span>scoreMap<span class="token punctuation">[</span><span class="token string">"å°æ˜"</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token number">100</span>scoreMap<span class="token punctuation">[</span><span class="token string">"å¨œæ‰"</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token number">60</span><span class="token function">delete</span><span class="token punctuation">(</span>scoreMap<span class="token punctuation">,</span> <span class="token string">"å°æ˜"</span><span class="token punctuation">)</span><span class="token comment">//å°†å°æ˜:100ä»mapä¸­åˆ é™¤</span><span class="token keyword">for</span> k<span class="token punctuation">,</span>v <span class="token operator">:=</span> <span class="token keyword">range</span> scoreMap<span class="token punctuation">&#123;</span>fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span>k<span class="token punctuation">,</span> v<span class="token punctuation">)</span><span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h3 id="æŒ‰ç…§æŒ‡å®šé¡ºåºéå†"><a href="#æŒ‰ç…§æŒ‡å®šé¡ºåºéå†" class="headerlink" title="æŒ‰ç…§æŒ‡å®šé¡ºåºéå†"></a>æŒ‰ç…§æŒ‡å®šé¡ºåºéå†</h3><pre class="line-numbers language-go" data-language="go"><code class="language-go"><span class="token keyword">func</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>rand<span class="token punctuation">.</span><span class="token function">Seed</span><span class="token punctuation">(</span>time<span class="token punctuation">.</span><span class="token function">Now</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">UnixNano</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment">//åˆå§‹åŒ–éšæœºæ•°ç§å­</span><span class="token keyword">var</span> scoreMap <span class="token operator">=</span> <span class="token function">make</span><span class="token punctuation">(</span><span class="token keyword">map</span><span class="token punctuation">[</span><span class="token builtin">string</span><span class="token punctuation">]</span><span class="token builtin">int</span><span class="token punctuation">,</span> <span class="token number">200</span><span class="token punctuation">)</span><span class="token keyword">for</span> i <span class="token operator">:=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> <span class="token number">100</span><span class="token punctuation">;</span> i<span class="token operator">++</span> <span class="token punctuation">&#123;</span>key <span class="token operator">:=</span> fmt<span class="token punctuation">.</span><span class="token function">Sprintf</span><span class="token punctuation">(</span><span class="token string">"stu%02d"</span><span class="token punctuation">,</span> i<span class="token punctuation">)</span> <span class="token comment">//ç”Ÿæˆstuå¼€å¤´çš„å­—ç¬¦ä¸²</span>value <span class="token operator">:=</span> rand<span class="token punctuation">.</span><span class="token function">Intn</span><span class="token punctuation">(</span><span class="token number">100</span><span class="token punctuation">)</span>          <span class="token comment">//ç”Ÿæˆ0~99çš„éšæœºæ•´æ•°</span>scoreMap<span class="token punctuation">[</span>key<span class="token punctuation">]</span> <span class="token operator">=</span> value<span class="token punctuation">&#125;</span><span class="token comment">//å–å‡ºmapä¸­çš„æ‰€æœ‰keyå­˜å…¥åˆ‡ç‰‡keys</span><span class="token keyword">var</span> keys <span class="token operator">=</span> <span class="token function">make</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token builtin">string</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">200</span><span class="token punctuation">)</span><span class="token keyword">for</span> key <span class="token operator">:=</span> <span class="token keyword">range</span> scoreMap <span class="token punctuation">&#123;</span>keys <span class="token operator">=</span> <span class="token function">append</span><span class="token punctuation">(</span>keys<span class="token punctuation">,</span> key<span class="token punctuation">)</span><span class="token punctuation">&#125;</span><span class="token comment">//å¯¹åˆ‡ç‰‡è¿›è¡Œæ’åº</span>sort<span class="token punctuation">.</span><span class="token function">Strings</span><span class="token punctuation">(</span>keys<span class="token punctuation">)</span><span class="token comment">//æŒ‰ç…§æ’åºåçš„keyéå†map</span><span class="token keyword">for</span> <span class="token boolean">_</span><span class="token punctuation">,</span> key <span class="token operator">:=</span> <span class="token keyword">range</span> keys <span class="token punctuation">&#123;</span>fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span>key<span class="token punctuation">,</span> scoreMap<span class="token punctuation">[</span>key<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h3 id="ç»ƒä¹ é¢˜"><a href="#ç»ƒä¹ é¢˜" class="headerlink" title="ç»ƒä¹ é¢˜"></a>ç»ƒä¹ é¢˜</h3><ol><li>å†™ä¸€ä¸ªç¨‹åºï¼Œç»Ÿè®¡ä¸€ä¸ªå­—ç¬¦ä¸²ä¸­æ¯ä¸ªå•è¯å‡ºç°çš„æ¬¡æ•°ã€‚æ¯”å¦‚ï¼šâ€how do you doâ€ä¸­how&#x3D;1 do&#x3D;2 you&#x3D;1</li></ol><pre class="line-numbers language-go" data-language="go"><code class="language-go"><span class="token string">``</span><span class="token string">`## å‡½æ•°### å®šä¹‰- å‡½æ•°æ˜¯ç»„ç»‡å¥½çš„å¯é‡å¤ä½¿ç”¨çš„ã€ç”¨äºæ‰§è¡ŒæŒ‡å®šä»»åŠ¡çš„ä»£ç æ¨¡å—`</span><span class="token string">``</span><span class="token keyword">go</span><span class="token keyword">package</span> main<span class="token keyword">import</span> <span class="token string">"fmt"</span><span class="token comment">// å‡½æ•°</span><span class="token comment">// å‡½æ•°å­˜åœ¨çš„æ„ä¹‰</span><span class="token comment">// å‡½æ•°æ˜¯ä¸€æ®µä»£ç çš„åˆ†è£…</span><span class="token comment">// æŠŠä¸€æ®µä»£ç çš„é€»è¾‘æŠ½è±¡å‡ºæ¥ï¼Œç»™ä»–èµ·ä¸ªåå­ï¼Œæ¯æ¬¡ç”¨åˆ°ä»–çš„æ—¶å€™ç›´æ¥ä½¿ç”¨å‡½æ•°åè°ƒç”¨å°±çœ‹å¯ä»¥äº†</span><span class="token comment">// ä½¿ä»£ç æ›´åŠ ç®€ä»‹æ¸…æ™°</span><span class="token comment">// å‡½æ•°çš„å®šä¹‰</span><span class="token keyword">func</span> <span class="token function">sum</span><span class="token punctuation">(</span>x <span class="token builtin">int</span><span class="token punctuation">,</span> y <span class="token builtin">int</span><span class="token punctuation">)</span><span class="token punctuation">(</span>ret <span class="token builtin">int</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span><span class="token keyword">return</span> x <span class="token operator">+</span> y<span class="token punctuation">&#125;</span><span class="token comment">// æ²¡æœ‰è¿”å›å€¼</span><span class="token keyword">func</span> <span class="token function">f1</span><span class="token punctuation">(</span>x <span class="token builtin">int</span><span class="token punctuation">,</span> y <span class="token builtin">int</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span>x <span class="token operator">+</span> y<span class="token punctuation">)</span><span class="token punctuation">&#125;</span><span class="token comment">// æ²¡æœ‰å‚æ•°å’Œè¿”å›å€¼</span><span class="token keyword">func</span> <span class="token function">f2</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token string">"æ²¡æœ‰è¿”å›å€¼å€¼å’Œå‚æ•°"</span><span class="token punctuation">)</span><span class="token punctuation">&#125;</span><span class="token comment">// æ²¡æœ‰å‚æ•°ä½†æ˜¯ç”±è¿”å›å€¼</span><span class="token keyword">func</span> <span class="token function">f3</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token builtin">int</span><span class="token punctuation">&#123;</span>fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token string">"æ²¡æœ‰å‚æ•°ä½†æ˜¯ç”±è¿”å›å€¼"</span><span class="token punctuation">)</span><span class="token keyword">return</span> <span class="token number">3</span><span class="token punctuation">&#125;</span><span class="token comment">//å‚æ•°å¯ä»¥å‘½åä¹Ÿå¯ä»¥ä¸å‘½å</span><span class="token comment">// å‘½åçš„è¿”å›å€¼å°±ç›¸å½“äºåœ¨å‡½æ•°ä¸­å£°æ˜ä¸€ä¸ªå˜é‡</span><span class="token keyword">func</span> <span class="token function">f4</span><span class="token punctuation">(</span> x <span class="token builtin">int</span><span class="token punctuation">,</span> y <span class="token builtin">int</span><span class="token punctuation">)</span><span class="token punctuation">(</span>ret <span class="token builtin">int</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>ret <span class="token operator">=</span> x <span class="token operator">+</span> y<span class="token keyword">return</span>   <span class="token comment">// æ­¤æ—¶å¯ä»¥çœç•¥return åé¢çš„ret</span><span class="token punctuation">&#125;</span><span class="token comment">// å¤šä¸ªè¿”å›å€¼</span><span class="token keyword">func</span> <span class="token function">f5</span><span class="token punctuation">(</span>x <span class="token builtin">int</span><span class="token punctuation">,</span> y <span class="token builtin">int</span><span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token builtin">int</span><span class="token punctuation">,</span> <span class="token builtin">string</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span><span class="token keyword">return</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token string">"æ²™æ²³"</span><span class="token punctuation">&#125;</span><span class="token comment">// å‚æ•°çš„ç±»å‹ç®€å†™</span><span class="token comment">// å½“å‚æ•°ä¸­æœ‰è¿ç»­å¤šä¸ªå‚æ•°çš„ç±»å‹ä¸€è‡´æ—¶ï¼Œæˆ‘ä»¬å¯ä»¥çœç•¥éæœ€åä¸€ä¸ªçš„ç±»å‹</span><span class="token keyword">func</span> <span class="token function">f6</span><span class="token punctuation">(</span>x<span class="token punctuation">,</span> y <span class="token builtin">int</span><span class="token punctuation">)</span> <span class="token builtin">int</span><span class="token punctuation">&#123;</span><span class="token keyword">return</span> x <span class="token operator">+</span> y<span class="token punctuation">&#125;</span><span class="token comment">// å¯å˜é•¿å‚æ•°</span><span class="token keyword">func</span> <span class="token function">f7</span><span class="token punctuation">(</span>x <span class="token builtin">string</span><span class="token punctuation">,</span> y<span class="token operator">...</span><span class="token builtin">int</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span>x<span class="token punctuation">)</span>fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span>y<span class="token punctuation">)</span>  <span class="token comment">// yçš„ç±»å‹æ˜¯åˆ‡ç‰‡ []int</span><span class="token punctuation">&#125;</span><span class="token comment">// goè¯­è¨€ä¸­å‡½æ•°æ²¡æœ‰é»˜è®¤å‚æ•°è¿™ä¸ªæ¦‚å¿µ</span><span class="token keyword">func</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>r <span class="token operator">:=</span> <span class="token function">sum</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">)</span>fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span>r<span class="token punctuation">)</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h3 id="å‡½æ•°çš„è°ƒç”¨"><a href="#å‡½æ•°çš„è°ƒç”¨" class="headerlink" title="å‡½æ•°çš„è°ƒç”¨"></a>å‡½æ•°çš„è°ƒç”¨</h3><ul><li>å®šä¹‰äº†å‡½æ•°ä¹‹åï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡<code>å‡½æ•°å()</code>çš„æ–¹å¼è°ƒç”¨å‡½æ•°</li></ul><h3 id="ä½œç”¨åŸŸ"><a href="#ä½œç”¨åŸŸ" class="headerlink" title="ä½œç”¨åŸŸ"></a>ä½œç”¨åŸŸ</h3><h4 id="å…¨å±€ä½œç”¨åŸŸ"><a href="#å…¨å±€ä½œç”¨åŸŸ" class="headerlink" title="å…¨å±€ä½œç”¨åŸŸ"></a>å…¨å±€ä½œç”¨åŸŸ</h4><ul><li><p>å…¨å±€å˜é‡æ˜¯å®šä¹‰åœ¨å‡½æ•°å¤–éƒ¨çš„å˜é‡ï¼Œä»–åœ¨ç¨‹åºæ•´ä¸ªçš„åŸå‹å‘¨æœŸå†…éƒ¨æœ‰æ•ˆï¼Œ åœ¨å‡½æ•°å†…éƒ¨å¯ä»¥è®¿é—®å…¨å±€å˜é‡</p><pre class="line-numbers language-go" data-language="go"><code class="language-go"><span class="token keyword">package</span> main<span class="token keyword">import</span> <span class="token string">"fmt"</span><span class="token keyword">var</span> num <span class="token builtin">int64</span> <span class="token operator">=</span> <span class="token number">10</span><span class="token keyword">func</span> <span class="token function">testGlobalVar</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>    fmt<span class="token punctuation">.</span><span class="token function">Printf</span><span class="token punctuation">(</span><span class="token string">"num=%d\n"</span><span class="token punctuation">,</span> num<span class="token punctuation">)</span>  <span class="token comment">// å‡½æ•°å†…éƒ¨è®¿é—®å…¨å±€å˜é‡</span><span class="token punctuation">&#125;</span><span class="token keyword">func</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>    <span class="token function">testGlobalVar</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment">// num=10</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></li></ul><h4 id="å±€éƒ¨ä½œç”¨åŸŸ"><a href="#å±€éƒ¨ä½œç”¨åŸŸ" class="headerlink" title="å±€éƒ¨ä½œç”¨åŸŸ"></a>å±€éƒ¨ä½œç”¨åŸŸ</h4><ul><li>å±€éƒ¨å˜é‡æœ‰åˆ†ä¸ºä¸¤ç§ï¼š å‡½æ•°å†…éƒ¨çš„å®šä¹‰çš„å˜é‡è¿æ³•åœ¨è¯¥å‡½æ•°å¤–ä½¿ç”¨</li></ul><p>â€‹</p><pre class="line-numbers language-go" data-language="go"><code class="language-go"><span class="token keyword">func</span> <span class="token function">testLocalVar</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span><span class="token comment">//å®šä¹‰ä¸€ä¸ªå‡½æ•°å±€éƒ¨å˜é‡x,ä»…åœ¨è¯¥å‡½æ•°å†…ç”Ÿæ•ˆ</span><span class="token keyword">var</span> x <span class="token builtin">int64</span> <span class="token operator">=</span> <span class="token number">100</span>fmt<span class="token punctuation">.</span><span class="token function">Printf</span><span class="token punctuation">(</span><span class="token string">"x=%d\n"</span><span class="token punctuation">,</span> x<span class="token punctuation">)</span><span class="token punctuation">&#125;</span><span class="token keyword">func</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span><span class="token function">testLocalVar</span><span class="token punctuation">(</span><span class="token punctuation">)</span>fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span>x<span class="token punctuation">)</span> <span class="token comment">// æ­¤æ—¶æ— æ³•ä½¿ç”¨å˜é‡x</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><ul><li>å¦‚æœå±€éƒ¨å˜é‡å’Œå…¨å±€å˜é‡é‡åï¼Œæœ‰é™è®¿é—®å±€éƒ¨å˜é‡</li></ul><pre class="line-numbers language-go" data-language="go"><code class="language-go"><span class="token keyword">package</span> main<span class="token keyword">import</span> <span class="token string">"fmt"</span><span class="token comment">//å®šä¹‰å…¨å±€å˜é‡num</span><span class="token keyword">var</span> num <span class="token builtin">int64</span> <span class="token operator">=</span> <span class="token number">10</span><span class="token keyword">func</span> <span class="token function">testNum</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>num <span class="token operator">:=</span> <span class="token number">100</span>fmt<span class="token punctuation">.</span><span class="token function">Printf</span><span class="token punctuation">(</span><span class="token string">"num=%d\n"</span><span class="token punctuation">,</span> num<span class="token punctuation">)</span> <span class="token comment">// å‡½æ•°ä¸­ä¼˜å…ˆä½¿ç”¨å±€éƒ¨å˜é‡</span><span class="token punctuation">&#125;</span><span class="token keyword">func</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span><span class="token function">testNum</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment">// num=100</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h3 id="å‡½æ•°ç±»å‹åŸŸå˜é‡"><a href="#å‡½æ•°ç±»å‹åŸŸå˜é‡" class="headerlink" title="å‡½æ•°ç±»å‹åŸŸå˜é‡"></a>å‡½æ•°ç±»å‹åŸŸå˜é‡</h3><h4 id="å®šä¹‰å‡½æ•°ç±»å‹"><a href="#å®šä¹‰å‡½æ•°ç±»å‹" class="headerlink" title="å®šä¹‰å‡½æ•°ç±»å‹"></a>å®šä¹‰å‡½æ•°ç±»å‹</h4><ul><li>ä½¿ç”¨typeå…³é”®å­—æ¥å®šä¹‰ä¸€ä¸ªå‡½æ•°ç±»å‹ï¼Œå…·ä½“æ ¼å¼å¦‚ä¸‹</li></ul><pre class="line-numbers language-go" data-language="go"><code class="language-go"><span class="token keyword">type</span> calculation <span class="token keyword">func</span><span class="token punctuation">(</span><span class="token builtin">int</span><span class="token punctuation">,</span> <span class="token builtin">int</span><span class="token punctuation">)</span> <span class="token builtin">int</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><ul><li><p>ä¸Šé¢è¯­å¥å®šä¹‰äº†ä¸€ä¸ªcalculationç±»å‹çš„å‡½æ•°ï¼Œ ä¾‹å¦‚ä¸‹é¢ä»£ç éƒ½æ˜¯calculationçš„ç±»å‹</p><pre class="line-numbers language-go" data-language="go"><code class="language-go"><span class="token keyword">func</span> <span class="token function">add</span><span class="token punctuation">(</span>x<span class="token punctuation">,</span> y <span class="token builtin">int</span><span class="token punctuation">)</span> <span class="token builtin">int</span> <span class="token punctuation">&#123;</span>ruturn x <span class="token operator">+</span> y<span class="token punctuation">&#125;</span><span class="token keyword">func</span> <span class="token function">sub</span><span class="token punctuation">(</span>x<span class="token punctuation">,</span> y <span class="token builtin">int</span><span class="token punctuation">)</span> <span class="token builtin">int</span> <span class="token punctuation">&#123;</span>    reutrn x <span class="token operator">-</span> y<span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></li><li><p>add å’Œsubéƒ½èƒ½èµ‹å€¼ç»™calculationç±»å‹çš„å˜é‡</p><pre class="line-numbers language-go" data-language="go"><code class="language-go"><span class="token keyword">var</span> c calculationc <span class="token operator">=</span> add<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre></li><li><p>å‡½æ•°ç±»å‹å˜é‡</p></li></ul><pre class="line-numbers language-go" data-language="go"><code class="language-go"><span class="token keyword">package</span> main<span class="token keyword">import</span> <span class="token string">"fmt"</span><span class="token keyword">func</span> <span class="token function">add</span><span class="token punctuation">(</span>x<span class="token punctuation">,</span> y <span class="token builtin">int</span><span class="token punctuation">)</span> <span class="token builtin">int</span> <span class="token punctuation">&#123;</span><span class="token keyword">return</span> x <span class="token operator">+</span> y<span class="token punctuation">&#125;</span><span class="token keyword">func</span> <span class="token function">sub</span><span class="token punctuation">(</span>x<span class="token punctuation">,</span> y <span class="token builtin">int</span><span class="token punctuation">)</span> <span class="token builtin">int</span> <span class="token punctuation">&#123;</span><span class="token keyword">return</span> x <span class="token operator">-</span> y<span class="token punctuation">&#125;</span><span class="token keyword">type</span> calculation <span class="token keyword">func</span><span class="token punctuation">(</span><span class="token builtin">int</span><span class="token punctuation">,</span> <span class="token builtin">int</span><span class="token punctuation">)</span> <span class="token builtin">int</span><span class="token keyword">func</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span><span class="token keyword">var</span> c calculation               <span class="token comment">// å£°æ˜ä¸€ä¸ªcalculationç±»å‹çš„å˜é‡c</span>c <span class="token operator">=</span> add                         <span class="token comment">// æŠŠaddèµ‹å€¼ç»™c</span>fmt<span class="token punctuation">.</span><span class="token function">Printf</span><span class="token punctuation">(</span><span class="token string">"type of c:%T\n"</span><span class="token punctuation">,</span> c<span class="token punctuation">)</span> <span class="token comment">// type of c:main.calculation</span>fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token function">c</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">)</span>            <span class="token comment">// åƒè°ƒç”¨addä¸€æ ·è°ƒç”¨c</span>f <span class="token operator">:=</span> add                        <span class="token comment">// å°†å‡½æ•°addèµ‹å€¼ç»™å˜é‡f</span>fmt<span class="token punctuation">.</span><span class="token function">Printf</span><span class="token punctuation">(</span><span class="token string">"type of f:%T\n"</span><span class="token punctuation">,</span> f<span class="token punctuation">)</span> <span class="token comment">// type of f:func(int, int) int</span>fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token function">f</span><span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">,</span> <span class="token number">20</span><span class="token punctuation">)</span><span class="token punctuation">)</span>          <span class="token comment">// åƒè°ƒç”¨addä¸€æ ·è°ƒç”¨f</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h3 id="é«˜é˜¶å‡½æ•°"><a href="#é«˜é˜¶å‡½æ•°" class="headerlink" title="é«˜é˜¶å‡½æ•°"></a>é«˜é˜¶å‡½æ•°</h3><h4 id="å‡½æ•°ä½œä¸ºå‚æ•°"><a href="#å‡½æ•°ä½œä¸ºå‚æ•°" class="headerlink" title="å‡½æ•°ä½œä¸ºå‚æ•°"></a>å‡½æ•°ä½œä¸ºå‚æ•°</h4><ul><li><p>å‡½æ•°å¯ä»¥ä½œä¸ºå‚æ•°</p><pre class="line-numbers language-go" data-language="go"><code class="language-go"><span class="token keyword">func</span> <span class="token function">add</span><span class="token punctuation">(</span>x<span class="token punctuation">,</span> y <span class="token builtin">int</span><span class="token punctuation">)</span> <span class="token builtin">int</span><span class="token punctuation">&#123;</span><span class="token keyword">return</span> x <span class="token operator">+</span> y<span class="token punctuation">&#125;</span><span class="token keyword">func</span> <span class="token function">calc</span><span class="token punctuation">(</span>x<span class="token punctuation">,</span> y<span class="token punctuation">,</span> op <span class="token keyword">func</span><span class="token punctuation">(</span><span class="token builtin">int</span><span class="token punctuation">,</span> <span class="token builtin">int</span><span class="token punctuation">)</span> <span class="token builtin">int</span><span class="token punctuation">)</span> <span class="token builtin">int</span> <span class="token punctuation">&#123;</span>    <span class="token keyword">return</span> <span class="token function">op</span><span class="token punctuation">(</span>x<span class="token punctuation">,</span> y<span class="token punctuation">)</span><span class="token punctuation">&#125;</span><span class="token keyword">func</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>    ret2 <span class="token operator">:=</span> <span class="token function">calc</span><span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">,</span> <span class="token number">20</span><span class="token punctuation">,</span> add<span class="token punctuation">)</span>    fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span>ret2<span class="token punctuation">)</span> <span class="token comment">// 30</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></li><li><p>å‡½æ•°ä½œä¸ºè¿”å›å€¼</p><pre class="line-numbers language-go" data-language="go"><code class="language-go"><span class="token keyword">func</span> <span class="token function">do</span><span class="token punctuation">(</span>s <span class="token builtin">string</span><span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token keyword">func</span><span class="token punctuation">(</span><span class="token builtin">int</span><span class="token punctuation">,</span> <span class="token builtin">int</span><span class="token punctuation">)</span> <span class="token builtin">int</span><span class="token punctuation">,</span> <span class="token builtin">error</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>    <span class="token keyword">switch</span> s <span class="token punctuation">&#123;</span>        <span class="token keyword">case</span> <span class="token string">"+"</span><span class="token punctuation">:</span>        <span class="token keyword">return</span> add<span class="token punctuation">,</span> <span class="token boolean">nil</span>        <span class="token keyword">case</span> <span class="token string">"-"</span><span class="token punctuation">:</span>        <span class="token keyword">return</span> sub<span class="token punctuation">,</span> <span class="token boolean">nil</span>        <span class="token keyword">default</span><span class="token punctuation">:</span>        err <span class="token operator">:=</span> errors<span class="token punctuation">.</span><span class="token function">New</span><span class="token punctuation">(</span><span class="token string">"æ— æ³•è¯†åˆ«çš„æ“ä½œæ³•"</span><span class="token punctuation">)</span>        <span class="token keyword">return</span> <span class="token boolean">nil</span> <span class="token punctuation">,</span> err        <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></li></ul><h3 id="åŒ¿åå‡½æ•°å’Œé—­åŒ…"><a href="#åŒ¿åå‡½æ•°å’Œé—­åŒ…" class="headerlink" title="åŒ¿åå‡½æ•°å’Œé—­åŒ…"></a>åŒ¿åå‡½æ•°å’Œé—­åŒ…</h3><h4 id="åŒ¿åå‡½æ•°"><a href="#åŒ¿åå‡½æ•°" class="headerlink" title="åŒ¿åå‡½æ•°"></a>åŒ¿åå‡½æ•°</h4><ul><li><p>å‡½æ•°å½“ç„¶è¿˜å¯ä»¥ä½œä¸ºè¿”å›å€¼ï¼Œä½†æ˜¯åœ¨Goè¯­è¨€ä¸­å‡½æ•°å†…éƒ¨ä¸èƒ½å†åƒä¹‹å‰é‚£æ ·å®šä¹‰å‡½æ•°äº†ï¼Œåªèƒ½å®šä¹‰åŒ¿åå‡½æ•°ã€‚åŒ¿åå‡½æ•°å°±æ˜¯æ²¡æœ‰å‡½æ•°åçš„å‡½æ•°ï¼ŒåŒ¿åå‡½æ•°çš„å®šä¹‰æ ¼å¼å¦‚ä¸‹ï¼š</p><pre class="line-numbers language-none"><code class="language-none">func(å‚æ•°ï¼Œå‚æ•°)(è¿”å›å€¼ï¼Œ è¿”å›å€¼)&#123;&#125;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre></li><li><p>åŒ¿åå‡½æ•°å› ä¸ºæ²¡æœ‰å‡½æ•°åï¼Œæ‰€ä»¥æ²¡åŠæ³•åƒæ™®é€šå‡½æ•°é‚£æ ·è°ƒç”¨ï¼Œæ‰€ä»¥åŒ¿åå‡½æ•°éœ€è¦ä¿å­˜åˆ°æŸä¸ªå˜é‡æˆ–è€…ä½œä¸ºç«‹å³æ‰§è¡Œå‡½æ•°:</p></li></ul>  <pre class="line-numbers language-go" data-language="go"><code class="language-go"><span class="token keyword">func</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span><span class="token comment">// å‡½æ•°å†…éƒ¨æ²¡æœ‰åŠæ³•å£°æ˜å¸¦åå­—çš„å‡½æ•°</span>f1 <span class="token operator">:=</span> <span class="token keyword">func</span><span class="token punctuation">(</span>x<span class="token punctuation">,</span> y <span class="token builtin">int</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span>x <span class="token operator">+</span> y<span class="token punctuation">)</span><span class="token punctuation">&#125;</span><span class="token function">f1</span><span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">,</span> <span class="token number">20</span><span class="token punctuation">)</span><span class="token comment">// å¦‚æœåªæ˜¯ä½¿ç”¨ä¸€æ¬¡çš„å‡½æ•°ï¼Œè¿˜å¯ä»¥ç«‹å³æ‰§è¡Œå‡½æ•°</span><span class="token keyword">func</span><span class="token punctuation">(</span>x<span class="token punctuation">,</span> y <span class="token builtin">int</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span>x <span class="token operator">+</span>y<span class="token punctuation">)</span>fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token string">"hello world"</span><span class="token punctuation">)</span><span class="token punctuation">&#125;</span><span class="token punctuation">(</span><span class="token number">100</span><span class="token punctuation">,</span> <span class="token number">200</span><span class="token punctuation">)</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><ul><li>åŒ¿åå‡½æ•°å¤šç”¨äºå®ç°å›è°ƒå‡½æ•°å’Œé—­åŒ…</li></ul><h3 id="é—­åŒ…"><a href="#é—­åŒ…" class="headerlink" title="é—­åŒ…"></a>é—­åŒ…</h3><ul><li><p>é—­åŒ…æŒ‡çš„æ˜¯ä¸€ä¸ªå‡½æ•°å’ŒåŸŸå…¶ä»–ç›¸å…³çš„å¼•ç”¨ç¯å¢ƒç»„åˆè€Œæˆçš„å®ä½“ï¼Œ<code>é—­åŒ…=å‡½æ•°+å¼•ç”¨ç¯å¢ƒ</code></p></li><li><p>é—­åŒ…å‡½æ•°ç¤ºä¾‹ä¸€</p><pre class="line-numbers language-go" data-language="go"><code class="language-go"><span class="token keyword">func</span> <span class="token function">adder</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">func</span><span class="token punctuation">(</span><span class="token builtin">int</span><span class="token punctuation">)</span> <span class="token builtin">int</span> <span class="token punctuation">&#123;</span><span class="token keyword">var</span> x <span class="token builtin">int</span><span class="token keyword">return</span> <span class="token keyword">func</span><span class="token punctuation">(</span>y <span class="token builtin">int</span><span class="token punctuation">)</span> <span class="token builtin">int</span> <span class="token punctuation">&#123;</span>x <span class="token operator">+=</span> y<span class="token keyword">return</span> x<span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span class="token keyword">func</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span><span class="token keyword">var</span> f <span class="token operator">=</span> <span class="token function">adder</span><span class="token punctuation">(</span><span class="token punctuation">)</span>fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token function">f</span><span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment">//10</span>fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token function">f</span><span class="token punctuation">(</span><span class="token number">20</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment">//30</span>fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token function">f</span><span class="token punctuation">(</span><span class="token number">30</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment">//60</span>f1 <span class="token operator">:=</span> <span class="token function">adder</span><span class="token punctuation">(</span><span class="token punctuation">)</span>fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token function">f1</span><span class="token punctuation">(</span><span class="token number">40</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment">//40</span>fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token function">f1</span><span class="token punctuation">(</span><span class="token number">50</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment">//90</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></li><li><p>é—­åŒ…å‡½æ•°ç¤ºä¾‹äºŒ</p><pre class="line-numbers language-go" data-language="go"><code class="language-go"><span class="token keyword">func</span> <span class="token function">makeSuffixFunc</span><span class="token punctuation">(</span>suffix <span class="token builtin">string</span><span class="token punctuation">)</span> <span class="token keyword">func</span><span class="token punctuation">(</span><span class="token builtin">string</span><span class="token punctuation">)</span> <span class="token builtin">string</span> <span class="token punctuation">&#123;</span><span class="token keyword">return</span> <span class="token keyword">func</span><span class="token punctuation">(</span>name <span class="token builtin">string</span><span class="token punctuation">)</span> <span class="token builtin">string</span> <span class="token punctuation">&#123;</span><span class="token keyword">if</span> <span class="token operator">!</span>strings<span class="token punctuation">.</span><span class="token function">HasSuffix</span><span class="token punctuation">(</span>name<span class="token punctuation">,</span> suffix<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span><span class="token keyword">return</span> name <span class="token operator">+</span> suffix<span class="token punctuation">&#125;</span><span class="token keyword">return</span> name<span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span class="token keyword">func</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>jpgFunc <span class="token operator">:=</span> <span class="token function">makeSuffixFunc</span><span class="token punctuation">(</span><span class="token string">".jpg"</span><span class="token punctuation">)</span>txtFunc <span class="token operator">:=</span> <span class="token function">makeSuffixFunc</span><span class="token punctuation">(</span><span class="token string">".txt"</span><span class="token punctuation">)</span>fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token function">jpgFunc</span><span class="token punctuation">(</span><span class="token string">"test"</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment">//test.jpg</span>fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token function">txtFunc</span><span class="token punctuation">(</span><span class="token string">"test"</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment">//test.txt</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></li><li><p>é—­åŒ…ç¤ºä¾‹ä¸‰</p><pre class="line-numbers language-go" data-language="go"><code class="language-go"><span class="token keyword">func</span> <span class="token function">calc</span><span class="token punctuation">(</span>base <span class="token builtin">int</span><span class="token punctuation">)</span> <span class="token punctuation">(</span><span class="token keyword">func</span><span class="token punctuation">(</span><span class="token builtin">int</span><span class="token punctuation">)</span> <span class="token builtin">int</span><span class="token punctuation">,</span> <span class="token keyword">func</span><span class="token punctuation">(</span><span class="token builtin">int</span><span class="token punctuation">)</span> <span class="token builtin">int</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>add <span class="token operator">:=</span> <span class="token keyword">func</span><span class="token punctuation">(</span>i <span class="token builtin">int</span><span class="token punctuation">)</span> <span class="token builtin">int</span> <span class="token punctuation">&#123;</span>base <span class="token operator">+=</span> i<span class="token keyword">return</span> base<span class="token punctuation">&#125;</span>sub <span class="token operator">:=</span> <span class="token keyword">func</span><span class="token punctuation">(</span>i <span class="token builtin">int</span><span class="token punctuation">)</span> <span class="token builtin">int</span> <span class="token punctuation">&#123;</span>base <span class="token operator">-=</span> i<span class="token keyword">return</span> base<span class="token punctuation">&#125;</span><span class="token keyword">return</span> add<span class="token punctuation">,</span> sub<span class="token punctuation">&#125;</span><span class="token keyword">func</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>f1<span class="token punctuation">,</span> f2 <span class="token operator">:=</span> <span class="token function">calc</span><span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">)</span>fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token function">f1</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token function">f2</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment">//11 9</span>fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token function">f1</span><span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token function">f2</span><span class="token punctuation">(</span><span class="token number">4</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment">//12 8</span>fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token function">f1</span><span class="token punctuation">(</span><span class="token number">5</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token function">f2</span><span class="token punctuation">(</span><span class="token number">6</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment">//13 7</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></li></ul><h3 id="deferè¯­å¥"><a href="#deferè¯­å¥" class="headerlink" title="deferè¯­å¥"></a>deferè¯­å¥</h3><ul><li><p>Goè¯­è¨€ä¸­çš„<code>defer</code>è¯­å¥ä¼šå°†å…¶åé¢è·Ÿéšçš„è¯­å¥è¿›è¡Œå»¶è¿Ÿå¤„ç†ã€‚åœ¨<code>defer</code>å½’å±çš„å‡½æ•°å³å°†è¿”å›æ—¶ï¼Œå°†å»¶è¿Ÿå¤„ç†çš„è¯­å¥æŒ‰<code>defer</code>å®šä¹‰çš„é€†åºè¿›è¡Œæ‰§è¡Œï¼Œä¹Ÿå°±æ˜¯è¯´ï¼Œå…ˆè¢«<code>defer</code>çš„è¯­å¥æœ€åè¢«æ‰§è¡Œï¼Œæœ€åè¢«<code>defer</code>çš„è¯­å¥ï¼Œæœ€å…ˆè¢«æ‰§è¡Œã€‚</p><pre class="line-numbers language-go" data-language="go"><code class="language-go"><span class="token keyword">func</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token string">"start"</span><span class="token punctuation">)</span><span class="token keyword">defer</span> fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token keyword">defer</span> fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token keyword">defer</span> fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">)</span>fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token string">"end"</span><span class="token punctuation">)</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></li></ul><h4 id="defer-æ‰§è¡Œæ—¶æœº"><a href="#defer-æ‰§è¡Œæ—¶æœº" class="headerlink" title="defer æ‰§è¡Œæ—¶æœº"></a>defer æ‰§è¡Œæ—¶æœº</h4><p>åœ¨Goè¯­è¨€çš„å‡½æ•°ä¸­<code>return</code>è¯­å¥åœ¨åº•å±‚å¹¶ä¸æ˜¯åŸå­æ“ä½œï¼Œå®ƒåˆ†ä¸ºç»™è¿”å›å€¼èµ‹å€¼å’ŒRETæŒ‡ä»¤ä¸¤æ­¥ã€‚è€Œ<code>defer</code>è¯­å¥æ‰§è¡Œçš„æ—¶æœºå°±åœ¨è¿”å›å€¼èµ‹å€¼æ“ä½œåï¼ŒRETæŒ‡ä»¤æ‰§è¡Œå‰ã€‚å…·ä½“å¦‚ä¸‹å›¾æ‰€ç¤ºï¼š</p><p><img src="https://zhangtq-blog.oss-cn-hangzhou.aliyuncs.com/content_picture/image-20230419211056900.png" alt="image-20230419211056900"></p><h4 id="defer-æ¡ˆä¾‹"><a href="#defer-æ¡ˆä¾‹" class="headerlink" title="defer æ¡ˆä¾‹"></a>defer æ¡ˆä¾‹</h4><ul><li>é˜…è¯»ä¸‹é¢ä»£ç ï¼Œå†™å‡ºæœ€åçš„æ‰“å°ç»“æœ</li></ul><pre class="line-numbers language-go" data-language="go"><code class="language-go"><span class="token keyword">func</span> <span class="token function">f1</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token builtin">int</span> <span class="token punctuation">&#123;</span>x <span class="token operator">:=</span> <span class="token number">5</span><span class="token keyword">defer</span> <span class="token keyword">func</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>x<span class="token operator">++</span><span class="token punctuation">&#125;</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token keyword">return</span> x  <span class="token comment">// 1. è¿”å›å€¼èµ‹å€¼  2. defer 3.RET</span><span class="token punctuation">&#125;</span><span class="token comment">// ç­”æ¡ˆ 5</span><span class="token keyword">func</span> <span class="token function">f2</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">(</span>x <span class="token builtin">int</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span><span class="token keyword">defer</span> <span class="token keyword">func</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>x<span class="token operator">++</span><span class="token punctuation">&#125;</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token keyword">return</span> <span class="token number">5</span> <span class="token comment">// 1. è¿”å›å€¼èµ‹å€¼ x=5 2.defer x++ 3. RET</span><span class="token punctuation">&#125;</span> <span class="token comment">// ç­”æ¡ˆ 6</span><span class="token keyword">func</span> <span class="token function">f3</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">(</span>y <span class="token builtin">int</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>x <span class="token operator">:=</span> <span class="token number">5</span><span class="token keyword">defer</span> <span class="token keyword">func</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>x<span class="token operator">++</span><span class="token punctuation">&#125;</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token keyword">return</span> x  <span class="token comment">// 1. è¿”å›å€¼èµ‹å€¼ y=x=5, 2. defer x++ 3.RET</span>    <span class="token punctuation">&#125;</span><span class="token comment">// ç­”æ¡ˆ5</span><span class="token keyword">func</span> <span class="token function">f4</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">(</span>x <span class="token builtin">int</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span><span class="token keyword">defer</span> <span class="token keyword">func</span><span class="token punctuation">(</span>x <span class="token builtin">int</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>x<span class="token operator">++</span>  <span class="token comment">// xå½“ä½œå‚æ•°ä¼ å…¥è¿›å»äº†ï¼Œæ‰€ä»¥æ”¹å˜çš„æ˜¯xçš„å‰¯æœ¬ï¼Œæ‰€ä»¥ç­”æ¡ˆè¿˜æ˜¯5</span><span class="token punctuation">&#125;</span><span class="token punctuation">(</span>x<span class="token punctuation">)</span><span class="token keyword">return</span> <span class="token number">5</span><span class="token punctuation">&#125;</span><span class="token comment">// ç­”æ¡ˆ5</span><span class="token keyword">func</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token function">f1</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token function">f2</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token function">f3</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token function">f4</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h4 id="deferé¢è¯•é¢˜"><a href="#deferé¢è¯•é¢˜" class="headerlink" title="deferé¢è¯•é¢˜"></a>deferé¢è¯•é¢˜</h4><pre class="line-numbers language-go" data-language="go"><code class="language-go"><span class="token keyword">func</span> <span class="token function">calc</span><span class="token punctuation">(</span>index <span class="token builtin">string</span><span class="token punctuation">,</span> a<span class="token punctuation">,</span> b <span class="token builtin">int</span><span class="token punctuation">)</span> <span class="token builtin">int</span> <span class="token punctuation">&#123;</span>ret <span class="token operator">:=</span> a <span class="token operator">+</span> bfmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span>index<span class="token punctuation">,</span> a<span class="token punctuation">,</span> b<span class="token punctuation">,</span> ret<span class="token punctuation">)</span><span class="token keyword">return</span> ret<span class="token punctuation">&#125;</span><span class="token keyword">func</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>x <span class="token operator">:=</span> <span class="token number">1</span>y <span class="token operator">:=</span> <span class="token number">2</span>    <span class="token keyword">defer</span> <span class="token function">calc</span><span class="token punctuation">(</span><span class="token string">"AA"</span><span class="token punctuation">,</span> x<span class="token punctuation">,</span> <span class="token function">calc</span><span class="token punctuation">(</span><span class="token string">"A"</span><span class="token punctuation">,</span> x<span class="token punctuation">,</span> y<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment">// å…ˆè®¡ç®—ç¬¬äºŒä¸ªå‚æ•°çš„ç»“æœä¸º3, ä¼šè¾“å‡ºA 1 2 3 æ‰§è¡Œdefer xç›¸å½“äºæ‰§è¡Œcalc(AA, 1, 3)è¾“å‡º AA  1, 3, 4</span>    x <span class="token operator">=</span> <span class="token number">10</span>    <span class="token keyword">defer</span> <span class="token function">calc</span><span class="token punctuation">(</span><span class="token string">"BB"</span><span class="token punctuation">,</span> x<span class="token punctuation">,</span> <span class="token function">calc</span><span class="token punctuation">(</span><span class="token string">"B"</span><span class="token punctuation">,</span> x<span class="token punctuation">,</span> y<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment">// å…ˆè®¡ç®—ç¬¬äºŒä¸ªå‚æ•°çš„ç»“æœä¸º12ï¼Œ è¾“å‡ºB 10 2 12  æ‰§è¡Œdefer calc("BB", 10, 12) è¾“å‡ºBB 10 12 22</span>y <span class="token operator">=</span> <span class="token number">20</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>ä¸Šé¢ä»£ç çš„è¾“å‡ºç»“æœæ˜¯å¤šå°‘ï¼Ÿ</p><p>ç»¼åˆä¸Šé¢åˆ†æä»¥åŠdeferçš„æ‰§è¡Œé¡ºåºå¾—åˆ°å¦‚ä¸‹ç»“æœ</p><ol><li>A 1 2 3</li><li>B 10 2 12</li><li>BB 10 12 22</li><li>AA  1 3 4</li></ol><div class="uk-alert uk-alert-danger"><i class="fas fa-exclamation-triangle"></i> deferæ³¨å†Œè¦å»¶è¿Ÿæ‰§è¡Œçš„å‡½æ•°æ—¶è¯¥å‡½æ•°æ‰€æœ‰çš„å‚æ•°éƒ½éœ€è¦ç¡®å®šå…¶å€¼</div><h2 id="å†…ç½®å‡½æ•°ä»‹ç»"><a href="#å†…ç½®å‡½æ•°ä»‹ç»" class="headerlink" title="å†…ç½®å‡½æ•°ä»‹ç»"></a>å†…ç½®å‡½æ•°ä»‹ç»</h2><p><img src="https://zhangtq-blog.oss-cn-hangzhou.aliyuncs.com/content_picture/image-20230419214805356.png" alt="image-20230419214805356"></p><h3 id="panic-x2F-recover"><a href="#panic-x2F-recover" class="headerlink" title="panic&#x2F;recover"></a>panic&#x2F;recover</h3><p>Goè¯­è¨€ä¸­ç›®å‰ï¼ˆGo1.12ï¼‰æ˜¯æ²¡æœ‰å¼‚å¸¸æœºåˆ¶ï¼Œä½†æ˜¯ä½¿ç”¨<code>panic/recover</code>æ¨¡å¼æ¥å¤„ç†é”™è¯¯ã€‚ <code>panic</code>å¯ä»¥åœ¨ä»»ä½•åœ°æ–¹å¼•å‘ï¼Œä½†<code>recover</code>åªæœ‰åœ¨<code>defer</code>è°ƒç”¨çš„å‡½æ•°ä¸­æœ‰æ•ˆã€‚ é¦–å…ˆæ¥çœ‹ä¸€ä¸ªä¾‹å­ï¼š</p><pre class="line-numbers language-go" data-language="go"><code class="language-go"><span class="token keyword">package</span> main<span class="token keyword">import</span> <span class="token string">"fmt"</span><span class="token keyword">func</span> <span class="token function">funcA</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token string">"func A"</span><span class="token punctuation">)</span><span class="token punctuation">&#125;</span><span class="token keyword">func</span> <span class="token function">funcB</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span><span class="token function">panic</span><span class="token punctuation">(</span><span class="token string">"panic in B"</span><span class="token punctuation">)</span><span class="token punctuation">&#125;</span><span class="token keyword">func</span> <span class="token function">funcC</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token string">"func C"</span><span class="token punctuation">)</span><span class="token punctuation">&#125;</span><span class="token keyword">func</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span><span class="token function">funcA</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token function">funcB</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token function">funcC</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>è¾“å‡ºï¼š</p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">func Apanic: panic <span class="token keyword">in</span> Bgoroutine <span class="token number">1</span> <span class="token punctuation">[</span>running<span class="token punctuation">]</span>:main.funcB<span class="token punctuation">(</span><span class="token punctuation">..</span>.<span class="token punctuation">)</span>        G:/go_project/day03/func_panic/main.go:10main.main<span class="token punctuation">(</span><span class="token punctuation">)</span>        G:/go_project/day03/func_panic/main.go:18 +0x66<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>åˆ†æï¼š ç¨‹åºè¿è¡ŒæœŸé—´<code>funcB</code>ä¸­å¼•å‘äº†<code>panic</code>å¯¼è‡´ç¨‹åºå´©æºƒï¼Œå¼‚å¸¸é€€å‡ºäº†ã€‚è¿™ä¸ªæ—¶å€™æˆ‘ä»¬å°±å¯ä»¥é€šè¿‡<code>recover</code>å°†ç¨‹åºæ¢å¤å›æ¥ï¼Œç»§ç»­å¾€åæ‰§è¡Œã€‚</p><pre class="line-numbers language-go" data-language="go"><code class="language-go"><span class="token keyword">func</span> <span class="token function">funcA</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token string">"func A"</span><span class="token punctuation">)</span><span class="token punctuation">&#125;</span><span class="token keyword">func</span> <span class="token function">funcB</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span><span class="token keyword">defer</span> <span class="token keyword">func</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>err <span class="token operator">:=</span> <span class="token function">recover</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token comment">//å¦‚æœç¨‹åºå‡ºå‡ºç°äº†panicé”™è¯¯,å¯ä»¥é€šè¿‡recoveræ¢å¤è¿‡æ¥</span><span class="token keyword">if</span> err <span class="token operator">!=</span> <span class="token boolean">nil</span> <span class="token punctuation">&#123;</span>fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token string">"recover in B"</span><span class="token punctuation">)</span><span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token function">panic</span><span class="token punctuation">(</span><span class="token string">"panic in B"</span><span class="token punctuation">)</span><span class="token punctuation">&#125;</span><span class="token keyword">func</span> <span class="token function">funcC</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token string">"func C"</span><span class="token punctuation">)</span><span class="token punctuation">&#125;</span><span class="token keyword">func</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span><span class="token function">funcA</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token function">funcB</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token function">funcC</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><div class="uk-alert uk-alert-danger"><i class="fas fa-exclamation-triangle"></i> 1. recover()å¿…é¡»è¦æ­é…deferä½¿ç”¨2. deferä¸€å®šè¦å®šä¹‰åœ¨å¯èƒ½å¼•å‘panicçš„è¯­å¥ä¹‹å‰</div><h2 id="fmtæ ‡å‡†åº“ä»‹ç»"><a href="#fmtæ ‡å‡†åº“ä»‹ç»" class="headerlink" title="fmtæ ‡å‡†åº“ä»‹ç»"></a>fmtæ ‡å‡†åº“ä»‹ç»</h2><h4 id="Print"><a href="#Print" class="headerlink" title="Print"></a>Print</h4><blockquote><p><code>Print</code>ç³»åˆ—å‡½æ•°ä¼šå°†å†…å®¹è¾“å‡ºåˆ°ç³»ç»Ÿçš„æ ‡å‡†è¾“å‡ºï¼ŒåŒºåˆ«åœ¨äº<code>Print</code>å‡½æ•°ç›´æ¥è¾“å‡ºå†…å®¹ï¼Œ<code>Printf</code>å‡½æ•°æ”¯æŒæ ¼å¼åŒ–è¾“å‡ºå­—ç¬¦ä¸²ï¼Œ<code>Println</code>å‡½æ•°ä¼šåœ¨è¾“å‡ºå†…å®¹çš„ç»“å°¾æ·»åŠ ä¸€ä¸ªæ¢è¡Œç¬¦ã€‚</p></blockquote><pre class="line-numbers language-go" data-language="go"><code class="language-go"><span class="token keyword">func</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>fmt<span class="token punctuation">.</span><span class="token function">Print</span><span class="token punctuation">(</span><span class="token string">"åœ¨ç»ˆç«¯æ‰“å°è¯¥ä¿¡æ¯ã€‚"</span><span class="token punctuation">)</span>name <span class="token operator">:=</span> <span class="token string">"æ²™æ²³å°ç‹å­"</span>fmt<span class="token punctuation">.</span><span class="token function">Printf</span><span class="token punctuation">(</span><span class="token string">"æˆ‘æ˜¯ï¼š%s\n"</span><span class="token punctuation">,</span> name<span class="token punctuation">)</span>fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token string">"åœ¨ç»ˆç«¯æ‰“å°å•ç‹¬ä¸€è¡Œæ˜¾ç¤º"</span><span class="token punctuation">)</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">åœ¨ç»ˆç«¯æ‰“å°è¯¥ä¿¡æ¯ã€‚æˆ‘æ˜¯ï¼šæ²™æ²³å°ç‹å­åœ¨ç»ˆç«¯æ‰“å°å•ç‹¬ä¸€è¡Œæ˜¾ç¤º<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre><h4 id="Fprint"><a href="#Fprint" class="headerlink" title="Fprint"></a>Fprint</h4><blockquote><p><code>Fprint</code>ç³»åˆ—å‡½æ•°ä¼šå°†å†…å®¹è¾“å‡ºåˆ°ä¸€ä¸ª<code>io.Writer</code>æ¥å£ç±»å‹çš„å˜é‡<code>w</code>ä¸­ï¼Œæˆ‘ä»¬é€šå¸¸ç”¨è¿™ä¸ªå‡½æ•°å¾€æ–‡ä»¶ä¸­å†™å…¥å†…å®¹</p></blockquote><pre class="line-numbers language-go" data-language="go"><code class="language-go"><span class="token keyword">func</span> <span class="token function">Fprint</span><span class="token punctuation">(</span>w io<span class="token punctuation">.</span>Writer<span class="token punctuation">,</span> a <span class="token operator">...</span><span class="token keyword">interface</span><span class="token punctuation">&#123;</span><span class="token punctuation">&#125;</span><span class="token punctuation">)</span> <span class="token punctuation">(</span>n <span class="token builtin">int</span><span class="token punctuation">,</span> err <span class="token builtin">error</span><span class="token punctuation">)</span><span class="token keyword">func</span> <span class="token function">Fprintf</span><span class="token punctuation">(</span>w io<span class="token punctuation">.</span>Writer<span class="token punctuation">,</span> format <span class="token builtin">string</span><span class="token punctuation">,</span> a <span class="token operator">...</span><span class="token keyword">interface</span><span class="token punctuation">&#123;</span><span class="token punctuation">&#125;</span><span class="token punctuation">)</span> <span class="token punctuation">(</span>n <span class="token builtin">int</span><span class="token punctuation">,</span> err <span class="token builtin">error</span><span class="token punctuation">)</span><span class="token keyword">func</span> <span class="token function">Fprintln</span><span class="token punctuation">(</span>w io<span class="token punctuation">.</span>Writer<span class="token punctuation">,</span> a <span class="token operator">...</span><span class="token keyword">interface</span><span class="token punctuation">&#123;</span><span class="token punctuation">&#125;</span><span class="token punctuation">)</span> <span class="token punctuation">(</span>n <span class="token builtin">int</span><span class="token punctuation">,</span> err <span class="token builtin">error</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre><p>ä¸¾ä¾‹</p><pre class="line-numbers language-go" data-language="go"><code class="language-go"><span class="token comment">// å°†æ ‡å‡†è¾“å‡ºå†™å…¥å†…å®¹</span>fmt<span class="token punctuation">.</span><span class="token function">Fprintln</span><span class="token punctuation">(</span>os<span class="token punctuation">.</span>Stdout<span class="token punctuation">,</span> <span class="token string">"åƒæ ‡å‡†è¾“å‡ºå†™å…¥å†…å®¹"</span><span class="token punctuation">)</span>fileObj<span class="token punctuation">,</span> err <span class="token operator">:=</span> os<span class="token punctuation">.</span><span class="token function">OpenFile</span><span class="token punctuation">(</span><span class="token string">"./xxx.txt"</span><span class="token punctuation">,</span> os<span class="token punctuation">.</span>O_CREATE<span class="token operator">|</span>os<span class="token punctuation">.</span>O_WRONLY<span class="token operator">|</span>os<span class="token punctuation">.</span>O_APPEND<span class="token punctuation">,</span> <span class="token number">0644</span><span class="token punctuation">)</span><span class="token keyword">if</span> err <span class="token operator">!=</span> <span class="token boolean">nil</span> <span class="token punctuation">&#123;</span>fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token string">"æ‰“å¼€æ–‡ä»¶å‡ºé”™ï¼Œerr:"</span><span class="token punctuation">,</span> err<span class="token punctuation">)</span><span class="token keyword">return</span><span class="token punctuation">&#125;</span>name <span class="token operator">:=</span> <span class="token string">"æ²™æ²³å°ç‹å­"</span><span class="token comment">// å‘æ‰“å¼€çš„æ–‡ä»¶å¥æŸ„ä¸­å†™å…¥å†…å®¹</span>fmt<span class="token punctuation">.</span><span class="token function">Fprintf</span><span class="token punctuation">(</span>fileObj<span class="token punctuation">,</span> <span class="token string">"å¾€æ–‡ä»¶ä¸­å†™å¦‚ä¿¡æ¯ï¼š%s"</span><span class="token punctuation">,</span> name<span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h4 id="Sprint"><a href="#Sprint" class="headerlink" title="Sprint"></a>Sprint</h4><blockquote><p><code>Sprint</code>ç³»åˆ—å‡½æ•°ä¼šæŠŠä¼ å…¥çš„æ•°æ®ç”Ÿæˆå¹¶è¿”å›ä¸€ä¸ªå­—ç¬¦ä¸²ã€‚</p></blockquote><pre class="line-numbers language-go" data-language="go"><code class="language-go"><span class="token keyword">func</span> <span class="token function">Sprint</span><span class="token punctuation">(</span>a <span class="token operator">...</span><span class="token keyword">interface</span><span class="token punctuation">&#123;</span><span class="token punctuation">&#125;</span><span class="token punctuation">)</span> <span class="token builtin">string</span><span class="token keyword">func</span> <span class="token function">Sprintf</span><span class="token punctuation">(</span>format <span class="token builtin">string</span><span class="token punctuation">,</span> a <span class="token operator">...</span><span class="token keyword">interface</span><span class="token punctuation">&#123;</span><span class="token punctuation">&#125;</span><span class="token punctuation">)</span> <span class="token builtin">string</span><span class="token keyword">func</span> <span class="token function">Sprintln</span><span class="token punctuation">(</span>a <span class="token operator">...</span><span class="token keyword">interface</span><span class="token punctuation">&#123;</span><span class="token punctuation">&#125;</span><span class="token punctuation">)</span> <span class="token builtin">string</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre><p>ç®€å•ä»£ç ç¤ºä¾‹</p><pre class="line-numbers language-go" data-language="go"><code class="language-go">s1 <span class="token operator">:=</span> fmt<span class="token punctuation">.</span><span class="token function">Sprint</span><span class="token punctuation">(</span><span class="token string">"æ²™æ²³å°ç‹å­"</span><span class="token punctuation">)</span>name <span class="token operator">:=</span> <span class="token string">"æ²™æ²³å°ç‹å­"</span>age <span class="token operator">:=</span> <span class="token number">18</span>s2 <span class="token operator">:=</span> fmt<span class="token punctuation">.</span><span class="token function">Sprintf</span><span class="token punctuation">(</span><span class="token string">"name:%s,age:%d"</span><span class="token punctuation">,</span> name<span class="token punctuation">,</span> age<span class="token punctuation">)</span>s3 <span class="token operator">:=</span> fmt<span class="token punctuation">.</span><span class="token function">Sprintln</span><span class="token punctuation">(</span><span class="token string">"æ²™æ²³å°ç‹å­"</span><span class="token punctuation">)</span>fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span>s1<span class="token punctuation">,</span> s2<span class="token punctuation">,</span> s3<span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h4 id="Errorf"><a href="#Errorf" class="headerlink" title="Errorf"></a>Errorf</h4><blockquote><p><code>Errorf</code>å‡½æ•°æ ¹æ®formatå‚æ•°ç”Ÿæˆæ ¼å¼åŒ–å­—ç¬¦ä¸²å¹¶è¿”å›ä¸€ä¸ªåŒ…å«è¯¥å­—ç¬¦ä¸²çš„é”™è¯¯ã€‚</p></blockquote><pre class="line-numbers language-go" data-language="go"><code class="language-go"><span class="token keyword">func</span> <span class="token function">Errorf</span><span class="token punctuation">(</span>format <span class="token builtin">string</span><span class="token punctuation">,</span> a <span class="token operator">...</span><span class="token keyword">interface</span><span class="token punctuation">&#123;</span><span class="token punctuation">&#125;</span><span class="token punctuation">)</span> <span class="token builtin">error</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>é€šå¸¸ç”¨æ¥è‡ªå®šä¹‰é”™è¯¯ç±»å‹</p><pre class="line-numbers language-go" data-language="go"><code class="language-go">err <span class="token operator">:=</span> fmt<span class="token punctuation">.</span><span class="token function">Errorf</span><span class="token punctuation">(</span><span class="token string">"è¿™æ˜¯ä¸€ä¸ªé”™è¯¯"</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><pre class="line-numbers language-go" data-language="go"><code class="language-go">e <span class="token operator">:=</span> errors<span class="token punctuation">.</span><span class="token function">New</span><span class="token punctuation">(</span><span class="token string">"åŸå§‹é”™è¯¯e"</span><span class="token punctuation">)</span>w <span class="token operator">:=</span> fmt<span class="token punctuation">.</span><span class="token function">Errorf</span><span class="token punctuation">(</span><span class="token string">"Wrapäº†ä¸€ä¸ªé”™è¯¯%w"</span><span class="token punctuation">,</span> e<span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre><h4 id="æ ¼å¼åŒ–å ä½ç¬¦"><a href="#æ ¼å¼åŒ–å ä½ç¬¦" class="headerlink" title="æ ¼å¼åŒ–å ä½ç¬¦"></a>æ ¼å¼åŒ–å ä½ç¬¦</h4><ul><li>é€šç”¨å ä½ç¬¦</li></ul><p><img src="https://zhangtq-blog.oss-cn-hangzhou.aliyuncs.com/content_picture/image-20230419222115673.png" alt="image-20230419222115673"></p><p>ç¤ºä¾‹ä»£ç å¦‚ä¸‹ï¼š</p><pre class="line-numbers language-go" data-language="go"><code class="language-go">fmt<span class="token punctuation">.</span><span class="token function">Printf</span><span class="token punctuation">(</span><span class="token string">"%v\n"</span><span class="token punctuation">,</span> <span class="token number">100</span><span class="token punctuation">)</span>fmt<span class="token punctuation">.</span><span class="token function">Printf</span><span class="token punctuation">(</span><span class="token string">"%v\n"</span><span class="token punctuation">,</span> <span class="token boolean">false</span><span class="token punctuation">)</span>o <span class="token operator">:=</span> <span class="token keyword">struct</span><span class="token punctuation">&#123;</span> name <span class="token builtin">string</span> <span class="token punctuation">&#125;</span><span class="token punctuation">&#123;</span><span class="token string">"å°ç‹å­"</span><span class="token punctuation">&#125;</span>fmt<span class="token punctuation">.</span><span class="token function">Printf</span><span class="token punctuation">(</span><span class="token string">"%v\n"</span><span class="token punctuation">,</span> o<span class="token punctuation">)</span>fmt<span class="token punctuation">.</span><span class="token function">Printf</span><span class="token punctuation">(</span><span class="token string">"%#v\n"</span><span class="token punctuation">,</span> o<span class="token punctuation">)</span>fmt<span class="token punctuation">.</span><span class="token function">Printf</span><span class="token punctuation">(</span><span class="token string">"%T\n"</span><span class="token punctuation">,</span> o<span class="token punctuation">)</span>fmt<span class="token punctuation">.</span><span class="token function">Printf</span><span class="token punctuation">(</span><span class="token string">"100%%\n"</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>è¾“å‡ºç»“æœå¦‚ä¸‹ï¼š</p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token number">100</span><span class="token boolean">false</span><span class="token punctuation">&#123;</span>å°ç‹å­<span class="token punctuation">&#125;</span>struct <span class="token punctuation">&#123;</span> name string <span class="token punctuation">&#125;</span><span class="token punctuation">&#123;</span>name:<span class="token string">"å°ç‹å­"</span><span class="token punctuation">&#125;</span>struct <span class="token punctuation">&#123;</span> name string <span class="token punctuation">&#125;</span><span class="token number">100</span>%<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><ul><li>å¸ƒå°”å‹</li></ul><p><img src="https://zhangtq-blog.oss-cn-hangzhou.aliyuncs.com/content_picture/image-20230419222246501.png" alt="image-20230419222246501"></p><ul><li>æ•´å½¢</li></ul><p><img src="https://zhangtq-blog.oss-cn-hangzhou.aliyuncs.com/content_picture/image-20230419222326482.png" alt="image-20230419222326482"></p><ul><li>æµ®ç‚¹æ•°</li></ul><p><img src="https://zhangtq-blog.oss-cn-hangzhou.aliyuncs.com/content_picture/image-20230419222539519.png" alt="image-20230419222539519"></p><p>ç¤ºä¾‹ä»£ç å¦‚ä¸‹ï¼š</p><pre class="line-numbers language-go" data-language="go"><code class="language-go">f <span class="token operator">:=</span> <span class="token number">12.34</span>fmt<span class="token punctuation">.</span><span class="token function">Printf</span><span class="token punctuation">(</span><span class="token string">"%b\n"</span><span class="token punctuation">,</span> f<span class="token punctuation">)</span>fmt<span class="token punctuation">.</span><span class="token function">Printf</span><span class="token punctuation">(</span><span class="token string">"%e\n"</span><span class="token punctuation">,</span> f<span class="token punctuation">)</span>fmt<span class="token punctuation">.</span><span class="token function">Printf</span><span class="token punctuation">(</span><span class="token string">"%E\n"</span><span class="token punctuation">,</span> f<span class="token punctuation">)</span>fmt<span class="token punctuation">.</span><span class="token function">Printf</span><span class="token punctuation">(</span><span class="token string">"%f\n"</span><span class="token punctuation">,</span> f<span class="token punctuation">)</span>fmt<span class="token punctuation">.</span><span class="token function">Printf</span><span class="token punctuation">(</span><span class="token string">"%g\n"</span><span class="token punctuation">,</span> f<span class="token punctuation">)</span>fmt<span class="token punctuation">.</span><span class="token function">Printf</span><span class="token punctuation">(</span><span class="token string">"%G\n"</span><span class="token punctuation">,</span> f<span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>è¾“å‡ºç»“æœå¦‚ä¸‹ï¼š</p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">6946802425218990p-49<span class="token number">1</span>.234000e+01<span class="token number">1</span>.234000E+01<span class="token number">12.340000</span><span class="token number">12.34</span><span class="token number">12.34</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><ul><li>å­—ç¬¦ä¸²å’Œbyte</li></ul><p><img src="https://zhangtq-blog.oss-cn-hangzhou.aliyuncs.com/content_picture/image-20230419222617095.png" alt="image-20230419222617095"></p><p>ç¤ºä¾‹ä»£ç å¦‚ä¸‹ï¼š</p><pre class="line-numbers language-go" data-language="go"><code class="language-go">s <span class="token operator">:=</span> <span class="token string">"å°ç‹å­"</span>fmt<span class="token punctuation">.</span><span class="token function">Printf</span><span class="token punctuation">(</span><span class="token string">"%s\n"</span><span class="token punctuation">,</span> s<span class="token punctuation">)</span>fmt<span class="token punctuation">.</span><span class="token function">Printf</span><span class="token punctuation">(</span><span class="token string">"%q\n"</span><span class="token punctuation">,</span> s<span class="token punctuation">)</span>fmt<span class="token punctuation">.</span><span class="token function">Printf</span><span class="token punctuation">(</span><span class="token string">"%x\n"</span><span class="token punctuation">,</span> s<span class="token punctuation">)</span>fmt<span class="token punctuation">.</span><span class="token function">Printf</span><span class="token punctuation">(</span><span class="token string">"%X\n"</span><span class="token punctuation">,</span> s<span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>è¾“å‡ºç»“æœå¦‚ä¸‹ï¼š</p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">å°ç‹å­<span class="token string">"å°ç‹å­"</span>e5b08fe78e8be5ad90E5B08FE78E8BE5AD90<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre><ul><li>æŒ‡é’ˆ</li></ul><p><img src="https://zhangtq-blog.oss-cn-hangzhou.aliyuncs.com/content_picture/image-20230419222726130.png" alt="image-20230419222726130"></p><p>ç¤ºä¾‹ä»£ç å¦‚ä¸‹ï¼š</p><pre class="line-numbers language-go" data-language="go"><code class="language-go">a <span class="token operator">:=</span> <span class="token number">10</span>fmt<span class="token punctuation">.</span><span class="token function">Printf</span><span class="token punctuation">(</span><span class="token string">"%p\n"</span><span class="token punctuation">,</span> <span class="token operator">&amp;</span>a<span class="token punctuation">)</span>fmt<span class="token punctuation">.</span><span class="token function">Printf</span><span class="token punctuation">(</span><span class="token string">"%#p\n"</span><span class="token punctuation">,</span> <span class="token operator">&amp;</span>a<span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre><p>è¾“å‡ºç»“æœå¦‚ä¸‹ï¼š</p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">0xc000094000c000094000<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre><ul><li><p>å®½åº¦æ ‡è¯†ç¬¦</p><blockquote><p>å®½åº¦é€šè¿‡ä¸€ä¸ªç´§è·Ÿåœ¨ç™¾åˆ†å·åé¢çš„åè¿›åˆ¶æ•°æŒ‡å®šï¼Œå¦‚æœæœªæŒ‡å®šå®½åº¦ï¼Œåˆ™è¡¨ç¤ºå€¼æ—¶é™¤å¿…éœ€ä¹‹å¤–ä¸ä½œå¡«å……ã€‚ç²¾åº¦é€šè¿‡ï¼ˆå¯é€‰çš„ï¼‰å®½åº¦åè·Ÿç‚¹å·åè·Ÿçš„åè¿›åˆ¶æ•°æŒ‡å®šã€‚å¦‚æœæœªæŒ‡å®šç²¾åº¦ï¼Œä¼šä½¿ç”¨é»˜è®¤ç²¾åº¦ï¼›å¦‚æœç‚¹å·åæ²¡æœ‰è·Ÿæ•°å­—ï¼Œè¡¨ç¤ºç²¾åº¦ä¸º0ã€‚ä¸¾ä¾‹å¦‚ä¸‹</p></blockquote></li></ul><p><img src="https://zhangtq-blog.oss-cn-hangzhou.aliyuncs.com/content_picture/image-20230419222902057.png" alt="image-20230419222902057"></p><p>ç¤ºä¾‹ä»£ç å¦‚ä¸‹ï¼š</p><pre class="line-numbers language-go" data-language="go"><code class="language-go">n <span class="token operator">:=</span> <span class="token number">12.34</span>fmt<span class="token punctuation">.</span><span class="token function">Printf</span><span class="token punctuation">(</span><span class="token string">"%f\n"</span><span class="token punctuation">,</span> n<span class="token punctuation">)</span>fmt<span class="token punctuation">.</span><span class="token function">Printf</span><span class="token punctuation">(</span><span class="token string">"%9f\n"</span><span class="token punctuation">,</span> n<span class="token punctuation">)</span>fmt<span class="token punctuation">.</span><span class="token function">Printf</span><span class="token punctuation">(</span><span class="token string">"%.2f\n"</span><span class="token punctuation">,</span> n<span class="token punctuation">)</span>fmt<span class="token punctuation">.</span><span class="token function">Printf</span><span class="token punctuation">(</span><span class="token string">"%9.2f\n"</span><span class="token punctuation">,</span> n<span class="token punctuation">)</span>fmt<span class="token punctuation">.</span><span class="token function">Printf</span><span class="token punctuation">(</span><span class="token string">"%9.f\n"</span><span class="token punctuation">,</span> n<span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>è¾“å‡ºç»“æœå¦‚ä¸‹ï¼š</p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token number">12.340000</span><span class="token number">12.340000</span><span class="token number">12.34</span>    <span class="token number">12.34</span>       <span class="token number">12</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre><ul><li>å…¶ä»–flag</li></ul><p><img src="https://zhangtq-blog.oss-cn-hangzhou.aliyuncs.com/content_picture/image-20230419222944774.png" alt="image-20230419222944774"></p><p>ä¸¾ä¸ªä¾‹å­ï¼š</p><pre class="line-numbers language-go" data-language="go"><code class="language-go">s <span class="token operator">:=</span> <span class="token string">"å°ç‹å­"</span>fmt<span class="token punctuation">.</span><span class="token function">Printf</span><span class="token punctuation">(</span><span class="token string">"%s\n"</span><span class="token punctuation">,</span> s<span class="token punctuation">)</span>fmt<span class="token punctuation">.</span><span class="token function">Printf</span><span class="token punctuation">(</span><span class="token string">"%5s\n"</span><span class="token punctuation">,</span> s<span class="token punctuation">)</span>fmt<span class="token punctuation">.</span><span class="token function">Printf</span><span class="token punctuation">(</span><span class="token string">"%-5s\n"</span><span class="token punctuation">,</span> s<span class="token punctuation">)</span>fmt<span class="token punctuation">.</span><span class="token function">Printf</span><span class="token punctuation">(</span><span class="token string">"%5.7s\n"</span><span class="token punctuation">,</span> s<span class="token punctuation">)</span>fmt<span class="token punctuation">.</span><span class="token function">Printf</span><span class="token punctuation">(</span><span class="token string">"%-5.7s\n"</span><span class="token punctuation">,</span> s<span class="token punctuation">)</span>fmt<span class="token punctuation">.</span><span class="token function">Printf</span><span class="token punctuation">(</span><span class="token string">"%5.2s\n"</span><span class="token punctuation">,</span> s<span class="token punctuation">)</span>fmt<span class="token punctuation">.</span><span class="token function">Printf</span><span class="token punctuation">(</span><span class="token string">"%05s\n"</span><span class="token punctuation">,</span> s<span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>è¾“å‡ºç»“æœå¦‚ä¸‹ï¼š</p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">å°ç‹å­  å°ç‹å­å°ç‹å­    å°ç‹å­å°ç‹å­     å°ç‹00å°ç‹å­<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h4 id="fmt-Scan"><a href="#fmt-Scan" class="headerlink" title="fmt.Scan"></a>fmt.Scan</h4><h4 id="fmt-Scanf"><a href="#fmt-Scanf" class="headerlink" title="fmt.Scanf"></a>fmt.Scanf</h4><h4 id="fmt-Scanln"><a href="#fmt-Scanln" class="headerlink" title="fmt.Scanln"></a>fmt.Scanln</h4><h4 id="bufil-NewReader"><a href="#bufil-NewReader" class="headerlink" title="bufil.NewReader"></a>bufil.NewReader</h4><h4 id="Fscan"><a href="#Fscan" class="headerlink" title="Fscan"></a>Fscan</h4><h4 id="Sscan"><a href="#Sscan" class="headerlink" title="Sscan"></a>Sscan</h4><h3 id="ç±»å‹åˆ«åå’Œè‡ªå®šä¹‰ç±»å‹"><a href="#ç±»å‹åˆ«åå’Œè‡ªå®šä¹‰ç±»å‹" class="headerlink" title="ç±»å‹åˆ«åå’Œè‡ªå®šä¹‰ç±»å‹"></a>ç±»å‹åˆ«åå’Œè‡ªå®šä¹‰ç±»å‹</h3><ul><li><p>è‡ªå®šä¹‰ç±»å‹</p><blockquote><p>åœ¨Goè¯­è¨€ä¸­æœ‰ä¸€äº›åŸºæœ¬çš„æ•°æ®ç±»å‹ï¼Œå¦‚<code>string</code>ã€<code>æ•´å‹</code>ã€<code>æµ®ç‚¹å‹</code>ã€<code>å¸ƒå°”</code>ç­‰æ•°æ®ç±»å‹ï¼Œ Goè¯­è¨€ä¸­å¯ä»¥ä½¿ç”¨<code>type</code>å…³é”®å­—æ¥å®šä¹‰è‡ªå®šä¹‰ç±»å‹ã€‚</p><p>è‡ªå®šä¹‰ç±»å‹æ˜¯å®šä¹‰äº†ä¸€ä¸ªå…¨æ–°çš„ç±»å‹ã€‚æˆ‘ä»¬å¯ä»¥åŸºäºå†…ç½®çš„åŸºæœ¬ç±»å‹å®šä¹‰ï¼Œä¹Ÿå¯ä»¥é€šè¿‡structå®šä¹‰ã€‚ä¾‹å¦‚ï¼š</p></blockquote><pre class="line-numbers language-go" data-language="go"><code class="language-go"><span class="token comment">//å°†MyIntå®šä¹‰ä¸ºintç±»å‹</span><span class="token keyword">type</span> MyInt <span class="token builtin">int</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre><p>é€šè¿‡<code>type</code>å…³é”®å­—çš„å®šä¹‰ï¼Œ<code>MyInt</code>å°±æ˜¯ä¸€ç§æ–°çš„ç±»å‹ï¼Œå®ƒå…·æœ‰<code>int</code>çš„ç‰¹æ€§ã€‚</p></li><li><p>ç±»å‹åˆ«å</p></li></ul><blockquote><p>ç±»å‹åˆ«åæ˜¯<code>Go1.9</code>ç‰ˆæœ¬æ·»åŠ çš„æ–°åŠŸèƒ½ã€‚</p><p>ç±»å‹åˆ«åè§„å®šï¼šTypeAliasåªæ˜¯Typeçš„åˆ«åï¼Œæœ¬è´¨ä¸ŠTypeAliasä¸Typeæ˜¯åŒä¸€ä¸ªç±»å‹ã€‚å°±åƒä¸€ä¸ªå­©å­å°æ—¶å€™æœ‰å°åã€ä¹³åï¼Œä¸Šå­¦åç”¨å­¦åï¼Œè‹±è¯­è€å¸ˆåˆä¼šç»™ä»–èµ·è‹±æ–‡åï¼Œä½†è¿™äº›åå­—éƒ½æŒ‡çš„æ˜¯ä»–æœ¬äººã€‚</p></blockquote><pre class="line-numbers language-go" data-language="go"><code class="language-go"><span class="token keyword">type</span> TypeAlias <span class="token operator">=</span> Type<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre><p>æˆ‘ä»¬ä¹‹å‰è§è¿‡çš„<code>rune</code>å’Œ<code>byte</code>å°±æ˜¯ç±»å‹åˆ«åï¼Œä»–ä»¬çš„å®šä¹‰å¦‚ä¸‹ï¼š</p><pre class="line-numbers language-go" data-language="go"><code class="language-go"><span class="token keyword">type</span> <span class="token builtin">byte</span> <span class="token operator">=</span> <span class="token builtin">uint8</span><span class="token keyword">type</span> <span class="token builtin">rune</span> <span class="token operator">=</span> <span class="token builtin">int32</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre><ul><li><p>åŒºåˆ«</p><blockquote><p>ç±»å‹åˆ«åä¸ç±»å‹å®šä¹‰è¡¨é¢ä¸Šçœ‹åªæœ‰ä¸€ä¸ªç­‰å·çš„å·®å¼‚ï¼Œæˆ‘ä»¬é€šè¿‡ä¸‹é¢çš„è¿™æ®µä»£ç æ¥ç†è§£å®ƒä»¬ä¹‹é—´çš„åŒºåˆ«ã€‚</p></blockquote><pre class="line-numbers language-go" data-language="go"><code class="language-go"><span class="token comment">//ç±»å‹å®šä¹‰</span><span class="token keyword">type</span> NewInt <span class="token builtin">int</span><span class="token comment">//ç±»å‹åˆ«å</span><span class="token keyword">type</span> MyInt <span class="token operator">=</span> <span class="token builtin">int</span><span class="token keyword">func</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span><span class="token keyword">var</span> a NewInt<span class="token keyword">var</span> b MyIntfmt<span class="token punctuation">.</span><span class="token function">Printf</span><span class="token punctuation">(</span><span class="token string">"type of a:%T\n"</span><span class="token punctuation">,</span> a<span class="token punctuation">)</span> <span class="token comment">//type of a:main.NewInt</span>fmt<span class="token punctuation">.</span><span class="token function">Printf</span><span class="token punctuation">(</span><span class="token string">"type of b:%T\n"</span><span class="token punctuation">,</span> b<span class="token punctuation">)</span> <span class="token comment">//type of b:int</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>ç»“æœæ˜¾ç¤ºaçš„ç±»å‹æ˜¯<code>main.NewInt</code>ï¼Œè¡¨ç¤ºmainåŒ…ä¸‹å®šä¹‰çš„<code>NewInt</code>ç±»å‹ã€‚bçš„ç±»å‹æ˜¯<code>int</code>ã€‚<code>MyInt</code>ç±»å‹åªä¼šåœ¨ä»£ç ä¸­å­˜åœ¨ï¼Œç¼–è¯‘å®Œæˆæ—¶å¹¶ä¸ä¼šæœ‰<code>MyInt</code>ç±»å‹ã€‚</p></li></ul><h2 id="ç»“æ„ä½“"><a href="#ç»“æ„ä½“" class="headerlink" title="ç»“æ„ä½“"></a>ç»“æ„ä½“</h2><h3 id="ç»“æ„ä½“çš„å®šä¹‰"><a href="#ç»“æ„ä½“çš„å®šä¹‰" class="headerlink" title="ç»“æ„ä½“çš„å®šä¹‰"></a>ç»“æ„ä½“çš„å®šä¹‰</h3><blockquote><p>ä½¿ç”¨<code>type</code>å’Œ<code>struct</code>å…³é”®å­—æ¥å®šä¹‰ç»“æ„ä½“ï¼Œå…·ä½“ä»£ç æ ¼å¼å¦‚ä¸‹ï¼š</p></blockquote><pre class="line-numbers language-go" data-language="go"><code class="language-go"><span class="token keyword">type</span> ç±»å‹å <span class="token keyword">struct</span> <span class="token punctuation">&#123;</span>    å­—æ®µå å­—æ®µç±»å‹    å­—æ®µå å­—æ®µç±»å‹    â€¦<span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>ç¤ºä¾‹å¦‚ä¸‹</p><pre class="line-numbers language-go" data-language="go"><code class="language-go"><span class="token keyword">type</span> person <span class="token keyword">struct</span> <span class="token punctuation">&#123;</span>name <span class="token builtin">string</span>city <span class="token builtin">string</span>age  <span class="token builtin">int8</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>åŒæ ·ç±»å‹çš„å­—æ®µä¹Ÿå¯ä»¥å†™åœ¨ä¸€è¡Œï¼Œ</p><pre class="line-numbers language-go" data-language="go"><code class="language-go"><span class="token keyword">type</span> person1 <span class="token keyword">struct</span> <span class="token punctuation">&#123;</span>name<span class="token punctuation">,</span> city <span class="token builtin">string</span>age        <span class="token builtin">int8</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre><h3 id="ç»“æ„ä½“å®ä¾‹åŒ–"><a href="#ç»“æ„ä½“å®ä¾‹åŒ–" class="headerlink" title="ç»“æ„ä½“å®ä¾‹åŒ–"></a>ç»“æ„ä½“å®ä¾‹åŒ–</h3><p>åªæœ‰å½“ç»“æ„ä½“å®ä¾‹åŒ–æ—¶ï¼Œæ‰ä¼šçœŸæ­£åœ°åˆ†é…å†…å­˜ã€‚ä¹Ÿå°±æ˜¯å¿…é¡»å®ä¾‹åŒ–åæ‰èƒ½ä½¿ç”¨ç»“æ„ä½“çš„å­—æ®µã€‚</p><p>ç»“æ„ä½“æœ¬èº«ä¹Ÿæ˜¯ä¸€ç§ç±»å‹ï¼Œæˆ‘ä»¬å¯ä»¥åƒå£°æ˜å†…ç½®ç±»å‹ä¸€æ ·ä½¿ç”¨<code>var</code>å…³é”®å­—å£°æ˜ç»“æ„ä½“ç±»å‹ã€‚</p><pre class="line-numbers language-go" data-language="go"><code class="language-go"><span class="token keyword">var</span> ç»“æ„ä½“å®ä¾‹ ç»“æ„ä½“ç±»å‹<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><h3 id="åŸºæœ¬å®ä¾‹åŒ–"><a href="#åŸºæœ¬å®ä¾‹åŒ–" class="headerlink" title="åŸºæœ¬å®ä¾‹åŒ–"></a>åŸºæœ¬å®ä¾‹åŒ–</h3><p>ä¸¾ä¸ªä¾‹å­ï¼š</p><pre class="line-numbers language-go" data-language="go"><code class="language-go"><span class="token keyword">type</span> person <span class="token keyword">struct</span> <span class="token punctuation">&#123;</span>name <span class="token builtin">string</span>city <span class="token builtin">string</span>age  <span class="token builtin">int8</span><span class="token punctuation">&#125;</span><span class="token keyword">func</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span><span class="token keyword">var</span> p1 personp1<span class="token punctuation">.</span>name <span class="token operator">=</span> <span class="token string">"æ²™æ²³å¨œæ‰"</span>p1<span class="token punctuation">.</span>city <span class="token operator">=</span> <span class="token string">"åŒ—äº¬"</span>p1<span class="token punctuation">.</span>age <span class="token operator">=</span> <span class="token number">18</span>fmt<span class="token punctuation">.</span><span class="token function">Printf</span><span class="token punctuation">(</span><span class="token string">"p1=%v\n"</span><span class="token punctuation">,</span> p1<span class="token punctuation">)</span>  <span class="token comment">//p1=&#123;æ²™æ²³å¨œæ‰ åŒ—äº¬ 18&#125;</span>fmt<span class="token punctuation">.</span><span class="token function">Printf</span><span class="token punctuation">(</span><span class="token string">"p1=%#v\n"</span><span class="token punctuation">,</span> p1<span class="token punctuation">)</span> <span class="token comment">//p1=main.person&#123;name:"æ²™æ²³å¨œæ‰", city:"åŒ—äº¬", age:18&#125;</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>æˆ‘ä»¬é€šè¿‡<code>.</code>æ¥è®¿é—®ç»“æ„ä½“çš„å­—æ®µï¼ˆæˆå‘˜å˜é‡ï¼‰,ä¾‹å¦‚<code>p1.name</code>å’Œ<code>p1.age</code>ç­‰ã€‚</p><h3 id="åŒ¿åç»“æ„ä½“"><a href="#åŒ¿åç»“æ„ä½“" class="headerlink" title="åŒ¿åç»“æ„ä½“"></a>åŒ¿åç»“æ„ä½“</h3><p>åœ¨å®šä¹‰ä¸€äº›ä¸´æ—¶æ•°æ®ç»“æ„ç­‰åœºæ™¯ä¸‹è¿˜å¯ä»¥ä½¿ç”¨åŒ¿åç»“æ„ä½“ã€‚</p><pre class="line-numbers language-go" data-language="go"><code class="language-go"><span class="token keyword">package</span> main     <span class="token keyword">import</span> <span class="token punctuation">(</span>    <span class="token string">"fmt"</span><span class="token punctuation">)</span>     <span class="token keyword">func</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>    <span class="token keyword">var</span> user <span class="token keyword">struct</span><span class="token punctuation">&#123;</span>Name <span class="token builtin">string</span><span class="token punctuation">;</span> Age <span class="token builtin">int</span><span class="token punctuation">&#125;</span>    user<span class="token punctuation">.</span>Name <span class="token operator">=</span> <span class="token string">"å°ç‹å­"</span>    user<span class="token punctuation">.</span>Age <span class="token operator">=</span> <span class="token number">18</span>    fmt<span class="token punctuation">.</span><span class="token function">Printf</span><span class="token punctuation">(</span><span class="token string">"%#v\n"</span><span class="token punctuation">,</span> user<span class="token punctuation">)</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h3 id="åˆ›å»ºæŒ‡é’ˆç±»å‹ç»“æ„ä½“"><a href="#åˆ›å»ºæŒ‡é’ˆç±»å‹ç»“æ„ä½“" class="headerlink" title="åˆ›å»ºæŒ‡é’ˆç±»å‹ç»“æ„ä½“"></a>åˆ›å»ºæŒ‡é’ˆç±»å‹ç»“æ„ä½“</h3><p>æˆ‘ä»¬è¿˜å¯ä»¥é€šè¿‡ä½¿ç”¨<code>new</code>å…³é”®å­—å¯¹ç»“æ„ä½“è¿›è¡Œå®ä¾‹åŒ–ï¼Œå¾—åˆ°çš„æ˜¯ç»“æ„ä½“çš„åœ°å€ã€‚ æ ¼å¼å¦‚ä¸‹ï¼š</p><pre class="line-numbers language-go" data-language="go"><code class="language-go"><span class="token keyword">var</span> p2 <span class="token operator">=</span> <span class="token function">new</span><span class="token punctuation">(</span>person<span class="token punctuation">)</span>fmt<span class="token punctuation">.</span><span class="token function">Printf</span><span class="token punctuation">(</span><span class="token string">"%T\n"</span><span class="token punctuation">,</span> p2<span class="token punctuation">)</span>     <span class="token comment">//*main.person</span>fmt<span class="token punctuation">.</span><span class="token function">Printf</span><span class="token punctuation">(</span><span class="token string">"p2=%#v\n"</span><span class="token punctuation">,</span> p2<span class="token punctuation">)</span> <span class="token comment">//p2=&amp;main.person&#123;name:"", city:"", age:0&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre><p>éœ€è¦æ³¨æ„çš„æ˜¯åœ¨Goè¯­è¨€ä¸­æ”¯æŒå¯¹ç»“æ„ä½“æŒ‡é’ˆç›´æ¥ä½¿ç”¨<code>.</code>æ¥è®¿é—®ç»“æ„ä½“çš„æˆå‘˜ã€‚</p><pre class="line-numbers language-go" data-language="go"><code class="language-go"><span class="token keyword">var</span> p2 <span class="token operator">=</span> <span class="token function">new</span><span class="token punctuation">(</span>person<span class="token punctuation">)</span>p2<span class="token punctuation">.</span>name <span class="token operator">=</span> <span class="token string">"å°ç‹å­"</span>p2<span class="token punctuation">.</span>age <span class="token operator">=</span> <span class="token number">28</span>p2<span class="token punctuation">.</span>city <span class="token operator">=</span> <span class="token string">"ä¸Šæµ·"</span>fmt<span class="token punctuation">.</span><span class="token function">Printf</span><span class="token punctuation">(</span><span class="token string">"p2=%#v\n"</span><span class="token punctuation">,</span> p2<span class="token punctuation">)</span> <span class="token comment">//p2=&amp;main.person&#123;name:"å°ç‹å­", city:"ä¸Šæµ·", age:28&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre><h3 id="ç»“æ„ä½“çš„åœ°å€å®ä¾‹åŒ–"><a href="#ç»“æ„ä½“çš„åœ°å€å®ä¾‹åŒ–" class="headerlink" title="ç»“æ„ä½“çš„åœ°å€å®ä¾‹åŒ–"></a>ç»“æ„ä½“çš„åœ°å€å®ä¾‹åŒ–</h3><p>ä½¿ç”¨<code>&amp;</code>å¯¹ç»“æ„ä½“è¿›è¡Œå–åœ°å€æ“ä½œç›¸å½“äºå¯¹è¯¥ç»“æ„ä½“ç±»å‹è¿›è¡Œäº†ä¸€æ¬¡<code>new</code>å®ä¾‹åŒ–æ“ä½œã€‚</p><pre class="line-numbers language-go" data-language="go"><code class="language-go">p3 <span class="token operator">:=</span> <span class="token operator">&amp;</span>person<span class="token punctuation">&#123;</span><span class="token punctuation">&#125;</span>fmt<span class="token punctuation">.</span><span class="token function">Printf</span><span class="token punctuation">(</span><span class="token string">"%T\n"</span><span class="token punctuation">,</span> p3<span class="token punctuation">)</span>     <span class="token comment">//*main.person</span>fmt<span class="token punctuation">.</span><span class="token function">Printf</span><span class="token punctuation">(</span><span class="token string">"p3=%#v\n"</span><span class="token punctuation">,</span> p3<span class="token punctuation">)</span> <span class="token comment">//p3=&amp;main.person&#123;name:"", city:"", age:0&#125;</span>p3<span class="token punctuation">.</span>name <span class="token operator">=</span> <span class="token string">"ä¸ƒç±³"</span>p3<span class="token punctuation">.</span>age <span class="token operator">=</span> <span class="token number">30</span>p3<span class="token punctuation">.</span>city <span class="token operator">=</span> <span class="token string">"æˆéƒ½"</span>fmt<span class="token punctuation">.</span><span class="token function">Printf</span><span class="token punctuation">(</span><span class="token string">"p3=%#v\n"</span><span class="token punctuation">,</span> p3<span class="token punctuation">)</span> <span class="token comment">//p3=&amp;main.person&#123;name:"ä¸ƒç±³", city:"æˆéƒ½", age:30&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p><code>p3.name = &quot;ä¸ƒç±³&quot;</code>å…¶å®åœ¨åº•å±‚æ˜¯<code>(*p3).name = &quot;ä¸ƒç±³&quot;</code>ï¼Œè¿™æ˜¯Goè¯­è¨€å¸®æˆ‘ä»¬å®ç°çš„è¯­æ³•ç³–ã€‚</p><h3 id="ç»“æ„ä½“åˆå§‹åŒ–"><a href="#ç»“æ„ä½“åˆå§‹åŒ–" class="headerlink" title="ç»“æ„ä½“åˆå§‹åŒ–"></a>ç»“æ„ä½“åˆå§‹åŒ–</h3><p>æ²¡æœ‰åˆå§‹åŒ–çš„ç»“æ„ä½“ï¼Œå…¶æˆå‘˜å˜é‡éƒ½æ˜¯å¯¹åº”å…¶ç±»å‹çš„é›¶å€¼ã€‚</p><pre class="line-numbers language-none"><code class="language-none">type person struct &#123;name stringcity stringage  int8&#125;func main() &#123;var p4 personfmt.Printf(&quot;p4&#x3D;%#v\n&quot;, p4) &#x2F;&#x2F;p4&#x3D;main.person&#123;name:&quot;&quot;, city:&quot;&quot;, age:0&#125;&#125;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><ul><li><h3 id="ä½¿ç”¨é”®å€¼å¯¹åˆå§‹åŒ–"><a href="#ä½¿ç”¨é”®å€¼å¯¹åˆå§‹åŒ–" class="headerlink" title="ä½¿ç”¨é”®å€¼å¯¹åˆå§‹åŒ–"></a>ä½¿ç”¨é”®å€¼å¯¹åˆå§‹åŒ–</h3></li></ul><p>ä½¿ç”¨é”®å€¼å¯¹å¯¹ç»“æ„ä½“è¿›è¡Œåˆå§‹åŒ–æ—¶ï¼Œé”®å¯¹åº”ç»“æ„ä½“çš„å­—æ®µï¼Œå€¼å¯¹åº”è¯¥å­—æ®µçš„åˆå§‹å€¼ã€‚</p><pre class="line-numbers language-go" data-language="go"><code class="language-go">p5 <span class="token operator">:=</span> person<span class="token punctuation">&#123;</span>name<span class="token punctuation">:</span> <span class="token string">"å°ç‹å­"</span><span class="token punctuation">,</span>city<span class="token punctuation">:</span> <span class="token string">"åŒ—äº¬"</span><span class="token punctuation">,</span>age<span class="token punctuation">:</span>  <span class="token number">18</span><span class="token punctuation">,</span><span class="token punctuation">&#125;</span>fmt<span class="token punctuation">.</span><span class="token function">Printf</span><span class="token punctuation">(</span><span class="token string">"p5=%#v\n"</span><span class="token punctuation">,</span> p5<span class="token punctuation">)</span> <span class="token comment">//p5=main.person&#123;name:"å°ç‹å­", city:"åŒ—äº¬", age:18&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>ä¹Ÿå¯ä»¥å¯¹ç»“æ„ä½“æŒ‡é’ˆè¿›è¡Œé”®å€¼å¯¹åˆå§‹åŒ–ï¼Œä¾‹å¦‚ï¼š</p><pre class="line-numbers language-go" data-language="go"><code class="language-go">p7 <span class="token operator">:=</span> <span class="token operator">&amp;</span>person<span class="token punctuation">&#123;</span>city<span class="token punctuation">:</span> <span class="token string">"åŒ—äº¬"</span><span class="token punctuation">,</span><span class="token punctuation">&#125;</span>fmt<span class="token punctuation">.</span><span class="token function">Printf</span><span class="token punctuation">(</span><span class="token string">"p7=%#v\n"</span><span class="token punctuation">,</span> p7<span class="token punctuation">)</span> <span class="token comment">//p7=&amp;main.person&#123;name:"", city:"åŒ—äº¬", age:0&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre><ul><li><h3 id="ä½¿ç”¨å€¼çš„åˆ—è¡¨åˆå§‹åŒ–"><a href="#ä½¿ç”¨å€¼çš„åˆ—è¡¨åˆå§‹åŒ–" class="headerlink" title="ä½¿ç”¨å€¼çš„åˆ—è¡¨åˆå§‹åŒ–"></a>ä½¿ç”¨å€¼çš„åˆ—è¡¨åˆå§‹åŒ–</h3></li></ul><p>åˆå§‹åŒ–ç»“æ„ä½“çš„æ—¶å€™å¯ä»¥ç®€å†™ï¼Œä¹Ÿå°±æ˜¯åˆå§‹åŒ–çš„æ—¶å€™ä¸å†™é”®ï¼Œç›´æ¥å†™å€¼ï¼š</p><pre class="line-numbers language-go" data-language="go"><code class="language-go">p8 <span class="token operator">:=</span> <span class="token operator">&amp;</span>person<span class="token punctuation">&#123;</span><span class="token string">"æ²™æ²³å¨œæ‰"</span><span class="token punctuation">,</span><span class="token string">"åŒ—äº¬"</span><span class="token punctuation">,</span><span class="token number">28</span><span class="token punctuation">,</span><span class="token punctuation">&#125;</span>fmt<span class="token punctuation">.</span><span class="token function">Printf</span><span class="token punctuation">(</span><span class="token string">"p8=%#v\n"</span><span class="token punctuation">,</span> p8<span class="token punctuation">)</span> <span class="token comment">//p8=&amp;main.person&#123;name:"æ²™æ²³å¨œæ‰", city:"åŒ—äº¬", age:28&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>ä½¿ç”¨è¿™ç§æ ¼å¼åˆå§‹åŒ–æ—¶ï¼Œéœ€è¦æ³¨æ„ï¼š</p><ol><li>å¿…é¡»åˆå§‹åŒ–ç»“æ„ä½“çš„æ‰€æœ‰å­—æ®µã€‚</li><li>åˆå§‹å€¼çš„å¡«å……é¡ºåºå¿…é¡»ä¸å­—æ®µåœ¨ç»“æ„ä½“ä¸­çš„å£°æ˜é¡ºåºä¸€è‡´ã€‚</li><li>è¯¥æ–¹å¼ä¸èƒ½å’Œé”®å€¼åˆå§‹åŒ–æ–¹å¼æ··ç”¨ã€‚</li></ol><ul><li>ç»“æ„ä½“å†…å­˜å¸ƒå±€</li></ul><p>ç»“æ„ä½“å ç”¨ä¸€å—è¿ç»­çš„å†…å­˜ã€‚</p><pre class="line-numbers language-go" data-language="go"><code class="language-go"><span class="token keyword">type</span> test <span class="token keyword">struct</span> <span class="token punctuation">&#123;</span>a <span class="token builtin">int8</span>b <span class="token builtin">int8</span>c <span class="token builtin">int8</span>d <span class="token builtin">int8</span><span class="token punctuation">&#125;</span>n <span class="token operator">:=</span> test<span class="token punctuation">&#123;</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">,</span><span class="token punctuation">&#125;</span>fmt<span class="token punctuation">.</span><span class="token function">Printf</span><span class="token punctuation">(</span><span class="token string">"n.a %p\n"</span><span class="token punctuation">,</span> <span class="token operator">&amp;</span>n<span class="token punctuation">.</span>a<span class="token punctuation">)</span>fmt<span class="token punctuation">.</span><span class="token function">Printf</span><span class="token punctuation">(</span><span class="token string">"n.b %p\n"</span><span class="token punctuation">,</span> <span class="token operator">&amp;</span>n<span class="token punctuation">.</span>b<span class="token punctuation">)</span>fmt<span class="token punctuation">.</span><span class="token function">Printf</span><span class="token punctuation">(</span><span class="token string">"n.c %p\n"</span><span class="token punctuation">,</span> <span class="token operator">&amp;</span>n<span class="token punctuation">.</span>c<span class="token punctuation">)</span>fmt<span class="token punctuation">.</span><span class="token function">Printf</span><span class="token punctuation">(</span><span class="token string">"n.d %p\n"</span><span class="token punctuation">,</span> <span class="token operator">&amp;</span>n<span class="token punctuation">.</span>d<span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>è¾“å‡ºï¼š</p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">n.a 0xc0000a0060n.b 0xc0000a0061n.c 0xc0000a0062n.d 0xc0000a0063<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre><h3 id="ç©ºç»“æ„ä½“"><a href="#ç©ºç»“æ„ä½“" class="headerlink" title="ç©ºç»“æ„ä½“"></a>ç©ºç»“æ„ä½“</h3><p>ç©ºç»“æ„ä½“æ˜¯ä¸å ç”¨ç©ºé—´çš„ã€‚</p><pre class="line-numbers language-go" data-language="go"><code class="language-go"><span class="token keyword">var</span> v <span class="token keyword">struct</span><span class="token punctuation">&#123;</span><span class="token punctuation">&#125;</span>fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span>unsafe<span class="token punctuation">.</span><span class="token function">Sizeof</span><span class="token punctuation">(</span>v<span class="token punctuation">)</span><span class="token punctuation">)</span>  <span class="token comment">// 0</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre><h3 id="é¢è¯•é¢˜"><a href="#é¢è¯•é¢˜" class="headerlink" title="é¢è¯•é¢˜"></a>é¢è¯•é¢˜</h3><p>è¯·é—®ä¸‹é¢é‚£ä»£ç çš„æ‰§è¡Œç»“æœæ˜¯ä»€ä¹ˆï¼Ÿ</p><pre class="line-numbers language-go" data-language="go"><code class="language-go"><span class="token keyword">type</span> student <span class="token keyword">struct</span> <span class="token punctuation">&#123;</span>name <span class="token builtin">string</span>age  <span class="token builtin">int</span><span class="token punctuation">&#125;</span><span class="token keyword">func</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>m <span class="token operator">:=</span> <span class="token function">make</span><span class="token punctuation">(</span><span class="token keyword">map</span><span class="token punctuation">[</span><span class="token builtin">string</span><span class="token punctuation">]</span><span class="token operator">*</span>student<span class="token punctuation">)</span>stus <span class="token operator">:=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>student<span class="token punctuation">&#123;</span><span class="token punctuation">&#123;</span>name<span class="token punctuation">:</span> <span class="token string">"å°ç‹å­"</span><span class="token punctuation">,</span> age<span class="token punctuation">:</span> <span class="token number">18</span><span class="token punctuation">&#125;</span><span class="token punctuation">,</span><span class="token punctuation">&#123;</span>name<span class="token punctuation">:</span> <span class="token string">"å¨œæ‰"</span><span class="token punctuation">,</span> age<span class="token punctuation">:</span> <span class="token number">23</span><span class="token punctuation">&#125;</span><span class="token punctuation">,</span><span class="token punctuation">&#123;</span>name<span class="token punctuation">:</span> <span class="token string">"å¤§ç‹å…«"</span><span class="token punctuation">,</span> age<span class="token punctuation">:</span> <span class="token number">9000</span><span class="token punctuation">&#125;</span><span class="token punctuation">,</span><span class="token punctuation">&#125;</span><span class="token keyword">for</span> <span class="token boolean">_</span><span class="token punctuation">,</span> stu <span class="token operator">:=</span> <span class="token keyword">range</span> stus <span class="token punctuation">&#123;</span>m<span class="token punctuation">[</span>stu<span class="token punctuation">.</span>name<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token operator">&amp;</span>stu        <span class="token punctuation">&#125;</span><span class="token keyword">for</span> k<span class="token punctuation">,</span> v <span class="token operator">:=</span> <span class="token keyword">range</span> m <span class="token punctuation">&#123;</span>fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span>k<span class="token punctuation">,</span> <span class="token string">"=>"</span><span class="token punctuation">,</span> v<span class="token punctuation">.</span>name<span class="token punctuation">)</span><span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h3 id="æ„é€ å‡½æ•°"><a href="#æ„é€ å‡½æ•°" class="headerlink" title="æ„é€ å‡½æ•°"></a>æ„é€ å‡½æ•°</h3><p>Goè¯­è¨€çš„ç»“æ„ä½“æ²¡æœ‰æ„é€ å‡½æ•°ï¼Œæˆ‘ä»¬å¯ä»¥è‡ªå·±å®ç°ã€‚ ä¾‹å¦‚ï¼Œä¸‹æ–¹çš„ä»£ç å°±å®ç°äº†ä¸€ä¸ª<code>person</code>çš„æ„é€ å‡½æ•°ã€‚ å› ä¸º<code>struct</code>æ˜¯å€¼ç±»å‹ï¼Œå¦‚æœç»“æ„ä½“æ¯”è¾ƒå¤æ‚çš„è¯ï¼Œå€¼æ‹·è´æ€§èƒ½å¼€é”€ä¼šæ¯”è¾ƒå¤§ï¼Œæ‰€ä»¥è¯¥æ„é€ å‡½æ•°è¿”å›çš„æ˜¯ç»“æ„ä½“æŒ‡é’ˆç±»å‹ã€‚</p><pre class="line-numbers language-go" data-language="go"><code class="language-go"><span class="token keyword">func</span> <span class="token function">newPerson</span><span class="token punctuation">(</span>name<span class="token punctuation">,</span> city <span class="token builtin">string</span><span class="token punctuation">,</span> age <span class="token builtin">int8</span><span class="token punctuation">)</span> <span class="token operator">*</span>person <span class="token punctuation">&#123;</span><span class="token keyword">return</span> <span class="token operator">&amp;</span>person<span class="token punctuation">&#123;</span>name<span class="token punctuation">:</span> name<span class="token punctuation">,</span>city<span class="token punctuation">:</span> city<span class="token punctuation">,</span>age<span class="token punctuation">:</span>  age<span class="token punctuation">,</span><span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>è°ƒç”¨æ„é€ å‡½æ•°</p><pre class="line-numbers language-go" data-language="go"><code class="language-go">p9 <span class="token operator">:=</span> <span class="token function">newPerson</span><span class="token punctuation">(</span><span class="token string">"å¼ ä¸‰"</span><span class="token punctuation">,</span> <span class="token string">"æ²™æ²³"</span><span class="token punctuation">,</span> <span class="token number">90</span><span class="token punctuation">)</span>fmt<span class="token punctuation">.</span><span class="token function">Printf</span><span class="token punctuation">(</span><span class="token string">"%#v\n"</span><span class="token punctuation">,</span> p9<span class="token punctuation">)</span> <span class="token comment">//&amp;main.person&#123;name:"å¼ ä¸‰", city:"æ²™æ²³", age:90&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre><div class="uk-alert uk-alert-danger"><i class="fas fa-exclamation-triangle"></i> æ³¨æ„ï¼š</div><blockquote><p> æ„é€ å‡½æ•°é€šå¸¸ä»¥newå¼€å¤´</p></blockquote><h3 id="æ–¹æ³•å’Œæ¥æ”¶è€…"><a href="#æ–¹æ³•å’Œæ¥æ”¶è€…" class="headerlink" title="æ–¹æ³•å’Œæ¥æ”¶è€…"></a>æ–¹æ³•å’Œæ¥æ”¶è€…</h3><p>Goè¯­è¨€ä¸­çš„<code>æ–¹æ³•ï¼ˆMethodï¼‰</code>æ˜¯ä¸€ç§ä½œç”¨äºç‰¹å®šç±»å‹å˜é‡çš„å‡½æ•°ã€‚è¿™ç§ç‰¹å®šç±»å‹å˜é‡å«åš<code>æ¥æ”¶è€…ï¼ˆReceiverï¼‰</code>ã€‚æ¥æ”¶è€…çš„æ¦‚å¿µå°±ç±»ä¼¼äºå…¶ä»–è¯­è¨€ä¸­çš„<code>this</code>æˆ–è€… <code>self</code>ã€‚</p><p>æ–¹æ³•çš„å®šä¹‰æ ¼å¼å¦‚ä¸‹ï¼š</p><pre class="line-numbers language-go" data-language="go"><code class="language-go"><span class="token keyword">func</span> <span class="token punctuation">(</span>æ¥æ”¶è€…å˜é‡ æ¥æ”¶è€…ç±»å‹<span class="token punctuation">)</span> æ–¹æ³•å<span class="token punctuation">(</span>å‚æ•°åˆ—è¡¨<span class="token punctuation">)</span> <span class="token punctuation">(</span>è¿”å›å‚æ•°<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>    å‡½æ•°ä½“<span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre><p>å…¶ä¸­ï¼Œ</p><ul><li>æ¥æ”¶è€…å˜é‡ï¼šæ¥æ”¶è€…ä¸­çš„å‚æ•°å˜é‡ååœ¨å‘½åæ—¶ï¼Œå®˜æ–¹å»ºè®®ä½¿ç”¨æ¥æ”¶è€…ç±»å‹åç§°é¦–å­—æ¯çš„å°å†™ï¼Œè€Œä¸æ˜¯<code>self</code>ã€<code>this</code>ä¹‹ç±»çš„å‘½åã€‚ä¾‹å¦‚ï¼Œ<code>Person</code>ç±»å‹çš„æ¥æ”¶è€…å˜é‡åº”è¯¥å‘½åä¸º <code>p</code>ï¼Œ<code>Connector</code>ç±»å‹çš„æ¥æ”¶è€…å˜é‡åº”è¯¥å‘½åä¸º<code>c</code>ç­‰ã€‚</li><li>æ¥æ”¶è€…ç±»å‹ï¼šæ¥æ”¶è€…ç±»å‹å’Œå‚æ•°ç±»ä¼¼ï¼Œå¯ä»¥æ˜¯æŒ‡é’ˆç±»å‹å’ŒéæŒ‡é’ˆç±»å‹ã€‚</li><li>æ–¹æ³•åã€å‚æ•°åˆ—è¡¨ã€è¿”å›å‚æ•°ï¼šå…·ä½“æ ¼å¼ä¸å‡½æ•°å®šä¹‰ç›¸åŒ</li></ul><p>ä¸¾ä¸ªä¾‹å­ï¼š</p><pre class="line-numbers language-go" data-language="go"><code class="language-go"><span class="token comment">//Person ç»“æ„ä½“</span><span class="token keyword">type</span> Person <span class="token keyword">struct</span> <span class="token punctuation">&#123;</span>name <span class="token builtin">string</span>age  <span class="token builtin">int8</span><span class="token punctuation">&#125;</span><span class="token comment">//NewPerson æ„é€ å‡½æ•°</span><span class="token keyword">func</span> <span class="token function">NewPerson</span><span class="token punctuation">(</span>name <span class="token builtin">string</span><span class="token punctuation">,</span> age <span class="token builtin">int8</span><span class="token punctuation">)</span> <span class="token operator">*</span>Person <span class="token punctuation">&#123;</span><span class="token keyword">return</span> <span class="token operator">&amp;</span>Person<span class="token punctuation">&#123;</span>name<span class="token punctuation">:</span> name<span class="token punctuation">,</span>age<span class="token punctuation">:</span>  age<span class="token punctuation">,</span><span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span class="token comment">//Dream Personåšæ¢¦çš„æ–¹æ³•</span><span class="token keyword">func</span> <span class="token punctuation">(</span>p Person<span class="token punctuation">)</span> <span class="token function">Dream</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>fmt<span class="token punctuation">.</span><span class="token function">Printf</span><span class="token punctuation">(</span><span class="token string">"%sçš„æ¢¦æƒ³æ˜¯å­¦å¥½Goè¯­è¨€ï¼\n"</span><span class="token punctuation">,</span> p<span class="token punctuation">.</span>name<span class="token punctuation">)</span><span class="token punctuation">&#125;</span><span class="token keyword">func</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>p1 <span class="token operator">:=</span> <span class="token function">NewPerson</span><span class="token punctuation">(</span><span class="token string">"å°ç‹å­"</span><span class="token punctuation">,</span> <span class="token number">25</span><span class="token punctuation">)</span>    p1<span class="token punctuation">.</span><span class="token function">Dream</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>æ–¹æ³•ä¸å‡½æ•°çš„åŒºåˆ«æ˜¯ï¼Œå‡½æ•°ä¸å±äºä»»ä½•ç±»å‹ï¼Œæ–¹æ³•å±äºç‰¹å®šçš„ç±»å‹ã€‚</p><div class="uk-alert uk-alert-success"><i class="fa fa-check-circle"></i> ç±»ä¼¼pythonçš„ç±»æ–¹æ³•</div><h3 id="æŒ‡é’ˆç±»å‹çš„æ¥æ”¶è€…"><a href="#æŒ‡é’ˆç±»å‹çš„æ¥æ”¶è€…" class="headerlink" title="æŒ‡é’ˆç±»å‹çš„æ¥æ”¶è€…"></a>æŒ‡é’ˆç±»å‹çš„æ¥æ”¶è€…</h3><p>æŒ‡é’ˆç±»å‹çš„æ¥æ”¶è€…ç”±ä¸€ä¸ªç»“æ„ä½“çš„æŒ‡é’ˆç»„æˆï¼Œç”±äºæŒ‡é’ˆçš„ç‰¹æ€§ï¼Œè°ƒç”¨æ–¹æ³•æ—¶ä¿®æ”¹æ¥æ”¶è€…æŒ‡é’ˆçš„ä»»æ„æˆå‘˜å˜é‡ï¼Œåœ¨æ–¹æ³•ç»“æŸåï¼Œä¿®æ”¹éƒ½æ˜¯æœ‰æ•ˆçš„ã€‚è¿™ç§æ–¹å¼å°±ååˆ†æ¥è¿‘äºå…¶ä»–è¯­è¨€ä¸­é¢å‘å¯¹è±¡ä¸­çš„<code>this</code>æˆ–è€…<code>self</code>ã€‚ ä¾‹å¦‚æˆ‘ä»¬ä¸º<code>Person</code>æ·»åŠ ä¸€ä¸ª<code>SetAge</code>æ–¹æ³•ï¼Œæ¥ä¿®æ”¹å®ä¾‹å˜é‡çš„å¹´é¾„ã€‚</p><pre class="line-numbers language-go" data-language="go"><code class="language-go"><span class="token comment">// SetAge è®¾ç½®pçš„å¹´é¾„</span><span class="token comment">// ä½¿ç”¨æŒ‡é’ˆæ¥æ”¶è€…</span><span class="token keyword">func</span> <span class="token punctuation">(</span>p <span class="token operator">*</span>Person<span class="token punctuation">)</span> <span class="token function">SetAge</span><span class="token punctuation">(</span>newAge <span class="token builtin">int8</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>p<span class="token punctuation">.</span>age <span class="token operator">=</span> newAge<span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>è°ƒç”¨è¯¥æ–¹æ³•ï¼š</p><pre class="line-numbers language-go" data-language="go"><code class="language-go"><span class="token keyword">func</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>p1 <span class="token operator">:=</span> <span class="token function">NewPerson</span><span class="token punctuation">(</span><span class="token string">"å°ç‹å­"</span><span class="token punctuation">,</span> <span class="token number">25</span><span class="token punctuation">)</span>fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span>p1<span class="token punctuation">.</span>age<span class="token punctuation">)</span> <span class="token comment">// 25</span>p1<span class="token punctuation">.</span><span class="token function">SetAge</span><span class="token punctuation">(</span><span class="token number">30</span><span class="token punctuation">)</span>fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span>p1<span class="token punctuation">.</span>age<span class="token punctuation">)</span> <span class="token comment">// 30</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>å½“æ–¹æ³•ä½œç”¨äºå€¼ç±»å‹æ¥æ”¶è€…æ—¶ï¼ŒGoè¯­è¨€ä¼šåœ¨ä»£ç è¿è¡Œæ—¶å°†æ¥æ”¶è€…çš„å€¼å¤åˆ¶ä¸€ä»½ã€‚åœ¨å€¼ç±»å‹æ¥æ”¶è€…çš„æ–¹æ³•ä¸­å¯ä»¥è·å–æ¥æ”¶è€…çš„æˆå‘˜å€¼ï¼Œä½†ä¿®æ”¹æ“ä½œåªæ˜¯é’ˆå¯¹å‰¯æœ¬ï¼Œæ— æ³•ä¿®æ”¹æ¥æ”¶è€…å˜é‡æœ¬èº«ã€‚</p><pre class="line-numbers language-go" data-language="go"><code class="language-go"><span class="token comment">// SetAge2 è®¾ç½®pçš„å¹´é¾„</span><span class="token comment">// ä½¿ç”¨å€¼æ¥æ”¶è€…</span><span class="token keyword">func</span> <span class="token punctuation">(</span>p Person<span class="token punctuation">)</span> <span class="token function">SetAge2</span><span class="token punctuation">(</span>newAge <span class="token builtin">int8</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>p<span class="token punctuation">.</span>age <span class="token operator">=</span> newAge<span class="token punctuation">&#125;</span><span class="token keyword">func</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>p1 <span class="token operator">:=</span> <span class="token function">NewPerson</span><span class="token punctuation">(</span><span class="token string">"å°ç‹å­"</span><span class="token punctuation">,</span> <span class="token number">25</span><span class="token punctuation">)</span>p1<span class="token punctuation">.</span><span class="token function">Dream</span><span class="token punctuation">(</span><span class="token punctuation">)</span>fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span>p1<span class="token punctuation">.</span>age<span class="token punctuation">)</span> <span class="token comment">// 25</span>p1<span class="token punctuation">.</span><span class="token function">SetAge2</span><span class="token punctuation">(</span><span class="token number">30</span><span class="token punctuation">)</span> <span class="token comment">// (*p1).SetAge2(30)</span>fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span>p1<span class="token punctuation">.</span>age<span class="token punctuation">)</span> <span class="token comment">// 25</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h3 id="ä»€ä¹ˆæ—¶å€™åº”è¯¥ä½¿ç”¨æŒ‡é’ˆç±»å‹æ¥æ”¶è€…"><a href="#ä»€ä¹ˆæ—¶å€™åº”è¯¥ä½¿ç”¨æŒ‡é’ˆç±»å‹æ¥æ”¶è€…" class="headerlink" title="ä»€ä¹ˆæ—¶å€™åº”è¯¥ä½¿ç”¨æŒ‡é’ˆç±»å‹æ¥æ”¶è€…"></a>ä»€ä¹ˆæ—¶å€™åº”è¯¥ä½¿ç”¨æŒ‡é’ˆç±»å‹æ¥æ”¶è€…</h3><ol><li>éœ€è¦ä¿®æ”¹æ¥æ”¶è€…ä¸­çš„å€¼</li><li>æ¥æ”¶è€…æ˜¯æ‹·è´ä»£ä»·æ¯”è¾ƒå¤§çš„å¤§å¯¹è±¡</li><li>ä¿è¯ä¸€è‡´æ€§ï¼Œå¦‚æœæœ‰æŸä¸ªæ–¹æ³•ä½¿ç”¨äº†æŒ‡é’ˆæ¥æ”¶è€…ï¼Œé‚£ä¹ˆå…¶ä»–çš„æ–¹æ³•ä¹Ÿåº”è¯¥ä½¿ç”¨æŒ‡é’ˆæ¥æ”¶è€…ã€‚</li></ol><h3 id="ä»»æ„ç±»å‹æ·»åŠ æ–¹æ³•"><a href="#ä»»æ„ç±»å‹æ·»åŠ æ–¹æ³•" class="headerlink" title="ä»»æ„ç±»å‹æ·»åŠ æ–¹æ³•"></a>ä»»æ„ç±»å‹æ·»åŠ æ–¹æ³•</h3><p>åœ¨Goè¯­è¨€ä¸­ï¼Œæ¥æ”¶è€…çš„ç±»å‹å¯ä»¥æ˜¯ä»»ä½•ç±»å‹ï¼Œä¸ä»…ä»…æ˜¯ç»“æ„ä½“ï¼Œä»»ä½•ç±»å‹éƒ½å¯ä»¥æ‹¥æœ‰æ–¹æ³•ã€‚ ä¸¾ä¸ªä¾‹å­ï¼Œæˆ‘ä»¬åŸºäºå†…ç½®çš„<code>int</code>ç±»å‹ä½¿ç”¨typeå…³é”®å­—å¯ä»¥å®šä¹‰æ–°çš„è‡ªå®šä¹‰ç±»å‹ï¼Œç„¶åä¸ºæˆ‘ä»¬çš„è‡ªå®šä¹‰ç±»å‹æ·»åŠ æ–¹æ³•ã€‚</p><pre class="line-numbers language-go" data-language="go"><code class="language-go"><span class="token comment">//MyInt å°†intå®šä¹‰ä¸ºè‡ªå®šä¹‰MyIntç±»å‹</span><span class="token keyword">type</span> MyInt <span class="token builtin">int</span><span class="token comment">//SayHello ä¸ºMyIntæ·»åŠ ä¸€ä¸ªSayHelloçš„æ–¹æ³•</span><span class="token keyword">func</span> <span class="token punctuation">(</span>m MyInt<span class="token punctuation">)</span> <span class="token function">SayHello</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token string">"Hello, æˆ‘æ˜¯ä¸€ä¸ªintã€‚"</span><span class="token punctuation">)</span><span class="token punctuation">&#125;</span><span class="token keyword">func</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span><span class="token keyword">var</span> m1 MyIntm1<span class="token punctuation">.</span><span class="token function">SayHello</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment">//Hello, æˆ‘æ˜¯ä¸€ä¸ªintã€‚</span>m1 <span class="token operator">=</span> <span class="token number">100</span>fmt<span class="token punctuation">.</span><span class="token function">Printf</span><span class="token punctuation">(</span><span class="token string">"%#v  %T\n"</span><span class="token punctuation">,</span> m1<span class="token punctuation">,</span> m1<span class="token punctuation">)</span> <span class="token comment">//100  main.MyInt</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><div class="uk-alert uk-alert-danger"><i class="fas fa-exclamation-triangle"></i>  **æ³¨æ„äº‹é¡¹ï¼š** éæœ¬åœ°ç±»å‹ä¸èƒ½å®šä¹‰æ–¹æ³•ï¼Œä¹Ÿå°±æ˜¯è¯´æˆ‘ä»¬ä¸èƒ½ç»™åˆ«çš„åŒ…çš„ç±»å‹å®šä¹‰æ–¹æ³•ã€‚</div><h3 id="ç»“æ„ä½“çš„åŒ¿åå­—æ®µ"><a href="#ç»“æ„ä½“çš„åŒ¿åå­—æ®µ" class="headerlink" title="ç»“æ„ä½“çš„åŒ¿åå­—æ®µ"></a>ç»“æ„ä½“çš„åŒ¿åå­—æ®µ</h3><p>ç»“æ„ä½“å…è®¸å…¶æˆå‘˜å­—æ®µåœ¨å£°æ˜æ—¶æ²¡æœ‰å­—æ®µåè€Œåªæœ‰ç±»å‹ï¼Œè¿™ç§æ²¡æœ‰åå­—çš„å­—æ®µå°±ç§°ä¸ºåŒ¿åå­—æ®µã€‚</p><pre class="line-numbers language-go" data-language="go"><code class="language-go"><span class="token comment">//Person ç»“æ„ä½“Personç±»å‹</span><span class="token keyword">type</span> Person <span class="token keyword">struct</span> <span class="token punctuation">&#123;</span><span class="token builtin">string</span><span class="token builtin">int</span><span class="token punctuation">&#125;</span><span class="token keyword">func</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>p1 <span class="token operator">:=</span> Person<span class="token punctuation">&#123;</span><span class="token string">"å°ç‹å­"</span><span class="token punctuation">,</span><span class="token number">18</span><span class="token punctuation">,</span><span class="token punctuation">&#125;</span>fmt<span class="token punctuation">.</span><span class="token function">Printf</span><span class="token punctuation">(</span><span class="token string">"%#v\n"</span><span class="token punctuation">,</span> p1<span class="token punctuation">)</span>        <span class="token comment">//main.Person&#123;string:"åŒ—äº¬", int:18&#125;</span>fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span>p1<span class="token punctuation">.</span><span class="token builtin">string</span><span class="token punctuation">,</span> p1<span class="token punctuation">.</span><span class="token builtin">int</span><span class="token punctuation">)</span> <span class="token comment">//åŒ—äº¬ 18</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><div class="uk-alert uk-alert-danger"><i class="fas fa-exclamation-triangle"></i> æ³¨æ„ï¼š</div><p>è¿™é‡ŒåŒ¿åå­—æ®µçš„è¯´æ³•å¹¶ä¸ä»£è¡¨æ²¡æœ‰å­—æ®µåï¼Œè€Œæ˜¯é»˜è®¤ä¼šé‡‡ç”¨ç±»å‹åä½œä¸ºå­—æ®µåï¼Œç»“æ„ä½“è¦æ±‚å­—æ®µåç§°å¿…é¡»å”¯ä¸€ï¼Œå› æ­¤ä¸€ä¸ªç»“æ„ä½“ä¸­åŒç§ç±»å‹çš„åŒ¿åå­—æ®µåªèƒ½æœ‰ä¸€ä¸ªã€‚</p><h3 id="åµŒå¥—ç»“æ„ä½“"><a href="#åµŒå¥—ç»“æ„ä½“" class="headerlink" title="åµŒå¥—ç»“æ„ä½“"></a>åµŒå¥—ç»“æ„ä½“</h3><p>ä¸€ä¸ªç»“æ„ä½“ä¸­å¯ä»¥åµŒå¥—åŒ…å«å¦ä¸€ä¸ªç»“æ„ä½“æˆ–ç»“æ„ä½“æŒ‡é’ˆï¼Œå°±åƒä¸‹é¢çš„ç¤ºä¾‹ä»£ç é‚£æ ·</p><pre class="line-numbers language-go" data-language="go"><code class="language-go"><span class="token comment">//Address åœ°å€ç»“æ„ä½“</span><span class="token keyword">type</span> Address <span class="token keyword">struct</span> <span class="token punctuation">&#123;</span>Province <span class="token builtin">string</span>City     <span class="token builtin">string</span><span class="token punctuation">&#125;</span><span class="token comment">//User ç”¨æˆ·ç»“æ„ä½“</span><span class="token keyword">type</span> User <span class="token keyword">struct</span> <span class="token punctuation">&#123;</span>Name    <span class="token builtin">string</span>Gender  <span class="token builtin">string</span>Address Address<span class="token punctuation">&#125;</span><span class="token keyword">func</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>user1 <span class="token operator">:=</span> User<span class="token punctuation">&#123;</span>Name<span class="token punctuation">:</span>   <span class="token string">"å°ç‹å­"</span><span class="token punctuation">,</span>Gender<span class="token punctuation">:</span> <span class="token string">"ç”·"</span><span class="token punctuation">,</span>Address<span class="token punctuation">:</span> Address<span class="token punctuation">&#123;</span>Province<span class="token punctuation">:</span> <span class="token string">"å±±ä¸œ"</span><span class="token punctuation">,</span>City<span class="token punctuation">:</span>     <span class="token string">"å¨æµ·"</span><span class="token punctuation">,</span><span class="token punctuation">&#125;</span><span class="token punctuation">,</span><span class="token punctuation">&#125;</span>fmt<span class="token punctuation">.</span><span class="token function">Printf</span><span class="token punctuation">(</span><span class="token string">"user1=%#v\n"</span><span class="token punctuation">,</span> user1<span class="token punctuation">)</span><span class="token comment">//user1=main.User&#123;Name:"å°ç‹å­", Gender:"ç”·", Address:main.Address&#123;Province:"å±±ä¸œ", City:"å¨æµ·"&#125;&#125;</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h3 id="åµŒå¥—åŒ¿åå­—æ®µ"><a href="#åµŒå¥—åŒ¿åå­—æ®µ" class="headerlink" title="åµŒå¥—åŒ¿åå­—æ®µ"></a>åµŒå¥—åŒ¿åå­—æ®µ</h3><p>ä¸Šé¢userç»“æ„ä½“ä¸­åµŒå¥—çš„<code>Address</code>ç»“æ„ä½“ä¹Ÿå¯ä»¥é‡‡ç”¨åŒ¿åå­—æ®µçš„æ–¹å¼ï¼Œä¾‹å¦‚ï¼š</p><pre class="line-numbers language-go" data-language="go"><code class="language-go"><span class="token comment">//Address åœ°å€ç»“æ„ä½“</span><span class="token keyword">type</span> Address <span class="token keyword">struct</span> <span class="token punctuation">&#123;</span>Province <span class="token builtin">string</span>City     <span class="token builtin">string</span><span class="token punctuation">&#125;</span><span class="token comment">//User ç”¨æˆ·ç»“æ„ä½“</span><span class="token keyword">type</span> User <span class="token keyword">struct</span> <span class="token punctuation">&#123;</span>Name    <span class="token builtin">string</span>Gender  <span class="token builtin">string</span>Address <span class="token comment">//åŒ¿åå­—æ®µ</span><span class="token punctuation">&#125;</span><span class="token keyword">func</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span><span class="token keyword">var</span> user2 Useruser2<span class="token punctuation">.</span>Name <span class="token operator">=</span> <span class="token string">"å°ç‹å­"</span>user2<span class="token punctuation">.</span>Gender <span class="token operator">=</span> <span class="token string">"ç”·"</span>user2<span class="token punctuation">.</span>Address<span class="token punctuation">.</span>Province <span class="token operator">=</span> <span class="token string">"å±±ä¸œ"</span>    <span class="token comment">// åŒ¿åå­—æ®µé»˜è®¤ä½¿ç”¨ç±»å‹åä½œä¸ºå­—æ®µå</span>user2<span class="token punctuation">.</span>City <span class="token operator">=</span> <span class="token string">"å¨æµ·"</span>                <span class="token comment">// åŒ¿åå­—æ®µå¯ä»¥çœç•¥</span>fmt<span class="token punctuation">.</span><span class="token function">Printf</span><span class="token punctuation">(</span><span class="token string">"user2=%#v\n"</span><span class="token punctuation">,</span> user2<span class="token punctuation">)</span> <span class="token comment">//user2=main.User&#123;Name:"å°ç‹å­", Gender:"ç”·", Address:main.Address&#123;Province:"å±±ä¸œ", City:"å¨æµ·"&#125;&#125;</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>å½“è®¿é—®ç»“æ„ä½“æˆå‘˜æ—¶ä¼šå…ˆåœ¨ç»“æ„ä½“ä¸­æŸ¥æ‰¾è¯¥å­—æ®µï¼Œæ‰¾ä¸åˆ°å†å»åµŒå¥—çš„åŒ¿åå­—æ®µä¸­æŸ¥æ‰¾ã€‚</p><h3 id="åµŒå¥—ç»“æ„ä½“çš„å­—æ®µåå†²çª"><a href="#åµŒå¥—ç»“æ„ä½“çš„å­—æ®µåå†²çª" class="headerlink" title="åµŒå¥—ç»“æ„ä½“çš„å­—æ®µåå†²çª"></a>åµŒå¥—ç»“æ„ä½“çš„å­—æ®µåå†²çª</h3><p>åµŒå¥—ç»“æ„ä½“å†…éƒ¨å¯èƒ½å­˜åœ¨ç›¸åŒçš„å­—æ®µåã€‚åœ¨è¿™ç§æƒ…å†µä¸‹ä¸ºäº†é¿å…æ­§ä¹‰éœ€è¦é€šè¿‡æŒ‡å®šå…·ä½“çš„å†…åµŒç»“æ„ä½“å­—æ®µåã€‚</p><pre class="line-numbers language-go" data-language="go"><code class="language-go"><span class="token comment">//Address åœ°å€ç»“æ„ä½“</span><span class="token keyword">type</span> Address <span class="token keyword">struct</span> <span class="token punctuation">&#123;</span>Province   <span class="token builtin">string</span>City       <span class="token builtin">string</span>CreateTime <span class="token builtin">string</span><span class="token punctuation">&#125;</span><span class="token comment">//Email é‚®ç®±ç»“æ„ä½“</span><span class="token keyword">type</span> Email <span class="token keyword">struct</span> <span class="token punctuation">&#123;</span>Account    <span class="token builtin">string</span>CreateTime <span class="token builtin">string</span><span class="token punctuation">&#125;</span><span class="token comment">//User ç”¨æˆ·ç»“æ„ä½“</span><span class="token keyword">type</span> User <span class="token keyword">struct</span> <span class="token punctuation">&#123;</span>Name   <span class="token builtin">string</span>Gender <span class="token builtin">string</span>AddressEmail<span class="token punctuation">&#125;</span><span class="token keyword">func</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span><span class="token keyword">var</span> user3 Useruser3<span class="token punctuation">.</span>Name <span class="token operator">=</span> <span class="token string">"æ²™æ²³å¨œæ‰"</span>user3<span class="token punctuation">.</span>Gender <span class="token operator">=</span> <span class="token string">"ç”·"</span><span class="token comment">// user3.CreateTime = "2019" //ambiguous selector user3.CreateTime</span>user3<span class="token punctuation">.</span>Address<span class="token punctuation">.</span>CreateTime <span class="token operator">=</span> <span class="token string">"2000"</span> <span class="token comment">//æŒ‡å®šAddressç»“æ„ä½“ä¸­çš„CreateTime</span>user3<span class="token punctuation">.</span>Email<span class="token punctuation">.</span>CreateTime <span class="token operator">=</span> <span class="token string">"2000"</span>   <span class="token comment">//æŒ‡å®šEmailç»“æ„ä½“ä¸­çš„CreateTime</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h3 id="ç»“æ„ä½“çš„ç»§æ‰¿"><a href="#ç»“æ„ä½“çš„ç»§æ‰¿" class="headerlink" title="ç»“æ„ä½“çš„ç»§æ‰¿"></a>ç»“æ„ä½“çš„ç»§æ‰¿</h3><p>Goè¯­è¨€ä¸­ä½¿ç”¨ç»“æ„ä½“ä¹Ÿå¯ä»¥å®ç°å…¶ä»–ç¼–ç¨‹è¯­è¨€ä¸­é¢å‘å¯¹è±¡çš„ç»§æ‰¿ã€‚</p><pre class="line-numbers language-go" data-language="go"><code class="language-go"><span class="token comment">//Animal åŠ¨ç‰©</span><span class="token keyword">type</span> Animal <span class="token keyword">struct</span> <span class="token punctuation">&#123;</span>name <span class="token builtin">string</span><span class="token punctuation">&#125;</span><span class="token keyword">func</span> <span class="token punctuation">(</span>a <span class="token operator">*</span>Animal<span class="token punctuation">)</span> <span class="token function">move</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>fmt<span class="token punctuation">.</span><span class="token function">Printf</span><span class="token punctuation">(</span><span class="token string">"%sä¼šåŠ¨ï¼\n"</span><span class="token punctuation">,</span> a<span class="token punctuation">.</span>name<span class="token punctuation">)</span><span class="token punctuation">&#125;</span><span class="token comment">//Dog ç‹—</span><span class="token keyword">type</span> Dog <span class="token keyword">struct</span> <span class="token punctuation">&#123;</span>Feet    <span class="token builtin">int8</span><span class="token operator">*</span>Animal <span class="token comment">//é€šè¿‡åµŒå¥—åŒ¿åç»“æ„ä½“å®ç°ç»§æ‰¿</span><span class="token punctuation">&#125;</span><span class="token keyword">func</span> <span class="token punctuation">(</span>d <span class="token operator">*</span>Dog<span class="token punctuation">)</span> <span class="token function">wang</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>fmt<span class="token punctuation">.</span><span class="token function">Printf</span><span class="token punctuation">(</span><span class="token string">"%sä¼šæ±ªæ±ªæ±ª~\n"</span><span class="token punctuation">,</span> d<span class="token punctuation">.</span>name<span class="token punctuation">)</span><span class="token punctuation">&#125;</span><span class="token keyword">func</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>d1 <span class="token operator">:=</span> <span class="token operator">&amp;</span>Dog<span class="token punctuation">&#123;</span>Feet<span class="token punctuation">:</span> <span class="token number">4</span><span class="token punctuation">,</span>Animal<span class="token punctuation">:</span> <span class="token operator">&amp;</span>Animal<span class="token punctuation">&#123;</span> <span class="token comment">//æ³¨æ„åµŒå¥—çš„æ˜¯ç»“æ„ä½“æŒ‡é’ˆ</span>name<span class="token punctuation">:</span> <span class="token string">"ä¹ä¹"</span><span class="token punctuation">,</span><span class="token punctuation">&#125;</span><span class="token punctuation">,</span><span class="token punctuation">&#125;</span>d1<span class="token punctuation">.</span><span class="token function">wang</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment">//ä¹ä¹ä¼šæ±ªæ±ªæ±ª~</span>d1<span class="token punctuation">.</span><span class="token function">move</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment">//ä¹ä¹ä¼šåŠ¨ï¼</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h3 id="ç»“æ„ä½“å­—æ®µçš„å¯è§æ€§"><a href="#ç»“æ„ä½“å­—æ®µçš„å¯è§æ€§" class="headerlink" title="ç»“æ„ä½“å­—æ®µçš„å¯è§æ€§"></a>ç»“æ„ä½“å­—æ®µçš„å¯è§æ€§</h3><p>ç»“æ„ä½“ä¸­å­—æ®µå¤§å†™å¼€å¤´è¡¨ç¤ºå¯å…¬å¼€è®¿é—®ï¼Œå°å†™è¡¨ç¤ºç§æœ‰ï¼ˆä»…åœ¨å®šä¹‰å½“å‰ç»“æ„ä½“çš„åŒ…ä¸­å¯è®¿é—®ï¼‰ã€‚</p><h3 id="ç»“æ„ä½“ä¸JSONåºåˆ—åŒ–"><a href="#ç»“æ„ä½“ä¸JSONåºåˆ—åŒ–" class="headerlink" title="ç»“æ„ä½“ä¸JSONåºåˆ—åŒ–"></a>ç»“æ„ä½“ä¸JSONåºåˆ—åŒ–</h3><p>JSON(JavaScript Object Notation) æ˜¯ä¸€ç§è½»é‡çº§çš„æ•°æ®äº¤æ¢æ ¼å¼ã€‚æ˜“äºäººé˜…è¯»å’Œç¼–å†™ã€‚åŒæ—¶ä¹Ÿæ˜“äºæœºå™¨è§£æå’Œç”Ÿæˆã€‚JSONé”®å€¼å¯¹æ˜¯ç”¨æ¥ä¿å­˜JSå¯¹è±¡çš„ä¸€ç§æ–¹å¼ï¼Œé”®&#x2F;å€¼å¯¹ç»„åˆä¸­çš„é”®åå†™åœ¨å‰é¢å¹¶ç”¨åŒå¼•å·<code>&quot;&quot;</code>åŒ…è£¹ï¼Œä½¿ç”¨å†’å·<code>:</code>åˆ†éš”ï¼Œç„¶åç´§æ¥ç€å€¼ï¼›å¤šä¸ªé”®å€¼ä¹‹é—´ä½¿ç”¨è‹±æ–‡<code>,</code>åˆ†éš”ã€‚</p><pre class="line-numbers language-go" data-language="go"><code class="language-go"><span class="token comment">//Student å­¦ç”Ÿ</span><span class="token keyword">type</span> Student <span class="token keyword">struct</span> <span class="token punctuation">&#123;</span>ID     <span class="token builtin">int</span>Gender <span class="token builtin">string</span>Name   <span class="token builtin">string</span><span class="token punctuation">&#125;</span><span class="token comment">//Class ç­çº§</span><span class="token keyword">type</span> Class <span class="token keyword">struct</span> <span class="token punctuation">&#123;</span>Title    <span class="token builtin">string</span>Students <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token operator">*</span>Student<span class="token punctuation">&#125;</span><span class="token keyword">func</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>c <span class="token operator">:=</span> <span class="token operator">&amp;</span>Class<span class="token punctuation">&#123;</span>Title<span class="token punctuation">:</span>    <span class="token string">"101"</span><span class="token punctuation">,</span>Students<span class="token punctuation">:</span> <span class="token function">make</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token operator">*</span>Student<span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">200</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token punctuation">&#125;</span><span class="token keyword">for</span> i <span class="token operator">:=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> <span class="token number">10</span><span class="token punctuation">;</span> i<span class="token operator">++</span> <span class="token punctuation">&#123;</span>stu <span class="token operator">:=</span> <span class="token operator">&amp;</span>Student<span class="token punctuation">&#123;</span>Name<span class="token punctuation">:</span>   fmt<span class="token punctuation">.</span><span class="token function">Sprintf</span><span class="token punctuation">(</span><span class="token string">"stu%02d"</span><span class="token punctuation">,</span> i<span class="token punctuation">)</span><span class="token punctuation">,</span>Gender<span class="token punctuation">:</span> <span class="token string">"ç”·"</span><span class="token punctuation">,</span>ID<span class="token punctuation">:</span>     i<span class="token punctuation">,</span><span class="token punctuation">&#125;</span>c<span class="token punctuation">.</span>Students <span class="token operator">=</span> <span class="token function">append</span><span class="token punctuation">(</span>c<span class="token punctuation">.</span>Students<span class="token punctuation">,</span> stu<span class="token punctuation">)</span><span class="token punctuation">&#125;</span><span class="token comment">//JSONåºåˆ—åŒ–ï¼šç»“æ„ä½“-->JSONæ ¼å¼çš„å­—ç¬¦ä¸²</span>data<span class="token punctuation">,</span> err <span class="token operator">:=</span> json<span class="token punctuation">.</span><span class="token function">Marshal</span><span class="token punctuation">(</span>c<span class="token punctuation">)</span><span class="token keyword">if</span> err <span class="token operator">!=</span> <span class="token boolean">nil</span> <span class="token punctuation">&#123;</span>fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token string">"json marshal failed"</span><span class="token punctuation">)</span><span class="token keyword">return</span><span class="token punctuation">&#125;</span>fmt<span class="token punctuation">.</span><span class="token function">Printf</span><span class="token punctuation">(</span><span class="token string">"json:%s\n"</span><span class="token punctuation">,</span> data<span class="token punctuation">)</span><span class="token comment">//JSONååºåˆ—åŒ–ï¼šJSONæ ¼å¼çš„å­—ç¬¦ä¸²-->ç»“æ„ä½“</span>str <span class="token operator">:=</span> <span class="token string">`&#123;"Title":"101","Students":[&#123;"ID":0,"Gender":"ç”·","Name":"stu00"&#125;,&#123;"ID":1,"Gender":"ç”·","Name":"stu01"&#125;,&#123;"ID":2,"Gender":"ç”·","Name":"stu02"&#125;,&#123;"ID":3,"Gender":"ç”·","Name":"stu03"&#125;,&#123;"ID":4,"Gender":"ç”·","Name":"stu04"&#125;,&#123;"ID":5,"Gender":"ç”·","Name":"stu05"&#125;,&#123;"ID":6,"Gender":"ç”·","Name":"stu06"&#125;,&#123;"ID":7,"Gender":"ç”·","Name":"stu07"&#125;,&#123;"ID":8,"Gender":"ç”·","Name":"stu08"&#125;,&#123;"ID":9,"Gender":"ç”·","Name":"stu09"&#125;]&#125;`</span>c1 <span class="token operator">:=</span> <span class="token operator">&amp;</span>Class<span class="token punctuation">&#123;</span><span class="token punctuation">&#125;</span>err <span class="token operator">=</span> json<span class="token punctuation">.</span><span class="token function">Unmarshal</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token function">byte</span><span class="token punctuation">(</span>str<span class="token punctuation">)</span><span class="token punctuation">,</span> c1<span class="token punctuation">)</span><span class="token keyword">if</span> err <span class="token operator">!=</span> <span class="token boolean">nil</span> <span class="token punctuation">&#123;</span>fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token string">"json unmarshal failed!"</span><span class="token punctuation">)</span><span class="token keyword">return</span><span class="token punctuation">&#125;</span>fmt<span class="token punctuation">.</span><span class="token function">Printf</span><span class="token punctuation">(</span><span class="token string">"%#v\n"</span><span class="token punctuation">,</span> c1<span class="token punctuation">)</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h3 id="ç»“æ„ä½“æ ‡ç­¾-Tag"><a href="#ç»“æ„ä½“æ ‡ç­¾-Tag" class="headerlink" title="ç»“æ„ä½“æ ‡ç­¾(Tag)"></a>ç»“æ„ä½“æ ‡ç­¾(Tag)</h3><p><code>Tag</code>æ˜¯ç»“æ„ä½“çš„å…ƒä¿¡æ¯ï¼Œå¯ä»¥åœ¨è¿è¡Œçš„æ—¶å€™é€šè¿‡åå°„çš„æœºåˆ¶è¯»å–å‡ºæ¥ã€‚ <code>Tag</code>åœ¨ç»“æ„ä½“å­—æ®µçš„åæ–¹å®šä¹‰ï¼Œç”±ä¸€å¯¹<strong>åå¼•å·</strong>åŒ…è£¹èµ·æ¥ï¼Œå…·ä½“çš„æ ¼å¼å¦‚ä¸‹ï¼š</p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token variable"><span class="token variable">`</span>key1:<span class="token string">"value1"</span> key2:<span class="token string">"value2"</span><span class="token variable">`</span></span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>ç»“æ„ä½“tagç”±ä¸€ä¸ªæˆ–å¤šä¸ªé”®å€¼å¯¹ç»„æˆã€‚é”®ä¸å€¼ä½¿ç”¨å†’å·åˆ†éš”ï¼Œå€¼ç”¨åŒå¼•å·æ‹¬èµ·æ¥ã€‚åŒä¸€ä¸ªç»“æ„ä½“å­—æ®µå¯ä»¥è®¾ç½®å¤šä¸ªé”®å€¼å¯¹tagï¼Œä¸åŒçš„é”®å€¼å¯¹ä¹‹é—´ä½¿ç”¨ç©ºæ ¼åˆ†éš”ã€‚</p><p><strong>æ³¨æ„äº‹é¡¹ï¼š</strong> ä¸ºç»“æ„ä½“ç¼–å†™<code>Tag</code>æ—¶ï¼Œå¿…é¡»ä¸¥æ ¼éµå®ˆé”®å€¼å¯¹çš„è§„åˆ™ã€‚ç»“æ„ä½“æ ‡ç­¾çš„è§£æä»£ç çš„å®¹é”™èƒ½åŠ›å¾ˆå·®ï¼Œä¸€æ—¦æ ¼å¼å†™é”™ï¼Œç¼–è¯‘å’Œè¿è¡Œæ—¶éƒ½ä¸ä¼šæç¤ºä»»ä½•é”™è¯¯ï¼Œé€šè¿‡åå°„ä¹Ÿæ— æ³•æ­£ç¡®å–å€¼ã€‚ä¾‹å¦‚ä¸è¦åœ¨keyå’Œvalueä¹‹é—´æ·»åŠ ç©ºæ ¼ã€‚</p><p>ä¾‹å¦‚æˆ‘ä»¬ä¸º<code>Student</code>ç»“æ„ä½“çš„æ¯ä¸ªå­—æ®µå®šä¹‰jsonåºåˆ—åŒ–æ—¶ä½¿ç”¨çš„Tagï¼š</p><pre class="line-numbers language-go" data-language="go"><code class="language-go"><span class="token comment">//Student å­¦ç”Ÿ</span><span class="token keyword">type</span> Student <span class="token keyword">struct</span> <span class="token punctuation">&#123;</span>ID     <span class="token builtin">int</span>    <span class="token string">`json:"id"`</span> <span class="token comment">//é€šè¿‡æŒ‡å®štagå®ç°jsonåºåˆ—åŒ–è¯¥å­—æ®µæ—¶çš„key</span>Gender <span class="token builtin">string</span> <span class="token comment">//jsonåºåˆ—åŒ–æ˜¯é»˜è®¤ä½¿ç”¨å­—æ®µåä½œä¸ºkey</span>name   <span class="token builtin">string</span> <span class="token comment">//ç§æœ‰ä¸èƒ½è¢«jsonåŒ…è®¿é—®</span><span class="token punctuation">&#125;</span><span class="token keyword">func</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>s1 <span class="token operator">:=</span> Student<span class="token punctuation">&#123;</span>ID<span class="token punctuation">:</span>     <span class="token number">1</span><span class="token punctuation">,</span>Gender<span class="token punctuation">:</span> <span class="token string">"ç”·"</span><span class="token punctuation">,</span>name<span class="token punctuation">:</span>   <span class="token string">"æ²™æ²³å¨œæ‰"</span><span class="token punctuation">,</span><span class="token punctuation">&#125;</span>data<span class="token punctuation">,</span> err <span class="token operator">:=</span> json<span class="token punctuation">.</span><span class="token function">Marshal</span><span class="token punctuation">(</span>s1<span class="token punctuation">)</span><span class="token keyword">if</span> err <span class="token operator">!=</span> <span class="token boolean">nil</span> <span class="token punctuation">&#123;</span>fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token string">"json marshal failed!"</span><span class="token punctuation">)</span><span class="token keyword">return</span><span class="token punctuation">&#125;</span>fmt<span class="token punctuation">.</span><span class="token function">Printf</span><span class="token punctuation">(</span><span class="token string">"json str:%s\n"</span><span class="token punctuation">,</span> data<span class="token punctuation">)</span> <span class="token comment">//json str:&#123;"id":1,"Gender":"ç”·"&#125;</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h3 id="ç»“æ„ä½“å’Œæ–¹æ³•è¡¥å……çŸ¥è¯†"><a href="#ç»“æ„ä½“å’Œæ–¹æ³•è¡¥å……çŸ¥è¯†" class="headerlink" title="ç»“æ„ä½“å’Œæ–¹æ³•è¡¥å……çŸ¥è¯†"></a>ç»“æ„ä½“å’Œæ–¹æ³•è¡¥å……çŸ¥è¯†</h3><p>å› ä¸ºsliceå’Œmapè¿™ä¸¤ç§æ•°æ®ç±»å‹éƒ½åŒ…å«äº†æŒ‡å‘åº•å±‚æ•°æ®çš„æŒ‡é’ˆï¼Œå› æ­¤æˆ‘ä»¬åœ¨éœ€è¦å¤åˆ¶å®ƒä»¬æ—¶è¦ç‰¹åˆ«æ³¨æ„ã€‚æˆ‘ä»¬æ¥çœ‹ä¸‹é¢çš„ä¾‹å­ï¼š</p><pre class="line-numbers language-go" data-language="go"><code class="language-go"><span class="token keyword">type</span> Person <span class="token keyword">struct</span> <span class="token punctuation">&#123;</span>name   <span class="token builtin">string</span>age    <span class="token builtin">int8</span>dreams <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token builtin">string</span><span class="token punctuation">&#125;</span><span class="token keyword">func</span> <span class="token punctuation">(</span>p <span class="token operator">*</span>Person<span class="token punctuation">)</span> <span class="token function">SetDreams</span><span class="token punctuation">(</span>dreams <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token builtin">string</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>p<span class="token punctuation">.</span>dreams <span class="token operator">=</span> dreams<span class="token punctuation">&#125;</span><span class="token keyword">func</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>p1 <span class="token operator">:=</span> Person<span class="token punctuation">&#123;</span>name<span class="token punctuation">:</span> <span class="token string">"å°ç‹å­"</span><span class="token punctuation">,</span> age<span class="token punctuation">:</span> <span class="token number">18</span><span class="token punctuation">&#125;</span>data <span class="token operator">:=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token builtin">string</span><span class="token punctuation">&#123;</span><span class="token string">"åƒé¥­"</span><span class="token punctuation">,</span> <span class="token string">"ç¡è§‰"</span><span class="token punctuation">,</span> <span class="token string">"æ‰“è±†è±†"</span><span class="token punctuation">&#125;</span>p1<span class="token punctuation">.</span><span class="token function">SetDreams</span><span class="token punctuation">(</span>data<span class="token punctuation">)</span><span class="token comment">// ä½ çœŸçš„æƒ³è¦ä¿®æ”¹ p1.dreams å—ï¼Ÿ</span>data<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token string">"ä¸ç¡è§‰"</span>fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span>p1<span class="token punctuation">.</span>dreams<span class="token punctuation">)</span>  <span class="token comment">// ?</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>æ­£ç¡®çš„åšæ³•æ˜¯åœ¨æ–¹æ³•ä¸­ä½¿ç”¨ä¼ å…¥çš„sliceçš„æ‹·è´è¿›è¡Œç»“æ„ä½“èµ‹å€¼ã€‚</p><pre class="line-numbers language-go" data-language="go"><code class="language-go"><span class="token keyword">func</span> <span class="token punctuation">(</span>p <span class="token operator">*</span>Person<span class="token punctuation">)</span> <span class="token function">SetDreams</span><span class="token punctuation">(</span>dreams <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token builtin">string</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>p<span class="token punctuation">.</span>dreams <span class="token operator">=</span> <span class="token function">make</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token builtin">string</span><span class="token punctuation">,</span> <span class="token function">len</span><span class="token punctuation">(</span>dreams<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token function">copy</span><span class="token punctuation">(</span>p<span class="token punctuation">.</span>dreams<span class="token punctuation">,</span> dreams<span class="token punctuation">)</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre><p>åŒæ ·çš„é—®é¢˜ä¹Ÿå­˜åœ¨äºè¿”å›å€¼sliceå’Œmapçš„æƒ…å†µï¼Œåœ¨å®é™…ç¼–ç è¿‡ç¨‹ä¸­ä¸€å®šè¦æ³¨æ„è¿™ä¸ªé—®é¢˜ã€‚</p><h2 id="åŒ…ä¸ä¾èµ–ç®¡ç†"><a href="#åŒ…ä¸ä¾èµ–ç®¡ç†" class="headerlink" title="åŒ…ä¸ä¾èµ–ç®¡ç†"></a>åŒ…ä¸ä¾èµ–ç®¡ç†</h2><h3 id="åŒ…ä»‹ç»"><a href="#åŒ…ä»‹ç»" class="headerlink" title="åŒ…ä»‹ç»"></a>åŒ…ä»‹ç»</h3><p>Goè¯­è¨€ä¸­æ”¯æŒæ¨¡å—åŒ–çš„å¼€å‘ç†å¿µï¼Œåœ¨Goè¯­è¨€ä¸­ä½¿ç”¨<code>åŒ…ï¼ˆpackageï¼‰</code>æ¥æ”¯æŒä»£ç æ¨¡å—åŒ–å’Œä»£ç å¤ç”¨ã€‚ä¸€ä¸ªåŒ…æ˜¯ç”±ä¸€ä¸ªæˆ–å¤šä¸ªGoæºç æ–‡ä»¶ï¼ˆ.goç»“å°¾çš„æ–‡ä»¶ï¼‰ç»„æˆï¼Œæ˜¯ä¸€ç§é«˜çº§çš„ä»£ç å¤ç”¨æ–¹æ¡ˆï¼ŒGoè¯­è¨€ä¸ºæˆ‘ä»¬æä¾›äº†å¾ˆå¤šå†…ç½®åŒ…ï¼Œå¦‚<code>fmt</code>ã€<code>os</code>ã€<code>io</code>ç­‰ã€‚</p><p>ä¾‹å¦‚ï¼Œåœ¨ä¹‹å‰çš„ç« èŠ‚ä¸­æˆ‘ä»¬é¢‘ç¹ä½¿ç”¨äº†<code>fmt</code>è¿™ä¸ªå†…ç½®åŒ…ã€‚</p><pre class="line-numbers language-go" data-language="go"><code class="language-go"><span class="token keyword">package</span> main<span class="token keyword">import</span> <span class="token string">"fmt"</span><span class="token keyword">func</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>  fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token string">"Hello world!"</span><span class="token punctuation">)</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h3 id="å®šä¹‰åŒ…"><a href="#å®šä¹‰åŒ…" class="headerlink" title="å®šä¹‰åŒ…"></a>å®šä¹‰åŒ…</h3><p>æˆ‘ä»¬å¯ä»¥æ ¹æ®è‡ªå·±çš„éœ€è¦åˆ›å»ºè‡ªå®šä¹‰åŒ…ã€‚ä¸€ä¸ªåŒ…å¯ä»¥ç®€å•ç†è§£ä¸ºä¸€ä¸ªå­˜æ”¾<code>.go</code>æ–‡ä»¶çš„æ–‡ä»¶å¤¹ã€‚è¯¥æ–‡ä»¶å¤¹ä¸‹é¢çš„æ‰€æœ‰<code>.go</code>æ–‡ä»¶éƒ½è¦åœ¨éæ³¨é‡Šçš„ç¬¬ä¸€è¡Œæ·»åŠ å¦‚ä¸‹å£°æ˜ï¼Œå£°æ˜è¯¥æ–‡ä»¶å½’å±çš„åŒ…ã€‚</p><pre class="line-numbers language-go" data-language="go"><code class="language-go"><span class="token keyword">package</span> packagename<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>å…¶ä¸­ï¼š</p><ul><li>packageï¼šå£°æ˜åŒ…çš„å…³é”®å­—</li><li>packagenameï¼šåŒ…åï¼Œå¯ä»¥ä¸ä¸æ–‡ä»¶å¤¹çš„åç§°ä¸€è‡´ï¼Œä¸èƒ½åŒ…å« <code>-</code> ç¬¦å·ï¼Œæœ€å¥½ä¸å…¶å®ç°çš„åŠŸèƒ½ç›¸å¯¹åº”ã€‚</li></ul><p>å¦å¤–éœ€è¦æ³¨æ„ä¸€ä¸ªæ–‡ä»¶å¤¹ä¸‹é¢ç›´æ¥åŒ…å«çš„æ–‡ä»¶åªèƒ½å½’å±ä¸€ä¸ªåŒ…ï¼ŒåŒä¸€ä¸ªåŒ…çš„æ–‡ä»¶ä¸èƒ½åœ¨å¤šä¸ªæ–‡ä»¶å¤¹ä¸‹ã€‚åŒ…åä¸º<code>main</code>çš„åŒ…æ˜¯åº”ç”¨ç¨‹åºçš„å…¥å£åŒ…ï¼Œè¿™ç§åŒ…ç¼–è¯‘åä¼šå¾—åˆ°ä¸€ä¸ªå¯æ‰§è¡Œæ–‡ä»¶ï¼Œè€Œç¼–è¯‘ä¸åŒ…å«<code>main</code>åŒ…çš„æºä»£ç åˆ™ä¸ä¼šå¾—åˆ°å¯æ‰§è¡Œæ–‡ä»¶ã€‚</p><h3 id="æ ‡è¯†ç¬¦å¯è§æ€§"><a href="#æ ‡è¯†ç¬¦å¯è§æ€§" class="headerlink" title="æ ‡è¯†ç¬¦å¯è§æ€§"></a>æ ‡è¯†ç¬¦å¯è§æ€§</h3><p>åœ¨åŒä¸€ä¸ªåŒ…å†…éƒ¨å£°æ˜çš„æ ‡è¯†ç¬¦éƒ½ä½äºåŒä¸€ä¸ªå‘½åç©ºé—´ä¸‹ï¼Œåœ¨ä¸åŒçš„åŒ…å†…éƒ¨å£°æ˜çš„æ ‡è¯†ç¬¦å°±å±äºä¸åŒçš„å‘½åç©ºé—´ã€‚æƒ³è¦åœ¨åŒ…çš„å¤–éƒ¨ä½¿ç”¨åŒ…å†…éƒ¨çš„æ ‡è¯†ç¬¦å°±éœ€è¦æ·»åŠ åŒ…åå‰ç¼€ï¼Œä¾‹å¦‚<code>fmt.Println(&quot;Hello world!&quot;)</code>ï¼Œå°±æ˜¯æŒ‡è°ƒç”¨<code>fmt</code>åŒ…ä¸­çš„<code>Println</code>å‡½æ•°ã€‚</p><p>å¦‚æœæƒ³è®©ä¸€ä¸ªåŒ…ä¸­çš„æ ‡è¯†ç¬¦ï¼ˆå¦‚å˜é‡ã€å¸¸é‡ã€ç±»å‹ã€å‡½æ•°ç­‰ï¼‰èƒ½è¢«å¤–éƒ¨çš„åŒ…ä½¿ç”¨ï¼Œé‚£ä¹ˆæ ‡è¯†ç¬¦å¿…é¡»æ˜¯å¯¹å¤–å¯è§çš„ï¼ˆpublicï¼‰ã€‚åœ¨Goè¯­è¨€ä¸­æ˜¯é€šè¿‡æ ‡è¯†ç¬¦çš„é¦–å­—æ¯å¤§&#x2F;å°å†™æ¥æ§åˆ¶æ ‡è¯†ç¬¦çš„å¯¹å¤–å¯è§ï¼ˆpublicï¼‰&#x2F;ä¸å¯è§ï¼ˆprivateï¼‰çš„ã€‚åœ¨ä¸€ä¸ªåŒ…å†…éƒ¨åªæœ‰é¦–å­—æ¯å¤§å†™çš„æ ‡è¯†ç¬¦æ‰æ˜¯å¯¹å¤–å¯è§çš„ã€‚</p><p>ä¾‹å¦‚æˆ‘ä»¬å®šä¹‰ä¸€ä¸ªåä¸º<code>demo</code>çš„åŒ…ï¼Œåœ¨å…¶ä¸­å®šä¹‰äº†è‹¥å¹²æ ‡è¯†ç¬¦ã€‚åœ¨å¦å¤–ä¸€ä¸ªåŒ…ä¸­å¹¶ä¸æ˜¯æ‰€æœ‰çš„æ ‡è¯†ç¬¦éƒ½èƒ½é€šè¿‡<code>demo.</code>å‰ç¼€è®¿é—®åˆ°ï¼Œå› ä¸ºåªæœ‰é‚£äº›é¦–å­—æ¯æ˜¯å¤§å†™çš„æ ‡è¯†ç¬¦æ‰æ˜¯å¯¹å¤–å¯è§çš„ã€‚</p><pre class="line-numbers language-go" data-language="go"><code class="language-go"><span class="token keyword">package</span> demo<span class="token keyword">import</span> <span class="token string">"fmt"</span><span class="token comment">// åŒ…çº§åˆ«æ ‡è¯†ç¬¦çš„å¯è§æ€§</span><span class="token comment">// num å®šä¹‰ä¸€ä¸ªå…¨å±€æ•´å‹å˜é‡</span><span class="token comment">// é¦–å­—æ¯å°å†™ï¼Œå¯¹å¤–ä¸å¯è§(åªèƒ½åœ¨å½“å‰åŒ…å†…ä½¿ç”¨)</span><span class="token keyword">var</span> num <span class="token operator">=</span> <span class="token number">100</span><span class="token comment">// Mode å®šä¹‰ä¸€ä¸ªå¸¸é‡</span><span class="token comment">// é¦–å­—æ¯å¤§å†™ï¼Œå¯¹å¤–å¯è§(å¯åœ¨å…¶å®ƒåŒ…ä¸­ä½¿ç”¨)</span><span class="token keyword">const</span> Mode <span class="token operator">=</span> <span class="token number">1</span><span class="token comment">// person å®šä¹‰ä¸€ä¸ªä»£è¡¨äººçš„ç»“æ„ä½“</span><span class="token comment">// é¦–å­—æ¯å°å†™ï¼Œå¯¹å¤–ä¸å¯è§(åªèƒ½åœ¨å½“å‰åŒ…å†…ä½¿ç”¨)</span><span class="token keyword">type</span> person <span class="token keyword">struct</span> <span class="token punctuation">&#123;</span>name <span class="token builtin">string</span>Age  <span class="token builtin">int</span><span class="token punctuation">&#125;</span><span class="token comment">// Add è¿”å›ä¸¤ä¸ªæ•´æ•°å’Œçš„å‡½æ•°</span><span class="token comment">// é¦–å­—æ¯å¤§å†™ï¼Œå¯¹å¤–å¯è§(å¯åœ¨å…¶å®ƒåŒ…ä¸­ä½¿ç”¨)</span><span class="token keyword">func</span> <span class="token function">Add</span><span class="token punctuation">(</span>x<span class="token punctuation">,</span> y <span class="token builtin">int</span><span class="token punctuation">)</span> <span class="token builtin">int</span> <span class="token punctuation">&#123;</span><span class="token keyword">return</span> x <span class="token operator">+</span> y<span class="token punctuation">&#125;</span><span class="token comment">// sayHi æ‰“æ‹›å‘¼çš„å‡½æ•°</span><span class="token comment">// é¦–å­—æ¯å°å†™ï¼Œå¯¹å¤–ä¸å¯è§(åªèƒ½åœ¨å½“å‰åŒ…å†…ä½¿ç”¨)</span><span class="token keyword">func</span> <span class="token function">sayHi</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span><span class="token keyword">var</span> myName <span class="token operator">=</span> <span class="token string">"ä¸ƒç±³"</span> <span class="token comment">// å‡½æ•°å±€éƒ¨å˜é‡ï¼Œåªèƒ½åœ¨å½“å‰å‡½æ•°å†…ä½¿ç”¨</span>fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span>myName<span class="token punctuation">)</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>åŒæ ·çš„è§„åˆ™ä¹Ÿé€‚ç”¨äºç»“æ„ä½“ï¼Œç»“æ„ä½“ä¸­å¯å¯¼å‡ºå­—æ®µçš„å­—æ®µåç§°å¿…é¡»é¦–å­—æ¯å¤§å†™ã€‚</p><pre class="line-numbers language-go" data-language="go"><code class="language-go"><span class="token keyword">type</span> Student <span class="token keyword">struct</span> <span class="token punctuation">&#123;</span>Name  <span class="token builtin">string</span> <span class="token comment">// å¯åœ¨åŒ…å¤–è®¿é—®çš„æ–¹æ³•</span>class <span class="token builtin">string</span> <span class="token comment">// ä»…é™åŒ…å†…è®¿é—®çš„å­—æ®µ</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre><h3 id="åŒ…çš„å¼•å…¥"><a href="#åŒ…çš„å¼•å…¥" class="headerlink" title="åŒ…çš„å¼•å…¥"></a>åŒ…çš„å¼•å…¥</h3><p>è¦åœ¨å½“å‰åŒ…ä¸­ä½¿ç”¨å¦å¤–ä¸€ä¸ªåŒ…çš„å†…å®¹å°±éœ€è¦ä½¿ç”¨<code>import</code>å…³é”®å­—å¼•å…¥è¿™ä¸ªåŒ…ï¼Œå¹¶ä¸”importè¯­å¥é€šå¸¸æ”¾åœ¨æ–‡ä»¶çš„å¼€å¤´ï¼Œ<code>package</code>å£°æ˜è¯­å¥çš„ä¸‹æ–¹ã€‚å®Œæ•´çš„å¼•å…¥å£°æ˜è¯­å¥æ ¼å¼å¦‚ä¸‹:</p><pre class="line-numbers language-go" data-language="go"><code class="language-go"><span class="token keyword">import</span> importname <span class="token string">"path/to/package"</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>å…¶ä¸­ï¼š</p><ul><li>importnameï¼šå¼•å…¥çš„åŒ…åï¼Œé€šå¸¸éƒ½çœç•¥ã€‚é»˜è®¤å€¼ä¸ºå¼•å…¥åŒ…çš„åŒ…åã€‚</li><li>path&#x2F;to&#x2F;packageï¼šå¼•å…¥åŒ…çš„è·¯å¾„åç§°ï¼Œå¿…é¡»ä½¿ç”¨åŒå¼•å·åŒ…è£¹èµ·æ¥ã€‚</li><li>Goè¯­è¨€ä¸­ç¦æ­¢å¾ªç¯å¯¼å…¥åŒ…ã€‚</li></ul><p>ä¸€ä¸ªGoæºç æ–‡ä»¶ä¸­å¯ä»¥åŒæ—¶å¼•å…¥å¤šä¸ªåŒ…ï¼Œä¾‹å¦‚ï¼š</p><pre class="line-numbers language-go" data-language="go"><code class="language-go"><span class="token keyword">import</span> <span class="token string">"fmt"</span><span class="token keyword">import</span> <span class="token string">"net/http"</span><span class="token keyword">import</span> <span class="token string">"os"</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre><p>å½“ç„¶å¯ä»¥ä½¿ç”¨æ‰¹é‡å¼•å…¥çš„æ–¹å¼ã€‚</p><pre class="line-numbers language-go" data-language="go"><code class="language-go"><span class="token keyword">import</span> <span class="token punctuation">(</span>    <span class="token string">"fmt"</span>  <span class="token string">"net/http"</span>    <span class="token string">"os"</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>å½“å¼•å…¥çš„å¤šä¸ªåŒ…ä¸­å­˜åœ¨ç›¸åŒçš„åŒ…åæˆ–è€…æƒ³è‡ªè¡Œä¸ºæŸä¸ªå¼•å…¥çš„åŒ…è®¾ç½®ä¸€ä¸ªæ–°åŒ…åæ—¶ï¼Œéƒ½éœ€è¦é€šè¿‡<code>importname</code>æŒ‡å®šä¸€ä¸ªåœ¨å½“å‰æ–‡ä»¶ä¸­ä½¿ç”¨çš„æ–°åŒ…åã€‚ä¾‹å¦‚ï¼Œåœ¨å¼•å…¥<code>fmt</code>åŒ…æ—¶ä¸ºå…¶æŒ‡å®šä¸€ä¸ªæ–°åŒ…å<code>f</code>ã€‚</p><pre class="line-numbers language-go" data-language="go"><code class="language-go"><span class="token keyword">import</span> f <span class="token string">"fmt"</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>è¿™æ ·åœ¨å½“å‰è¿™ä¸ªæ–‡ä»¶ä¸­å°±å¯ä»¥é€šè¿‡ä½¿ç”¨<code>f</code>æ¥è°ƒç”¨<code>fmt</code>åŒ…ä¸­çš„å‡½æ•°äº†ã€‚</p><pre class="line-numbers language-go" data-language="go"><code class="language-go">f<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token string">"Hello world!"</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>å¦‚æœå¼•å…¥ä¸€ä¸ªåŒ…çš„æ—¶å€™ä¸ºå…¶è®¾ç½®äº†ä¸€ä¸ªç‰¹æ®Š<code>_</code>ä½œä¸ºåŒ…åï¼Œé‚£ä¹ˆè¿™ä¸ªåŒ…çš„å¼•å…¥æ–¹å¼å°±ç§°ä¸ºåŒ¿åå¼•å…¥ã€‚ä¸€ä¸ªåŒ…è¢«åŒ¿åå¼•å…¥çš„ç›®çš„ä¸»è¦æ˜¯ä¸ºäº†åŠ è½½è¿™ä¸ªåŒ…ï¼Œä»è€Œä½¿å¾—è¿™ä¸ªåŒ…ä¸­çš„èµ„æºå¾—ä»¥åˆå§‹åŒ–ã€‚ è¢«åŒ¿åå¼•å…¥çš„åŒ…ä¸­çš„<code>init</code>å‡½æ•°å°†è¢«æ‰§è¡Œå¹¶ä¸”ä»…æ‰§è¡Œä¸€éã€‚</p><pre class="line-numbers language-go" data-language="go"><code class="language-go"><span class="token keyword">import</span> <span class="token boolean">_</span> <span class="token string">"github.com/go-sql-driver/mysql"</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>åŒ¿åå¼•å…¥çš„åŒ…ä¸å…¶ä»–æ–¹å¼å¯¼å…¥çš„åŒ…ä¸€æ ·éƒ½ä¼šè¢«ç¼–è¯‘åˆ°å¯æ‰§è¡Œæ–‡ä»¶ä¸­ã€‚</p><p>éœ€è¦æ³¨æ„çš„æ˜¯ï¼ŒGoè¯­è¨€ä¸­ä¸å…è®¸å¼•å…¥åŒ…å´ä¸åœ¨ä»£ç ä¸­ä½¿ç”¨è¿™ä¸ªåŒ…çš„å†…å®¹ï¼Œå¦‚æœå¼•å…¥äº†æœªä½¿ç”¨çš„åŒ…åˆ™ä¼šè§¦å‘ç¼–è¯‘é”™è¯¯ã€‚</p><h3 id="initåˆå§‹åŒ–å‡½æ•°"><a href="#initåˆå§‹åŒ–å‡½æ•°" class="headerlink" title="initåˆå§‹åŒ–å‡½æ•°"></a>initåˆå§‹åŒ–å‡½æ•°</h3><p>åœ¨æ¯ä¸€ä¸ªGoæºæ–‡ä»¶ä¸­ï¼Œéƒ½å¯ä»¥å®šä¹‰ä»»æ„ä¸ªå¦‚ä¸‹æ ¼å¼çš„ç‰¹æ®Šå‡½æ•°ï¼š</p><pre class="line-numbers language-go" data-language="go"><code class="language-go"><span class="token keyword">func</span> <span class="token function">init</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>  <span class="token comment">// ...</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre><p>è¿™ç§ç‰¹æ®Šçš„å‡½æ•°ä¸æ¥æ”¶ä»»ä½•å‚æ•°ä¹Ÿæ²¡æœ‰ä»»ä½•è¿”å›å€¼ï¼Œæˆ‘ä»¬ä¹Ÿä¸èƒ½åœ¨ä»£ç ä¸­ä¸»åŠ¨è°ƒç”¨å®ƒã€‚å½“ç¨‹åºå¯åŠ¨çš„æ—¶å€™ï¼Œinitå‡½æ•°ä¼šæŒ‰ç…§å®ƒä»¬å£°æ˜çš„é¡ºåºè‡ªåŠ¨æ‰§è¡Œã€‚</p><p>ä¸€ä¸ªåŒ…çš„åˆå§‹åŒ–è¿‡ç¨‹æ˜¯æŒ‰ç…§ä»£ç ä¸­å¼•å…¥çš„é¡ºåºæ¥è¿›è¡Œçš„ï¼Œæ‰€æœ‰åœ¨è¯¥åŒ…ä¸­å£°æ˜çš„<code>init</code>å‡½æ•°éƒ½å°†è¢«ä¸²è¡Œè°ƒç”¨å¹¶ä¸”ä»…è°ƒç”¨æ‰§è¡Œä¸€æ¬¡ã€‚æ¯ä¸€ä¸ªåŒ…åˆå§‹åŒ–çš„æ—¶å€™éƒ½æ˜¯å…ˆæ‰§è¡Œä¾èµ–çš„åŒ…ä¸­å£°æ˜çš„<code>init</code>å‡½æ•°å†æ‰§è¡Œå½“å‰åŒ…ä¸­å£°æ˜çš„<code>init</code>å‡½æ•°ã€‚ç¡®ä¿åœ¨ç¨‹åºçš„<code>main</code>å‡½æ•°å¼€å§‹æ‰§è¡Œæ—¶æ‰€æœ‰çš„ä¾èµ–åŒ…éƒ½å·²åˆå§‹åŒ–å®Œæˆã€‚</p><p><img src="https://zhangtq-blog.oss-cn-hangzhou.aliyuncs.com/content_picture/package01.png" alt="åŒ…åˆå§‹åŒ–å‡½æ•°æ‰§è¡Œé¡ºåºç¤ºæ„å›¾"></p><p>æ¯ä¸€ä¸ªåŒ…çš„åˆå§‹åŒ–æ˜¯å…ˆä»åˆå§‹åŒ–åŒ…çº§åˆ«å˜é‡å¼€å§‹çš„ã€‚ä¾‹å¦‚ä»ä¸‹é¢çš„ç¤ºä¾‹ä¸­æˆ‘ä»¬å°±å¯ä»¥çœ‹å‡ºåŒ…çº§åˆ«å˜é‡çš„åˆå§‹åŒ–ä¼šå…ˆäº<code>init</code>åˆå§‹åŒ–å‡½æ•°ã€‚</p><pre class="line-numbers language-go" data-language="go"><code class="language-go"><span class="token keyword">package</span> main<span class="token keyword">import</span> <span class="token string">"fmt"</span><span class="token keyword">var</span> x <span class="token builtin">int8</span> <span class="token operator">=</span> <span class="token number">10</span><span class="token keyword">const</span> pi <span class="token operator">=</span> <span class="token number">3.14</span><span class="token keyword">func</span> <span class="token function">init</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>  fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token string">"x:"</span><span class="token punctuation">,</span> x<span class="token punctuation">)</span>  fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token string">"pi:"</span><span class="token punctuation">,</span> pi<span class="token punctuation">)</span>  <span class="token function">sayHi</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">&#125;</span><span class="token keyword">func</span> <span class="token function">sayHi</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token string">"Hello World!"</span><span class="token punctuation">)</span><span class="token punctuation">&#125;</span><span class="token keyword">func</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token string">"ä½ å¥½ï¼Œä¸–ç•Œï¼"</span><span class="token punctuation">)</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>è¾“å‡ºç»“æœï¼š</p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">x: <span class="token number">10</span>pi: <span class="token number">3.14</span>Hello World<span class="token operator">!</span>ä½ å¥½ï¼Œä¸–ç•Œï¼<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre><p>åœ¨ä¸Šé¢çš„ä»£ç ä¸­ï¼Œæˆ‘ä»¬äº†è§£äº†Goè¯­è¨€ä¸­åŒ…çš„å®šä¹‰åŠåŒ…çš„åˆå§‹åŒ–è¿‡ç¨‹ï¼Œè¿™è®©æˆ‘ä»¬èƒ½å¤Ÿåœ¨å¼€å‘æ—¶æŒ‰ç…§è‡ªå·±çš„éœ€è¦å®šä¹‰åŒ…ã€‚åŒæ—¶æˆ‘ä»¬è¿˜å­¦åˆ°äº†å¦‚ä½•åœ¨æˆ‘ä»¬çš„ä»£ç ä¸­å¼•å…¥å…¶å®ƒçš„åŒ…ï¼Œä¸è¿‡åœ¨æœ¬å°èŠ‚çš„æ‰€æœ‰ç¤ºä¾‹ä¸­æˆ‘ä»¬éƒ½æ˜¯å¼•å…¥Goå†…ç½®çš„åŒ…ã€‚ç°ä»£ç¼–ç¨‹è¯­è¨€å¤§å¤šéƒ½å…è®¸å¼€å‘è€…å¯¹å¤–å‘å¸ƒåŒ…&#x2F;åº“ï¼Œä¹Ÿæ”¯æŒå¼€å‘è€…åœ¨è‡ªå·±çš„ä»£ç ä¸­å¼•å…¥ç¬¬ä¸‰æ–¹åº“ã€‚è¿™æ ·çš„è®¾è®¡èƒ½å¤Ÿè®©å¹¿å¤§å¼€å‘è€…ä¸€èµ·å‚ä¸åˆ°è¯­è¨€çš„ç”Ÿæ€ç¯å¢ƒå»ºè®¾å½“ä¸­ï¼ŒæŠŠç”Ÿæ€å»ºè®¾çš„æ›´åŠ å®Œå–„ã€‚</p><h3 id="go-moduleä»‹ç»"><a href="#go-moduleä»‹ç»" class="headerlink" title="go moduleä»‹ç»"></a>go moduleä»‹ç»</h3><p>Go module æ˜¯ Go1.11 ç‰ˆæœ¬å‘å¸ƒçš„ä¾èµ–ç®¡ç†æ–¹æ¡ˆï¼Œä» Go1.14 ç‰ˆæœ¬å¼€å§‹æ¨èåœ¨ç”Ÿäº§ç¯å¢ƒä½¿ç”¨ï¼ŒäºGo1.16ç‰ˆæœ¬é»˜è®¤å¼€å¯ã€‚Go module æä¾›äº†ä»¥ä¸‹å‘½ä»¤ä¾›æˆ‘ä»¬ä½¿ç”¨ï¼š</p><p>go moduleç›¸å…³å‘½ä»¤</p><table><thead><tr><th align="center">å‘½ä»¤</th><th align="center">ä»‹ç»</th></tr></thead><tbody><tr><td align="center">go mod init</td><td align="center">åˆå§‹åŒ–é¡¹ç›®ä¾èµ–ï¼Œç”Ÿæˆgo.modæ–‡ä»¶</td></tr><tr><td align="center">go mod download</td><td align="center">æ ¹æ®go.modæ–‡ä»¶ä¸‹è½½ä¾èµ–</td></tr><tr><td align="center">go mod tidy</td><td align="center">æ¯”å¯¹é¡¹ç›®æ–‡ä»¶ä¸­å¼•å…¥çš„ä¾èµ–ä¸go.modè¿›è¡Œæ¯”å¯¹</td></tr><tr><td align="center">go mod graph</td><td align="center">è¾“å‡ºä¾èµ–å…³ç³»å›¾</td></tr><tr><td align="center">go mod edit</td><td align="center">ç¼–è¾‘go.modæ–‡ä»¶</td></tr><tr><td align="center">go mod vendor</td><td align="center">å°†é¡¹ç›®çš„æ‰€æœ‰ä¾èµ–å¯¼å‡ºè‡³vendorç›®å½•</td></tr><tr><td align="center">go mod verify</td><td align="center">æ£€éªŒä¸€ä¸ªä¾èµ–åŒ…æ˜¯å¦è¢«ç¯¡æ”¹è¿‡</td></tr><tr><td align="center">go mod why</td><td align="center">è§£é‡Šä¸ºä»€ä¹ˆéœ€è¦æŸä¸ªä¾èµ–</td></tr></tbody></table><p>Goè¯­è¨€åœ¨ go module çš„è¿‡æ¸¡é˜¶æ®µæä¾›äº† <code>GO111MODULE</code> è¿™ä¸ªç¯å¢ƒå˜é‡æ¥ä½œä¸ºæ˜¯å¦å¯ç”¨ go module åŠŸèƒ½çš„å¼€å…³ï¼Œè€ƒè™‘åˆ° Go1.16 ä¹‹å go module å·²ç»é»˜è®¤å¼€å¯ï¼Œæ‰€ä»¥æœ¬ä¹¦ä¸å†ä»‹ç»è¯¥é…ç½®ï¼Œå¯¹äºåˆšæ¥è§¦Goè¯­è¨€çš„è¯»è€…è€Œè¨€å®Œå…¨æ²¡æœ‰å¿…è¦äº†è§£è¿™ä¸ªå†å²åŒ…è¢±ã€‚</p><p><strong>GOPROXY</strong></p><p>è¿™ä¸ªç¯å¢ƒå˜é‡ä¸»è¦æ˜¯ç”¨äºè®¾ç½® Go æ¨¡å—ä»£ç†ï¼ˆGo module proxyï¼‰ï¼Œå…¶ä½œç”¨æ˜¯ç”¨äºä½¿ Go åœ¨åç»­æ‹‰å–æ¨¡å—ç‰ˆæœ¬æ—¶èƒ½å¤Ÿè„±ç¦»ä¼ ç»Ÿçš„ VCS æ–¹å¼ï¼Œç›´æ¥é€šè¿‡é•œåƒç«™ç‚¹æ¥å¿«é€Ÿæ‹‰å–ã€‚</p><p>GOPROXY çš„é»˜è®¤å€¼æ˜¯ï¼š<code>https://proxy.golang.org,direct</code>ï¼Œç”±äºæŸäº›åŸå› å›½å†…æ— æ³•æ­£å¸¸è®¿é—®è¯¥åœ°å€ï¼Œæ‰€ä»¥æˆ‘ä»¬é€šå¸¸éœ€è¦é…ç½®ä¸€ä¸ªå¯è®¿é—®çš„åœ°å€ã€‚ç›®å‰ç¤¾åŒºä½¿ç”¨æ¯”è¾ƒå¤šçš„æœ‰ä¸¤ä¸ª<code>https://goproxy.cn</code>å’Œ<code>https://goproxy.io</code>ï¼Œå½“ç„¶å¦‚æœä½ çš„å…¬å¸æœ‰æä¾›GOPROXYåœ°å€é‚£ä¹ˆå°±ç›´æ¥ä½¿ç”¨ã€‚è®¾ç½®GOPAROXYçš„å‘½ä»¤å¦‚ä¸‹ï¼š</p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">go <span class="token function">env</span> <span class="token parameter variable">-w</span> <span class="token assign-left variable">GOPROXY</span><span class="token operator">=</span>https://goproxy.cn,direct<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>GOPROXY å…è®¸è®¾ç½®å¤šä¸ªä»£ç†åœ°å€ï¼Œå¤šä¸ªåœ°å€ä¹‹é—´éœ€ä½¿ç”¨è‹±æ–‡é€—å· â€œ,â€ åˆ†éš”ã€‚æœ€åçš„ â€œdirectâ€ æ˜¯ä¸€ä¸ªç‰¹æ®ŠæŒ‡ç¤ºç¬¦ï¼Œç”¨äºæŒ‡ç¤º Go å›æºåˆ°æºåœ°å€å»æŠ“å–ï¼ˆæ¯”å¦‚ GitHub ç­‰ï¼‰ã€‚å½“é…ç½®æœ‰å¤šä¸ªä»£ç†åœ°å€æ—¶ï¼Œå¦‚æœç¬¬ä¸€ä¸ªä»£ç†åœ°å€è¿”å› 404 æˆ– 410 é”™è¯¯æ—¶ï¼ŒGo ä¼šè‡ªåŠ¨å°è¯•ä¸‹ä¸€ä¸ªä»£ç†åœ°å€ï¼Œå½“é‡è§ â€œdirectâ€ æ—¶è§¦å‘å›æºï¼Œä¹Ÿå°±æ˜¯å›åˆ°æºåœ°å€å»æŠ“å–ã€‚</p><p><strong>GOPRIVATE</strong></p><p>è®¾ç½®äº†GOPROXY ä¹‹åï¼Œgo å‘½ä»¤å°±ä¼šä»é…ç½®çš„ä»£ç†åœ°å€æ‹‰å–å’Œæ ¡éªŒä¾èµ–åŒ…ã€‚å½“æˆ‘ä»¬åœ¨é¡¹ç›®ä¸­å¼•å…¥äº†éå…¬å¼€çš„åŒ…ï¼ˆå…¬å¸å†…éƒ¨gitä»“åº“æˆ– github ç§æœ‰ä»“åº“ç­‰ï¼‰ï¼Œæ­¤æ—¶ä¾¿æ— æ³•æ­£å¸¸ä»ä»£ç†æ‹‰å–åˆ°è¿™äº›éå…¬å¼€çš„ä¾èµ–åŒ…ï¼Œè¿™ä¸ªæ—¶å€™å°±éœ€è¦é…ç½® GOPRIVATE ç¯å¢ƒå˜é‡ã€‚GOPRIVATEç”¨æ¥å‘Šè¯‰ go å‘½ä»¤å“ªäº›ä»“åº“å±äºç§æœ‰ä»“åº“ï¼Œä¸å¿…é€šè¿‡ä»£ç†æœåŠ¡å™¨æ‹‰å–å’Œæ ¡éªŒã€‚</p><p>GOPRIVATE çš„å€¼ä¹Ÿå¯ä»¥è®¾ç½®å¤šä¸ªï¼Œå¤šä¸ªåœ°å€ä¹‹é—´ä½¿ç”¨è‹±æ–‡é€—å· â€œ,â€ åˆ†éš”ã€‚æˆ‘ä»¬é€šå¸¸ä¼šæŠŠè‡ªå·±å…¬å¸å†…éƒ¨çš„ä»£ç ä»“åº“è®¾ç½®åˆ° GOPRIVATE ä¸­ï¼Œä¾‹å¦‚ï¼š</p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">$ go <span class="token function">env</span> <span class="token parameter variable">-w</span> <span class="token assign-left variable">GOPRIVATE</span><span class="token operator">=</span><span class="token string">"git.mycompany.com"</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>è¿™æ ·åœ¨æ‹‰å–ä»¥<code>git.mycompany.com</code>ä¸ºè·¯å¾„å‰ç¼€çš„ä¾èµ–åŒ…æ—¶å°±èƒ½æ­£å¸¸æ‹‰å–äº†ã€‚</p><p>æ­¤å¤–ï¼Œå¦‚æœå…¬å¸å†…éƒ¨è‡ªå»ºäº† GOPROXY æœåŠ¡ï¼Œé‚£ä¹ˆæˆ‘ä»¬å¯ä»¥é€šè¿‡è®¾ç½® <code>GONOPROXY=none</code>ï¼Œå…è®¸é€šå†…éƒ¨ä»£ç†æ‹‰å–ç§æœ‰ä»“åº“çš„åŒ…ã€‚</p><h3 id="ä½¿ç”¨go-moduleå¼•å…¥åŒ…"><a href="#ä½¿ç”¨go-moduleå¼•å…¥åŒ…" class="headerlink" title="ä½¿ç”¨go moduleå¼•å…¥åŒ…"></a>ä½¿ç”¨go moduleå¼•å…¥åŒ…</h3><p>æ¥ä¸‹æ¥æˆ‘ä»¬å°†é€šè¿‡ä¸€ä¸ªç¤ºä¾‹æ¥æ¼”ç¤ºå¦‚ä½•åœ¨å¼€å‘é¡¹ç›®æ—¶ä½¿ç”¨ go module æ‹‰å–å’Œç®¡ç†é¡¹ç›®ä¾èµ–ã€‚</p><p><strong>åˆå§‹åŒ–é¡¹ç›®</strong> æˆ‘ä»¬åœ¨æœ¬åœ°æ–°å»ºä¸€ä¸ªåä¸º<code>holiday</code>é¡¹ç›®ï¼ŒæŒ‰å¦‚ä¸‹æ–¹å¼åˆ›å»ºä¸€ä¸ªåä¸º<code>holiday</code>çš„æ–‡ä»¶å¤¹å¹¶åˆ‡æ¢åˆ°è¯¥ç›®å½•ä¸‹ï¼š</p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">$ <span class="token function">mkdir</span> holiday$ <span class="token builtin class-name">cd</span> holiday<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre><p>ç›®å‰æˆ‘ä»¬ä½äº<code>holiday</code>æ–‡ä»¶å¤¹ä¸‹ï¼Œæ¥ä¸‹æ¥æ‰§è¡Œä¸‹é¢çš„å‘½ä»¤åˆå§‹åŒ–é¡¹ç›®ã€‚</p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">$ go mod init holidaygo: creating new go.mod: module holiday<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre><p>è¯¥å‘½ä»¤ä¼šè‡ªåŠ¨åœ¨é¡¹ç›®ç›®å½•ä¸‹åˆ›å»ºä¸€ä¸ª<code>go.mod</code>æ–‡ä»¶ï¼Œå…¶å†…å®¹å¦‚ä¸‹ã€‚</p><pre class="line-numbers language-go" data-language="go"><code class="language-go">module holiday<span class="token keyword">go</span> <span class="token number">1.16</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre><p>å…¶ä¸­ï¼š</p><ul><li>module holidayï¼šå®šä¹‰å½“å‰é¡¹ç›®çš„å¯¼å…¥è·¯å¾„</li><li>go 1.16ï¼šæ ‡è¯†å½“å‰é¡¹ç›®ä½¿ç”¨çš„ Go ç‰ˆæœ¬</li></ul><p><code>go.mod</code>æ–‡ä»¶ä¼šè®°å½•é¡¹ç›®ä½¿ç”¨çš„ç¬¬ä¸‰æ–¹ä¾èµ–åŒ…ä¿¡æ¯ï¼ŒåŒ…æ‹¬åŒ…åå’Œç‰ˆæœ¬ï¼Œç”±äºæˆ‘ä»¬çš„<code>holiday</code>é¡¹ç›®ç›®å‰è¿˜æ²¡æœ‰ä½¿ç”¨åˆ°ç¬¬ä¸‰æ–¹ä¾èµ–åŒ…ï¼Œæ‰€ä»¥<code>go.mod</code>æ–‡ä»¶æš‚æ—¶è¿˜æ²¡æœ‰è®°å½•ä»»ä½•ä¾èµ–åŒ…ä¿¡æ¯ï¼Œåªæœ‰å½“å‰é¡¹ç›®çš„ä¸€äº›ä¿¡æ¯ã€‚</p><p>æ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬åœ¨é¡¹ç›®ç›®å½•ä¸‹æ–°å»ºä¸€ä¸ª<code>main.go</code>æ–‡ä»¶ï¼Œå…¶å†…å®¹å¦‚ä¸‹ï¼š</p><pre class="line-numbers language-go" data-language="go"><code class="language-go"><span class="token comment">// holiday/main.go</span><span class="token keyword">package</span> main<span class="token keyword">import</span> <span class="token string">"fmt"</span><span class="token keyword">func</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token string">"ç°åœ¨æ˜¯å‡æœŸæ—¶é—´..."</span><span class="token punctuation">)</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>ç„¶åï¼Œæˆ‘ä»¬çš„<code>holiday</code>é¡¹ç›®ç°åœ¨éœ€è¦å¼•å…¥ä¸€ä¸ªç¬¬ä¸‰æ–¹åŒ…<code>github.com/q1mi/hello</code>æ¥å®ç°ä¸€äº›å¿…è¦çš„åŠŸèƒ½ã€‚ç±»ä¼¼è¿™æ ·çš„åœºæ™¯åœ¨æˆ‘ä»¬çš„æ—¥å¸¸å¼€å‘ä¸­æ˜¯å¾ˆå¸¸è§çš„ã€‚æˆ‘ä»¬éœ€è¦å…ˆå°†ä¾èµ–åŒ…ä¸‹è½½åˆ°æœ¬åœ°åŒæ—¶åœ¨<code>go.mod</code>ä¸­è®°å½•ä¾èµ–ä¿¡æ¯ï¼Œç„¶åæ‰èƒ½åœ¨æˆ‘ä»¬çš„ä»£ç ä¸­å¼•å…¥å¹¶ä½¿ç”¨è¿™ä¸ªåŒ…ã€‚ä¸‹è½½ä¾èµ–åŒ…ä¸»è¦æœ‰ä¸¤ç§æ–¹æ³•ã€‚</p><p>ç¬¬ä¸€ç§æ–¹æ³•æ˜¯åœ¨é¡¹ç›®ç›®å½•ä¸‹æ‰§è¡Œ<code>go get</code>å‘½ä»¤æ‰‹åŠ¨ä¸‹è½½ä¾èµ–çš„åŒ…ï¼š</p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">holiday $ go get <span class="token parameter variable">-u</span> github.com/q1mi/hellogo get: added github.com/q1mi/hello v0.1.1<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre><p>è¿™æ ·é»˜è®¤ä¼šä¸‹è½½æœ€æ–°çš„å‘å¸ƒç‰ˆæœ¬ï¼Œä½ ä¹Ÿå¯ä»¥æŒ‡å®šæƒ³è¦ä¸‹è½½æŒ‡å®šçš„ç‰ˆæœ¬å·çš„ã€‚</p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">holiday $ go get <span class="token parameter variable">-u</span> github.com/q1mi/hello@v0.1.0go: downloading github.com/q1mi/hello v0.1.0go get: downgraded github.com/q1mi/hello v0.1.1 <span class="token operator">=</span><span class="token operator">></span> v0.1.0<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre><p>å¦‚æœä¾èµ–åŒ…æ²¡æœ‰å‘å¸ƒä»»ä½•ç‰ˆæœ¬åˆ™ä¼šæ‹‰å–æœ€æ–°çš„æäº¤ï¼Œæœ€ç»ˆ<code>go.mod</code>ä¸­çš„ä¾èµ–ä¿¡æ¯ä¼šå˜æˆç±»ä¼¼ä¸‹é¢è¿™ç§ç”±é»˜è®¤v0.0.0çš„ç‰ˆæœ¬å·å’Œæœ€æ–°ä¸€æ¬¡commitçš„æ—¶é—´å’Œhashç»„æˆçš„ç‰ˆæœ¬æ ¼å¼ï¼š</p><pre class="line-numbers language-go" data-language="go"><code class="language-go">require github<span class="token punctuation">.</span>com<span class="token operator">/</span>q1mi<span class="token operator">/</span>hello v0<span class="token punctuation">.</span><span class="token number">0.0</span><span class="token operator">-</span><span class="token number">20210218074646</span><span class="token operator">-</span>139b0bcd549d<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>å¦‚æœæƒ³æŒ‡å®šä¸‹è½½æŸä¸ªcommitå¯¹åº”çš„ä»£ç ï¼Œå¯ä»¥ç›´æ¥æŒ‡å®šcommit hashï¼Œä¸è¿‡æ²¡æœ‰å¿…è¦å†™å‡ºå®Œæ•´çš„commit hashï¼Œä¸€èˆ¬å‰7ä½å³å¯ã€‚ä¾‹å¦‚ï¼š</p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">holiday $ go get github.com/q1mi/hello@2ccfaddgo: downloading github.com/q1mi/hello v0.1.2-0.20210219092711-2ccfaddad6a3go get: added github.com/q1mi/hello v0.1.2-0.20210219092711-2ccfaddad6a3<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre><p>æ­¤æ—¶ï¼Œæˆ‘ä»¬æ‰“å¼€<code>go.mod</code>æ–‡ä»¶å°±å¯ä»¥çœ‹åˆ°ä¸‹è½½çš„ä¾èµ–åŒ…åŠç‰ˆæœ¬ä¿¡æ¯éƒ½å·²ç»è¢«è®°å½•ä¸‹æ¥äº†ã€‚</p><pre class="line-numbers language-go" data-language="go"><code class="language-go">module holiday<span class="token keyword">go</span> <span class="token number">1.16</span>require github<span class="token punctuation">.</span>com<span class="token operator">/</span>q1mi<span class="token operator">/</span>hello v0<span class="token punctuation">.</span><span class="token number">1.0</span> <span class="token comment">// indirect</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>è¡Œå°¾çš„<code>indirect</code>è¡¨ç¤ºè¯¥ä¾èµ–åŒ…ä¸ºé—´æ¥ä¾èµ–ï¼Œè¯´æ˜åœ¨å½“å‰ç¨‹åºä¸­çš„æ‰€æœ‰ import è¯­å¥ä¸­æ²¡æœ‰å‘ç°å¼•å…¥è¿™ä¸ªåŒ…ã€‚</p><p>å¦å¤–åœ¨æ‰§è¡Œ<code>go get</code>å‘½ä»¤ä¸‹è½½ä¸€ä¸ªæ–°çš„ä¾èµ–åŒ…æ—¶ä¸€èˆ¬ä¼šé¢å¤–æ·»åŠ <code>-u</code>å‚æ•°ï¼Œå¼ºåˆ¶æ›´æ–°ç°æœ‰ä¾èµ–ã€‚</p><p>ç¬¬äºŒç§æ–¹å¼æ˜¯æˆ‘ä»¬ç›´æ¥ç¼–è¾‘<code>go.mod</code>æ–‡ä»¶ï¼Œå°†ä¾èµ–åŒ…å’Œç‰ˆæœ¬ä¿¡æ¯å†™å…¥è¯¥æ–‡ä»¶ã€‚ä¾‹å¦‚æˆ‘ä»¬ä¿®æ”¹<code>holiday/go.mod</code>æ–‡ä»¶å†…å®¹å¦‚ä¸‹ï¼š</p><pre class="line-numbers language-go" data-language="go"><code class="language-go">module holiday<span class="token keyword">go</span> <span class="token number">1.16</span>require github<span class="token punctuation">.</span>com<span class="token operator">/</span>q1mi<span class="token operator">/</span>hello latest<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>è¡¨ç¤ºå½“å‰é¡¹ç›®éœ€è¦ä½¿ç”¨<code>github.com/q1mi/hello</code>åº“çš„æœ€æ–°ç‰ˆæœ¬ï¼Œç„¶ååœ¨é¡¹ç›®ç›®å½•ä¸‹æ‰§è¡Œ<code>go mod download</code>ä¸‹è½½ä¾èµ–åŒ…ã€‚</p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">holiday $ go mod download<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>å¦‚æœä¸è¾“å‡ºå…¶å®ƒæç¤ºä¿¡æ¯å°±è¯´æ˜ä¾èµ–å·²ç»ä¸‹è½½æˆåŠŸï¼Œæ­¤æ—¶<code>go.mod</code>æ–‡ä»¶å·²ç»å˜æˆå¦‚ä¸‹å†…å®¹ã€‚</p><pre class="line-numbers language-go" data-language="go"><code class="language-go">module holiday<span class="token keyword">go</span> <span class="token number">1.16</span>require github<span class="token punctuation">.</span>com<span class="token operator">/</span>q1mi<span class="token operator">/</span>hello v0<span class="token punctuation">.</span><span class="token number">1.1</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>ä»ä¸­æˆ‘ä»¬å¯ä»¥çŸ¥é“æœ€æ–°çš„ç‰ˆæœ¬å·æ˜¯<code>v0.1.1</code>ã€‚å¦‚æœäº‹å…ˆçŸ¥é“ä¾èµ–åŒ…çš„å…·ä½“ç‰ˆæœ¬å·ï¼Œå¯ä»¥ç›´æ¥åœ¨<code>go.mod</code>ä¸­æŒ‡å®šéœ€è¦çš„ç‰ˆæœ¬ç„¶åå†æ‰§è¡Œ<code>go mod download</code>ä¸‹è½½ã€‚</p><p>è¿™ç§æ–¹æ³•åŒæ ·æ”¯æŒæŒ‡å®šæƒ³è¦ä¸‹è½½çš„commitè¿›è¡Œä¸‹è½½ï¼Œä¾‹å¦‚ç›´æ¥åœ¨<code>go.mod</code>æ–‡ä»¶ä¸­æŒ‰å¦‚ä¸‹æ–¹å¼æŒ‡å®šcommit hashï¼Œè¿™é‡Œåªå†™å‡ºæ¥äº†commit hashçš„å‰7ä½ã€‚</p><pre class="line-numbers language-go" data-language="go"><code class="language-go">require github<span class="token punctuation">.</span>com<span class="token operator">/</span>q1mi<span class="token operator">/</span>hello 2ccfadda<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>æ‰§è¡Œ<code>go mod download</code>ä¸‹è½½å®Œä¾èµ–åï¼Œ<code>go.mod</code>æ–‡ä»¶ä¸­å¯¹åº”çš„ç‰ˆæœ¬ä¿¡æ¯ä¼šè‡ªåŠ¨æ›´æ–°ä¸ºç±»ä¼¼ä¸‹é¢çš„æ ¼å¼ã€‚</p><pre class="line-numbers language-go" data-language="go"><code class="language-go">module holiday<span class="token keyword">go</span> <span class="token number">1.16</span>require github<span class="token punctuation">.</span>com<span class="token operator">/</span>q1mi<span class="token operator">/</span>hello v0<span class="token punctuation">.</span><span class="token number">1.2</span><span class="token operator">-</span><span class="token number">0.20210219092711</span><span class="token operator">-</span>2ccfaddad6a3<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>ä¸‹è½½å¥½è¦ä½¿ç”¨çš„ä¾èµ–åŒ…ä¹‹åï¼Œæˆ‘ä»¬ç°åœ¨å°±å¯ä»¥åœ¨<code>holiday/main.go</code>æ–‡ä»¶ä¸­ä½¿ç”¨è¿™ä¸ªåŒ…äº†ã€‚</p><pre class="line-numbers language-go" data-language="go"><code class="language-go"><span class="token keyword">package</span> main<span class="token keyword">import</span> <span class="token punctuation">(</span><span class="token string">"fmt"</span><span class="token string">"github.com/q1mi/hello"</span><span class="token punctuation">)</span><span class="token keyword">func</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token string">"ç°åœ¨æ˜¯å‡æœŸæ—¶é—´..."</span><span class="token punctuation">)</span>hello<span class="token punctuation">.</span><span class="token function">SayHi</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment">// è°ƒç”¨helloåŒ…çš„SayHiå‡½æ•°</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>å°†ä¸Šè¿°ä»£ç ç¼–è¯‘æ‰§è¡Œï¼Œå°±èƒ½çœ‹åˆ°æ‰§è¡Œç»“æœäº†ã€‚</p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">holiday $ go buildholiday $ ./holidayç°åœ¨æ˜¯å‡æœŸæ—¶é—´<span class="token punctuation">..</span>.ä½ å¥½ï¼Œæˆ‘æ˜¯ä¸ƒç±³ã€‚å¾ˆé«˜å…´è®¤è¯†ä½ ã€‚<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre><p>å½“æˆ‘ä»¬çš„é¡¹ç›®åŠŸèƒ½è¶Šåšè¶Šå¤šï¼Œä»£ç è¶Šæ¥è¶Šå¤šçš„æ—¶å€™ï¼Œé€šå¸¸ä¼šé€‰æ‹©åœ¨é¡¹ç›®å†…éƒ¨æŒ‰åŠŸèƒ½æˆ–ä¸šåŠ¡åˆ’åˆ†æˆå¤šä¸ªä¸åŒåŒ…ã€‚Goè¯­è¨€æ”¯æŒåœ¨ä¸€ä¸ªé¡¹ç›®ï¼ˆprojectï¼‰ä¸‹å®šä¹‰å¤šä¸ªåŒ…ï¼ˆpackageï¼‰ã€‚</p><p>ä¾‹å¦‚ï¼Œæˆ‘ä»¬åœ¨<code>holiday</code>é¡¹ç›®å†…éƒ¨åˆ›å»ºä¸€ä¸ªæ–°çš„packageâ€”â€”<code>summer</code>ï¼Œæ­¤æ—¶æ–°çš„é¡¹ç›®ç›®å½•ç»“æ„å¦‚ä¸‹ï¼š</p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">holidyâ”œâ”€â”€ go.modâ”œâ”€â”€ go.sumâ”œâ”€â”€ main.goâ””â”€â”€ summer    â””â”€â”€ summer.go<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>å…¶ä¸­<code>holiday/summer/summer.go</code>æ–‡ä»¶å†…å®¹å¦‚ä¸‹ï¼š</p><pre class="line-numbers language-go" data-language="go"><code class="language-go"><span class="token keyword">package</span> summer<span class="token keyword">import</span> <span class="token string">"fmt"</span><span class="token comment">// Diving æ½œæ°´...</span><span class="token keyword">func</span> <span class="token function">Diving</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token string">"å¤å¤©å»è¯—å·´ä¸¹æ½œæ°´..."</span><span class="token punctuation">)</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>æ­¤æ—¶æƒ³è¦åœ¨å½“å‰é¡¹ç›®ç›®å½•ä¸‹çš„å…¶ä»–åŒ…æˆ–è€…<code>main.go</code>ä¸­è°ƒç”¨è¿™ä¸ª<code>Diving</code>å‡½æ•°éœ€è¦å¦‚ä½•å¼•å…¥å‘¢ï¼Ÿè¿™é‡Œä»¥åœ¨<code>main.go</code>ä¸­æ¼”ç¤ºè¯¦ç»†çš„è°ƒç”¨è¿‡ç¨‹ä¸ºä¾‹ï¼Œåœ¨é¡¹ç›®å†…å…¶ä»–åŒ…çš„å¼•å…¥æ–¹å¼ç±»ä¼¼ã€‚</p><pre class="line-numbers language-go" data-language="go"><code class="language-go"><span class="token keyword">package</span> main<span class="token keyword">import</span> <span class="token punctuation">(</span><span class="token string">"fmt"</span><span class="token string">"holiday/summer"</span> <span class="token comment">// å¯¼å…¥å½“å‰é¡¹ç›®ä¸‹çš„åŒ…</span><span class="token string">"github.com/q1mi/hello"</span> <span class="token comment">// å¯¼å…¥githubä¸Šç¬¬ä¸‰æ–¹åŒ…</span><span class="token punctuation">)</span><span class="token keyword">func</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token string">"ç°åœ¨æ˜¯å‡æœŸæ—¶é—´..."</span><span class="token punctuation">)</span>hello<span class="token punctuation">.</span><span class="token function">SayHi</span><span class="token punctuation">(</span><span class="token punctuation">)</span>summer<span class="token punctuation">.</span><span class="token function">Diving</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>ä»ä¸Šé¢çš„ç¤ºä¾‹å¯ä»¥çœ‹å‡ºï¼Œé¡¹ç›®ä¸­å®šä¹‰çš„åŒ…éƒ½ä¼šä»¥é¡¹ç›®çš„å¯¼å…¥è·¯å¾„ä¸ºå‰ç¼€ã€‚</p><p>å¦‚æœä½ æƒ³è¦å¯¼å…¥æœ¬åœ°çš„ä¸€ä¸ªåŒ…ï¼Œå¹¶ä¸”è¿™ä¸ªåŒ…ä¹Ÿæ²¡æœ‰å‘å¸ƒåˆ°åˆ°å…¶ä»–ä»»ä½•ä»£ç ä»“åº“ï¼Œè¿™æ—¶å€™ä½ å¯ä»¥åœ¨<code>go.mod</code>æ–‡ä»¶ä¸­ä½¿ç”¨<code>replace</code>è¯­å¥å°†ä¾èµ–ä¸´æ—¶æ›¿æ¢ä¸ºæœ¬åœ°çš„ä»£ç åŒ…ã€‚ä¾‹å¦‚åœ¨æˆ‘çš„ç”µè„‘ä¸Šæœ‰å¦å¤–ä¸€ä¸ªåä¸º<code>liwenzhou.com/overtime</code>çš„é¡¹ç›®ï¼Œå®ƒä½äº<code>holiday</code>é¡¹ç›®åŒçº§ç›®å½•ä¸‹ï¼š</p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">â”œâ”€â”€ holidayâ”‚   â”œâ”€â”€ go.modâ”‚   â”œâ”€â”€ go.sumâ”‚   â”œâ”€â”€ main.goâ”‚   â””â”€â”€ summerâ”‚       â””â”€â”€ summer.goâ””â”€â”€ overtime    â”œâ”€â”€ go.mod    â””â”€â”€ overtime.go<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>ç”±äº<code>liwenzhou.com/overtime</code>åŒ…åªå­˜åœ¨äºæˆ‘æœ¬åœ°ï¼Œå¹¶ä¸èƒ½é€šè¿‡ç½‘ç»œè·å–åˆ°è¿™ä¸ªä»£ç åŒ…ï¼Œè¿™ä¸ªæ—¶å€™åº”è¯¥å¦‚ä½•åœ¨<code>holidy</code>é¡¹ç›®ä¸­å¼•å…¥å®ƒå‘¢ï¼Ÿ</p><p>æˆ‘ä»¬å¯ä»¥åœ¨<code>holidy/go.mod</code>æ–‡ä»¶ä¸­æ­£å¸¸å¼•å…¥<code>liwenzhou.com/overtime</code>åŒ…ï¼Œç„¶ååƒä¸‹é¢çš„ç¤ºä¾‹é‚£æ ·ä½¿ç”¨<code>replace</code>è¯­å¥å°†è¿™ä¸ªä¾èµ–æ›¿æ¢ä¸ºä½¿ç”¨ç›¸å¯¹è·¯å¾„è¡¨ç¤ºçš„æœ¬åœ°åŒ…ã€‚</p><pre class="line-numbers language-go" data-language="go"><code class="language-go">module holiday<span class="token keyword">go</span> <span class="token number">1.16</span>require github<span class="token punctuation">.</span>com<span class="token operator">/</span>q1mi<span class="token operator">/</span>hello v0<span class="token punctuation">.</span><span class="token number">1.1</span>require liwenzhou<span class="token punctuation">.</span>com<span class="token operator">/</span>overtime v0<span class="token punctuation">.</span><span class="token number">0.0</span>replace liwenzhou<span class="token punctuation">.</span>com<span class="token operator">/</span>overtime  <span class="token operator">=</span><span class="token operator">></span> <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token operator">/</span>overtime<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>è¿™æ ·ï¼Œæˆ‘ä»¬å°±å¯ä»¥åœ¨<code>holiday/main.go</code>ä¸‹æ­£å¸¸å¼•å…¥å¹¶ä½¿ç”¨<code>overtime</code>åŒ…äº†ã€‚</p><pre class="line-numbers language-go" data-language="go"><code class="language-go"><span class="token keyword">package</span> main<span class="token keyword">import</span> <span class="token punctuation">(</span><span class="token string">"fmt"</span><span class="token string">"holiday/summer"</span> <span class="token comment">// å¯¼å…¥å½“å‰é¡¹ç›®ä¸‹çš„åŒ…</span><span class="token string">"liwenzhou.com/overtime"</span> <span class="token comment">// é€šè¿‡replaceå¯¼å…¥çš„æœ¬åœ°åŒ…</span><span class="token string">"github.com/q1mi/hello"</span> <span class="token comment">// å¯¼å…¥githubä¸Šç¬¬ä¸‰æ–¹åŒ…</span><span class="token punctuation">)</span><span class="token keyword">func</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token string">"ç°åœ¨æ˜¯å‡æœŸæ—¶é—´..."</span><span class="token punctuation">)</span>hello<span class="token punctuation">.</span><span class="token function">SayHi</span><span class="token punctuation">(</span><span class="token punctuation">)</span>summer<span class="token punctuation">.</span><span class="token function">Diving</span><span class="token punctuation">(</span><span class="token punctuation">)</span>overtime<span class="token punctuation">.</span><span class="token function">Do</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>æˆ‘ä»¬ä¹Ÿç»å¸¸ä½¿ç”¨<code>replace</code>å°†é¡¹ç›®ä¾èµ–ä¸­çš„æŸä¸ªåŒ…ï¼Œæ›¿æ¢ä¸ºå…¶ä»–ç‰ˆæœ¬çš„ä»£ç åŒ…æˆ–æˆ‘ä»¬è‡ªå·±ä¿®æ”¹åçš„ä»£ç åŒ…ã€‚</p><p><strong>go.modæ–‡ä»¶</strong></p><p><code>go.mod</code>æ–‡ä»¶ä¸­è®°å½•äº†å½“å‰é¡¹ç›®ä¸­æ‰€æœ‰ä¾èµ–åŒ…çš„ç›¸å…³ä¿¡æ¯ï¼Œå£°æ˜ä¾èµ–çš„æ ¼å¼å¦‚ä¸‹ï¼š</p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">require module/path v1.2.3<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>å…¶ä¸­ï¼š</p><ul><li>requireï¼šå£°æ˜ä¾èµ–çš„å…³é”®å­—</li><li>module&#x2F;pathï¼šä¾èµ–åŒ…çš„å¼•å…¥è·¯å¾„</li><li>v1.2.3ï¼šä¾èµ–åŒ…çš„ç‰ˆæœ¬å·ã€‚æ”¯æŒä»¥ä¸‹å‡ ç§æ ¼å¼ï¼š<ul><li>latestï¼šæœ€æ–°ç‰ˆæœ¬</li><li>v1.0.0ï¼šè¯¦ç»†ç‰ˆæœ¬å·</li><li>commit hashï¼šæŒ‡å®šæŸæ¬¡commit hash</li></ul></li></ul><p>å¼•å…¥æŸäº›æ²¡æœ‰å‘å¸ƒè¿‡<code>tag</code>ç‰ˆæœ¬æ ‡è¯†çš„ä¾èµ–åŒ…æ—¶ï¼Œ<code>go.mod</code>ä¸­è®°å½•çš„ä¾èµ–ç‰ˆæœ¬ä¿¡æ¯å°±ä¼šå‡ºç°ç±»ä¼¼<code>v0.0.0-20210218074646-139b0bcd549d</code>çš„æ ¼å¼ï¼Œç”±ç‰ˆæœ¬å·ã€commitæ—¶é—´å’Œcommitçš„hashå€¼ç»„æˆã€‚</p><p><img src="https://zhangtq-blog.oss-cn-hangzhou.aliyuncs.com/content_picture/module_version_info.png" alt="go moduleç”Ÿæˆçš„ç‰ˆæœ¬ä¿¡æ¯ç»„æˆç¤ºæ„å›¾"></p><p><strong>go.sumæ–‡ä»¶</strong></p><p>ä½¿ç”¨go moduleä¸‹è½½äº†ä¾èµ–åï¼Œé¡¹ç›®ç›®å½•ä¸‹è¿˜ä¼šç”Ÿæˆä¸€ä¸ª<code>go.sum</code>æ–‡ä»¶ï¼Œè¿™ä¸ªæ–‡ä»¶ä¸­è¯¦ç»†è®°å½•äº†å½“å‰é¡¹ç›®ä¸­å¼•å…¥çš„ä¾èµ–åŒ…çš„ä¿¡æ¯åŠå…¶hash å€¼ã€‚<code>go.sum</code>æ–‡ä»¶å†…å®¹é€šå¸¸æ˜¯ä»¥ç±»ä¼¼ä¸‹é¢çš„æ ¼å¼å‡ºç°ã€‚</p><pre class="line-numbers language-go" data-language="go"><code class="language-go"><span class="token operator">&lt;</span>module<span class="token operator">></span> <span class="token operator">&lt;</span>version<span class="token operator">></span><span class="token operator">/</span><span class="token keyword">go</span><span class="token punctuation">.</span>mod <span class="token operator">&lt;</span>hash<span class="token operator">></span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>æˆ–è€…</p><pre class="line-numbers language-go" data-language="go"><code class="language-go"><span class="token operator">&lt;</span>module<span class="token operator">></span> <span class="token operator">&lt;</span>version<span class="token operator">></span> <span class="token operator">&lt;</span>hash<span class="token operator">></span><span class="token operator">&lt;</span>module<span class="token operator">></span> <span class="token operator">&lt;</span>version<span class="token operator">></span><span class="token operator">/</span><span class="token keyword">go</span><span class="token punctuation">.</span>mod <span class="token operator">&lt;</span>hash<span class="token operator">></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre><p>ä¸åŒäºå…¶ä»–è¯­è¨€æä¾›çš„åŸºäºä¸­å¿ƒçš„åŒ…ç®¡ç†æœºåˆ¶ï¼Œä¾‹å¦‚ npm å’Œ pypiç­‰ï¼ŒGoå¹¶æ²¡æœ‰æä¾›ä¸€ä¸ªä¸­å¤®ä»“åº“æ¥ç®¡ç†æ‰€æœ‰ä¾èµ–åŒ…ï¼Œè€Œæ˜¯é‡‡ç”¨åˆ†å¸ƒå¼çš„æ–¹å¼æ¥ç®¡ç†åŒ…ã€‚ä¸ºäº†é˜²æ­¢ä¾èµ–åŒ…è¢«éæ³•ç¯¡æ”¹ï¼ŒGo module å¼•å…¥äº†<code>go.sum</code>æœºåˆ¶æ¥å¯¹ä¾èµ–åŒ…è¿›è¡Œæ ¡éªŒã€‚</p><p><strong>ä¾èµ–ä¿å­˜ä½ç½®</strong></p><p>Go module ä¼šæŠŠä¸‹è½½åˆ°æœ¬åœ°çš„ä¾èµ–åŒ…ä¼šä»¥ç±»ä¼¼ä¸‹é¢çš„å½¢å¼ä¿å­˜åœ¨ <code>$GOPATH/pkg/mod</code>ç›®å½•ä¸‹ï¼Œæ¯ä¸ªä¾èµ–åŒ…éƒ½ä¼šå¸¦æœ‰ç‰ˆæœ¬å·è¿›è¡ŒåŒºåˆ†ï¼Œè¿™æ ·å°±å…è®¸åœ¨æœ¬åœ°å­˜åœ¨åŒä¸€ä¸ªåŒ…çš„å¤šä¸ªä¸åŒç‰ˆæœ¬ã€‚</p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">modâ”œâ”€â”€ cacheâ”œâ”€â”€ cloud.google.comâ”œâ”€â”€ github.com    â””â”€â”€q1mi          â”œâ”€â”€ hello@v0.0.0-20210218074646-139b0bcd549d          â”œâ”€â”€ hello@v0.1.1          â””â”€â”€ hello@v0.1.0<span class="token punctuation">..</span>.<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>å¦‚æœæƒ³æ¸…é™¤æ‰€æœ‰æœ¬åœ°å·²ç¼“å­˜çš„ä¾èµ–åŒ…æ•°æ®ï¼Œå¯ä»¥æ‰§è¡Œ <code>go clean -modcache</code> å‘½ä»¤ã€‚</p><h3 id="ä½¿ç”¨go-moduleå‘å¸ƒåŒ…"><a href="#ä½¿ç”¨go-moduleå‘å¸ƒåŒ…" class="headerlink" title="ä½¿ç”¨go moduleå‘å¸ƒåŒ…"></a>ä½¿ç”¨go moduleå‘å¸ƒåŒ…</h3><p>åœ¨ä¸Šé¢çš„å°èŠ‚ä¸­æˆ‘ä»¬å­¦ä¹ äº†å¦‚ä½•åœ¨é¡¹ç›®ä¸­å¼•å…¥åˆ«äººæä¾›çš„ä¾èµ–åŒ…ï¼Œé‚£ä¹ˆå½“æˆ‘ä»¬æƒ³è¦åœ¨ç¤¾åŒºå‘å¸ƒä¸€ä¸ªè‡ªå·±ç¼–å†™çš„ä»£ç åŒ…æˆ–è€…åœ¨å…¬å¸å†…éƒ¨ç¼–å†™ä¸€ä¸ªä¾›å†…éƒ¨ä½¿ç”¨çš„å…¬ç”¨ç»„ä»¶æ—¶ï¼Œæˆ‘ä»¬è¯¥æ€ä¹ˆåšå‘¢ï¼Ÿæ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬å°±ä¸€èµ·ç¼–å†™ä¸€ä¸ªä»£ç åŒ…å¹¶å°†å®ƒå‘å¸ƒåˆ°<code>github.com</code>ä»“åº“ï¼Œè®©å®ƒèƒ½å¤Ÿè¢«å…¨çƒçš„Goè¯­è¨€å¼€å‘è€…ä½¿ç”¨ã€‚</p><p>æˆ‘ä»¬é¦–å…ˆåœ¨è‡ªå·±çš„ github è´¦å·ä¸‹æ–°å»ºä¸€ä¸ªé¡¹ç›®ï¼Œå¹¶æŠŠå®ƒä¸‹è½½åˆ°æœ¬åœ°ã€‚æˆ‘è¿™é‡Œå°±ä»¥åˆ›å»ºå’Œå‘å¸ƒä¸€ä¸ªåä¸º<code>hello</code>çš„é¡¹ç›®ä¸ºä¾‹è¿›è¡Œæ¼”ç¤ºã€‚è¿™ä¸ª<code>hello</code>åŒ…å°†å¯¹å¤–æä¾›ä¸€ä¸ªåä¸º<code>SayHi</code>çš„å‡½æ•°ï¼Œå®ƒçš„ä½œç”¨éå¸¸ç®€å•å°±æ˜¯å‘è°ƒç”¨è€…å‘å»é—®å€™ã€‚</p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">$ <span class="token function">git</span> clone https://github.com/q1mi/hello$ <span class="token builtin class-name">cd</span> hello<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre><p>æˆ‘ä»¬å½“å‰ä½äº<code>hello</code>é¡¹ç›®ç›®å½•ä¸‹ï¼Œæ‰§è¡Œä¸‹é¢çš„å‘½ä»¤åˆå§‹åŒ–é¡¹ç›®ï¼Œåˆ›å»º<code>go.mod</code>æ–‡ä»¶ã€‚éœ€è¦æ³¨æ„çš„æ˜¯è¿™é‡Œå®šä¹‰é¡¹ç›®çš„å¼•å…¥è·¯å¾„ä¸º<code>github.com/q1mi/hello</code>ï¼Œè¯»è€…åœ¨è‡ªè¡Œæµ‹è¯•æ—¶éœ€è¦å°†è¿™éƒ¨åˆ†æ›¿æ¢ä¸ºè‡ªå·±çš„ä»“åº“è·¯å¾„ã€‚</p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">hello $ go mod init github.com/q1mi/hellogo: creating new go.mod: module github.com/q1mi/hello<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre><p>æ¥ä¸‹æ¥æˆ‘ä»¬åœ¨è¯¥é¡¹ç›®æ ¹ç›®å½•ä¸‹åˆ›å»º <code>hello.go</code> æ–‡ä»¶ï¼Œæ·»åŠ ä¸‹é¢çš„å†…å®¹ï¼š</p><pre class="line-numbers language-go" data-language="go"><code class="language-go"><span class="token keyword">package</span> hello<span class="token keyword">import</span> <span class="token string">"fmt"</span><span class="token keyword">func</span> <span class="token function">SayHi</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token string">"ä½ å¥½ï¼Œæˆ‘æ˜¯ä¸ƒç±³ã€‚å¾ˆé«˜å…´è®¤è¯†ä½ ã€‚"</span><span class="token punctuation">)</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>ç„¶åå°†è¯¥é¡¹ç›®çš„ä»£ç  push åˆ°ä»“åº“çš„è¿œç«¯åˆ†æ”¯ï¼Œè¿™æ ·å°±å¯¹å¤–å‘å¸ƒäº†ä¸€ä¸ªGoåŒ…ã€‚å…¶ä»–çš„å¼€å‘è€…å¯ä»¥é€šè¿‡<code>github.com/q1mi/hello</code>è¿™ä¸ªå¼•å…¥è·¯å¾„ä¸‹è½½å¹¶ä½¿ç”¨è¿™ä¸ªåŒ…äº†ã€‚</p><p>ä¸€ä¸ªè®¾è®¡å®Œå–„çš„åŒ…åº”è¯¥åŒ…å«å¼€æºè®¸å¯è¯åŠæ–‡æ¡£ç­‰å†…å®¹ï¼Œå¹¶ä¸”æˆ‘ä»¬è¿˜åº”è¯¥å°½å¿ƒç»´æŠ¤å¹¶é€‚æ—¶å‘å¸ƒé€‚å½“çš„ç‰ˆæœ¬ã€‚github ä¸Šå‘å¸ƒç‰ˆæœ¬å·ä½¿ç”¨git tagä¸ºä»£ç åŒ…æ‰“ä¸Šæ ‡ç­¾å³å¯ã€‚</p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">hello $ <span class="token function">git</span> tag <span class="token parameter variable">-a</span> v0.1.0 <span class="token parameter variable">-m</span> <span class="token string">"release version v0.1.0"</span>hello $ <span class="token function">git</span> push origin v0.1.0<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre><p>ç»è¿‡ä¸Šé¢çš„æ“ä½œæˆ‘ä»¬å°±å‘å¸ƒäº†ä¸€ä¸ªç‰ˆæœ¬å·ä¸º<code>v0.1.0</code>çš„ç‰ˆæœ¬ã€‚</p><p>Go modulesä¸­å»ºè®®ä½¿ç”¨è¯­ä¹‰åŒ–ç‰ˆæœ¬æ§åˆ¶ï¼Œå…¶å»ºè®®çš„ç‰ˆæœ¬å·æ ¼å¼å¦‚ä¸‹ï¼š</p><p><img src="https://zhangtq-blog.oss-cn-hangzhou.aliyuncs.com/content_picture/version_number.png" alt="è¯­ä¹‰åŒ–ç‰ˆæœ¬å·ç¤ºæ„å›¾"></p><p>å…¶ä¸­ï¼š</p><ul><li>ä¸»ç‰ˆæœ¬å·ï¼šå‘å¸ƒäº†ä¸å…¼å®¹çš„ç‰ˆæœ¬è¿­ä»£æ—¶é€’å¢ï¼ˆbreaking changesï¼‰ã€‚</li><li>æ¬¡ç‰ˆæœ¬å·ï¼šå‘å¸ƒäº†åŠŸèƒ½æ€§æ›´æ–°æ—¶é€’å¢ã€‚</li><li>ä¿®è®¢å·ï¼šå‘å¸ƒäº†bugä¿®å¤ç±»æ›´æ–°æ—¶é€’å¢ã€‚</li></ul><p><strong>å‘å¸ƒæ–°çš„ä¸»ç‰ˆæœ¬</strong></p><p>ç°åœ¨æˆ‘ä»¬çš„<code>hello</code>é¡¹ç›®è¦è¿›è¡Œä¸ä¹‹å‰ç‰ˆæœ¬ä¸å…¼å®¹çš„æ›´æ–°ï¼Œæˆ‘ä»¬è®¡åˆ’è®©<code>SayHi</code>å‡½æ•°æ”¯æŒå‘æŒ‡å®šäººå‘å‡ºé—®å€™ã€‚æ›´æ–°åçš„<code>SayHi</code>å‡½æ•°å†…å®¹å¦‚ä¸‹ï¼š</p><pre class="line-numbers language-go" data-language="go"><code class="language-go"><span class="token keyword">package</span> hello<span class="token keyword">import</span> <span class="token string">"fmt"</span><span class="token comment">// SayHi å‘æŒ‡å®šäººæ‰“æ‹›å‘¼çš„å‡½æ•°</span><span class="token keyword">func</span> <span class="token function">SayHi</span><span class="token punctuation">(</span>name <span class="token builtin">string</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>fmt<span class="token punctuation">.</span><span class="token function">Printf</span><span class="token punctuation">(</span><span class="token string">"ä½ å¥½%sï¼Œæˆ‘æ˜¯ä¸ƒç±³ã€‚å¾ˆé«˜å…´è®¤è¯†ä½ ã€‚\n"</span><span class="token punctuation">,</span> name<span class="token punctuation">)</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>ç”±äºè¿™æ¬¡æ”¹åŠ¨å·¨å¤§ï¼ˆä¿®æ”¹äº†å‡½æ•°ä¹‹å‰çš„è°ƒç”¨è§„åˆ™ï¼‰ï¼Œå¯¹ä¹‹å‰ä½¿ç”¨è¯¥åŒ…ä½œä¸ºä¾èµ–çš„ç”¨æˆ·å½±å“å·¨å¤§ã€‚å› æ­¤æˆ‘ä»¬éœ€è¦å‘å¸ƒä¸€ä¸ªä¸»ç‰ˆæœ¬å·é€’å¢çš„<code>v2</code>ç‰ˆæœ¬ã€‚åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œæˆ‘ä»¬é€šå¸¸ä¼šä¿®æ”¹å½“å‰åŒ…çš„å¼•å…¥è·¯å¾„ï¼Œåƒä¸‹é¢çš„ç¤ºä¾‹ä¸€æ ·ä¸ºå¼•å…¥è·¯å¾„æ·»åŠ ç‰ˆæœ¬åç¼€ã€‚</p><pre class="line-numbers language-go" data-language="go"><code class="language-go"><span class="token comment">// hello/go.mod</span>module github<span class="token punctuation">.</span>com<span class="token operator">/</span>q1mi<span class="token operator">/</span>hello<span class="token operator">/</span>v2<span class="token keyword">go</span> <span class="token number">1.16</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>æŠŠä¿®æ”¹åçš„ä»£ç æäº¤ï¼š</p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">hello $ <span class="token function">git</span> <span class="token function">add</span> <span class="token builtin class-name">.</span>hello $ <span class="token function">git</span> commit <span class="token parameter variable">-m</span> <span class="token string">"feat: SayHiç°åœ¨æ”¯æŒç»™æŒ‡å®šäººæ‰“æ‹›å‘¼å•¦"</span>hello $ <span class="token function">git</span> push<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre><p>æ‰“å¥½ tag æ¨é€åˆ°è¿œç¨‹ä»“åº“ã€‚</p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">hello $ <span class="token function">git</span> tag <span class="token parameter variable">-a</span> v2.0.0 <span class="token parameter variable">-m</span> <span class="token string">"release version v2.0.0"</span>hello $ <span class="token function">git</span> push origin v2.0.0<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre><p>è¿™æ ·åœ¨ä¸å½±å“ä½¿ç”¨æ—§ç‰ˆæœ¬çš„ç”¨æˆ·çš„å‰æä¸‹ï¼Œæˆ‘ä»¬æ–°çš„ç‰ˆæœ¬ä¹Ÿå‘å¸ƒå‡ºå»äº†ã€‚æƒ³è¦ä½¿ç”¨<code>v2</code>ç‰ˆæœ¬çš„ä»£ç åŒ…çš„ç”¨æˆ·åªéœ€æŒ‰ä¿®æ”¹åçš„å¼•å…¥è·¯å¾„ä¸‹è½½å³å¯ã€‚</p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">go get github.com/q1mi/hello/v2@v2.0.0<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>åœ¨ä»£ç ä¸­ä½¿ç”¨çš„è¿‡ç¨‹ä¸ä¹‹å‰ç±»ä¼¼ï¼Œåªæ˜¯éœ€è¦æ³¨æ„å¼•å…¥è·¯å¾„è¦æ·»åŠ  v2 ç‰ˆæœ¬åç¼€ã€‚</p><pre class="line-numbers language-go" data-language="go"><code class="language-go"><span class="token keyword">package</span> main<span class="token keyword">import</span> <span class="token punctuation">(</span><span class="token string">"fmt"</span><span class="token string">"github.com/q1mi/hello/v2"</span> <span class="token comment">// å¼•å…¥v2ç‰ˆæœ¬</span><span class="token punctuation">)</span><span class="token keyword">func</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token string">"ç°åœ¨æ˜¯å‡æœŸæ—¶é—´..."</span><span class="token punctuation">)</span>hello<span class="token punctuation">.</span><span class="token function">SayHi</span><span class="token punctuation">(</span><span class="token string">"å¼ ä¸‰"</span><span class="token punctuation">)</span> <span class="token comment">// v2ç‰ˆæœ¬çš„SayHiå‡½æ•°éœ€è¦ä¼ å…¥å­—ç¬¦ä¸²å‚æ•°</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p><strong>åºŸå¼ƒå·²å‘å¸ƒç‰ˆæœ¬</strong></p><p>å¦‚æœæŸä¸ªå‘å¸ƒçš„ç‰ˆæœ¬å­˜åœ¨è‡´å‘½ç¼ºé™·ä¸å†æƒ³è®©ç”¨æˆ·ä½¿ç”¨æ—¶ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨<code>retract</code>å£°æ˜åºŸå¼ƒçš„ç‰ˆæœ¬ã€‚ä¾‹å¦‚æˆ‘ä»¬åœ¨<code>hello/go.mod</code>æ–‡ä»¶ä¸­æŒ‰å¦‚ä¸‹æ–¹å¼å£°æ˜å³å¯å¯¹å¤–åºŸå¼ƒ<code>v0.1.2</code>ç‰ˆæœ¬ã€‚</p><pre class="line-numbers language-go" data-language="go"><code class="language-go">module github<span class="token punctuation">.</span>com<span class="token operator">/</span>q1mi<span class="token operator">/</span>hello<span class="token keyword">go</span> <span class="token number">1.16</span>retract v0<span class="token punctuation">.</span><span class="token number">1.2</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>ç”¨æˆ·ä½¿ç”¨go getä¸‹è½½<code>v0.1.2</code>ç‰ˆæœ¬æ—¶å°±ä¼šæ”¶åˆ°æç¤ºï¼Œå‚¬ä¿ƒå…¶å‡çº§åˆ°å…¶ä»–ç‰ˆæœ¬ã€‚</p><h2 id="æ¥å£"><a href="#æ¥å£" class="headerlink" title="æ¥å£"></a>æ¥å£</h2><h3 id="æ¥å£å®šä¹‰"><a href="#æ¥å£å®šä¹‰" class="headerlink" title="æ¥å£å®šä¹‰"></a>æ¥å£å®šä¹‰</h3><p>æ¯ä¸ªæ¥å£ç±»å‹ç”±ä»»æ„ä¸ªæ–¹æ³•ç­¾åç»„æˆï¼Œæ¥å£çš„å®šä¹‰æ ¼å¼å¦‚ä¸‹ï¼š</p><pre class="line-numbers language-go" data-language="go"><code class="language-go"><span class="token keyword">type</span> æ¥å£ç±»å‹å <span class="token keyword">interface</span><span class="token punctuation">&#123;</span>    æ–¹æ³•å<span class="token function">1</span><span class="token punctuation">(</span> å‚æ•°åˆ—è¡¨<span class="token number">1</span> <span class="token punctuation">)</span> è¿”å›å€¼åˆ—è¡¨<span class="token number">1</span>    æ–¹æ³•å<span class="token function">2</span><span class="token punctuation">(</span> å‚æ•°åˆ—è¡¨<span class="token number">2</span> <span class="token punctuation">)</span> è¿”å›å€¼åˆ—è¡¨<span class="token number">2</span>    â€¦<span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>å…¶ä¸­ï¼š</p><ul><li><p>æ¥å£ç±»å‹åï¼šGoè¯­è¨€çš„æ¥å£åœ¨å‘½åæ—¶ï¼Œä¸€èˆ¬ä¼šåœ¨å•è¯åé¢æ·»åŠ <code>er</code>ï¼Œå¦‚æœ‰å†™æ“ä½œçš„æ¥å£å«<code>Writer</code>ï¼Œæœ‰å…³é—­æ“ä½œçš„æ¥å£å«<code>closer</code>ç­‰ã€‚æ¥å£åæœ€å¥½è¦èƒ½çªå‡ºè¯¥æ¥å£çš„ç±»å‹å«ä¹‰ã€‚</p></li><li><p>æ–¹æ³•åï¼šå½“æ–¹æ³•åé¦–å­—æ¯æ˜¯å¤§å†™ä¸”è¿™ä¸ªæ¥å£ç±»å‹åé¦–å­—æ¯ä¹Ÿæ˜¯å¤§å†™æ—¶ï¼Œè¿™ä¸ªæ–¹æ³•å¯ä»¥è¢«æ¥å£æ‰€åœ¨çš„åŒ…ï¼ˆpackageï¼‰ä¹‹å¤–çš„ä»£ç è®¿é—®ã€‚</p></li><li><p>å‚æ•°åˆ—è¡¨ã€è¿”å›å€¼åˆ—è¡¨ï¼šå‚æ•°åˆ—è¡¨å’Œè¿”å›å€¼åˆ—è¡¨ä¸­çš„å‚æ•°å˜é‡åå¯ä»¥çœç•¥ã€‚</p></li><li><p>ä¸¾ä¸ªä¾‹å­ï¼Œå®šä¹‰ä¸€ä¸ªåŒ…å«<code>Write</code>æ–¹æ³•çš„<code>Writer</code>æ¥å£ã€‚</p><pre class="line-numbers language-go" data-language="go"><code class="language-go"><span class="token keyword">type</span> Writer <span class="token keyword">interface</span><span class="token punctuation">&#123;</span>    <span class="token function">Write</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token builtin">byte</span><span class="token punctuation">)</span> <span class="token builtin">error</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre><p>å½“ä½ çœ‹åˆ°ä¸€ä¸ª<code>Writer</code>æ¥å£ç±»å‹çš„å€¼æ—¶ï¼Œä½ ä¸çŸ¥é“å®ƒæ˜¯ä»€ä¹ˆï¼Œå”¯ä¸€çŸ¥é“çš„å°±æ˜¯å¯ä»¥é€šè¿‡è°ƒç”¨å®ƒçš„<code>Write</code>æ–¹æ³•æ¥åšä¸€äº›äº‹æƒ…ã€‚</p></li></ul><h3 id="å®ç°æ¥å£çš„æ¡ä»¶"><a href="#å®ç°æ¥å£çš„æ¡ä»¶" class="headerlink" title="å®ç°æ¥å£çš„æ¡ä»¶"></a>å®ç°æ¥å£çš„æ¡ä»¶</h3><p>æ¥å£å°±æ˜¯è§„å®šäº†ä¸€ä¸ª<strong>éœ€è¦å®ç°çš„æ–¹æ³•åˆ—è¡¨</strong>ï¼Œåœ¨ Go è¯­è¨€ä¸­ä¸€ä¸ªç±»å‹åªè¦å®ç°äº†æ¥å£ä¸­è§„å®šçš„æ‰€æœ‰æ–¹æ³•ï¼Œé‚£ä¹ˆæˆ‘ä»¬å°±ç§°å®ƒå®ç°äº†è¿™ä¸ªæ¥å£ã€‚</p><p>æˆ‘ä»¬å®šä¹‰çš„<code>Singer</code>æ¥å£ç±»å‹ï¼Œå®ƒåŒ…å«ä¸€ä¸ª<code>Sing</code>æ–¹æ³•ã€‚</p><pre class="line-numbers language-go" data-language="go"><code class="language-go"><span class="token comment">// Singer æ¥å£</span><span class="token keyword">type</span> Singer <span class="token keyword">interface</span> <span class="token punctuation">&#123;</span><span class="token function">Sing</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre><p>æˆ‘ä»¬æœ‰ä¸€ä¸ª<code>Bird</code>ç»“æ„ä½“ç±»å‹å¦‚ä¸‹ã€‚</p><pre class="line-numbers language-go" data-language="go"><code class="language-go"><span class="token keyword">type</span> Bird <span class="token keyword">struct</span> <span class="token punctuation">&#123;</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>å› ä¸º<code>Singer</code>æ¥å£åªåŒ…å«ä¸€ä¸ª<code>Sing</code>æ–¹æ³•ï¼Œæ‰€ä»¥åªéœ€è¦ç»™<code>Bird</code>ç»“æ„ä½“æ·»åŠ ä¸€ä¸ª<code>Sing</code>æ–¹æ³•å°±å¯ä»¥æ»¡è¶³<code>Singer</code>æ¥å£çš„è¦æ±‚ã€‚</p><pre class="line-numbers language-go" data-language="go"><code class="language-go"><span class="token comment">// Sing Birdç±»å‹çš„Singæ–¹æ³•</span><span class="token keyword">func</span> <span class="token punctuation">(</span>b Bird<span class="token punctuation">)</span> <span class="token function">Sing</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token string">"æ±ªæ±ªæ±ª"</span><span class="token punctuation">)</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre><p>è¿™æ ·å°±ç§°ä¸º<code>Bird</code>å®ç°äº†<code>Singer</code>æ¥å£ã€‚</p><h3 id="ä¸ºä»€ä¹ˆè¦ä½¿ç”¨æ¥å£"><a href="#ä¸ºä»€ä¹ˆè¦ä½¿ç”¨æ¥å£" class="headerlink" title="ä¸ºä»€ä¹ˆè¦ä½¿ç”¨æ¥å£"></a>ä¸ºä»€ä¹ˆè¦ä½¿ç”¨æ¥å£</h3><p>ç°åœ¨å‡è®¾æˆ‘ä»¬æœ‰è®¸å¤šå°åŠ¨ç‰©ï¼Œä¸‹é¢çš„ä»£ç å®šä¹‰äº†çŒ«å’Œç‹—ï¼Œä»–ä»¬é¥¿äº†éƒ½ä¼šå«</p><pre class="line-numbers language-go" data-language="go"><code class="language-go"><span class="token keyword">package</span> main<span class="token keyword">import</span> <span class="token string">"fmt"</span><span class="token keyword">type</span> Cat <span class="token keyword">struct</span><span class="token punctuation">&#123;</span><span class="token punctuation">&#125;</span><span class="token keyword">func</span> <span class="token punctuation">(</span>c Cat<span class="token punctuation">)</span> <span class="token function">Say</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>    fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token string">"çŒ«åœ¨å«"</span><span class="token punctuation">)</span><span class="token punctuation">&#125;</span><span class="token keyword">type</span> Dog <span class="token keyword">struct</span><span class="token punctuation">&#123;</span><span class="token punctuation">&#125;</span><span class="token keyword">func</span> <span class="token punctuation">(</span>d Dog<span class="token punctuation">)</span> <span class="token function">Say</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>    fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token string">"ç‹—åœ¨å«"</span><span class="token punctuation">)</span><span class="token punctuation">&#125;</span><span class="token keyword">func</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>    c <span class="token operator">:=</span><span class="token function">Cat</span><span class="token punctuation">(</span><span class="token punctuation">)</span>    c<span class="token punctuation">.</span><span class="token function">Say</span><span class="token punctuation">(</span><span class="token punctuation">)</span>    d<span class="token operator">:=</span> <span class="token function">Dog</span><span class="token punctuation">(</span><span class="token punctuation">)</span>    d<span class="token punctuation">.</span><span class="token function">Say</span><span class="token punctuation">(</span><span class="token punctuation">)</span>    <span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>åœ¨è¿™ä¸ªæ—¶å€™ï¼Œåˆè·‘æ¥äº†ä¸€ç›´ç¾Šï¼Œç¾Šä¹Ÿä¼šå«</p><pre class="line-numbers language-go" data-language="go"><code class="language-go"><span class="token keyword">type</span> Sheep <span class="token keyword">struct</span><span class="token punctuation">&#123;</span><span class="token punctuation">&#125;</span><span class="token keyword">func</span> <span class="token punctuation">(</span>s Sheep<span class="token punctuation">)</span> <span class="token function">Say</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>    fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token string">"ç¾Šåœ¨å«"</span><span class="token punctuation">)</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>æˆ‘ä»¬æ¥ä¸‹æ¥å®šä¹‰ä¸€ä¸ªé¥¿è‚šå­çš„åœºæ™¯</p><pre class="line-numbers language-go" data-language="go"><code class="language-go"><span class="token comment">// MakeCatHungry çŒ«é¥¿äº†ä¼šå–µå–µå–µ~</span><span class="token keyword">func</span> <span class="token function">MakeCatHungry</span><span class="token punctuation">(</span>c Cat<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>c<span class="token punctuation">.</span><span class="token function">Say</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">&#125;</span><span class="token comment">// MakeSheepHungry ç¾Šé¥¿äº†ä¼šå’©å’©å’©~</span><span class="token keyword">func</span> <span class="token function">MakeSheepHungry</span><span class="token punctuation">(</span>s Sheep<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>s<span class="token punctuation">.</span><span class="token function">Say</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>æ¥ä¸‹æ¥ä¼šæœ‰è¶Šæ¥è¶Šå¤šçš„å°åŠ¨ç‰©è·‘è¿‡æ¥ï¼Œæˆ‘ä»¬çš„ä»£ç ä¸–ç•Œè¯¥æ€ä¹ˆæ‹“å±•å‘¢ï¼Ÿ</p><p>åœ¨é¥¿è‚šå­è¿™ä¸ªåœºæ™¯ä¸‹ï¼Œæˆ‘ä»¬å¯ä¸å¯ä»¥æŠŠæ‰€æœ‰åŠ¨ç‰©éƒ½å½“æˆä¸€ä¸ªâ€œä¼šå«çš„ç±»å‹â€æ¥å¤„ç†å‘¢ï¼Ÿå½“ç„¶å¯ä»¥ï¼ä½¿ç”¨æ¥å£ç±»å‹å°±å¯ä»¥å®ç°è¿™ä¸ªç›®æ ‡ã€‚ æˆ‘ä»¬çš„ä»£ç å…¶å®å¹¶ä¸å…³å¿ƒç©¶ç«Ÿæ˜¯ä»€ä¹ˆåŠ¨ç‰©åœ¨å«ï¼Œæˆ‘ä»¬åªæ˜¯åœ¨ä»£ç ä¸­è°ƒç”¨å®ƒçš„<code>Say()</code>æ–¹æ³•ï¼Œè¿™å°±è¶³å¤Ÿäº†ã€‚</p><p>æˆ‘ä»¬å¯ä»¥çº¦å®šä¸€ä¸ª<code>Sayer</code>ç±»å‹ï¼Œå®ƒå¿…é¡»å®ç°ä¸€ä¸ª<code>Say()</code>æ–¹æ³•ï¼Œåªè¦é¥¿è‚šå­äº†ï¼Œæˆ‘ä»¬å°±è°ƒç”¨<code>Say()</code>æ–¹æ³•ã€‚</p><p>ç„¶åæˆ‘ä»¬å®šä¹‰ä¸€ä¸ªé€šç”¨çš„<code>MakeHungry</code>å‡½æ•°ï¼Œæ¥æ”¶<code>Sayer</code>ç±»å‹çš„å‚æ•°ã€‚</p><pre class="line-numbers language-go" data-language="go"><code class="language-go"><span class="token comment">// MakeHungry é¥¿è‚šå­äº†...</span><span class="token keyword">func</span> <span class="token function">MakeHungry</span><span class="token punctuation">(</span>s Sayer<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>s<span class="token punctuation">.</span><span class="token function">Say</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre><p>æˆ‘ä»¬é€šè¿‡ä½¿ç”¨æ¥å£ç±»å‹ï¼ŒæŠŠæ‰€æœ‰ä¼šå«çš„åŠ¨ç‰©å½“æˆ<code>Sayer</code>ç±»å‹æ¥å¤„ç†ï¼Œåªè¦å®ç°äº†<code>Say()</code>æ–¹æ³•éƒ½èƒ½å½“æˆ<code>Sayer</code>ç±»å‹çš„å˜é‡æ¥å¤„ç†ã€‚</p><pre class="line-numbers language-go" data-language="go"><code class="language-go"><span class="token keyword">var</span> c cat<span class="token function">MakeHungry</span><span class="token punctuation">(</span>c<span class="token punctuation">)</span><span class="token keyword">var</span> d dog<span class="token function">MakeHungry</span><span class="token punctuation">(</span>d<span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre><p>åœ¨ç”µå•†ç³»ç»Ÿä¸­æˆ‘ä»¬å…è®¸ç”¨æˆ·ä½¿ç”¨å¤šç§æ”¯ä»˜æ–¹å¼ï¼ˆæ”¯ä»˜å®æ”¯ä»˜ã€å¾®ä¿¡æ”¯ä»˜ã€é“¶è”æ”¯ä»˜ç­‰ï¼‰ï¼Œæˆ‘ä»¬çš„äº¤æ˜“æµç¨‹ä¸­å¯èƒ½ä¸å¤ªåœ¨ä¹ç”¨æˆ·ç©¶ç«Ÿä½¿ç”¨ä»€ä¹ˆæ”¯ä»˜æ–¹å¼ï¼Œåªè¦å®ƒèƒ½æä¾›ä¸€ä¸ªå®ç°æ”¯ä»˜åŠŸèƒ½çš„<code>Pay</code>æ–¹æ³•è®©è°ƒç”¨æ–¹è°ƒç”¨å°±å¯ä»¥äº†ã€‚</p><p>å†æ¯”å¦‚æˆ‘ä»¬éœ€è¦åœ¨æŸä¸ªç¨‹åºä¸­æ·»åŠ ä¸€ä¸ªå°†æŸäº›æŒ‡æ ‡æ•°æ®å‘å¤–è¾“å‡ºçš„åŠŸèƒ½ï¼Œæ ¹æ®ä¸åŒçš„éœ€æ±‚å¯èƒ½è¦å°†æ•°æ®è¾“å‡ºåˆ°ç»ˆç«¯ã€å†™å…¥åˆ°æ–‡ä»¶æˆ–è€…é€šè¿‡ç½‘ç»œè¿æ¥å‘é€å‡ºå»ã€‚åœ¨è¿™ä¸ªåœºæ™¯ä¸‹æˆ‘ä»¬å¯ä»¥ä¸å…³æ³¨æœ€ç»ˆè¾“å‡ºçš„ç›®çš„åœ°æ˜¯ä»€ä¹ˆï¼Œåªéœ€è¦å®ƒèƒ½æä¾›ä¸€ä¸ª<code>Write</code>æ–¹æ³•è®©æˆ‘ä»¬æŠŠå†…å®¹å†™å…¥å°±å¯ä»¥äº†ã€‚</p><p>Goè¯­è¨€ä¸­ä¸ºäº†è§£å†³ç±»ä¼¼ä¸Šé¢çš„é—®é¢˜å¼•å…¥äº†æ¥å£çš„æ¦‚å¿µï¼Œæ¥å£ç±»å‹åŒºåˆ«äºæˆ‘ä»¬ä¹‹å‰ç« èŠ‚ä¸­ä»‹ç»çš„é‚£äº›å…·ä½“ç±»å‹ï¼Œè®©æˆ‘ä»¬ä¸“æ³¨äºè¯¥ç±»å‹æä¾›çš„æ–¹æ³•ï¼Œè€Œä¸æ˜¯ç±»å‹æœ¬èº«ã€‚ä½¿ç”¨æ¥å£ç±»å‹é€šå¸¸èƒ½å¤Ÿè®©æˆ‘ä»¬å†™å‡ºæ›´åŠ é€šç”¨å’Œçµæ´»çš„ä»£ç ã€‚</p><h3 id="é¢å‘æ¥å£ç¼–ç¨‹"><a href="#é¢å‘æ¥å£ç¼–ç¨‹" class="headerlink" title="é¢å‘æ¥å£ç¼–ç¨‹"></a>é¢å‘æ¥å£ç¼–ç¨‹</h3><p>HPã€Javaç­‰è¯­è¨€ä¸­ä¹Ÿæœ‰æ¥å£çš„æ¦‚å¿µï¼Œä¸è¿‡åœ¨PHPå’ŒJavaè¯­è¨€ä¸­éœ€è¦æ˜¾å¼å£°æ˜ä¸€ä¸ªç±»å®ç°äº†å“ªäº›æ¥å£ï¼Œåœ¨Goè¯­è¨€ä¸­ä½¿ç”¨éšå¼å£°æ˜çš„æ–¹å¼å®ç°æ¥å£ã€‚åªè¦ä¸€ä¸ªç±»å‹å®ç°äº†æ¥å£ä¸­è§„å®šçš„æ‰€æœ‰æ–¹æ³•ï¼Œé‚£ä¹ˆå®ƒå°±å®ç°äº†è¿™ä¸ªæ¥å£ã€‚</p><p>Goè¯­è¨€ä¸­çš„è¿™ç§è®¾è®¡ç¬¦åˆç¨‹åºå¼€å‘ä¸­æŠ½è±¡çš„ä¸€èˆ¬è§„å¾‹ï¼Œä¾‹å¦‚åœ¨ä¸‹é¢çš„ä»£ç ç¤ºä¾‹ä¸­ï¼Œæˆ‘ä»¬çš„ç”µå•†ç³»ç»Ÿæœ€å¼€å§‹åªè®¾è®¡äº†æ”¯ä»˜å®ä¸€ç§æ”¯ä»˜æ–¹å¼ï¼š</p><pre class="line-numbers language-go" data-language="go"><code class="language-go"><span class="token keyword">type</span> ZhiFuBao <span class="token keyword">struct</span> <span class="token punctuation">&#123;</span><span class="token comment">// æ”¯ä»˜å®</span><span class="token punctuation">&#125;</span><span class="token comment">// Pay æ”¯ä»˜å®çš„æ”¯ä»˜æ–¹æ³•</span><span class="token keyword">func</span> <span class="token punctuation">(</span>z <span class="token operator">*</span>ZhiFuBao<span class="token punctuation">)</span> <span class="token function">Pay</span><span class="token punctuation">(</span>amount <span class="token builtin">int64</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>  fmt<span class="token punctuation">.</span><span class="token function">Printf</span><span class="token punctuation">(</span><span class="token string">"ä½¿ç”¨æ”¯ä»˜å®ä»˜æ¬¾ï¼š%.2få…ƒã€‚\n"</span><span class="token punctuation">,</span> <span class="token function">float64</span><span class="token punctuation">(</span>amount<span class="token operator">/</span><span class="token number">100</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">&#125;</span><span class="token comment">// Checkout ç»“è´¦</span><span class="token keyword">func</span> <span class="token function">Checkout</span><span class="token punctuation">(</span>obj <span class="token operator">*</span>ZhiFuBao<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span><span class="token comment">// æ”¯ä»˜100å…ƒ</span>obj<span class="token punctuation">.</span><span class="token function">Pay</span><span class="token punctuation">(</span><span class="token number">100</span><span class="token punctuation">)</span><span class="token punctuation">&#125;</span><span class="token keyword">func</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span><span class="token function">Checkout</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>ZhiFuBao<span class="token punctuation">&#123;</span><span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>éšç€ä¸šåŠ¡çš„å‘å±•ï¼Œæ ¹æ®ç”¨æˆ·éœ€æ±‚æ·»åŠ æ”¯æŒå¾®ä¿¡æ”¯ä»˜ã€‚</p><pre class="line-numbers language-go" data-language="go"><code class="language-go"><span class="token keyword">type</span> WeChat <span class="token keyword">struct</span> <span class="token punctuation">&#123;</span><span class="token comment">// å¾®ä¿¡</span><span class="token punctuation">&#125;</span><span class="token comment">// Pay å¾®ä¿¡çš„æ”¯ä»˜æ–¹æ³•</span><span class="token keyword">func</span> <span class="token punctuation">(</span>w <span class="token operator">*</span>WeChat<span class="token punctuation">)</span> <span class="token function">Pay</span><span class="token punctuation">(</span>amount <span class="token builtin">int64</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>fmt<span class="token punctuation">.</span><span class="token function">Printf</span><span class="token punctuation">(</span><span class="token string">"ä½¿ç”¨å¾®ä¿¡ä»˜æ¬¾ï¼š%.2få…ƒã€‚\n"</span><span class="token punctuation">,</span> <span class="token function">float64</span><span class="token punctuation">(</span>amount<span class="token operator">/</span><span class="token number">100</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>åœ¨å®é™…çš„äº¤æ˜“æµç¨‹ä¸­ï¼Œæˆ‘ä»¬å¯ä»¥æ ¹æ®ç”¨æˆ·é€‰æ‹©çš„æ”¯ä»˜æ–¹å¼æ¥å†³å®šæœ€ç»ˆè°ƒç”¨æ”¯ä»˜å®çš„Payæ–¹æ³•è¿˜æ˜¯å¾®ä¿¡æ”¯ä»˜çš„Payæ–¹æ³•ã€‚</p><pre class="line-numbers language-go" data-language="go"><code class="language-go"><span class="token comment">// Checkout æ”¯ä»˜å®ç»“è´¦</span><span class="token keyword">func</span> <span class="token function">CheckoutWithZFB</span><span class="token punctuation">(</span>obj <span class="token operator">*</span>ZhiFuBao<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span><span class="token comment">// æ”¯ä»˜100å…ƒ</span>obj<span class="token punctuation">.</span><span class="token function">Pay</span><span class="token punctuation">(</span><span class="token number">100</span><span class="token punctuation">)</span><span class="token punctuation">&#125;</span><span class="token comment">// Checkout å¾®ä¿¡æ”¯ä»˜ç»“è´¦</span><span class="token keyword">func</span> <span class="token function">CheckoutWithWX</span><span class="token punctuation">(</span>obj <span class="token operator">*</span>WeChat<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span><span class="token comment">// æ”¯ä»˜100å…ƒ</span>obj<span class="token punctuation">.</span><span class="token function">Pay</span><span class="token punctuation">(</span><span class="token number">100</span><span class="token punctuation">)</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>å®é™…ä¸Šï¼Œä»ä¸Šé¢çš„ä»£ç ç¤ºä¾‹ä¸­æˆ‘ä»¬å¯ä»¥çœ‹å‡ºï¼Œæˆ‘ä»¬å…¶å®å¹¶ä¸æ€ä¹ˆå…³å¿ƒç”¨æˆ·é€‰æ‹©çš„æ˜¯ä»€ä¹ˆæ”¯ä»˜æ–¹å¼ï¼Œæˆ‘ä»¬åªå…³å¿ƒè°ƒç”¨Payæ–¹æ³•æ—¶èƒ½å¦æ­£å¸¸è¿è¡Œã€‚è¿™å°±æ˜¯å…¸å‹çš„â€œä¸å…³å¿ƒå®ƒæ˜¯ä»€ä¹ˆï¼Œåªå…³å¿ƒå®ƒèƒ½åšä»€ä¹ˆâ€çš„åœºæ™¯ã€‚</p><p>åœ¨è¿™ç§åœºæ™¯ä¸‹æˆ‘ä»¬å¯ä»¥å°†å…·ä½“çš„æ”¯ä»˜æ–¹å¼æŠ½è±¡ä¸ºä¸€ä¸ªåä¸º<code>Payer</code>çš„æ¥å£ç±»å‹ï¼Œå³ä»»ä½•å®ç°äº†<code>Pay</code>æ–¹æ³•çš„éƒ½å¯ä»¥ç§°ä¸º<code>Payer</code>ç±»å‹ã€‚</p><pre class="line-numbers language-go" data-language="go"><code class="language-go"><span class="token comment">// Payer åŒ…å«æ”¯ä»˜æ–¹æ³•çš„æ¥å£ç±»å‹</span><span class="token keyword">type</span> Payer <span class="token keyword">interface</span> <span class="token punctuation">&#123;</span><span class="token function">Pay</span><span class="token punctuation">(</span><span class="token builtin">int64</span><span class="token punctuation">)</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre><p>æ­¤æ—¶åªéœ€è¦ä¿®æ”¹ä¸‹åŸå§‹çš„<code>Checkout</code>å‡½æ•°ï¼Œå®ƒæ¥æ”¶ä¸€ä¸ª<code>Payer</code>ç±»å‹çš„å‚æ•°ã€‚è¿™æ ·å°±èƒ½å¤Ÿåœ¨ä¸ä¿®æ”¹æ—¢æœ‰å‡½æ•°è°ƒç”¨çš„åŸºç¡€ä¸Šï¼Œæ”¯æŒæ–°çš„æ”¯ä»˜æ–¹å¼ã€‚</p><pre class="line-numbers language-go" data-language="go"><code class="language-go"><span class="token comment">// Checkout ç»“è´¦</span><span class="token keyword">func</span> <span class="token function">Checkout</span><span class="token punctuation">(</span>obj Payer<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span><span class="token comment">// æ”¯ä»˜100å…ƒ</span>obj<span class="token punctuation">.</span><span class="token function">Pay</span><span class="token punctuation">(</span><span class="token number">100</span><span class="token punctuation">)</span><span class="token punctuation">&#125;</span><span class="token keyword">func</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span><span class="token function">Checkout</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>ZhiFuBao<span class="token punctuation">&#123;</span><span class="token punctuation">&#125;</span><span class="token punctuation">)</span> <span class="token comment">// ä¹‹å‰è°ƒç”¨æ”¯ä»˜å®æ”¯ä»˜</span><span class="token function">Checkout</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>WeChat<span class="token punctuation">&#123;</span><span class="token punctuation">&#125;</span><span class="token punctuation">)</span> <span class="token comment">// ç°åœ¨æ”¯æŒä½¿ç”¨å¾®ä¿¡æ”¯ä»˜</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>åƒç±»ä¼¼çš„ä¾‹å­åœ¨æˆ‘ä»¬ç¼–ç¨‹è¿‡ç¨‹ä¸­ä¼šç»å¸¸é‡åˆ°ï¼š</p><ul><li>æ¯”å¦‚ä¸€ä¸ªç½‘ä¸Šå•†åŸå¯èƒ½ä½¿ç”¨æ”¯ä»˜å®ã€å¾®ä¿¡ã€é“¶è”ç­‰æ–¹å¼å»åœ¨çº¿æ”¯ä»˜ï¼Œæˆ‘ä»¬èƒ½ä¸èƒ½æŠŠå®ƒä»¬å½“æˆâ€œæ”¯ä»˜æ–¹å¼â€æ¥å¤„ç†å‘¢ï¼Ÿ</li><li>æ¯”å¦‚ä¸‰è§’å½¢ï¼Œå››è¾¹å½¢ï¼Œåœ†å½¢éƒ½èƒ½è®¡ç®—å‘¨é•¿å’Œé¢ç§¯ï¼Œæˆ‘ä»¬èƒ½ä¸èƒ½æŠŠå®ƒä»¬å½“æˆâ€œå›¾å½¢â€æ¥å¤„ç†å‘¢ï¼Ÿ</li><li>æ¯”å¦‚æ»¡å‡åˆ¸ã€ç«‹å‡åˆ¸ã€æ‰“æŠ˜åˆ¸éƒ½å±äºç”µå•†åœºæ™¯ä¸‹å¸¸è§çš„ä¼˜æƒ æ–¹å¼ï¼Œæˆ‘ä»¬èƒ½ä¸èƒ½æŠŠå®ƒä»¬å½“æˆâ€œä¼˜æƒ åˆ¸â€æ¥å¤„ç†å‘¢ï¼Ÿ</li></ul><p>æ¥å£ç±»å‹æ˜¯Goè¯­è¨€æä¾›çš„ä¸€ç§å·¥å…·ï¼Œåœ¨å®é™…çš„ç¼–ç è¿‡ç¨‹ä¸­æ˜¯å¦ä½¿ç”¨å®ƒç”±ä½ è‡ªå·±å†³å®šï¼Œä½†æ˜¯é€šå¸¸ä½¿ç”¨æ¥å£ç±»å‹å¯ä»¥ä½¿ä»£ç æ›´æ¸…æ™°æ˜“è¯»ã€‚</p><p>é‚£å®ç°äº†æ¥å£åˆæœ‰ä»€ä¹ˆç”¨å‘¢ï¼Ÿä¸€ä¸ªæ¥å£ç±»å‹çš„å˜é‡èƒ½å¤Ÿå­˜å‚¨æ‰€æœ‰å®ç°äº†è¯¥æ¥å£çš„ç±»å‹å˜é‡ã€‚</p><p>ä¾‹å¦‚åœ¨ä¸Šé¢çš„ç¤ºä¾‹ä¸­ï¼Œ<code>Dog</code>å’Œ<code>Cat</code>ç±»å‹å‡å®ç°äº†<code>Sayer</code>æ¥å£ï¼Œæ­¤æ—¶ä¸€ä¸ª<code>Sayer</code>ç±»å‹çš„å˜é‡å°±èƒ½å¤Ÿæ¥æ”¶<code>Cat</code>å’Œ<code>Dog</code>ç±»å‹çš„å˜é‡ã€‚</p><pre class="line-numbers language-go" data-language="go"><code class="language-go"><span class="token keyword">var</span> x Sayer <span class="token comment">// å£°æ˜ä¸€ä¸ªSayerç±»å‹çš„å˜é‡x</span>a <span class="token operator">:=</span> Cat<span class="token punctuation">&#123;</span><span class="token punctuation">&#125;</span>  <span class="token comment">// å£°æ˜ä¸€ä¸ªCatç±»å‹å˜é‡a</span>b <span class="token operator">:=</span> Dog<span class="token punctuation">&#123;</span><span class="token punctuation">&#125;</span>  <span class="token comment">// å£°æ˜ä¸€ä¸ªDogç±»å‹å˜é‡b</span>x <span class="token operator">=</span> a       <span class="token comment">// å¯ä»¥æŠŠCatç±»å‹å˜é‡ç›´æ¥èµ‹å€¼ç»™x</span>x<span class="token punctuation">.</span><span class="token function">Say</span><span class="token punctuation">(</span><span class="token punctuation">)</span>     <span class="token comment">// å–µå–µå–µ</span>x <span class="token operator">=</span> b       <span class="token comment">// å¯ä»¥æŠŠDogç±»å‹å˜é‡ç›´æ¥èµ‹å€¼ç»™x</span>x<span class="token punctuation">.</span><span class="token function">Say</span><span class="token punctuation">(</span><span class="token punctuation">)</span>     <span class="token comment">// æ±ªæ±ªæ±ª</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h3 id="å€¼æ¥æ”¶è€…å’ŒæŒ‡é’ˆæ¥æ”¶è€…"><a href="#å€¼æ¥æ”¶è€…å’ŒæŒ‡é’ˆæ¥æ”¶è€…" class="headerlink" title="å€¼æ¥æ”¶è€…å’ŒæŒ‡é’ˆæ¥æ”¶è€…"></a>å€¼æ¥æ”¶è€…å’ŒæŒ‡é’ˆæ¥æ”¶è€…</h3><p>åœ¨ç»“æ„ä½“é‚£ä¸€ç« èŠ‚ä¸­ï¼Œæˆ‘ä»¬ä»‹ç»äº†åœ¨å®šä¹‰ç»“æ„ä½“æ–¹æ³•æ—¶æ—¢å¯ä»¥ä½¿ç”¨å€¼æ¥æ”¶è€…ä¹Ÿå¯ä»¥ä½¿ç”¨æŒ‡é’ˆæ¥æ”¶è€…ã€‚é‚£ä¹ˆå¯¹äºå®ç°æ¥å£æ¥è¯´ä½¿ç”¨å€¼æ¥æ”¶è€…å’Œä½¿ç”¨æŒ‡é’ˆæ¥æ”¶è€…æœ‰ä»€ä¹ˆåŒºåˆ«å‘¢ï¼Ÿæ¥ä¸‹æ¥æˆ‘ä»¬é€šè¿‡ä¸€ä¸ªä¾‹å­çœ‹ä¸€ä¸‹å…¶ä¸­çš„åŒºåˆ«ã€‚</p><p>æˆ‘ä»¬å®šä¹‰ä¸€ä¸ª<code>Mover</code>æ¥å£ï¼Œå®ƒåŒ…å«ä¸€ä¸ª<code>Move</code>æ–¹æ³•ã€‚</p><pre class="line-numbers language-go" data-language="go"><code class="language-go"><span class="token comment">// Mover å®šä¹‰ä¸€ä¸ªæ¥å£ç±»å‹</span><span class="token keyword">type</span> Mover <span class="token keyword">interface</span> <span class="token punctuation">&#123;</span><span class="token function">Move</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre><h4 id="å€¼æ¥æ”¶è€…å®ç°æ¥å£"><a href="#å€¼æ¥æ”¶è€…å®ç°æ¥å£" class="headerlink" title="å€¼æ¥æ”¶è€…å®ç°æ¥å£"></a>å€¼æ¥æ”¶è€…å®ç°æ¥å£</h4><p>æˆ‘ä»¬å®šä¹‰ä¸€ä¸ª<code>Dog</code>ç»“æ„ä½“ç±»å‹ï¼Œå¹¶ä½¿ç”¨å€¼æ¥æ”¶è€…ä¸ºå…¶å®šä¹‰ä¸€ä¸ª<code>Move</code>æ–¹æ³•ã€‚</p><pre class="line-numbers language-go" data-language="go"><code class="language-go"><span class="token keyword">type</span> Dog <span class="token keyword">struct</span><span class="token punctuation">&#123;</span><span class="token punctuation">&#125;</span><span class="token keyword">func</span><span class="token punctuation">(</span>d Dog<span class="token punctuation">)</span> <span class="token function">Move</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>    fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token string">"ç‹—ä¼šåŠ¨"</span><span class="token punctuation">)</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>æ­¤æ—¶å®ç°moveræ¥å£çš„æ—¶Dogç±»å‹</p><pre class="line-numbers language-go" data-language="go"><code class="language-go"><span class="token keyword">var</span> x Mover  <span class="token comment">//å£°æ˜moverç±»å‹</span><span class="token keyword">var</span> d1 <span class="token operator">=</span> Dog<span class="token punctuation">&#123;</span><span class="token punctuation">&#125;</span>x <span class="token operator">=</span> d1 <span class="token comment">//å¯ä»¥å°†d1 èµ‹å€¼ç»™å˜é‡x</span>x<span class="token punctuation">.</span><span class="token function">Move</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token keyword">var</span> d2 <span class="token operator">=</span> <span class="token operator">*</span>Dog<span class="token punctuation">&#123;</span><span class="token punctuation">&#125;</span>x <span class="token operator">=</span> d2    <span class="token comment">// d2æ˜¯DogæŒ‡é’ˆç±»å‹</span>x<span class="token punctuation">.</span><span class="token function">Move</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment">// ä¹Ÿå¯ä»¥å°†d2èµ‹å€¼ç»™å˜é‡x</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>ä»ä¸Šé¢çš„ä»£ç ä¸­æˆ‘ä»¬å¯ä»¥å‘ç°ï¼Œä½¿ç”¨å€¼æ¥æ”¶è€…å®ç°æ¥å£ä¹‹åï¼Œä¸ç®¡æ˜¯ç»“æ„ä½“ç±»å‹è¿˜æ˜¯å¯¹åº”çš„ç»“æ„ä½“æŒ‡é’ˆç±»å‹çš„å˜é‡éƒ½å¯ä»¥èµ‹å€¼ç»™è¯¥æ¥å£å˜é‡ã€‚</p><h2 id="æ—¥å¿—åº“é¡¹ç›®"><a href="#æ—¥å¿—åº“é¡¹ç›®" class="headerlink" title="æ—¥å¿—åº“é¡¹ç›®"></a>æ—¥å¿—åº“é¡¹ç›®</h2><h3 id="éœ€æ±‚åˆ†æ"><a href="#éœ€æ±‚åˆ†æ" class="headerlink" title="éœ€æ±‚åˆ†æ"></a>éœ€æ±‚åˆ†æ</h3><ul><li>å‘æ–‡ä»¶ä¸­å†™å…¥æ—¥å¿—</li><li>æ—¥å¿—åˆ†çº§åˆ«<ul><li>debug</li><li>info</li><li>warning</li><li>error</li><li>fatal</li></ul></li><li>æ—¥å¿—æ”¯æŒå¼€å…³æ§åˆ¶</li><li>æ—¥å¿—è¦æœ‰æ—¶é—´ï¼Œè¡Œå·ï¼Œæ–‡ä»¶åï¼Œæ—¥å¿—çº§åˆ«ï¼Œå…·ä½“çš„æ—¥å¿—ä¿¡æ¯</li><li>æ—¥å¿—æ–‡ä»¶éœ€è¦åˆ‡å‰²</li></ul>]]></content>
      
      
      <categories>
          
          <category> Go </category>
          
      </categories>
      
      
        <tags>
            
            <tag> goåŸºç¡€ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>groovyæ•°æ®ç±»å‹-æ­£åˆ™è¡¨è¾¾å¼</title>
      <link href="/posts/2149.html"/>
      <url>/posts/2149.html</url>
      
        <content type="html"><![CDATA[<h1 id="groovy-æ­£åˆ™è¡¨è¾¾å¼"><a href="#groovy-æ­£åˆ™è¡¨è¾¾å¼" class="headerlink" title="groovy æ­£åˆ™è¡¨è¾¾å¼"></a>groovy æ­£åˆ™è¡¨è¾¾å¼</h1><ul><li>æ·»åŠ è§£æå™¨ @NonCPS</li></ul><h2 id="æ­£åˆ™è¡¨è¾¾å¼å­—ç¬¦ä¸²"><a href="#æ­£åˆ™è¡¨è¾¾å¼å­—ç¬¦ä¸²" class="headerlink" title="æ­£åˆ™è¡¨è¾¾å¼å­—ç¬¦ä¸²"></a>æ­£åˆ™è¡¨è¾¾å¼å­—ç¬¦ä¸²</h2><p>é¦–å…ˆè¯´è¯´æ–œæ å­—ç¬¦ä¸²ï¼Œä¸»è¦ç”¨äºæ­£åˆ™è¡¨è¾¾å¼ã€‚åœ¨æ–œæ å­—ç¬¦ä¸²ä¸­ä¸éœ€è¦è½¬ä¹‰åæ–œæ ï¼Œåªæœ‰æ­£æ–œæ éœ€è¦è½¬ä¹‰ã€‚è¿™è®©æˆ‘ä»¬ç¼–å†™æ­£åˆ™è¡¨è¾¾å¼éå¸¸æ–¹ä¾¿ï¼Œä¸åƒJavaé‚£æ ·éœ€è¦åŒæ–œæ ï¼ˆ<code>\\w+\\s</code>è¿™æ ·çš„ï¼‰ã€‚</p><pre class="line-numbers language-groovy" data-language="groovy"><code class="language-groovy"><span class="token keyword">def</span> fooPattern <span class="token operator">=</span> <span class="token interpolation-string"><span class="token string">/.*foo.*/</span></span><span class="token keyword">assert</span> fooPattern <span class="token operator">==</span> <span class="token string">'.*foo.*'</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre><p>è¿˜æœ‰ç¾å…ƒæ–œæ å­—ç¬¦ä¸²ï¼Œå…¶ä¸­çš„æ‰€æœ‰å­—ç¬¦éƒ½ä¸ä¼šè¢«è½¬ä¹‰ã€‚å¦å¤–æ–œæ å­—ç¬¦ä¸²å’Œç¾å…ƒæ–œæ å­—ç¬¦ä¸²éƒ½å¯ä»¥è·¨è¿‡å¤šè¡Œã€‚å®ƒä¸»è¦ä¹Ÿæ˜¯ç”¨äºç¼–å†™æ›´å¤æ‚çš„æ­£åˆ™è¡¨è¾¾å¼ã€‚</p><pre class="line-numbers language-groovy" data-language="groovy"><code class="language-groovy"><span class="token keyword">def</span> dollarSlashy <span class="token operator">=</span> <span class="token interpolation-string"><span class="token string">$/    Hello </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">$</span><span class="token expression">name</span></span><span class="token string">,    today we're </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">$&#123;</span><span class="token expression">date</span><span class="token interpolation-punctuation punctuation">&#125;</span></span><span class="token string">.    $ dollar sign    $$ escaped dollar sign    \ backslash    / forward slash    $/ escaped forward slash    $/$ escaped dollar slashy string delimiter/$</span></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h2 id="æ­£åˆ™è¡¨è¾¾å¼è¿ç®—ç¬¦"><a href="#æ­£åˆ™è¡¨è¾¾å¼è¿ç®—ç¬¦" class="headerlink" title="æ­£åˆ™è¡¨è¾¾å¼è¿ç®—ç¬¦"></a>æ­£åˆ™è¡¨è¾¾å¼è¿ç®—ç¬¦</h2><h3 id="æ¨¡å¼è¿ç®—ç¬¦"><a href="#æ¨¡å¼è¿ç®—ç¬¦" class="headerlink" title="æ¨¡å¼è¿ç®—ç¬¦"></a>æ¨¡å¼è¿ç®—ç¬¦</h3><p>æˆ‘ä»¬å¯ä»¥ç”¨<code>~</code>ç”¨ç»™å®šçš„å­—ç¬¦ä¸²åˆ›å»º<code>java.util.regex.Pattern</code>å¯¹è±¡ã€‚</p><pre class="line-numbers language-groovy" data-language="groovy"><code class="language-groovy"><span class="token keyword">def</span> p <span class="token operator">=</span> <span class="token operator">~</span><span class="token interpolation-string"><span class="token string">/foo/</span></span><span class="token keyword">assert</span> p <span class="token keyword">instanceof</span> <span class="token class-name">Pattern</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre><h3 id="æŸ¥æ‰¾è¿ç®—ç¬¦"><a href="#æŸ¥æ‰¾è¿ç®—ç¬¦" class="headerlink" title="æŸ¥æ‰¾è¿ç®—ç¬¦"></a>æŸ¥æ‰¾è¿ç®—ç¬¦</h3><p>æˆ‘ä»¬å¯ä»¥ä½¿ç”¨<code>=~</code>è¿ç®—ç¬¦åˆ›å»ºä¸€ä¸ªMatcherå¯¹è±¡ï¼Œç„¶åæˆ‘ä»¬å¯ä»¥å°†ç»“æœæ”¾åˆ°Groovyçš„ä»»ä½•å¸ƒå°”åˆ¤æ–­ä½ç½®ã€‚Groovyä¼šè°ƒç”¨<code>find</code>æ–¹æ³•æŸ¥æ‰¾æ˜¯å¦å­˜åœ¨æŒ‡å®šçš„å­—ç¬¦ä¸²ã€‚</p><pre class="line-numbers language-groovy" data-language="groovy"><code class="language-groovy"><span class="token keyword">def</span> text <span class="token operator">=</span> <span class="token interpolation-string"><span class="token string">"some text to match"</span></span><span class="token keyword">def</span> m <span class="token operator">=</span> text <span class="token operator">=~</span> <span class="token interpolation-string"><span class="token string">/match/</span></span>                                           <span class="token keyword">assert</span> m <span class="token keyword">instanceof</span> <span class="token class-name">Matcher</span>                                       <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>m<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>                                                             <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">RuntimeException</span><span class="token punctuation">(</span><span class="token interpolation-string"><span class="token string">"Oops, text not found!"</span></span><span class="token punctuation">)</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h3 id="åŒ¹é…è¿ç®—ç¬¦"><a href="#åŒ¹é…è¿ç®—ç¬¦" class="headerlink" title="åŒ¹é…è¿ç®—ç¬¦"></a>åŒ¹é…è¿ç®—ç¬¦</h3><p>åŒ¹é…è¿ç®—ç¬¦<code>==~</code>å’ŒæŸ¥æ‰¾è¿ç®—ç¬¦ç±»ä¼¼ï¼Œåªä¸è¿‡è¿™æ¬¡ç›´æ¥è¿”å›å¸ƒå°”å€¼ï¼Œåˆ¤æ–­ç»™å®šçš„æ–‡æœ¬æ˜¯å¦å’Œæ­£åˆ™è¡¨è¾¾å¼åŒ¹é…ã€‚</p><pre class="line-numbers language-groovy" data-language="groovy"><code class="language-groovy">m <span class="token operator">=</span> text <span class="token operator">==~</span> <span class="token interpolation-string"><span class="token string">/match/</span></span>                                              <span class="token keyword">assert</span> m <span class="token keyword">instanceof</span> <span class="token class-name">Boolean</span>                                       <span class="token keyword">if</span> <span class="token punctuation">(</span>m<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>                                                              <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">RuntimeException</span><span class="token punctuation">(</span><span class="token interpolation-string"><span class="token string">"Should not reach that point!"</span></span><span class="token punctuation">)</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre><h1 id="å°ç»ƒä¹ "><a href="#å°ç»ƒä¹ " class="headerlink" title="å°ç»ƒä¹ "></a>å°ç»ƒä¹ </h1><p>è¯´äº†è¿™ä¹ˆå¤šï¼Œå†™ä¸ªå°ä¾‹å­éªŒè¯ä¸€ä¸‹è¿™é‡Œçš„åŠŸèƒ½ã€‚æ–‡æœ¬æˆªå–è‡ªBBCæŸæ–°é—»ã€‚ç”¨å‰é¢çš„è¯´çš„è¯­æ³•ç³–æ¥å¤„ç†ä¸€ä¸‹æ–‡æœ¬ã€‚æ•´ä¸ªGroovyæ–‡ä»¶ä½œä¸ºè„šæœ¬æ‰§è¡Œã€‚</p><pre class="line-numbers language-groovy" data-language="groovy"><code class="language-groovy"><span class="token comment">//è¿™æ¬¡ç›´æ¥å½“åšè„šæœ¬ç”¨</span><span class="token keyword">def</span> texts <span class="token operator">=</span> <span class="token string">'''The Chinese premier described the world's second-largest economy as a butterfly struggling to emerge from a chrysalis.He said this transformation was filled with promise but also great pain.He repeatedly paid tribute to Communist Party leader Xi Jinping and said that under the sound leadership of the Party, the Chinese people had the courage and ingenuity to overcome all difficulties.'''</span><span class="token comment">//på¼€å¤´çš„å•è¯</span><span class="token keyword">def</span> startsWithP <span class="token operator">=</span> <span class="token interpolation-string"><span class="token string">/\b[pP]\w*\b/</span></span><span class="token keyword">def</span> wordsStartsWithP <span class="token operator">=</span> texts <span class="token operator">=~</span> startsWithP<span class="token function">println</span><span class="token punctuation">(</span><span class="token interpolation-string"><span class="token string">"på¼€å¤´çš„å•è¯"</span></span><span class="token punctuation">)</span><span class="token keyword">while</span> <span class="token punctuation">(</span>wordsStartsWithP<span class="token punctuation">.</span><span class="token function">find</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>    <span class="token function">print</span><span class="token punctuation">(</span><span class="token interpolation-string"><span class="token string">"</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">$&#123;</span><span class="token expression">wordsStartsWithP<span class="token punctuation">.</span><span class="token function">group</span><span class="token punctuation">(</span><span class="token punctuation">)</span></span><span class="token interpolation-punctuation punctuation">&#125;</span></span><span class="token string"> "</span></span><span class="token punctuation">)</span><span class="token punctuation">&#125;</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token comment">//ä»¥yç»“å°¾çš„å•è¯</span><span class="token keyword">def</span> endsWithY <span class="token operator">=</span> <span class="token interpolation-string"><span class="token string">/^.*y$/</span></span><span class="token keyword">def</span> words <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token string">'happy'</span><span class="token punctuation">,</span> <span class="token string">'foolish'</span><span class="token punctuation">,</span> <span class="token string">'something'</span><span class="token punctuation">,</span> <span class="token string">'java'</span><span class="token punctuation">,</span><span class="token string">'lucky'</span><span class="token punctuation">]</span><span class="token keyword">def</span> results <span class="token operator">=</span> words<span class="token punctuation">.</span>findAll <span class="token punctuation">&#123;</span> it <span class="token operator">==~</span> endsWithY <span class="token punctuation">&#125;</span><span class="token punctuation">.</span><span class="token function">join</span><span class="token punctuation">(</span><span class="token string">','</span><span class="token punctuation">)</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token interpolation-string"><span class="token string">"yç»“å°¾çš„å•è¯:</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">$</span><span class="token expression">results</span></span><span class="token string">"</span></span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>]]></content>
      
      
      <categories>
          
          <category> groovy </category>
          
      </categories>
      
      
        <tags>
            
            <tag> groovy </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>groovyæ•°æ®ç±»å‹-å‡½æ•°</title>
      <link href="/posts/29915.html"/>
      <url>/posts/29915.html</url>
      
        <content type="html"><![CDATA[<h4 id="groovy-å‡½æ•°"><a href="#groovy-å‡½æ•°" class="headerlink" title="groovy å‡½æ•°"></a>groovy å‡½æ•°</h4><ul><li>def å®šä¹‰å‡½æ•°</li><li>è¯­æ³•<pre class="line-numbers language-none"><code class="language-none">def PrintMes(value)&#123;    println(value)    return value    &#125;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre></li><li>è°ƒç”¨ PrintMes()</li><li>å®è·µ<pre class="line-numbers language-none"><code class="language-none">groovy:000&gt; def PrintMes(value)&#123;groovy:001&gt;     println(value)groovy:002&gt;     return valuegroovy:003&gt;     &#125;&#x3D;&#x3D;&#x3D;&gt; truegroovy:000&gt; PrintMes(&quot;devops&quot;)devops&#x3D;&#x3D;&#x3D;&gt; devopsgroovy:000&gt; resposne &#x3D; PrintMes(&quot;devope&quot;)devope&#x3D;&#x3D;&#x3D;&gt; devopegroovy:000&gt; println(response)Unknown property: responsegroovy:000&gt; println(resposne)<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></li></ul>]]></content>
      
      
      <categories>
          
          <category> groovy </category>
          
      </categories>
      
      
        <tags>
            
            <tag> groovy </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>groovyæ•°æ®ç±»å‹-list</title>
      <link href="/posts/42286.html"/>
      <url>/posts/42286.html</url>
      
        <content type="html"><![CDATA[<h4 id="groovyæ•°æ®ç±»å‹-list"><a href="#groovyæ•°æ®ç±»å‹-list" class="headerlink" title="groovyæ•°æ®ç±»å‹-list"></a>groovyæ•°æ®ç±»å‹-list</h4><ul><li>åˆ—è¡¨ç¬¦å·[]</li><li>å¸¸ç”¨æ–¹æ³•<ul><li><ul><li><ul><li>+&#x3D; -&#x3D; å…ƒç´ å¢åŠ æˆ–è€…å‡å°‘</li></ul></li></ul></li><li>&lt;&lt; ã€ add() æ·»åŠ å…ƒç´ </li><li>isEmpty() æ˜¯å¦ä¸ºç©º</li><li>intersect([2, 3]) disjoint([1]) å–äº¤é›†ã€åˆ¤æ–­æ˜¯å¦æœ‰äº¤é›†</li><li>flatten() åˆå¹¶åµŒå¥—çš„åˆ—è¡¨</li><li>unique()å»é‡</li><li>reverse() sort() åè½¬ å‡åº</li><li>count() å…ƒç´ ä¸ªæ•°</li><li>join() å°†å…ƒç´ æŒ‰ç…§å‚æ•°é“¾æ¥</li><li>sum() min() max() </li><li>contains() åŒ…å«ç‰¹å®šå…ƒç´ </li><li>remove(2) removeA11()</li><li>each{} éå†</li></ul></li><li>å®è·µ<pre class="line-numbers language-none"><code class="language-none">  groovy:000&gt; []&#x3D;&#x3D;&#x3D;&gt; []groovy:000&gt; [1, 2, 3, 4, 5] + 6&#x3D;&#x3D;&#x3D;&gt; [1, 2, 3, 4, 5, 6]groovy:000&gt; [1, 2, 3, 4, 5]  &lt;&lt; 14&#x3D;&#x3D;&#x3D;&gt; [1, 2, 3, 4, 5, 14]groovy:000&gt; [1, 2, 3, 4, 5].add(14)&#x3D;&#x3D;&#x3D;&gt; truegroovy:000&gt; result &#x3D; [1, 2, 3, 4, 5].add(14)&#x3D;&#x3D;&#x3D;&gt; truegroovy:000&gt; println(result)true&#x3D;&#x3D;&#x3D;&gt; nullgroovy:000&gt; [2, 3, 4, 4, 6, 7].unique()&#x3D;&#x3D;&#x3D;&gt; [2, 3, 4, 6, 7]groovy:000&gt; [2, 3, 4, 5, 6, 6].each&#123;println(it)&#125;234566&#x3D;&#x3D;&#x3D;&gt; [2, 3, 4, 5, 6, 6]<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></li></ul>]]></content>
      
      
      <categories>
          
          <category> groovy </category>
          
      </categories>
      
      
        <tags>
            
            <tag> groovy </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>groovyæ•°æ®ç±»å‹-string</title>
      <link href="/posts/50895.html"/>
      <url>/posts/50895.html</url>
      
        <content type="html"><![CDATA[<h4 id="groovyæ•°æ®ç±»å‹-String"><a href="#groovyæ•°æ®ç±»å‹-String" class="headerlink" title="groovyæ•°æ®ç±»å‹-String"></a>groovyæ•°æ®ç±»å‹-String</h4><ul><li>å­—ç¬¦ä¸²è¡¨ç¤ºï¼šå•åŒå¼•å·ï¼Œä¸‰å¼•å·</li><li>å¸¸ç”¨æ–¹æ³•ï¼š<ul><li>contain() æ˜¯å¦åŒ…å«ç‰¹å®šçš„å†…å®¹ï¼Œè¿”å›trur or false</li><li>size() length å¤§å°ã€é•¿åº¦</li><li>toString() è½¬æ¢æˆstringç±»å‹</li><li>indexOf() å…ƒç´ çš„ç´¢å¼•</li><li>endsWith() æ˜¯å¦æŒ‡å®šå­—ç¬¦ä¸²çš„ç»“å°¾</li><li>minus() plus() å»é™¤ã€å¢åŠ å­—ç¬¦ä¸²</li><li>reverse() åè½¬å­—ç¬¦ä¸²</li><li>substring(1, 2) æŒ‡å®šç´¢å¼•å¼€å§‹çš„å­å­—ç¬¦ä¸²</li><li>toUpperCase()ã€ toLowerCase() å¤§å°å†™è½¬æ¢</li><li>split()å­—ç¬¦ä¸²åˆ†å‰²ï¼Œ é»˜è®¤ç©ºæ ¼åˆ†å‰²ï¼Œè¿”å›åˆ—è¡¨</li></ul></li><li>å®è·µ <pre class="line-numbers language-none"><code class="language-none"> groovy:000&gt; name &#x3D; &quot;zhangsan&quot;&#x3D;&#x3D;&#x3D;&gt; zhangsangroovy:000&gt; &quot;my name is $&#123;zhangsan&#125;&quot;Unknown property: zhangsangroovy:000&gt; &quot;my name is $&#123;name&#125;&quot;&#x3D;&#x3D;&#x3D;&gt; my name is zhangsangroovy:000&gt; &#39;my name is $&#123;name&#125;&#39;&#x3D;&#x3D;&#x3D;&gt; my name is $&#123;name&#125; å•å¼•å·æ‰“å˜é‡åï¼Œ åŒå¼•å·è·å–å˜é‡çš„å€¼  groovy:000&gt; &quot;devopsteststops&quot;.contains(&quot;ops&quot;)&#x3D;&#x3D;&#x3D;&gt; truegroovy:000&gt; &quot;devopsteststops&quot;.contains(&quot;users&quot;)&#x3D;&#x3D;&#x3D;&gt; falsegroovy:000&gt; &quot;devopsteststops&quot;.endsWith(&quot;ops&quot;)&#x3D;&#x3D;&#x3D;&gt; truegroovy:000&gt; &quot;devopsteststops&quot;.endsWith(&quot;abs&quot;)&#x3D;&#x3D;&#x3D;&gt; falsegroovy:000&gt; &quot;devopsteststops&quot;.size()&#x3D;&#x3D;&#x3D;&gt; 15groovy:000&gt; &quot;devopsteststops&quot;.length()&#x3D;&#x3D;&#x3D;&gt; 15groovy:000&gt; &quot;dev&quot; + &quot;ops&quot;&#x3D;&#x3D;&#x3D;&gt; devopsgroovy:000&gt; &quot;dev&quot; - &quot;ops&quot;&#x3D;&#x3D;&#x3D;&gt; devgroovy:000&gt; &quot;devops&quot;.toUpperCase()&#x3D;&#x3D;&#x3D;&gt; DEVOPSgroovy:000&gt; &quot;devops&quot;.toUpperCase().toLowerCase()&#x3D;&#x3D;&#x3D;&gt; devopsgroovy:000&gt; groovy:000&gt; &quot;host01, host02, host03&quot;.split(&quot;,&quot;)&#x3D;&#x3D;&#x3D;&gt; [host01,  host02,  host03]groovy:000&gt; hosts &#x3D; &quot;host01, host02, host03&quot;.split(&quot;,&quot;)&#x3D;&#x3D;&#x3D;&gt; [host01,  host02,  host03]groovy:000&gt; for (i in hosts)&#123;&#125;&#x3D;&#x3D;&#x3D;&gt; nullgroovy:000&gt; for (i in hosts)&#123;groovy:001&gt; println(i)&#125;host01 host02 host03&#x3D;&#x3D;&#x3D;&gt; null<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></li></ul>]]></content>
      
      
      <categories>
          
          <category> groovy </category>
          
      </categories>
      
      
        <tags>
            
            <tag> groovy </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>groovyå®‰è£…</title>
      <link href="/posts/20877.html"/>
      <url>/posts/20877.html</url>
      
        <content type="html"><![CDATA[<h4 id="groovyå®‰è£…"><a href="#groovyå®‰è£…" class="headerlink" title="groovyå®‰è£…"></a>groovyå®‰è£…</h4><ol><li>wget <a href="https://groovy.jfrog.io/artifactory/dist-release-local/groovy-zips/apache-groovy-binary-4.0.2.zip">https://groovy.jfrog.io/artifactory/dist-release-local/groovy-zips/apache-groovy-binary-4.0.2.zip</a></li><li>unzip apache-groovy-binary-4.0.2.zip -d &#x2F;usr&#x2F;local&#x2F;</li><li>ln -sv &#x2F;usr&#x2F;local&#x2F;groovy-4.0.2 &#x2F;usr&#x2F;local&#x2F;groovy</li><li>vi &#x2F;etc&#x2F;profile<pre class="line-numbers language-none"><code class="language-none">export GROOVY_HOME&#x3D;&quot;&#x2F;usr&#x2F;local&#x2F;groovy&quot;export PATH&#x3D;$GROOVY_HOME&#x2F;bin:$PATH<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre></li><li>source &#x2F;etc&#x2F;profile</li><li>groovy -version</li></ol>]]></content>
      
      
      <categories>
          
          <category> groovy </category>
          
      </categories>
      
      
        <tags>
            
            <tag> groovy </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>ä¿ç•™å­—æŒ‡ä»¤</title>
      <link href="/posts/11266.html"/>
      <url>/posts/11266.html</url>
      
        <content type="html"><![CDATA[<h1 id="ä¿ç•™å­—æŒ‡ä»¤"><a href="#ä¿ç•™å­—æŒ‡ä»¤" class="headerlink" title="ä¿ç•™å­—æŒ‡ä»¤"></a>ä¿ç•™å­—æŒ‡ä»¤</h1><p>FROM åŸºäºå“ªä¸ªé•œåƒç¼–å†™</p><p>MAINTAINER é•œåƒç»´æŠ¤è€…çš„å§“åå’Œé‚®ç®±åœ°å€</p><p>RUN å®¹å™¨æ„å»ºæ—¶éœ€è¦ç»™è¿è¡Œçš„å‘½ä»¤</p><p>EXPOSE å®ä¾‹å¯åŠ¨æ—¶çš„ç«¯å£å·</p><p>WORKDIR å·¥ä½œç›®å½•ENV åœ¨æ„å»ºè¿‡ç¨‹ä¸­ä½¿ç”¨ç¯å¢ƒå˜é‡</p><p>ADD å°†å®¿ä¸»æœºç›®å½•ä¸‹çš„æ–‡ä»¶æ‹·è´è¿›é•œåƒä¸”addå‘½ä»¤ä¼šè‡ªåŠ¨å¤„ç†urlå’Œè§£å‹tarå‹ç¼©åŒ…</p><p>COPY æ‹·è´æ–‡ä»¶ç›®å½•åˆ°é•œåƒä¸­</p><p>VOLUME å®¹å™¨æ•°æ®å·ï¼Œä¿æŒæ•°æ®å’ŒæŒä¹…åŒ–</p><p>CMD æŒ‡å®šå®¹å™¨å¯åŠ¨æ—¶éœ€è¦è¿è¡Œçš„å‘½ä»¤</p><p> dockerfileä¸­å¯ä»¥æœ‰å¤šä¸ªCMDå‘½ä»¤ï¼Œä½†åªæœ‰æœ€åä¸€ä¸ªç”Ÿæ•ˆï¼ŒCMDä¼šè¢«docker run ä¹‹åçš„å‚æ•°æ›¿æ¢</p><p>ENTRYPOINT æŒ‡å®šä¸€ä¸ªå®¹å™¨å¯åŠ¨æ—¶çš„å‘½ä»¤ entrypointçš„ç›®çš„å’Œcmdä¸€æ ·ï¼Œéƒ½æ˜¯åœ¨æŒ‡å®šå®¹å™¨å¯åŠ¨ç¨‹åºä»¥åŠå‚æ•° , entrypoint è¿½åŠ ç»„åˆå‘½ä»¤</p><p>ONBUILD è§¦å‘å™¨ï¼Œå½“æ„å»ºä¸€ä¸ªè¢«ç»§æ‰¿çš„dockerfileæ—¶è¿è¡Œå‘½ä»¤ï¼Œ çˆ¶é•œåƒåœ¨è¢«å­ç»§æ‰¿åçˆ¶é•œåƒçš„onbuild è¢«è§¦å‘</p>]]></content>
      
      
      <categories>
          
          <category> docker </category>
          
      </categories>
      
      
        <tags>
            
            <tag> docker </tag>
            
            <tag> dockerfile </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>é€šè¿‡dockerfileæ„å»ºé•œåƒå’ŒæŒ‚è½½æ•°æ®å·</title>
      <link href="/posts/50637.html"/>
      <url>/posts/50637.html</url>
      
        <content type="html"><![CDATA[<h1 id="dockeré•œåƒçš„å®šä¹‰"><a href="#dockeré•œåƒçš„å®šä¹‰" class="headerlink" title="dockeré•œåƒçš„å®šä¹‰"></a>dockeré•œåƒçš„å®šä¹‰</h1><blockquote><p>è½»é‡çº§å¯æ‰§è¡Œçš„ç‹¬ç«‹è½¯ä»¶ä¿ï¼Œç”¨æ¥æ‰“åŒ…è½¯ä»¶è¿è¡Œç¯å¢ƒå’ŒåŸºäºè¿è¡Œç¯å¢ƒå¼€å‘çš„è½¯ä»¶unionfs è”åˆæ–‡ä»¶ç³»ç»Ÿï¼Œ å³ä¸€å±‚ä¸€å±‚çš„æ–‡ä»¶ç³»ç»Ÿç»„æˆ, ä»–æ”¯æŒå¯¹æ–‡ä»¶ç³»ç»Ÿçš„ä¿®æ”¹ä½œä¸ºä¸€æ¬¡æäº¤æ¥ä¸€å±‚å±‚çš„å åŠ ç‰¹æ€§ï¼šä¸€æ¬¡åŒæ—¶åŠ è½½å¤šä¸ªæ–‡ä»¶ç³»ç»Ÿï¼Œä½†ä»å¤–é¢çœ‹èµ·æ¥ï¼Œåªèƒ½çœ‹åˆ°ä¸€ä¸ªæ–‡ä»¶ç³»ç»Ÿï¼Œè”åˆåŠ è½½ä¼šæŠŠæ–‡ä»¶ç³»ç»Ÿå åŠ èµ·æ¥ï¼Œè¿™æ ·æœ€ç»ˆçš„æ–‡ä»¶ç³»ç»Ÿä¼šåŒ…å«æ‰€æœ‰çš„åº•å±‚æ–‡ä»¶å’Œç›®å½•ä¸»è¦åŒ…å«boosfs rootfs è¿™ç§ç»“æ„å¯ä»¥é€šè¿‡ä¸€ä¸ªbaseå…±äº«èµ„æº</p></blockquote><h1 id="ä»å®¹å™¨æ„å»ºä¸€ä¸ªdocker-é•œåƒ"><a href="#ä»å®¹å™¨æ„å»ºä¸€ä¸ªdocker-é•œåƒ" class="headerlink" title="ä»å®¹å™¨æ„å»ºä¸€ä¸ªdocker é•œåƒ"></a>ä»å®¹å™¨æ„å»ºä¸€ä¸ªdocker é•œåƒ</h1><blockquote><p>å‘½ä»¤ï¼š docker commit</p><p>å‚æ•°ï¼š -a : ä½œè€…</p><p>â€‹-m: æ„å»ºæ—¶æ·»åŠ çš„ä¿¡æ¯</p></blockquote><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token function">docker</span> commit <span class="token parameter variable">-m</span>  æäº¤å‰¯æœ¬å®è´¨æˆä¸ºä¸€ä¸ªæ–°çš„é•œåƒ<span class="token function">docker</span> commit <span class="token parameter variable">-a</span> <span class="token string">"zhangtq"</span> <span class="token parameter variable">-m</span> <span class="token string">"no doc"</span> bba8e1b9632c aiguigu/mytomcat:1.2<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre><h1 id="è¿è¡Œdockeré•œåƒç”Ÿæˆå®¹å™¨"><a href="#è¿è¡Œdockeré•œåƒç”Ÿæˆå®¹å™¨" class="headerlink" title="è¿è¡Œdockeré•œåƒç”Ÿæˆå®¹å™¨"></a>è¿è¡Œdockeré•œåƒç”Ÿæˆå®¹å™¨</h1><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token function">docker</span> run <span class="token parameter variable">-it</span> <span class="token parameter variable">-p</span> å¯¹å¤–æš´éœ²çš„ç«¯å£8888:8080 tomcatdocker run <span class="token parameter variable">-it</span> <span class="token parameter variable">-p</span> <span class="token number">8888</span>:8080 tomcat<span class="token function">docker</span> run <span class="token parameter variable">-it</span> <span class="token parameter variable">-P</span> tomcat éšæœºåˆ†é…æš´éœ²ç«¯å£docker <span class="token builtin class-name">exec</span> <span class="token parameter variable">-it</span> bba8e1b9632c /bin/bash<span class="token function">docker</span> run <span class="token parameter variable">-d</span> <span class="token parameter variable">-p</span> <span class="token number">6666</span>:8080 tomcat åå°å¯åŠ¨<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre><h1 id="docker-æ•°æ®å·"><a href="#docker-æ•°æ®å·" class="headerlink" title="docker æ•°æ®å·"></a>docker æ•°æ®å·</h1><blockquote><p>å°†docker å®¹å™¨äº§ç”Ÿçš„æ•°æ®æŒä¹…åŒ–ï¼ˆç±»ä¼¼ç§»åŠ¨ç¡¬ç›˜ï¼‰å’Œæ•°æ®å…±äº«</p></blockquote><p>æ•°æ®å·çš„ç‰¹ç‚¹ï¼š </p><ol><li><p>æ•°æ®å·å¯ä»¥åœ¨å®¹å™¨ä¹‹é—´å…±äº«æˆ–é‡ç”¨æ•°æ®</p></li><li><p>å·ä¸­çš„æ›´æ”¹å¯ä»¥ç›´æ¥ç”Ÿæ•ˆ</p></li><li><p>æ•°æ®å·ä¸­çš„æ›´æ”¹ä¸ä¼šåŒ…å«åœ¨é•œåƒçš„æ›´æ–°ä¸­</p></li><li><p>æ•°æ®å·çš„ç”Ÿå‘½å‘¨æœŸä¸€è‡´æŒç»­åˆ°æ²¡æœ‰å®¹å™¨ä½¿ç”¨ä»–ä¸ºæ­¢</p><p>å®¹å™¨å†…æ·»åŠ ï¼š 1.ç›´æ¥å‘½ä»¤æ·»åŠ  docker run -it -v &#x2F;mydatavolume:&#x2F;mydatavolumecontainer centos<br>docker run -it -v &#x2F;mydatavolume:&#x2F;mydatavolumecontainer:ro centos  åªè¯»æŒ‚è½½ ä¸»æœºå¯ä»¥å†™ï¼Œå®¹å™¨å†…åªè¯»<br>æŸ¥çœ‹æ•°æ®æ˜¯å¦æŒ‚è½½æˆåŠŸdocker inspect centos<br>docker start 56dd279c7699\2.dockerfile æ·»åŠ # volume testFROM centosVOLUME [â€œ&#x2F;dataVolumeContainer1â€, â€œ&#x2F;dataVolumeContainere2â€]CMD echo â€œfinished, â€”â€”-success1â€CMD &#x2F;bin&#x2F;bash<br>docker build -f &#x2F;mydocker&#x2F;DockerFile -t test&#x2F;centos . åˆ›å»ºé•œåƒ</p></li></ol><p>æ•°æ®å·çš„æ·»åŠ </p><ol><li><p>å®¹å™¨å†…æ·»åŠ </p><p>docker run -it -v &#x2F;mydatavolume:&#x2F;mydatavolumecontainer centos<br>docker run -it -v &#x2F;mydatavolume:&#x2F;mydatavolumecontainer:ro centos  åªè¯»æŒ‚è½½ ä¸»æœºå¯ä»¥å†™ï¼Œå®¹å™¨å†…åªè¯»</p><p>docker inspect centos   æŸ¥çœ‹æ•°æ®æ˜¯å¦æŒ‚è½½æˆåŠŸ<br>docker start 56dd279c7699\  å¯åŠ¨å®¹å™¨</p></li><li><p>dockerfileä¸­æ·»åŠ </p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token comment"># åˆ›å»ºä¸€ä¸ªdockerfileæ–‡ä»¶ï¼Œåå­—å¯ä»¥éšæœºï¼Œå»ºè®®Dockerfile</span><span class="token comment"># æ–‡ä»¶ä¸­çš„å†…å®¹ æŒ‡ä»¤ï¼ˆå¤§å†™ï¼‰ å‚æ•°</span>FROM centosVOLUME <span class="token punctuation">[</span><span class="token string">"volume01"</span>,<span class="token string">"volume02"</span><span class="token punctuation">]</span>CMD <span class="token builtin class-name">echo</span> <span class="token string">"-----end------"</span>CMD /bin/bash<span class="token comment"># è¿™é‡Œçš„æ¯ä¸ªå‘½ä»¤ï¼Œå°±æ˜¯é•œåƒçš„ä¸€å±‚ï¼</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></li></ol><h1 id="docker-ç¼–å†™"><a href="#docker-ç¼–å†™" class="headerlink" title="docker ç¼–å†™"></a>docker ç¼–å†™</h1><pre class="line-numbers language-none"><code class="language-none">FROM centos:7.9.2009MAINTAINER 15652533044@163.com# å°†å®¿ä¸»æœºå½“å‰çš„ä¸Šä¸‹æ–‡c.txt æ‹·è´åˆ°å®¹å™¨&#x2F;usr&#x2F;local&#x2F;è·¯å¾„ä¸‹COPY c.txt &#x2F;user&#x2F;local&#x2F;cincontainer.txt# å°†java tomcat åŠ å…¥åˆ°å®¹å™¨ä¸­ADD apache-tomcat-9.0.64.tar.gz &#x2F;usr&#x2F;local&#x2F;ADD jdk-18_linux-aarch64_bin.tar.gz &#x2F;usr&#x2F;local&#x2F;# å®‰è£…vimç¼–è¾‘å™¨RUN yum -y install vim# è®¾ç½®å·¥ä½œè®¿é—®è·¯å¾„ENV MYPATH &#x2F;usr&#x2F;localWORKDIR $MYPATH# é…ç½®java å’Œtomcat çš„ç¯å¢ƒå˜é‡ENV JAVA_HOME &#x2F;usr&#x2F;local&#x2F;jdk-18.0.1.1ENV CLASSPATH $JAVA_HOME&#x2F;lib&#x2F;dt.jar:$JAVA_HOME&#x2F;lib&#x2F;tools.jarENV CATALINA_HOME &#x2F;usr&#x2F;local&#x2F;jdk-18.0.1.1ENV CATALINA_BASE &#x2F;usr&#x2F;local&#x2F;jdk-18.0.1.1ENV PAHT $PATH;$JAVA_HOME&#x2F;bin;$CATALINA_HOME&#x2F;lib;$CATALINA_HOME&#x2F;bin# å®¹å™¨è¿è¡Œæ—¶ç›‘å¬çš„ç«¯å£EXPOSE 8080# è¿è¡Œæ—¶å¯åŠ¨tomcat# ENTRYPOINT [&quot;&#x2F;usr&#x2F;local&#x2F;apache-tomcat-9.0.64&#x2F;bin&#x2F;startup.sh&quot;]# CMD [&quot;&#x2F;usr&#x2F;local&#x2F;apache-tomcat-9.0.64&#x2F;catalina.sh&quot;, &quot;run&quot;]CMD &#x2F;usr&#x2F;local&#x2F;apache-tomcat-9.0.64&#x2F;bin&#x2F;startup.sh &amp;&amp; tail -F &#x2F;usr&#x2F;local&#x2F;apache-tomcat-9.0.64&#x2F;bin&#x2F;logs&#x2F;catalina.out<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>LABEL <br>org.label-schema.schema-version&#x3D;â€1.0â€ <br>org.label-schema.name&#x3D;â€CentOS Base Imageâ€ <br>org.label-schema.vendor&#x3D;â€CentOSâ€ <br>org.label-schema.license&#x3D;â€GPLv2â€ <br>org.label-schema.build-date&#x3D;â€20201113â€ <br>org.opencontainers.image.title&#x3D;â€CentOS Base Imageâ€ <br>org.opencontainers.image.vendor&#x3D;â€CentOSâ€ <br>org.opencontainers.image.licenses&#x3D;â€GPL-2.0-onlyâ€ <br>org.opencontainers.image.created&#x3D;â€2020-11-13 00:00:00+00:00â€</p><p>CMD [â€œ&#x2F;bin&#x2F;bashâ€]</p><p>1docker ä»åŸºç¡€é•œåƒè¿è¡Œä¸€ä¸ªå®¹å™¨2æ‰§è¡Œä¸€å¤©æŒ‡ä»¤å¹¶å¯¹å®¹å™¨åšå‡ºä¿®æ”¹3.æ‰§è¡Œç±»ä¼¼docker commit çš„æ“ä½œæäº¤ä¸€ä¸ªæ–°çš„é•œåƒå±‚4.dockeråŸºäºåˆšæäº¤çš„é•œåƒè¿è¡Œä¸€ä¸ªæ–°çš„å®¹å™¨5æ‰§è¡Œdockerfileä¸­çš„ä¸‹ä¸€æ¡æŒ‡ä»¤ç›´åˆ°æ‰€æœ‰çš„æŒ‡ä»¤éƒ½æ‰§è¡Œå®Œæˆ<br>dokcerä¿ç•™å­—æŒ‡ä»¤FROM åŸºäºå“ªä¸ªé•œåƒç¼–å†™MAINTAINER é•œåƒç»´æŠ¤è€…çš„å§“åå’Œé‚®ç®±åœ°å€RUN å®¹å™¨æ„å»ºæ—¶éœ€è¦ç»™è¿è¡Œçš„å‘½ä»¤EXPOSE å®ä¾‹å¯åŠ¨æ—¶çš„ç«¯å£å·WORKDIR å·¥ä½œç›®å½•ENV åœ¨æ„å»ºè¿‡ç¨‹ä¸­ä½¿ç”¨ç¯å¢ƒå˜é‡ADD å°†å®¿ä¸»æœºç›®å½•ä¸‹çš„æ–‡ä»¶æ‹·è´è¿›é•œåƒä¸”addå‘½ä»¤ä¼šè‡ªåŠ¨å¤„ç†urlå’Œè§£å‹tarå‹ç¼©åŒ…COPY æ‹·è´æ–‡ä»¶ç›®å½•åˆ°é•œåƒä¸­VOLUME å®¹å™¨æ•°æ®å·ï¼Œä¿æŒæ•°æ®å’ŒæŒä¹…åŒ–CMD æŒ‡å®šå®¹å™¨å¯åŠ¨æ—¶éœ€è¦è¿è¡Œçš„å‘½ä»¤ dockerfileä¸­å¯ä»¥æœ‰å¤šä¸ªCMDå‘½ä»¤ï¼Œä½†åªæœ‰æœ€åä¸€ä¸ªç”Ÿæ•ˆï¼ŒCMDä¼šè¢«docker run ä¹‹åçš„å‚æ•°æ›¿æ¢ENTRYPOINT æŒ‡å®šä¸€ä¸ªå®¹å™¨å¯åŠ¨æ—¶çš„å‘½ä»¤ entrypointçš„ç›®çš„å’Œcmdä¸€æ ·ï¼Œéƒ½æ˜¯åœ¨æŒ‡å®šå®¹å™¨å¯åŠ¨ç¨‹åºä»¥åŠå‚æ•° , entrypoint è¿½åŠ ç»„åˆå‘½ä»¤ONBUILD è§¦å‘å™¨ï¼Œå½“æ„å»ºä¸€ä¸ªè¢«ç»§æ‰¿çš„dockerfileæ—¶è¿è¡Œå‘½ä»¤ï¼Œ çˆ¶é•œåƒåœ¨è¢«å­ç»§æ‰¿åçˆ¶é•œåƒçš„onbuild è¢«è§¦å‘<br>è‡ªå®šä¹‰centosçš„dockersfileFROM centosENV mypath &#x2F;tmpWORKDIR $mypathRUN yum -y install vimRUN yun -y install net-toolsEXPOSE 80CMD &#x2F;bin&#x2F;bash</p><p>docker build<br>docker run</p>]]></content>
      
      
      <categories>
          
          <category> docker </category>
          
      </categories>
      
      
        <tags>
            
            <tag> docker </tag>
            
            <tag> dockerfile </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>æ•°æ®ç»“æ„ä¸ç®—æ³•</title>
      <link href="/posts/54150.html"/>
      <url>/posts/54150.html</url>
      
        <content type="html"><![CDATA[<h1 id="æ•°æ®ç»“æ„"><a href="#æ•°æ®ç»“æ„" class="headerlink" title="æ•°æ®ç»“æ„"></a>æ•°æ®ç»“æ„</h1><blockquote><p>æ•°æ®ç»“æ„çš„å®šä¹‰ï¼š æ•°æ®åœ¨è®¡ç®—æœºä¸­çš„å­˜å‚¨æ–¹å¼ï¼Œ æ¯”å¦‚åˆ—è¡¨ï¼Œæ•°ç»„ï¼Œå…ƒç»„ï¼Œå­—ç¬¦ä¸²ç­‰ï¼Œç¨‹åº&#x3D; æ•°æ®ç»“æ„+ç®—æ³•</p></blockquote><h2 id="æ ˆ"><a href="#æ ˆ" class="headerlink" title="æ ˆ"></a>æ ˆ</h2><ol><li><p>å®šä¹‰ï¼š åªåœ¨ä¸€æ®µè¿›è¡Œæ’å…¥å’Œåˆ é™¤æ“ä½œçš„åˆ—è¡¨</p></li><li><p>ç‰¹ç‚¹ï¼šåè¿›å…ˆå‡º</p></li><li><p>æ ˆçš„æ¦‚å¿µï¼š æ ˆåº•ã€æ ˆé¡¶</p></li><li><p>æ ˆçš„æ“ä½œï¼š</p><p>è¿›æ ˆï¼šappend</p><p>å‡ºæ ˆï¼špop</p><p>å–æ ˆé¡¶ï¼šgettop</p></li><li><p>å®ç°æ ˆ</p><ol><li><p>python</p><pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token keyword">class</span> <span class="token class-name">Stack</span><span class="token punctuation">:</span>        <span class="token keyword">def</span> <span class="token function">__init__</span><span class="token punctuation">(</span>self<span class="token punctuation">)</span><span class="token punctuation">:</span>        self<span class="token punctuation">.</span>stack <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>    <span class="token keyword">def</span> <span class="token function">push</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> item<span class="token punctuation">)</span><span class="token punctuation">:</span>        <span class="token keyword">return</span> self<span class="token punctuation">.</span>stack<span class="token punctuation">.</span>append<span class="token punctuation">(</span>item<span class="token punctuation">)</span>    <span class="token keyword">def</span> <span class="token function">pop</span><span class="token punctuation">(</span>self<span class="token punctuation">)</span><span class="token punctuation">:</span>        <span class="token keyword">return</span> self<span class="token punctuation">.</span>stack<span class="token punctuation">.</span>pop<span class="token punctuation">(</span><span class="token punctuation">)</span>    <span class="token keyword">def</span> <span class="token function">gettop</span><span class="token punctuation">(</span>self<span class="token punctuation">)</span><span class="token punctuation">:</span>        <span class="token keyword">return</span> self<span class="token punctuation">.</span>stack<span class="token punctuation">[</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token keyword">def</span> <span class="token function">is_empty</span><span class="token punctuation">(</span>self<span class="token punctuation">)</span><span class="token punctuation">:</span>        <span class="token keyword">return</span> <span class="token builtin">len</span><span class="token punctuation">(</span>self<span class="token punctuation">.</span>stack<span class="token punctuation">)</span> <span class="token operator">==</span> <span class="token number">0</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></li><li><p>go</p><pre class="line-numbers language-none"><code class="language-none">åç»­è¡¥å……<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre></li></ol></li><li><p>ç”¨æ ˆå®ç°æ•°æ®çš„é€†ç½®</p><pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token comment"># å°†["aaaa", "bbbbb", "ccccc"] é€†ç½®</span><span class="token keyword">def</span> <span class="token function">resverse</span><span class="token punctuation">(</span>data<span class="token punctuation">:</span><span class="token builtin">list</span><span class="token punctuation">)</span><span class="token punctuation">:</span>s <span class="token operator">=</span> stack<span class="token punctuation">(</span><span class="token punctuation">)</span>    <span class="token comment"># stack ä¸ºä¸Šé¢ä»£ç å®ç°çš„æ ˆ</span>    <span class="token keyword">for</span> d <span class="token keyword">in</span> data<span class="token punctuation">:</span>    s<span class="token punctuation">.</span>append<span class="token punctuation">(</span>d<span class="token punctuation">)</span>    output <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>    <span class="token keyword">while</span> <span class="token keyword">not</span> s<span class="token punctuation">.</span>is_empty<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span>    output<span class="token punctuation">.</span>append<span class="token punctuation">(</span>s<span class="token punctuation">.</span>pop<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>    <span class="token keyword">return</span> output<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></li><li><p>ç”¨æ ˆå®ç°æ‹¬å·å’Œhtmlçš„æ ‡è®°</p><pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span>title<span class="token punctuation">:</span> gallerydate<span class="token punctuation">:</span> <span class="token number">2020</span><span class="token operator">-</span><span class="token number">10</span><span class="token operator">-</span><span class="token number">05</span> <span class="token number">12</span><span class="token punctuation">:</span><span class="token number">00</span><span class="token punctuation">:</span><span class="token number">00</span><span class="token builtin">type</span><span class="token punctuation">:</span> <span class="token string">"gallery"</span>layout<span class="token punctuation">:</span> <span class="token string">"gallery"</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token comment"># æ‹¬å·åŒ¹é…</span><span class="token comment"># å‡å®šç»™å®šçš„å­—ç¬¦ä¸²ä¸­åŒ…å«ä»¥ä¸‹å‡ ç§æ‹¬å·ï¼Œ(), [], [], æ¯ä¸ªæ‹¬å·å¿…é¡»ä¸å…¶ç›¸å¯¹åº”çš„ç»“æŸç¬¦å·åŒ¹é…</span><span class="token keyword">def</span> <span class="token function">is_matched</span><span class="token punctuation">(</span>expr<span class="token punctuation">)</span><span class="token punctuation">:</span>    left <span class="token operator">=</span> <span class="token string">"([&#123;"</span>    right <span class="token operator">=</span> <span class="token string">")]&#125;"</span>    s <span class="token operator">=</span> Stack<span class="token punctuation">(</span><span class="token punctuation">)</span>    <span class="token keyword">for</span> c <span class="token keyword">in</span> expr<span class="token punctuation">:</span>        <span class="token keyword">if</span> c <span class="token keyword">in</span> left<span class="token punctuation">:</span>            s<span class="token punctuation">.</span>push<span class="token punctuation">(</span>c<span class="token punctuation">)</span>        <span class="token keyword">elif</span> c <span class="token keyword">in</span> right<span class="token punctuation">:</span>            <span class="token keyword">if</span> <span class="token keyword">not</span> s<span class="token punctuation">.</span>is_empty<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span>                <span class="token keyword">return</span> <span class="token boolean">False</span>            <span class="token keyword">if</span> right<span class="token punctuation">.</span>index<span class="token punctuation">(</span>c<span class="token punctuation">)</span> <span class="token operator">!=</span> left<span class="token punctuation">.</span>index<span class="token punctuation">(</span>s<span class="token punctuation">.</span>pop<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">:</span>                <span class="token keyword">return</span> <span class="token boolean">False</span>    <span class="token keyword">return</span> s<span class="token punctuation">.</span>is_empty<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token comment"># htmlæ ‡è®°</span><span class="token keyword">def</span> <span class="token function">is_mathced_html</span><span class="token punctuation">(</span>expr<span class="token punctuation">)</span><span class="token punctuation">:</span>        <span class="token comment"># TODO åç»­è¡¥å……</span>        <span class="token keyword">pass</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></li></ol><h2 id="é˜Ÿåˆ—"><a href="#é˜Ÿåˆ—" class="headerlink" title="é˜Ÿåˆ—"></a>é˜Ÿåˆ—</h2><h3 id="é˜Ÿåˆ—çš„å®šä¹‰ï¼š"><a href="#é˜Ÿåˆ—çš„å®šä¹‰ï¼š" class="headerlink" title="é˜Ÿåˆ—çš„å®šä¹‰ï¼š"></a>é˜Ÿåˆ—çš„å®šä¹‰ï¼š</h3><ul><li>é˜Ÿåˆ—æ˜¯ä¸€ä¸ªæ•°æ®é›†åˆï¼Œä»…å…è®¸åœ¨åˆ—è¡¨çš„ä¸€ç«¯è¿›è¡Œæ’å…¥ï¼Œå¦ä¸€ç«¯è¿›è¡Œåˆ é™¤</li><li>æ’å…¥çš„ä¸€ç«¯ç§°ä¸ºé˜Ÿå°¾ï¼Œæ’å…¥å«åšå…¥é˜Ÿ</li><li>åˆ é™¤çš„ä¸€ç«¯å«åšå¯¹å¤´ï¼Œåˆ é™¤åŠ¨ä½œå«åšå‡ºé˜Ÿ</li><li>é˜Ÿåˆ—æ€§è´¨ï¼šå…ˆè¿›å…ˆå‡ºï¼ˆå‚è€ƒæ’é˜Ÿä¹°ä¸œè¥¿ï¼Œå…ˆåˆ°çš„å…ˆä¹°ï¼‰</li><li>åŒå‘é˜Ÿåˆ—ï¼šé˜Ÿåˆ—ä¸¤ç«¯éƒ½å…è®¸è¿›è¡Œè¿›é˜Ÿå’Œå‡ºé˜Ÿæ“ä½œ</li></ul><h3 id="é˜Ÿåˆ—çš„å®ç°"><a href="#é˜Ÿåˆ—çš„å®ç°" class="headerlink" title="é˜Ÿåˆ—çš„å®ç°"></a>é˜Ÿåˆ—çš„å®ç°</h3><p><strong>å•ä¸ªæ•°ç»„å¯å¯ä»¥å®ç°ï¼Œä½†æ˜¯æ•ˆç‡ä½ä¸‹ã€‚å¾ªç¯ä½¿ç”¨æ•°ç»„æ¥å®ç°é˜Ÿåˆ—</strong></p><blockquote><p>ä¸ºäº†å¼€å‘ä¸€ç§å¥å£®çš„é˜Ÿåˆ—å®ç°æ–¹æ³•ï¼Œæˆ‘ä»¬è®©é˜Ÿåˆ—çš„å‰ç«¯è¶‹å‘äºå³ç«¯ï¼Œå¹¶ä¸”è®©é˜Ÿåˆ—å†…çš„å…ƒç´ åœ¨åº•å±‚æ•°ç»„çš„å°¾éƒ¨â€œå¾ªç¯â€ï¼Œå‡å®šåº•å±‚æ•°ç»„çš„é•¿åº¦å›ºé¡¶ä¸ºå›ºå®šå€¼Nï¼Œä»–æ¯”å®é™…é˜Ÿåˆ—ä¸­å…ƒç´ çš„æ•°é‡å¤§ã€‚æ–°çš„å…ƒç´ åœ¨å½“å‰é˜Ÿåˆ—çš„å°¾éƒ¨åˆ©ç”¨å…¥é˜Ÿåˆ—æ“ä½œè¿›å…¥é˜Ÿåˆ—ï¼Œé€æ­¥å°†å…ƒç´ ä»é˜Ÿåˆ—çš„å‰ç«¯è¿›é¢æ’å…¥ç´¢å¼•ä¸ºN-1çš„ä½ç½®ï¼Œæ¥ç€æ˜¯0çš„ä½ç½®ï¼Œæ¥ä¸‹æ¥æ˜¯ç´¢å¼•ä¸º1çš„ä½ç½®ã€‚å¾ªç¯æ’å…¥</p></blockquote><blockquote><p>å®ç°è¿™ç§å¾ªç¯çš„æ–¹æ³•å¹¶ä¸å›°éš¾ï¼Œå½“ä»é˜Ÿåˆ—ä¸­åˆ é™¤ä¸€ä¸ªå…ƒç´ å¹¶æ¬²æ›´æ–°å‰é¢çš„ç´¢å¼•æ—¶ï¼Œæˆ‘æ€•å¯ä»¥ä½¿ç”¨ç®—å¼f&#x3D;(f+1)%Nè¿›è¡Œè®¡ç®—ã€‚</p></blockquote><p><strong>å–æ¨¡æ“ä½œæ—¶å¤„ç†ä¸€ä¸ªå¾ªç¯æ•°ç»„çš„ç†æƒ³æ“ä½œ</strong></p><pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token keyword">class</span> <span class="token class-name">Queue</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span>        DEFAULT_CAPACITY <span class="token operator">=</span> <span class="token number">10</span>    <span class="token keyword">def</span> <span class="token function">__init__</span><span class="token punctuation">(</span>self<span class="token punctuation">)</span><span class="token punctuation">:</span>        self<span class="token punctuation">.</span>_data <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token boolean">None</span><span class="token punctuation">]</span><span class="token operator">*</span>Queue<span class="token punctuation">.</span>DEFAULT_CAPACITY        self<span class="token punctuation">.</span>_size <span class="token operator">=</span> <span class="token number">0</span>        self<span class="token punctuation">.</span>_front <span class="token operator">=</span> <span class="token number">0</span>    <span class="token keyword">def</span> <span class="token function">len</span><span class="token punctuation">(</span>self<span class="token punctuation">)</span><span class="token punctuation">:</span>        <span class="token keyword">return</span> self<span class="token punctuation">.</span>_size    <span class="token keyword">def</span> <span class="token function">is_empty</span><span class="token punctuation">(</span>self<span class="token punctuation">)</span><span class="token punctuation">:</span>        <span class="token keyword">return</span> self<span class="token punctuation">.</span>_size <span class="token operator">==</span> <span class="token number">0</span>    <span class="token keyword">def</span> <span class="token function">first</span><span class="token punctuation">(</span>self<span class="token punctuation">)</span><span class="token punctuation">:</span>        <span class="token keyword">return</span>        <span class="token keyword">if</span> self<span class="token punctuation">.</span>is_empty<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span>            <span class="token keyword">raise</span> Empty<span class="token punctuation">(</span><span class="token string">"QUEUE IS EMPTY"</span><span class="token punctuation">)</span>        <span class="token keyword">return</span> self<span class="token punctuation">.</span>_data<span class="token punctuation">[</span>self<span class="token punctuation">.</span>_front<span class="token punctuation">]</span>        <span class="token keyword">def</span> <span class="token function">get</span><span class="token punctuation">(</span>self<span class="token punctuation">)</span><span class="token punctuation">:</span>        <span class="token triple-quoted-string string">"""        1. åˆ¤æ–­æ˜¯å¦ä¸ºç©º        2. å–å‡ºå¯¹å¤´çš„å…ƒç´         3. ç»´æŠ¤é¦–ä½çš„ä¸‹æ ‡        4. æ•°é‡-1        """</span>        <span class="token keyword">if</span> self<span class="token punctuation">.</span>is_empty<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span>            <span class="token keyword">raise</span> Empty<span class="token punctuation">(</span><span class="token string">"queue is empty"</span><span class="token punctuation">)</span>        answer <span class="token operator">=</span> self<span class="token punctuation">.</span>_data<span class="token punctuation">[</span>self<span class="token punctuation">.</span>_front<span class="token punctuation">]</span>        self<span class="token punctuation">.</span>_data<span class="token punctuation">[</span>self<span class="token punctuation">.</span>_front<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token boolean">None</span>        self<span class="token punctuation">.</span>_front <span class="token operator">=</span> <span class="token punctuation">(</span>self<span class="token punctuation">.</span>_front <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token operator">%</span> <span class="token builtin">len</span><span class="token punctuation">(</span>self<span class="token punctuation">.</span>_data<span class="token punctuation">)</span>        self<span class="token punctuation">.</span>_size <span class="token operator">-=</span> <span class="token number">1</span>        <span class="token keyword">return</span> answer    <span class="token keyword">def</span> <span class="token function">put</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> item<span class="token punctuation">)</span><span class="token punctuation">:</span>        <span class="token triple-quoted-string string">"""        1. åˆ¤æ–­æ˜¯å¦æ»¡äº†, å¦‚æœæ»¡äº†è¦è¿›è¡Œæ‰©å®¹        2.åˆ¤æ–­é˜Ÿå°¾çš„ä½ç½®ï¼Œ å°†å…ƒç´ åŠ å…¥é˜Ÿå°¾        3. size +1        """</span>        <span class="token keyword">if</span> self<span class="token punctuation">.</span>_size <span class="token operator">==</span> <span class="token builtin">len</span><span class="token punctuation">(</span>self<span class="token punctuation">.</span>_data<span class="token punctuation">)</span><span class="token punctuation">:</span>            self<span class="token punctuation">.</span>_resize<span class="token punctuation">(</span><span class="token number">2</span><span class="token operator">*</span><span class="token builtin">len</span><span class="token punctuation">(</span>self<span class="token punctuation">.</span>_data<span class="token punctuation">)</span><span class="token punctuation">)</span>        end_index <span class="token operator">=</span> <span class="token punctuation">(</span>self<span class="token punctuation">.</span>_front <span class="token operator">+</span> self<span class="token punctuation">.</span>_size<span class="token punctuation">)</span> <span class="token operator">%</span> <span class="token builtin">len</span><span class="token punctuation">(</span>self<span class="token punctuation">.</span>_data<span class="token punctuation">)</span>        self<span class="token punctuation">.</span>_data<span class="token punctuation">[</span>end_index<span class="token punctuation">]</span> <span class="token operator">=</span> item        self<span class="token punctuation">.</span>_size <span class="token operator">+=</span> <span class="token number">1</span>        <span class="token keyword">if</span> self<span class="token punctuation">.</span>_size <span class="token operator">==</span> <span class="token builtin">len</span><span class="token punctuation">(</span>self<span class="token punctuation">.</span>_data<span class="token punctuation">)</span><span class="token punctuation">:</span>            self_resize<span class="token punctuation">(</span><span class="token number">2</span><span class="token operator">*</span><span class="token builtin">len</span><span class="token punctuation">(</span>self<span class="token punctuation">.</span>_data<span class="token punctuation">)</span><span class="token punctuation">)</span>            <span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><ol start="2"><li><p>python ä¸­ä½¿ç”¨é˜Ÿåˆ—</p><pre class="line-numbers language-none"><code class="language-none">from queue import Queueq &#x3D; Queue()q.put()q.get()q.queue   # è¾“å‡ºé˜Ÿåˆ—ä¸­çš„æ‰€æœ‰å…ƒç´ <span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></li></ol><p><strong>é˜Ÿåˆ—ä¸»è¦ç”¨åœ¨å¤šä¸ªè¿›ç¨‹å«æ•°æ®å…±äº«ï¼Œå®ç°ä¸šåŠ¡è§£è€¦ï¼Œæé«˜æ•ˆç‡</strong></p><p><strong>ç”Ÿäº§è¿™å°†æ•°æ®æ”¾è¿›é˜Ÿåˆ—ï¼Œ æ¶ˆè´¹è€…ä»é˜Ÿåˆ—ä¸­è·å–æ•°æ®</strong></p><p><strong>é˜Ÿåˆ—ä¸åˆ—è¡¨çš„åŒºåˆ«æ˜¯ï¼Œåˆ—è¡¨ä¸­çš„æ•°æ®è™½ç„¶ä¹Ÿæ˜¯æ’åˆ—çš„ï¼Œä½†æ˜¯åˆ—è¡¨ä¸­çš„æ•°æ®è¢«å–èµ°åè¿˜ä¼šä¿ç•™ï¼Œè€Œé˜Ÿåˆ—ä¸­çš„æ•°æ®å–èµ°åå°†ä¸ä¼šè¢«ä¿ç•™</strong></p><h2 id="é“¾è¡¨"><a href="#é“¾è¡¨" class="headerlink" title="é“¾è¡¨"></a>é“¾è¡¨</h2><h3 id="python-æ¨¡æ‹Ÿè®¾è®¡é“¾è¡¨"><a href="#python-æ¨¡æ‹Ÿè®¾è®¡é“¾è¡¨" class="headerlink" title="python æ¨¡æ‹Ÿè®¾è®¡é“¾è¡¨"></a>python æ¨¡æ‹Ÿè®¾è®¡é“¾è¡¨</h3><pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token keyword">class</span> <span class="token class-name">Node</span><span class="token punctuation">:</span><span class="token triple-quoted-string string">"""å•ä¸ªnodeå¯¹è±¡"""</span><span class="token keyword">def</span> <span class="token function">__init__</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> element<span class="token punctuation">,</span> <span class="token builtin">next</span><span class="token operator">=</span><span class="token boolean">None</span><span class="token punctuation">)</span><span class="token punctuation">:</span>self<span class="token punctuation">.</span>_element <span class="token operator">=</span> elementself<span class="token punctuation">.</span>_next <span class="token operator">=</span> <span class="token builtin">next</span>l <span class="token operator">=</span> Node<span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> Node<span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">,</span> Node<span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">,</span> Node<span class="token punctuation">(</span><span class="token number">4</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h4 id="python-ç”¨é“¾è¡¨å®ç°æ ˆ"><a href="#python-ç”¨é“¾è¡¨å®ç°æ ˆ" class="headerlink" title="python ç”¨é“¾è¡¨å®ç°æ ˆ"></a>python ç”¨é“¾è¡¨å®ç°æ ˆ</h4><pre class="line-numbers language-none"><code class="language-none"># å¾…è¡¥å……<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><h4 id="å•é¡¹åˆ—è¡¨çš„åè½¬"><a href="#å•é¡¹åˆ—è¡¨çš„åè½¬" class="headerlink" title="å•é¡¹åˆ—è¡¨çš„åè½¬"></a>å•é¡¹åˆ—è¡¨çš„åè½¬</h4><pre class="line-numbers language-none"><code class="language-none"># Node ä¸ºä¸Šé¢å®ç°çš„ç±»<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><h1 id="æ•°ç»„"><a href="#æ•°ç»„" class="headerlink" title="æ•°ç»„"></a>æ•°ç»„</h1><h2 id="æ•°ç»„çš„å®šä¹‰"><a href="#æ•°ç»„çš„å®šä¹‰" class="headerlink" title="æ•°ç»„çš„å®šä¹‰"></a>æ•°ç»„çš„å®šä¹‰</h2><ul><li>1.æ‰€è°“æ•°ç»„ï¼Œå°±æ˜¯<code>ç›¸åŒæ•°æ®ç±»å‹çš„å…ƒç´ æŒ‰ä¸€å®šé¡ºåºæ’åˆ—çš„é›†åˆ</code></li><li>2.<code>åœ¨Javaç­‰å…¶ä»–è¯­è¨€ä¸­</code>å¹¶ä¸æ˜¯æ‰€æœ‰çš„æ•°æ®éƒ½èƒ½å­˜å‚¨åˆ°æ•°ç»„ä¸­ï¼Œ<code>åªæœ‰ç›¸åŒç±»å‹çš„æ•°æ®æ‰å¯ä»¥ä¸€èµ·å­˜å‚¨åˆ°æ•°ç»„ä¸­</code>ã€‚</li><li>3.å› ä¸ºæ•°ç»„åœ¨<code>å­˜å‚¨æ•°æ®æ—¶æ˜¯æŒ‰é¡ºåºå­˜å‚¨çš„</code>ï¼Œ<code>å­˜å‚¨æ•°æ®çš„å†…å­˜ä¹Ÿæ˜¯è¿ç»­çš„</code>ï¼Œæ‰€ä»¥ä»–çš„ç‰¹ç‚¹å°±æ˜¯å¯»å€è¯»å–æ•°æ®æ¯”è¾ƒå®¹æ˜“ï¼Œæ’å…¥å’Œåˆ é™¤æ¯”è¾ƒå›°éš¾ã€‚</li></ul><h2 id="python-ä¸­listä¸æ•°ç»„çš„æ¯”è¾ƒ"><a href="#python-ä¸­listä¸æ•°ç»„çš„æ¯”è¾ƒ" class="headerlink" title="python ä¸­listä¸æ•°ç»„çš„æ¯”è¾ƒ"></a>python ä¸­listä¸æ•°ç»„çš„æ¯”è¾ƒ</h2><ul><li>pythonä¸­çš„listæ˜¯pythonçš„å†…ç½®æ•°æ®ç±»å‹ï¼Œ<code>listä¸­çš„æ•°æ®ç±»ä¸å¿…ç›¸åŒçš„ï¼Œè€Œæ•°ç»„ï¼ˆarrayï¼‰çš„ä¸­çš„ç±»å‹å¿…é¡»å…¨éƒ¨ç›¸åŒ</code>ã€‚</li><li>2.åœ¨listä¸­çš„æ•°æ®ç±»å‹ä¿å­˜çš„æ˜¯æ•°æ®çš„<code>å­˜æ”¾çš„åœ°å€ï¼Œç®€å•çš„è¯´å°±æ˜¯æŒ‡é’ˆï¼Œå¹¶éæ•°æ®</code></li><li>3.å¦åˆ™è¿™æ ·ä¿å­˜ä¸€ä¸ªlistå°±å¤ªéº»çƒ¦äº†ï¼Œä¾‹å¦‚list1&#x3D;[1,2,3,â€™aâ€™]éœ€è¦4ä¸ªæŒ‡é’ˆå’Œå››ä¸ªæ•°æ®ï¼Œå¢åŠ äº†å­˜å‚¨å’Œæ¶ˆè€—cpuã€‚</li></ul><p><img src="https://zhangtq-blog.oss-cn-hangzhou.aliyuncs.com/content_picture/1667132410189.png" alt="1667132410189"></p><h1 id="å­—å…¸"><a href="#å­—å…¸" class="headerlink" title="å­—å…¸"></a>å­—å…¸</h1><ul><li><code>æ³¨ï¼š</code>å­—å…¸ç±»å‹æ˜¯Pythonä¸­æœ€å¸¸ç”¨çš„æ•°æ®ç±»å‹ä¹‹ä¸€ï¼Œå®ƒæ˜¯ä¸€ä¸ªé”®å€¼å¯¹çš„é›†åˆï¼Œå­—å…¸é€šè¿‡é”®æ¥ç´¢å¼•ï¼Œå…³è”åˆ°ç›¸å¯¹çš„å€¼ï¼Œç†è®ºä¸Šå®ƒçš„æŸ¥è¯¢å¤æ‚åº¦æ˜¯ O(1)</li></ul><h2 id="å“ˆå¸Œè¡¨-hash-tables"><a href="#å“ˆå¸Œè¡¨-hash-tables" class="headerlink" title="å“ˆå¸Œè¡¨ (hash tables)"></a>å“ˆå¸Œè¡¨ (hash tables)</h2><ul><li>å“ˆå¸Œè¡¨ï¼ˆä¹Ÿå«æ•£åˆ—è¡¨ï¼‰ï¼Œæ ¹æ®é”®å€¼å¯¹(Key-value)è€Œç›´æ¥è¿›è¡Œè®¿é—®çš„æ•°æ®ç»“æ„ã€‚</li><li>å®ƒé€šè¿‡æŠŠkeyå’Œvalueæ˜ å°„åˆ°è¡¨ä¸­ä¸€ä¸ªä½ç½®æ¥è®¿é—®è®°å½•ï¼Œè¿™ç§æŸ¥è¯¢é€Ÿåº¦éå¸¸å¿«ï¼Œæ›´æ–°ä¹Ÿå¿«ã€‚</li><li>è€Œè¿™ä¸ªæ˜ å°„å‡½æ•°å«åšå“ˆå¸Œå‡½æ•°ï¼Œå­˜æ”¾å€¼çš„æ•°ç»„å«åšå“ˆå¸Œè¡¨ã€‚</li><li>é€šè¿‡æŠŠæ¯ä¸ªå¯¹è±¡çš„å…³é”®å­—kä½œä¸ºè‡ªå˜é‡ï¼Œé€šè¿‡ä¸€ä¸ªå“ˆå¸Œå‡½æ•°h(k)ï¼Œå°†kæ˜ å°„åˆ°ä¸‹æ ‡h(k)å¤„ï¼Œå¹¶å°†æ­¤å¯¹è±¡å­˜å‚¨åœ¨è¿™ä¸ªä½ç½®ã€‚</li></ul><h2 id="å…·ä½“æ“ä½œè¿‡ç¨‹"><a href="#å…·ä½“æ“ä½œè¿‡ç¨‹" class="headerlink" title="å…·ä½“æ“ä½œè¿‡ç¨‹"></a>å…·ä½“æ“ä½œè¿‡ç¨‹</h2><ul><li>1.æ•°æ®æ·»åŠ ï¼š<ul><li>æŠŠkeyé€šè¿‡å“ˆå¸Œå‡½æ•°è½¬æ¢æˆä¸€ä¸ªæ•´å‹æ•°å­—ï¼Œç„¶åå°±å°†è¯¥æ•°å­—å¯¹æ•°ç»„é•¿åº¦è¿›è¡Œå–ä½™</li><li>å–ä½™ç»“æœå°±å½“ä½œæ•°ç»„çš„ä¸‹æ ‡ï¼Œå°†valueå­˜å‚¨åœ¨ä»¥è¯¥æ•°å­—ä¸ºä¸‹æ ‡çš„æ•°ç»„ç©ºé—´é‡Œã€‚</li></ul></li><li>2.æ•°æ®æŸ¥è¯¢ï¼šå†æ¬¡ä½¿ç”¨å“ˆå¸Œå‡½æ•°å°†keyè½¬æ¢ä¸ºå¯¹åº”çš„æ•°ç»„ä¸‹æ ‡ï¼Œå¹¶å®šä½åˆ°æ•°ç»„çš„ä½ç½®è·å–valueã€‚</li></ul><h2 id="è§£å†³hashå†²çª"><a href="#è§£å†³hashå†²çª" class="headerlink" title="è§£å†³hashå†²çª"></a>è§£å†³hashå†²çª</h2><ul><li>é“¾åœ°å€æ³•</li><li>å†å“ˆå¸Œæ³•</li><li>å»ºç«‹å…¬å…±æº¢å‡ºåŒº</li><li>å¼€æ”¾å®šå€æ³•</li></ul><h1 id="æ ‘"><a href="#æ ‘" class="headerlink" title="æ ‘"></a>æ ‘</h1><h2 id="æ ‘çš„ç‰¹æ€§"><a href="#æ ‘çš„ç‰¹æ€§" class="headerlink" title="æ ‘çš„ç‰¹æ€§"></a>æ ‘çš„ç‰¹æ€§</h2><ul><li>ä¸€æ£µæ ‘ä¸­çš„ä»»æ„ä¸¤ä¸ªç»“ç‚¹æœ‰ä¸”ä»…æœ‰å”¯ä¸€çš„ä¸€æ¡è·¯å¾„è¿é€šï¼›</li><li>ä¸€æ£µæ ‘å¦‚æœæœ‰nä¸ªç»“ç‚¹ï¼Œåˆ™å®ƒä¸€å®šæœ‰nâˆ’1æ¡è¾¹ï¼›</li><li>åœ¨ä¸€æ£µæ ‘ä¸­åŠ ä¸€æ¡è¾¹å°†ä¼šæ„æˆä¸€ä¸ªå›è·¯ã€‚</li></ul><h2 id="äºŒå‰æ ‘"><a href="#äºŒå‰æ ‘" class="headerlink" title="äºŒå‰æ ‘"></a>äºŒå‰æ ‘</h2><ul><li>äºŒå‰æ ‘æ˜¯ä¸€ç§ç‰¹æ®Šçš„æ ‘ï¼ŒäºŒå‰æ ‘çš„ç‰¹ç‚¹æ˜¯æ¯ä¸ªç»“ç‚¹æœ€å¤šæœ‰ä¸¤ä¸ªå„¿å­ã€‚</li><li>äºŒå‰æ ‘ä½¿ç”¨èŒƒå›´æœ€å¹¿ï¼Œä¸€é¢—å¤šå‰æ ‘ä¹Ÿå¯ä»¥è½¬åŒ–ä¸ºäºŒå‰æ ‘</li></ul><h3 id="æ»¡äºŒå‰æ ‘"><a href="#æ»¡äºŒå‰æ ‘" class="headerlink" title="æ»¡äºŒå‰æ ‘"></a>æ»¡äºŒå‰æ ‘</h3><ul><li>äºŒå‰æ ‘ä¸­æ¯ä¸ªå†…éƒ¨èŠ‚ç‚¹éƒ½æœ‰ä¸¤ä¸ªå„¿å­ï¼Œæ»¡äºŒå‰æ ‘æ‰€æœ‰çš„å¶èŠ‚ç‚¹éƒ½æœ‰ç›¸åŒçš„æ·±åº¦ã€‚</li><li>æ»¡äºŒå‰æ ‘æ˜¯ä¸€æ£µæ·±åº¦ä¸ºhä¸”æœ‰2hâˆ’1ä¸ªç»“ç‚¹çš„äºŒå‰æ ‘ã€‚</li></ul><h2 id="å®Œå…¨äºŒå‰æ ‘"><a href="#å®Œå…¨äºŒå‰æ ‘" class="headerlink" title="å®Œå…¨äºŒå‰æ ‘"></a>å®Œå…¨äºŒå‰æ ‘</h2><ul><li>è‹¥è®¾äºŒå‰æ ‘çš„é«˜åº¦ä¸ºhï¼Œé™¤äº†ç¬¬hå±‚å¤–ï¼Œå…¶ä»–å±‚çš„ç»“ç‚¹æ•°éƒ½è¾¾åˆ°æœ€å¤§ä¸ªæ•°ï¼Œç¬¬hå±‚ä»å³å‘å·¦è¿ç»­ ç¼ºè‹¥å¹²ä¸ªç»“ç‚¹ï¼Œåˆ™ä¸ºå®Œå…¨äºŒå‰æ ‘ã€‚</li></ul><h3 id="æ ‘çš„ç‰¹ç‚¹"><a href="#æ ‘çš„ç‰¹ç‚¹" class="headerlink" title="æ ‘çš„ç‰¹ç‚¹"></a>æ ‘çš„ç‰¹ç‚¹</h3><ul><li>å¦‚æœä¸€æ£µå®Œå…¨äºŒå‰æ ‘çš„çˆ¶èŠ‚ç‚¹ç¼–å·ä¸ºK,åˆ™å…¶å·¦å„¿å­çš„ç¼–å·æ˜¯2K,å³å„¿å­çš„ç»“ç‚¹ç¼–å·ä¸º2K+1</li><li>å·²çŸ¥å®Œå…¨äºŒå‰æ ‘çš„æ€»èŠ‚ç‚¹æ•°ä¸ºnæ±‚å¶å­èŠ‚ç‚¹ä¸ªæ•°ï¼š<ul><li>å½“nä¸ºå¥‡æ•°æ—¶ï¼šï¼ˆn+1ï¼‰&#x2F;2</li><li>å½“nä¸ºå¶æ•°æ—¶ : ï¼ˆnï¼‰&#x2F;2</li></ul></li><li>å·²çŸ¥å®Œå…¨äºŒå‰æ ‘çš„æ€»èŠ‚ç‚¹æ•°ä¸ºnæ±‚çˆ¶èŠ‚ç‚¹ä¸ªæ•°ï¼šä¸ºï¼šn&#x2F;2</li><li>å·²çŸ¥å®Œå…¨äºŒå‰æ ‘çš„æ€»èŠ‚ç‚¹æ•°ä¸ºnæ±‚å¶å­èŠ‚ç‚¹ä¸º2çš„çˆ¶èŠ‚ç‚¹ä¸ªæ•°ï¼š<ul><li>å½“nä¸ºå¥‡æ•°æ—¶ï¼šn&#x2F;2</li><li>å½“nä¸ºå¶æ•°æ—¶ : n&#x2F;2-1</li></ul></li><li>å¦‚æœä¸€æ£µå®Œå…¨äºŒå‰æ ‘æœ‰Nä¸ªç»“ç‚¹ï¼Œé‚£ä¹ˆè¿™æ£µäºŒå‰æ ‘çš„æ·±åº¦ä¸ºã€log2ï¼ˆN+1ï¼‰log2ï¼ˆN+1ï¼‰ã€‘ï¼ˆå‘ä¸Šå–æ•´ï¼‰</li></ul><h3 id="äºŒå‰æ ‘çš„åŸºæœ¬æ“ä½œ"><a href="#äºŒå‰æ ‘çš„åŸºæœ¬æ“ä½œ" class="headerlink" title="äºŒå‰æ ‘çš„åŸºæœ¬æ“ä½œ"></a>äºŒå‰æ ‘çš„åŸºæœ¬æ“ä½œ</h3><ul><li>å‰åºéå†ï¼ˆå…ˆæ ¹ï¼Œå†å·¦ï¼Œæœ€åå³ï¼‰</li><li>ä¸­åºéå†ï¼ˆå…ˆå·¦ï¼Œå†æ ¹ï¼Œæœ€åå³ï¼‰</li><li>ååºéå†ï¼ˆå…ˆå·¦ï¼Œå†å³ï¼Œæœ€åæ ¹ï¼‰</li><li>å±‚æ¬¡éå†ï¼ˆè¯´ä¸æ¸…ï¼‰</li></ul><h4 id="å‰åºéå†"><a href="#å‰åºéå†" class="headerlink" title="å‰åºéå†"></a>å‰åºéå†</h4><p><img src="https://zhangtq-blog.oss-cn-hangzhou.aliyuncs.com/content_picture/1667192671048.png" alt="1667192671048"></p><h4 id="ä¸­åºéå†"><a href="#ä¸­åºéå†" class="headerlink" title="ä¸­åºéå†"></a>ä¸­åºéå†</h4><p><img src="https://zhangtq-blog.oss-cn-hangzhou.aliyuncs.com/content_picture/1667192784746.png" alt="1667192784746"></p><h4 id="ååºéå†"><a href="#ååºéå†" class="headerlink" title="ååºéå†"></a>ååºéå†</h4><p><img src="https://zhangtq-blog.oss-cn-hangzhou.aliyuncs.com/content_picture/1667192846514.png" alt="1667192846514"></p><h4 id="å±‚æ¬¡éå†"><a href="#å±‚æ¬¡éå†" class="headerlink" title="å±‚æ¬¡éå†"></a>å±‚æ¬¡éå†</h4><ul><li>æŒ‰ç…§å±‚çº§éå†çš„æ–¹æ³•</li></ul><h4 id="å‰ä¸­åã€å¹¿åº¦ä¼˜å…ˆéå†"><a href="#å‰ä¸­åã€å¹¿åº¦ä¼˜å…ˆéå†" class="headerlink" title="å‰ä¸­åã€å¹¿åº¦ä¼˜å…ˆéå†"></a>å‰ä¸­åã€å¹¿åº¦ä¼˜å…ˆéå†</h4><pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token keyword">class</span> <span class="token class-name">Node</span><span class="token punctuation">:</span>    <span class="token triple-quoted-string string">"""    å®šä¹‰æ ¹èŠ‚ç‚¹    """</span>    <span class="token keyword">def</span> <span class="token function">__init__</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> elem<span class="token punctuation">,</span> lchild<span class="token operator">=</span><span class="token boolean">None</span><span class="token punctuation">,</span> rchild<span class="token operator">=</span><span class="token boolean">None</span><span class="token punctuation">)</span><span class="token punctuation">:</span>        self<span class="token punctuation">.</span>elem <span class="token operator">=</span> elem        self<span class="token punctuation">.</span>lchild <span class="token operator">=</span> lchild        self<span class="token punctuation">.</span>rchild <span class="token operator">=</span> rchild<span class="token keyword">class</span> <span class="token class-name">BinaryTree</span><span class="token punctuation">:</span>    <span class="token keyword">def</span> <span class="token function">__init__</span><span class="token punctuation">(</span>self<span class="token punctuation">)</span><span class="token punctuation">:</span>        self<span class="token punctuation">.</span>root <span class="token operator">=</span> <span class="token boolean">None</span>    <span class="token keyword">def</span> <span class="token function">add</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> elem<span class="token punctuation">)</span><span class="token punctuation">:</span>        node <span class="token operator">=</span> Node<span class="token punctuation">(</span>elem<span class="token punctuation">)</span>        <span class="token keyword">if</span> self<span class="token punctuation">.</span>root <span class="token keyword">is</span> <span class="token boolean">None</span><span class="token punctuation">:</span>            self<span class="token punctuation">.</span>root <span class="token operator">=</span> node            <span class="token keyword">return</span>        <span class="token comment"># å¦‚æœæ ¹èŠ‚ç‚¹ä¸ä¸ºNoneï¼Œ åˆ¤æ–­å·¦å³èŠ‚ç‚¹</span>        queue <span class="token operator">=</span> <span class="token punctuation">[</span>self<span class="token punctuation">.</span>root<span class="token punctuation">]</span>        <span class="token keyword">print</span><span class="token punctuation">(</span>queue<span class="token punctuation">)</span>        <span class="token keyword">while</span> queue<span class="token punctuation">:</span>            cur_node <span class="token operator">=</span> queue<span class="token punctuation">.</span>pop<span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span>            <span class="token keyword">if</span> cur_node<span class="token punctuation">.</span>lchild <span class="token keyword">is</span> <span class="token boolean">None</span><span class="token punctuation">:</span>                cur_node<span class="token punctuation">.</span>lchild <span class="token operator">=</span> node                <span class="token keyword">return</span>            <span class="token keyword">else</span><span class="token punctuation">:</span>                queue<span class="token punctuation">.</span>append<span class="token punctuation">(</span>cur_node<span class="token punctuation">.</span>lchild<span class="token punctuation">)</span>            <span class="token keyword">if</span> cur_node<span class="token punctuation">.</span>rchild <span class="token keyword">is</span> <span class="token boolean">None</span><span class="token punctuation">:</span>                cur_node<span class="token punctuation">.</span>rchild <span class="token operator">=</span> node                <span class="token keyword">return</span>            <span class="token keyword">else</span><span class="token punctuation">:</span>                queue<span class="token punctuation">.</span>append<span class="token punctuation">(</span>cur_node<span class="token punctuation">.</span>rchild<span class="token punctuation">)</span>    <span class="token keyword">def</span> <span class="token function">bread_order</span><span class="token punctuation">(</span>self<span class="token punctuation">)</span><span class="token punctuation">:</span>        <span class="token keyword">if</span> self<span class="token punctuation">.</span>root <span class="token keyword">is</span> <span class="token boolean">None</span><span class="token punctuation">:</span>            <span class="token keyword">return</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>        queue <span class="token operator">=</span> <span class="token punctuation">[</span>self<span class="token punctuation">.</span>root<span class="token punctuation">]</span>        ret <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>        <span class="token keyword">while</span> queue<span class="token punctuation">:</span>            cur_node <span class="token operator">=</span> queue<span class="token punctuation">.</span>pop<span class="token punctuation">(</span><span class="token punctuation">)</span>            ret<span class="token punctuation">.</span>append<span class="token punctuation">(</span>cur_node<span class="token punctuation">.</span>elem<span class="token punctuation">)</span>            <span class="token keyword">if</span> cur_node<span class="token punctuation">.</span>lchild <span class="token keyword">is</span> <span class="token keyword">not</span> <span class="token boolean">None</span><span class="token punctuation">:</span>                queue<span class="token punctuation">.</span>append<span class="token punctuation">(</span>cur_node<span class="token punctuation">.</span>lchild<span class="token punctuation">)</span>            <span class="token keyword">if</span> cur_node<span class="token punctuation">.</span>rchild <span class="token keyword">is</span> <span class="token keyword">not</span> <span class="token boolean">None</span><span class="token punctuation">:</span>                queue<span class="token punctuation">.</span>append<span class="token punctuation">(</span>cur_node<span class="token punctuation">.</span>rchild<span class="token punctuation">)</span>        <span class="token keyword">return</span> ret    <span class="token keyword">def</span> <span class="token function">pre_order</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> root<span class="token punctuation">,</span> ret<span class="token operator">=</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">:</span>        queue <span class="token operator">=</span> <span class="token punctuation">[</span>self<span class="token punctuation">.</span>root<span class="token punctuation">]</span>        <span class="token keyword">if</span> root <span class="token keyword">is</span> <span class="token boolean">None</span><span class="token punctuation">:</span>            <span class="token keyword">return</span> ret        <span class="token comment">#cur_node = queue.pop()</span>        ret<span class="token punctuation">.</span>append<span class="token punctuation">(</span>root<span class="token punctuation">.</span>elem<span class="token punctuation">)</span>        self<span class="token punctuation">.</span>pre_order<span class="token punctuation">(</span>root<span class="token punctuation">.</span>lchild<span class="token punctuation">,</span> ret<span class="token punctuation">)</span>        self<span class="token punctuation">.</span>pre_order<span class="token punctuation">(</span>root<span class="token punctuation">.</span>rchild<span class="token punctuation">,</span> ret<span class="token punctuation">)</span>        <span class="token keyword">return</span> ret    <span class="token keyword">def</span> <span class="token function">mid_order</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> root<span class="token punctuation">,</span> ret<span class="token operator">=</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">:</span>        <span class="token keyword">if</span> root <span class="token keyword">is</span> <span class="token boolean">None</span><span class="token punctuation">:</span>            <span class="token keyword">return</span> ret        self<span class="token punctuation">.</span>mid_order<span class="token punctuation">(</span>root<span class="token punctuation">.</span>lchild<span class="token punctuation">,</span> ret<span class="token punctuation">)</span>        ret<span class="token punctuation">.</span>append<span class="token punctuation">(</span>root<span class="token punctuation">.</span>elem<span class="token punctuation">)</span>        self<span class="token punctuation">.</span>mid_order<span class="token punctuation">(</span>root<span class="token punctuation">.</span>rchild<span class="token punctuation">,</span> ret<span class="token punctuation">)</span>        <span class="token keyword">return</span> ret    <span class="token keyword">def</span> <span class="token function">after_order</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> root<span class="token punctuation">,</span> ret<span class="token operator">=</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">:</span>        <span class="token keyword">if</span> root <span class="token keyword">is</span> <span class="token boolean">None</span><span class="token punctuation">:</span>            <span class="token keyword">return</span> ret        self<span class="token punctuation">.</span>after_order<span class="token punctuation">(</span>root<span class="token punctuation">.</span>lchild<span class="token punctuation">,</span> ret<span class="token punctuation">)</span>        self<span class="token punctuation">.</span>after_order<span class="token punctuation">(</span>root<span class="token punctuation">.</span>rchild<span class="token punctuation">,</span> ret<span class="token punctuation">)</span>        ret<span class="token punctuation">.</span>append<span class="token punctuation">(</span>root<span class="token punctuation">.</span>elem<span class="token punctuation">)</span>        <span class="token keyword">return</span> ret<span class="token keyword">if</span> __name__ <span class="token operator">==</span> <span class="token string">"__main__"</span><span class="token punctuation">:</span>    b_tree <span class="token operator">=</span> BinaryTree<span class="token punctuation">(</span><span class="token punctuation">)</span>    b_tree<span class="token punctuation">.</span>add<span class="token punctuation">(</span><span class="token string">"A"</span><span class="token punctuation">)</span>    b_tree<span class="token punctuation">.</span>add<span class="token punctuation">(</span><span class="token string">"B"</span><span class="token punctuation">)</span>    b_tree<span class="token punctuation">.</span>add<span class="token punctuation">(</span><span class="token string">"c"</span><span class="token punctuation">)</span>    <span class="token comment">#print(b_tree.bread_order())</span>    <span class="token keyword">print</span><span class="token punctuation">(</span>b_tree<span class="token punctuation">.</span>pre_order<span class="token punctuation">(</span>b_tree<span class="token punctuation">.</span>root<span class="token punctuation">)</span><span class="token punctuation">)</span>    <span class="token keyword">print</span><span class="token punctuation">(</span>b_tree<span class="token punctuation">.</span>mid_order<span class="token punctuation">(</span>b_tree<span class="token punctuation">.</span>root<span class="token punctuation">)</span><span class="token punctuation">)</span>    <span class="token keyword">print</span><span class="token punctuation">(</span>b_tree<span class="token punctuation">.</span>after_order<span class="token punctuation">(</span>b_tree<span class="token punctuation">.</span>root<span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h1 id="B-x2F-Tree"><a href="#B-x2F-Tree" class="headerlink" title="B+&#x2F;-Tree"></a>B+&#x2F;-Tree</h1><h2 id="B-Tree"><a href="#B-Tree" class="headerlink" title="B-Tree"></a>B-Tree</h2><ul><li>æ¯ä¸ªèŠ‚ç‚¹å ç”¨ä¸€ä¸ªç›˜å—çš„ç£ç›˜ç©ºé—´ï¼Œä¸€ä¸ªèŠ‚ç‚¹ä¸Šæœ‰ä¸¤ä¸ªå‡åºæ’åºçš„å…³é”®å­—å’Œä¸‰ä¸ªæŒ‡å‘å­æ ‘æ ¹èŠ‚ç‚¹çš„æŒ‡é’ˆï¼ŒæŒ‡é’ˆå­˜å‚¨çš„æ˜¯å­èŠ‚ç‚¹æ‰€åœ¨ç£ç›˜å—çš„åœ°å€ã€‚</li><li>ä¸¤ä¸ªå…³é”®è¯åˆ’åˆ†æˆçš„ä¸‰ä¸ªèŒƒå›´åŸŸå¯¹åº”ä¸‰ä¸ªæŒ‡é’ˆæŒ‡å‘çš„å­æ ‘çš„æ•°æ®çš„èŒƒå›´åŸŸã€‚</li><li>ä»¥æ ¹èŠ‚ç‚¹ä¸ºä¾‹ï¼Œå…³é”®å­—ä¸º17å’Œ35ï¼ŒP1æŒ‡é’ˆæŒ‡å‘çš„å­æ ‘çš„æ•°æ®èŒƒå›´ä¸ºå°äº17ï¼ŒP2æŒ‡é’ˆæŒ‡å‘çš„å­æ ‘çš„æ•°æ®èŒƒå›´ä¸º17~35ï¼ŒP3æŒ‡é’ˆæŒ‡å‘çš„å­æ ‘çš„æ•°æ®èŒƒå›´ä¸ºå¤§äº35ã€‚</li></ul><p><img src="https://zhangtq-blog.oss-cn-hangzhou.aliyuncs.com/content_picture/1667223682276.png" alt="1667223682276"></p><pre class="line-numbers language-none"><code class="language-none">&#39;&#39;&#39;æ¨¡æ‹ŸæŸ¥æ‰¾å…³é”®å­—29çš„è¿‡ç¨‹ï¼š&#39;&#39;&#39;# æ ¹æ®æ ¹èŠ‚ç‚¹æ‰¾åˆ°ç£ç›˜å—1ï¼Œè¯»å…¥å†…å­˜ã€‚ã€ç£ç›˜I&#x2F;Oæ“ä½œç¬¬1æ¬¡ã€‘# æ¯”è¾ƒå…³é”®å­—29åœ¨åŒºé—´ï¼ˆ17,35ï¼‰ï¼Œæ‰¾åˆ°ç£ç›˜å—1çš„æŒ‡é’ˆP2ã€‚# æ ¹æ®P2æŒ‡é’ˆæ‰¾åˆ°ç£ç›˜å—3ï¼Œè¯»å…¥å†…å­˜ã€‚ã€ç£ç›˜I&#x2F;Oæ“ä½œç¬¬2æ¬¡ã€‘# æ¯”è¾ƒå…³é”®å­—29åœ¨åŒºé—´ï¼ˆ26,30ï¼‰ï¼Œæ‰¾åˆ°ç£ç›˜å—3çš„æŒ‡é’ˆP2ã€‚# æ ¹æ®P2æŒ‡é’ˆæ‰¾åˆ°ç£ç›˜å—8ï¼Œè¯»å…¥å†…å­˜ã€‚ã€ç£ç›˜I&#x2F;Oæ“ä½œç¬¬3æ¬¡ã€‘# åœ¨ç£ç›˜å—8ä¸­çš„å…³é”®å­—åˆ—è¡¨ä¸­æ‰¾åˆ°å…³é”®å­—29ã€‚<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h2 id="B-Tree-1"><a href="#B-Tree-1" class="headerlink" title="B+Tree"></a>B+Tree</h2><ul><li>B+Treeæ˜¯åœ¨B-TreeåŸºç¡€ä¸Šçš„ä¸€ç§ä¼˜åŒ–<code>ï¼Œä½¿å…¶æ›´é€‚åˆå®ç°å¤–å­˜å‚¨ç´¢å¼•ç»“æ„ï¼Œ</code>InnoDBå­˜å‚¨å¼•æ“å°±æ˜¯ç”¨B+Treeå®ç°å…¶ç´¢å¼•ç»“æ„&#96;ã€‚</li><li>B-Treeç»“æ„å›¾ä¸­å¯ä»¥çœ‹åˆ°æ¯ä¸ªèŠ‚ç‚¹ä¸­ä¸ä»…åŒ…å«æ•°æ®çš„keyå€¼ï¼Œè¿˜æœ‰dataå€¼</li><li>è€Œæ¯ä¸€ä¸ªé¡µçš„å­˜å‚¨ç©ºé—´æ˜¯æœ‰é™çš„ï¼Œå¦‚æœdataæ•°æ®è¾ƒå¤§æ—¶å°†ä¼šå¯¼è‡´æ¯ä¸ªèŠ‚ç‚¹ï¼ˆå³ä¸€ä¸ªé¡µï¼‰èƒ½å­˜å‚¨çš„keyçš„æ•°é‡å¾ˆå°</li><li>å½“å­˜å‚¨çš„æ•°æ®é‡å¾ˆå¤§æ—¶åŒæ ·ä¼šå¯¼è‡´B-Treeçš„æ·±åº¦è¾ƒå¤§ï¼Œå¢å¤§æŸ¥è¯¢æ—¶çš„ç£ç›˜I&#x2F;Oæ¬¡æ•°ï¼Œè¿›è€Œå½±å“æŸ¥è¯¢æ•ˆç‡ã€‚</li><li>åœ¨B+Treeä¸­ï¼Œæ‰€æœ‰æ ¹èŠ‚ç‚¹åªå­˜å‚¨ é”®å’ŒæŒ‡é’ˆï¼Œåªæœ‰å¶å­èŠ‚ç‚¹æ‰å­˜æ”¾æ•°æ®&#96;</li></ul><h2 id="mysqlç´¢å¼•çš„åº•å±‚å®ç°"><a href="#mysqlç´¢å¼•çš„åº•å±‚å®ç°" class="headerlink" title="mysqlç´¢å¼•çš„åº•å±‚å®ç°"></a>mysqlç´¢å¼•çš„åº•å±‚å®ç°</h2><ul><li>InnoDBå­˜å‚¨å¼•æ“ä¸­é¡µçš„å¤§å°ä¸º16KBï¼Œä¸€èˆ¬è¡¨çš„ä¸»é”®ç±»å‹ä¸ºINTï¼ˆå ç”¨4ä¸ªå­—èŠ‚ï¼‰æˆ–BIGINTï¼ˆå ç”¨8ä¸ªå­—èŠ‚ï¼‰ï¼ŒæŒ‡é’ˆç±»å‹ä¹Ÿä¸€èˆ¬ä¸º4æˆ–8ä¸ªå­—èŠ‚</li><li>ä¹Ÿå°±æ˜¯è¯´ä¸€ä¸ªé¡µï¼ˆB+Treeä¸­çš„ä¸€ä¸ªèŠ‚ç‚¹ï¼‰ä¸­å¤§æ¦‚å­˜å‚¨16KB&#x2F;(8B+8B)&#x3D;1Kä¸ªé”®å€¼ï¼ˆè¿™é‡Œçš„Kå–å€¼ä¸ºã€–10ã€—^3ï¼‰ã€‚</li><li>ä¹Ÿå°±æ˜¯è¯´ä¸€ä¸ªæ·±åº¦ä¸º3çš„B+Treeç´¢å¼•å¯ä»¥ç»´æŠ¤10^3 * 10^3 * 10^3 &#x3D; 10äº¿ æ¡è®°å½•ã€‚</li><li>è¯´æ˜ï¼š<ul><li>å®é™…æƒ…å†µä¸­æ¯ä¸ªèŠ‚ç‚¹å¯èƒ½ä¸èƒ½å¡«å……æ»¡ï¼Œå› æ­¤åœ¨æ•°æ®åº“ä¸­ï¼ŒB+Treeçš„é«˜åº¦ä¸€èˆ¬éƒ½åœ¨2~4å±‚ã€‚</li><li>mysqlçš„InnoDBå­˜å‚¨å¼•æ“åœ¨è®¾è®¡æ—¶æ˜¯å°†æ ¹èŠ‚ç‚¹å¸¸é©»å†…å­˜çš„ï¼Œä¹Ÿå°±æ˜¯è¯´æŸ¥æ‰¾æŸä¸€é”®å€¼çš„è¡Œè®°å½•æ—¶æœ€å¤šåªéœ€è¦1~3æ¬¡ç£ç›˜I&#x2F;Oæ“ä½œã€‚</li></ul></li></ul><h1 id="äºŒåˆ†æŸ¥æ‰¾"><a href="#äºŒåˆ†æŸ¥æ‰¾" class="headerlink" title="äºŒåˆ†æŸ¥æ‰¾"></a>äºŒåˆ†æŸ¥æ‰¾</h1><pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token keyword">def</span> <span class="token function">binary_search</span><span class="token punctuation">(</span>li<span class="token punctuation">,</span> target<span class="token punctuation">)</span><span class="token punctuation">:</span>    low <span class="token operator">=</span> <span class="token number">0</span>    high <span class="token operator">=</span> <span class="token builtin">len</span><span class="token punctuation">(</span>li<span class="token punctuation">)</span> <span class="token operator">-</span><span class="token number">1</span>        <span class="token keyword">while</span> low <span class="token operator">&lt;</span> high<span class="token punctuation">:</span>                    mid <span class="token operator">=</span> <span class="token punctuation">(</span>low<span class="token operator">+</span>high<span class="token punctuation">)</span> <span class="token operator">/</span> <span class="token number">2</span>                <span class="token keyword">if</span> li<span class="token punctuation">[</span>mid<span class="token punctuation">]</span> <span class="token operator">==</span> target<span class="token punctuation">:</span>            <span class="token keyword">return</span> <span class="token boolean">True</span>        <span class="token keyword">if</span> li<span class="token punctuation">[</span>mid<span class="token punctuation">]</span> <span class="token operator">&lt;</span> target<span class="token punctuation">:</span>            high <span class="token operator">=</span> mid <span class="token operator">-</span><span class="token number">1</span>        <span class="token keyword">else</span><span class="token punctuation">:</span>            low <span class="token operator">=</span> mid <span class="token operator">+</span><span class="token number">1</span>    <span class="token keyword">return</span> <span class="token boolean">False</span>        <span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h1 id="åŸºç¡€ç®—æ³•"><a href="#åŸºç¡€ç®—æ³•" class="headerlink" title="åŸºç¡€ç®—æ³•"></a>åŸºç¡€ç®—æ³•</h1><h2 id="ç®€å•æ’åº"><a href="#ç®€å•æ’åº" class="headerlink" title="ç®€å•æ’åº"></a>ç®€å•æ’åº</h2><blockquote><p>å‰ä¸‰ä¸­æ˜¯å¾ˆlowçš„æ’åºç®—æ³•</p></blockquote><h4 id="å†’æ³¡æ’åº"><a href="#å†’æ³¡æ’åº" class="headerlink" title="å†’æ³¡æ’åº"></a>å†’æ³¡æ’åº</h4><pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token keyword">def</span> <span class="token function">bubble_sort</span><span class="token punctuation">(</span>li<span class="token punctuation">)</span><span class="token punctuation">:</span>    <span class="token triple-quoted-string string">"""    æ€»ç»“ï¼š    å¯¹äºä¸€ä¸ªæœ‰iä¸ªæ•°å­—çš„åºåˆ—ï¼Œå®Œæˆæ’åºéœ€è¦i-1è½®ï¼Œ å¦‚æœæ¯è½®è®°ä¸ºiï¼Œ ç¬¬jè½®éœ€è¦i-jæ¬¡ï¼Œéœ€è¦ä¸¤å±‚å¾ªç¯ï¼Œå†…å¾ªç¯å‡ è½®æ¯”è¾ƒæ¬¡æ•°ï¼Œå¤–å¾ªç¯æ§åˆ¶æ¯”è¾ƒè½®æ•°    """</span>    <span class="token keyword">for</span> i <span class="token keyword">in</span> <span class="token builtin">range</span><span class="token punctuation">(</span><span class="token builtin">len</span><span class="token punctuation">(</span>li<span class="token punctuation">)</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">:</span>        is_exchang <span class="token operator">=</span> <span class="token boolean">False</span>        <span class="token keyword">for</span> j <span class="token keyword">in</span> <span class="token builtin">range</span><span class="token punctuation">(</span><span class="token builtin">len</span><span class="token punctuation">(</span>li<span class="token punctuation">)</span><span class="token operator">-</span>i<span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">:</span>            <span class="token keyword">if</span> li<span class="token punctuation">[</span>j<span class="token punctuation">]</span> <span class="token operator">></span> li<span class="token punctuation">[</span>j<span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">:</span>                li<span class="token punctuation">[</span>j<span class="token punctuation">]</span><span class="token punctuation">,</span> li<span class="token punctuation">[</span>j<span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">=</span> li<span class="token punctuation">[</span>j<span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">,</span> li<span class="token punctuation">[</span>j<span class="token punctuation">]</span>                is_exchange <span class="token operator">=</span> <span class="token boolean">True</span>        <span class="token keyword">if</span> <span class="token keyword">not</span> is_exchange<span class="token punctuation">:</span>            <span class="token keyword">break</span>    <span class="token keyword">return</span> li<span class="token comment"># æ—¶é—´å¤æ‚åº¦o(n*2)</span><span class="token comment"># ç©ºé—´å¤æ‚åº¦o(1)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h4 id="é€‰æ‹©æ’åº"><a href="#é€‰æ‹©æ’åº" class="headerlink" title="é€‰æ‹©æ’åº"></a>é€‰æ‹©æ’åº</h4><pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token keyword">def</span> <span class="token function">select_sort</span><span class="token punctuation">(</span>li<span class="token punctuation">)</span><span class="token punctuation">:</span>    <span class="token triple-quoted-string string">"""    æ€»ç»“ï¼šæ¯ä¸€æ¬¡ä»æœªåºåˆ—ä¸­å¯»æ‰¾æœ€å°å…ƒç´ ï¼Œæ”¾åœ¨å·²æ’åºåºåˆ—çš„èµ·å§‹ä½ç½®ï¼Œ ç„¶ååœ¨æœªæ’åºåºåˆ—ä¸­å¯»æ‰¾æœ€å°å…ƒç´ æ”¾åœ¨å·²æ’åºåºåˆ—çš„å°¾ç«¯        """</span>    <span class="token keyword">for</span> i <span class="token keyword">in</span> <span class="token builtin">range</span><span class="token punctuation">(</span><span class="token builtin">len</span><span class="token punctuation">(</span>li<span class="token punctuation">)</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">:</span>        min_index <span class="token operator">=</span> i        <span class="token keyword">for</span> j <span class="token keyword">in</span> <span class="token builtin">range</span><span class="token punctuation">(</span>i<span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token builtin">len</span><span class="token punctuation">(</span>li<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">:</span>            <span class="token keyword">if</span> li<span class="token punctuation">[</span>min_index<span class="token punctuation">]</span> <span class="token operator">></span> li<span class="token punctuation">[</span>j<span class="token punctuation">]</span><span class="token punctuation">:</span>                min_index <span class="token operator">=</span> j        li<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">,</span> li<span class="token punctuation">[</span>min_index<span class="token punctuation">]</span> <span class="token operator">=</span> li<span class="token punctuation">[</span>min_index<span class="token punctuation">]</span><span class="token punctuation">,</span> li<span class="token punctuation">[</span>i<span class="token punctuation">]</span>    <span class="token keyword">return</span> li<span class="token comment"># æ—¶é—´å¤æ‚åº¦o(n*2)</span><span class="token comment"># ç©ºé—´å¤æ‚åº¦o(1)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h4 id="æ’å…¥æ’åº"><a href="#æ’å…¥æ’åº" class="headerlink" title="æ’å…¥æ’åº"></a>æ’å…¥æ’åº</h4><pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token keyword">def</span> <span class="token function">insert_sort</span><span class="token punctuation">(</span>li<span class="token punctuation">)</span><span class="token punctuation">:</span><span class="token triple-quoted-string string">"""æ¯æ¬¡å–æœªæ’åºåºåˆ—çš„å…ƒç´ ï¼Œåœ¨å·²æ’åºåºåˆ—ä¸­å¯»æ‰¾åˆé€‚ä½ç½®æ’å…¥"""</span>    <span class="token keyword">for</span> i <span class="token keyword">in</span> <span class="token builtin">range</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token builtin">len</span><span class="token punctuation">(</span>li<span class="token punctuation">)</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">:</span>        <span class="token keyword">for</span> j <span class="token keyword">in</span> <span class="token builtin">range</span><span class="token punctuation">(</span>i<span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">:</span>            <span class="token keyword">if</span> li<span class="token punctuation">[</span>j<span class="token punctuation">]</span> <span class="token operator">&lt;</span> li<span class="token punctuation">[</span>j<span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">:</span>                li<span class="token punctuation">[</span>j<span class="token punctuation">]</span><span class="token punctuation">,</span> li<span class="token punctuation">[</span>j<span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">=</span> li<span class="token punctuation">[</span>j<span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">,</span> li<span class="token punctuation">[</span>j<span class="token punctuation">]</span>    <span class="token keyword">return</span> li<span class="token comment"># æ—¶é—´å¤æ‚åº¦o(n*2)</span><span class="token comment"># ç©ºé—´å¤æ‚åº¦o(1)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h4 id="å¿«æ’"><a href="#å¿«æ’" class="headerlink" title="å¿«æ’"></a>å¿«æ’</h4><pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token keyword">def</span> <span class="token function">quick_sort</span><span class="token punctuation">(</span>data<span class="token punctuation">,</span> left<span class="token punctuation">,</span> right<span class="token punctuation">)</span><span class="token punctuation">:</span>    <span class="token keyword">if</span> left <span class="token operator">&lt;</span> right<span class="token punctuation">:</span>        mid <span class="token operator">=</span> partition<span class="token punctuation">(</span>data<span class="token punctuation">,</span> left<span class="token punctuation">,</span> right<span class="token punctuation">)</span>    <span class="token comment"># midè¿”å›çš„æ˜¯ä¸Šä¸€ä¸ªç”¨æ¥æ’åºé‚£ä¸ªæ•°çš„ä¸‹æ ‡</span>        quick_sort<span class="token punctuation">(</span>data<span class="token punctuation">,</span> left<span class="token punctuation">,</span> mid <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">)</span>        quick_sort<span class="token punctuation">(</span>data<span class="token punctuation">,</span> mid <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">,</span>right<span class="token punctuation">)</span><span class="token comment"># æ¯æ‰§è¡Œä¸€æ¬¡partitionå‡½æ•°éƒ½å¯ä»¥å®ç°å°†æŸä¸ªæ•°å·¦è¾¹éƒ½æ¯”è¿™ä¸ªæ•°å° å³è¾¹éƒ½æ¯”è¿™ä¸ªæ•°å¤§</span><span class="token keyword">def</span> <span class="token function">partition</span><span class="token punctuation">(</span>data<span class="token punctuation">,</span> left<span class="token punctuation">,</span> right<span class="token punctuation">)</span><span class="token punctuation">:</span>    tmp <span class="token operator">=</span> data<span class="token punctuation">[</span>left<span class="token punctuation">]</span>    <span class="token keyword">while</span> left <span class="token operator">&lt;</span> right<span class="token punctuation">:</span>        <span class="token keyword">while</span> left <span class="token operator">&lt;</span> right <span class="token keyword">and</span> data<span class="token punctuation">[</span>right<span class="token punctuation">]</span> <span class="token operator">>=</span> tmp<span class="token punctuation">:</span>     <span class="token comment"># ä»å³å‘å·¦æ‰¾å°äºtmpçš„æ•°æ”¾åˆ°å·¦è¾¹ç©ºä½ç½®</span>            right <span class="token operator">-=</span> <span class="token number">1</span>        data<span class="token punctuation">[</span>left<span class="token punctuation">]</span> <span class="token operator">=</span> data<span class="token punctuation">[</span>right<span class="token punctuation">]</span>                       <span class="token comment"># å°†å³è¾¹å°äºtmpå€¼å¾—æ•°æ”¾åˆ°å·¦è¾¹ç©ºä½ç½®</span>        <span class="token keyword">while</span> left <span class="token operator">&lt;</span> right <span class="token keyword">and</span> data<span class="token punctuation">[</span>left<span class="token punctuation">]</span> <span class="token operator">&lt;=</span> tmp<span class="token punctuation">:</span>      <span class="token comment"># ä»å·¦å‘å³æ‰¾åˆ°å¤§äºtmpçš„å€¼æ”¾åˆ°å³è¾¹ç©ºä½ç½®</span>            left <span class="token operator">+=</span> <span class="token number">1</span>        data<span class="token punctuation">[</span>right<span class="token punctuation">]</span> <span class="token operator">=</span> data<span class="token punctuation">[</span>left<span class="token punctuation">]</span>                       <span class="token comment"># å°†å³è¾¹å¤§äºtmpå€¼å¾—æ•°æ”¾åˆ°å³è¾¹ç©ºä½ç½®</span>    data<span class="token punctuation">[</span>left<span class="token punctuation">]</span> <span class="token operator">=</span> tmp    <span class="token keyword">return</span> left<span class="token comment"># æ—¶é—´å¤æ‚åº¦0(nlogn)</span><span class="token comment"># ç©ºé—´å¤æ‚åº¦o(1)</span>   <span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h4 id="å½’å¹¶æ’åº"><a href="#å½’å¹¶æ’åº" class="headerlink" title="å½’å¹¶æ’åº"></a>å½’å¹¶æ’åº</h4><pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token keyword">def</span> <span class="token function">merge</span><span class="token punctuation">(</span>left<span class="token punctuation">,</span> right<span class="token punctuation">)</span><span class="token punctuation">:</span><span class="token triple-quoted-string string">"""å¯¹ä¸¤ä¸ªæœ‰åºçš„åˆ—è¡¨è¿›è¡Œåˆå¹¶"""</span>    ll <span class="token operator">=</span> rr <span class="token operator">=</span> <span class="token number">0</span>    result <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>    <span class="token keyword">while</span> ll <span class="token operator">&lt;</span> <span class="token builtin">len</span><span class="token punctuation">(</span>left<span class="token punctuation">)</span> <span class="token keyword">and</span> rr <span class="token operator">&lt;</span> <span class="token builtin">len</span><span class="token punctuation">(</span>right<span class="token punctuation">)</span><span class="token punctuation">:</span>        <span class="token keyword">if</span> left<span class="token punctuation">[</span>ll<span class="token punctuation">]</span> <span class="token operator">&lt;</span> right<span class="token punctuation">[</span>rr<span class="token punctuation">]</span><span class="token punctuation">:</span>            result<span class="token punctuation">.</span>append<span class="token punctuation">(</span>left<span class="token punctuation">[</span>ll<span class="token punctuation">]</span><span class="token punctuation">)</span>            ll <span class="token operator">+=</span> <span class="token number">1</span>        <span class="token keyword">else</span><span class="token punctuation">:</span>            result<span class="token punctuation">.</span>append<span class="token punctuation">(</span>right<span class="token punctuation">[</span>rr<span class="token punctuation">]</span><span class="token punctuation">)</span>            rr <span class="token operator">+=</span> <span class="token number">1</span>    result <span class="token operator">+=</span> left<span class="token punctuation">[</span>ll<span class="token punctuation">:</span><span class="token punctuation">]</span>    result <span class="token operator">+=</span> right<span class="token punctuation">[</span>rr<span class="token punctuation">:</span><span class="token punctuation">]</span>    <span class="token keyword">return</span> result<span class="token keyword">def</span> <span class="token function">merge_sort</span><span class="token punctuation">(</span>data<span class="token punctuation">)</span><span class="token punctuation">:</span>    <span class="token keyword">if</span> <span class="token builtin">len</span><span class="token punctuation">(</span>data<span class="token punctuation">)</span> <span class="token operator">&lt;=</span><span class="token number">1</span><span class="token punctuation">:</span>        <span class="token keyword">return</span> data    middle <span class="token operator">=</span> <span class="token builtin">len</span><span class="token punctuation">(</span>data<span class="token punctuation">)</span> <span class="token operator">//</span> <span class="token number">2</span>    <span class="token comment"># ä»ä¸­é—´åˆ’åˆ†</span>    left <span class="token operator">=</span> merge_sort<span class="token punctuation">(</span>data<span class="token punctuation">[</span><span class="token punctuation">:</span>middle<span class="token punctuation">]</span><span class="token punctuation">)</span>  <span class="token comment"># å°†å·¦ä¾§åˆ—è¡¨è¿›è¡Œæ’åº</span>    right <span class="token operator">=</span> merge_sort<span class="token punctuation">(</span>data<span class="token punctuation">[</span>middle<span class="token punctuation">:</span><span class="token punctuation">]</span><span class="token punctuation">)</span>  <span class="token comment"># å°†å³ä¾§åˆ—è¡¨è¿›è¡Œæ’åº</span>    <span class="token keyword">return</span> merge<span class="token punctuation">(</span>left<span class="token punctuation">,</span> right<span class="token punctuation">)</span>  <span class="token comment"># å½’å¹¶</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>]]></content>
      
      
      <categories>
          
          <category> æ•°æ®ç»“æ„ä¸ç®—æ³• </category>
          
      </categories>
      
      
        <tags>
            
            <tag> æ•°æ®ç»“æ„ </tag>
            
            <tag> ç®—æ³• </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>è¿›ç¨‹çº¿ç¨‹åç¨‹</title>
      <link href="/posts/63298.html"/>
      <url>/posts/63298.html</url>
      
        <content type="html"><![CDATA[<h1 id="è¿›ç¨‹"><a href="#è¿›ç¨‹" class="headerlink" title="è¿›ç¨‹"></a>è¿›ç¨‹</h1><h3 id="1-1-ä»€ä¹ˆæ˜¯è¿›ç¨‹ï¼Ÿ"><a href="#1-1-ä»€ä¹ˆæ˜¯è¿›ç¨‹ï¼Ÿ" class="headerlink" title="1.1 ä»€ä¹ˆæ˜¯è¿›ç¨‹ï¼Ÿ"></a>1.1 ä»€ä¹ˆæ˜¯è¿›ç¨‹ï¼Ÿ</h3><ul><li><p><code>1.è¿›ç¨‹æ˜¯èµ„æºåˆ†é…çš„æœ€å°å•ä½ï¼ˆ å†…å­˜ã€cpuã€ç½‘ç»œã€ioï¼‰</code></p></li><li><pre><code>2.ä¸€ä¸ªè¿è¡Œèµ·æ¥çš„ç¨‹åºå°±æ˜¯ä¸€ä¸ªè¿›ç¨‹<pre class="line-numbers language-none"><code class="language-none">- ä»€ä¹ˆæ˜¯ç¨‹åºï¼ˆ<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre>  ç¨‹åºæ˜¯æˆ‘ä»¬å­˜å‚¨åœ¨ç¡¬ç›˜é‡Œçš„ä»£ç   <pre class="line-numbers language-none"><code class="language-none">    ï¼‰    - ç¡¬ç›˜ï¼ˆ256Gï¼‰ã€å†…å­˜æ¡ï¼ˆ8Gï¼‰    - å½“æˆ‘ä»¬åŒå‡»å›¾æ ‡ï¼Œæ‰“å¼€ç¨‹åºçš„æ—¶å€™ï¼Œå®é™…ä¸Šå°±æ˜¯é€šè¿‡I&#x2F;Oæ“ä½œï¼ˆè¯»å†™ï¼‰ï¼Œç¡¬ç›˜ä¸­çš„ä»£ç è¯»å–åˆ°å†…å­˜æ¡é‡Œ  - å†…å­˜æ¡å°±æ˜¯æˆ‘ä»¬æ‰€æŒ‡çš„èµ„æºï¼ˆç¨‹åºåˆ†é…äº†å†…å­˜èµ„æºï¼Œå°±å˜æˆäº†è¿›ç¨‹ï¼‰  - CPUåˆ†æ—¶    - CPUæ¯”ä½ çš„æ‰‹é€Ÿå¿«å¤šäº†ï¼Œåˆ†æ—¶å¤„ç†æ¯ä¸ªçº¿ç¨‹ï¼Œä½†æ˜¯ç”±äºå¤ªå¿«ç„¶ä½ è§‰å¾—æ¯ä¸ªçº¿ç¨‹éƒ½æ˜¯ç‹¬å cpu    - cpuæ˜¯è®¡ç®—ï¼Œåªæœ‰æ—¶é—´ç‰‡åˆ°äº†ï¼Œè·å–cpuï¼Œçº¿ç¨‹çœŸæ­£æ‰§è¡Œ    - å½“ä½ æƒ³ä½¿ç”¨ ç½‘ç»œã€ç£ç›˜ç­‰èµ„æºçš„æ—¶å€™ï¼Œéœ€è¦cpuçš„è°ƒåº¦- &#96;3.è¿›ç¨‹å…·æœ‰ç‹¬ç«‹çš„å†…å­˜ç©ºé—´ï¼Œæ‰€ä»¥ä¸èƒ½ç›´æ¥ç›¸äº’&#96;### 1.2 è¿›ç¨‹å¦‚ä½•é€šä¿¡- åŒä¸€ç¨‹åºä¸‹è¿›ç¨‹é€šä¿¡  - æ¶ˆæ¯é˜Ÿåˆ—(çˆ¶å­è¿›ç¨‹é€šä¿¡)  - pipeï¼ˆåŒä¸€ç¨‹åºä¸‹ä¸¤ä¸ªè¿›ç¨‹é€šä¿¡ï¼‰  - managersï¼ˆåŒä¸€ç¨‹åºä¸‹å¤šä¸ªè¿›ç¨‹é€šä¿¡ï¼‰  - å…±äº«å†…å­˜  - å¥—æ¥å­—ï¼ˆä¸åŒä¸»æœºè¿›ç¨‹ä¹‹é—´çš„é€šä¿¡ï¼‰- Javaé¡¹ç›®å’Œpythoné¡¹ç›®å¦‚ä½•é€šä¿¡  - RabbitMQã€redisç­‰ï¼ˆä¸åŒç¨‹åºé—´é€šä¿¡ï¼‰### 1.3 ä¸ºä»€ä¹ˆéœ€è¦è¿›ç¨‹æ± ï¼Ÿ- ä¸€æ¬¡æ€§å¼€å¯æŒ‡å®šæ•°é‡çš„è¿›ç¨‹- å¦‚æœæœ‰åä¸ªè¿›ç¨‹ï¼Œæœ‰ä¸€ç™¾ä¸ªä»»åŠ¡ï¼Œä¸€æ¬¡å¯ä»¥å¤„ç†å¤šå°‘ä¸ªï¼ˆä¸€æ¬¡æ€§åªèƒ½å¤„ç†åä¸ªï¼‰- é˜²æ­¢è¿›ç¨‹å¼€å¯æ•°é‡è¿‡å¤šå¯¼è‡´æœåŠ¡å™¨å‹åŠ›è¿‡å¤§- è¿›ç¨‹æ± ä¸­æœ‰ä¸¤ä¸ªæ–¹æ³•ï¼š  - &#96;1ï¼‰apply&#96;ï¼š å¤šä¸ªè¿›ç¨‹å¼‚æ­¥æ‰§è¡Œï¼Œä¸€ä¸ªä¸€ä¸ªçš„æ‰§è¡Œ  - &#96;2ï¼‰apply_async&#96;ï¼š å¤šä¸ªè¿›ç¨‹åŒæ­¥æ‰§è¡Œï¼ŒåŒæ—¶æ‰§è¡Œå¤šä¸ªè¿›ç¨‹&#96;&#96;&#96;pythonfrom  multiprocessing import Process,Poolimport time,osdef foo(i):    time.sleep(2)    print(&quot;in the process&quot;,os.getpid()) #æ‰“å°å­è¿›ç¨‹çš„pid    return i+100def call(arg):    print(&#39;--&gt;exec done:&#39;,arg,os.getpid())if __name__ &#x3D;&#x3D; &#39;__main__&#39;:    pool &#x3D; Pool(3)                      #è¿›ç¨‹æ± æœ€å¤šå…è®¸5ä¸ªè¿›ç¨‹æ”¾å…¥è¿›ç¨‹æ±     print(&quot;ä¸»è¿›ç¨‹pidï¼š&quot;,os.getpid())     #æ‰“å°çˆ¶è¿›ç¨‹çš„pid    for i in range(10):        #ç”¨æ³•1 callbackä½œç”¨æ˜¯æŒ‡å®šåªæœ‰å½“Fooè¿è¡Œç»“æŸåå°±æ‰§è¡Œcallbackè°ƒç”¨çš„å‡½æ•°,çˆ¶è¿›ç¨‹è°ƒç”¨çš„callbackå‡½æ•°        pool.apply_async(func&#x3D;foo, args&#x3D;(i,),callback&#x3D;call)        #ç”¨æ³•2 ä¸²è¡Œ å¯åŠ¨è¿›ç¨‹ä¸åœ¨ç”¨Processè€Œæ˜¯ç›´æ¥ç”¨pool.apply()        # pool.apply(func&#x3D;foo, args&#x3D;(i,))    print(&#39;end&#39;)    pool.close()    #å…³é—­pool    pool.join()     #è¿›ç¨‹æ± ä¸­è¿›ç¨‹æ‰§è¡Œå®Œæ¯•åå†å…³é—­ï¼Œå¦‚æœæ³¨é‡Šï¼Œé‚£ä¹ˆç¨‹åºç›´æ¥å…³é—­ã€‚<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></code></pre></li></ul><h3 id="1-4-åƒµå°¸è¿›ç¨‹ã€å­¤å„¿è¿›ç¨‹ã€å®ˆæŠ¤è¿›ç¨‹"><a href="#1-4-åƒµå°¸è¿›ç¨‹ã€å­¤å„¿è¿›ç¨‹ã€å®ˆæŠ¤è¿›ç¨‹" class="headerlink" title="1.4 åƒµå°¸è¿›ç¨‹ã€å­¤å„¿è¿›ç¨‹ã€å®ˆæŠ¤è¿›ç¨‹"></a>1.4 åƒµå°¸è¿›ç¨‹ã€å­¤å„¿è¿›ç¨‹ã€å®ˆæŠ¤è¿›ç¨‹</h3><ul><li><pre><code>1ï¼‰åƒµå°¸è¿›ç¨‹å®šä¹‰<pre class="line-numbers language-none"><code class="language-none">  - åƒµå°¸è¿›ç¨‹äº§ç”Ÿçš„åŸå› å°±æ˜¯&#96;çˆ¶è¿›ç¨‹äº§ç”Ÿå­è¿›ç¨‹åï¼Œå­è¿›ç¨‹å…ˆäºçˆ¶è¿›ç¨‹é€€å‡º, è€Œçˆ¶è¿›ç¨‹æ²¡æœ‰å›æ”¶å­è¿›ç¨‹çš„èµ„æº&#96;  - ä¸€ä¸ªè¿›ç¨‹ä½¿ç”¨forkåˆ›å»ºå­è¿›ç¨‹ï¼Œå¦‚æœå­è¿›ç¨‹é€€å‡ºï¼Œè€Œçˆ¶è¿›ç¨‹å¹¶æ²¡æœ‰è°ƒç”¨waitæˆ–waitpidè·å–å­è¿›ç¨‹çš„çŠ¶æ€ä¿¡æ¯  - é‚£ä¹ˆå­è¿›ç¨‹çš„è¿›ç¨‹æè¿°ç¬¦ä»ç„¶ä¿å­˜åœ¨ç³»ç»Ÿä¸­ã€‚è¿™ç§è¿›ç¨‹ç§°ä¹‹ä¸ºåƒµæ­»è¿›ç¨‹ã€‚- ç®€è€Œè¨€ä¹‹ï¼Œå­è¿›ç¨‹é€€å‡ºåï¼Œçˆ¶è¿›ç¨‹æ²¡æœ‰å›æ”¶å­è¿›ç¨‹çš„èµ„æºå°±é€€å‡º  - &#96;&#96;&#96;  2ï¼‰å­¤å„¿è¿›ç¨‹<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>- çˆ¶è¿›ç¨‹å¼‚å¸¸ç»“æŸäº†ï¼Œç„¶åå­è¿›ç¨‹è¢«1å·è¿›ç¨‹initæ”¶å…»</code></pre></li><li><pre><code>3ï¼‰å®ˆæŠ¤è¿›ç¨‹<pre class="line-numbers language-none"><code class="language-none">  - æ˜¯åˆ›å»ºå®ˆæŠ¤è¿›ç¨‹æ—¶æœ‰æ„æŠŠçˆ¶è¿›ç¨‹ç»“æŸï¼Œç„¶åè¢«1å·è¿›ç¨‹initæ”¶å…»- &#96;4ï¼‰ç”¨pythonå†™ä¸€ä¸ªåƒµå°¸è¿›ç¨‹&#96;&#96;&#96;&#96;python#!&#x2F;usr&#x2F;bin&#x2F;env python#coding&#x3D;utf8 import os, sys, time#äº§ç”Ÿå­è¿›ç¨‹pid &#x3D; os.fork() if pid &#x3D;&#x3D; 0:    #å­è¿›ç¨‹é€€å‡º    sys.exit(0)#çˆ¶è¿›ç¨‹ä¼‘æ¯30ç§’time.sleep(30)# å…ˆäº§ç”Ÿä¸€ä¸ªå­è¿›ç¨‹ï¼Œå­è¿›ç¨‹é€€å‡ºï¼Œçˆ¶è¿›ç¨‹ä¼‘æ¯30ç§’,é‚£å°±ä¼šäº§ç”Ÿä¸€ä¸ªåƒµå°¸è¿›ç¨‹<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></code></pre></li><li><p>ps -ef| grep defunct&#96; åœ¨linuxä¸‹æŸ¥çœ‹åƒµå°¸è¿›ç¨‹</p><ul><li><pre><code class="sh">[root@linux-node4 ~]# ps -ef| grep defunctroot     110401  96083  0 19:11 pts/2    00:00:00 python defunct.pyroot     110402 110401  0 19:11 pts/2    00:00:00 [python] &lt;defunct&gt;root     110406  96105  0 19:11 pts/3    00:00:00 grep --color=auto defunct<pre class="line-numbers language-none"><code class="language-none">### 1.5 Pythonä¸­ä½¿ç”¨è¿‡çš„è¿›ç¨‹æ¨¡å—ï¼Ÿ#### 1.5.1 multiprocessing- &#96;multiprocessing&#96;æ˜¯ä¸€ä¸ªä½¿ç”¨ç±»ä¼¼äºçº¿ç¨‹æ¨¡å—çš„APIæ”¯æŒäº§ç”Ÿè¿›ç¨‹çš„åŒ…ã€‚- å¤šå¤„ç†åŒ…æä¾›æœ¬åœ°å’Œè¿œç¨‹å¹¶å‘ï¼Œé€šè¿‡ä½¿ç”¨å­è¿›ç¨‹è€Œä¸æ˜¯çº¿ç¨‹æœ‰æ•ˆåœ°ä¾§å‘æ‰§è¡Œå…¨å±€è§£é‡Šå™¨é”ã€‚- å› æ­¤ï¼Œå¤šå¤„ç†æ¨¡å—å…è®¸ç¨‹åºå‘˜å……åˆ†åˆ©ç”¨ç»™å®šæœºå™¨ä¸Šçš„å¤šä¸ªå¤„ç†å™¨ã€‚ å®ƒå¯ä»¥åœ¨Unixå’ŒWindowsä¸Šè¿è¡Œã€‚- &#96;è¿›ç¨‹æ± æŠ“å–é¡µé¢&#96;&#96;&#96;&#96;python# -*- coding: utf-8 -*-import requestsfrom multiprocessing import Pooldef fetch_request(url):    result &#x3D; requests.get(url)    print(result.text)def call(arg):    print(&#39;--&gt;exec done:&#39;,&quot;æµ‹è¯•è¿›ç¨‹æ± æ‰§è¡Œåå›è°ƒåŠŸèƒ½&quot;)url_list &#x3D; [    &#39;https:&#x2F;&#x2F;www.baidu.com&#39;,    &#39;https:&#x2F;&#x2F;www.google.com&#x2F;&#39;,         #googleé¡µé¢ä¼šå¡ä½ï¼ŒçŸ¥é“é¡µé¢è¶…æ—¶åè¿™ä¸ªè¿›ç¨‹æ‰ç»“æŸ    &#39;http:&#x2F;&#x2F;dig.chouti.com&#x2F;&#39;,          #choutié¡µé¢å†…å®¹ä¼šç›´æ¥è¿”å›ï¼Œä¸ä¼šç­‰å¾…Googleé¡µé¢çš„è¿”å›]if __name__ &#x3D;&#x3D; &#39;__main__&#39;:    pool &#x3D; Pool(10)        # åˆ›å»ºçº¿ç¨‹æ±     for url in url_list:        #ç”¨æ³•1 callbackä½œç”¨æ˜¯æŒ‡å®šåªæœ‰å½“Fooè¿è¡Œç»“æŸåå°±æ‰§è¡Œcallbackè°ƒç”¨çš„å‡½æ•°,çˆ¶è¿›ç¨‹è°ƒç”¨çš„callbackå‡½æ•°        pool.apply_async(func&#x3D;fetch_request, args&#x3D;(url,),callback&#x3D;call)    print(&#39;end&#39;)    pool.close()    #å…³é—­pool    pool.join()     #è¿›ç¨‹æ± ä¸­è¿›ç¨‹æ‰§è¡Œå®Œæ¯•åå†å…³é—­ï¼Œå¦‚æœæ³¨é‡Šï¼Œé‚£ä¹ˆç¨‹åºç›´æ¥å…³é—­ã€‚<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></code></pre></li></ul></li></ul><h4 id="1-5-2-concurrent-futures"><a href="#1-5-2-concurrent-futures" class="headerlink" title="1.5.2 concurrent.futures"></a>1.5.2 concurrent.futures</h4><ul><li><code>1ã€ç®€ä»‹</code> <a href="https://docs.python.org/3/library/concurrent.futures.html">å‚è€ƒå®˜ç½‘(opens new window)</a><ul><li>1ã€Pythonæ ‡å‡†åº“ä¸ºæˆ‘ä»¬æä¾›äº†threadingå’Œmultiprocessingæ¨¡å—ç¼–å†™ç›¸åº”çš„å¤šçº¿ç¨‹&#x2F;å¤šè¿›ç¨‹ä»£ç </li><li>2ã€ä½†æ˜¯å½“é¡¹ç›®è¾¾åˆ°ä¸€å®šçš„è§„æ¨¡ï¼Œé¢‘ç¹åˆ›å»º&#x2F;é”€æ¯è¿›ç¨‹æˆ–è€…çº¿ç¨‹æ˜¯éå¸¸æ¶ˆè€—èµ„æºçš„ï¼Œè¿™ä¸ªæ—¶å€™æˆ‘ä»¬å°±è¦ç¼–å†™è‡ªå·±çš„çº¿ç¨‹æ± &#x2F;è¿›ç¨‹æ± ï¼Œä»¥ç©ºé—´æ¢æ—¶é—´ã€‚</li><li>3ã€ä½†ä»Python3.2å¼€å§‹ï¼Œæ ‡å‡†åº“ä¸ºæˆ‘ä»¬æä¾›äº†concurrent.futuresæ¨¡å—ï¼Œå®ƒæä¾›äº†ThreadPoolExecutorå’ŒProcessPoolExecutorä¸¤ä¸ªç±»ï¼Œ</li><li>4ã€å®ç°äº†å¯¹threadingå’Œmultiprocessingçš„è¿›ä¸€æ­¥æŠ½è±¡ï¼Œå¯¹ç¼–å†™çº¿ç¨‹æ± &#x2F;è¿›ç¨‹æ± æä¾›äº†ç›´æ¥çš„æ”¯æŒã€‚</li></ul></li><li><code>2ã€Executorå’ŒFuture</code><ul><li><code>1. Executor</code></li><li>concurrent.futuresæ¨¡å—çš„åŸºç¡€æ˜¯Exectuorï¼ŒExecutoræ˜¯ä¸€ä¸ªæŠ½è±¡ç±»ï¼Œå®ƒä¸èƒ½è¢«ç›´æ¥ä½¿ç”¨ã€‚</li><li>ä½†æ˜¯å®ƒæä¾›çš„ä¸¤ä¸ªå­ç±»ThreadPoolExecutorå’ŒProcessPoolExecutorå´æ˜¯éå¸¸æœ‰ç”¨</li><li>æˆ‘ä»¬å¯ä»¥å°†ç›¸åº”çš„tasksç›´æ¥æ”¾å…¥çº¿ç¨‹æ± &#x2F;è¿›ç¨‹æ± ï¼Œä¸éœ€è¦ç»´æŠ¤Queueæ¥æ“å¿ƒæ­»é”çš„é—®é¢˜ï¼Œçº¿ç¨‹æ± &#x2F;è¿›ç¨‹æ± ä¼šè‡ªåŠ¨å¸®æˆ‘ä»¬è°ƒåº¦ã€‚</li><li><code>2. Future</code></li><li>Futureä½ å¯ä»¥æŠŠå®ƒç†è§£ä¸ºä¸€ä¸ªåœ¨æœªæ¥å®Œæˆçš„æ“ä½œï¼Œè¿™æ˜¯å¼‚æ­¥ç¼–ç¨‹çš„åŸºç¡€ï¼Œ</li><li>ä¼ ç»Ÿç¼–ç¨‹æ¨¡å¼ä¸‹æ¯”å¦‚æˆ‘ä»¬æ“ä½œqueue.getçš„æ—¶å€™ï¼Œåœ¨ç­‰å¾…è¿”å›ç»“æœä¹‹å‰ä¼šäº§ç”Ÿé˜»å¡ï¼Œcpuä¸èƒ½è®©å‡ºæ¥åšå…¶ä»–äº‹æƒ…</li><li>è€ŒFutureçš„å¼•å…¥å¸®åŠ©æˆ‘ä»¬åœ¨ç­‰å¾…çš„è¿™æ®µæ—¶é—´å¯ä»¥å®Œæˆå…¶ä»–çš„æ“ä½œã€‚</li></ul></li><li>3ã€concurrent.futures.ProcessPoolExecutor æŠ“å–ç½‘é¡µ</li></ul><pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token keyword">import</span> requests<span class="token keyword">from</span> concurrent<span class="token punctuation">.</span>futures <span class="token keyword">import</span> ProcessPoolExecutor<span class="token keyword">def</span> <span class="token function">fetch_request</span><span class="token punctuation">(</span>url<span class="token punctuation">)</span><span class="token punctuation">:</span>    result <span class="token operator">=</span> requests<span class="token punctuation">.</span>get<span class="token punctuation">(</span>url<span class="token punctuation">)</span>    <span class="token keyword">print</span><span class="token punctuation">(</span>result<span class="token punctuation">.</span>text<span class="token punctuation">)</span>url_list <span class="token operator">=</span> <span class="token punctuation">[</span>    <span class="token string">'https://www.baidu.com'</span><span class="token punctuation">,</span>    <span class="token string">'https://www.google.com/'</span><span class="token punctuation">,</span>         <span class="token comment">#googleé¡µé¢ä¼šå¡ä½ï¼ŒçŸ¥é“é¡µé¢è¶…æ—¶åè¿™ä¸ªè¿›ç¨‹æ‰ç»“æŸ</span>    <span class="token string">'http://dig.chouti.com/'</span><span class="token punctuation">,</span>          <span class="token comment">#choutié¡µé¢å†…å®¹ä¼šç›´æ¥è¿”å›ï¼Œä¸ä¼šç­‰å¾…Googleé¡µé¢çš„è¿”å›</span><span class="token punctuation">]</span><span class="token keyword">if</span> __name__ <span class="token operator">==</span> <span class="token string">'__main__'</span><span class="token punctuation">:</span>    pool <span class="token operator">=</span> ProcessPoolExecutor<span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">)</span>        <span class="token comment"># åˆ›å»ºçº¿ç¨‹æ± </span>    <span class="token keyword">for</span> url <span class="token keyword">in</span> url_list<span class="token punctuation">:</span>        pool<span class="token punctuation">.</span>submit<span class="token punctuation">(</span>fetch_request<span class="token punctuation">,</span>url<span class="token punctuation">)</span>    <span class="token comment"># å»çº¿ç¨‹æ± ä¸­è·å–ä¸€ä¸ªè¿›ç¨‹ï¼Œè¿›ç¨‹å»æ‰§è¡Œfetch_requestæ–¹æ³•</span>    pool<span class="token punctuation">.</span>shutdown<span class="token punctuation">(</span>wait <span class="token operator">=</span> <span class="token boolean">True</span><span class="token punctuation">)</span>    <span class="token comment"># shutdownç›¸å½“äºä¸€ä¸ªå¼€å…³ï¼Œå®ƒä¼šè¯»å–ç¨‹åºä¸­æ‰€è®¾å®š</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h1 id="çº¿ç¨‹"><a href="#çº¿ç¨‹" class="headerlink" title="çº¿ç¨‹"></a>çº¿ç¨‹</h1><h2 id="2-1-ä»€ä¹ˆæ˜¯çº¿ç¨‹"><a href="#2-1-ä»€ä¹ˆæ˜¯çº¿ç¨‹" class="headerlink" title="2.1 ä»€ä¹ˆæ˜¯çº¿ç¨‹"></a>2.1 ä»€ä¹ˆæ˜¯çº¿ç¨‹</h2><ul><li><p>çº¿ç¨‹æ˜¯æ“ä½œç³»ç»Ÿè°ƒåº¦çš„æœ€å°å•ä½</p></li><li><p>çº¿ç¨‹æ˜¯è¿›ç¨‹çœŸæ­£çš„æ‰§è¡Œè€…ï¼Œ æ˜¯ä¸€äº›æŒ‡ä»¤çš„åˆé›†ï¼ˆæ˜¯è¿›ç¨‹èµ„æºçš„æ‹¥æœ‰è€…ï¼‰</p></li><li><p>åŒä¸€è¿›ç¨‹ä¸‹çš„å¤šä¸ªçº¿ç¨‹å…±äº«å†…å­˜ç©ºé—´ï¼Œ æ•°æ®å¯ä»¥ç›´æ¥è®¿é—®ï¼ˆæ•°æ®å…±äº«ï¼‰</p></li><li><p>ä¸ºäº†ä¿è¯çº¿ç¨‹å®‰å…¨ï¼Œä¼šä½¿ç”¨<strong>çº¿ç¨‹é”</strong></p></li><li><pre><code class="python">import threadingimport timedef sayhi(num): #å®šä¹‰æ¯ä¸ªçº¿ç¨‹è¦è¿è¡Œçš„å‡½æ•°    print(&quot;running on number:%s&quot; %num)    time.sleep(3)for i in range(50):    t = threading.Thread(target=sayhi,args=(&#39;t-%s&#39;%i,))    t.start()<pre class="line-numbers language-none"><code class="language-none">## 2.2 GiLé”å’Œçº¿ç¨‹é”-  Gilå…¨å±€è§£é‡Šå™¨é”  - ä¿è¯åŒä¸€æ—¶é—´åªæœ‰ä¸€ä¸ªçº¿ç¨‹åœ¨è¿è¡Œ  - é˜²æ­¢å¤šä¸ªçº¿ç¨‹éƒ½ä¿®æ”¹æ•°æ®  - å®è´¨    - æ¯ä¸ªçº¿ç¨‹åœ¨æ‰§è¡Œçš„æ—¶å€™éƒ½éœ€è¦å…ˆè·å–Gil, ä¿è¯åŒä¸€æ—¶åˆ»åªæœ‰ä¸€ä¸ªçº¿ç¨‹æ‰§è¡Œå¯ä»¥æ‰§è¡Œä»£ç     - å³åŒä¸€æ—¶åˆ»åªæœ‰ä¸€ä¸ªçº¿ç¨‹ä½¿ç”¨cpu- çº¿ç¨‹é”ï¼ˆäº’æ–¥é”ï¼‰  - GIL é”åªèƒ½ä¿è¯åŒä¸€æ—¶åˆ»åªæœ‰ä¸€ä¸ªçº¿ç¨‹å¯¹æŸä¸ªèµ„æºæ“ä½œï¼Œä½†æ˜¯ç”±äºè®¾è®¡ä¹‹åˆè€ƒè™‘åˆ°æ­»é”çš„é—®é¢˜ï¼Œä¼šæœ‰ä¸€ä¸ªchek-interval æœºåˆ¶ï¼Œä¼šåœ¨ä¸€æ®µæ—¶å€™åè‡ªåŠ¨é‡Šæ”¾é”ï¼Œæ‰€ä»¥ä¼šå¯¼è‡´å¯èƒ½ä¸Šä¸€ä¸ªçº¿ç¨‹è¿˜ä¸ºæ‰§è¡Œå®Œæ¯•å°±é‡Šæ”¾é”  - çº¿ç¨‹é”çš„æœ¬è´¨æ˜¯å°†çº¿ç¨‹ä¸­çš„æ•°æ®åŠ äº†ä¸€æŠŠäº’æ–¥é”    - åŠ äº†çº¿ç¨‹é”ä¹‹åï¼Œå…¶ä»–çº¿ç¨‹æ— æ³•è®¿é—®è¯¥æ•°æ®ï¼ŒåŒ…æ‹¬è¯»  - æœ‰äº†GILå…¨å±€è§£é‡Šå™¨é”ï¼Œä¸ºä»€ä¹ˆè¿˜éœ€è¦çº¿ç¨‹é”    - Gilæ˜¯é™åˆ¶åŒä¸€æ—¶é—´åªæœ‰ä¸€ä¸ªçº¿ç¨‹è¿›å…¥python è§£é‡Šå™¨çš„    - ç”±äºcpuæ˜¯åˆ†æ—¶è½®è¯¢è°ƒåº¦çš„ï¼Œå¯¼è‡´å¤šçº¿ç¨‹æœ‰å¯èƒ½ä¼šé€ æˆæ•°æ®çš„å®‰å…¨é—®é¢˜    - è¿˜æœ‰ä¸€ä¸ªåŸå› æ˜¯GILè‡ªå¸¦çš„check_intervalæœºåˆ¶ï¼Œä¼šå¼ºåˆ¶é‡Šæ”¾é”ï¼Œä¹Ÿå¯èƒ½ä¼šå¯¼è‡´æ•°æ®å®‰å…¨é—®é¢˜- ä¸ºä»€ä¹ˆpython ä¸­éœ€è¦å…¨å±€è§£é‡Šå™¨é”  - cpythonçš„å®ç°ä¸­ï¼ŒGilæ˜¯ä¸ºäº†è§£å†³æœ‰å¼•ç”¨è®¡æ•°é—®é¢˜å¸¦æ¥çš„èµ„æºç«äº‰æ¼æ´é—®é¢˜çš„  - cpythonä¸­çš„å¼•ç”¨è®¡æ•°æ˜¯å…¨å±€ï¼Œå±€éƒ¨å˜é‡å’Œå¯¹è±¡å­—æ®µç­‰éƒ½å‚ä¸åˆ°äº†å¼•ç”¨è®¡æ•°ä¸­  - å½“ä¸€ä¸ªçº¿ç¨‹è¿è¡Œæ—¶ï¼Œä¼šå…ˆå»è·å¾—Gilè§£é‡Šå™¨é”ï¼Œä¿è¯å¼•ç”¨è®¡æ•°æ—¶å…¨å±€æ›´æ–°çš„  - å¦‚æœæ²¡æœ‰Gilï¼Œ  å½“ä¸¤ä¸ªçº¿ç¨‹åŒæ—¶å¯¹ä¸€ä¸ªå¯¹è±¡è¿›è¡Œå¼•ç”¨æ—¶ï¼Œå¼•ç”¨è®¡æ•°åªä¼šæé«˜1ï¼Œè€Œä¸æ˜¯2## 2.3 join- å®ç°æ‰€æœ‰çº¿ç¨‹éƒ½ç»“æŸä¹‹åï¼Œåœ¨æ‰§è¡Œä¸»çº¿ç¨‹- &#96;&#96;&#96;python  import threading  import time  start_time &#x3D; time.time()    def sayhi(num): #å®šä¹‰æ¯ä¸ªçº¿ç¨‹è¦è¿è¡Œçš„å‡½æ•°      print(&quot;running on number:%s&quot; %num)      time.sleep(30)    t_objs &#x3D; []    #å°†è¿›ç¨‹å®ä¾‹å¯¹è±¡å­˜å‚¨åœ¨è¿™ä¸ªåˆ—è¡¨ä¸­  for i in range(50):      t &#x3D; threading.Thread(target&#x3D;sayhi,args&#x3D;(&#39;t-%s&#39;%i,))      t.start()          #å¯åŠ¨ä¸€ä¸ªçº¿ç¨‹ï¼Œç¨‹åºä¸ä¼šé˜»å¡      t_objs.append(t)  print(threading.active_count())    #æ‰“å°å½“å‰æ´»è·ƒè¿›ç¨‹æ•°é‡  for t in t_objs: #åˆ©ç”¨forå¾ªç¯ç­‰å¾…ä¸Šé¢50ä¸ªè¿›ç¨‹å…¨éƒ¨ç»“æŸ      t.join()     #é˜»å¡æŸä¸ªç¨‹åº  print(threading.current_thread())    #æ‰“å°æ‰§è¡Œè¿™ä¸ªå‘½ä»¤è¿›ç¨‹    print(&quot;----------------all threads has finished.....&quot;)  print(threading.active_count())  print(&#39;cost time:&#39;,time.time() - start_time)<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></code></pre></li></ul><h2 id="2-4-setDaemon"><a href="#2-4-setDaemon" class="headerlink" title="2.4 setDaemon"></a>2.4 setDaemon</h2><ul><li>å®ˆæŠ¤çº¿ç¨‹ï¼Œä¸»çº¿ç¨‹é€€å‡ºæ—¶ï¼Œéœ€è¦å­çº¿ç¨‹éšä¸»çº¿ç¨‹åŒæ—¶é€€å‡º</li></ul><pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token keyword">import</span> threading<span class="token keyword">import</span> timestart_time <span class="token operator">=</span> time<span class="token punctuation">.</span>time<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token keyword">def</span> <span class="token function">sayhi</span><span class="token punctuation">(</span>num<span class="token punctuation">)</span><span class="token punctuation">:</span> <span class="token comment">#å®šä¹‰æ¯ä¸ªçº¿ç¨‹è¦è¿è¡Œçš„å‡½æ•°</span>    <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">"running on number:%s"</span> <span class="token operator">%</span>num<span class="token punctuation">)</span>    time<span class="token punctuation">.</span>sleep<span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">)</span><span class="token keyword">for</span> i <span class="token keyword">in</span> <span class="token builtin">range</span><span class="token punctuation">(</span><span class="token number">50</span><span class="token punctuation">)</span><span class="token punctuation">:</span>    t <span class="token operator">=</span> threading<span class="token punctuation">.</span>Thread<span class="token punctuation">(</span>target<span class="token operator">=</span>sayhi<span class="token punctuation">,</span>args<span class="token operator">=</span><span class="token punctuation">(</span><span class="token string">'t-%s'</span><span class="token operator">%</span>i<span class="token punctuation">,</span><span class="token punctuation">)</span><span class="token punctuation">)</span>    t<span class="token punctuation">.</span>setDaemon<span class="token punctuation">(</span><span class="token boolean">True</span><span class="token punctuation">)</span>  <span class="token comment">#æŠŠå½“å‰çº¿ç¨‹å˜æˆå®ˆæŠ¤çº¿ç¨‹ï¼Œå¿…é¡»åœ¨t.start()å‰è®¾ç½®</span>    t<span class="token punctuation">.</span>start<span class="token punctuation">(</span><span class="token punctuation">)</span>          <span class="token comment">#å¯åŠ¨ä¸€ä¸ªçº¿ç¨‹ï¼Œç¨‹åºä¸ä¼šé˜»å¡</span><span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">'cost time:'</span><span class="token punctuation">,</span>time<span class="token punctuation">.</span>time<span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">-</span> start_time<span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h2 id="2-5-pythonä¸­ä½¿ç”¨è¿‡å“ªäº›çº¿ç¨‹æ¨¡å—"><a href="#2-5-pythonä¸­ä½¿ç”¨è¿‡å“ªäº›çº¿ç¨‹æ¨¡å—" class="headerlink" title="2.5 pythonä¸­ä½¿ç”¨è¿‡å“ªäº›çº¿ç¨‹æ¨¡å—"></a>2.5 pythonä¸­ä½¿ç”¨è¿‡å“ªäº›çº¿ç¨‹æ¨¡å—</h2><ul><li><p>Pythonæä¾›äº†å‡ ä¸ªç”¨äºå¤šçº¿ç¨‹ç¼–ç¨‹çš„æ¨¡å—ï¼ŒåŒ…æ‹¬threadã€threadingå’ŒQueueç­‰ã€‚</p></li><li><p>threadå’Œthreadingæ¨¡å—å…è®¸ç¨‹åºå‘˜åˆ›å»ºå’Œç®¡ç†çº¿ç¨‹ã€‚</p></li><li><pre><code class="python">import threadingimport timedef sayhi(num): #å®šä¹‰æ¯ä¸ªçº¿ç¨‹è¦è¿è¡Œçš„å‡½æ•°    print(&quot;running on number:%s&quot; %num)    time.sleep(3)    for i in range(50):    t = threading.Thread(target=sayhi,args=(&#39;t-%s&#39;%i,))    t.start()<pre class="line-numbers language-none"><code class="language-none">- ## 2.6 æ­»é”- ä¸¤ä¸ªä»¥ä¸Šçš„è¿›ç¨‹æˆ–çº¿ç¨‹åœ¨æ‰§è¡Œè¿‡ç¨‹ä¸­ï¼Œå› äº‰å¤ºèµ„æºè€Œé€ æˆçš„ä¸€ç§äº’ç›¸ç­‰å¾…çš„ç°è±¡- è‹¥æ— å¤–åŠ›ä½œç”¨ï¼Œå®ƒä»¬éƒ½å°†æ— æ³•æ¨è¿›ä¸‹å»ã€‚2.7 ä¿¡å·é‡ï¼ˆSemaphoreï¼‰- 1.äº’æ–¥é” åŒæ—¶åªå…è®¸ä¸€ä¸ªçº¿ç¨‹æ›´æ”¹æ•°æ®ï¼Œè€ŒSemaphoreæ˜¯åŒæ—¶å…è®¸ä¸€å®šæ•°é‡çš„çº¿ç¨‹æ›´æ”¹æ•°æ®- 2.æ¯”å¦‚å•æ‰€æœ‰3ä¸ªå‘ï¼Œé‚£æœ€å¤šåªå…è®¸3ä¸ªäººä¸Šå•æ‰€ï¼Œåé¢çš„äººåªèƒ½ç­‰é‡Œé¢æœ‰äººå‡ºæ¥äº†æ‰èƒ½å†è¿›å»- 3.ä½œç”¨å°±æ˜¯åŒä¸€æ—¶åˆ»å…è®¸è¿è¡Œçš„çº¿ç¨‹æ•°é‡&#96;&#96;&#96;pythonimport threading,timedef run(n):    semaphore.acquire()    time.sleep(1)    print(&quot;run the thread: %s\n&quot; %n)    semaphore.release()if __name__ &#x3D;&#x3D; &#39;__main__&#39;:    semaphore &#x3D; threading.BoundedSemaphore(5)  #æœ€å¤šå…è®¸5ä¸ªçº¿ç¨‹åŒæ—¶è¿è¡Œ    for i in range(22):        t &#x3D; threading.Thread(target&#x3D;run,args&#x3D;(i,))        t.start()while threading.active_count() !&#x3D; 1:    pass  # print threading.active_count()else:    print(&#39;----all threads done---&#39;)# ä»£ç ç»“æœè¯´æ˜ï¼šè¿™é‡Œå¯ä»¥æ¸…æ™°çœ‹åˆ°è¿è¡Œæ—¶0-4æ˜¯åŒæ—¶è¿è¡Œçš„æ²¡æœ‰é¡ºåºï¼Œè€Œä¸”æ˜¯å‰äº”ä¸ªï¼Œ# è¡¨ç¤ºå†semaphoreè¿™ä¸ªä¿¡å·é‡çš„å®šä¹‰ä¸‹ç¨‹åºåŒæ—¶ä»…èƒ½æ‰§è¡Œ5ä¸ªçº¿ç¨‹<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></code></pre></li></ul><h1 id="åç¨‹"><a href="#åç¨‹" class="headerlink" title="åç¨‹"></a>åç¨‹</h1><h2 id="3-1-ä»€ä¹ˆæ—¶åç¨‹"><a href="#3-1-ä»€ä¹ˆæ—¶åç¨‹" class="headerlink" title="3.1 ä»€ä¹ˆæ—¶åç¨‹"></a>3.1 ä»€ä¹ˆæ—¶åç¨‹</h2><ul><li>åç¨‹æ—¶å¾®çº¿ç¨‹ï¼Œæœ¬è´¨æ—¶ä¸€ä¸ªå•çº¿ç¨‹</li><li>åç¨‹èƒ½åœ¨å•çº¿ç¨‹å¤„ç†é«˜å¹¶å‘ï¼Œå› ä¸ºé‡åˆ°ioä¼šè‡ªåŠ¨åˆ‡æ¢<ul><li>çº¿ç¨‹é‡åˆ°ioä¼šç­‰å¾…ï¼Œé˜»å¡ï¼Œåç¨‹é‡åˆ°ioä¼šè‡ªåŠ¨åˆ‡æ¢</li><li>çº¿ç¨‹çš„çŠ¶æ€ä¿å­˜åœ¨cpuçš„å¯„å­˜å™¨å’Œæ ˆé‡Œï¼Œè€Œåç¨‹æ‹¥æœ‰è‡ªå·±çš„ç©ºé—´ï¼Œæ— åºä¸Šä¸‹é—®åˆ‡æ¢ï¼Œæ‰€ä»¥å¿«</li></ul></li><li>ä¸ºä»€ä¹ˆåç¨‹é‡åˆ°ioå¯ä»¥è‡ªåŠ¨åˆ‡æ¢<ul><li>greenletæ˜¯Cè¯­è¨€å†™çš„ä¸€ä¸ªæ¨¡å—ï¼Œé‡åˆ°IOæ‰‹åŠ¨åˆ‡æ¢</li><li>åç¨‹æœ‰ä¸€ä¸ªgeventæ¨¡å—ï¼ˆåˆ†è£…äº†greeletæ¨¡å—ï¼‰ï¼Œé‡åˆ°ioèƒ½è‡ªåŠ¨åˆ‡æ¢</li><li>åç¨‹æ‹¥æœ‰è‡ªå·±çš„ç©ºé—´ï¼Œæ‰€ä»¥æ— éœ€ä¸Šä¸‹æ–‡åˆ‡æ¢çš„å¼€é”€</li></ul></li></ul><h2 id="3-2-åç¨‹çš„ä¼˜ç¼ºç‚¹"><a href="#3-2-åç¨‹çš„ä¼˜ç¼ºç‚¹" class="headerlink" title="3.2 åç¨‹çš„ä¼˜ç¼ºç‚¹"></a>3.2 åç¨‹çš„ä¼˜ç¼ºç‚¹</h2><ul><li>ç¼ºç‚¹<ul><li>æ— æ³•åˆ©ç”¨å¤šæ ¸çš„èµ„æºï¼šåç¨‹æœ¬è´¨å°±æ˜¯ä¸€ä¸ªå•çº¿ç¨‹ï¼Œä»–ä¸èƒ½åŒæ—¶å°†å•ä¸ªcpuçš„å¤šæ ¸åˆ©ç”¨èµ·æ¥ï¼Œåç¨‹éœ€è¦å’Œè¿›ç¨‹é…åˆï¼Œæ‰èƒ½åˆ©ç”¨å¤šæ ¸ cpu</li><li>åç¨‹å¦‚æœé˜»å¡ï¼Œæ•´ä¸ªç¨‹åºéƒ½ä¼šé˜»å¡</li></ul></li><li>ä¼˜ç‚¹<ul><li>ä¸ä»…èƒ½å¤„ç†é«˜å¹¶å‘ï¼ˆå•çº¿ç¨‹ä¸‹çš„é«˜å¹¶å‘ï¼‰</li><li>è€Œä¸”ç‰¹åˆ«èŠ‚çœèµ„æºï¼ˆæœ¬è´¨æ˜¯ä¸€ä¸ªå•çº¿ç¨‹ï¼Œå½“ç„¶èŠ‚çœèµ„æºï¼‰</li></ul></li><li>åç¨‹é‡åˆ°ioè‡ªåŠ¨åˆ‡æ¢ï¼Œé‚£è°æ¥å¹²æ´»<ul><li>ç®€å•è¯´æ³•<ul><li>åç¨‹é‡åˆ°I&#x2F;Oåè‡ªåŠ¨åˆ‡æ¢ï¼Œä½†æ˜¯ä¼šä¿æŒä¸€ä¸ªsocketè¿æ¥ï¼Œäº¤ç»™ç³»ç»Ÿå†…æ ¸å»å¤„ç†å·¥ä½œ</li><li>epoll()å°±å·¥ä½œå†…æ ¸ä¸­ï¼Œä»–ç»´æŠ¤äº†ä¸€ä¸ªé“¾è¡¨ï¼Œæ¥å­˜æ”¾æ‰€æœ‰çš„socketè¿æ¥</li><li>å½“å†…æ ¸å¤„ç†å®Œæˆåå°±ä¼šå›è°ƒä¸€ä¸ªå‡½æ•°ï¼Œä»¥socketæ–‡ä»¶æè¿°ç¬¦ä¸ºkeyï¼Œç»“æœä¸ºvalueå­˜æ”¾åˆ°å­—å…¸ä¸­</li><li>æ­¤æ—¶è¿™ä¸ªåˆ—è¡¨è¿˜æ˜¯åœ¨å†…æ ¸ä¸­ï¼Œéœ€è¦å°†è¿™ä¸ªå­—å…¸æ‹·è´åˆ°ç”¨æˆ·ç©ºé—´ï¼ˆç”¨æˆ·è¿›ç¨‹ä¸­ï¼‰</li></ul></li><li>æœ¬è´¨<ul><li>1.<code>epoll()ä¸­å†…æ ¸åˆ™ç»´æŠ¤ä¸€ä¸ªé“¾è¡¨</code>ï¼Œepoll_waitç›´æ¥æ£€æŸ¥é“¾è¡¨æ˜¯ä¸æ˜¯ç©ºå°±çŸ¥é“æ˜¯å¦æœ‰æ–‡ä»¶æè¿°ç¬¦å‡†å¤‡å¥½äº†ã€‚</li><li>2.åœ¨å†…æ ¸å®ç°ä¸­epollæ˜¯æ ¹æ®æ¯ä¸ªsockfdä¸Šé¢çš„ä¸è®¾å¤‡é©±åŠ¨ç¨‹åºå»ºç«‹èµ·æ¥çš„å›è°ƒå‡½æ•°å®ç°çš„ã€‚</li><li>3.æŸä¸ªsockfdä¸Šçš„äº‹ä»¶å‘ç”Ÿæ—¶ï¼Œä¸å®ƒå¯¹åº”çš„å›è°ƒå‡½æ•°å°±ä¼šè¢«è°ƒç”¨ï¼Œæ¥æŠŠè¿™ä¸ªsockfdåŠ å…¥é“¾è¡¨ï¼Œå…¶ä»–å¤„äºâ€œç©ºé—²çš„â€çŠ¶æ€çš„åˆ™ä¸ä¼šã€‚</li><li>4.epollä¸Šé¢é“¾è¡¨ä¸­è·å–æ–‡ä»¶æè¿°ï¼Œè¿™é‡Œä½¿ç”¨å†…å­˜æ˜ å°„ï¼ˆmmapï¼‰æŠ€æœ¯ï¼Œé¿å…äº†å¤åˆ¶å¤§é‡æ–‡ä»¶æè¿°ç¬¦å¸¦æ¥çš„å¼€é”€</li><li>å†…å­˜æ˜ å°„ï¼ˆmmapï¼‰ï¼šå†…å­˜æ˜ å°„æ–‡ä»¶ï¼Œæ˜¯ç”±ä¸€ä¸ªæ–‡ä»¶åˆ°ä¸€å—å†…å­˜çš„æ˜ å°„ï¼Œå°†ä¸å¿…å†å¯¹æ–‡ä»¶æ‰§è¡ŒI&#x2F;Oæ“ä½œ</li></ul></li></ul></li></ul><h2 id="3-4-Pythonä¸­åç¨‹çš„æ¨¡å—"><a href="#3-4-Pythonä¸­åç¨‹çš„æ¨¡å—" class="headerlink" title="3.4 Pythonä¸­åç¨‹çš„æ¨¡å—"></a>3.4 Pythonä¸­åç¨‹çš„æ¨¡å—</h2><ul><li>greenletï¼šé‡åˆ°I&#x2F;O<code>æ‰‹åŠ¨åˆ‡æ¢</code>ï¼Œæ˜¯ä¸€ä¸ªCæ¨¡å—</li><li>geventï¼šå¯¹greenletå°è£…ï¼Œé‡åˆ°I&#x2F;O<code>è‡ªåŠ¨åˆ‡æ¢</code>ï¼ˆ<code>å€ŸåŠ©Cè¯­è¨€åº“greenlet</code>ï¼‰</li><li>asyncioï¼šå’Œgeventä¸€æ ·ï¼Œä¹Ÿæ˜¯å®ç°åç¨‹çš„ä¸€ä¸ªæ¨¡å—ï¼ˆ<code>pythonè‡ªå·±å®ç°</code>ï¼‰</li></ul><h2 id="è¿›ç¨‹æ± ã€çº¿ç¨‹æ± ã€åç¨‹æ± å¯¹æ¯”"><a href="#è¿›ç¨‹æ± ã€çº¿ç¨‹æ± ã€åç¨‹æ± å¯¹æ¯”" class="headerlink" title="è¿›ç¨‹æ± ã€çº¿ç¨‹æ± ã€åç¨‹æ± å¯¹æ¯”"></a>è¿›ç¨‹æ± ã€çº¿ç¨‹æ± ã€åç¨‹æ± å¯¹æ¯”</h2><ul><li>è¿›ç¨‹æ± ï¼šæµªè´¹èµ„æº</li></ul><pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token comment"># -*- coding: utf-8 -*-</span><span class="token keyword">import</span> requests<span class="token keyword">from</span> multiprocessing <span class="token keyword">import</span> Pool<span class="token keyword">def</span> <span class="token function">fetch_request</span><span class="token punctuation">(</span>url<span class="token punctuation">)</span><span class="token punctuation">:</span>    result <span class="token operator">=</span> requests<span class="token punctuation">.</span>get<span class="token punctuation">(</span>url<span class="token punctuation">)</span>    <span class="token keyword">print</span><span class="token punctuation">(</span>result<span class="token punctuation">.</span>text<span class="token punctuation">)</span><span class="token keyword">def</span> <span class="token function">call</span><span class="token punctuation">(</span>arg<span class="token punctuation">)</span><span class="token punctuation">:</span>    <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">'-->exec done:'</span><span class="token punctuation">,</span><span class="token string">"æµ‹è¯•è¿›ç¨‹æ± æ‰§è¡Œåå›è°ƒåŠŸèƒ½"</span><span class="token punctuation">)</span>url_list <span class="token operator">=</span> <span class="token punctuation">[</span>    <span class="token string">'https://www.baidu.com'</span><span class="token punctuation">,</span>    <span class="token string">'https://www.google.com/'</span><span class="token punctuation">,</span>         <span class="token comment">#googleé¡µé¢ä¼šå¡ä½ï¼ŒçŸ¥é“é¡µé¢è¶…æ—¶åè¿™ä¸ªè¿›ç¨‹æ‰ç»“æŸ</span>    <span class="token string">'http://dig.chouti.com/'</span><span class="token punctuation">,</span>          <span class="token comment">#choutié¡µé¢å†…å®¹ä¼šç›´æ¥è¿”å›ï¼Œä¸ä¼šç­‰å¾…Googleé¡µé¢çš„è¿”å›</span><span class="token punctuation">]</span><span class="token keyword">if</span> __name__ <span class="token operator">==</span> <span class="token string">'__main__'</span><span class="token punctuation">:</span>    pool <span class="token operator">=</span> Pool<span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">)</span>        <span class="token comment"># åˆ›å»ºçº¿ç¨‹æ± </span>    <span class="token keyword">for</span> url <span class="token keyword">in</span> url_list<span class="token punctuation">:</span>        <span class="token comment"># ç”¨æ³•1 callbackä½œç”¨æ˜¯æŒ‡å®šåªæœ‰å½“Fooè¿è¡Œç»“æŸåå°±æ‰§è¡Œcallbackè°ƒç”¨çš„å‡½æ•°,çˆ¶è¿›ç¨‹è°ƒç”¨çš„callbackå‡½æ•°</span>        pool<span class="token punctuation">.</span>apply_async<span class="token punctuation">(</span>func<span class="token operator">=</span>fetch_request<span class="token punctuation">,</span> args<span class="token operator">=</span><span class="token punctuation">(</span>url<span class="token punctuation">,</span><span class="token punctuation">)</span><span class="token punctuation">,</span>callback<span class="token operator">=</span>call<span class="token punctuation">)</span>    <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">'end'</span><span class="token punctuation">)</span>    pool<span class="token punctuation">.</span>close<span class="token punctuation">(</span><span class="token punctuation">)</span>    <span class="token comment">#å…³é—­pool</span>    pool<span class="token punctuation">.</span>join<span class="token punctuation">(</span><span class="token punctuation">)</span>     <span class="token comment">#è¿›ç¨‹æ± ä¸­è¿›ç¨‹æ‰§è¡Œå®Œæ¯•åå†å…³é—­ï¼Œå¦‚æœæ³¨é‡Šï¼Œé‚£ä¹ˆç¨‹åºç›´æ¥å…³é—­ã€‚</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><ul><li>çº¿ç¨‹æ± <ul><li>åˆ›å»ºä¸€ä¸ªæ–°çº¿ç¨‹å°†æ¶ˆè€—å¤§é‡çš„è®¡ç®—èµ„æºï¼Œå¹¶ä¸”åœ¨é˜»å¡è¿‡ç¨‹ä¸­æ— æ³•æ‰§è¡Œå…¶ä»–ä»»åŠ¡ã€‚ </li><li>æ¯”å¦‚çº¿ç¨‹æ± ä¸­10ä¸ªçº¿ç¨‹åŒæ—¶å»10ä¸ªurlè·å–æ•°æ®ï¼Œå½“æ•°æ®è¿˜æ²¡æ¥æ—¶è¿™äº›çº¿ç¨‹å…¨éƒ¨éƒ½åœ¨ç­‰å¾…ï¼Œä¸åšäº‹ã€‚</li></ul></li></ul><pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token keyword">import</span> requests<span class="token keyword">from</span> concurrent<span class="token punctuation">.</span>futures <span class="token keyword">import</span> ThreadPoolExecutor<span class="token keyword">def</span> <span class="token function">fetch_request</span><span class="token punctuation">(</span>url<span class="token punctuation">)</span><span class="token punctuation">:</span>    result <span class="token operator">=</span> requests<span class="token punctuation">.</span>get<span class="token punctuation">(</span>url<span class="token punctuation">)</span>    <span class="token keyword">print</span><span class="token punctuation">(</span>result<span class="token punctuation">.</span>text<span class="token punctuation">)</span>url_list <span class="token operator">=</span> <span class="token punctuation">[</span>    <span class="token string">'https://www.baidu.com'</span><span class="token punctuation">,</span>    <span class="token string">'https://www.google.com/'</span><span class="token punctuation">,</span>         <span class="token comment">#googleé¡µé¢ä¼šå¡ä½ï¼ŒçŸ¥é“é¡µé¢è¶…æ—¶åè¿™ä¸ªè¿›ç¨‹æ‰ç»“æŸ</span>    <span class="token string">'http://dig.chouti.com/'</span><span class="token punctuation">,</span>          <span class="token comment">#choutié¡µé¢å†…å®¹ä¼šç›´æ¥è¿”å›ï¼Œä¸ä¼šç­‰å¾…Googleé¡µé¢çš„è¿”å›</span><span class="token punctuation">]</span>pool <span class="token operator">=</span> ThreadPoolExecutor<span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">)</span>            <span class="token comment"># åˆ›å»ºä¸€ä¸ªçº¿ç¨‹æ± ï¼Œæœ€å¤šå¼€10ä¸ªçº¿ç¨‹</span><span class="token keyword">for</span> url <span class="token keyword">in</span> url_list<span class="token punctuation">:</span>    pool<span class="token punctuation">.</span>submit<span class="token punctuation">(</span>fetch_request<span class="token punctuation">,</span>url<span class="token punctuation">)</span>       <span class="token comment"># å»çº¿ç¨‹æ± ä¸­è·å–ä¸€ä¸ªçº¿ç¨‹ï¼Œçº¿ç¨‹å»æ‰§è¡Œfetch_requestæ–¹æ³•</span>pool<span class="token punctuation">.</span>shutdown<span class="token punctuation">(</span><span class="token boolean">True</span><span class="token punctuation">)</span>                      <span class="token comment"># ä¸»çº¿ç¨‹è‡ªå·±å…³é—­ï¼Œè®©å­çº¿ç¨‹è‡ªå·±æ‹¿ä»»åŠ¡æ‰§è¡Œ</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><ul><li>åç¨‹<ul><li>ç‰¹ç‚¹ï¼š geventåªç”¨èµ·ä¸€ä¸ªçº¿ç¨‹ï¼Œå½“è¯·æ±‚å‘å‡ºå»ågeventå°±ä¸ç®¡,æ°¸è¿œå°±åªæœ‰ä¸€ä¸ªçº¿ç¨‹å·¥ä½œï¼Œè°å…ˆå›æ¥å…ˆå¤„ç†</li></ul></li></ul><pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token keyword">import</span> gevent<span class="token keyword">from</span> gevent <span class="token keyword">import</span> monkeymonkey<span class="token punctuation">.</span>patch_all<span class="token punctuation">(</span>select<span class="token operator">=</span><span class="token boolean">False</span><span class="token punctuation">)</span>  <span class="token comment"># æ³¨æ„ï¼Œè¿™ä¸ªå¯¼åŒ…é¡ºåºä¸è¦å˜</span><span class="token keyword">import</span> requests<span class="token comment"># è¿™äº›è¯·æ±‚è°å…ˆå›æ¥å°±å…ˆå¤„ç†è°</span><span class="token keyword">def</span> <span class="token function">fetch_async</span><span class="token punctuation">(</span>method<span class="token punctuation">,</span> url<span class="token punctuation">,</span> req_kwargs<span class="token punctuation">)</span><span class="token punctuation">:</span>    response <span class="token operator">=</span> requests<span class="token punctuation">.</span>request<span class="token punctuation">(</span>method<span class="token operator">=</span>method<span class="token punctuation">,</span> url<span class="token operator">=</span>url<span class="token punctuation">,</span> <span class="token operator">**</span>req_kwargs<span class="token punctuation">)</span>    <span class="token keyword">print</span><span class="token punctuation">(</span>response<span class="token punctuation">.</span>url<span class="token punctuation">,</span> response<span class="token punctuation">.</span>content<span class="token punctuation">)</span><span class="token comment"># ##### å‘é€è¯·æ±‚ #####</span>gevent<span class="token punctuation">.</span>joinall<span class="token punctuation">(</span><span class="token punctuation">[</span>    gevent<span class="token punctuation">.</span>spawn<span class="token punctuation">(</span>fetch_async<span class="token punctuation">,</span> method<span class="token operator">=</span><span class="token string">'get'</span><span class="token punctuation">,</span> url<span class="token operator">=</span><span class="token string">'https://www.baidu.com/'</span><span class="token punctuation">,</span> req_kwargs<span class="token operator">=</span><span class="token punctuation">&#123;</span><span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">,</span>    gevent<span class="token punctuation">.</span>spawn<span class="token punctuation">(</span>fetch_async<span class="token punctuation">,</span> method<span class="token operator">=</span><span class="token string">'get'</span><span class="token punctuation">,</span> url<span class="token operator">=</span><span class="token string">'https://www.google.com/'</span><span class="token punctuation">,</span> req_kwargs<span class="token operator">=</span><span class="token punctuation">&#123;</span><span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">,</span>    gevent<span class="token punctuation">.</span>spawn<span class="token punctuation">(</span>fetch_async<span class="token punctuation">,</span> method<span class="token operator">=</span><span class="token string">'get'</span><span class="token punctuation">,</span> url<span class="token operator">=</span><span class="token string">'https://github.com/'</span><span class="token punctuation">,</span> req_kwargs<span class="token operator">=</span><span class="token punctuation">&#123;</span><span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>]]></content>
      
      
      <categories>
          
          <category> åç«¯ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> python </tag>
            
            <tag> linux </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>pythonä¸­çš„å…ƒç±»</title>
      <link href="/posts/25874.html"/>
      <url>/posts/25874.html</url>
      
        <content type="html"><![CDATA[<h3 id="å…ƒç±»çš„å®šä¹‰"><a href="#å…ƒç±»çš„å®šä¹‰" class="headerlink" title="å…ƒç±»çš„å®šä¹‰"></a>å…ƒç±»çš„å®šä¹‰</h3><p> <a href="https://www.bilibili.com/video/BV1uA411V7dW?p=4">æ¡ˆä¾‹ï¼šå…ƒç±»å®ç°å•ä¾‹æ¨¡å¼_å“”å“©å“”å“©_bilibili</a> </p><ol><li><p>åœ¨pythonä¸­ï¼Œä¸€åˆ‡çš†æ˜¯å¯¹è±¡ï¼Œç±»æœ¬èº«ä¹Ÿæ˜¯å¯¹è±¡ï¼Œå½“ä½¿ç”¨å…³é”®å­—classæ—¶ï¼Œè§£é‡Šå™¨ä¼šåœ¨å†…å­˜ä¸­åˆ›å»ºä¸€ä¸ªå¯¹è±¡ï¼ˆè¿™ä¸ªå¯¹è±¡æ˜¯æŒ‡ç±»æœ¬èº«ï¼Œè€Œä¸æ˜¯ç±»çš„å®ä¾‹ï¼‰</p><pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token keyword">class</span> <span class="token class-name">Student</span><span class="token punctuation">:</span>  <span class="token comment"># è¿™å¥è§£é‡Šå™¨æ‰§è¡Œäº†type("Student", (), &#123;&#125;)</span>    <span class="token keyword">pass</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre></li><li><p>å…ƒç±»æ˜¯ç±»çš„ç±»ï¼Œæ˜¯ç±»çš„æ¨¡æ¿ï¼Œ æ˜¯ç”¨æ¥æ§åˆ¶å¦‚ä½•åˆ›å»ºç±»çš„ï¼Œå…ƒç±»çš„å®ä¾‹å¯¹è±¡ä¸ºç±»ï¼Œæ­£å¦‚ç±»çš„å®ä¾‹ä¸ºå¯¹è±¡</p></li><li><p>typeæ˜¯pythonå†…å»ºçš„ä¸€ä¸ªå…ƒç±»ï¼Œç”¨æ¥ç›´æ¥æ§åˆ¶ç±»çš„ç”Ÿæˆï¼Œpythonä¸­ä»»ä½•ç›´æ¥å®šä¹‰çš„ç±»ï¼Œéƒ½æ˜¯typeç±»å®ä¾‹åŒ–çš„å¯¹è±¡</p></li></ol><h3 id="åˆ›å»ºç±»çš„ä¸¤ç§æ–¹æ³•"><a href="#åˆ›å»ºç±»çš„ä¸¤ç§æ–¹æ³•" class="headerlink" title="åˆ›å»ºç±»çš„ä¸¤ç§æ–¹æ³•"></a>åˆ›å»ºç±»çš„ä¸¤ç§æ–¹æ³•</h3><p>Â·&#96;&#96;&#96;</p><pre class="line-numbers language-none"><code class="language-none">class Student:passStudent &#x3D; type(&#39;Student&#39;, (), &#123;&#125;)<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre><h3 id="è‡ªå®šä¹‰ä¸€ä¸ªå…ƒç±»"><a href="#è‡ªå®šä¹‰ä¸€ä¸ªå…ƒç±»" class="headerlink" title="è‡ªå®šä¹‰ä¸€ä¸ªå…ƒç±»"></a>è‡ªå®šä¹‰ä¸€ä¸ªå…ƒç±»</h3><pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token keyword">class</span> <span class="token class-name">Mytype</span><span class="token punctuation">(</span><span class="token builtin">type</span><span class="token punctuation">)</span><span class="token punctuation">:</span>      <span class="token keyword">def</span> <span class="token function">__init__</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> a<span class="token punctuation">,</span> b<span class="token punctuation">,</span> c<span class="token punctuation">)</span><span class="token punctuation">:</span>        <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">"æ‰§è¡Œæ„é€ ç±»æ–¹æ³•"</span><span class="token punctuation">)</span>        <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">"æ‰§è¡Œå…ƒç±»çš„ç¬¬ä¸€ä¸ªå‚æ•°&#123;&#125;"</span><span class="token punctuation">.</span><span class="token builtin">format</span><span class="token punctuation">(</span>self<span class="token punctuation">)</span><span class="token punctuation">)</span>        <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">"æ‰§è¡Œå…ƒç±»çš„ç¬¬ä¸€ä¸ªå‚æ•°&#123;&#125;"</span><span class="token punctuation">.</span><span class="token builtin">format</span><span class="token punctuation">(</span>a<span class="token punctuation">)</span><span class="token punctuation">)</span>        <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">"æ‰§è¡Œå…ƒç±»çš„ç¬¬äºŒä¸ªå‚æ•°&#123;&#125;"</span><span class="token punctuation">.</span><span class="token builtin">format</span><span class="token punctuation">(</span>b<span class="token punctuation">)</span><span class="token punctuation">)</span>        <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">"æ‰§è¡Œå…ƒç±»çš„ç¬¬ä¸‰ä¸ªå‚æ•°&#123;&#125;"</span><span class="token punctuation">.</span><span class="token builtin">format</span><span class="token punctuation">(</span>c<span class="token punctuation">)</span><span class="token punctuation">)</span>    <span class="token keyword">def</span> <span class="token function">__call__</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> <span class="token operator">*</span>args<span class="token punctuation">,</span> <span class="token operator">**</span>kwargs<span class="token punctuation">)</span><span class="token punctuation">:</span>        <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">"æ‰§è¡Œå…ƒç±»çš„__call__æ–¹æ³•"</span><span class="token punctuation">)</span>        obj <span class="token operator">=</span> <span class="token builtin">object</span><span class="token punctuation">.</span>__new__<span class="token punctuation">(</span>self<span class="token punctuation">)</span>        self<span class="token punctuation">.</span>__init__<span class="token punctuation">(</span>obj<span class="token punctuation">,</span> <span class="token operator">*</span>args<span class="token punctuation">,</span> <span class="token operator">**</span>kwargs<span class="token punctuation">)</span>        <span class="token keyword">return</span> obj<span class="token keyword">class</span> <span class="token class-name">Student</span><span class="token punctuation">(</span>metaclass<span class="token operator">=</span>Mytype<span class="token punctuation">)</span><span class="token punctuation">:</span>  <span class="token comment">### è¿™å¥ç›¸å½“äºæ‰§è¡Œ Student = Mytype(Student, "Student", (), &#123;&#125;)</span>    <span class="token keyword">def</span> <span class="token function">__init__</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> name<span class="token punctuation">)</span><span class="token punctuation">:</span>        self<span class="token punctuation">.</span>name <span class="token operator">=</span> names <span class="token operator">=</span> Student<span class="token punctuation">(</span><span class="token string">"æå››"</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>]]></content>
      
      
      <categories>
          
          <category> python </category>
          
      </categories>
      
      
        <tags>
            
            <tag> pythonåŸºç¡€ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>è°ˆè°ˆdjango</title>
      <link href="/posts/35098.html"/>
      <url>/posts/35098.html</url>
      
        <content type="html"><![CDATA[<h3 id="Django"><a href="#Django" class="headerlink" title="Django"></a>Django</h3><p>djangoæ˜¯ä¸€ä¸ªæœ‰pythonç¼–å†™çš„webåº”ç”¨æ¡†æ¶ï¼Œä½¿ç”¨djangoå¯ä»¥å¾ˆè½»æ˜“çš„å®Œæˆä¸€ä¸ªç½‘ç«™çš„å¤§éƒ¨åˆ†å†…å®¹ï¼Œåœ¨è¿™ä¸ªåŸºç¡€ä¸Šå¯ä»¥è¿›ä¸€æ­¥å¼€å‘å‡ºå…¨åŠŸèƒ½çš„webæœåŠ¡ã€‚djangoæœ¬èº«åŸºäºmvcæ¨¡å¼ï¼ˆmodel, view, controllerï¼‰çš„è®¾è®¡æ¨¡å¼ï¼Œä½¿åç»­å¯¹ç¨‹åºçš„ä¿®æ”¹å˜å¾—ç®€å•æ˜“è¡Œã€‚</p><p>mvcçš„ä¼˜åŠ¿ï¼š</p><p>ä½è€¦åˆ</p><p>å¼€å‘å¿«æ·</p><p>éƒ¨ç½²æ–¹ä¾¿</p><p>å¯é‡ç”¨æ€§é«˜</p><p>ç»´æŠ¤æˆæœ¬ä½</p><p>ç‰¹ç‚¹ï¼š</p><p>å¼ºå¤§çš„æ•°æ®åº“åŠŸèƒ½</p><p>è‡ªå¸¦å¼ºå¤§çš„åå°</p><h3 id="MTVå’Œmvcæ¨¡å¼"><a href="#MTVå’Œmvcæ¨¡å¼" class="headerlink" title="MTVå’Œmvcæ¨¡å¼"></a>MTVå’Œmvcæ¨¡å¼</h3><p>MTVæ¨¡å¼æ˜¯æŒ‡ï¼š</p><p>m: æ¨¡å‹ï¼Œè´Ÿè´£æ•°æ®åº“çš„æ˜ å°„ï¼ˆormï¼‰</p><p>v: è§†å›¾ï¼Œ å›¾å½¢ç•Œé¢ï¼Œè´Ÿè´£ä¸ç”¨æˆ·çš„äº¤äº’(é¡µé¢) </p><p>c: æ§åˆ¶å™¨ï¼Œ è´Ÿè´£è½¬å‘è¯·æ±‚</p><p>MTVæ¨¡å¼æ˜¯æŒ‡ï¼š</p><p>m: æ¨¡å‹ï¼Œ è´Ÿè´£ä¸šåŠ¡å¯¹è±¡å’Œæ•°æ®åº“çš„æ˜ å°„</p><p>t: æ¨¡æ¿ï¼Œå°†æ•°æ®é€šè¿‡htmlçš„å½¢å¼å±•ç¤ºç»™ç”¨æˆ·</p><p>v: è§†å›¾ï¼Œè´Ÿè´£å¤„ç†ä¸šåŠ¡é€»è¾‘ï¼Œåœ¨é€‚å½“çš„æ—¶å€™è°ƒç”¨view å’Œmodel</p><p>é™¤æ­¤ä¹‹å¤–ï¼Œmtvæ¨¡å¼è¿˜éœ€è¦ä¸€ä¸ªurlåˆ†å‘å™¨æ¥åˆ†å‘è¯·æ±‚ï¼Œå°†ä¸åŒçš„urlåˆ†å‘ç»™ä¸åŒçš„urlè¿›è¡Œå¤„ç†</p>]]></content>
      
      
      <categories>
          
          <category> python </category>
          
      </categories>
      
      
        <tags>
            
            <tag> django </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>ä»€ä¹ˆæ˜¯python</title>
      <link href="/posts/12856.html"/>
      <url>/posts/12856.html</url>
      
        <content type="html"><![CDATA[<p>python æ˜¯ä¸€é—¨åŠ¨æ€è¯­è¨€ï¼Œ å®šä¹‰å˜é‡æ—¶ä¸éœ€è¦å£°åå˜é‡çš„ç±»å‹</p><p>python æ˜¯ä¸€ç§è§£é‡Šå‹è¯­è¨€ï¼Œåœ¨è¿è¡Œä»£ç å‰ä¸éœ€è¦æå‰ç¼–è¯‘</p><p>pythonä¸­ä¸€åˆ‡çš†å¯¹è±¡ï¼Œä»–æœ‰å¯¹è±¡æ¨¡å—ï¼Œçº¿ç¨‹ï¼Œå¼‚å¸¸å¤„ç†å’Œè‡ªåŠ¨å†…å­˜ç®¡ç†ç­‰ï¼Œç¨‹åºå‘˜å¯ä»¥ä¸“æ³¨ä¸ç®—æ³•å’Œæ•°æ®ç»“æ„ï¼Œè€Œä¸å¿…å¤„ç†åº•å±‚ç»†èŠ‚</p>]]></content>
      
      
      <categories>
          
          <category> python </category>
          
      </categories>
      
      
        <tags>
            
            <tag> pythonåŸºç¡€ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>pythonä¸­çš„GILå…¨å±€è§£é‡Šå™¨é”</title>
      <link href="/posts/38350.html"/>
      <url>/posts/38350.html</url>
      
        <content type="html"><![CDATA[<h1 id="GIL"><a href="#GIL" class="headerlink" title="GIL"></a>GIL</h1><p>åœ¨cpythonä¸­ä½¿ç”¨å¼•ç”¨è®¡æ•°æ¥ç®¡ç†å†…å­˜ï¼Œä¸¾ä¸ªä¾‹å­</p><pre class="line-numbers language-none"><code class="language-none">import sysa &#x3D; []b &#x3D; asys.getrecount(a)<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre><p>åœ¨è¿™ä¸ªä¾‹å­ä¸­ï¼Œå¼•ç”¨è®¡æ•°æ—¶3ï¼Œè¿™æ ·ä¸€æ¥ï¼Œå¦‚æœæœ‰ä¸¤ä¸ªçº¿ç¨‹åŒæ—¶å¼•ç”¨äº†aï¼Œä¼šå‡ºç°ç«äº‰æ¡ä»¶æ¼æ´ï¼Œå¼•ç”¨è®¡æ•°å¯èƒ½åªå¢åŠ 1, è¿™æ ·ä¼šé€ æˆå†…å­˜æ±¡æŸ“ï¼Œå› ä¸ºå½“ç¬¬ä¸€ä¸ªçº¿ç¨‹ç»“æŸæ—¶,å¼•ç”¨è®¡æ•°-1,ä¼šä½¿å¯¹è±¡é”€æ¯ï¼Œè¾¾åˆ°å†…å­˜å›æ”¶çš„æ ‡å‡†ï¼Œç¬¬äºŒä¸ªçº¿ç¨‹å†å»è®¿é—®çš„æ—¶å€™ï¼Œæ‰¾ä¸åˆ°æœ‰æ•ˆå†…å­˜ã€‚</p><p>cpythonä¸­å¼•GILä¸»è¦æœ‰ä¸¤ä¸ªåŸå› ï¼š</p><ol><li>è®¾è®¡è€…ä¸ºäº†è§„é¿å†…å­˜ç®¡ç†è¿™æ ·å¤æ‚çš„ç«äº‰é£é™©</li><li>cpythonä¸­å¤§é‡ä½¿ç”¨äº†cè¯­è¨€åº“ï¼Œè€Œcè¯­è¨€åº“å¤§å¤šä¸æ˜¯åŸç”Ÿçº¿ç¨‹å®‰å…¨çš„ï¼ˆçº¿ç¨‹å®‰å…¨ä¼šé™ä½å¤æ‚åº¦ï¼‰</li></ol><h1 id="GILå·¥ä½œåŸç†"><a href="#GILå·¥ä½œåŸç†" class="headerlink" title="GILå·¥ä½œåŸç†"></a>GILå·¥ä½œåŸç†</h1><p> ä¸‹é¢è¿™å¼ å›¾ï¼Œå°±æ˜¯ä¸€ä¸ª GIL åœ¨ Python ç¨‹åºçš„å·¥ä½œç¤ºä¾‹ã€‚å…¶ä¸­ï¼ŒThread 1ã€2ã€3 è½®æµæ‰§è¡Œï¼Œæ¯ä¸€ä¸ªçº¿ç¨‹åœ¨å¼€å§‹æ‰§è¡Œæ—¶ï¼Œéƒ½ä¼šé”ä½ GILï¼Œä»¥é˜»æ­¢åˆ«çš„çº¿ç¨‹æ‰§è¡Œï¼›åŒæ ·çš„ï¼Œæ¯ä¸€ä¸ªçº¿ç¨‹æ‰§è¡Œå®Œä¸€æ®µåï¼Œä¼šé‡Šæ”¾ GILï¼Œä»¥å…è®¸åˆ«çš„çº¿ç¨‹å¼€å§‹åˆ©ç”¨èµ„æºã€‚ <img src="https://zhangtq-blog.oss-cn-hangzhou.aliyuncs.com/content_picture/1666493857159.png" alt="1666493857159"></p><p>ä½†æ˜¯å¦‚æœæ­»é”äº†æ€ä¹ˆåŠå‘¢ï¼Œå¦‚æœä»…ä»…æ˜¯è¦æ±‚ Python çº¿ç¨‹åœ¨å¼€å§‹æ‰§è¡Œæ—¶é”ä½ GILï¼Œè€Œæ°¸è¿œä¸å»é‡Šæ”¾ GILï¼Œé‚£åˆ«çš„çº¿ç¨‹å°±éƒ½æ²¡æœ‰äº†è¿è¡Œçš„æœºä¼šã€‚ </p><p>æ²¡é”™cpythonè¿˜æœ‰å¦å¤–ä¸€ä¸ªæœºåˆ¶ï¼Œcheck_intervalæœºåˆ¶ï¼Œåœ¨ä¸€ä¸ªåˆç†çš„æ—¶é—´æ®µå†…python è§£é‡Šå™¨éƒ½ä¼šå¼ºåˆ¶é‡Šæ”¾é”</p><h1 id="pythonçš„çº¿ç¨‹å®‰å…¨é—®é¢˜"><a href="#pythonçš„çº¿ç¨‹å®‰å…¨é—®é¢˜" class="headerlink" title="pythonçš„çº¿ç¨‹å®‰å…¨é—®é¢˜"></a>pythonçš„çº¿ç¨‹å®‰å…¨é—®é¢˜</h1><p>æœ‰äº†GIL,å¹¶ä¸æ„å‘³ç€python ç¼–ç¨‹å°±ä¸è€ƒè™‘çº¿ç¨‹å®‰å…¨é—®é¢˜äº†ï¼Œå› ä¸ºå­˜åœ¨check_intervalæŠ¢å æœºåˆ¶ï¼Œæ‰€ä»¥æŸäº›æ“ä½œå¯èƒ½ä¼šè¢«æ‰“æ–­ï¼Œæ‰€ä»¥æˆ‘ä»¬éœ€è¦ä½¿ç”¨threading.lock()æ¥ç¡®ä¿çº¿ç¨‹å®‰å…¨</p><h1 id="å¦‚ä½•ç»•è¿‡GIL"><a href="#å¦‚ä½•ç»•è¿‡GIL" class="headerlink" title="å¦‚ä½•ç»•è¿‡GIL"></a>å¦‚ä½•ç»•è¿‡GIL</h1><p>ç»•è¿‡ CPythonï¼Œä½¿ç”¨ JPythonï¼ˆJava å®ç°çš„ Python è§£é‡Šå™¨ï¼‰ç­‰åˆ«çš„å®ç° </p><p>æŠŠå…³é”®æ€§èƒ½ä»£ç ï¼Œæ”¾åˆ°åˆ«çš„è¯­è¨€ï¼ˆä¸€èˆ¬æ˜¯ C++ï¼‰ä¸­å®ç°ã€‚</p>]]></content>
      
      
      <categories>
          
          <category> python </category>
          
      </categories>
      
      
        <tags>
            
            <tag> pythonåŸºç¡€ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>pythonçš„æ·±æ‹·è´å’Œæµ…æ‹·è´</title>
      <link href="/posts/26413.html"/>
      <url>/posts/26413.html</url>
      
        <content type="html"><![CDATA[<h1 id="æ·±æµ…æ‹·è´çš„æœ¬è´¨"><a href="#æ·±æµ…æ‹·è´çš„æœ¬è´¨" class="headerlink" title="æ·±æµ…æ‹·è´çš„æœ¬è´¨"></a>æ·±æµ…æ‹·è´çš„æœ¬è´¨</h1><blockquote><p>æµ…æ‹·è´ï¼Œæ‹·è´çš„ç¨‹åº¦æµ…ï¼Œåªæ‹·è´åŸæ•°æ®çš„é¦–åœ°å€ï¼Œç„¶åé€šè¿‡åŸæ•°æ®çš„é¦–åœ°å€ï¼Œå»è·å–å†…å®¹ã€‚ </p><p>æ·±æ‹·è´ï¼Œæ‹·è´çš„ç¨‹åº¦æ·±ï¼Œè‡ªå·±æ–°å¼€è¾Ÿäº†ä¸€å—å†…å­˜ï¼Œå°†è¢«æ‹·è´å†…å®¹å…¨éƒ¨æ‹·è´è¿‡æ¥äº† </p></blockquote><h1 id="å¦‚ä½•è¿›è¡Œæ·±æµ…æ‹·è´"><a href="#å¦‚ä½•è¿›è¡Œæ·±æµ…æ‹·è´" class="headerlink" title="å¦‚ä½•è¿›è¡Œæ·±æµ…æ‹·è´"></a>å¦‚ä½•è¿›è¡Œæ·±æµ…æ‹·è´</h1><blockquote><p>æµ…æ‹·è´çš„ä¸‰ç§å½¢å¼ï¼šåˆ‡ç‰‡ï¼Œå·¥å‚å‡½æ•°ï¼Œcopy</p><p>æ·±æ‹·è´ï¼šcopy.deepcopy</p></blockquote><h1 id="æ·±æ‹·è´å’Œæµ…æ‹·è´çš„ä¼˜ç¼ºç‚¹å¯¹æ¯”"><a href="#æ·±æ‹·è´å’Œæµ…æ‹·è´çš„ä¼˜ç¼ºç‚¹å¯¹æ¯”" class="headerlink" title="æ·±æ‹·è´å’Œæµ…æ‹·è´çš„ä¼˜ç¼ºç‚¹å¯¹æ¯”"></a>æ·±æ‹·è´å’Œæµ…æ‹·è´çš„ä¼˜ç¼ºç‚¹å¯¹æ¯”</h1><blockquote><p>æµ…æ‹·è´æ‹·è´ç¨‹åº¦ä½ï¼Œåªå¤åˆ¶åŸæ•°æ®çš„åœ°å€ã€‚å…¶å®æ˜¯å°†å‰¯æœ¬çš„åœ°å€æŒ‡å‘åŸæ•°æ®åœ°å€ã€‚ä¿®æ”¹å‰¯æœ¬å†…å®¹ï¼Œæ˜¯é€šè¿‡å½“å‰åœ°å€æŒ‡å‘åŸæ•°æ®åœ°å€ï¼Œå»ä¿®æ”¹ã€‚æ‰€ä»¥ä¿®æ”¹å‰¯æœ¬å†…å®¹ä¼šå½±å“åˆ°åŸæ•°æ®å†…å®¹ã€‚ä½†æ˜¯æµ…æ‹·è´è€—æ—¶çŸ­ï¼Œå ç”¨å†…å­˜ç©ºé—´å°‘ </p><p>æ·±æ‹·è´æ‹·è´ç¨‹åº¦é«˜ï¼Œå°†åŸæ•°æ®å¤åˆ¶åˆ°æ–°çš„å†…å­˜ç©ºé—´ä¸­ã€‚æ”¹å˜æ‹·è´åçš„å†…å®¹ä¸å½±å“åŸæ•°æ®å†…å®¹ã€‚ä½†æ˜¯æ·±æ‹·è´è€—æ—¶é•¿ï¼Œä¸”å ç”¨å†…å­˜ç©ºé—´ </p></blockquote>]]></content>
      
      
      <categories>
          
          <category> python </category>
          
      </categories>
      
      
        <tags>
            
            <tag> pythonåŸºç¡€ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>pythonçš„åƒåœ¾å›æ”¶æœºåˆ¶</title>
      <link href="/posts/41514.html"/>
      <url>/posts/41514.html</url>
      
        <content type="html"><![CDATA[<h1 id="å¼•ç”¨è®¡æ•°cæºç "><a href="#å¼•ç”¨è®¡æ•°cæºç " class="headerlink" title="å¼•ç”¨è®¡æ•°cæºç "></a>å¼•ç”¨è®¡æ•°cæºç </h1><p><img src="https://zhangtq-blog.oss-cn-hangzhou.aliyuncs.com/content_picture/1666365135262.png" alt="1666365135262"></p><h1 id="å¼•ç”¨è®¡æ•°åœ¨pythonä¸­çš„å®ç°"><a href="#å¼•ç”¨è®¡æ•°åœ¨pythonä¸­çš„å®ç°" class="headerlink" title="å¼•ç”¨è®¡æ•°åœ¨pythonä¸­çš„å®ç°"></a>å¼•ç”¨è®¡æ•°åœ¨pythonä¸­çš„å®ç°</h1><p><img src="https://zhangtq-blog.oss-cn-hangzhou.aliyuncs.com/content_picture/1666365721785.png" alt="1666365721785"></p><p><img src="https://zhangtq-blog.oss-cn-hangzhou.aliyuncs.com/content_picture/1666366202112.png" alt="1666366202112"></p><h1 id="æ ‡è®°æ¸…æ¥šè§£å†³å¾ªç¯å¼•ç”¨"><a href="#æ ‡è®°æ¸…æ¥šè§£å†³å¾ªç¯å¼•ç”¨" class="headerlink" title="æ ‡è®°æ¸…æ¥šè§£å†³å¾ªç¯å¼•ç”¨"></a>æ ‡è®°æ¸…æ¥šè§£å†³å¾ªç¯å¼•ç”¨</h1><p>åªç”¨å¼•ç”¨è®¡æ•°çš„è¯ï¼Œä¼šå‡ºç°å¾ªç¯å¼•ç”¨çš„é—®é¢˜ï¼Œåœ¨pythonä¸­ç”¨äº†æ ‡è®°æ¸…é™¤çš„æ–¹å¼æ¥è§£å†³</p><p><img src="https://zhangtq-blog.oss-cn-hangzhou.aliyuncs.com/content_picture/1666366643482.png" alt="1666366643482"></p><p><img src="https://zhangtq-blog.oss-cn-hangzhou.aliyuncs.com/content_picture/1666366986121.png" alt="1666366986121"></p><p><img src="https://zhangtq-blog.oss-cn-hangzhou.aliyuncs.com/content_picture/1666367253217.png" alt="1666367253217"></p><p><img src="https://zhangtq-blog.oss-cn-hangzhou.aliyuncs.com/content_picture/1666367810310.png" alt="1666367810310"></p><p>æ€»ç»“ï¼š</p><p>åœ¨pythonä¸­ç»´æŠ¤äº†ä¸€ä¸ªrefchainçš„åŒå‘å¾ªç¯åˆ—è¡¨ï¼Œè¿™ä¸ªé“¾è¡¨ä¸­ç»´æŠ¤äº†ç¨‹åºè¿è¡Œéœ€è¦çš„æ‰€æœ‰å¯¹è±¡ï¼Œæ¯ç§å¯¹è±¡ä¸­éƒ½æœ‰obj_re centçš„å±æ€§ï¼Œé¦–æ¬¡åˆ›å»ºæ¬¡æ•°ä¸ºä¸€ï¼Œé€šè¿‡+1 -1æ¥ç»´æŠ¤è¯¥å¯¹è±¡è¢«å¼•ç”¨çš„æ¬¡æ•°ï¼Œå½“object_refcntä¸º0æ—¶ï¼Œè¯´æ˜éœ€è¦è¿›è¡Œåƒåœ¾å›æ”¶ã€‚</p><p>ä½†æ˜¯åœ¨pythonä¸­ï¼Œå¤šä¸ªå…ƒç´ ç»„æˆçš„å¯¹è±¡å¯èƒ½å­˜åœ¨ç›¸äº’å¼•ç”¨çš„é—®é¢˜ï¼Œä¸ºäº†è§£å†³è¿™ä¸ªé—®é¢˜ï¼Œpythonåˆå¼•å…¥äº†æ ‡è®°æ¸…é™¤çš„æ–¹å¼ï¼Œ</p><p>åœ¨è§£é‡Šå™¨å†…éƒ¨é¢å¤–å†ç»´æŠ¤ä¸‰ä¸ªåˆ—è¡¨ï¼ˆ0ä»£ï¼Œ1ä»£ï¼Œ2ä»£ï¼‰ï¼Œ</p><p>0ä»£ï¼šå½“0ä»£åˆ°è¾¾700ä¸ªæ‰«æä¸€æ¬¡ï¼Œ</p><p>1ä»£ï¼š å½“1ä»£æ‰«æ10æ¬¡æ‰«æä¸€æ¬¡</p><p>2ä»£ï¼š å½“2ä»£æ‰«æ10æ­¤æ‰«æä¸€æ¬¡</p><p>åœ¨è¿™ä¸ªåŸºç¡€ä¸Šï¼Œpythonå†…éƒ¨åˆåšç¼“å­˜ä¼˜åŒ–</p><p>ç¼“å­˜ä¼˜åŒ–æœ‰ä¸¤ç§ï¼š</p><ol><li><p>æ± ï¼ˆintï¼‰é¿å…é‡å¤åˆ›å»ºå’Œé”€æ¯å¸¸ç”¨çš„å¯¹è±¡</p></li><li><p>free_list å½“å¼•ç”¨è®¡æ•°ä¸º0æ—¶ï¼ŒæŒ‰ç†è¯´åº”è¯¥å›æ”¶ï¼Œä½†å†…éƒ¨ä¸ä¼šç›´æ¥å›æ”¶ï¼Œä¼šåŠ å…¥åˆ°free_listä¸­ï¼Œä»¥åä¸ä¼šç›´æ¥åˆ›å»ºï¼Œè€Œæ˜¯å…ˆä»free_listä¸­è·å–</p></li></ol>]]></content>
      
      
      <categories>
          
          <category> python </category>
          
      </categories>
      
      
        <tags>
            
            <tag> pythonåŸºç¡€ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>jenkinså¸¸ç”¨DSL</title>
      <link href="/posts/18404.html"/>
      <url>/posts/18404.html</url>
      
        <content type="html"><![CDATA[<p> <a href="https://blog.csdn.net/qq_34556414/article/details/121806285">Jenkins æµæ°´çº¿è¯­æ³• å¸¸ç”¨çš„DSLæ–¹æ³•æ€»ç»“_å¯Œå£«åº·è´¨æ£€å‘˜å¼ å…¨è›‹çš„åšå®¢-CSDNåšå®¢</a> </p>]]></content>
      
      
      <categories>
          
          <category> Devops </category>
          
      </categories>
      
      
        <tags>
            
            <tag> jenkins </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>æ„å»ºå·¥å…·ansibleé›†æˆ</title>
      <link href="/posts/47333.html"/>
      <url>/posts/47333.html</url>
      
        <content type="html"><![CDATA[<h5 id="CD-ansible"><a href="#CD-ansible" class="headerlink" title="CD-ansible"></a>CD-ansible</h5><h2 id="å®‰è£…"><a href="#å®‰è£…" class="headerlink" title="å®‰è£…"></a>å®‰è£…</h2><ol><li><p>yum install epel-release -y</p></li><li><p>yum install ansible -y</p></li><li><p>vi &#x2F;etc&#x2F;ansible&#x2F;hosts æ·»åŠ </p><pre class="line-numbers language-none"><code class="language-none">[servers]server1 192.168.72.131<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre><p><strong>æ³¨æ„å¦‚æœæ˜¯é›†æˆåˆ°jenkinsé‡Œï¼Œç”±äºjenlinsçš„é»˜è®¤å¯åŠ¨ç”¨æˆ·æ˜¯jenkinsï¼Œ æ‰€ä»¥éœ€è¦å’Œå…å¯†çš„ç”¨æˆ·ä¿æŒä¸€è‡´ï¼Œè¦ä¹ˆæ·»åŠ jenkisnå…å¯†ï¼Œè¦ä¹ˆä¿®æ”¹å¯åŠ¨ç”¨æˆ·ï¼Œæ­¤å¤„åšå¦‚ä¸‹ä¿®æ”¹</strong></p></li><li><p>chmod 777 &#x2F;etc&#x2F;sudoers</p></li><li><p>vi &#x2F;etc&#x2F;sudoers</p><pre class="line-numbers language-none"><code class="language-none">root    ALL&#x3D;(ALL)       ALLjenkins ALL&#x3D;(ALL)       ALL<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre></li><li><p>chmod 440 &#x2F;etc&#x2F;sudoers</p></li><li><p>vim &#x2F;etc&#x2F;passwd æ‰“å¼€jenkinsçš„bash</p></li><li><p>su jenkins</p></li><li><p>ssh-keygen</p></li><li><p>ssh-copy-id -i &#x2F;var&#x2F;lib&#x2F;jenkins&#x2F;.ssh&#x2F;id_rsa.pub <a href="mailto:&#x72;&#111;&#x6f;&#116;&#64;&#49;&#x39;&#x32;&#x2e;&#x31;&#x36;&#56;&#x2e;&#55;&#x32;&#46;&#49;&#51;&#50;">&#x72;&#111;&#x6f;&#116;&#64;&#49;&#x39;&#x32;&#x2e;&#x31;&#x36;&#56;&#x2e;&#55;&#x32;&#46;&#49;&#51;&#50;</a></p></li><li><p>vi &#x2F;etc&#x2F;ansible&#x2F;ansible.cfg</p><pre class="line-numbers language-none"><code class="language-none">[defaults]remote_user &#x3D; root<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre><pre class="line-numbers language-none"><code class="language-none">#!groovy@Library(&#39;jenkinslib&#39;) _def build &#x3D; new org.devops.build()def deploy &#x3D; new org.devops.deploy()String buildShell &#x3D; &quot;$&#123;env.buildShell&#125;&quot; &#x2F;&#x2F;jenkinsé¡¹ç›®ä¸­é…ç½®çš„å‚æ•°åç§°String buildType &#x3D; &quot;$&#123;env.buildType&#125;&quot;pipeline&#123;    agent any    stages&#123;        stage(&quot;build&quot;)&#123;            steps&#123;                script&#123;                    build.Build(buildType, buildShell)                    deploy.SaltDeploy(&quot;salt-minion&quot;, &quot;test.ping&quot;)                    deploy.AnsibleDeploy(&quot;server1&quot;, &quot;ping&quot;)                &#125;            &#125;        &#125;    &#125;&#125;&#x2F;&#x2F; è¯¥jenkins è„šæœ¬æ‰§è¡Œåˆ°antä¼šæŠ¥é”™ï¼Œæ‰€ä»¥åŠ å…¥try&#123;&#125;catch(e)&#123;&#125;è¯­å¥<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></li></ol>]]></content>
      
      
      <categories>
          
          <category> Devops </category>
          
      </categories>
      
      
        <tags>
            
            <tag> CICD </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>æ„å»ºå·¥å…·saltstacké›†æˆ</title>
      <link href="/posts/52139.html"/>
      <url>/posts/52139.html</url>
      
        <content type="html"><![CDATA[<h4 id="CD-saltstack"><a href="#CD-saltstack" class="headerlink" title="CD-saltstack"></a>CD-saltstack</h4><p><a href="https://repo.saltproject.io/#rhel">å®˜ç½‘</a></p><h5 id="saltstackå®‰è£…"><a href="#saltstackå®‰è£…" class="headerlink" title="saltstackå®‰è£…"></a>saltstackå®‰è£…</h5><ol><li><p>sudo rpm â€“import <a href="https://repo.saltproject.io/py3/redhat/8/x86_64/latest/SALTSTACK-GPG-KEY.pub">https://repo.saltproject.io/py3/redhat/8/x86_64/latest/SALTSTACK-GPG-KEY.pub</a></p></li><li><p>curl -fsSL <a href="https://repo.saltproject.io/py3/redhat/8/x86_64/latest.repo">https://repo.saltproject.io/py3/redhat/8/x86_64/latest.repo</a> | sudo tee &#x2F;etc&#x2F;yum.repos.d&#x2F;salt.repo</p></li><li><p>yum install salt-master</p></li><li><p>yum install salt-minion</p></li><li><p>systemctl start salt-master</p></li><li><p>systemctl start salt-minion</p></li><li><p>cd &#x2F;etc&#x2F;salt</p></li><li><p>vi minion æ·»åŠ master: 182.168.72.132   é‡å¯</p></li><li><p>salt-key -L   # masterä¸Šæ“ä½œå¯ä»¥çœ‹åˆ°æœªæ¥å—çš„key</p></li><li><p>salt-key -a 172.17.0.1</p></li><li><p>è®¾ç½®å¼€æœºè‡ªå¯åŠ¨<br>1.  systemctl enable â€“now salt-master<br>2.  systemctl enable â€“now salt-minion</p></li><li><p>firewall-cmd â€“zone&#x3D;public â€“add-port&#x3D;4505&#x2F;tcp â€“permanent</p></li><li><p>firewall-cmd â€“zone&#x3D;public â€“add-port&#x3D;4506&#x2F;tcp â€“permanent</p></li><li><p>systemctl restart firewalld.service</p><hr></li></ol><h5 id="å¸¸ç”¨å‘½ä»¤"><a href="#å¸¸ç”¨å‘½ä»¤" class="headerlink" title="å¸¸ç”¨å‘½ä»¤"></a>å¸¸ç”¨å‘½ä»¤</h5><p>sudo systemctl enable salt-master &amp;&amp; sudo systemctl start salt-master</p><p>sudo systemctl enable salt-minion &amp;&amp; sudo systemctl start salt-minion</p><p>sudo systemctl enable salt-syndic &amp;&amp; sudo systemctl start salt-syndic</p><p>sudo systemctl enable salt-api &amp;&amp; sudo systemctl start salt-api</p><h5 id="ä¿®æ”¹idæˆ–è€…æ ‡è¯†"><a href="#ä¿®æ”¹idæˆ–è€…æ ‡è¯†" class="headerlink" title="ä¿®æ”¹idæˆ–è€…æ ‡è¯†"></a>ä¿®æ”¹idæˆ–è€…æ ‡è¯†</h5><ol><li>hostnamectl æŸ¥çœ‹å½“å‰</li><li>hostnamectl set-hostname k8s-slave</li><li>minion ç«¯æ‰§è¡Œ<ol><li>rm -rf&#x2F;etc&#x2F;salt&#x2F;minion_id</li><li>rm -rf &#x2F;etc&#x2F;salt&#x2F;pki&#x2F;*</li><li>service salt-minion restart</li></ol></li><li>masterç«¯æ‰§<ol><li>rm -rf &#x2F;etc&#x2F;salt&#x2F;pki&#x2F;* </li><li>service salt-master restart</li></ol></li></ol>]]></content>
      
      
      <categories>
          
          <category> Devops </category>
          
      </categories>
      
      
        <tags>
            
            <tag> CICD </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>æ„å»ºå·¥å…·npmé›†æˆ</title>
      <link href="/posts/26166.html"/>
      <url>/posts/26166.html</url>
      
        <content type="html"><![CDATA[<h4 id="jenkins-é›†æˆnpm"><a href="#jenkins-é›†æˆnpm" class="headerlink" title="jenkins é›†æˆnpm"></a>jenkins é›†æˆnpm</h4><p><a href="https://nodejs.org/en/download/">å®˜ç½‘</a></p><h5 id="npmå®‰è£…"><a href="#npmå®‰è£…" class="headerlink" title="npmå®‰è£…"></a>npmå®‰è£…</h5><ol><li>cd &#x2F;data&#x2F;devops&#x2F;devops-tools-install-pkg&#x2F;</li><li>wget <a href="https://nodejs.org/dist/v16.16.0/node-v16.16.0-linux-x64.tar.xz">https://nodejs.org/dist/v16.16.0/node-v16.16.0-linux-x64.tar.xz</a></li><li>tar -xvf node-v16.16.0-linux-x64.tar.xz -C &#x2F;usr&#x2F;local&#x2F;</li><li>cd &#x2F;usr&#x2F;local&#x2F;node-v16.16.0-linux-x64&#x2F;</li><li>pwd è·å–å®‰è£…è·¯å¾„</li><li>vi &#x2F;etc&#x2F;profile<pre class="line-numbers language-none"><code class="language-none"> export &#96;NPM_HOME&#x3D;&#x2F;usr&#x2F;local&#x2F;node-v16.16.0-linux-x64export PATH&#x3D;$GROOVY_HOME&#x2F;bin:$PATH:M2_HOME&#x2F;bin:$ANT_HOME&#x2F;bin:$GRADLE_HOME&#x2F;bin:$NPM_HOME&#x2F;bin<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre></li><li>source &#x2F;etc&#x2F;profile</li><li>npm install -g npm</li><li>jenkinsâ€“&gt;å…¨å±€å·¥å…·é…ç½®â€”&gt;node   name: NPM    PATH usr&#x2F;local&#x2F;node-v16.16.0-linux-x64</li></ol><h5 id="è¿è¡Œè„šæœ¬"><a href="#è¿è¡Œè„šæœ¬" class="headerlink" title="è¿è¡Œè„šæœ¬"></a>è¿è¡Œè„šæœ¬</h5><pre class="line-numbers language-none"><code class="language-none">#!groovyString buildShell &#x3D; &quot;$&#123;env.buildShell&#125;&quot; &#x2F;&#x2F;jenkinsé¡¹ç›®ä¸­é…ç½®çš„å‚æ•°åç§°pipeline&#123;    agent any    stages&#123;        stage(&quot;build&quot;)&#123;            steps&#123;                script&#123;                    mvnHome &#x3D; tool &quot;M2&quot;                    sh &quot;$&#123;mvnHome&#125;&#x2F;bin&#x2F;mvn -v&quot;                    &#x2F;&#x2F; sh &quot;$&#123;mvnHome&#125;&#x2F;bin&#x2F;mvn $&#123;buildShell&#125;&quot; &#x2F;&#x2F;å­¦ä¹ ä½¿ç”¨å‚æ•°çš„æ–¹å¼è¿›è¡Œæ„å»º                &#125;            &#125;        &#125;        stage(&quot;ant&quot;)&#123;          steps&#123;                script&#123;                    try&#123;                        antHome &#x3D; tool &quot;ANT&quot;                        &#x2F;&#x2F;sh &quot;$&#123;antHome&#125;&#x2F;bin&#x2F;ant -v&quot;                        sh &quot;$&#123;antHome&#125;&#x2F;bin&#x2F;ant $&#123;buildShell&#125;&quot; &#x2F;&#x2F;å­¦ä¹ ä½¿ç”¨å‚æ•°çš„æ–¹å¼è¿›è¡Œæ„å»º                    &#125;catch(e)&#123;                        println(e)                    &#125;                &#125;            &#125;        &#125;        stage(&quot;gradlebuild&quot;)&#123;          steps&#123;                script&#123;                    gradleHome &#x3D; tool &quot;GRADLE&quot;                    println(&quot;$&#123;gradleHome&#125;&quot;)                    sh &quot;$&#123;gradleHome&#125;&#x2F;bin&#x2F;gradle -v&quot;                    &#x2F;&#x2F;sh &quot;$&#123;gradleHome&#125;&#x2F;bin&#x2F;gradle $&#123;buildShell&#125;&quot; &#x2F;&#x2F;å­¦ä¹ ä½¿ç”¨å‚æ•°çš„æ–¹å¼è¿›è¡Œæ„å»º                &#125;            &#125;        &#125;         stage(&quot;npmbuild&quot;)&#123;          steps&#123;                script&#123;                    npmHome &#x3D; tool &quot;NPM&quot;                    &#x2F;&#x2F;sh &quot;$&#123;npmHome&#125;&#x2F;bin&#x2F;npm -v&quot;                    sh &quot;$&#123;npmHome&#125;&#x2F;bin&#x2F;npm $&#123;buildShell&#125;&quot; &#x2F;&#x2F;å­¦ä¹ ä½¿ç”¨å‚æ•°çš„æ–¹å¼è¿›è¡Œæ„å»º                &#125;            &#125;        &#125;    &#125;&#125;&#x2F;&#x2F; è¯¥jenkins è„šæœ¬æ‰§è¡Œåˆ°antä¼šæŠ¥é”™ï¼Œæ‰€ä»¥åŠ å…¥try&#123;&#125;catch(e)&#123;&#125;è¯­å¥<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>]]></content>
      
      
      <categories>
          
          <category> Devops </category>
          
      </categories>
      
      
        <tags>
            
            <tag> CICD </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>æ„å»ºå·¥å…·grandleé›†æˆ</title>
      <link href="/posts/37880.html"/>
      <url>/posts/37880.html</url>
      
        <content type="html"><![CDATA[<h5 id="jenkins-é›†æˆgrandle"><a href="#jenkins-é›†æˆgrandle" class="headerlink" title="jenkins é›†æˆgrandle"></a>jenkins é›†æˆgrandle</h5><p><a href="https://gradle.org/">gradleå®˜ç½‘</a></p><h5 id="å®‰è£…grandle"><a href="#å®‰è£…grandle" class="headerlink" title="å®‰è£…grandle"></a>å®‰è£…grandle</h5><ol><li><p>cd &#x2F;data&#x2F;devops&#x2F;devops-tools-install-pkg&#x2F;</p></li><li><p>wget <a href="https://downloads.gradle-dn.com/distributions/gradle-7.5-bin.zip">https://downloads.gradle-dn.com/distributions/gradle-7.5-bin.zip</a></p></li><li><p>cd &#x2F;usr&#x2F;local&#x2F;gradle-7.5&#x2F;</p></li><li><p>pwd</p></li></ol><blockquote><p>&#x2F;usr&#x2F;local&#x2F;gradle-7.5</p></blockquote><pre class="line-numbers language-none"><code class="language-none">5.vi &#x2F;etc&#x2F;profile&#96;&#96;&#96;&#96;export GRADLE_HOME&#x3D;&#x2F;usr&#x2F;local&#x2F;gradle-7.5export PATH&#x3D;$GROOVY_HOME&#x2F;bin:$PATH:M2_HOME&#x2F;bin:$ANT_HOME&#x2F;bin:GRADLE_HOME&#x2F;bin<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre><ol start="6"><li>source &#x2F;etc&#x2F;profile</li><li>jenkinsâ€”-&gt;ç³»ç»Ÿè®¾ç½®â€”&gt;ç³»ç»Ÿå·¥å…·è®¾ç½®â€”&gt;gradle  name:GRADLE PATH &#x2F;usr&#x2F;local&#x2F;gradle-7.5</li></ol><pre><code>#!groovyString buildShell = &quot;$&#123;env.buildShell&#125;&quot; //jenkinsé¡¹ç›®ä¸­é…ç½®çš„å‚æ•°åç§°pipeline&#123;    agent any    stages&#123;        stage(&quot;build&quot;)&#123;            steps&#123;                script&#123;                    mvnHome = tool &quot;M2&quot;                    sh &quot;$&#123;mvnHome&#125;/bin/mvn -v&quot;                    // sh &quot;$&#123;mvnHome&#125;/bin/mvn $&#123;buildShell&#125;&quot; //å­¦ä¹ ä½¿ç”¨å‚æ•°çš„æ–¹å¼è¿›è¡Œæ„å»º                &#125;            &#125;        &#125;        stage(&quot;ant&quot;)&#123;          steps&#123;                script&#123;                    try&#123;                        antHome = tool &quot;ANT&quot;                        //sh &quot;$&#123;antHome&#125;/bin/ant -v&quot;                        sh &quot;$&#123;antHome&#125;/bin/ant $&#123;buildShell&#125;&quot; //å­¦ä¹ ä½¿ç”¨å‚æ•°çš„æ–¹å¼è¿›è¡Œæ„å»º                    &#125;catch(e)&#123;                        println(e)                    &#125;                &#125;            &#125;        &#125;        stage(&quot;gradle&quot;)&#123;          steps&#123;                script&#123;                    gradleHome = tool &quot;GRADLE&quot;                    println(&quot;$&#123;gradleHome&#125;&quot;)                    sh &quot;$&#123;gradleHome&#125;/bin/gradle -v&quot;                    //sh &quot;$&#123;gradleHome&#125;/bin/gradle $&#123;buildShell&#125;&quot; //å­¦ä¹ ä½¿ç”¨å‚æ•°çš„æ–¹å¼è¿›è¡Œæ„å»º                &#125;            &#125;        &#125;     &#125;&#125;// è¯¥jenkins è„šæœ¬æ‰§è¡Œåˆ°antä¼šæŠ¥é”™ï¼Œæ‰€ä»¥åŠ å…¥try&#123;&#125;catch(e)&#123;&#125;è¯­å¥</code></pre>]]></content>
      
      
      <categories>
          
          <category> Devops </category>
          
      </categories>
      
      
        <tags>
            
            <tag> CICD </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>æ„å»ºå·¥å…·anté›†æˆ</title>
      <link href="/posts/55167.html"/>
      <url>/posts/55167.html</url>
      
        <content type="html"><![CDATA[<h4 id="jenkins-ä¸­antæ„å»ºå·¥å…·"><a href="#jenkins-ä¸­antæ„å»ºå·¥å…·" class="headerlink" title="jenkins ä¸­antæ„å»ºå·¥å…·"></a>jenkins ä¸­antæ„å»ºå·¥å…·</h4><p><a href="https://ant.apache.org/bindownload.cgi">antå®˜ç½‘</a></p><h5 id="antå®‰è£…"><a href="#antå®‰è£…" class="headerlink" title="antå®‰è£…"></a>antå®‰è£…</h5><ol><li><p>cd &#x2F;data&#x2F;devops&#x2F;devops-tools-install-pkg&#x2F;</p></li><li><p>wget <a href="https://dlcdn.apache.org//ant/binaries/apache-ant-1.10.12-bin.tar.gz">https://dlcdn.apache.org//ant/binaries/apache-ant-1.10.12-bin.tar.gz</a></p></li><li><p>tar -xvf apache-ant-1.10.12-bin.tar.gz -C &#x2F;usr&#x2F;local&#x2F;</p></li><li><p>cd &#x2F;usr&#x2F;local&#x2F;apache-ant-1.10.12&#x2F;</p></li><li><p>pwd</p><pre class="line-numbers language-none"><code class="language-none">&#x2F;usr&#x2F;local&#x2F;apache-ant-1.10.12&#x2F;<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre></li><li><p>vi &#x2F;etc&#x2F;profile</p><pre class="line-numbers language-none"><code class="language-none">export ANT_HOME&#x3D;&#x2F;usr&#x2F;local&#x2F;apache-ant-1.10.12export PATH&#x3D;$GROOVY_HOME&#x2F;bin:$PATH:M2_HOME&#x2F;bin:$ANT_HOME&#x2F;bin<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre></li><li><p>source &#x2F;etc&#x2F;profile</p></li></ol><h5 id="è„šæœ¬"><a href="#è„šæœ¬" class="headerlink" title="è„šæœ¬"></a>è„šæœ¬</h5><pre class="line-numbers language-none"><code class="language-none">#!groovyString buildShell &#x3D; &quot;$&#123;env.buildShell&#125;&quot; &#x2F;&#x2F;jenkinsé¡¹ç›®ä¸­é…ç½®çš„å‚æ•°åç§°pipeline&#123;    agent any    stages&#123;        stage(&quot;build&quot;)&#123;            steps&#123;                script&#123;                    mvnHome &#x3D; tool &quot;M2&quot;                    sh &quot;$&#123;mvnHome&#125;&#x2F;bin&#x2F;mvn -v&quot;                    &#x2F;&#x2F; sh &quot;$&#123;mvnHome&#125;&#x2F;bin&#x2F;mvn $&#123;buildShell&#125;&quot; &#x2F;&#x2F;å­¦ä¹ ä½¿ç”¨å‚æ•°çš„æ–¹å¼è¿›è¡Œæ„å»º                &#125;            &#125;        &#125;        stage(&quot;ant&quot;)&#123;          steps&#123;                script&#123;                    antHome &#x3D; tool &quot;ANT&quot;                    &#x2F;&#x2F;sh &quot;$&#123;antHome&#125;&#x2F;bin&#x2F;ant -v&quot;                    sh &quot;$&#123;mvnHome&#125;&#x2F;bin&#x2F;ant $&#123;buildShell&#125;&quot; &#x2F;&#x2F;å­¦ä¹ ä½¿ç”¨å‚æ•°çš„æ–¹å¼è¿›è¡Œæ„å»º                &#125;            &#125;        &#125;    &#125;&#125;&#x2F;&#x2F; è¯¥jenkins è„šæœ¬ä½¿ç”¨ä¼šæŠ¥é”™æ˜¯å› ä¸ºæ²¡æœ‰é¡¹ç›®ï¼Œæ‰§è¡Œå‚æ•°ä¸­çš„clean ä¼šæŠ¥é”™<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>]]></content>
      
      
      <categories>
          
          <category> Devops </category>
          
      </categories>
      
      
        <tags>
            
            <tag> CICD </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>æ„å»ºå·¥å…·mavené›†æˆ</title>
      <link href="/posts/24379.html"/>
      <url>/posts/24379.html</url>
      
        <content type="html"><![CDATA[<h4 id="jenkinsä¸­mavenå®‰è£…"><a href="#jenkinsä¸­mavenå®‰è£…" class="headerlink" title="jenkinsä¸­mavenå®‰è£…"></a>jenkinsä¸­mavenå®‰è£…</h4><h5 id="é‡‡ç”¨æ‰‹åŠ¨å®‰è£…çš„æ–¹å¼"><a href="#é‡‡ç”¨æ‰‹åŠ¨å®‰è£…çš„æ–¹å¼" class="headerlink" title="é‡‡ç”¨æ‰‹åŠ¨å®‰è£…çš„æ–¹å¼"></a>é‡‡ç”¨æ‰‹åŠ¨å®‰è£…çš„æ–¹å¼</h5><ol><li><p>cd cd &#x2F;data&#x2F;devops&#x2F;devops-tools-install-pkg&#x2F;</p></li><li><p>wget <a href="https://dlcdn.apache.org/maven/maven-3/3.8.6/binaries/apache-maven-3.8.6-bin.tar.gz">https://dlcdn.apache.org/maven/maven-3/3.8.6/binaries/apache-maven-3.8.6-bin.tar.gz</a></p></li><li><p>tar -xvf apache-maven-3.8.6-bin.tar.gz -C &#x2F;usr&#x2F;local&#x2F;</p></li><li><p>cd &#x2F;usr&#x2F;local&#x2F;apache-maven-3.8.6&#x2F;</p></li><li><p>pwd</p><ol><li>&#x2F;usr&#x2F;local&#x2F;apache-maven-3.8.6&#x2F;</li></ol></li><li><p>vi &#x2F;etc&#x2F;profile</p></li><li><p>æ·»åŠ ç¯å¢ƒå˜é‡å¦‚ä¸‹å†…å®¹ï¼Œæ³¨æ„export åé¢æ˜¯è¿½åŠ ï¼Œä¸å½±å“ä¹‹å‰çš„ç¯å¢ƒå˜é‡</p> <pre class="line-numbers language-none"><code class="language-none">export M2_HOME&#x3D;&#x2F;usr&#x2F;local&#x2F;apache-maven-3.8.6export PATH&#x3D;$GROOVY_HOME&#x2F;bin:$PATH:M2_HOME&#x2F;bin<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre></li><li><p>jenkins â€”&gt;ç³»ç»Ÿè®¾ç½®â€”&gt;å…¨å±€å·¥å…·é…ç½®â€”&gt;maven</p><ol><li>name: M2</li><li>MAVEN_HOME: &#x2F;usr&#x2F;local&#x2F;apache-maven-3.8.6</li></ol></li><li><p>ç‚¹å‡»ä¿å­˜</p></li><li><p>æ–°å»ºæµæ°´çº¿,è„šæœ¬å¦‚ä¸‹</p><pre class="line-numbers language-none"><code class="language-none">#!groovypipeline&#123;    agent any    stages&#123;        stage(&quot;build&quot;)&#123;            steps&#123;                script&#123;                    mvnHome &#x3D; tool &quot;M2&quot;                    sh &quot;$&#123;mvnHome&#125;&#x2F;bin&#x2F;mvn -v&quot;                &#125;            &#125;        &#125;    &#125;&#125;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></li><li><p>mavenå¸¸ç”¨å‘½ä»¤<br>1. clean æ¸…ç†æ„å»ºç›®å½•<br>2. clean package æ‰“åŒ…<br>3. clean install æ‰“åŒ…éƒ¨ç½²<br>4. clean test å•å…ƒæµ‹è¯•</p></li></ol>]]></content>
      
      
      <categories>
          
          <category> Devops </category>
          
      </categories>
      
      
        <tags>
            
            <tag> CICD </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>jenkinsä½¿ç”¨å…±äº«åº“</title>
      <link href="/posts/26356.html"/>
      <url>/posts/26356.html</url>
      
        <content type="html"><![CDATA[<h1 id="å…±äº«åº“å®šä¹‰"><a href="#å…±äº«åº“å®šä¹‰" class="headerlink" title="å…±äº«åº“å®šä¹‰"></a>å…±äº«åº“å®šä¹‰</h1><p><strong>å­˜åœ¨è¿™æ ·çš„åœºæ™¯</strong>ï¼š<br> åœ¨ jenkins ä¸­å­˜åœ¨å¤šä¸ª pipeline jobs,<br> pipeline jobs ä¹‹é—´æœ‰ç›¸åŒé€»è¾‘åŠŸèƒ½ï¼ˆæœ‰é‡å¤ç›¸åŒä»£ç ï¼‰ï¼Œ<br> ä¸ºäº† dry (donâ€™t repeat yourself) å»é™¤é‡å¤ä»£ç ï¼Œjenkins å¯ä»¥æä¾›äº†ä¸€ç‰¹æ€§ï¼š å¯ä»¥æŠŠé‡å¤çš„ä»£ç åšæˆé€šç”¨çš„å…±äº«åº“ï¼ˆshared libraries)</p><p>å¥½å¤„ï¼š ä¸€æ–¹é¢ç²¾ç®€ä»£ç ï¼ˆå»é‡ï¼‰ï¼Œå¦ä¸€æ–¹é¢å‡å°‘åç»­æ–°æ·» pipeline job æ—¶çš„é‡å¤é€ è½®å­ã€‚</p><h1 id="å…±äº«åº“çš„ä½¿ç”¨"><a href="#å…±äº«åº“çš„ä½¿ç”¨" class="headerlink" title="å…±äº«åº“çš„ä½¿ç”¨"></a>å…±äº«åº“çš„ä½¿ç”¨</h1><h2 id="1-ä½¿ç”¨æµç¨‹"><a href="#1-ä½¿ç”¨æµç¨‹" class="headerlink" title="1. ä½¿ç”¨æµç¨‹"></a>1. ä½¿ç”¨æµç¨‹</h2><p>åˆ†ä»¥ä¸‹å‡ æ­¥ï¼š</p><ul><li><ol><li>åˆ›å»ºå…±äº«åº“</li></ol></li><li><ol><li>jenkins é…ç½® Global Shared Libraries</li></ol></li><li><ol><li>jenkinsfile å¼•ç”¨å…±äº«åº“</li></ol></li></ul><h2 id="2-åˆ›å»ºå…±äº«åº“"><a href="#2-åˆ›å»ºå…±äº«åº“" class="headerlink" title="2. åˆ›å»ºå…±äº«åº“"></a>2. åˆ›å»ºå…±äº«åº“</h2><p>å®šä¹‰å…±äº«åº“(Defining Shared Libraries)</p><ol><li>åœ¨gitlab æ–°å»ºå…±äº«åº“ä»“åº“jenkinslib</li></ol><p><img src="/1666348541590.png" alt="1666348541590"></p><ol start="2"><li>åˆ›å»ºç›®å½•ç»“æ„</li></ol><pre class="line-numbers language-none"><code class="language-none">(root)+- src                     # Groovy source files|   +- org|       +- foo|           +- Bar.groovy  # for org.foo.Bar class+- vars|   +- foo.groovy          # for global &#39;foo&#39; variable|   +- foo.txt             # help for &#39;foo&#39; variable+- resources               # resource files (external libraries only)|   +- org|       +- foo|           +- bar.json    # static helper data for org.foo.Bar<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><ol start="3"><li>åˆ›å»ºsrc&#x2F;org&#x2F;devops&#x2F;xxx.groovy æ–‡ä»¶</li></ol><p><img src="/1666348578043.png" alt="1666348578043"></p><ol start="4"><li><p>åœ¨jenkins å®¢æˆ·ç«¯å¼•ç”¨è¯¥å…±äº«åº“æ–‡ä»¶</p><ul><li>jenkins é…ç½® Global Shared Libraries </li><li>Manage Jenkins Â» Configure System Â» Global Pipeline Libraries</li></ul></li><li><p>åœ¨jenkinsfiileä¸­é€šè¿‡@Library(â€˜jenkinsâ€™) _ å¼•å…¥</p></li></ol><pre class="line-numbers language-none"><code class="language-none">@Library(&#39;my-shared-library&#39;) _&#x2F;* Using a version specifier, such as branch, tag, etc *&#x2F;@Library(&#39;my-shared-library@1.0&#39;) _&#x2F;* Accessing multiple libraries with one statement *&#x2F;@Library([&#39;my-shared-library&#39;, &#39;otherlib@abc1234&#39;]) _<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre><ol start="6"><li>jenkinsfileä¸­ä½¿ç”¨</li></ol><pre class="line-numbers language-none"><code class="language-none">#!groovy@Library(&#39;jenkinslibrary@master&#39;) _&#x2F;&#x2F;func from shareibrarydef build &#x3D; new org.devops.build()def deploy &#x3D; new org.devops.deploy()def tools &#x3D; new org.devops.tools()def gitlab &#x3D; new org.devops.gitlab()def toemail &#x3D; new org.devops.toemail()def sonar &#x3D; new org.devops.sonarqube()def sonarapi &#x3D; new org.devops.sonarapi()def nexus &#x3D; new org.devops.nexus()def artifactory &#x3D; new org.devops.artifactory() def runOpts&#x2F;&#x2F;envString buildType &#x3D; &quot;$&#123;env.buildType&#125;&quot;String buildShell &#x3D; &quot;$&#123;env.buildShell&#125;&quot;String deployHosts &#x3D; &quot;$&#123;env.deployHosts&#125;&quot;String srcUrl &#x3D; &quot;$&#123;env.srcUrl&#125;&quot;String branchName &#x3D; &quot;$&#123;env.branchName&#125;&quot;String artifactUrl &#x3D; &quot;$&#123;env.artifactUrl&#125;&quot;if (&quot;$&#123;runOpts&#125;&quot; &#x3D;&#x3D; &quot;GitlabPush&quot;)&#123;    branchName &#x3D; branch - &quot;refs&#x2F;heads&#x2F;&quot;        currentBuild.description &#x3D; &quot;Trigger by $&#123;userName&#125; $&#123;branch&#125;&quot;    gitlab.ChangeCommitStatus(projectId,commitSha,&quot;running&quot;)    env.runOpts &#x3D; &quot;GitlabPush&quot;    &#125; else &#123;   userEmail &#x3D; &quot;2560350642@qq.com&quot;&#125;&#x2F;&#x2F;pipelinepipeline&#123;    agent &#123; node &#123; label &quot;build&quot;&#125;&#125;            stages&#123;        stage(&quot;CheckOut&quot;)&#123;            steps&#123;                script&#123;                                                           println(&quot;$&#123;branchName&#125;&quot;)                                    tools.PrintMes(&quot;è·å–ä»£ç &quot;,&quot;green&quot;)                    checkout([$class: &#39;GitSCM&#39;, branches: [[name: &quot;$&#123;branchName&#125;&quot;]],                                       doGenerateSubmoduleConfigurations: false,                                       extensions: [],                                       submoduleCfg: [],                                       userRemoteConfigs: [[credentialsId: &#39;gitlab-admin-user&#39;, url: &quot;$&#123;srcUrl&#125;&quot;]]])                &#125;            &#125;        &#125;        stage(&quot;Build&quot;)&#123;            steps&#123;                script&#123;                                    tools.PrintMes(&quot;æ‰§è¡Œæ‰“åŒ…&quot;,&quot;green&quot;)                    &#x2F;&#x2F;build.Build(buildType,buildShell)                    artifactory.main(buildType,buildShell)                    artifactory.PushArtifact()                                        &#x2F;&#x2F;ä¸Šä¼ åˆ¶å“                    &#x2F;&#x2F;nexus.main(&quot;nexus&quot;)                                        &#x2F;&#x2F;å‘å¸ƒåˆ¶å“                    &#x2F;&#x2F;sh &quot; wget $&#123;artifactUrl&#125; &amp;&amp; ls &quot;                                                                                &#x2F;&#x2F;deploy.SaltDeploy(&quot;$&#123;deployHosts&#125;&quot;,&quot;test.ping&quot;)                    &#x2F;&#x2F;deploy.AnsibleDeploy(&quot;$&#123;deployHosts&#125;&quot;,&quot;-m ping &quot;)                &#125;            &#125;       &#125;                      stage(&quot;QA&quot;)&#123;            steps &#123;                script&#123;                    tools.PrintMes(&quot;æœç´¢é¡¹ç›®&quot;,&quot;green&quot;)                    result &#x3D; sonarapi.SerarchProject(&quot;$&#123;JOB_NAME&#125;&quot;)                    println(result)                                        if (result &#x3D;&#x3D; &quot;false&quot;)&#123;                        println(&quot;$&#123;JOB_NAME&#125;---é¡¹ç›®ä¸å­˜åœ¨,å‡†å¤‡åˆ›å»ºé¡¹ç›®---&gt; $&#123;JOB_NAME&#125;ï¼&quot;)                        sonarapi.CreateProject(&quot;$&#123;JOB_NAME&#125;&quot;)                    &#125; else &#123;                        println(&quot;$&#123;JOB_NAME&#125;---é¡¹ç›®å·²å­˜åœ¨ï¼&quot;)                    &#125;                                        tools.PrintMes(&quot;é…ç½®é¡¹ç›®è´¨é‡è§„åˆ™&quot;,&quot;green&quot;)                    qpName&#x3D;&quot;$&#123;JOB_NAME&#125;&quot;.split(&quot;-&quot;)[0]   &#x2F;&#x2F;Sonar%20way                    sonarapi.ConfigQualityProfiles(&quot;$&#123;JOB_NAME&#125;&quot;,&quot;java&quot;,qpName)                                    tools.PrintMes(&quot;é…ç½®è´¨é‡é˜ˆ&quot;,&quot;green&quot;)                    sonarapi.ConfigQualityGates(&quot;$&#123;JOB_NAME&#125;&quot;,qpName)                                    tools.PrintMes(&quot;ä»£ç æ‰«æ&quot;,&quot;green&quot;)                    sonar.SonarScan(&quot;test&quot;,&quot;$&#123;JOB_NAME&#125;&quot;,&quot;$&#123;JOB_NAME&#125;&quot;,&quot;src&quot;)                                        sleep 30                    tools.PrintMes(&quot;è·å–æ‰«æç»“æœ&quot;,&quot;green&quot;)                    result &#x3D; sonarapi.GetProjectStatus(&quot;$&#123;JOB_NAME&#125;&quot;)                                                            println(result)                    if (result.toString() &#x3D;&#x3D; &quot;ERROR&quot;)&#123;                        toemail.Email(&quot;ä»£ç è´¨é‡é˜ˆé”™è¯¯ï¼è¯·åŠæ—¶ä¿®å¤ï¼&quot;,userEmail)                        error &quot; ä»£ç è´¨é‡é˜ˆé”™è¯¯ï¼è¯·åŠæ—¶ä¿®å¤ï¼&quot;                                                                    &#125; else &#123;                        println(result)                    &#125;                                                &#125;           &#125;       &#125;    &#125;    post &#123;        always&#123;            script&#123;                println(&quot;always&quot;)            &#125;        &#125;                success&#123;            script&#123;                println(&quot;success&quot;)                if (&quot;$&#123;runOpts&#125;&quot; &#x3D;&#x3D; &quot;GitlabPush&quot;)&#123;                    gitlab.ChangeCommitStatus(projectId,commitSha,&quot;success&quot;)                &#125;                toemail.Email(&quot;æµæ°´çº¿æˆåŠŸ&quot;,userEmail)                        &#125;                &#125;        failure&#123;            script&#123;                println(&quot;failure&quot;)                if (&quot;$&#123;runOpts&#125;&quot; &#x3D;&#x3D; &quot;GitlabPush&quot;)&#123;                    gitlab.ChangeCommitStatus(projectId,commitSha,&quot;failed&quot;)                &#125;                toemail.Email(&quot;æµæ°´çº¿å¤±è´¥äº†ï¼&quot;,userEmail)            &#125;        &#125;                aborted&#123;            script&#123;                println(&quot;aborted&quot;)                if (&quot;$&#123;runOpts&#125;&quot; &#x3D;&#x3D; &quot;GitlabPush&quot;)&#123;                    gitlab.ChangeCommitStatus(projectId,commitSha,&quot;canceled&quot;)                &#125;               toemail.Email(&quot;æµæ°´çº¿è¢«å–æ¶ˆäº†ï¼&quot;,userEmail)            &#125;                &#125;        &#125;        &#125;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>]]></content>
      
      
      <categories>
          
          <category> Devops </category>
          
      </categories>
      
      
        <tags>
            
            <tag> jenkins </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>å£°æ˜å¼æµæ°´çº¿çš„è¯­æ³•</title>
      <link href="/posts/47046.html"/>
      <url>/posts/47046.html</url>
      
        <content type="html"><![CDATA[<h1 id="æµæ°´çº¿è¯­æ³•"><a href="#æµæ°´çº¿è¯­æ³•" class="headerlink" title="æµæ°´çº¿è¯­æ³•"></a>æµæ°´çº¿è¯­æ³•</h1><p><img src="/1666344692125.png" alt="1666344692125"></p><p><img src="/1666344751058.png" alt="1666344751058"></p><p><img src="/1666344984502.png" alt="1666344984502"></p><p><img src="/1666345005827.png" alt="1666345005827"></p><p><img src="/1666345163222.png" alt="1666345163222"></p><p><img src="/1666345321187.png" alt="1666345321187"></p><p><img src="/1666345554407.png" alt="1666345554407"></p><p><img src="/1666345584767.png" alt="1666345584767"></p><p><img src="/1666345865985.png" alt="1666345865985"></p><p><img src="/1666346068839.png" alt="1666346068839"></p>]]></content>
      
      
      <categories>
          
          <category> Devops </category>
          
      </categories>
      
      
        <tags>
            
            <tag> æµæ°´çº¿ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>å‰ç«¯é¡¹ç›®å‘å¸ƒæµæ°´çº¿</title>
      <link href="/posts/30682.html"/>
      <url>/posts/30682.html</url>
      
        <content type="html"><![CDATA[<h2 id="å‰ç«¯é¡¹ç›®å‘å¸ƒæµæ°´çº¿"><a href="#å‰ç«¯é¡¹ç›®å‘å¸ƒæµæ°´çº¿" class="headerlink" title="å‰ç«¯é¡¹ç›®å‘å¸ƒæµæ°´çº¿"></a>å‰ç«¯é¡¹ç›®å‘å¸ƒæµæ°´çº¿</h2><ul><li><p>å®‰è£…nodejs</p></li><li><p>å®‰è£…vueï¼Œ ç”Ÿæˆvue demo(æ›¿æ¢ä¸ºè‡ªå·±çš„é¡¹ç›®)</p><ul><li>npm installl vue</li><li>npm install vue-cli</li><li>vue init webpack my-project</li><li>npm install &amp;&amp; npm run build</li><li>cd dist&#x2F; &amp;&amp; tar zcf demo-npm-service.tar.gz</li><li>cp demo-npm-service.tar.gz &#x2F;usr&#x2F;share&#x2F;nginx&#x2F;html &amp;&amp; tar zxf</li></ul></li><li><p>å®¹å™¨åŒ–ï¼Œç¼–å†™dockerfile</p><pre class="line-numbers language-none"><code class="language-none">FROM nginx:1.17.7COPY dist&#x2F; &#x2F;usr&#x2F;share&#x2F;nginx&#x2F;html<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre><p>â€¢ docker build -t registry . cn-beijing . aliyuncs . com&#x2F;devopstest&#x2F;demo-npm-serviceï¼šlatest .</p><p>â€¢ docker push registry . cn-beijing . aliyuncs . com&#x2F;devopstest&#x2F;demo-npm-serviceï¼šlatest</p><p>â€¢ docker run -p 8030:80 registry . cn-beijing . aliyuncs . com&#x2F;devopstest&#x2F;demo-npm-serviceï¼šlatest</p></li><li><p>åˆ›å»ºéƒ¨ç½²æ¨¡æ¿</p></li><li><p>jenkins slaveå¢åŠ kubectlå‘½ä»¤</p></li><li><p>ä½¿ç”¨kubectléƒ¨ç½²</p></li><li><p>sonar å‰ç«¯é¡¹ç›®ä»£ç æ‰«æ</p></li><li><p>å°†å‰ç«¯é¡¹ç›®ä¸Šä¼ gitlabï¼Œ å¹¶ç¼–å†™jenkinsfile</p><pre class="line-numbers language-none"><code class="language-none">â€¢docker build -t registry . cn-beijing . aliyuncs . com&#x2F;devopstest&#x2F;demo-npm-serviceï¼šlatest .â€¢docker push registry . cn-beijing . aliyuncs . com&#x2F;devopstest&#x2F;demo-npm-serviceï¼šlatestâ€¢docker run -p 8030:80 registry . cn-beijing . aliyuncs . com&#x2F;devopstest&#x2F;demo-npm-serviceï¼šlatest#!groovy@Library(&#39;jenkinslibrary@master&#39;) _&#x2F;&#x2F;func from shareibrarydef build &#x3D; new org.devops.build()def deploy &#x3D; new org.devops.deploy()def tools &#x3D; new org.devops.tools()def gitlab &#x3D; new org.devops.gitlab()def toemail &#x3D; new org.devops.toemail()def sonar &#x3D; new org.devops.sonarqube()def sonarapi &#x3D; new org.devops.sonarapi()def nexus &#x3D; new org.devops.nexus()def artifactory &#x3D; new org.devops.artifactory() def k8s &#x3D; new org.devops.kubernetes()def runOpts&#x2F;&#x2F;envString buildType &#x3D; &quot;$&#123;env.buildType&#125;&quot;String buildShell &#x3D; &quot;$&#123;env.buildShell&#125;&quot;String deployHosts &#x3D; &quot;$&#123;env.deployHosts&#125;&quot;String srcUrl &#x3D; &quot;$&#123;env.srcUrl&#125;&quot;String branchName &#x3D; &quot;$&#123;env.branchName&#125;&quot;String artifactUrl &#x3D; &quot;$&#123;env.artifactUrl&#125;&quot;if (&quot;$&#123;runOpts&#125;&quot; &#x3D;&#x3D; &quot;GitlabPush&quot;)&#123;    branchName &#x3D; branch - &quot;refs&#x2F;heads&#x2F;&quot;        currentBuild.description &#x3D; &quot;Trigger by $&#123;userName&#125; $&#123;branch&#125;&quot;    gitlab.ChangeCommitStatus(projectId,commitSha,&quot;running&quot;)    env.runOpts &#x3D; &quot;GitlabPush&quot;    &#125; else &#123;   userEmail &#x3D; &quot;2560350642@qq.com&quot;&#125;&#x2F;&#x2F;pipelinepipeline&#123;    agent &#123; node &#123; label &quot;build&quot;&#125;&#125;            stages&#123;       stage(&quot;GetCode&quot;)&#123;            steps&#123;                script&#123;                    println(&quot;$&#123;branchName&#125;&quot;)                                    tools.PrintMes(&quot;è·å–ä»£ç &quot;,&quot;green&quot;)                    checkout([$class: &#39;GitSCM&#39;, branches: [[name: &quot;$&#123;branchName&#125;&quot;]],                                       doGenerateSubmoduleConfigurations: false,                                       extensions: [],                                       submoduleCfg: [],                                       userRemoteConfigs: [[credentialsId: &#39;gitlab-admin-user&#39;, url: &quot;$&#123;srcUrl&#125;&quot;]]])                &#125;            &#125;        &#125;        stage(&quot;Build&amp;Test&quot;)&#123;            steps&#123;                script&#123;                    tools.PrintMes(&quot;æ‰§è¡Œæ‰“åŒ…&quot;,&quot;green&quot;)                    build.Build(buildType,buildShell)                                    &#125;            &#125;        &#125;                      &#x2F;&#x2F;å¹¶è¡Œ        stage(&#39;parallel01&#39;) &#123;            parallel &#123;                stage(&quot;QA&quot;)&#123;                    steps &#123;                        script&#123;                            tools.PrintMes(&quot;æœç´¢é¡¹ç›®&quot;,&quot;green&quot;)                            result &#x3D; sonarapi.SerarchProject(&quot;$&#123;JOB_NAME&#125;&quot;)                            println(result)                                                        if (result &#x3D;&#x3D; &quot;false&quot;)&#123;                                println(&quot;$&#123;JOB_NAME&#125;---é¡¹ç›®ä¸å­˜åœ¨,å‡†å¤‡åˆ›å»ºé¡¹ç›®---&gt; $&#123;JOB_NAME&#125;ï¼&quot;)                                sonarapi.CreateProject(&quot;$&#123;JOB_NAME&#125;&quot;)                            &#125; else &#123;                                println(&quot;$&#123;JOB_NAME&#125;---é¡¹ç›®å·²å­˜åœ¨ï¼&quot;)                            &#125;                                                        tools.PrintMes(&quot;é…ç½®é¡¹ç›®è´¨é‡è§„åˆ™&quot;,&quot;green&quot;)                            qpName&#x3D;&quot;$&#123;JOB_NAME&#125;&quot;.split(&quot;-&quot;)[0]   &#x2F;&#x2F;Sonar%20way                            sonarapi.ConfigQualityProfiles(&quot;$&#123;JOB_NAME&#125;&quot;,&quot;java&quot;,qpName)                                                    tools.PrintMes(&quot;é…ç½®è´¨é‡é˜ˆ&quot;,&quot;green&quot;)                            sonarapi.ConfigQualityGates(&quot;$&#123;JOB_NAME&#125;&quot;,qpName)                                                    tools.PrintMes(&quot;ä»£ç æ‰«æ&quot;,&quot;green&quot;)                            sonar.SonarScan(&quot;test&quot;,&quot;$&#123;JOB_NAME&#125;&quot;,&quot;$&#123;JOB_NAME&#125;&quot;,&quot;src&quot;,&quot;$&#123;branchName&#125;&quot;)                                                                sleep 30                            tools.PrintMes(&quot;è·å–æ‰«æç»“æœ&quot;,&quot;green&quot;)                            result &#x3D; sonarapi.GetProjectStatus(&quot;$&#123;JOB_NAME&#125;&quot;)                                                                                    println(result)                            if (result.toString() &#x3D;&#x3D; &quot;ERROR&quot;)&#123;                                toemail.Email(&quot;ä»£ç è´¨é‡é˜ˆé”™è¯¯ï¼è¯·åŠæ—¶ä¿®å¤ï¼&quot;,userEmail)                                error &quot; ä»£ç è´¨é‡é˜ˆé”™è¯¯ï¼è¯·åŠæ—¶ä¿®å¤ï¼&quot;                                                                                            &#125; else &#123;                                println(result)                            &#125;                        &#125;                   &#125;                &#125;                                                       &#x2F;&#x2F;æ„å»ºé•œåƒ                stage(&quot;BuildImages&quot;)&#123;                    steps&#123;                        script&#123;                            tools.PrintMes(&quot;æ„å»ºä¸Šä¼ é•œåƒ&quot;,&quot;green&quot;)                            env.serviceName &#x3D; &quot;$&#123;JOB_NAME&#125;&quot;.split(&quot;_&quot;)[0]                                                       withCredentials([usernamePassword(credentialsId: &#39;aliyun-registry-admin&#39;, passwordVariable: &#39;password&#39;, usernameVariable: &#39;username&#39;)]) &#123;                                                              env.dockerImage &#x3D; &quot;registry.cn-beijing.aliyuncs.com&#x2F;devopstest&#x2F;$&#123;serviceName&#125;:$&#123;branchName&#125;&quot;                               sh &quot;&quot;&quot;                                   docker login -u $&#123;username&#125; -p $&#123;password&#125;  registry.cn-beijing.aliyuncs.com                                   docker build -t registry.cn-beijing.aliyuncs.com&#x2F;devopstest&#x2F;$&#123;serviceName&#125;:$&#123;branchName&#125; .                                   sleep 1                                   docker push registry.cn-beijing.aliyuncs.com&#x2F;devopstest&#x2F;$&#123;serviceName&#125;:$&#123;branchName&#125;                                   sleep 1                                   #docker rmi registry.cn-beijing.aliyuncs.com&#x2F;devopstest&#x2F;$&#123;serviceName&#125;:$&#123;branchName&#125;                                &quot;&quot;&quot;                            &#125;                        &#125;                    &#125;                &#125;            &#125;        &#125;               &#x2F;&#x2F;å‘å¸ƒ        stage(&quot;Deploy&quot;)&#123;            steps&#123;                script&#123;                    tools.PrintMes(&quot;å‘å¸ƒåº”ç”¨&quot;,&quot;green&quot;)                                                        &#x2F;&#x2F;è·å–æ—§é•œåƒ                    yamlData &#x3D; readYaml file: &quot;k8stemplate.yaml&quot;                                        println(yamlData[0])                    println(yamlData[0][&quot;spec&quot;][&quot;template&quot;][&quot;spec&quot;][&quot;containers&quot;][0][&quot;image&quot;])                                        oldImage &#x3D; yamlData[0][&quot;spec&quot;][&quot;template&quot;][&quot;spec&quot;][&quot;containers&quot;][0][&quot;image&quot;]                                        &#x2F;&#x2F;æ›¿æ¢é•œåƒ                    sourceData &#x3D; readFile file: &#39;k8stemplate.yaml&#39;                    println(sourceData)                    println(sourceData.getClass())                    sourceData &#x3D; sourceData.replace(oldImage,dockerImage)                    println(sourceData)                                        writeFile file: &#39;k8stemplate.yaml&#39;, text: &quot;&quot;&quot;$&#123;sourceData&#125;&quot;&quot;&quot;                                                        sh &quot;&quot;&quot;                        #cat k8stemplate.yaml                        kubectl apply -f k8stemplate.yaml                    &quot;&quot;&quot;                                        &#125;            &#125;        &#125;               &#x2F;&#x2F;æ¥å£è‡ªåŠ¨åŒ–æµ‹è¯•        stage(&quot;InterfaceTest&quot;)&#123;            steps&#123;                script&#123;                    tools.PrintMes(&quot;æ¥å£æµ‹è¯•&quot;,&quot;green&quot;)                    &#125;            &#125;        &#125;    &#125;    post &#123;        always&#123;            script&#123;                println(&quot;always&quot;)            &#125;        &#125;                success&#123;            script&#123;                println(&quot;success&quot;)                if (&quot;$&#123;runOpts&#125;&quot; &#x3D;&#x3D; &quot;GitlabPush&quot;)&#123;                    gitlab.ChangeCommitStatus(projectId,commitSha,&quot;success&quot;)                &#125;                toemail.Email(&quot;æµæ°´çº¿æˆåŠŸ&quot;,userEmail)                        &#125;                &#125;        failure&#123;            script&#123;                println(&quot;failure&quot;)                if (&quot;$&#123;runOpts&#125;&quot; &#x3D;&#x3D; &quot;GitlabPush&quot;)&#123;                    gitlab.ChangeCommitStatus(projectId,commitSha,&quot;failed&quot;)                &#125;                toemail.Email(&quot;æµæ°´çº¿å¤±è´¥äº†ï¼&quot;,userEmail)            &#125;        &#125;                aborted&#123;            script&#123;                println(&quot;aborted&quot;)                if (&quot;$&#123;runOpts&#125;&quot; &#x3D;&#x3D; &quot;GitlabPush&quot;)&#123;                    gitlab.ChangeCommitStatus(projectId,commitSha,&quot;canceled&quot;)                &#125;               toemail.Email(&quot;æµæ°´çº¿è¢«å–æ¶ˆäº†ï¼&quot;,userEmail)            &#125;                &#125;        &#125;        &#125;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></li><li><p>jenkins ä¸­æ–°å»ºæµæ°´çº¿</p><p><img src="https://zhangtq-blog.oss-cn-hangzhou.aliyuncs.com/content_picture/1660120411806.png" alt="1660120411806"></p></li></ul>]]></content>
      
      
      <categories>
          
          <category> Devops </category>
          
      </categories>
      
      
        <tags>
            
            <tag> æµæ°´çº¿ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>javaé¡¹ç›®å‘å¸ƒæµæ°´çº¿</title>
      <link href="/posts/63297.html"/>
      <url>/posts/63297.html</url>
      
        <content type="html"><![CDATA[<h2 id="java-é¡¹ç›®å‘å¸ƒæµæ°´çº¿"><a href="#java-é¡¹ç›®å‘å¸ƒæµæ°´çº¿" class="headerlink" title="java é¡¹ç›®å‘å¸ƒæµæ°´çº¿"></a>java é¡¹ç›®å‘å¸ƒæµæ°´çº¿</h2><p><img src="https://zhangtq-blog.oss-cn-hangzhou.aliyuncs.com/content_picture/1660119219391.png" alt="1660119219391"></p><ul><li><p>ä½¿ç”¨mavenç¼–è¯‘æ‰“åŒ…</p></li><li><p>ä½¿ç”¨Sonaræ‰«æ</p></li><li><p>ç¼–å†™Dockerfileæ„å»ºé•œåƒ</p></li><li><p>è‡ªåŠ¨ç”ŸæˆK8séƒ¨ç½²æ–‡ä»¶ï¼Œæ›¿æ¢é•œåƒ</p></li><li><p>ä½¿ç”¨Kubernetes APIå‘å¸ƒéƒ¨ç½².ï¼ˆJenkins Slaveè¦æŒ‚è½½dockerï¼‰</p></li></ul>]]></content>
      
      
      <categories>
          
          <category> Devops </category>
          
      </categories>
      
      
        <tags>
            
            <tag> CICD </tag>
            
            <tag> æµæ°´çº¿ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>åº”ç”¨å‘å¸ƒæµæ°´çº¿</title>
      <link href="/posts/51597.html"/>
      <url>/posts/51597.html</url>
      
        <content type="html"><![CDATA[<h2 id="åº”ç”¨å‘å¸ƒæµæ°´çº¿"><a href="#åº”ç”¨å‘å¸ƒæµæ°´çº¿" class="headerlink" title="åº”ç”¨å‘å¸ƒæµæ°´çº¿"></a>åº”ç”¨å‘å¸ƒæµæ°´çº¿</h2><ol><li><p>æ–°å»ºæµæ°´çº¿</p><p><img src="https://zhangtq-blog.oss-cn-hangzhou.aliyuncs.com/content_picture/1660037202367.png" alt="1660037202367"></p></li><li><p>vi deploy.jenkinsfile</p></li></ol>   <pre class="line-numbers language-none"><code class="language-none">#!groovy@Library(&quot;jenkinslibrary@master&quot;) _ String stackName &#x3D; &quot;$&#123;env.stackName&#125;&quot;String releaseVersion &#x3D; &quot;$&#123;env.releaseVersion&#125;&quot;def gitlab &#x3D; new org.devops.gitlab()def k8s &#x3D; new org.devops.kubernetes()pipeline&#123;   agent &#123; node &#123; label &quot;build&quot; &#125;&#125;      stages&#123;          stage(&quot;Deploy&quot;)&#123;            steps&#123;                script&#123;                                    &#x2F;&#x2F;è·å–ç‰ˆæœ¬æ–‡ä»¶                    stack &#x3D; &quot;$&#123;stackName&#125;&quot;.toLowerCase()                    response &#x3D; gitlab.GetRepoFile(7,&quot;demo-$&#123;stack&#125;%2f$&#123;releaseVersion&#125;-$&#123;stack&#125;.yaml&quot;)                    &#x2F;&#x2F;å‘å¸ƒåº”ç”¨                    k8s.UpdateDeployment(&quot;demo-$&#123;stack&#125;&quot;,&quot;demoapp&quot;,response)                 &#125;             &#125;       &#125;   &#125;&#125;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>]]></content>
      
      
      <categories>
          
          <category> Devops </category>
          
      </categories>
      
      
        <tags>
            
            <tag> CICD </tag>
            
            <tag> æµæ°´çº¿ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>åˆ¶å“æ™‹çº§æµæ°´çº¿</title>
      <link href="/posts/10831.html"/>
      <url>/posts/10831.html</url>
      
        <content type="html"><![CDATA[<h2 id="åˆ¶å“æ™‹çº§æµæ°´çº¿"><a href="#åˆ¶å“æ™‹çº§æµæ°´çº¿" class="headerlink" title="åˆ¶å“æ™‹çº§æµæ°´çº¿"></a>åˆ¶å“æ™‹çº§æµæ°´çº¿</h2><ol><li>jenkinsä¸­æ–°å»ºæµæ°´çº¿</li></ol><p>   <img src="https://zhangtq-blog.oss-cn-hangzhou.aliyuncs.com/content_picture/1660036214697.png" alt="1660036214697"></p><ol start="2"><li>vi newupdate.jenkinsfile</li></ol><pre class="line-numbers language-groovy" data-language="groovy"><code class="language-groovy"><span class="token shebang comment">#!groovy </span><span class="token annotation punctuation">@Library</span><span class="token punctuation">(</span><span class="token interpolation-string"><span class="token string">"jenkinslibrary@master"</span></span><span class="token punctuation">)</span> <span class="token number">_</span> String updateType <span class="token operator">=</span> <span class="token interpolation-string"><span class="token string">"</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">$&#123;</span><span class="token expression">env<span class="token punctuation">.</span>updateType</span><span class="token interpolation-punctuation punctuation">&#125;</span></span><span class="token string">"</span></span>String releaseVersion <span class="token operator">=</span> <span class="token interpolation-string"><span class="token string">"</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">$&#123;</span><span class="token expression">env<span class="token punctuation">.</span>releaseVersion</span><span class="token interpolation-punctuation punctuation">&#125;</span></span><span class="token string">"</span></span><span class="token keyword">def</span> tools <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">org<span class="token punctuation">.</span>devops<span class="token punctuation">.</span>tools</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token keyword">def</span> gitlab <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">org<span class="token punctuation">.</span>devops<span class="token punctuation">.</span>gitlab</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token keyword">def</span> k8s <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">org<span class="token punctuation">.</span>devops<span class="token punctuation">.</span>kubernetes</span><span class="token punctuation">(</span><span class="token punctuation">)</span>pipeline<span class="token punctuation">&#123;</span>    agent <span class="token punctuation">&#123;</span> node <span class="token punctuation">&#123;</span> label <span class="token interpolation-string"><span class="token string">"build"</span></span><span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span>        stages<span class="token punctuation">&#123;</span>        <span class="token function">stage</span><span class="token punctuation">(</span><span class="token interpolation-string"><span class="token string">"UAT->STAG"</span></span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>            when <span class="token punctuation">&#123;</span>                environment name<span class="token punctuation">:</span> <span class="token string">'updateType'</span><span class="token punctuation">,</span> value<span class="token punctuation">:</span> <span class="token string">'UAT -> STAG'</span>             <span class="token punctuation">&#125;</span>                        steps <span class="token punctuation">&#123;</span>                script<span class="token punctuation">&#123;</span>                   tools<span class="token punctuation">.</span><span class="token function">PrintMes</span><span class="token punctuation">(</span><span class="token interpolation-string"><span class="token string">"UAT -> STAG"</span></span><span class="token punctuation">,</span><span class="token interpolation-string"><span class="token string">"green"</span></span><span class="token punctuation">)</span>                                      <span class="token comment">//è·å–UATæ–‡ä»¶ä¸­çš„images</span>                                       response <span class="token operator">=</span> gitlab<span class="token punctuation">.</span><span class="token function">GetRepoFile</span><span class="token punctuation">(</span><span class="token number">7</span><span class="token punctuation">,</span><span class="token interpolation-string"><span class="token string">"demo-uat%2f</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">$&#123;</span><span class="token expression">releaseVersion</span><span class="token interpolation-punctuation punctuation">&#125;</span></span><span class="token string">-uat.yaml"</span></span><span class="token punctuation">)</span>                    fileData <span class="token operator">=</span> readYaml text<span class="token punctuation">:</span> <span class="token interpolation-string"><span class="token string">"""</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">$&#123;</span><span class="token expression">response</span><span class="token interpolation-punctuation punctuation">&#125;</span></span><span class="token string">"""</span></span>                    uatImage <span class="token operator">=</span> fileData<span class="token punctuation">[</span><span class="token interpolation-string"><span class="token string">"spec"</span></span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token interpolation-string"><span class="token string">"template"</span></span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token interpolation-string"><span class="token string">"spec"</span></span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token interpolation-string"><span class="token string">"containers"</span></span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token interpolation-string"><span class="token string">"image"</span></span><span class="token punctuation">]</span>                    tools<span class="token punctuation">.</span><span class="token function">PrintMes</span><span class="token punctuation">(</span><span class="token interpolation-string"><span class="token string">"UAT IMAGES --> </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">$&#123;</span><span class="token expression">uatImage</span><span class="token interpolation-punctuation punctuation">&#125;</span></span><span class="token string">"</span></span><span class="token punctuation">,</span><span class="token interpolation-string"><span class="token string">"green"</span></span><span class="token punctuation">)</span>                   <span class="token comment">//è·å–æœ€æ–°STAGç¯å¢ƒçš„deployment</span>                    stagResponse <span class="token operator">=</span> k8s<span class="token punctuation">.</span><span class="token function">GetDeployment</span><span class="token punctuation">(</span><span class="token interpolation-string"><span class="token string">"demo-stag"</span></span><span class="token punctuation">,</span><span class="token interpolation-string"><span class="token string">"demoapp"</span></span><span class="token punctuation">)</span>                    stagResponse <span class="token operator">=</span> stagResponse<span class="token punctuation">.</span>content                                        <span class="token comment">//è·å–é•œåƒå’Œversion</span>                    stagfileData <span class="token operator">=</span> readYaml text<span class="token punctuation">:</span> <span class="token interpolation-string"><span class="token string">"""</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">$&#123;</span><span class="token expression">stagResponse</span><span class="token interpolation-punctuation punctuation">&#125;</span></span><span class="token string">"""</span></span>                    stagOldImage <span class="token operator">=</span> stagfileData<span class="token punctuation">[</span><span class="token interpolation-string"><span class="token string">"spec"</span></span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token interpolation-string"><span class="token string">"template"</span></span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token interpolation-string"><span class="token string">"spec"</span></span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token interpolation-string"><span class="token string">"containers"</span></span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token interpolation-string"><span class="token string">"image"</span></span><span class="token punctuation">]</span>                    stagOldVersion <span class="token operator">=</span> stagfileData<span class="token punctuation">[</span><span class="token interpolation-string"><span class="token string">"metadata"</span></span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token interpolation-string"><span class="token string">"resourceVersion"</span></span><span class="token punctuation">]</span>                                        <span class="token comment">//æ›´æ–°é•œåƒå’Œversion</span>                    tools<span class="token punctuation">.</span><span class="token function">PrintMes</span><span class="token punctuation">(</span><span class="token interpolation-string"><span class="token string">"STAG OLD IMAGES --> </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">$&#123;</span><span class="token expression">stagOldImage</span><span class="token interpolation-punctuation punctuation">&#125;</span></span><span class="token string">"</span></span><span class="token punctuation">,</span><span class="token interpolation-string"><span class="token string">"green"</span></span><span class="token punctuation">)</span>                    stagResponse <span class="token operator">=</span> stagResponse<span class="token punctuation">.</span><span class="token function">replace</span><span class="token punctuation">(</span>stagOldImage<span class="token punctuation">,</span>uatImage<span class="token punctuation">)</span>                    stagResponse <span class="token operator">=</span> stagResponse<span class="token punctuation">.</span><span class="token function">replace</span><span class="token punctuation">(</span>stagOldVersion<span class="token punctuation">,</span><span class="token interpolation-string"><span class="token string">""</span></span><span class="token punctuation">)</span>                    <span class="token comment">//ç”Ÿæˆæœ€æ–°çš„STAGç‰ˆæœ¬æ–‡ä»¶</span>                    <span class="token comment">//æ–‡ä»¶è½¬æ¢</span>                    base64Content <span class="token operator">=</span> stagResponse<span class="token punctuation">.</span>bytes<span class="token punctuation">.</span><span class="token function">encodeBase64</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span>                    <span class="token comment">//ä¸Šä¼ æ–‡ä»¶</span>                    <span class="token keyword">try</span> <span class="token punctuation">&#123;</span>                        gitlab<span class="token punctuation">.</span><span class="token function">CreateRepoFile</span><span class="token punctuation">(</span><span class="token number">7</span><span class="token punctuation">,</span><span class="token interpolation-string"><span class="token string">"demo-stag%2f</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">$&#123;</span><span class="token expression">releaseVersion</span><span class="token interpolation-punctuation punctuation">&#125;</span></span><span class="token string">-stag.yaml"</span></span><span class="token punctuation">,</span>base64Content<span class="token punctuation">)</span>                    <span class="token punctuation">&#125;</span> <span class="token keyword">catch</span><span class="token punctuation">(</span>e<span class="token punctuation">)</span><span class="token punctuation">&#123;</span>                        gitlab<span class="token punctuation">.</span><span class="token function">UpdateRepoFile</span><span class="token punctuation">(</span><span class="token number">7</span><span class="token punctuation">,</span><span class="token interpolation-string"><span class="token string">"demo-stag%2f</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">$&#123;</span><span class="token expression">releaseVersion</span><span class="token interpolation-punctuation punctuation">&#125;</span></span><span class="token string">-stag.yaml"</span></span><span class="token punctuation">,</span>base64Content<span class="token punctuation">)</span>                    <span class="token punctuation">&#125;</span>                <span class="token punctuation">&#125;</span>            <span class="token punctuation">&#125;</span>        <span class="token punctuation">&#125;</span>                <span class="token function">stage</span><span class="token punctuation">(</span><span class="token interpolation-string"><span class="token string">"STAG->PROD"</span></span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>            when <span class="token punctuation">&#123;</span>                environment name<span class="token punctuation">:</span> <span class="token string">'updateType'</span><span class="token punctuation">,</span> value<span class="token punctuation">:</span> <span class="token string">'STAG -> PROD'</span>             <span class="token punctuation">&#125;</span>                        steps <span class="token punctuation">&#123;</span>                script<span class="token punctuation">&#123;</span>                   tools<span class="token punctuation">.</span><span class="token function">PrintMes</span><span class="token punctuation">(</span><span class="token interpolation-string"><span class="token string">"STAG -> PROD"</span></span><span class="token punctuation">,</span><span class="token interpolation-string"><span class="token string">"green"</span></span><span class="token punctuation">)</span>                                      <span class="token comment">//è·å–STAGæ–‡ä»¶ä¸­çš„images</span>                                       response <span class="token operator">=</span> gitlab<span class="token punctuation">.</span><span class="token function">GetRepoFile</span><span class="token punctuation">(</span><span class="token number">7</span><span class="token punctuation">,</span><span class="token interpolation-string"><span class="token string">"demo-stag%2f</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">$&#123;</span><span class="token expression">releaseVersion</span><span class="token interpolation-punctuation punctuation">&#125;</span></span><span class="token string">-stag.yaml"</span></span><span class="token punctuation">)</span>                    fileData <span class="token operator">=</span> readYaml text<span class="token punctuation">:</span> <span class="token interpolation-string"><span class="token string">"""</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">$&#123;</span><span class="token expression">response</span><span class="token interpolation-punctuation punctuation">&#125;</span></span><span class="token string">"""</span></span>                    stagImage <span class="token operator">=</span> fileData<span class="token punctuation">[</span><span class="token interpolation-string"><span class="token string">"spec"</span></span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token interpolation-string"><span class="token string">"template"</span></span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token interpolation-string"><span class="token string">"spec"</span></span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token interpolation-string"><span class="token string">"containers"</span></span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token interpolation-string"><span class="token string">"image"</span></span><span class="token punctuation">]</span>                    tools<span class="token punctuation">.</span><span class="token function">PrintMes</span><span class="token punctuation">(</span><span class="token interpolation-string"><span class="token string">"STAG IMAGES --> </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">$&#123;</span><span class="token expression">stagImage</span><span class="token interpolation-punctuation punctuation">&#125;</span></span><span class="token string">"</span></span><span class="token punctuation">,</span><span class="token interpolation-string"><span class="token string">"green"</span></span><span class="token punctuation">)</span>                   <span class="token comment">//è·å–æœ€æ–°PRODç¯å¢ƒçš„deployment</span>                    prodResponse <span class="token operator">=</span> k8s<span class="token punctuation">.</span><span class="token function">GetDeployment</span><span class="token punctuation">(</span><span class="token interpolation-string"><span class="token string">"demo-prod"</span></span><span class="token punctuation">,</span><span class="token interpolation-string"><span class="token string">"demoapp"</span></span><span class="token punctuation">)</span>                    prodResponse <span class="token operator">=</span> prodResponse<span class="token punctuation">.</span>content                                        <span class="token comment">//è·å–é•œåƒå’Œversion</span>                    prodfileData <span class="token operator">=</span> readYaml text<span class="token punctuation">:</span> <span class="token interpolation-string"><span class="token string">"""</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">$&#123;</span><span class="token expression">prodResponse</span><span class="token interpolation-punctuation punctuation">&#125;</span></span><span class="token string">"""</span></span>                    prodOldImage <span class="token operator">=</span> prodfileData<span class="token punctuation">[</span><span class="token interpolation-string"><span class="token string">"spec"</span></span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token interpolation-string"><span class="token string">"template"</span></span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token interpolation-string"><span class="token string">"spec"</span></span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token interpolation-string"><span class="token string">"containers"</span></span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token interpolation-string"><span class="token string">"image"</span></span><span class="token punctuation">]</span>                    prodOldVersion <span class="token operator">=</span> prodfileData<span class="token punctuation">[</span><span class="token interpolation-string"><span class="token string">"metadata"</span></span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token interpolation-string"><span class="token string">"resourceVersion"</span></span><span class="token punctuation">]</span>                                        <span class="token comment">//æ›´æ–°é•œåƒå’Œversion</span>                    tools<span class="token punctuation">.</span><span class="token function">PrintMes</span><span class="token punctuation">(</span><span class="token interpolation-string"><span class="token string">"PROD OLD IMAGES --> </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">$&#123;</span><span class="token expression">prodOldImage</span><span class="token interpolation-punctuation punctuation">&#125;</span></span><span class="token string">"</span></span><span class="token punctuation">,</span><span class="token interpolation-string"><span class="token string">"green"</span></span><span class="token punctuation">)</span>                    prodResponse <span class="token operator">=</span> prodResponse<span class="token punctuation">.</span><span class="token function">replace</span><span class="token punctuation">(</span>prodOldImage<span class="token punctuation">,</span>stagImage<span class="token punctuation">)</span>                    prodResponse <span class="token operator">=</span> prodResponse<span class="token punctuation">.</span><span class="token function">replace</span><span class="token punctuation">(</span>prodOldVersion<span class="token punctuation">,</span><span class="token interpolation-string"><span class="token string">""</span></span><span class="token punctuation">)</span>                    <span class="token comment">//ç”Ÿæˆæœ€æ–°çš„PRODç‰ˆæœ¬æ–‡ä»¶</span>                    <span class="token comment">//æ–‡ä»¶è½¬æ¢</span>                    base64Content <span class="token operator">=</span> prodResponse<span class="token punctuation">.</span>bytes<span class="token punctuation">.</span><span class="token function">encodeBase64</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span>                    <span class="token comment">//ä¸Šä¼ æ–‡ä»¶</span>                    <span class="token keyword">try</span> <span class="token punctuation">&#123;</span>                        gitlab<span class="token punctuation">.</span><span class="token function">CreateRepoFile</span><span class="token punctuation">(</span><span class="token number">7</span><span class="token punctuation">,</span><span class="token interpolation-string"><span class="token string">"demo-prod%2f</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">$&#123;</span><span class="token expression">releaseVersion</span><span class="token interpolation-punctuation punctuation">&#125;</span></span><span class="token string">-prod.yaml"</span></span><span class="token punctuation">,</span>base64Content<span class="token punctuation">)</span>                    <span class="token punctuation">&#125;</span> <span class="token keyword">catch</span><span class="token punctuation">(</span>e<span class="token punctuation">)</span><span class="token punctuation">&#123;</span>                        gitlab<span class="token punctuation">.</span><span class="token function">UpdateRepoFile</span><span class="token punctuation">(</span><span class="token number">7</span><span class="token punctuation">,</span><span class="token interpolation-string"><span class="token string">"demo-prod%2f</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">$&#123;</span><span class="token expression">releaseVersion</span><span class="token interpolation-punctuation punctuation">&#125;</span></span><span class="token string">-prod.yaml"</span></span><span class="token punctuation">,</span>base64Content<span class="token punctuation">)</span>                    <span class="token punctuation">&#125;</span>                <span class="token punctuation">&#125;</span>            <span class="token punctuation">&#125;</span>        <span class="token punctuation">&#125;</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>]]></content>
      
      
      <categories>
          
          <category> Devops </category>
          
      </categories>
      
      
        <tags>
            
            <tag> CICD </tag>
            
            <tag> æµæ°´çº¿ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>å…±äº«åº“æ–‡ä»¶</title>
      <link href="/posts/47733.html"/>
      <url>/posts/47733.html</url>
      
        <content type="html"><![CDATA[<h1 id="artifactory-groovy"><a href="#artifactory-groovy" class="headerlink" title="artifactory.groovy"></a>artifactory.groovy</h1><pre class="line-numbers language-groovy" data-language="groovy"><code class="language-groovy"><span class="token keyword">package</span> org<span class="token punctuation">.</span>devops<span class="token comment">//Mavenæ‰“åŒ…æ„å»º</span><span class="token keyword">def</span> <span class="token function">MavenBuild</span><span class="token punctuation">(</span>buildShell<span class="token punctuation">)</span><span class="token punctuation">&#123;</span>    <span class="token keyword">def</span> server <span class="token operator">=</span> Artifactory<span class="token punctuation">.</span>newServer url<span class="token punctuation">:</span> <span class="token interpolation-string"><span class="token string">"http://192.168.1.200:30082/artifactory"</span></span>    <span class="token keyword">def</span> rtMaven <span class="token operator">=</span> Artifactory<span class="token punctuation">.</span><span class="token function">newMavenBuild</span><span class="token punctuation">(</span><span class="token punctuation">)</span>    <span class="token keyword">def</span> buildInfo    server<span class="token punctuation">.</span>connection<span class="token punctuation">.</span>timeout <span class="token operator">=</span> <span class="token number">300</span>    server<span class="token punctuation">.</span>credentialsId <span class="token operator">=</span> <span class="token string">'artifactory-admin-user'</span>     <span class="token comment">//mavenæ‰“åŒ…</span>    rtMaven<span class="token punctuation">.</span>tool <span class="token operator">=</span> <span class="token string">'M2'</span>     buildInfo <span class="token operator">=</span> Artifactory<span class="token punctuation">.</span><span class="token function">newBuildInfo</span><span class="token punctuation">(</span><span class="token punctuation">)</span>    String newBuildShell <span class="token operator">=</span> <span class="token interpolation-string"><span class="token string">"</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">$&#123;</span><span class="token expression">buildShell</span><span class="token interpolation-punctuation punctuation">&#125;</span></span><span class="token string">"</span></span><span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span>    <span class="token function">println</span><span class="token punctuation">(</span>newBuildShell<span class="token punctuation">)</span>    rtMaven<span class="token punctuation">.</span>run pom<span class="token punctuation">:</span> <span class="token string">'pom.xml'</span><span class="token punctuation">,</span> goals<span class="token punctuation">:</span> newBuildShell<span class="token punctuation">,</span> buildInfo<span class="token punctuation">:</span> buildInfo    <span class="token comment">//ä¸Šä¼ buildä¿¡æ¯</span>    server<span class="token punctuation">.</span>publishBuildInfo buildInfo<span class="token punctuation">&#125;</span><span class="token comment">//ä¸Šä¼ åˆ¶å“</span><span class="token keyword">def</span> <span class="token function">PushArtifact</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>            <span class="token comment">//é‡å‘½ååˆ¶å“</span>    <span class="token keyword">def</span> jarName <span class="token operator">=</span> sh returnStdout<span class="token punctuation">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span> script<span class="token punctuation">:</span> <span class="token interpolation-string"><span class="token string">"cd target;ls *.jar"</span></span>    jarName <span class="token operator">=</span> jarName <span class="token operator">-</span> <span class="token interpolation-string"><span class="token string">"\n"</span></span>    <span class="token keyword">def</span> pom <span class="token operator">=</span> readMavenPom file<span class="token punctuation">:</span> <span class="token string">'pom.xml'</span>    env<span class="token punctuation">.</span>pomVersion <span class="token operator">=</span> <span class="token interpolation-string"><span class="token string">"</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">$&#123;</span><span class="token expression">pom<span class="token punctuation">.</span>version</span><span class="token interpolation-punctuation punctuation">&#125;</span></span><span class="token string">"</span></span>    env<span class="token punctuation">.</span>serviceName <span class="token operator">=</span> <span class="token interpolation-string"><span class="token string">"</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">$&#123;</span><span class="token expression">JOB_NAME</span><span class="token interpolation-punctuation punctuation">&#125;</span></span><span class="token string">"</span></span><span class="token punctuation">.</span><span class="token function">split</span><span class="token punctuation">(</span><span class="token interpolation-string"><span class="token string">"_"</span></span><span class="token punctuation">)</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span>    env<span class="token punctuation">.</span>buildTag <span class="token operator">=</span> <span class="token interpolation-string"><span class="token string">"</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">$&#123;</span><span class="token expression">BUILD_ID</span><span class="token interpolation-punctuation punctuation">&#125;</span></span><span class="token string">"</span></span>    <span class="token keyword">def</span> newJarName <span class="token operator">=</span> <span class="token interpolation-string"><span class="token string">"</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">$&#123;</span><span class="token expression">serviceName</span><span class="token interpolation-punctuation punctuation">&#125;</span></span><span class="token string">-</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">$&#123;</span><span class="token expression">pomVersion</span><span class="token interpolation-punctuation punctuation">&#125;</span></span><span class="token string">-</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">$&#123;</span><span class="token expression">buildTag</span><span class="token interpolation-punctuation punctuation">&#125;</span></span><span class="token string">.jar"</span></span>    <span class="token function">println</span><span class="token punctuation">(</span><span class="token interpolation-string"><span class="token string">"</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">$&#123;</span><span class="token expression">jarName</span><span class="token interpolation-punctuation punctuation">&#125;</span></span><span class="token string">  ------->>> </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">$&#123;</span><span class="token expression">newJarName</span><span class="token interpolation-punctuation punctuation">&#125;</span></span><span class="token string">"</span></span><span class="token punctuation">)</span>    sh <span class="token interpolation-string"><span class="token string">" mv target/</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">$&#123;</span><span class="token expression">jarName</span><span class="token interpolation-punctuation punctuation">&#125;</span></span><span class="token string">  target/</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">$&#123;</span><span class="token expression">newJarName</span><span class="token interpolation-punctuation punctuation">&#125;</span></span><span class="token string">"</span></span>        <span class="token comment">//ä¸Šä¼ åˆ¶å“</span>    env<span class="token punctuation">.</span>businessName <span class="token operator">=</span> <span class="token interpolation-string"><span class="token string">"</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">$&#123;</span><span class="token expression">env<span class="token punctuation">.</span>JOB_NAME</span><span class="token interpolation-punctuation punctuation">&#125;</span></span><span class="token string">"</span></span><span class="token punctuation">.</span><span class="token function">split</span><span class="token punctuation">(</span><span class="token interpolation-string"><span class="token string">"-"</span></span><span class="token punctuation">)</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span>    env<span class="token punctuation">.</span>repoName <span class="token operator">=</span> <span class="token interpolation-string"><span class="token string">"</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">$&#123;</span><span class="token expression">businessName</span><span class="token interpolation-punctuation punctuation">&#125;</span></span><span class="token string">-$&#123;JOB_NAME.split("</span></span><span class="token number">_</span><span class="token interpolation-string"><span class="token string">")[-1].toLowerCase()&#125;"</span></span>    <span class="token function">println</span><span class="token punctuation">(</span><span class="token interpolation-string"><span class="token string">"æœ¬æ¬¡åˆ¶å“å°†è¦ä¸Šä¼ åˆ°</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">$&#123;</span><span class="token expression">repoName</span><span class="token interpolation-punctuation punctuation">&#125;</span></span><span class="token string">ä»“åº“ä¸­!"</span></span><span class="token punctuation">)</span>       env<span class="token punctuation">.</span>uploadDir <span class="token operator">=</span> <span class="token interpolation-string"><span class="token string">"</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">$&#123;</span><span class="token expression">repoName</span><span class="token interpolation-punctuation punctuation">&#125;</span></span><span class="token string">/</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">$&#123;</span><span class="token expression">businessName</span><span class="token interpolation-punctuation punctuation">&#125;</span></span><span class="token string">/</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">$&#123;</span><span class="token expression">serviceName</span><span class="token interpolation-punctuation punctuation">&#125;</span></span><span class="token string">/</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">$&#123;</span><span class="token expression">pomVersion</span><span class="token interpolation-punctuation punctuation">&#125;</span></span><span class="token string">"</span></span>        <span class="token function">println</span><span class="token punctuation">(</span><span class="token string">'ä¸Šä¼ åˆ¶å“'</span><span class="token punctuation">)</span>    rtUpload <span class="token punctuation">(</span>        serverId<span class="token punctuation">:</span> <span class="token interpolation-string"><span class="token string">"artifactory"</span></span><span class="token punctuation">,</span>        spec<span class="token punctuation">:</span>            <span class="token interpolation-string"><span class="token string">"""&#123;            "files": [                &#123;                "pattern": "target/</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">$&#123;</span><span class="token expression">newJarName</span><span class="token interpolation-punctuation punctuation">&#125;</span></span><span class="token string">",                "target": "</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">$&#123;</span><span class="token expression">uploadDir</span><span class="token interpolation-punctuation punctuation">&#125;</span></span><span class="token string">/"                &#125;            ]            &#125;"""</span></span>    <span class="token punctuation">)</span><span class="token punctuation">&#125;</span><span class="token keyword">def</span> <span class="token function">main</span><span class="token punctuation">(</span>buildType<span class="token punctuation">,</span>buildShell<span class="token punctuation">)</span><span class="token punctuation">&#123;</span>    <span class="token keyword">if</span><span class="token punctuation">(</span>buildType <span class="token operator">==</span> <span class="token interpolation-string"><span class="token string">"mvn"</span></span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>        <span class="token function">MavenBuild</span><span class="token punctuation">(</span>buildShell<span class="token punctuation">)</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h1 id="build-groovy"><a href="#build-groovy" class="headerlink" title="build.groovy"></a>build.groovy</h1><pre class="line-numbers language-none"><code class="language-none">package org.devops&#x2F;&#x2F;æ„å»ºç±»å‹def Build(buildType,buildShell)&#123;    def buildTools &#x3D; [&quot;mvn&quot;:&quot;M2&quot;,&quot;ant&quot;:&quot;ANT&quot;,&quot;gradle&quot;:&quot;GRADLE&quot;,&quot;npm&quot;:&quot;NPM&quot;]            println(&quot;å½“å‰é€‰æ‹©çš„æ„å»ºç±»å‹ä¸º $&#123;buildType&#125;&quot;)    buildHome&#x3D; tool buildTools[buildType]        if (&quot;$&#123;buildType&#125;&quot; &#x3D;&#x3D; &quot;npm&quot;)&#123;                sh  &quot;&quot;&quot;             export NODE_HOME&#x3D;$&#123;buildHome&#125;             export PATH&#x3D;\$NODE_HOME&#x2F;bin:\$PATH             $&#123;buildHome&#125;&#x2F;bin&#x2F;$&#123;buildType&#125; $&#123;buildShell&#125;&quot;&quot;&quot;    &#125; else &#123;        sh &quot;$&#123;buildHome&#125;&#x2F;bin&#x2F;$&#123;buildType&#125;  $&#123;buildShell&#125;&quot;    &#125;&#125;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h1 id="deploy-groovy"><a href="#deploy-groovy" class="headerlink" title="deploy.groovy"></a>deploy.groovy</h1><pre class="line-numbers language-groovy" data-language="groovy"><code class="language-groovy"><span class="token keyword">package</span> org<span class="token punctuation">.</span>devops <span class="token comment">//saltstack</span><span class="token keyword">def</span> <span class="token function">SaltDeploy</span><span class="token punctuation">(</span>hosts<span class="token punctuation">,</span>func<span class="token punctuation">)</span><span class="token punctuation">&#123;</span>    sh <span class="token interpolation-string"><span class="token string">" salt \"</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">$&#123;</span><span class="token expression">hosts</span><span class="token interpolation-punctuation punctuation">&#125;</span></span><span class="token string">\" </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">$&#123;</span><span class="token expression">func</span><span class="token interpolation-punctuation punctuation">&#125;</span></span><span class="token string"> "</span></span><span class="token punctuation">&#125;</span><span class="token comment">//ansible</span><span class="token keyword">def</span> <span class="token function">AnsibleDeploy</span><span class="token punctuation">(</span>hosts<span class="token punctuation">,</span>func<span class="token punctuation">)</span><span class="token punctuation">&#123;</span>    sh <span class="token interpolation-string"><span class="token string">" ansible </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">$&#123;</span><span class="token expression">func</span><span class="token interpolation-punctuation punctuation">&#125;</span></span><span class="token string"> </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">$&#123;</span><span class="token expression">hosts</span><span class="token interpolation-punctuation punctuation">&#125;</span></span><span class="token string">"</span></span>        <span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h1 id="gitlab-groovy"><a href="#gitlab-groovy" class="headerlink" title="gitlab.groovy"></a>gitlab.groovy</h1><pre class="line-numbers language-groovy" data-language="groovy"><code class="language-groovy"><span class="token keyword">package</span> org<span class="token punctuation">.</span>devops<span class="token comment">//å°è£…HTTPè¯·æ±‚</span><span class="token keyword">def</span> <span class="token function">HttpReq</span><span class="token punctuation">(</span>reqType<span class="token punctuation">,</span>reqUrl<span class="token punctuation">,</span>reqBody<span class="token punctuation">)</span><span class="token punctuation">&#123;</span>    <span class="token keyword">def</span> gitServer <span class="token operator">=</span> <span class="token interpolation-string"><span class="token string">"http://gitlab.idevops.site/api/v4"</span></span>    <span class="token function">withCredentials</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token function">string</span><span class="token punctuation">(</span>credentialsId<span class="token punctuation">:</span> <span class="token string">'gitlab-token'</span><span class="token punctuation">,</span> variable<span class="token punctuation">:</span> <span class="token string">'gitlabToken'</span><span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>      result <span class="token operator">=</span> httpRequest customHeaders<span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token punctuation">[</span>maskValue<span class="token punctuation">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span> name<span class="token punctuation">:</span> <span class="token string">'PRIVATE-TOKEN'</span><span class="token punctuation">,</span> value<span class="token punctuation">:</span> <span class="token interpolation-string"><span class="token string">"</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">$&#123;</span><span class="token expression">gitlabToken</span><span class="token interpolation-punctuation punctuation">&#125;</span></span><span class="token string">"</span></span><span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">,</span>                 httpMode<span class="token punctuation">:</span> reqType<span class="token punctuation">,</span>                 contentType<span class="token punctuation">:</span> <span class="token interpolation-string"><span class="token string">"APPLICATION_JSON"</span></span><span class="token punctuation">,</span>                consoleLogResponseBody<span class="token punctuation">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>                ignoreSslErrors<span class="token punctuation">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>                 requestBody<span class="token punctuation">:</span> reqBody<span class="token punctuation">,</span>                url<span class="token punctuation">:</span> <span class="token interpolation-string"><span class="token string">"</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">$&#123;</span><span class="token expression">gitServer</span><span class="token interpolation-punctuation punctuation">&#125;</span></span><span class="token string">/</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">$&#123;</span><span class="token expression">reqUrl</span><span class="token interpolation-punctuation punctuation">&#125;</span></span><span class="token string">"</span></span>                <span class="token comment">//quiet: true</span>    <span class="token punctuation">&#125;</span>    <span class="token keyword">return</span> result<span class="token punctuation">&#125;</span><span class="token comment">//æ›´æ–°æ–‡ä»¶å†…å®¹</span><span class="token keyword">def</span> <span class="token function">UpdateRepoFile</span><span class="token punctuation">(</span>projectId<span class="token punctuation">,</span>filePath<span class="token punctuation">,</span>fileContent<span class="token punctuation">)</span><span class="token punctuation">&#123;</span>    apiUrl <span class="token operator">=</span> <span class="token interpolation-string"><span class="token string">"projects/</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">$&#123;</span><span class="token expression">projectId</span><span class="token interpolation-punctuation punctuation">&#125;</span></span><span class="token string">/repository/files/</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">$&#123;</span><span class="token expression">filePath</span><span class="token interpolation-punctuation punctuation">&#125;</span></span><span class="token string">"</span></span>    reqBody <span class="token operator">=</span> <span class="token interpolation-string"><span class="token string">"""&#123;"branch": "master","encoding":"base64", "content": "</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">$&#123;</span><span class="token expression">fileContent</span><span class="token interpolation-punctuation punctuation">&#125;</span></span><span class="token string">", "commit_message": "update a new file"&#125;"""</span></span>    response <span class="token operator">=</span> <span class="token function">HttpReq</span><span class="token punctuation">(</span><span class="token string">'PUT'</span><span class="token punctuation">,</span>apiUrl<span class="token punctuation">,</span>reqBody<span class="token punctuation">)</span>    <span class="token function">println</span><span class="token punctuation">(</span>response<span class="token punctuation">)</span><span class="token punctuation">&#125;</span><span class="token comment">//è·å–æ–‡ä»¶å†…å®¹</span><span class="token keyword">def</span> <span class="token function">GetRepoFile</span><span class="token punctuation">(</span>projectId<span class="token punctuation">,</span>filePath<span class="token punctuation">)</span><span class="token punctuation">&#123;</span>    apiUrl <span class="token operator">=</span> <span class="token interpolation-string"><span class="token string">"projects/</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">$&#123;</span><span class="token expression">projectId</span><span class="token interpolation-punctuation punctuation">&#125;</span></span><span class="token string">/repository/files/</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">$&#123;</span><span class="token expression">filePath</span><span class="token interpolation-punctuation punctuation">&#125;</span></span><span class="token string">/raw?ref=master"</span></span>    response <span class="token operator">=</span> <span class="token function">HttpReq</span><span class="token punctuation">(</span><span class="token string">'GET'</span><span class="token punctuation">,</span>apiUrl<span class="token punctuation">,</span><span class="token string">''</span><span class="token punctuation">)</span>    <span class="token keyword">return</span> response<span class="token punctuation">.</span>content<span class="token punctuation">&#125;</span><span class="token comment">//åˆ›å»ºä»“åº“æ–‡ä»¶</span><span class="token keyword">def</span> <span class="token function">CreateRepoFile</span><span class="token punctuation">(</span>projectId<span class="token punctuation">,</span>filePath<span class="token punctuation">,</span>fileContent<span class="token punctuation">)</span><span class="token punctuation">&#123;</span>    apiUrl <span class="token operator">=</span> <span class="token interpolation-string"><span class="token string">"projects/</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">$&#123;</span><span class="token expression">projectId</span><span class="token interpolation-punctuation punctuation">&#125;</span></span><span class="token string">/repository/files/</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">$&#123;</span><span class="token expression">filePath</span><span class="token interpolation-punctuation punctuation">&#125;</span></span><span class="token string">"</span></span>    reqBody <span class="token operator">=</span> <span class="token interpolation-string"><span class="token string">"""&#123;"branch": "master","encoding":"base64", "content": "</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">$&#123;</span><span class="token expression">fileContent</span><span class="token interpolation-punctuation punctuation">&#125;</span></span><span class="token string">", "commit_message": "create a new file"&#125;"""</span></span>    response <span class="token operator">=</span> <span class="token function">HttpReq</span><span class="token punctuation">(</span><span class="token string">'POST'</span><span class="token punctuation">,</span>apiUrl<span class="token punctuation">,</span>reqBody<span class="token punctuation">)</span>    <span class="token function">println</span><span class="token punctuation">(</span>response<span class="token punctuation">)</span><span class="token punctuation">&#125;</span><span class="token comment">//æ›´æ”¹æäº¤çŠ¶æ€</span><span class="token keyword">def</span> <span class="token function">ChangeCommitStatus</span><span class="token punctuation">(</span>projectId<span class="token punctuation">,</span>commitSha<span class="token punctuation">,</span>status<span class="token punctuation">)</span><span class="token punctuation">&#123;</span>    commitApi <span class="token operator">=</span> <span class="token interpolation-string"><span class="token string">"projects/</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">$&#123;</span><span class="token expression">projectId</span><span class="token interpolation-punctuation punctuation">&#125;</span></span><span class="token string">/statuses/</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">$&#123;</span><span class="token expression">commitSha</span><span class="token interpolation-punctuation punctuation">&#125;</span></span><span class="token string">?state=</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">$&#123;</span><span class="token expression">status</span><span class="token interpolation-punctuation punctuation">&#125;</span></span><span class="token string">"</span></span>    response <span class="token operator">=</span> <span class="token function">HttpReq</span><span class="token punctuation">(</span><span class="token string">'POST'</span><span class="token punctuation">,</span>commitApi<span class="token punctuation">,</span><span class="token string">''</span><span class="token punctuation">)</span>    <span class="token function">println</span><span class="token punctuation">(</span>response<span class="token punctuation">)</span>    <span class="token keyword">return</span> response<span class="token punctuation">&#125;</span><span class="token comment">//è·å–é¡¹ç›®ID</span><span class="token keyword">def</span> <span class="token function">GetProjectID</span><span class="token punctuation">(</span>repoName<span class="token operator">=</span><span class="token string">''</span><span class="token punctuation">,</span>projectName<span class="token punctuation">)</span><span class="token punctuation">&#123;</span>    projectApi <span class="token operator">=</span> <span class="token interpolation-string"><span class="token string">"projects?search=</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">$&#123;</span><span class="token expression">projectName</span><span class="token interpolation-punctuation punctuation">&#125;</span></span><span class="token string">"</span></span>    response <span class="token operator">=</span> <span class="token function">HttpReq</span><span class="token punctuation">(</span><span class="token string">'GET'</span><span class="token punctuation">,</span>projectApi<span class="token punctuation">,</span><span class="token string">''</span><span class="token punctuation">)</span>    <span class="token keyword">def</span> result <span class="token operator">=</span> readJSON text<span class="token punctuation">:</span> <span class="token interpolation-string"><span class="token string">"""</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">$&#123;</span><span class="token expression">response<span class="token punctuation">.</span>content</span><span class="token interpolation-punctuation punctuation">&#125;</span></span><span class="token string">"""</span></span>        <span class="token keyword">for</span> <span class="token punctuation">(</span>repo <span class="token keyword">in</span> result<span class="token punctuation">)</span><span class="token punctuation">&#123;</span>       <span class="token comment">// println(repo['path_with_namespace'])</span>        <span class="token keyword">if</span> <span class="token punctuation">(</span>repo<span class="token punctuation">[</span><span class="token string">'path'</span><span class="token punctuation">]</span> <span class="token operator">==</span> <span class="token interpolation-string"><span class="token string">"</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">$&#123;</span><span class="token expression">projectName</span><span class="token interpolation-punctuation punctuation">&#125;</span></span><span class="token string">"</span></span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>                        repoId <span class="token operator">=</span> repo<span class="token punctuation">[</span><span class="token string">'id'</span><span class="token punctuation">]</span>            <span class="token function">println</span><span class="token punctuation">(</span>repoId<span class="token punctuation">)</span>        <span class="token punctuation">&#125;</span>    <span class="token punctuation">&#125;</span>    <span class="token keyword">return</span> repoId<span class="token punctuation">&#125;</span><span class="token comment">//åˆ é™¤åˆ†æ”¯</span><span class="token keyword">def</span> <span class="token function">DeleteBranch</span><span class="token punctuation">(</span>projectId<span class="token punctuation">,</span>branchName<span class="token punctuation">)</span><span class="token punctuation">&#123;</span>    apiUrl <span class="token operator">=</span> <span class="token interpolation-string"><span class="token string">"/projects/</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">$&#123;</span><span class="token expression">projectId</span><span class="token interpolation-punctuation punctuation">&#125;</span></span><span class="token string">/repository/branches/</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">$&#123;</span><span class="token expression">branchName</span><span class="token interpolation-punctuation punctuation">&#125;</span></span><span class="token string">"</span></span>    response <span class="token operator">=</span> <span class="token function">HttpReq</span><span class="token punctuation">(</span><span class="token interpolation-string"><span class="token string">"DELETE"</span></span><span class="token punctuation">,</span>apiUrl<span class="token punctuation">,</span><span class="token string">''</span><span class="token punctuation">)</span><span class="token punctuation">.</span>content    <span class="token function">println</span><span class="token punctuation">(</span>response<span class="token punctuation">)</span><span class="token punctuation">&#125;</span><span class="token comment">//åˆ›å»ºåˆ†æ”¯</span><span class="token keyword">def</span> <span class="token function">CreateBranch</span><span class="token punctuation">(</span>projectId<span class="token punctuation">,</span>refBranch<span class="token punctuation">,</span>newBranch<span class="token punctuation">)</span><span class="token punctuation">&#123;</span>    <span class="token keyword">try</span> <span class="token punctuation">&#123;</span>        branchApi <span class="token operator">=</span> <span class="token interpolation-string"><span class="token string">"projects/</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">$&#123;</span><span class="token expression">projectId</span><span class="token interpolation-punctuation punctuation">&#125;</span></span><span class="token string">/repository/branches?branch=</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">$&#123;</span><span class="token expression">newBranch</span><span class="token interpolation-punctuation punctuation">&#125;</span></span><span class="token string">&amp;ref=</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">$&#123;</span><span class="token expression">refBranch</span><span class="token interpolation-punctuation punctuation">&#125;</span></span><span class="token string">"</span></span>        response <span class="token operator">=</span> <span class="token function">HttpReq</span><span class="token punctuation">(</span><span class="token interpolation-string"><span class="token string">"POST"</span></span><span class="token punctuation">,</span>branchApi<span class="token punctuation">,</span><span class="token string">''</span><span class="token punctuation">)</span><span class="token punctuation">.</span>content        branchInfo <span class="token operator">=</span> readJSON text<span class="token punctuation">:</span> <span class="token interpolation-string"><span class="token string">"""</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">$&#123;</span><span class="token expression">response</span><span class="token interpolation-punctuation punctuation">&#125;</span></span><span class="token string">"""</span></span>    <span class="token punctuation">&#125;</span> <span class="token keyword">catch</span><span class="token punctuation">(</span>e<span class="token punctuation">)</span><span class="token punctuation">&#123;</span>        <span class="token function">println</span><span class="token punctuation">(</span>e<span class="token punctuation">)</span>    <span class="token punctuation">&#125;</span>  <span class="token comment">//println(branchInfo)</span><span class="token punctuation">&#125;</span><span class="token comment">//åˆ›å»ºåˆå¹¶è¯·æ±‚</span><span class="token keyword">def</span> <span class="token function">CreateMr</span><span class="token punctuation">(</span>projectId<span class="token punctuation">,</span>sourceBranch<span class="token punctuation">,</span>targetBranch<span class="token punctuation">,</span>title<span class="token punctuation">,</span>assigneeUser<span class="token operator">=</span><span class="token interpolation-string"><span class="token string">""</span></span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>    <span class="token keyword">try</span> <span class="token punctuation">&#123;</span>        <span class="token keyword">def</span> mrUrl <span class="token operator">=</span> <span class="token interpolation-string"><span class="token string">"projects/</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">$&#123;</span><span class="token expression">projectId</span><span class="token interpolation-punctuation punctuation">&#125;</span></span><span class="token string">/merge_requests"</span></span>        <span class="token keyword">def</span> reqBody <span class="token operator">=</span> <span class="token interpolation-string"><span class="token string">"""&#123;"source_branch":"</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">$&#123;</span><span class="token expression">sourceBranch</span><span class="token interpolation-punctuation punctuation">&#125;</span></span><span class="token string">", "target_branch": "</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">$&#123;</span><span class="token expression">targetBranch</span><span class="token interpolation-punctuation punctuation">&#125;</span></span><span class="token string">","title":"</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">$&#123;</span><span class="token expression">title</span><span class="token interpolation-punctuation punctuation">&#125;</span></span><span class="token string">","assignee_id":"</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">$&#123;</span><span class="token expression">assigneeUser</span><span class="token interpolation-punctuation punctuation">&#125;</span></span><span class="token string">"&#125;"""</span></span>        response <span class="token operator">=</span> <span class="token function">HttpReq</span><span class="token punctuation">(</span><span class="token interpolation-string"><span class="token string">"POST"</span></span><span class="token punctuation">,</span>mrUrl<span class="token punctuation">,</span>reqBody<span class="token punctuation">)</span><span class="token punctuation">.</span>content        <span class="token keyword">return</span> response    <span class="token punctuation">&#125;</span> <span class="token keyword">catch</span><span class="token punctuation">(</span>e<span class="token punctuation">)</span><span class="token punctuation">&#123;</span>        <span class="token function">println</span><span class="token punctuation">(</span>e<span class="token punctuation">)</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span class="token comment">//æœç´¢åˆ†æ”¯</span><span class="token keyword">def</span> <span class="token function">SearchProjectBranches</span><span class="token punctuation">(</span>projectId<span class="token punctuation">,</span>searchKey<span class="token punctuation">)</span><span class="token punctuation">&#123;</span>    <span class="token keyword">def</span> branchUrl <span class="token operator">=</span>  <span class="token interpolation-string"><span class="token string">"projects/</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">$&#123;</span><span class="token expression">projectId</span><span class="token interpolation-punctuation punctuation">&#125;</span></span><span class="token string">/repository/branches?search=</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">$&#123;</span><span class="token expression">searchKey</span><span class="token interpolation-punctuation punctuation">&#125;</span></span><span class="token string">"</span></span>    response <span class="token operator">=</span> <span class="token function">HttpReq</span><span class="token punctuation">(</span><span class="token interpolation-string"><span class="token string">"GET"</span></span><span class="token punctuation">,</span>branchUrl<span class="token punctuation">,</span><span class="token string">''</span><span class="token punctuation">)</span><span class="token punctuation">.</span>content    <span class="token keyword">def</span> branchInfo <span class="token operator">=</span> readJSON text<span class="token punctuation">:</span> <span class="token interpolation-string"><span class="token string">"""</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">$&#123;</span><span class="token expression">response</span><span class="token interpolation-punctuation punctuation">&#125;</span></span><span class="token string">"""</span></span>        <span class="token keyword">def</span> branches <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">:</span><span class="token punctuation">]</span>    branches<span class="token punctuation">[</span>projectId<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>    <span class="token keyword">if</span><span class="token punctuation">(</span>branchInfo<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">==</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>        <span class="token keyword">return</span> branches    <span class="token punctuation">&#125;</span> <span class="token keyword">else</span> <span class="token punctuation">&#123;</span>        <span class="token keyword">for</span> <span class="token punctuation">(</span>branch <span class="token keyword">in</span> branchInfo<span class="token punctuation">)</span><span class="token punctuation">&#123;</span>            <span class="token comment">//println(branch)</span>            branches<span class="token punctuation">[</span>projectId<span class="token punctuation">]</span> <span class="token operator">+=</span> <span class="token punctuation">[</span><span class="token interpolation-string"><span class="token string">"branchName"</span></span><span class="token punctuation">:</span>branch<span class="token punctuation">[</span><span class="token interpolation-string"><span class="token string">"name"</span></span><span class="token punctuation">]</span><span class="token punctuation">,</span>                                    <span class="token interpolation-string"><span class="token string">"commitMes"</span></span><span class="token punctuation">:</span>branch<span class="token punctuation">[</span><span class="token interpolation-string"><span class="token string">"commit"</span></span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token interpolation-string"><span class="token string">"message"</span></span><span class="token punctuation">]</span><span class="token punctuation">,</span>                                    <span class="token interpolation-string"><span class="token string">"commitId"</span></span><span class="token punctuation">:</span>branch<span class="token punctuation">[</span><span class="token interpolation-string"><span class="token string">"commit"</span></span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token interpolation-string"><span class="token string">"id"</span></span><span class="token punctuation">]</span><span class="token punctuation">,</span>                                    <span class="token interpolation-string"><span class="token string">"merged"</span></span><span class="token punctuation">:</span> branch<span class="token punctuation">[</span><span class="token interpolation-string"><span class="token string">"merged"</span></span><span class="token punctuation">]</span><span class="token punctuation">,</span>                                    <span class="token interpolation-string"><span class="token string">"createTime"</span></span><span class="token punctuation">:</span> branch<span class="token punctuation">[</span><span class="token interpolation-string"><span class="token string">"commit"</span></span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token interpolation-string"><span class="token string">"created_at"</span></span><span class="token punctuation">]</span><span class="token punctuation">]</span>        <span class="token punctuation">&#125;</span>        <span class="token keyword">return</span> branches    <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span class="token comment">//å…è®¸åˆå¹¶</span><span class="token keyword">def</span> <span class="token function">AcceptMr</span><span class="token punctuation">(</span>projectId<span class="token punctuation">,</span>mergeId<span class="token punctuation">)</span><span class="token punctuation">&#123;</span>    <span class="token keyword">def</span> apiUrl <span class="token operator">=</span> <span class="token interpolation-string"><span class="token string">"projects/</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">$&#123;</span><span class="token expression">projectId</span><span class="token interpolation-punctuation punctuation">&#125;</span></span><span class="token string">/merge_requests/</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">$&#123;</span><span class="token expression">mergeId</span><span class="token interpolation-punctuation punctuation">&#125;</span></span><span class="token string">/merge"</span></span>    <span class="token function">HttpReq</span><span class="token punctuation">(</span><span class="token string">'PUT'</span><span class="token punctuation">,</span>apiUrl<span class="token punctuation">,</span><span class="token string">''</span><span class="token punctuation">)</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h1 id="influxdb-groovy"><a href="#influxdb-groovy" class="headerlink" title="influxdb.groovy"></a>influxdb.groovy</h1><pre class="line-numbers language-groovy" data-language="groovy"><code class="language-groovy"><span class="token keyword">package</span> org<span class="token punctuation">.</span>devops <span class="token comment">//åˆ›å»ºæ•°æ®åº“</span><span class="token keyword">def</span> <span class="token function">CreateDb</span><span class="token punctuation">(</span>dbName<span class="token punctuation">)</span><span class="token punctuation">&#123;</span>   sh <span class="token interpolation-string"><span class="token string">"""      curl -XPOST 'http://192.168.1.200:30086/query' --data-urlencode 'q=CREATE DATABASE \"</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">$&#123;</span><span class="token expression">dbName</span><span class="token interpolation-punctuation punctuation">&#125;</span></span><span class="token string">\"'"      """</span></span><span class="token punctuation">&#125;</span><span class="token keyword">def</span> <span class="token function">WriteData</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>    measurementName <span class="token operator">=</span> <span class="token interpolation-string"><span class="token string">"</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">$&#123;</span><span class="token expression">JOB_NAME</span><span class="token interpolation-punctuation punctuation">&#125;</span></span><span class="token string">"</span></span><span class="token punctuation">.</span><span class="token function">split</span><span class="token punctuation">(</span><span class="token interpolation-string"><span class="token string">"-"</span></span><span class="token punctuation">)</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span>    SERVICE_NAME <span class="token operator">=</span> <span class="token interpolation-string"><span class="token string">"</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">$&#123;</span><span class="token expression">JOB_NAME</span><span class="token interpolation-punctuation punctuation">&#125;</span></span><span class="token string">"</span></span>    BUILD_AGENT <span class="token operator">=</span> <span class="token interpolation-string"><span class="token string">"master"</span></span>    BUILD_RESULT <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token interpolation-string"><span class="token string">"SUCCESS"</span></span><span class="token punctuation">:</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token interpolation-string"><span class="token string">"FAILURE"</span></span><span class="token punctuation">:</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token interpolation-string"><span class="token string">"</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">$&#123;</span><span class="token expression">currentBuild<span class="token punctuation">.</span>currentResult</span><span class="token interpolation-punctuation punctuation">&#125;</span></span><span class="token string">"</span></span><span class="token punctuation">]</span>    <span class="token comment">/*wrap([$class: 'BuildUser'])&#123;        currentBuild.description = "Trigger By $&#123;$BUILD_USER&#125;"    &#125;*/</span>            httpRequest httpMode<span class="token punctuation">:</span> <span class="token string">'POST'</span><span class="token punctuation">,</span>             requestBody<span class="token punctuation">:</span> <span class="token interpolation-string"><span class="token string">"""</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">$&#123;</span><span class="token expression">measurementName</span><span class="token interpolation-punctuation punctuation">&#125;</span></span><span class="token string">,build_number=</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">$&#123;</span><span class="token expression">BUILD_ID</span><span class="token interpolation-punctuation punctuation">&#125;</span></span><span class="token string">,build_agent_name=</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">$&#123;</span><span class="token expression">BUILD_AGENT</span><span class="token interpolation-punctuation punctuation">&#125;</span></span><span class="token string"> project_name=\"</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">$&#123;</span><span class="token expression">SERVICE_NAME</span><span class="token interpolation-punctuation punctuation">&#125;</span></span><span class="token string">\",build_id=</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">$&#123;</span><span class="token expression">BUILD_ID</span><span class="token interpolation-punctuation punctuation">&#125;</span></span><span class="token string">,build_time=</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">$&#123;</span><span class="token expression">currentBuild<span class="token punctuation">.</span>duration</span><span class="token interpolation-punctuation punctuation">&#125;</span></span><span class="token string">,build_result=</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">$&#123;</span><span class="token expression">BUILD_RESULT</span><span class="token interpolation-punctuation punctuation">&#125;</span></span><span class="token string">,build_desc=\"</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">$&#123;</span><span class="token expression">currentBuild<span class="token punctuation">.</span>description</span><span class="token interpolation-punctuation punctuation">&#125;</span></span><span class="token string">\",tests_passed=10,tests_failed=2,tests_skipped=3 1434055564000000000"""</span></span><span class="token punctuation">,</span>             url<span class="token punctuation">:</span> <span class="token string">'http://192.168.1.200:30086/write?db=jenkins'</span>        <span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h1 id="interfacetest-groovy"><a href="#interfacetest-groovy" class="headerlink" title="interfacetest.groovy"></a>interfacetest.groovy</h1><pre class="line-numbers language-groovy" data-language="groovy"><code class="language-groovy"><span class="token keyword">package</span> org<span class="token punctuation">.</span>devops<span class="token comment">//è¿è¡Œæµ‹è¯•</span><span class="token keyword">def</span> <span class="token function">RunTest</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>    antHome <span class="token operator">=</span> tool <span class="token interpolation-string"><span class="token string">"ANT"</span></span>    sh <span class="token interpolation-string"><span class="token string">" </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">$&#123;</span><span class="token expression">antHome</span><span class="token interpolation-punctuation punctuation">&#125;</span></span><span class="token string">/bin/ant -f build.xml "</span></span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h1 id="jenkinsapi-groovy"><a href="#jenkinsapi-groovy" class="headerlink" title="jenkinsapi.groovy"></a>jenkinsapi.groovy</h1><pre class="line-numbers language-groovy" data-language="groovy"><code class="language-groovy"><span class="token keyword">package</span> org<span class="token punctuation">.</span>devops<span class="token comment">//å°è£…HTTPè¯·æ±‚</span><span class="token keyword">def</span> <span class="token function">HttpReq</span><span class="token punctuation">(</span>reqType<span class="token punctuation">,</span>reqUrl<span class="token punctuation">,</span>reqBody<span class="token punctuation">)</span><span class="token punctuation">&#123;</span>    <span class="token keyword">def</span> jenkinsServer <span class="token operator">=</span> <span class="token string">'http://192.168.1.200:30080'</span>    result <span class="token operator">=</span> httpRequest authentication<span class="token punctuation">:</span> <span class="token string">'jenkins-zeyang-admin'</span><span class="token punctuation">,</span>                        httpMode<span class="token punctuation">:</span> reqType<span class="token punctuation">,</span>                        consoleLogResponseBody<span class="token punctuation">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>                        ignoreSslErrors<span class="token punctuation">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>                         requestBody<span class="token punctuation">:</span> reqBody<span class="token punctuation">,</span>                        url<span class="token punctuation">:</span> <span class="token interpolation-string"><span class="token string">"</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">$&#123;</span><span class="token expression">jenkinsServer</span><span class="token interpolation-punctuation punctuation">&#125;</span></span><span class="token string">/</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">$&#123;</span><span class="token expression">reqUrl</span><span class="token interpolation-punctuation punctuation">&#125;</span></span><span class="token string">"</span></span>                        <span class="token comment">//quiet: true</span>                        <span class="token punctuation">&#125;</span><span class="token comment">//æ–°å»ºé¡¹ç›®</span><span class="token keyword">def</span> <span class="token function">CreateProject</span><span class="token punctuation">(</span>projectName<span class="token punctuation">)</span><span class="token punctuation">&#123;</span>        <span class="token function">withCredentials</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token function">usernamePassword</span><span class="token punctuation">(</span>credentialsId<span class="token punctuation">:</span> <span class="token string">'jenkins-zeyang-admin'</span><span class="token punctuation">,</span> passwordVariable<span class="token punctuation">:</span> <span class="token string">'password'</span><span class="token punctuation">,</span> usernameVariable<span class="token punctuation">:</span> <span class="token string">'username'</span><span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>               sh <span class="token interpolation-string"><span class="token string">"""                   curl -u </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">$&#123;</span><span class="token expression">username</span><span class="token interpolation-punctuation punctuation">&#125;</span></span><span class="token string">:</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">$&#123;</span><span class="token expression">password</span><span class="token interpolation-punctuation punctuation">&#125;</span></span><span class="token string"> -X GET 'http://192.168.1.200:30080/job/demo-project-manage/config.xml' -o config.xml           ls -l                   curl -u </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">$&#123;</span><span class="token expression">username</span><span class="token interpolation-punctuation punctuation">&#125;</span></span><span class="token string">:</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">$&#123;</span><span class="token expression">password</span><span class="token interpolation-punctuation punctuation">&#125;</span></span><span class="token string"> -X POST 'http://192.168.1.200:30080/createItem?name=</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">$&#123;</span><span class="token expression">projectName</span><span class="token interpolation-punctuation punctuation">&#125;</span></span><span class="token string">' -H 'Content-Type:text/xml' --data-binary @config.xml                """</span></span>    <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span class="token comment">//ç¦ç”¨é¡¹ç›®</span><span class="token keyword">def</span> <span class="token function">Project</span><span class="token punctuation">(</span>projectName<span class="token punctuation">,</span>option<span class="token punctuation">)</span><span class="token punctuation">&#123;</span>    <span class="token function">println</span><span class="token punctuation">(</span>projectName<span class="token punctuation">)</span>    <span class="token function">println</span><span class="token punctuation">(</span>option<span class="token punctuation">)</span>        options <span class="token operator">=</span> <span class="token punctuation">[</span> <span class="token interpolation-string"><span class="token string">"DisableProject"</span></span><span class="token punctuation">:</span> <span class="token interpolation-string"><span class="token string">"disable"</span></span><span class="token punctuation">,</span>                <span class="token interpolation-string"><span class="token string">"EnableProject"</span></span><span class="token punctuation">:</span><span class="token interpolation-string"><span class="token string">"enable"</span></span><span class="token punctuation">,</span>                <span class="token interpolation-string"><span class="token string">"DeleteProject"</span></span><span class="token punctuation">:</span><span class="token interpolation-string"><span class="token string">"doDelete"</span></span><span class="token punctuation">,</span>                <span class="token interpolation-string"><span class="token string">"BuildProject"</span></span><span class="token punctuation">:</span><span class="token interpolation-string"><span class="token string">"build"</span></span><span class="token punctuation">]</span>        result <span class="token operator">=</span> <span class="token function">HttpReq</span><span class="token punctuation">(</span><span class="token string">'POST'</span><span class="token punctuation">,</span><span class="token interpolation-string"><span class="token string">"job/</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">$&#123;</span><span class="token expression">projectName</span><span class="token interpolation-punctuation punctuation">&#125;</span></span><span class="token string">/</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">$&#123;</span><span class="token expression">options<span class="token punctuation">[</span>option<span class="token punctuation">]</span></span><span class="token interpolation-punctuation punctuation">&#125;</span></span><span class="token string">"</span></span><span class="token punctuation">,</span><span class="token string">''</span><span class="token punctuation">)</span>    <span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h1 id="jira-groovy"><a href="#jira-groovy" class="headerlink" title="jira.groovy"></a>jira.groovy</h1><pre class="line-numbers language-groovy" data-language="groovy"><code class="language-groovy"><span class="token keyword">package</span> org<span class="token punctuation">.</span>devops<span class="token comment">//å°è£…HTTPè¯·æ±‚</span><span class="token keyword">def</span> <span class="token function">HttpReq</span><span class="token punctuation">(</span>reqType<span class="token punctuation">,</span>reqUrl<span class="token punctuation">,</span>reqBody<span class="token punctuation">)</span><span class="token punctuation">&#123;</span>    <span class="token keyword">def</span> apiServer <span class="token operator">=</span> <span class="token interpolation-string"><span class="token string">"http://192.168.1.200:8050/rest/api/2"</span></span>      result <span class="token operator">=</span> httpRequest authentication<span class="token punctuation">:</span> <span class="token string">'jira-admin-user'</span><span class="token punctuation">,</span>            httpMode<span class="token punctuation">:</span> reqType<span class="token punctuation">,</span>             contentType<span class="token punctuation">:</span> <span class="token interpolation-string"><span class="token string">"APPLICATION_JSON"</span></span><span class="token punctuation">,</span>            consoleLogResponseBody<span class="token punctuation">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>            ignoreSslErrors<span class="token punctuation">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>             requestBody<span class="token punctuation">:</span> reqBody<span class="token punctuation">,</span>            url<span class="token punctuation">:</span> <span class="token interpolation-string"><span class="token string">"</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">$&#123;</span><span class="token expression">apiServer</span><span class="token interpolation-punctuation punctuation">&#125;</span></span><span class="token string">/</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">$&#123;</span><span class="token expression">reqUrl</span><span class="token interpolation-punctuation punctuation">&#125;</span></span><span class="token string">"</span></span>            <span class="token comment">//quiet: true</span>    <span class="token keyword">return</span> result<span class="token punctuation">&#125;</span><span class="token comment">//æ‰§è¡ŒJQL</span><span class="token keyword">def</span> <span class="token function">RunJql</span><span class="token punctuation">(</span>jqlContent<span class="token punctuation">)</span><span class="token punctuation">&#123;</span>    apiUrl <span class="token operator">=</span> <span class="token interpolation-string"><span class="token string">"search?jql=</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">$&#123;</span><span class="token expression">jqlContent</span><span class="token interpolation-punctuation punctuation">&#125;</span></span><span class="token string">"</span></span>    response <span class="token operator">=</span> <span class="token function">HttpReq</span><span class="token punctuation">(</span><span class="token interpolation-string"><span class="token string">"GET"</span></span><span class="token punctuation">,</span>apiUrl<span class="token punctuation">,</span><span class="token string">''</span><span class="token punctuation">)</span>    <span class="token keyword">return</span> response<span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h1 id="kubernetes-groovy"><a href="#kubernetes-groovy" class="headerlink" title="kubernetes.groovy"></a>kubernetes.groovy</h1><pre class="line-numbers language-none"><code class="language-none">package org.devops&#x2F;&#x2F;å°è£…HTTPè¯·æ±‚def HttpReq(reqType,reqUrl,reqBody)&#123;    def apiServer &#x3D; &quot;https:&#x2F;&#x2F;192.168.1.200:6443&#x2F;apis&#x2F;apps&#x2F;v1&quot;    withCredentials([string(credentialsId: &#39;kubernetes-token&#39;, variable: &#39;kubernetestoken&#39;)]) &#123;      result &#x3D; httpRequest customHeaders: [[maskValue: true, name: &#39;Authorization&#39;, value: &quot;Bearer $&#123;kubernetestoken&#125;&quot;],                                           [maskValue: false, name: &#39;Content-Type&#39;, value: &#39;application&#x2F;yaml&#39;],                                            [maskValue: false, name: &#39;Accept&#39;, value: &#39;application&#x2F;yaml&#39;]],                 httpMode: reqType,                 consoleLogResponseBody: true,                ignoreSslErrors: true,                 requestBody: reqBody,                url: &quot;$&#123;apiServer&#125;&#x2F;$&#123;reqUrl&#125;&quot;                &#x2F;&#x2F;quiet: true    &#125;    return result&#125;&#x2F;&#x2F;æ–°å»ºDeploymentdef CreateDeployment(nameSpace,deployName,deplyBody)&#123;    apiUrl &#x3D; &quot;namespaces&#x2F;$&#123;nameSpace&#125;&#x2F;deployments&#x2F;&quot;    response &#x3D; HttpReq(&#39;POST&#39;,apiUrl,deplyBody)    println(response)&#125;&#x2F;&#x2F;åˆ é™¤deploymentdef DeleteDeployment(nameSpace,deployName)&#123;    apiUrl &#x3D; &quot;namespaces&#x2F;$&#123;nameSpace&#125;&#x2F;deployments&#x2F;$&#123;deployName&#125;&quot;    response &#x3D; HttpReq(&#39;DELETE&#39;,apiUrl,deplyBody)    println(response)&#125;&#x2F;&#x2F;æ›´æ–°Deploymentdef UpdateDeployment(nameSpace,deployName,deplyBody)&#123;    apiUrl &#x3D; &quot;namespaces&#x2F;$&#123;nameSpace&#125;&#x2F;deployments&#x2F;$&#123;deployName&#125;&quot;    response &#x3D; HttpReq(&#39;PUT&#39;,apiUrl,deplyBody)    println(response)&#125;&#x2F;&#x2F;è·å–Deploymentdef GetDeployment(nameSpace,deployName)&#123;    apiUrl &#x3D; &quot;namespaces&#x2F;$&#123;nameSpace&#125;&#x2F;deployments&#x2F;$&#123;deployName&#125;&quot;    response &#x3D; HttpReq(&#39;GET&#39;,apiUrl,&#39;&#39;)    return response&#125;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h1 id="nexus-groovy"><a href="#nexus-groovy" class="headerlink" title="nexus.groovy"></a>nexus.groovy</h1><pre class="line-numbers language-groovy" data-language="groovy"><code class="language-groovy">pakcage org<span class="token punctuation">.</span>devops<span class="token comment">//è·å–POMä¸­çš„åæ ‡</span><span class="token keyword">def</span> <span class="token function">GetGav</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>   <span class="token comment">//ä¸Šä¼ åˆ¶å“</span>    <span class="token keyword">def</span> jarName <span class="token operator">=</span> sh returnStdout<span class="token punctuation">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span> script<span class="token punctuation">:</span> <span class="token interpolation-string"><span class="token string">"cd target;ls *.jar"</span></span>    env<span class="token punctuation">.</span>jarName <span class="token operator">=</span> jarName <span class="token operator">-</span> <span class="token interpolation-string"><span class="token string">"\n"</span></span>        <span class="token keyword">def</span> pom <span class="token operator">=</span> readMavenPom file<span class="token punctuation">:</span> <span class="token string">'pom.xml'</span>    env<span class="token punctuation">.</span>pomVersion <span class="token operator">=</span> <span class="token interpolation-string"><span class="token string">"</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">$&#123;</span><span class="token expression">pom<span class="token punctuation">.</span>version</span><span class="token interpolation-punctuation punctuation">&#125;</span></span><span class="token string">"</span></span>    env<span class="token punctuation">.</span>pomArtifact <span class="token operator">=</span> <span class="token interpolation-string"><span class="token string">"</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">$&#123;</span><span class="token expression">pom<span class="token punctuation">.</span>artifactId</span><span class="token interpolation-punctuation punctuation">&#125;</span></span><span class="token string">"</span></span>    env<span class="token punctuation">.</span>pomPackaging <span class="token operator">=</span> <span class="token interpolation-string"><span class="token string">"</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">$&#123;</span><span class="token expression">pom<span class="token punctuation">.</span>packaging</span><span class="token interpolation-punctuation punctuation">&#125;</span></span><span class="token string">"</span></span>    env<span class="token punctuation">.</span>pomGroupId <span class="token operator">=</span> <span class="token interpolation-string"><span class="token string">"</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">$&#123;</span><span class="token expression">pom<span class="token punctuation">.</span>groupId</span><span class="token interpolation-punctuation punctuation">&#125;</span></span><span class="token string">"</span></span>        <span class="token function">println</span><span class="token punctuation">(</span><span class="token interpolation-string"><span class="token string">"</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">$&#123;</span><span class="token expression">pomGroupId</span><span class="token interpolation-punctuation punctuation">&#125;</span></span><span class="token string">-</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">$&#123;</span><span class="token expression">pomArtifact</span><span class="token interpolation-punctuation punctuation">&#125;</span></span><span class="token string">-</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">$&#123;</span><span class="token expression">pomVersion</span><span class="token interpolation-punctuation punctuation">&#125;</span></span><span class="token string">-</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">$&#123;</span><span class="token expression">pomPackaging</span><span class="token interpolation-punctuation punctuation">&#125;</span></span><span class="token string">"</span></span><span class="token punctuation">)</span>    <span class="token keyword">return</span> <span class="token punctuation">[</span><span class="token interpolation-string"><span class="token string">"</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">$&#123;</span><span class="token expression">pomGroupId</span><span class="token interpolation-punctuation punctuation">&#125;</span></span><span class="token string">"</span></span><span class="token punctuation">,</span><span class="token interpolation-string"><span class="token string">"</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">$&#123;</span><span class="token expression">pomArtifact</span><span class="token interpolation-punctuation punctuation">&#125;</span></span><span class="token string">"</span></span><span class="token punctuation">,</span><span class="token interpolation-string"><span class="token string">"</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">$&#123;</span><span class="token expression">pomVersion</span><span class="token interpolation-punctuation punctuation">&#125;</span></span><span class="token string">"</span></span><span class="token punctuation">,</span><span class="token interpolation-string"><span class="token string">"</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">$&#123;</span><span class="token expression">pomPackaging</span><span class="token interpolation-punctuation punctuation">&#125;</span></span><span class="token string">"</span></span><span class="token punctuation">]</span><span class="token punctuation">&#125;</span><span class="token comment">//Nexus plugin deploy</span><span class="token keyword">def</span> <span class="token function">NexusUpload</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>    <span class="token comment">//use nexus plugin</span>    nexusArtifactUploader artifacts<span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token punctuation">[</span>artifactId<span class="token punctuation">:</span> <span class="token interpolation-string"><span class="token string">"</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">$&#123;</span><span class="token expression">pomArtifact</span><span class="token interpolation-punctuation punctuation">&#125;</span></span><span class="token string">"</span></span><span class="token punctuation">,</span>                                         classifier<span class="token punctuation">:</span> <span class="token string">''</span><span class="token punctuation">,</span>                                         file<span class="token punctuation">:</span> <span class="token interpolation-string"><span class="token string">"</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">$&#123;</span><span class="token expression">filePath</span><span class="token interpolation-punctuation punctuation">&#125;</span></span><span class="token string">"</span></span><span class="token punctuation">,</span>                                         type<span class="token punctuation">:</span> <span class="token interpolation-string"><span class="token string">"</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">$&#123;</span><span class="token expression">pomPackaging</span><span class="token interpolation-punctuation punctuation">&#125;</span></span><span class="token string">"</span></span><span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">,</span>                             credentialsId<span class="token punctuation">:</span> <span class="token string">'nexus-admin-user'</span><span class="token punctuation">,</span>                             groupId<span class="token punctuation">:</span> <span class="token interpolation-string"><span class="token string">"</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">$&#123;</span><span class="token expression">pomGroupId</span><span class="token interpolation-punctuation punctuation">&#125;</span></span><span class="token string">"</span></span><span class="token punctuation">,</span>                             nexusUrl<span class="token punctuation">:</span> <span class="token string">'192.168.1.200:30083'</span><span class="token punctuation">,</span>                             nexusVersion<span class="token punctuation">:</span> <span class="token string">'nexus3'</span><span class="token punctuation">,</span>                             protocol<span class="token punctuation">:</span> <span class="token string">'http'</span><span class="token punctuation">,</span>                             repository<span class="token punctuation">:</span> <span class="token interpolation-string"><span class="token string">"</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">$&#123;</span><span class="token expression">repoName</span><span class="token interpolation-punctuation punctuation">&#125;</span></span><span class="token string">"</span></span><span class="token punctuation">,</span>                             version<span class="token punctuation">:</span> <span class="token interpolation-string"><span class="token string">"</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">$&#123;</span><span class="token expression">pomVersion</span><span class="token interpolation-punctuation punctuation">&#125;</span></span><span class="token string">"</span></span><span class="token punctuation">&#125;</span><span class="token comment">//mvn deploy</span><span class="token keyword">def</span> <span class="token function">MavenUpload</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>              <span class="token keyword">def</span> mvnHome <span class="token operator">=</span> tool <span class="token interpolation-string"><span class="token string">"M2"</span></span>    sh  <span class="token interpolation-string"><span class="token string">"""         cd target/        </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">$&#123;</span><span class="token expression">mvnHome</span><span class="token interpolation-punctuation punctuation">&#125;</span></span><span class="token string">/bin/mvn deploy:deploy-file -Dmaven.test.skip=true  \                                -Dfile=</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">$&#123;</span><span class="token expression">jarName</span><span class="token interpolation-punctuation punctuation">&#125;</span></span><span class="token string"> -DgroupId=</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">$&#123;</span><span class="token expression">pomGroupId</span><span class="token interpolation-punctuation punctuation">&#125;</span></span><span class="token string"> \                                -DartifactId=</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">$&#123;</span><span class="token expression">pomArtifact</span><span class="token interpolation-punctuation punctuation">&#125;</span></span><span class="token string"> -Dversion=</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">$&#123;</span><span class="token expression">pomVersion</span><span class="token interpolation-punctuation punctuation">&#125;</span></span><span class="token string">  \                                -Dpackaging=</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">$&#123;</span><span class="token expression">pomPackaging</span><span class="token interpolation-punctuation punctuation">&#125;</span></span><span class="token string"> -DrepositoryId=maven-hostd \                                -Durl=http://192.168.1.200:30083/repository/maven-hostd         """</span></span><span class="token punctuation">&#125;</span><span class="token comment">//åˆ¶å“æ™‹çº§</span><span class="token keyword">def</span> <span class="token function">ArtifactUpdate</span><span class="token punctuation">(</span>updateType<span class="token punctuation">,</span>artifactUrl<span class="token punctuation">)</span><span class="token punctuation">&#123;</span>    <span class="token comment">//æ™‹çº§ç­–ç•¥</span>    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token interpolation-string"><span class="token string">"</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">$&#123;</span><span class="token expression">updateType</span><span class="token interpolation-punctuation punctuation">&#125;</span></span><span class="token string">"</span></span> <span class="token operator">==</span> <span class="token interpolation-string"><span class="token string">"snapshot -> release"</span></span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>        <span class="token function">println</span><span class="token punctuation">(</span><span class="token interpolation-string"><span class="token string">"snapshot -> release"</span></span><span class="token punctuation">)</span>        <span class="token comment">//ä¸‹è½½åŸå§‹åˆ¶å“</span>        sh <span class="token interpolation-string"><span class="token string">"  rm -fr updates &amp;&amp; mkdir updates &amp;&amp; cd updates &amp;&amp; wget </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">$&#123;</span><span class="token expression">artifactUrl</span><span class="token interpolation-punctuation punctuation">&#125;</span></span><span class="token string"> &amp;&amp; ls -l "</span></span>        <span class="token comment">//è·å–artifactID </span>                artifactUrl <span class="token operator">=</span> artifactUrl <span class="token operator">-</span>  <span class="token interpolation-string"><span class="token string">"http://192.168.1.200:30083/repository/maven-hostd/"</span></span>        artifactUrl <span class="token operator">=</span> artifactUrl<span class="token punctuation">.</span><span class="token function">split</span><span class="token punctuation">(</span><span class="token interpolation-string"><span class="token string">"/"</span></span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toList</span><span class="token punctuation">(</span><span class="token punctuation">)</span>                <span class="token function">println</span><span class="token punctuation">(</span>artifactUrl<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>        env<span class="token punctuation">.</span>jarName <span class="token operator">=</span> artifactUrl<span class="token punctuation">[</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">]</span>         env<span class="token punctuation">.</span>pomVersion <span class="token operator">=</span> artifactUrl<span class="token punctuation">[</span><span class="token operator">-</span><span class="token number">2</span><span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">replace</span><span class="token punctuation">(</span><span class="token interpolation-string"><span class="token string">"SNAPSHOT"</span></span><span class="token punctuation">,</span><span class="token interpolation-string"><span class="token string">"RELEASE"</span></span><span class="token punctuation">)</span>        env<span class="token punctuation">.</span>pomArtifact <span class="token operator">=</span> artifactUrl<span class="token punctuation">[</span><span class="token operator">-</span><span class="token number">3</span><span class="token punctuation">]</span>        pomPackaging <span class="token operator">=</span> artifactUrl<span class="token punctuation">[</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">]</span>        pomPackaging <span class="token operator">=</span> pomPackaging<span class="token punctuation">.</span><span class="token function">split</span><span class="token punctuation">(</span><span class="token interpolation-string"><span class="token string">"\\."</span></span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toList</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">[</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">]</span>        env<span class="token punctuation">.</span>pomPackaging <span class="token operator">=</span> pomPackaging<span class="token punctuation">[</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">]</span>        env<span class="token punctuation">.</span>pomGroupId <span class="token operator">=</span> artifactUrl<span class="token punctuation">[</span><span class="token number">0</span><span class="token operator">..</span><span class="token operator">-</span><span class="token number">4</span><span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">join</span><span class="token punctuation">(</span><span class="token interpolation-string"><span class="token string">"."</span></span><span class="token punctuation">)</span>        <span class="token function">println</span><span class="token punctuation">(</span><span class="token interpolation-string"><span class="token string">"</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">$&#123;</span><span class="token expression">pomGroupId</span><span class="token interpolation-punctuation punctuation">&#125;</span></span><span class="token string">##</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">$&#123;</span><span class="token expression">pomArtifact</span><span class="token interpolation-punctuation punctuation">&#125;</span></span><span class="token string">##</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">$&#123;</span><span class="token expression">pomVersion</span><span class="token interpolation-punctuation punctuation">&#125;</span></span><span class="token string">##</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">$&#123;</span><span class="token expression">pomPackaging</span><span class="token interpolation-punctuation punctuation">&#125;</span></span><span class="token string">"</span></span><span class="token punctuation">)</span>        env<span class="token punctuation">.</span>newJarName <span class="token operator">=</span> <span class="token interpolation-string"><span class="token string">"</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">$&#123;</span><span class="token expression">pomArtifact</span><span class="token interpolation-punctuation punctuation">&#125;</span></span><span class="token string">-</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">$&#123;</span><span class="token expression">pomVersion</span><span class="token interpolation-punctuation punctuation">&#125;</span></span><span class="token string">.</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">$&#123;</span><span class="token expression">pomPackaging</span><span class="token interpolation-punctuation punctuation">&#125;</span></span><span class="token string">"</span></span>                <span class="token comment">//æ›´æ”¹åç§°</span>        sh <span class="token interpolation-string"><span class="token string">" cd updates &amp;&amp; mv </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">$&#123;</span><span class="token expression">jarName</span><span class="token interpolation-punctuation punctuation">&#125;</span></span><span class="token string"> </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">$&#123;</span><span class="token expression">newJarName</span><span class="token interpolation-punctuation punctuation">&#125;</span></span><span class="token string"> "</span></span>                <span class="token comment">//ä¸Šä¼ åˆ¶å“</span>        env<span class="token punctuation">.</span>repoName <span class="token operator">=</span> <span class="token interpolation-string"><span class="token string">"maven-release"</span></span>        env<span class="token punctuation">.</span>filePath <span class="token operator">=</span> <span class="token interpolation-string"><span class="token string">"updates/</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">$&#123;</span><span class="token expression">newJarName</span><span class="token interpolation-punctuation punctuation">&#125;</span></span><span class="token string">"</span></span>        <span class="token function">NexusUpload</span><span class="token punctuation">(</span><span class="token punctuation">)</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span class="token keyword">def</span> <span class="token function">main</span><span class="token punctuation">(</span>uploadType<span class="token punctuation">)</span><span class="token punctuation">&#123;</span>    <span class="token function">GetGav</span><span class="token punctuation">(</span><span class="token punctuation">)</span>    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token interpolation-string"><span class="token string">"</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">$&#123;</span><span class="token expression">uploadType</span><span class="token interpolation-punctuation punctuation">&#125;</span></span><span class="token string">"</span></span> <span class="token operator">==</span> <span class="token interpolation-string"><span class="token string">"maven"</span></span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>        <span class="token function">MavenUpload</span><span class="token punctuation">(</span><span class="token punctuation">)</span>    <span class="token punctuation">&#125;</span> <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token interpolation-string"><span class="token string">"</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">$&#123;</span><span class="token expression">uploadType</span><span class="token interpolation-punctuation punctuation">&#125;</span></span><span class="token string">"</span></span> <span class="token operator">==</span> <span class="token interpolation-string"><span class="token string">"nexus"</span></span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        env<span class="token punctuation">.</span>repoName <span class="token operator">=</span> <span class="token interpolation-string"><span class="token string">"maven-hostd"</span></span>        env<span class="token punctuation">.</span>filePath <span class="token operator">=</span> <span class="token interpolation-string"><span class="token string">"target/</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">$&#123;</span><span class="token expression">jarName</span><span class="token interpolation-punctuation punctuation">&#125;</span></span><span class="token string">"</span></span>        <span class="token function">NexusUpload</span><span class="token punctuation">(</span><span class="token punctuation">)</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h1 id="nexusapi-groovy"><a href="#nexusapi-groovy" class="headerlink" title="nexusapi.groovy"></a>nexusapi.groovy</h1><pre class="line-numbers language-none"><code class="language-none">package org.devops&#x2F;&#x2F;å°è£…HTTPdef HttpReq(reqType,reqUrl,reqBody)&#123;    def sonarServer &#x3D; &quot;http:&#x2F;&#x2F;192.168.1.200:30083&#x2F;service&#x2F;rest&quot;       result &#x3D; httpRequest authentication: &#39;nexus-admin-user&#39;,            httpMode: reqType,             contentType: &quot;APPLICATION_JSON&quot;,            consoleLogResponseBody: true,            ignoreSslErrors: true,             requestBody: reqBody,            url: &quot;$&#123;sonarServer&#125;&#x2F;$&#123;reqUrl&#125;&quot;,            quiet: true        return result&#125;&#x2F;&#x2F;è·å–ä»“åº“ä¸­æ‰€æœ‰ç»„ä»¶def GetRepoComponents(repoName)&#123;    apiUrl &#x3D; &quot;&#x2F;v1&#x2F;components?repository&#x3D;$&#123;repoName&#125;&quot;    response &#x3D; HttpReq(&quot;GET&quot;,apiUrl,&#39;&#39;)        response &#x3D; readJSON text: &quot;&quot;&quot;$&#123;response.content&#125;&quot;&quot;&quot;    println(response[&quot;items&quot;].size())        return response[&quot;items&quot;]&#125;&#x2F;&#x2F;è·å–å•ä»¶ç»„ä»¶def GetComponentsId(repoName,groupId,artifactId,version)&#123;    println(&quot;è·å–å•ä»¶ç»„ä»¶ID&quot;)    result &#x3D; GetRepoComponents(repoName)         for (component in result)&#123;                if (component[&quot;group&quot;] &#x3D;&#x3D; groupId &amp;&amp; component[&quot;name&quot;] &#x3D;&#x3D; artifactId &amp;&amp; component[&quot;version&quot;] &#x3D;&#x3D; version  )&#123;                        componentId &#x3D; component[&quot;id&quot;]                        return componentId        &#125;    &#125;        println(componentId)&#125;&#x2F;&#x2F;è·å–ç»„ä»¶ä¿¡æ¯def GetSingleComponents(repoName,groupId,artifactId,version)&#123;    println(&quot;è·å–å•ä»¶ç»„ä»¶ä¿¡æ¯&quot;)    componentId &#x3D; GetComponentsId(repoName,groupId,artifactId,version)    apiUrl &#x3D; &quot;&#x2F;v1&#x2F;components&#x2F;$&#123;componentId&#125;&quot;    response &#x3D; HttpReq(&quot;GET&quot;,apiUrl,&#39;&#39;)        response &#x3D; readJSON text: &quot;&quot;&quot;$&#123;response.content&#125;&quot;&quot;&quot;    println(response[&quot;assets&quot;][&quot;downloadUrl&quot;])&#125;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h1 id="sonarapi-groovy"><a href="#sonarapi-groovy" class="headerlink" title="sonarapi.groovy"></a>sonarapi.groovy</h1><pre class="line-numbers language-groovy" data-language="groovy"><code class="language-groovy"><span class="token keyword">package</span> org<span class="token punctuation">.</span>devops<span class="token comment">//å°è£…HTTP</span><span class="token keyword">def</span> <span class="token function">HttpReq</span><span class="token punctuation">(</span>reqType<span class="token punctuation">,</span>reqUrl<span class="token punctuation">,</span>reqBody<span class="token punctuation">)</span><span class="token punctuation">&#123;</span>    <span class="token keyword">def</span> sonarServer <span class="token operator">=</span> <span class="token interpolation-string"><span class="token string">"http://192.168.1.200:30090/api"</span></span>       result <span class="token operator">=</span> httpRequest authentication<span class="token punctuation">:</span> <span class="token string">'sonar-admin-user'</span><span class="token punctuation">,</span>            httpMode<span class="token punctuation">:</span> reqType<span class="token punctuation">,</span>             contentType<span class="token punctuation">:</span> <span class="token interpolation-string"><span class="token string">"APPLICATION_JSON"</span></span><span class="token punctuation">,</span>            consoleLogResponseBody<span class="token punctuation">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>            ignoreSslErrors<span class="token punctuation">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>             requestBody<span class="token punctuation">:</span> reqBody<span class="token punctuation">,</span>            url<span class="token punctuation">:</span> <span class="token interpolation-string"><span class="token string">"</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">$&#123;</span><span class="token expression">sonarServer</span><span class="token interpolation-punctuation punctuation">&#125;</span></span><span class="token string">/</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">$&#123;</span><span class="token expression">reqUrl</span><span class="token interpolation-punctuation punctuation">&#125;</span></span><span class="token string">"</span></span>            <span class="token comment">//quiet: true</span>        <span class="token keyword">return</span> result<span class="token punctuation">&#125;</span><span class="token comment">//è·å–Sonarè´¨é‡é˜ˆçŠ¶æ€</span><span class="token keyword">def</span> <span class="token function">GetProjectStatus</span><span class="token punctuation">(</span>projectName<span class="token punctuation">)</span><span class="token punctuation">&#123;</span>    apiUrl <span class="token operator">=</span> <span class="token interpolation-string"><span class="token string">"project_branches/list?project=</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">$&#123;</span><span class="token expression">projectName</span><span class="token interpolation-punctuation punctuation">&#125;</span></span><span class="token string">"</span></span>    response <span class="token operator">=</span> <span class="token function">HttpReq</span><span class="token punctuation">(</span><span class="token interpolation-string"><span class="token string">"GET"</span></span><span class="token punctuation">,</span>apiUrl<span class="token punctuation">,</span><span class="token string">''</span><span class="token punctuation">)</span>        response <span class="token operator">=</span> readJSON text<span class="token punctuation">:</span> <span class="token interpolation-string"><span class="token string">"""</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">$&#123;</span><span class="token expression">response<span class="token punctuation">.</span>content</span><span class="token interpolation-punctuation punctuation">&#125;</span></span><span class="token string">"""</span></span>    result <span class="token operator">=</span> response<span class="token punctuation">[</span><span class="token interpolation-string"><span class="token string">"branches"</span></span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token interpolation-string"><span class="token string">"status"</span></span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token interpolation-string"><span class="token string">"qualityGateStatus"</span></span><span class="token punctuation">]</span>        <span class="token comment">//println(response)</span>       <span class="token keyword">return</span> result<span class="token punctuation">&#125;</span><span class="token comment">//æœç´¢Sonaré¡¹ç›®</span><span class="token keyword">def</span> <span class="token function">SerarchProject</span><span class="token punctuation">(</span>projectName<span class="token punctuation">)</span><span class="token punctuation">&#123;</span>    apiUrl <span class="token operator">=</span> <span class="token interpolation-string"><span class="token string">"projects/search?projects=</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">$&#123;</span><span class="token expression">projectName</span><span class="token interpolation-punctuation punctuation">&#125;</span></span><span class="token string">"</span></span>    response <span class="token operator">=</span> <span class="token function">HttpReq</span><span class="token punctuation">(</span><span class="token interpolation-string"><span class="token string">"GET"</span></span><span class="token punctuation">,</span>apiUrl<span class="token punctuation">,</span><span class="token string">''</span><span class="token punctuation">)</span>    response <span class="token operator">=</span> readJSON text<span class="token punctuation">:</span> <span class="token interpolation-string"><span class="token string">"""</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">$&#123;</span><span class="token expression">response<span class="token punctuation">.</span>content</span><span class="token interpolation-punctuation punctuation">&#125;</span></span><span class="token string">"""</span></span>    result <span class="token operator">=</span> response<span class="token punctuation">[</span><span class="token interpolation-string"><span class="token string">"paging"</span></span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token interpolation-string"><span class="token string">"total"</span></span><span class="token punctuation">]</span>    <span class="token keyword">if</span><span class="token punctuation">(</span>result<span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">==</span> <span class="token interpolation-string"><span class="token string">"0"</span></span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>       <span class="token keyword">return</span> <span class="token interpolation-string"><span class="token string">"false"</span></span>    <span class="token punctuation">&#125;</span> <span class="token keyword">else</span> <span class="token punctuation">&#123;</span>       <span class="token keyword">return</span> <span class="token interpolation-string"><span class="token string">"true"</span></span>    <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span class="token comment">//åˆ›å»ºSonaré¡¹ç›®</span><span class="token keyword">def</span> <span class="token function">CreateProject</span><span class="token punctuation">(</span>projectName<span class="token punctuation">)</span><span class="token punctuation">&#123;</span>    apiUrl <span class="token operator">=</span>  <span class="token interpolation-string"><span class="token string">"projects/create?name=</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">$&#123;</span><span class="token expression">projectName</span><span class="token interpolation-punctuation punctuation">&#125;</span></span><span class="token string">&amp;project=</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">$&#123;</span><span class="token expression">projectName</span><span class="token interpolation-punctuation punctuation">&#125;</span></span><span class="token string">"</span></span>    response <span class="token operator">=</span> <span class="token function">HttpReq</span><span class="token punctuation">(</span><span class="token interpolation-string"><span class="token string">"POST"</span></span><span class="token punctuation">,</span>apiUrl<span class="token punctuation">,</span><span class="token string">''</span><span class="token punctuation">)</span>    <span class="token function">println</span><span class="token punctuation">(</span>response<span class="token punctuation">)</span><span class="token punctuation">&#125;</span><span class="token comment">//é…ç½®é¡¹ç›®è´¨é‡è§„åˆ™</span><span class="token keyword">def</span> <span class="token function">ConfigQualityProfiles</span><span class="token punctuation">(</span>projectName<span class="token punctuation">,</span>lang<span class="token punctuation">,</span>qpname<span class="token punctuation">)</span><span class="token punctuation">&#123;</span>    apiUrl <span class="token operator">=</span> <span class="token interpolation-string"><span class="token string">"qualityprofiles/add_project?language=</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">$&#123;</span><span class="token expression">lang</span><span class="token interpolation-punctuation punctuation">&#125;</span></span><span class="token string">&amp;project=</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">$&#123;</span><span class="token expression">projectName</span><span class="token interpolation-punctuation punctuation">&#125;</span></span><span class="token string">&amp;qualityProfile=</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">$&#123;</span><span class="token expression">qpname</span><span class="token interpolation-punctuation punctuation">&#125;</span></span><span class="token string">"</span></span>    response <span class="token operator">=</span> <span class="token function">HttpReq</span><span class="token punctuation">(</span><span class="token interpolation-string"><span class="token string">"POST"</span></span><span class="token punctuation">,</span>apiUrl<span class="token punctuation">,</span><span class="token string">''</span><span class="token punctuation">)</span>    <span class="token function">println</span><span class="token punctuation">(</span>response<span class="token punctuation">)</span><span class="token punctuation">&#125;</span><span class="token comment">//è·å–è´¨é‡é˜ˆID</span><span class="token keyword">def</span> <span class="token function">GetQualtyGateId</span><span class="token punctuation">(</span>gateName<span class="token punctuation">)</span><span class="token punctuation">&#123;</span>    apiUrl<span class="token operator">=</span> <span class="token interpolation-string"><span class="token string">"qualitygates/show?name=</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">$&#123;</span><span class="token expression">gateName</span><span class="token interpolation-punctuation punctuation">&#125;</span></span><span class="token string">"</span></span>    response <span class="token operator">=</span> <span class="token function">HttpReq</span><span class="token punctuation">(</span><span class="token interpolation-string"><span class="token string">"GET"</span></span><span class="token punctuation">,</span>apiUrl<span class="token punctuation">,</span><span class="token string">''</span><span class="token punctuation">)</span>    response <span class="token operator">=</span> readJSON text<span class="token punctuation">:</span> <span class="token interpolation-string"><span class="token string">"""</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">$&#123;</span><span class="token expression">response<span class="token punctuation">.</span>content</span><span class="token interpolation-punctuation punctuation">&#125;</span></span><span class="token string">"""</span></span>    result <span class="token operator">=</span> response<span class="token punctuation">[</span><span class="token interpolation-string"><span class="token string">"id"</span></span><span class="token punctuation">]</span>        <span class="token keyword">return</span> result<span class="token punctuation">&#125;</span><span class="token comment">//é…ç½®é¡¹ç›®è´¨é‡é˜ˆ</span><span class="token keyword">def</span> <span class="token function">ConfigQualityGates</span><span class="token punctuation">(</span>projectName<span class="token punctuation">,</span>gateName<span class="token punctuation">)</span><span class="token punctuation">&#123;</span>    gateId <span class="token operator">=</span> <span class="token function">GetQualtyGateId</span><span class="token punctuation">(</span>gateName<span class="token punctuation">)</span>    apiUrl <span class="token operator">=</span> <span class="token interpolation-string"><span class="token string">"qualitygates/select?gateId=</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">$&#123;</span><span class="token expression">gateId</span><span class="token interpolation-punctuation punctuation">&#125;</span></span><span class="token string">&amp;projectKey=</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">$&#123;</span><span class="token expression">projectName</span><span class="token interpolation-punctuation punctuation">&#125;</span></span><span class="token string">"</span></span>    response <span class="token operator">=</span> <span class="token function">HttpReq</span><span class="token punctuation">(</span><span class="token interpolation-string"><span class="token string">"POST"</span></span><span class="token punctuation">,</span>apiUrl<span class="token punctuation">,</span><span class="token string">''</span><span class="token punctuation">)</span>    <span class="token function">println</span><span class="token punctuation">(</span>response<span class="token punctuation">)</span><span class="token function">println</span><span class="token punctuation">(</span>response<span class="token punctuation">)</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h1 id="sonarqube-groovy"><a href="#sonarqube-groovy" class="headerlink" title="sonarqube.groovy"></a>sonarqube.groovy</h1><pre class="line-numbers language-groovy" data-language="groovy"><code class="language-groovy"><span class="token keyword">package</span> org<span class="token punctuation">.</span>devops<span class="token comment">//scan</span><span class="token keyword">def</span> <span class="token function">SonarScan</span><span class="token punctuation">(</span>sonarServer<span class="token punctuation">,</span>projectName<span class="token punctuation">,</span>projectDesc<span class="token punctuation">,</span>projectPath<span class="token punctuation">,</span>branchName<span class="token punctuation">)</span><span class="token punctuation">&#123;</span>        <span class="token comment">//å®šä¹‰æœåŠ¡å™¨åˆ—è¡¨</span>    <span class="token keyword">def</span> servers <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token interpolation-string"><span class="token string">"test"</span></span><span class="token punctuation">:</span><span class="token interpolation-string"><span class="token string">"sonarqube-test"</span></span><span class="token punctuation">,</span><span class="token interpolation-string"><span class="token string">"prod"</span></span><span class="token punctuation">:</span><span class="token interpolation-string"><span class="token string">"sonarqube-prod"</span></span><span class="token punctuation">]</span>            <span class="token function">withSonarQubeEnv</span><span class="token punctuation">(</span><span class="token interpolation-string"><span class="token string">"</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">$&#123;</span><span class="token expression">servers<span class="token punctuation">[</span>sonarServer<span class="token punctuation">]</span></span><span class="token interpolation-punctuation punctuation">&#125;</span></span><span class="token string">"</span></span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>        <span class="token keyword">def</span> scannerHome <span class="token operator">=</span> <span class="token interpolation-string"><span class="token string">"/home/jenkins/buildtools/sonar-scanner-3.2.0.1227-linux/"</span></span>        <span class="token comment">//def sonarServer = "http://192.168.1.200:9000"</span>        <span class="token keyword">def</span> sonarDate <span class="token operator">=</span> sh  returnStdout<span class="token punctuation">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span> script<span class="token punctuation">:</span> <span class="token string">'date  +%Y%m%d%H%M%S'</span>        sonarDate <span class="token operator">=</span> sonarDate <span class="token operator">-</span> <span class="token interpolation-string"><span class="token string">"\n"</span></span>                    sh <span class="token interpolation-string"><span class="token string">"""             </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">$&#123;</span><span class="token expression">scannerHome</span><span class="token interpolation-punctuation punctuation">&#125;</span></span><span class="token string">/bin/sonar-scanner -Dsonar.projectKey=</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">$&#123;</span><span class="token expression">projectName</span><span class="token interpolation-punctuation punctuation">&#125;</span></span><span class="token string"> \            -Dsonar.projectName=</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">$&#123;</span><span class="token expression">projectName</span><span class="token interpolation-punctuation punctuation">&#125;</span></span><span class="token string"> -Dsonar.projectVersion=</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">$&#123;</span><span class="token expression">sonarDate</span><span class="token interpolation-punctuation punctuation">&#125;</span></span><span class="token string"> -Dsonar.ws.timeout=30 \            -Dsonar.projectDescription=</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">$&#123;</span><span class="token expression">projectDesc</span><span class="token interpolation-punctuation punctuation">&#125;</span></span><span class="token string"> -Dsonar.links.homepage=http://www.baidu.com \            -Dsonar.sources=</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">$&#123;</span><span class="token expression">projectPath</span><span class="token interpolation-punctuation punctuation">&#125;</span></span><span class="token string"> -Dsonar.sourceEncoding=UTF-8 -Dsonar.java.binaries=target/classes \            -Dsonar.java.test.binaries=target/test-classes -Dsonar.java.surefire.report=target/surefire-reports  -Dsonar.branch.name=</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">$&#123;</span><span class="token expression">branchName</span><span class="token interpolation-punctuation punctuation">&#125;</span></span><span class="token string"> -X        """</span></span>    <span class="token punctuation">&#125;</span>        <span class="token comment">//def qg = waitForQualityGate()</span>    <span class="token comment">//if (qg.status != 'OK') &#123;</span>        <span class="token comment">//error "Pipeline aborted due to quality gate failure: $&#123;qg.status&#125;"</span>    <span class="token comment">//&#125;</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h1 id="tomail-groovy"><a href="#tomail-groovy" class="headerlink" title="tomail.groovy"></a>tomail.groovy</h1><pre class="line-numbers language-groovy" data-language="groovy"><code class="language-groovy">Jenkins<span class="token punctuation">.</span>instance<span class="token punctuation">.</span><span class="token function">getItemByFullName</span><span class="token punctuation">(</span>demo<span class="token operator">-</span>maven<span class="token operator">-</span>service<span class="token operator">-</span>PUSH<span class="token punctuation">)</span><span class="token punctuation">.</span>builds<span class="token punctuation">.</span>findAll <span class="token punctuation">&#123;</span>  it<span class="token punctuation">.</span>number <span class="token operator">&lt;=</span> <span class="token number">79</span><span class="token punctuation">&#125;</span><span class="token punctuation">.</span>each <span class="token punctuation">&#123;</span>  it<span class="token punctuation">.</span><span class="token function">delete</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre><h1 id="tools-groovy"><a href="#tools-groovy" class="headerlink" title="tools.groovy"></a>tools.groovy</h1><pre class="line-numbers language-groovy" data-language="groovy"><code class="language-groovy"><span class="token keyword">package</span> org<span class="token punctuation">.</span>devops<span class="token comment">//æ ¼å¼åŒ–è¾“å‡º</span><span class="token keyword">def</span> <span class="token function">PrintMes</span><span class="token punctuation">(</span>value<span class="token punctuation">,</span>color<span class="token punctuation">)</span><span class="token punctuation">&#123;</span>    colors <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token string">'red'</span>   <span class="token punctuation">:</span> <span class="token interpolation-string"><span class="token string">"\033[40;31m >>>>>>>>>>></span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">$&#123;</span><span class="token expression">value</span><span class="token interpolation-punctuation punctuation">&#125;</span></span><span class="token string">&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt; \033[0m"</span></span><span class="token punctuation">,</span>              <span class="token string">'blue'</span>  <span class="token punctuation">:</span> <span class="token interpolation-string"><span class="token string">"\033[47;34m </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">$&#123;</span><span class="token expression">value</span><span class="token interpolation-punctuation punctuation">&#125;</span></span><span class="token string"> \033[0m"</span></span><span class="token punctuation">,</span>              <span class="token string">'green'</span> <span class="token punctuation">:</span> <span class="token interpolation-string"><span class="token string">"[1;32m>>>>>>>>>></span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">$&#123;</span><span class="token expression">value</span><span class="token interpolation-punctuation punctuation">&#125;</span></span><span class="token string">>>>>>>>>>>[m"</span></span><span class="token punctuation">,</span>              <span class="token string">'green1'</span> <span class="token punctuation">:</span> <span class="token interpolation-string"><span class="token string">"\033[40;32m >>>>>>>>>>></span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">$&#123;</span><span class="token expression">value</span><span class="token interpolation-punctuation punctuation">&#125;</span></span><span class="token string">&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt; \033[0m"</span></span> <span class="token punctuation">]</span>    <span class="token function">ansiColor</span><span class="token punctuation">(</span><span class="token string">'xterm'</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token function">println</span><span class="token punctuation">(</span>colors<span class="token punctuation">[</span>color<span class="token punctuation">]</span><span class="token punctuation">)</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>]]></content>
      
      
      <categories>
          
          <category> Devops </category>
          
      </categories>
      
      
        <tags>
            
            <tag> jenkins </tag>
            
            <tag> CICD </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>åŸºäºjiraçš„æµæ°´çº¿å®è·µ</title>
      <link href="/posts/64396.html"/>
      <url>/posts/64396.html</url>
      
        <content type="html"><![CDATA[<h2 id="æ•´ä½“æ¶æ„è®¾è®¡å›¾"><a href="#æ•´ä½“æ¶æ„è®¾è®¡å›¾" class="headerlink" title="æ•´ä½“æ¶æ„è®¾è®¡å›¾"></a>æ•´ä½“æ¶æ„è®¾è®¡å›¾</h2><p><img src="/1659698071406.png" alt="1659698071406"></p><h3 id="jiraç«¯è§„åˆ’"><a href="#jiraç«¯è§„åˆ’" class="headerlink" title="jiraç«¯è§„åˆ’"></a>jiraç«¯è§„åˆ’</h3><ul><li>åˆ›å»ºä»»åŠ¡ã€æ•…äº‹ï¼ˆå¯¹åº”gitlabåˆ†æ”¯ï¼‰<ul><li>åˆ›å»ºjira é—®é¢˜ â€“&gt;è‡ªåŠ¨åˆ›å»ºç»™gitlabåˆ†æ”¯</li></ul></li><li>åˆ›å»ºå‘å¸ƒ(å¯¹åº”ç‰ˆæœ¬æ–‡ä»¶)</li></ul><h3 id="gitlabç«¯è§„åˆ’"><a href="#gitlabç«¯è§„åˆ’" class="headerlink" title="gitlabç«¯è§„åˆ’"></a>gitlabç«¯è§„åˆ’</h3><ul><li><p>æäº¤ä»£ç  â€“&gt;å‡ºå‘jenkinsæäº¤å…­çº¿</p></li><li><p>åˆå¹¶åˆ†æ”¯ â€“&gt; å½“æµæ°´çº¿æˆåŠŸåå¯ä»¥åˆå¹¶</p></li><li><p>åˆ›å»ºç‰ˆæœ¬åº“ï¼ˆå­˜æ”¾å‘å¸ƒç‰ˆæœ¬ï¼‰</p><p><img src="/1659698514188.png" alt="1659698514188"></p></li></ul><p>jenkins ç«¯è§„åˆ’</p><ul><li><p>æäº¤æµæ°´çº¿</p></li><li><p>uatæµ‹è¯•æµæ°´çº¿</p><ul><li>ä»£ç â€“&gt;ç¼–è¯‘â€“&gt;å•ä¾§â€“&gt;æ‰“åŒ…â€“&gt;æ‰«æâ€“&gt;è‡ªåŠ¨åŒ–æµ‹è¯•â€“&gt;ç”Ÿæˆé•œåƒâ€“&gt;å‘å¸ƒâ€“&gt;ç”Ÿæˆç‰ˆæœ¬â€“&gt;é‚®ä»¶é€šçŸ¥</li></ul></li><li><p>åˆ¶å“æ™‹çº§&#x2F;ç‰ˆæœ¬æ›´æ–°æµæ°´çº¿</p><ul><li>é€‰æ‹©æ™‹çº§ç­–ç•¥â€“&gt; æ ¹æ®ç‰ˆæœ¬æ–‡ä»¶æ™‹çº§â€“&gt;ç”Ÿæˆæ–°ç‰ˆæœ¬æ–‡ä»¶</li></ul></li><li><p>stag&#x2F;prodå‘å¸ƒæµæ°´çº¿</p><ul><li>é€‰æ‹©ç‰ˆæœ¬å·â€“&gt;è·å–ç‰ˆæœ¬æ–‡ä»¶â€“&gt;å‘å¸ƒåº”ç”¨</li></ul></li><li><p>jira é›†æˆæµæ°´çº¿</p><ul><li>jira ç‰ˆæœ¬å‘å¸ƒâ€“&gt;åˆ†æ”¯åˆå¹¶â€“&gt;æ¸…ç†åˆ†æ”¯</li><li>åˆ›å»ºä»»åŠ¡ã€æ•…äº‹(å¯¹åº”gitlabåˆ†æ”¯ï¼‰<ul><li>åˆ›å»ºjiraé—®é¢˜ â€“&gt;è‡ªåŠ¨åˆ›å»ºgitlabåˆ†æ”¯</li></ul></li><li>åˆ›å»ºç‰ˆæœ¬ï¼ˆå¯¹åº”ç‰ˆæœ¬æ–‡ä»¶ï¼‰<ul><li>åˆ›å»ºreleaseâ€“&gt;è·å–åº”ç”¨éƒ¨ç½²ymlæ–‡ä»¶ â€“&gt;ä¸Šä¼ åˆ°git</li></ul></li><li>ç‰ˆæœ¬å‘å¸ƒï¼ˆæ¸…ç†åˆ†æ”¯ï¼‰<ul><li>ç‰ˆæœ¬å‘å¸ƒâ€“&gt;å‡ºå‘releaseåˆ†æ”¯åˆ°masteråˆ†æ”¯åˆå¹¶â€“&gt;æ¸…ç†ç‰¹æ€§åˆ†æ”¯</li></ul></li></ul><h3 id="å¼€å§‹å®è·µ"><a href="#å¼€å§‹å®è·µ" class="headerlink" title="å¼€å§‹å®è·µ"></a>å¼€å§‹å®è·µ</h3><ul><li><p>åˆ›å»ºGitlabç‰ˆæœ¬åº“ï¼Œç”¨äºå­˜æ”¾k8såº”ç”¨éƒ¨ç½²æ–‡ä»¶ã€‚</p></li><li><p>æ–°å»ºdemo-k8s-serviceé¡¹ç›®ï¼Œå­˜æ”¾k8sçš„ç‰ˆæœ¬æ§åˆ¶æ–‡ä»¶åŒ…å«ä»¥ä¸‹ä¸‰ä¸ªæ–‡ä»¶</p><ul><li>prod</li></ul></li><li><p>stag</p></li><li><p>uat</p></li><li><p>Jira webhookä¸­é…ç½® æ–°å»ºç‰ˆæœ¬è§¦å‘äº‹ä»¶ã€‚</p><p><img src="/1659700922280.png" alt="1659700922280"></p></li><li><p>Kubernetesä¸­åˆ›å»ºä¸‰ä¸ªNSï¼Œç”¨äºæ¨¡æ‹Ÿä¸åŒçš„é›†ç¾¤ã€‚</p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token builtin class-name">cd</span> k8skubectl create <span class="token parameter variable">-f</span> ns.yaml<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre></li></ul><pre class="line-numbers language-none"><code class="language-none">è·å–k8sçš„tokenâ€‹&#96;&#96;&#96;shell  kubectl describe secrets -n kube-system $ (kubectl -n kube-system get secret | awk &#39;&#x2F;dashboard-admin&#x2F;(print $1ï½ï¼Œ)  éªŒè¯curl -heade &quot;Authorizationï¼šBearer$TOKEN&quot;--insecure -X GET httpsï¼š&#x2F;&#x2F;192.168.1.200ï¼š6443&#x2F;api&#x2F;v1&#x2F;nodes<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>  <img src="/1659710480228.png" alt="1659710480228"></p><ul><li><p>jiraä¸­æ–°å»ºä¸€ä¸ªç‰ˆæœ¬éªŒè¯jenkinsè§¦å‘å™¨</p><p><img src="/1659700940166.png" alt="1659700940166"></p></li><li><p>å…±äº«åº“åˆ†è£…k8s</p><ul><li>æ–°å»ºæ–‡ä»¶kubernetes.groovy</li></ul></li><li><p>åˆ†è£…httpè¯·æ±‚ï¼ˆtokenã€acceptã€content-typeä¸ºyamlï¼‰</p><ul><li>åˆ›å»ºè·å–deploymetsçš„æ–¹æ³•</li></ul></li><li><p>jenkinsfileä¸­è°ƒç”¨</p></li><li><p>æ–°å»ºgitlabapiæ–‡ä»¶åˆ†è£…gitlab å¯¹åº”çš„apiæ–¹æ³•</p></li><li><p>è·å–k8sæ–‡ä»¶ä¸Šä¼ åˆ°gitlab</p></li><li><p>ä¸Šçº¿å®Œæˆè§¦å‘åˆ†æ”¯åˆå¹¶æµ‹è¯•</p></li><li><p>æäº¤æµæ°´çº¿æµ‹è¯•</p><ul><li><p>gitlabé…ç½®webhook</p></li><li><p>jenkinsä¸­é…ç½®</p></li><li><p>æ–°å»ºgitlab.jenkinsfile</p><pre class="line-numbers language-none"><code class="language-none">#!groovy@Library(&#39;jenkinslibrary@master&#39;) _&#x2F;&#x2F;func from shareibrarydef build &#x3D; new org.devops.build()def deploy &#x3D; new org.devops.deploy()def tools &#x3D; new org.devops.tools()def gitlab &#x3D; new org.devops.gitlab()def toemail &#x3D; new org.devops.toemail()def sonar &#x3D; new org.devops.sonarqube()def sonarapi &#x3D; new org.devops.sonarapi()def artifactory &#x3D; new org.devops.artifactory() def runOpts&#x2F;&#x2F;envString buildType &#x3D; &quot;$&#123;env.buildType&#125;&quot;String buildShell &#x3D; &quot;$&#123;env.buildShell&#125;&quot;String deployHosts &#x3D; &quot;$&#123;env.deployHosts&#125;&quot;String srcUrl &#x3D; &quot;$&#123;env.srcUrl&#125;&quot;String branchName &#x3D; &quot;$&#123;env.branchName&#125;&quot;branchName &#x3D; branch - &quot;refs&#x2F;heads&#x2F;&quot;currentBuild.description &#x3D; &quot;Trigger by $&#123;userName&#125; $&#123;branch&#125;&quot;gitlab.ChangeCommitStatus(projectId,commitSha,&quot;running&quot;)    &#x2F;&#x2F;pipelinepipeline&#123;    agent &#123; node &#123; label &quot;build&quot;&#125;&#125;            stages&#123;        stage(&quot;CheckOut&quot;)&#123;            steps&#123;                script&#123;                                                           println(&quot;$&#123;branchName&#125;&quot;)                                    tools.PrintMes(&quot;è·å–ä»£ç &quot;,&quot;green&quot;)                    checkout([$class: &#39;GitSCM&#39;, branches: [[name: &quot;$&#123;branchName&#125;&quot;]],                                       doGenerateSubmoduleConfigurations: false,                                       extensions: [],                                       submoduleCfg: [],                                       userRemoteConfigs: [[credentialsId: &#39;gitlab-admin-user&#39;, url: &quot;$&#123;srcUrl&#125;&quot;]]])                &#125;            &#125;        &#125;                stage(&quot;Build&amp;Test&quot;)&#123;            steps&#123;                script&#123;                    tools.PrintMes(&quot;æ‰§è¡Œæ‰“åŒ…&quot;,&quot;green&quot;)                    artifactory.main(buildType,buildShell)                &#125;            &#125;       &#125;                      stage(&quot;QA&quot;)&#123;            steps &#123;                script&#123;                    tools.PrintMes(&quot;æœç´¢é¡¹ç›®&quot;,&quot;green&quot;)                    result &#x3D; sonarapi.SerarchProject(&quot;$&#123;JOB_NAME&#125;&quot;)                    println(result)                                        if (result &#x3D;&#x3D; &quot;false&quot;)&#123;                        println(&quot;$&#123;JOB_NAME&#125;---é¡¹ç›®ä¸å­˜åœ¨,å‡†å¤‡åˆ›å»ºé¡¹ç›®---&gt; $&#123;JOB_NAME&#125;ï¼&quot;)                        sonarapi.CreateProject(&quot;$&#123;JOB_NAME&#125;&quot;)                    &#125; else &#123;                        println(&quot;$&#123;JOB_NAME&#125;---é¡¹ç›®å·²å­˜åœ¨ï¼&quot;)                    &#125;                                        tools.PrintMes(&quot;é…ç½®é¡¹ç›®è´¨é‡è§„åˆ™&quot;,&quot;green&quot;)                    qpName&#x3D;&quot;$&#123;JOB_NAME&#125;&quot;.split(&quot;-&quot;)[0]   &#x2F;&#x2F;Sonar%20way                    sonarapi.ConfigQualityProfiles(&quot;$&#123;JOB_NAME&#125;&quot;,&quot;java&quot;,qpName)                                    tools.PrintMes(&quot;é…ç½®è´¨é‡é˜ˆ&quot;,&quot;green&quot;)                    sonarapi.ConfigQualityGates(&quot;$&#123;JOB_NAME&#125;&quot;,qpName)                                    tools.PrintMes(&quot;ä»£ç æ‰«æ&quot;,&quot;green&quot;)                    sonar.SonarScan(&quot;test&quot;,&quot;$&#123;JOB_NAME&#125;&quot;,&quot;$&#123;JOB_NAME&#125;&quot;,&quot;src&quot;)                                        sleep 30                    tools.PrintMes(&quot;è·å–æ‰«æç»“æœ&quot;,&quot;green&quot;)                    result &#x3D; sonarapi.GetProjectStatus(&quot;$&#123;JOB_NAME&#125;&quot;)                                                            println(result)                    if (result.toString() &#x3D;&#x3D; &quot;ERROR&quot;)&#123;                        toemail.Email(&quot;ä»£ç è´¨é‡é˜ˆé”™è¯¯ï¼è¯·åŠæ—¶ä¿®å¤ï¼&quot;,userEmail)                        error &quot; ä»£ç è´¨é‡é˜ˆé”™è¯¯ï¼è¯·åŠæ—¶ä¿®å¤ï¼&quot;                                                                    &#125; else &#123;                        println(result)                    &#125;                                                &#125;           &#125;       &#125;    &#125;    post &#123;        always&#123;            script&#123;                println(&quot;always&quot;)            &#125;        &#125;                success&#123;            script&#123;                println(&quot;success&quot;)                                gitlab.ChangeCommitStatus(projectId,commitSha,&quot;success&quot;)                                toemail.Email(&quot;æµæ°´çº¿æˆåŠŸ&quot;,userEmail)                        &#125;                &#125;        failure&#123;            script&#123;                println(&quot;failure&quot;)                                gitlab.ChangeCommitStatus(projectId,commitSha,&quot;failed&quot;)                                toemail.Email(&quot;æµæ°´çº¿å¤±è´¥äº†ï¼&quot;,userEmail)            &#125;        &#125;                aborted&#123;            script&#123;                println(&quot;aborted&quot;)                gitlab.ChangeCommitStatus(projectId,commitSha,&quot;canceled&quot;)               toemail.Email(&quot;æµæ°´çº¿è¢«å–æ¶ˆäº†ï¼&quot;,userEmail)            &#125;                &#125;        &#125;        &#125;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></li></ul></li><li><p>jekninsfileä¸­è°ƒç”¨</p><ul><li>æ–°å»ºjira.jenkinsfile</li></ul><pre class="line-numbers language-jenkinsfile" data-language="jenkinsfile"><code class="language-jenkinsfile">#!groovy@Library(&#39;jenkinslibrary&#39;) _def gitlab &#x3D; new org.devops.gitlab()def jira &#x3D; new org.devops.jira()def k8s &#x3D; new org.devops.kubernetes()pipeline &#123;    agent &#123; node &#123; label &quot;master&quot;&#125;&#125;    triggers &#123;        GenericTrigger( causeString: &#39;Trigger By Jira Server --&gt;&gt;&gt;&gt;&gt; Generic Cause&#39;,                         genericRequestVariables: [[key: &#39;projectKey&#39;, regexpFilter: &#39;&#39;]],                         genericVariables: [[defaultValue: &#39;&#39;, key: &#39;webHookData&#39;, regexpFilter: &#39;&#39;, value: &#39;$&#39;]],                         printContributedVariables: true,                         printPostContent: true,                         regexpFilterExpression: &#39;&#39;,                         regexpFilterText: &#39;&#39;,                         silentResponse: true,                         token: &quot;$&#123;JOB_NAME&#125;&quot;        )    &#125;    stages&#123;        stage(&quot;FileterData&quot;)&#123;            steps&#123;                script&#123;                    response &#x3D; readJSON text: &quot;&quot;&quot;$&#123;webHookData&#125;&quot;&quot;&quot;                    println(response)                    env.eventType &#x3D; response[&quot;webhookEvent&quot;]                    switch(eventType) &#123;                        case &quot;jira:version_created&quot;:                            env.versionName &#x3D; response[&quot;version&quot;][&quot;name&quot;]                            currentBuild.description &#x3D; &quot; Trigger by  $&#123;eventType&#125; $&#123;versionName&#125; &quot;                            break                        case [&quot;jira:issue_created&quot; , &quot;jira:issue_updated&quot; ]:                            env.issueName &#x3D; response[&#39;issue&#39;][&#39;key&#39;]                            env.userName &#x3D; response[&#39;user&#39;][&#39;name&#39;]                            env.moduleNames &#x3D; response[&#39;issue&#39;][&#39;fields&#39;][&#39;components&#39;]                            env.fixVersion &#x3D; response[&#39;issue&#39;][&#39;fields&#39;][&#39;fixVersions&#39;]                            currentBuild.description &#x3D; &quot; Trigger by $&#123;userName&#125; $&#123;eventType&#125; $&#123;issueName&#125; &quot;                            break                        &#x2F;*case &quot;jira:issue_updated&quot;:                            env.issueName &#x3D; response[&#39;issue&#39;][&#39;key&#39;]                            env.userName &#x3D; response[&#39;user&#39;][&#39;name&#39;]                            env.moduleNames &#x3D; response[&#39;issue&#39;][&#39;fields&#39;][&#39;components&#39;]                            env.fixVersion &#x3D; response[&#39;issue&#39;][&#39;fields&#39;][&#39;fixVersions&#39;]                            currentBuild.description &#x3D; &quot; Trigger by $&#123;userName&#125; $&#123;eventType&#125; $&#123;issueName&#125; &quot;                            break*&#x2F;                                                    case &quot;jira:version_released&quot;:                            env.versionName &#x3D; response[&quot;version&quot;][&quot;name&quot;]                            currentBuild.description &#x3D; &quot; Trigger by  $&#123;eventType&#125; $&#123;versionName&#125; &quot;                            break                        default:                            println(&quot;hello&quot;)                    &#125;                &#125;            &#125;        &#125;                &#x2F;*stage(&quot;CreateVersionFile&quot;)&#123;            when &#123;                environment name: &#39;eventType&#39;, value: &#39;jira:version_created&#39;             &#125;                        steps&#123;                script&#123;                    &#x2F;&#x2F;è·å–K8sæ–‡ä»¶                    response &#x3D; k8s.GetDeployment(&quot;demo-uat&quot;,&quot;demoapp&quot;)                    response &#x3D; response.content                    &#x2F;&#x2F;æ–‡ä»¶è½¬æ¢                    base64Content &#x3D; response.bytes.encodeBase64().toString()                   &#x2F;&#x2F;ä¸Šä¼ æ–‡ä»¶                   gitlab.CreateRepoFile(7,&quot;demo-uat%2f$&#123;versionName&#125;-uat.yaml&quot;,base64Content)                &#125;                        &#125;        &#125;                stage(&quot;DeleteBranch&quot;)&#123;            when &#123;                environment name: &#39;eventType&#39;, value: &#39;jira:version_released&#39;               &#125;                        steps&#123;                script&#123;                    &#x2F;&#x2F;è·å–issuesName                    println(&quot;project%20%3D%20$&#123;projectKey&#125;%20AND%20fixVersion%20%3D%20$&#123;versionName&#125;%20AND%20issuetype%20%3D%20Task&quot;)                    response &#x3D; jira.RunJql(&quot;project%20%3D%20$&#123;projectKey&#125;%20AND%20fixVersion%20%3D%20$&#123;versionName&#125;%20AND%20issuetype%20%3D%20Task&quot;)                                        response &#x3D; readJSON text: &quot;&quot;&quot;$&#123;response.content&#125;&quot;&quot;&quot;                    println(response)                    issues &#x3D; [:]                    for ( issue in response[&#39;issues&#39;])&#123;                        println(issue[&quot;key&quot;])                        println(issue[&quot;fields&quot;][&quot;components&quot;])                        issues[issue[&quot;key&quot;]] &#x3D; []                                                &#x2F;&#x2F;è·å–issueå…³è”çš„æ¨¡å—                        for (component in issue[&quot;fields&quot;][&quot;components&quot;] )&#123;                            issues[issue[&quot;key&quot;]].add(component[&quot;name&quot;])                        &#125;                                        &#125;                                        println(issues)                                                            &#x2F;&#x2F;æœç´¢gitlabåˆ†æ”¯æ˜¯å¦å·²åˆå¹¶ç„¶ååˆ é™¤                                                            for (issue in issues.keySet())&#123;                        for (projectName in issues[issue])&#123;                            repoName &#x3D; projectName.split(&quot;-&quot;)[0]                            projectId &#x3D; gitlab.GetProjectID(repoName, projectName)                                                        try &#123;                                println(&quot;åˆ›å»ºåˆå¹¶è¯·æ±‚  RELEASE-$&#123;versionName&#125;  ---&gt; master&quot;)                                result &#x3D; gitlab.CreateMr(projectId,&quot;RELEASE-$&#123;versionName&#125;&quot;,&quot;master&quot;,&quot;RELEASE-$&#123;versionName&#125;---&gt;master&quot;)                                result &#x3D; readJSON text: &quot;&quot;&quot;$&#123;result&#125;&quot;&quot;&quot;                                mergeId &#x3D; result[&quot;iid&quot;]                                gitlab.AcceptMr(projectId,mergeId)                                                                sleep 15                            &#125; catch(e)&#123;                                println(e)                            &#125;                            response &#x3D; gitlab.SearchProjectBranches(projectId,issue)                                                        println(response[projectId][0][&#39;merged&#39;])                                                        if (response[projectId][0][&#39;merged&#39;] &#x3D;&#x3D; false)&#123;                                println(&quot;$&#123;projectName&#125; --&gt; $&#123;issue&#125; --&gt;æ­¤åˆ†æ”¯æœªåˆå¹¶æš‚æ—¶å¿½ç•¥ï¼&quot;)                            &#125; else &#123;                                println(&quot;$&#123;projectName&#125; --&gt; $&#123;issue&#125; --&gt;æ­¤åˆ†æ”¯å·²åˆå¹¶å‡†å¤‡æ¸…ç†ï¼&quot;)                                gitlab.DeleteBranch(projectId,issue)                            &#125;                                                &#125;                    &#125;                &#125;            &#125;        &#125;*&#x2F;        stage(&quot;CreateBranchOrMR&quot;)&#123;            when &#123;                anyOf &#123;                    environment name: &#39;eventType&#39;, value: &#39;jira:issue_created&#39;   &#x2F;&#x2F;issue åˆ›å»º &#x2F;æ›´æ–°                    environment name: &#39;eventType&#39;, value: &#39;jira:issue_updated&#39;                 &#125;            &#125;            steps&#123;                script&#123;                    def projectIds &#x3D; []                    println(issueName)                    fixVersion &#x3D; readJSON text: &quot;&quot;&quot;$&#123;fixVersion&#125;&quot;&quot;&quot;                    println(fixVersion.size())                    &#x2F;&#x2F;è·å–é¡¹ç›®Id                    def projects &#x3D; readJSON text: &quot;&quot;&quot;$&#123;moduleNames&#125;&quot;&quot;&quot;                    for ( project in projects)&#123;                        println(project[&quot;name&quot;])                        projectName &#x3D; project[&quot;name&quot;]                        currentBuild.description +&#x3D; &quot;\n project: $&#123;projectName&#125;&quot;                        groupName &#x3D; projectName.split(&quot;-&quot;)[0]                                                try &#123;                            projectId &#x3D; gitlab.GetProjectID(groupName, projectName)                            println(projectId)                            projectIds.add(projectId)                           &#125; catch(e)&#123;                            println(e)                            println(&quot;æœªè·å–åˆ°é¡¹ç›®IDï¼Œè¯·æ£€æŸ¥æ¨¡å—åç§°ï¼&quot;)                        &#125;                    &#125;                     println(projectIds)                      if (fixVersion.size() &#x3D;&#x3D; 0) &#123;                        for (id in projectIds)&#123;                            println(&quot;æ–°å»ºç‰¹æ€§åˆ†æ”¯--&gt; $&#123;id&#125; --&gt; $&#123;issueName&#125;&quot;)                            currentBuild.description +&#x3D; &quot;\n æ–°å»ºç‰¹æ€§åˆ†æ”¯--&gt; $&#123;id&#125; --&gt; $&#123;issueName&#125;&quot;                            gitlab.CreateBranch(id,&quot;master&quot;,&quot;$&#123;issueName&#125;&quot;)                        &#125;                                                                        &#125; else &#123;                        fixVersion &#x3D; fixVersion[0][&#39;name&#39;]                        println(&quot;Issueå…³è”releaseæ“ä½œ,Jenkinsåˆ›å»ºåˆå¹¶è¯·æ±‚&quot;)                        currentBuild.description +&#x3D; &quot;\n Issueå…³è”releaseæ“ä½œ,Jenkinsåˆ›å»ºåˆå¹¶è¯·æ±‚ \n $&#123;issueName&#125; --&gt; RELEASE-$&#123;fixVersion&#125;&quot;                                                 for (id in projectIds)&#123;                            println(&quot;åˆ›å»ºRELEASE--&gt;$&#123;id&#125; --&gt;$&#123;fixVersion&#125;åˆ†æ”¯&quot;)                            gitlab.CreateBranch(id,&quot;master&quot;,&quot;RELEASE-$&#123;fixVersion&#125;&quot;)                                                        println(&quot;åˆ›å»ºåˆå¹¶è¯·æ±‚ $&#123;issueName&#125; ---&gt; RELEASE-$&#123;fixVersion&#125;&quot;)                            gitlab.CreateMr(id,&quot;$&#123;issueName&#125;&quot;,&quot;RELEASE-$&#123;fixVersion&#125;&quot;,&quot;$&#123;issueName&#125;---&gt;RELEASE-$&#123;fixVersion&#125;&quot;)                                                    &#125;                    &#125;                 &#125;            &#125;        &#125;    &#125;&#125;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></li></ul></li></ul><h3 id="UATæµ‹è¯•æµæ°´çº¿"><a href="#UATæµ‹è¯•æµæ°´çº¿" class="headerlink" title="UATæµ‹è¯•æµæ°´çº¿"></a>UATæµ‹è¯•æµæ°´çº¿</h3><p>ä»£ç â€“&gt;ç¼–è¯‘â€“&gt;å•æµ‹â€“&gt;æ‰“åŒ…â€“&gt;æ‰«æâ€“&gt;é•œåƒâ€“&gt;å‘å¸ƒâ€“&gt;æ¥å£æµ‹è¯•â€“&gt;ç”Ÿæˆç‰ˆæœ¬æ–‡ä»¶â€“&gt;é‚®ä»¶é€šçŸ¥</p><p>ä¸¤ç§æ–¹å¼ä½¿ç”¨dockerï¼š</p><ol><li>é…ç½®ä¸“å±slaveï¼Œ æ–°å»ºä¸€ä¸ªpod é‡Œé¢èµ·ä¸€ä¸ªdocker</li><li>docker in docker é…ç½®ï¼Œ ä½¿ç”¨ç‰©ç†æœºçš„dokcer è¿›è¡ŒæŒ‚è½½ï¼Œä½†æ˜¯å¯èƒ½ä¼šå½±å“æ•´ä¸ªdockerçš„æ€§èƒ½</li></ol><p><img src="/1660032386054.png" alt="1660032386054"></p><h3 id="è·å–k8sæ–‡ä»¶ä¸Šä¼ è‡³k8sé›†ç¾¤"><a href="#è·å–k8sæ–‡ä»¶ä¸Šä¼ è‡³k8sé›†ç¾¤" class="headerlink" title="è·å–k8sæ–‡ä»¶ä¸Šä¼ è‡³k8sé›†ç¾¤"></a>è·å–k8sæ–‡ä»¶ä¸Šä¼ è‡³k8sé›†ç¾¤</h3><ol><li><p>åˆ†è£…çš„å‡½æ•°è¯¦è§gitlab.groovy å’Œkubernete.groovyæ–‡ä»¶</p></li><li><p>jave.jenkinsfile</p><pre class="line-numbers language-none"><code class="language-none">#!groovy@Library(&#39;jenkinslibrary@master&#39;) _&#x2F;&#x2F;func from shareibrarydef build &#x3D; new org.devops.build()def deploy &#x3D; new org.devops.deploy()def tools &#x3D; new org.devops.tools()def gitlab &#x3D; new org.devops.gitlab()def toemail &#x3D; new org.devops.toemail()def sonar &#x3D; new org.devops.sonarqube()def sonarapi &#x3D; new org.devops.sonarapi()def nexus &#x3D; new org.devops.nexus()def artifactory &#x3D; new org.devops.artifactory() def k8s &#x3D; new org.devops.kubernetes()def runOpts&#x2F;&#x2F;envString buildType &#x3D; &quot;$&#123;env.buildType&#125;&quot;String buildShell &#x3D; &quot;$&#123;env.buildShell&#125;&quot;String deployHosts &#x3D; &quot;$&#123;env.deployHosts&#125;&quot;String srcUrl &#x3D; &quot;$&#123;env.srcUrl&#125;&quot;String branchName &#x3D; &quot;$&#123;env.branchName&#125;&quot;String artifactUrl &#x3D; &quot;$&#123;env.artifactUrl&#125;&quot;if (&quot;$&#123;runOpts&#125;&quot; &#x3D;&#x3D; &quot;GitlabPush&quot;)&#123;    branchName &#x3D; branch - &quot;refs&#x2F;heads&#x2F;&quot;        currentBuild.description &#x3D; &quot;Trigger by $&#123;userName&#125; $&#123;branch&#125;&quot;    gitlab.ChangeCommitStatus(projectId,commitSha,&quot;running&quot;)    env.runOpts &#x3D; &quot;GitlabPush&quot;    &#125; else &#123;   userEmail &#x3D; &quot;2560350642@qq.com&quot;&#125;&#x2F;&#x2F;pipelinepipeline&#123;    agent &#123; node &#123; label &quot;build&quot;&#125;&#125;            stages&#123;       stage(&quot;GetCode&quot;)&#123;            steps&#123;                script&#123;                    println(&quot;$&#123;branchName&#125;&quot;)                                    tools.PrintMes(&quot;è·å–ä»£ç &quot;,&quot;green&quot;)                    checkout([$class: &#39;GitSCM&#39;, branches: [[name: &quot;$&#123;branchName&#125;&quot;]],                                       doGenerateSubmoduleConfigurations: false,                                       extensions: [],                                       submoduleCfg: [],                                       userRemoteConfigs: [[credentialsId: &#39;gitlab-admin-user&#39;, url: &quot;$&#123;srcUrl&#125;&quot;]]])                &#125;            &#125;        &#125;        stage(&quot;Build&amp;Test&quot;)&#123;            steps&#123;                script&#123;                    tools.PrintMes(&quot;æ‰§è¡Œæ‰“åŒ…&quot;,&quot;green&quot;)                    artifactory.main(buildType,buildShell)                    artifactory.PushArtifact()                                                    &#x2F;&#x2F;deploy.SaltDeploy(&quot;$&#123;deployHosts&#125;&quot;,&quot;test.ping&quot;)                    &#x2F;&#x2F;deploy.AnsibleDeploy(&quot;$&#123;deployHosts&#125;&quot;,&quot;-m ping &quot;)                &#125;            &#125;       &#125;                      &#x2F;&#x2F;å¹¶è¡Œ        stage(&#39;parallel01&#39;) &#123;                          parallel &#123;            stage(&quot;QA&quot;)&#123;                steps &#123;                    script&#123;                        tools.PrintMes(&quot;æœç´¢é¡¹ç›®&quot;,&quot;green&quot;)                        result &#x3D; sonarapi.SerarchProject(&quot;$&#123;JOB_NAME&#125;&quot;)                        println(result)                                                if (result &#x3D;&#x3D; &quot;false&quot;)&#123;                            println(&quot;$&#123;JOB_NAME&#125;---é¡¹ç›®ä¸å­˜åœ¨,å‡†å¤‡åˆ›å»ºé¡¹ç›®---&gt; $&#123;JOB_NAME&#125;ï¼&quot;)                            sonarapi.CreateProject(&quot;$&#123;JOB_NAME&#125;&quot;)                        &#125; else &#123;                            println(&quot;$&#123;JOB_NAME&#125;---é¡¹ç›®å·²å­˜åœ¨ï¼&quot;)                        &#125;                                                tools.PrintMes(&quot;é…ç½®é¡¹ç›®è´¨é‡è§„åˆ™&quot;,&quot;green&quot;)                        qpName&#x3D;&quot;$&#123;JOB_NAME&#125;&quot;.split(&quot;-&quot;)[0]   &#x2F;&#x2F;Sonar%20way                        sonarapi.ConfigQualityProfiles(&quot;$&#123;JOB_NAME&#125;&quot;,&quot;java&quot;,qpName)                                            tools.PrintMes(&quot;é…ç½®è´¨é‡é˜ˆ&quot;,&quot;green&quot;)                        sonarapi.ConfigQualityGates(&quot;$&#123;JOB_NAME&#125;&quot;,qpName)                                            tools.PrintMes(&quot;ä»£ç æ‰«æ&quot;,&quot;green&quot;)                        sonar.SonarScan(&quot;test&quot;,&quot;$&#123;JOB_NAME&#125;&quot;,&quot;$&#123;JOB_NAME&#125;&quot;,&quot;src&quot;,&quot;$&#123;branchName&#125;&quot;)                                                    sleep 30                        tools.PrintMes(&quot;è·å–æ‰«æç»“æœ&quot;,&quot;green&quot;)                        result &#x3D; sonarapi.GetProjectStatus(&quot;$&#123;JOB_NAME&#125;&quot;)                                                                        println(result)                        if (result.toString() &#x3D;&#x3D; &quot;ERROR&quot;)&#123;                            toemail.Email(&quot;ä»£ç è´¨é‡é˜ˆé”™è¯¯ï¼è¯·åŠæ—¶ä¿®å¤ï¼&quot;,userEmail)                            error &quot; ä»£ç è´¨é‡é˜ˆé”™è¯¯ï¼è¯·åŠæ—¶ä¿®å¤ï¼&quot;                                                                                &#125; else &#123;                            println(result)                        &#125;                    &#125;               &#125;           &#125;                      &#x2F;&#x2F;æ„å»ºé•œåƒ           stage(&quot;BuildImages&quot;)&#123;                steps&#123;                    script&#123;                        tools.PrintMes(&quot;æ„å»ºä¸Šä¼ é•œåƒ&quot;,&quot;green&quot;)                        env.serviceName &#x3D; &quot;$&#123;JOB_NAME&#125;&quot;.split(&quot;_&quot;)[0]                                               withCredentials([usernamePassword(credentialsId: &#39;aliyun-registry-admin&#39;, passwordVariable: &#39;password&#39;, usernameVariable: &#39;username&#39;)]) &#123;                                                      env.dockerImage &#x3D; &quot;registry.cn-beijing.aliyuncs.com&#x2F;devopstest&#x2F;$&#123;serviceName&#125;:$&#123;branchName&#125;&quot;                           sh &quot;&quot;&quot;                               docker login -u $&#123;username&#125; -p $&#123;password&#125;  registry.cn-beijing.aliyuncs.com                               docker build -t registry.cn-beijing.aliyuncs.com&#x2F;devopstest&#x2F;$&#123;serviceName&#125;:$&#123;branchName&#125; .                               sleep 1                               docker push registry.cn-beijing.aliyuncs.com&#x2F;devopstest&#x2F;$&#123;serviceName&#125;:$&#123;branchName&#125;                               sleep 1                               #docker rmi registry.cn-beijing.aliyuncs.com&#x2F;devopstest&#x2F;$&#123;serviceName&#125;:$&#123;branchName&#125;                            &quot;&quot;&quot;                        &#125;                    &#125;                &#125;            &#125;        &#125;    &#125;              &#x2F;&#x2F;å‘å¸ƒ       stage(&quot;Deploy&quot;)&#123;            steps&#123;                script&#123;                    tools.PrintMes(&quot;å‘å¸ƒåº”ç”¨&quot;,&quot;green&quot;)                                        &#x2F;&#x2F;ä¸‹è½½ç‰ˆæœ¬åº“æ–‡ä»¶                                         releaseVersion &#x3D; &quot;$&#123;branchName&#125;&quot;.split(&quot;-&quot;)[-1]                    response &#x3D; gitlab.GetRepoFile(7,&quot;demo-uat%2f$&#123;releaseVersion&#125;-uat.yaml&quot;)                    &#x2F;&#x2F;println(response)                                        &#x2F;&#x2F;æ›¿æ¢æ–‡ä»¶ä¸­å†…å®¹ï¼ˆé•œåƒï¼‰                    fileData &#x3D; readYaml text: &quot;&quot;&quot;$&#123;response&#125;&quot;&quot;&quot;                    println(fileData[&quot;spec&quot;][&quot;template&quot;][&quot;spec&quot;][&quot;containers&quot;][0][&quot;image&quot;])                    println(fileData[&quot;metadata&quot;][&quot;resourceVersion&quot;])                    oldImage &#x3D; fileData[&quot;spec&quot;][&quot;template&quot;][&quot;spec&quot;][&quot;containers&quot;][0][&quot;image&quot;]                     oldVersion &#x3D; fileData[&quot;metadata&quot;][&quot;resourceVersion&quot;]                    response &#x3D; response.replace(oldImage,dockerImage)                    response &#x3D; response.replace(oldVersion,&quot;&quot;)                    println(response)                                        &#x2F;&#x2F;æ›´æ–°gitlabæ–‡ä»¶å†…å®¹                    base64Content &#x3D; response.bytes.encodeBase64().toString()                    gitlab.UpdateRepoFile(7,&quot;demo-uat%2f$&#123;releaseVersion&#125;-uat.yaml&quot;,base64Content)                                        &#x2F;&#x2F;å‘å¸ƒkubernetes                    k8s.UpdateDeployment(&quot;demo-uat&quot;,&quot;demoapp&quot;,response)                                    &#125;            &#125;        &#125;               &#x2F;&#x2F;æ¥å£è‡ªåŠ¨åŒ–æµ‹è¯•        stage(&quot;InterfaceTest&quot;)&#123;            steps&#123;                script&#123;                    tools.PrintMes(&quot;æ¥å£æµ‹è¯•&quot;,&quot;green&quot;)                &#125;            &#125;       &#125;                                &#125;    post &#123;        always&#123;            script&#123;                println(&quot;always&quot;)            &#125;        &#125;                success&#123;            script&#123;                println(&quot;success&quot;)                if (&quot;$&#123;runOpts&#125;&quot; &#x3D;&#x3D; &quot;GitlabPush&quot;)&#123;                    gitlab.ChangeCommitStatus(projectId,commitSha,&quot;success&quot;)                &#125;                toemail.Email(&quot;æµæ°´çº¿æˆåŠŸ&quot;,userEmail)                        &#125;                &#125;        failure&#123;            script&#123;                println(&quot;failure&quot;)                if (&quot;$&#123;runOpts&#125;&quot; &#x3D;&#x3D; &quot;GitlabPush&quot;)&#123;                    gitlab.ChangeCommitStatus(projectId,commitSha,&quot;failed&quot;)                &#125;                toemail.Email(&quot;æµæ°´çº¿å¤±è´¥äº†ï¼&quot;,userEmail)            &#125;        &#125;                aborted&#123;            script&#123;                println(&quot;aborted&quot;)                if (&quot;$&#123;runOpts&#125;&quot; &#x3D;&#x3D; &quot;GitlabPush&quot;)&#123;                    gitlab.ChangeCommitStatus(projectId,commitSha,&quot;canceled&quot;)                &#125;               toemail.Email(&quot;æµæ°´çº¿è¢«å–æ¶ˆäº†ï¼&quot;,userEmail)            &#125;                &#125;        &#125;        &#125;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></li></ol>]]></content>
      
      
      <categories>
          
          <category> Devops </category>
          
      </categories>
      
      
        <tags>
            
            <tag> CICD </tag>
            
            <tag> æµæ°´çº¿ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>jenkinsä¸­é›†æˆjmeter</title>
      <link href="/posts/1800.html"/>
      <url>/posts/1800.html</url>
      
        <content type="html"><![CDATA[<h3 id="jemter-å‚æ•°"><a href="#jemter-å‚æ•°" class="headerlink" title="jemter å‚æ•°"></a>jemter å‚æ•°</h3><p>-n: éguiæ¨¡å¼ä¸‹æ‰§è¡Œjmeter</p><p>-t: æ‰§è¡Œæµ‹è¯•æ–‡ä»¶ååœ¨ä½ç½®</p><p>-l: æŒ‡å®šæµ‹è¯•æŠ¥å‘Šç»“æœä¿å­˜çš„æ–‡ä»¶ï¼Œ jtlæ ¼å¼æ–‡ä»¶</p><p>-o: æŒ‡å®šæµ‹è¯•æŠ¥å‘Šä¿å­˜çš„ä½ç½®</p><h3 id="æµç¨‹"><a href="#æµç¨‹" class="headerlink" title="æµç¨‹"></a>æµç¨‹</h3><ol><li><p>å°†jmeter extraç›®å½•ä¸­çš„ant-jmeter-1.1.1.jaræ‹·è´è‡³antå®‰è£…ç›®å½•çš„libä¸­</p></li><li><p>åˆ›å»ºdemoæ–‡ä»¶å­˜æ”¾jmeterè„šæœ¬æ–‡ä»¶ï¼Œåˆ›å»ºdemo-reportæ–‡ä»¶å¤¹å­˜æ”¾æµ‹è¯•æŠ¥å‘Š</p></li><li><p>demo æ–‡ä»¶ä¸‹æ–°å»ºbuild.xmlæ–‡ä»¶ï¼ˆå¯ä»¥å°†jmeter extraä¸­çš„build.xmlæ‹·è´è¿‡æ¥ï¼‰</p></li><li><p>é…ç½®build.xmlæ–‡ä»¶</p><pre class="line-numbers language-none"><code class="language-none">&lt;?xml version&#x3D;&quot;1.0&quot; encoding&#x3D;&quot;UTF-8&quot;?&gt;&lt;project name&#x3D;&quot;ant-jmeter-test&quot; default&#x3D;&quot;run&quot; basedir&#x3D;&quot;.&quot;&gt;  &lt;tstamp&gt;    &lt;format property&#x3D;&quot;time&quot; pattern&#x3D;&quot;yyyyMMddhhmm&quot; &#x2F;&gt;  &lt;&#x2F;tstamp&gt;  &lt;!-- éœ€è¦æ”¹æˆè‡ªå·±æœ¬åœ°çš„ Jmeter ç›®å½•--&gt;  &lt;property name&#x3D;&quot;jmeter.home&quot; value&#x3D;&quot;D:\work_software\jmeter\apache-jmeter-3.2&quot; &#x2F;&gt;  &lt;!-- Jmeterç”Ÿæˆ jtl æ ¼å¼çš„ç»“æœæŠ¥å‘Šçš„è·¯å¾„--&gt;  &lt;property name&#x3D;&quot;jmeter.result.jtl.dir&quot; value&#x3D;&quot;D:\work_software\jmeter\apache-jmeter-3.2\testcases\report\jtl&quot; &#x2F;&gt;  &lt;!-- Jmeterç”Ÿæˆ html æ ¼å¼çš„ç»“æœæŠ¥å‘Šçš„è·¯å¾„--&gt;  &lt;property name&#x3D;&quot;jmeter.result.html.dir&quot; value&#x3D;&quot;D:\work_software\jmeter\apache-jmeter-3.2\testcases\report\html&quot; &#x2F;&gt;  &lt;!-- ç”Ÿæˆçš„æŠ¥å‘Šçš„å‰ç¼€--&gt;  &lt;property name&#x3D;&quot;ReportName&quot; value&#x3D;&quot;TestReport&quot; &#x2F;&gt;  &lt;property name&#x3D;&quot;jmeter.result.jtlName&quot; value&#x3D;&quot;$&#123;jmeter.result.jtl.dir&#125;&#x2F;$&#123;ReportName&#125;$&#123;time&#125;.jtl&quot; &#x2F;&gt;  &lt;property name&#x3D;&quot;jmeter.result.htmlName&quot; value&#x3D;&quot;$&#123;jmeter.result.html.dir&#125;&#x2F;$&#123;ReportName&#125;$&#123;time&#125;.html&quot; &#x2F;&gt;   &lt;target name&#x3D;&quot;run&quot;&gt;     &lt;antcall target&#x3D;&quot;test&quot; &#x2F;&gt;     &lt;antcall target&#x3D;&quot;report&quot; &#x2F;&gt;   &lt;&#x2F;target&gt;   &lt;target name&#x3D;&quot;test&quot;&gt;     &lt;taskdef name&#x3D;&quot;jmeter&quot; classname&#x3D;&quot;org.programmerplanet.ant.taskdefs.jmeter.JMeterTask&quot; &#x2F;&gt;     &lt;jmeter jmeterhome&#x3D;&quot;$&#123;jmeter.home&#125;&quot; resultlog&#x3D;&quot;$&#123;jmeter.result.jtlName&#125;&quot;&gt;       &lt;!-- å£°æ˜è¦è¿è¡Œçš„è„šæœ¬ã€‚&quot;*.jmx&quot;æŒ‡åŒ…å«æ­¤ç›®å½•ä¸‹çš„æ‰€æœ‰Jmeterè„šæœ¬--&gt;       &lt;testplans dir&#x3D;&quot;D:\work_software\jmeter\apache-jmeter-3.2\testcases&quot; includes&#x3D;&quot;*.jmx&quot; &#x2F;&gt;         &lt;property name&#x3D;&quot;jmeter.save.saveservice.output_format&quot; value&#x3D;&quot;xml&quot;&#x2F;&gt;     &lt;&#x2F;jmeter&gt;   &lt;&#x2F;target&gt;    &lt;path id&#x3D;&quot;xslt.classpath&quot;&gt;     &lt;fileset dir&#x3D;&quot;$&#123;jmeter.home&#125;&#x2F;lib&quot; includes&#x3D;&quot;xalan*.jar&quot;&#x2F;&gt;    &lt;fileset dir&#x3D;&quot;$&#123;jmeter.home&#125;&#x2F;lib&quot; includes&#x3D;&quot;serializer*.jar&quot;&#x2F;&gt;  &lt;&#x2F;path&gt;  &lt;target name&#x3D;&quot;report&quot;&gt;&lt;tstamp&gt; &lt;format property&#x3D;&quot;report.datestamp&quot; pattern&#x3D;&quot;yyyy&#x2F;MM&#x2F;dd HH:mm&quot; &#x2F;&gt;&lt;&#x2F;tstamp&gt;     &lt;xslt        classpathref&#x3D;&quot;xslt.classpath&quot; rel&#x3D;&quot;external nofollow&quot;       force&#x3D;&quot;true&quot;       in&#x3D;&quot;$&#123;jmeter.result.jtlName&#125;&quot;       out&#x3D;&quot;$&#123;jmeter.result.htmlName&#125;&quot;       style&#x3D;&quot;$&#123;jmeter.home&#125;&#x2F;extras&#x2F;jmeter-results-detail-report_21.xsl&quot;&gt;       &lt;param name&#x3D;&quot;dateReport&quot; expression&#x3D;&quot;$&#123;report.datestamp&#125;&quot;&#x2F;&gt;    &lt;&#x2F;xslt&gt;    &lt;copy todir&#x3D;&quot;$&#123;jmeter.result.html.dir&#125;&quot;&gt;      &lt;fileset dir&#x3D;&quot;$&#123;jmeter.home&#125;&#x2F;extras&quot;&gt;        &lt;include name&#x3D;&quot;collapse.png&quot; &#x2F;&gt;        &lt;include name&#x3D;&quot;expand.png&quot; &#x2F;&gt;      &lt;&#x2F;fileset&gt;    &lt;&#x2F;copy&gt;  &lt;&#x2F;target&gt;&lt;&#x2F;project&gt;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></li><li><p>é…ç½®antç¯å¢ƒå˜é‡</p></li><li><p>è¿è¡Œant æŸ¥çœ‹æŠ¥å‘Š</p><ol><li><p>å®‰è£…publishhtmlæ’ä»¶</p></li><li><p>æŸ¥çœ‹ç‰‡æ®µç”Ÿæˆå™¨</p></li><li><p>ç”Ÿæˆå±•ç¤ºæŠ¥å‘Šä»£ç æ”¾å…¥jenkinsfileä¸­</p><pre class="line-numbers language-jenkinsfile" data-language="jenkinsfile"><code class="language-jenkinsfile">#!groovy@Library(&#39;jenkinslibrary@master&#39;) _&#x2F;&#x2F;func from shareibrarydef build &#x3D; new org.devops.build()def tools &#x3D; new org.devops.tools()def toemail &#x3D; new org.devops.toemail()&#x2F;&#x2F;envString buildType &#x3D; &quot;$&#123;env.buildType&#125;&quot;String buildShell &#x3D; &quot;$&#123;env.buildShell&#125;&quot;String srcUrl &#x3D; &quot;$&#123;env.srcUrl&#125;&quot;String branchName &#x3D; &quot;$&#123;env.branchName&#125;&quot;userEmail &#x3D; &quot;1028354023@qq.com&quot;&#x2F;&#x2F;pipelinepipeline&#123;    agent &#123; node &#123; label &quot;build&quot;&#125;&#125;            stages&#123;        stage(&quot;CheckOut&quot;)&#123;            steps&#123;                script&#123;                                                           println(&quot;$&#123;branchName&#125;&quot;)                                    tools.PrintMes(&quot;è·å–ä»£ç &quot;,&quot;green&quot;)                    checkout([$class: &#39;GitSCM&#39;, branches: [[name: &quot;$&#123;branchName&#125;&quot;]],                                       doGenerateSubmoduleConfigurations: false,                                       extensions: [],                                       submoduleCfg: [],                                       userRemoteConfigs: [[credentialsId: &#39;gitlab-admin-user&#39;, url: &quot;$&#123;srcUrl&#125;&quot;]]])                &#125;            &#125;        &#125;        stage(&quot;Build&quot;)&#123;            steps&#123;                script&#123;                                    tools.PrintMes(&quot;æ‰§è¡Œæ‰“åŒ…&quot;,&quot;green&quot;)                    build.Build(buildType,buildShell)                                                                                &#x2F;&#x2F;å±•ç¤ºæµ‹è¯•æŠ¥å‘Š                    publishHTML([allowMissing: false,                                  alwaysLinkToLastBuild: false,                                  keepAll: false,                                  reportDir: &#39;result&#x2F;htmlfile&#39;,                                  reportFiles: &#39;SummaryReport.html,DetailReport.html&#39;,                                  reportName: &#39;InterfaceTestReport&#39;,                                  reportTitles: &#39;&#39;])                &#125;            &#125;       &#125;    &#125;    post &#123;        always&#123;            script&#123;                println(&quot;always&quot;)            &#125;        &#125;                success&#123;            script&#123;                println(&quot;success&quot;)                toemail.Email(&quot;æµæ°´çº¿æˆåŠŸ&quot;,userEmail)                        &#125;                &#125;        failure&#123;            script&#123;                println(&quot;failure&quot;)                toemail.Email(&quot;æµæ°´çº¿å¤±è´¥äº†ï¼&quot;,userEmail)            &#125;        &#125;                aborted&#123;            script&#123;                println(&quot;aborted&quot;)                toemail.Email(&quot;æµæ°´çº¿è¢«å–æ¶ˆäº†ï¼&quot;,userEmail)            &#125;                &#125;        &#125;        &#125;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></li></ol></li></ol>]]></content>
      
      
      <categories>
          
          <category> Devops </category>
          
      </categories>
      
      
        <tags>
            
            <tag> jenkins </tag>
            
            <tag> CICD </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>dockeré•œåƒä»“åº“ç®¡ç†è§„èŒƒ</title>
      <link href="/posts/40755.html"/>
      <url>/posts/40755.html</url>
      
        <content type="html"><![CDATA[<h2 id="é•œåƒç®¡ç†è§„èŒƒ"><a href="#é•œåƒç®¡ç†è§„èŒƒ" class="headerlink" title="é•œåƒç®¡ç†è§„èŒƒ"></a>é•œåƒç®¡ç†è§„èŒƒ</h2><h3 id="å‘½åè§„èŒƒ"><a href="#å‘½åè§„èŒƒ" class="headerlink" title="å‘½åè§„èŒƒ"></a>å‘½åè§„èŒƒ</h3><h4 id="ä»“åº“ç±»å‹ï¼š"><a href="#ä»“åº“ç±»å‹ï¼š" class="headerlink" title="ä»“åº“ç±»å‹ï¼š"></a>ä»“åº“ç±»å‹ï¼š</h4><ol><li>snapshot: å¼€å‘ä»“åº“</li><li>releaseï¼š ç”Ÿäº§æ­£å¼ç‰ˆæœ¬ä»“åº“</li></ol><h4 id="ä»“åº“å‘½å"><a href="#ä»“åº“å‘½å" class="headerlink" title="ä»“åº“å‘½å"></a>ä»“åº“å‘½å</h4><ol><li>snapshotï¼š ä¸šåŠ¡&#x2F;é¡¹ç›®åç§° demo-snapshot</li><li>release:  ä¸šåŠ¡&#x2F;é¡¹ç›®åç§° demo-release</li></ol><h4 id="é•œåƒå‘½å"><a href="#é•œåƒå‘½å" class="headerlink" title="é•œåƒå‘½å"></a>é•œåƒå‘½å</h4><p>åº”ç”¨åç§°&#x2F;æ ‡ç­¾</p><ol><li>DEV: demo-snapshot&#x2F;demo-devops-service:branch_commitid</li><li>PRD: demo-release&#x2F;demo-devops-srvice:version_commitid</li></ol><h4 id="æ ‡ç­¾å‘½å"><a href="#æ ‡ç­¾å‘½å" class="headerlink" title="æ ‡ç­¾å‘½å"></a>æ ‡ç­¾å‘½å</h4><ol><li>åˆ†æ”¯å_æäº¤ID</li><li>ç‰ˆæœ¬å·_æäº¤ID</li></ol><p>æäº¤id å‡å°‘é‡å¤æ„å»º</p><h3 id="é•œåƒæ¸…ç†ç­–ç•¥"><a href="#é•œåƒæ¸…ç†ç­–ç•¥" class="headerlink" title="é•œåƒæ¸…ç†ç­–ç•¥"></a>é•œåƒæ¸…ç†ç­–ç•¥</h3><p>éšç€é•œåƒè¶Šæ¥è¶Šå¤šï¼Œé¢‘ç¹æ›´æ–°å¯¼è‡´harboré•œåƒä»“åº“çš„å®¹é‡å¾ˆå¿«çˆ†æ»¡ï¼Œrelease å‘å¸ƒåï¼Œä¸€å‘¨åå¯ä»¥æ¸…é™¤ï¼Œsnapshotåœ¨åˆå¹¶åˆ°release åå¯ä»¥æ¸…ç†(å…·ä½“æ—¶é—´æŒ‰ç…§éœ€æ±‚)</p>]]></content>
      
      
      <categories>
          
          <category> docker </category>
          
      </categories>
      
      
        <tags>
            
            <tag> CICD </tag>
            
            <tag> docker </tag>
            
            <tag> harbor </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>åŸºäºdockeré…ç½®å‰ç«¯æµæ°´çº¿</title>
      <link href="/posts/29748.html"/>
      <url>/posts/29748.html</url>
      
        <content type="html"><![CDATA[<h2 id="åŸºäºdockeré…ç½®webé¡¹ç›®å®ä¾‹"><a href="#åŸºäºdockeré…ç½®webé¡¹ç›®å®ä¾‹" class="headerlink" title="åŸºäºdockeré…ç½®webé¡¹ç›®å®ä¾‹"></a>åŸºäºdockeré…ç½®webé¡¹ç›®å®ä¾‹</h2><pre class="line-numbers language-none"><code class="language-none">pipeline &#123;    agent &#123;        docker &#123;            image &#39;node:10.20.1-alpine3.11&#39;            args &#39;-v $HOME&#x2F;.m2:&#x2F;root&#x2F;.m2&#39;        &#125;    &#125;    stages &#123;        stage(&#39;checkout&#39;) &#123;            steps &#123;                git &#39;https:&#x2F;&#x2F;github.com&#x2F;jenkins-docs&#x2F;simple-node-js-react-npm-app&#39;            &#125;        &#125;        stage(&#39;build&#39;) &#123;            steps &#123;                sh &#39;npm install&#39;                sh &#39;npm run build&#39;            &#125;        &#125;            &#125;&#125;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p><img src="https://zhangtq-blog.oss-cn-hangzhou.aliyuncs.com/content_picture/1659524779824.png" alt="1659524779824"></p>]]></content>
      
      
      <categories>
          
          <category> Devops </category>
          
      </categories>
      
      
        <tags>
            
            <tag> CICD </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>åœ¨æµæ°´çº¿ä¸­ä½¿ç”¨dockerå®¹å™¨</title>
      <link href="/posts/41684.html"/>
      <url>/posts/41684.html</url>
      
        <content type="html"><![CDATA[<h2 id="jenkins-ä¸­ä½¿ç”¨dockerè¿›è¡Œæµæ°´çº¿ç¼–è¯‘"><a href="#jenkins-ä¸­ä½¿ç”¨dockerè¿›è¡Œæµæ°´çº¿ç¼–è¯‘" class="headerlink" title="jenkins ä¸­ä½¿ç”¨dockerè¿›è¡Œæµæ°´çº¿ç¼–è¯‘"></a>jenkins ä¸­ä½¿ç”¨dockerè¿›è¡Œæµæ°´çº¿ç¼–è¯‘</h2><h3 id="jenkins-ä¸­æŒ‚è½½dockerå‘½ä»¤"><a href="#jenkins-ä¸­æŒ‚è½½dockerå‘½ä»¤" class="headerlink" title="jenkins ä¸­æŒ‚è½½dockerå‘½ä»¤"></a>jenkins ä¸­æŒ‚è½½dockerå‘½ä»¤</h3><pre class="line-numbers language-none"><code class="language-none">docker run --name jenkins -itd  -p 8081:8080 -p 50000:50000 -v &#x2F;var&#x2F;jenkins_home:&#x2F;var&#x2F;jenkins_home -v &#x2F;var&#x2F;run&#x2F;docker.sock:&#x2F;var&#x2F;run&#x2F;docker.sock  -v &#x2F;usr&#x2F;bin&#x2F;docker:&#x2F;usr&#x2F;bin&#x2F;docker  jenkins&#x2F;jenkins<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><h3 id="è§£å†³å¯åŠ¨æƒé™é—®é¢˜"><a href="#è§£å†³å¯åŠ¨æƒé™é—®é¢˜" class="headerlink" title="è§£å†³å¯åŠ¨æƒé™é—®é¢˜"></a>è§£å†³å¯åŠ¨æƒé™é—®é¢˜</h3><pre class="line-numbers language-none"><code class="language-none">docker exec -it -u root jenkins bashusermod -aG root jenkinschmod 777 &#x2F;var&#x2F;run&#x2F;docker.sock<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre><h3 id="æµ‹è¯•æµæ°´çº¿"><a href="#æµ‹è¯•æµæ°´çº¿" class="headerlink" title="æµ‹è¯•æµæ°´çº¿"></a>æµ‹è¯•æµæ°´çº¿</h3><ol><li>å®‰è£…docker pipelineã€ dockeræ’ä»¶</li><li>æ–°å»ºæµæ°´çº¿é¡¹ç›®</li></ol><pre class="line-numbers language-none"><code class="language-none">pipeline &#123;    agent &#123;        docker &#123; image &#39;node:14-alpine&#39; &#125;    &#125;    stages &#123;        stage(&#39;Test&#39;) &#123;            steps &#123;                sh &#39;node --version&#39;            &#125;        &#125;    &#125;&#125;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><ol start="3"><li>è¿è¡Œæµæ°´çº¿ï¼ŒæˆåŠŸæˆªå›¾å¦‚ä¸‹</li></ol><p><img src="https://zhangtq-blog.oss-cn-hangzhou.aliyuncs.com/content_picture/1659504549940.png" alt="1659504549940"></p><ol start="4"><li><p>æ”¹è¿›æµæ°´çº¿</p><pre class="line-numbers language-none"><code class="language-none">pipeline &#123;    agent &#123;        docker &#123;            image &#39;maven:3-alpine&#39;            args &#39;-v $HOME&#x2F;.m2:&#x2F;root&#x2F;.m2&#39;        &#125;    &#125;    stages &#123;        stage(&#39;Build&#39;) &#123;            steps &#123;                sh &#39;mvn -v&#39;            &#125;        &#125;    &#125;&#125;è®¸å¤šæ„å»ºå·¥å…·å°†ä¸‹è½½å¤–éƒ¨ä¾èµ–é¡¹å¹¶å°†å…¶æœ¬åœ°ç¼“å­˜ä»¥ä¾›å°†æ¥é‡ç”¨ã€‚ç”±äºå®¹å™¨æœ€åˆæ˜¯ä½¿ç”¨â€œå¹²å‡€â€æ–‡ä»¶ç³»ç»Ÿåˆ›å»ºçš„ï¼Œå› æ­¤è¿™å¯èƒ½ä¼šå¯¼è‡´ç®¡é“è¿è¡Œé€Ÿåº¦å˜æ…¢ï¼Œå› ä¸ºå®ƒä»¬å¯èƒ½æ— æ³•åˆ©ç”¨åç»­ç®¡é“è¿è¡Œä¹‹é—´çš„ç£ç›˜ç¼“å­˜ã€‚ç®¡é“æ”¯æŒæ·»åŠ ä¼ é€’ç»™Dockerçš„è‡ªå®šä¹‰å‚æ•°ï¼Œå…è®¸ç”¨æˆ·æŒ‡å®šè¦å®‰è£…çš„è‡ªå®šä¹‰Dockerå·ï¼Œè¯¥å·å¯ç”¨äºåœ¨ä¸¤æ¬¡ç®¡é“è¿è¡Œä¹‹é—´åœ¨ä»£ç†ä¸Šç¼“å­˜æ•°æ®ã€‚ä»¥ä¸‹ç¤ºä¾‹å°†~&#x2F;.m2ç›®å½•åˆ©ç”¨mavenå®¹å™¨åœ¨ä¸¤æ¬¡ç®¡é“è¿è¡Œä¹‹é—´è¿›è¡Œç¼“å­˜ï¼Œä»è€Œé¿å…ä¸ºç®¡é“çš„åç»­è¿è¡Œé‡æ–°ä¸‹è½½ä¾èµ–é¡¹ã€‚<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></li><li><p>æµæ°´çº¿ä¸­ä½¿ç”¨å¤šä¸ªdocker</p></li></ol>   <pre class="line-numbers language-none"><code class="language-none">pipeline &#123;    agent none    stages &#123;        stage(&#39;Back-end&#39;) &#123;            agent &#123;                docker &#123; image &#39;maven:3-alpine&#39;                 args &#39;-v $HOME&#x2F;.m2:&#x2F;root&#x2F;.m2&#39;&#125;            &#125;            steps &#123;                sh &#39;mvn --version&#39;            &#125;        &#125;        stage(&#39;Front-end&#39;) &#123;            agent &#123;                docker &#123; image &#39;node:14-alpine&#39;                 args &#39;-v $HOME&#x2F;.npm:&#x2F;root&#x2F;.npm &#39;&#125;            &#125;            steps &#123;                sh &#39;node --version&#39;            &#125;        &#125;    &#125;&#125;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><ol start="6"><li>æŸ¥çœ‹è¿è¡Œä¿¡æ¯</li></ol>   <pre class="line-numbers language-none"><code class="language-none">Started by user unknown or anonymous[Pipeline] Start of Pipeline[Pipeline] stage[Pipeline] &#123; (Back-end)[Pipeline] nodeRunning on Jenkins in &#x2F;var&#x2F;jenkins_home&#x2F;workspace&#x2F;demo-dokcer-service-test[Pipeline] &#123;[Pipeline] isUnix[Pipeline] withEnv[Pipeline] &#123;[Pipeline] sh+ docker inspect -f . maven:3-alpine.[Pipeline] &#125;[Pipeline] &#x2F;&#x2F; withEnv[Pipeline] withDockerContainerJenkins seems to be running inside container 9f0fa912ea7a6a8b94c7d02d7aedf2429aa2f12d8841f67976f7efc79a2e03e0$ docker run -t -d -u 1000:1000 -v $HOME&#x2F;.m2:&#x2F;root&#x2F;.m2 -w &#x2F;var&#x2F;jenkins_home&#x2F;workspace&#x2F;demo-dokcer-service-test --volumes-from 9f0fa912ea7a6a8b94c7d02d7aedf2429aa2f12d8841f67976f7efc79a2e03e0 -e ******** -e ******** -e ******** -e ******** -e ******** -e ******** -e ******** -e ******** -e ******** -e ******** -e ******** -e ******** -e ******** -e ******** -e ******** -e ******** -e ******** -e ******** -e ******** -e ******** -e ******** -e ******** -e ******** -e ******** -e ******** -e ******** -e ******** maven:3-alpine cat$ docker top b8f8f8c418ad25cc550a1e35e6c9b632fe6c1251dd4ed62dabbf7c23a38a7c2b -eo pid,comm[Pipeline] &#123;[Pipeline] sh+ mvn --versionApache Maven 3.5.0 (ff8f5e7444045639af65f6095c62210b5713f426; 2017-04-03T19:39:06Z)Maven home: &#x2F;usr&#x2F;share&#x2F;mavenJava version: 1.8.0_131, vendor: Oracle CorporationJava home: &#x2F;usr&#x2F;lib&#x2F;jvm&#x2F;java-1.8-openjdk&#x2F;jreDefault locale: en_US, platform encoding: UTF-8OS name: &quot;linux&quot;, version: &quot;4.18.0-394.el8.x86_64&quot;, arch: &quot;amd64&quot;, family: &quot;unix&quot;[Pipeline] &#125;$ docker stop --time&#x3D;1 b8f8f8c418ad25cc550a1e35e6c9b632fe6c1251dd4ed62dabbf7c23a38a7c2b$ docker rm -f b8f8f8c418ad25cc550a1e35e6c9b632fe6c1251dd4ed62dabbf7c23a38a7c2b[Pipeline] &#x2F;&#x2F; withDockerContainer[Pipeline] &#125;[Pipeline] &#x2F;&#x2F; node[Pipeline] &#125;[Pipeline] &#x2F;&#x2F; stage[Pipeline] stage[Pipeline] &#123; (Front-end)[Pipeline] nodeRunning on Jenkins in &#x2F;var&#x2F;jenkins_home&#x2F;workspace&#x2F;demo-dokcer-service-test[Pipeline] &#123;[Pipeline] isUnix[Pipeline] withEnv[Pipeline] &#123;[Pipeline] sh+ docker inspect -f . node:14-alpine.[Pipeline] &#125;[Pipeline] &#x2F;&#x2F; withEnv[Pipeline] withDockerContainerJenkins seems to be running inside container 9f0fa912ea7a6a8b94c7d02d7aedf2429aa2f12d8841f67976f7efc79a2e03e0$ docker run -t -d -u 1000:1000 -v $HOME&#x2F;.npm:&#x2F;root&#x2F;.npm -w &#x2F;var&#x2F;jenkins_home&#x2F;workspace&#x2F;demo-dokcer-service-test --volumes-from 9f0fa912ea7a6a8b94c7d02d7aedf2429aa2f12d8841f67976f7efc79a2e03e0 -e ******** -e ******** -e ******** -e ******** -e ******** -e ******** -e ******** -e ******** -e ******** -e ******** -e ******** -e ******** -e ******** -e ******** -e ******** -e ******** -e ******** -e ******** -e ******** -e ******** -e ******** -e ******** -e ******** -e ******** -e ******** -e ******** -e ******** node:14-alpine cat$ docker top 03a7311f1a63225f31a83f4cdcc1ff3480b1a92608fac48c199e8afe43c12334 -eo pid,comm[Pipeline] &#123;[Pipeline] sh+ node --versionv14.18.2[Pipeline] &#125;$ docker stop --time&#x3D;1 03a7311f1a63225f31a83f4cdcc1ff3480b1a92608fac48c199e8afe43c12334$ docker rm -f 03a7311f1a63225f31a83f4cdcc1ff3480b1a92608fac48c199e8afe43c12334[Pipeline] &#x2F;&#x2F; withDockerContainer[Pipeline] &#125;[Pipeline] &#x2F;&#x2F; node[Pipeline] &#125;[Pipeline] &#x2F;&#x2F; stage[Pipeline] End of PipelineFinished: SUCCESS<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>]]></content>
      
      
      <categories>
          
          <category> Devops </category>
          
      </categories>
      
      
        <tags>
            
            <tag> jenkins </tag>
            
            <tag> CICD </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>åŸºäºdokcerå®‰è£…jenkins</title>
      <link href="/posts/27011.html"/>
      <url>/posts/27011.html</url>
      
        <content type="html"><![CDATA[<h1 id="docker-å®‰è£…jenkins"><a href="#docker-å®‰è£…jenkins" class="headerlink" title="docker å®‰è£…jenkins"></a>docker å®‰è£…jenkins</h1><h2 id="å®‰è£…"><a href="#å®‰è£…" class="headerlink" title="å®‰è£…"></a>å®‰è£…</h2><pre class="line-numbers language-none"><code class="language-none">docker pull jenkins&#x2F;jenkinsmkdir -p &#x2F;var&#x2F;jenkins_homechmod 777 &#x2F;var&#x2F;jenkins_homedocker run -d -p 10240:8080 -p 10241:50000 -v &#x2F;var&#x2F;jenkins_home:&#x2F;var&#x2F;jenkins_home -v &#x2F;etc&#x2F;localtime:&#x2F;etc&#x2F;localtime --name myjenkins jenkins&#x2F;jenkinsdocker psdocker logs -f d49d8bf74571å¯ä»¥çœ‹åˆ°å¯åŠ¨æ­£å¸¸&gt;at jenkins.install.InstallState$3.initializeState(InstallState.java:105)&lt;br&gt;at jenkins.model.Jenkins.setInstallState(Jenkins.java:1062)&lt;br&gt;at jenkins.install.InstallUtil.proceedToNextStateFrom(InstallUtil.java:96)&lt;br&gt;at jenkins.model.Jenkins.&lt;init&gt;(Jenkins.java:952)&lt;br&gt;at hudson.model.Hudson.&lt;init&gt;(Hudson.java:86)&lt;br&gt;at hudson.model.Hudson.&lt;init&gt;(Hudson.java:82)&lt;br&gt;at hudson.WebAppMain$3.run(WebAppMain.java:235)&lt;br&gt;&lt;&#x2F;pre&gt;Aug 02, 2022 7:47:40 AM hudson.WebAppMain$3 runINFO: Jenkins is fully up and running<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h2 id="é…ç½®å›½å†…é•œåƒæº"><a href="#é…ç½®å›½å†…é•œåƒæº" class="headerlink" title="é…ç½®å›½å†…é•œåƒæº"></a>é…ç½®å›½å†…é•œåƒæº</h2><pre class="line-numbers language-none"><code class="language-none">vi &#x2F;var&#x2F;jenkins_home&#x2F;hudson.model.UpdateCenter.xml å°†é‡Œé¢çš„urlä¿®æ”¹ä¸ºæ¸…åæº&lt;?xml version&#x3D;&#39;1.0&#39; encoding&#x3D;&#39;UTF-8&#39;?&gt;&lt;sites&gt;  &lt;site&gt;    &lt;id&gt;default&lt;&#x2F;id&gt;    &lt;url&gt;http:&#x2F;&#x2F;mirror.esuni.jp&#x2F;jenkins&#x2F;updates&#x2F;update-center.json&lt;&#x2F;url&gt;  &lt;&#x2F;site&gt;&lt;&#x2F;sites&gt;cd &#x2F;var&#x2F;jenkins_home&#x2F;war&#x2F;WEB-INF&#x2F;update-center-rootCAsrm -rf *vi  mirror-adapter.crt æ·»åŠ å¦‚ä¸‹å†…å®¹-----BEGIN CERTIFICATE-----MIICcTCCAdoCCQD&#x2F;jZ7AgrzJKTANBgkqhkiG9w0BAQsFADB9MQswCQYDVQQGEwJDTjELMAkGA1UECAwCR0QxCzAJBgNVBAcMAlNaMQ4wDAYDVQQKDAV2aWhvbzEMMAoGA1UECwwDZGV2MREwDwYDVQQDDAhkZW1vLmNvbTEjMCEGCSqGSIb3DQEJARYUYWRtaW5AamVua2lucy16aC5jb20wHhcNMTkxMTA5MTA0MDA5WhcNMjIxMTA4MTA0MDA5WjB9MQswCQYDVQQGEwJDTjELMAkGA1UECAwCR0QxCzAJBgNVBAcMAlNaMQ4wDAYDVQQKDAV2aWhvbzEMMAoGA1UECwwDZGV2MREwDwYDVQQDDAhkZW1vLmNvbTEjMCEGCSqGSIb3DQEJARYUYWRtaW5AamVua2lucy16aC5jb20wgZ8wDQYJKoZIhvcNAQEBBQADgY0AMIGJAoGBAN+6jN8rCIjVkQ0Q7ZbJLk4IdcHor2WdskOQMhlbR0gOyb4gRX+CorjDRjDm6mj2OohqlrtRxLGYxBnXFeQGU7wWjQHyfKDghtP51G&#x2F;672lXFtzBKXukHByHjtzrDxAutKTdolyBCuIDDGJmRk+LavIBY3&#x2F;Lxh6f0ZQSeCSJYiyxAgMBAAEwDQYJKoZIhvcNAQELBQADgYEAD92l26PoJcbl9GojK2L3pyOQjeeDm&#x2F;vV9e3REgwGmoIQzlubM0mjxpCz1J73nesoAcuplTEps&#x2F;46L7yoMjptCA3TU9FZAHNQ8dbza0vm4CF9841&#x2F;FIk8tsLtwCT6ivkAi0lXGwhX0FK7FaAyU0nNeo&#x2F;EPvDwzTim4XDK9j1WGpE&#x3D;-----END CERTIFICATE-----é‡å¯jenkinsdocker restart myjenkins<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h1 id="è®¿é—®jenkins"><a href="#è®¿é—®jenkins" class="headerlink" title="è®¿é—®jenkins"></a>è®¿é—®jenkins</h1><p>æµè§ˆå™¨ç™»å½•<a href="http://ip:10240/">http://ip:10240/</a></p><p>vi  &#x2F;var&#x2F;jenkins_home&#x2F;secrets&#x2F;initialAdminPassword  è·å–å¯†ç </p><h1 id="ä¸‹è½½æ’ä»¶"><a href="#ä¸‹è½½æ’ä»¶" class="headerlink" title="ä¸‹è½½æ’ä»¶"></a>ä¸‹è½½æ’ä»¶</h1>]]></content>
      
      
      <categories>
          
          <category> Devops </category>
          
      </categories>
      
      
        <tags>
            
            <tag> jenkins </tag>
            
            <tag> CICD </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>jiraä¸gitlabåˆ†æ”¯</title>
      <link href="/posts/53151.html"/>
      <url>/posts/53151.html</url>
      
        <content type="html"><![CDATA[<h2 id="jenkinsä¸­é›†æˆéœ€æ±‚ç®¡ç†å·¥å…·jira"><a href="#jenkinsä¸­é›†æˆéœ€æ±‚ç®¡ç†å·¥å…·jira" class="headerlink" title="jenkinsä¸­é›†æˆéœ€æ±‚ç®¡ç†å·¥å…·jira"></a>jenkinsä¸­é›†æˆéœ€æ±‚ç®¡ç†å·¥å…·jira</h2><h2 id="jiraä¸­é—®é¢˜å‘å¸ƒä¸gitlabMR-marge-request"><a href="#jiraä¸­é—®é¢˜å‘å¸ƒä¸gitlabMR-marge-request" class="headerlink" title="jiraä¸­é—®é¢˜å‘å¸ƒä¸gitlabMR(marge request)"></a>jiraä¸­é—®é¢˜å‘å¸ƒä¸gitlabMR(marge request)</h2><ul><li><p>æ•ˆæœ</p><ul><li>èƒ½å¤Ÿå®ç°åœ¨jaraç³»ç»Ÿå¯¹åº”çš„ä»»åŠ¡ä¸‹é¢åˆ›å»ºåˆ†æ”¯</li><li>æˆ–è€…å¼€å‘äººå‘˜åœ¨åˆ›å»ºåˆ†æ”¯çš„æ—¶å€™åŒ…å«jiraIDå­å…³è”</li></ul></li><li><p>ä¸è¶³</p><ul><li>æ’ä»¶ä¸ç¨³å®šï¼Œèµ„æºæ¶ˆè€—å¤§</li><li>æ‰‹åŠ¨åˆ›å»ºåˆ†æ”¯ï¼Œå¢åŠ äººå‘˜æˆæœ¬</li></ul></li><li><p>æ”¹è¿›</p><ul><li>åˆ›å»ºæ•…äº‹èƒ¡æ€»å’Œä»»åŠ¡è‡ªåŠ¨åœ¨å¯¹åº”çš„ä»£ç åº“åˆ›å»ºåˆ†æ”¯</li><li>æ•…äº‹æˆ–è€…ä»»åŠ¡åœ¨å…³è”åˆ°å¸†å¸ƒä¹‹åè‡ªåŠ¨åˆ›å»ºreleaseåˆ†æ”¯</li></ul></li><li><p>å®ç°</p><ul><li>é…ç½®jira webhook å‡ºå‘jenkisn æ“ä½œgitlabç³»ç»Ÿ</li></ul></li></ul><p>jiraåˆ†æ</p><p><img src="/1659600508967.png" alt="1659600508967"></p><p>webhookeventåˆ†æ</p><p><img src="/1659600564592.png" alt="1659600564592"></p><p>gitlabæ¥å£åˆ†æ</p><p><img src="/1659600616097.png" alt="1659600616097"></p><p>jenkinsåˆ†æ</p><p><img src="/1659600726233.png" alt="1659600726233"></p><pre class="line-numbers language-none"><code class="language-none">package org.devops&#x2F;&#x2F;å°è£…HTTPè¯·æ±‚def HttpReq(reqType,reqUrl,reqBody)&#123;    def apiServer &#x3D; &quot;http:&#x2F;&#x2F;192.168.1.200:8050&#x2F;rest&#x2F;api&#x2F;2&quot;      result &#x3D; httpRequest authentication: &#39;jira-admin-user&#39;,            httpMode: reqType,             contentType: &quot;APPLICATION_JSON&quot;,            consoleLogResponseBody: true,            ignoreSslErrors: true,             requestBody: reqBody,            url: &quot;$&#123;apiServer&#125;&#x2F;$&#123;reqUrl&#125;&quot;            &#x2F;&#x2F;quiet: true    return result&#125;&#x2F;&#x2F;æ‰§è¡ŒJQLdef RunJql(jqlContent)&#123;    apiUrl &#x3D; &quot;search?jql&#x3D;$&#123;jqlContent&#125;&quot;    response &#x3D; HttpReq(&quot;GET&quot;,apiUrl,&#39;&#39;)    return response&#125;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><pre class="line-numbers language-none"><code class="language-none">#!groovy@Library(&#39;jenkinslibrary&#39;) _def gitlab &#x3D; new org.devops.gitlab()def jira &#x3D; new org.devops.jira()def k8s &#x3D; new org.devops.kubernetes()pipeline &#123;    agent &#123; node &#123; label &quot;master&quot;&#125;&#125;    triggers &#123;        GenericTrigger( causeString: &#39;Trigger By Jira Server --&gt;&gt;&gt;&gt;&gt; Generic Cause&#39;,                         genericRequestVariables: [[key: &#39;projectKey&#39;, regexpFilter: &#39;&#39;]],                         genericVariables: [[defaultValue: &#39;&#39;, key: &#39;webHookData&#39;, regexpFilter: &#39;&#39;, value: &#39;$&#39;]],                         printContributedVariables: true,                         printPostContent: true,                         regexpFilterExpression: &#39;&#39;,                         regexpFilterText: &#39;&#39;,                         silentResponse: true,                         token: &quot;$&#123;JOB_NAME&#125;&quot;        )    &#125;    stages&#123;        stage(&quot;FileterData&quot;)&#123;            steps&#123;                script&#123;                    response &#x3D; readJSON text: &quot;&quot;&quot;$&#123;webHookData&#125;&quot;&quot;&quot;                    println(response)                    env.eventType &#x3D; response[&quot;webhookEvent&quot;]                    switch(eventType) &#123;                        case &quot;jira:version_created&quot;:                            env.versionName &#x3D; response[&quot;version&quot;][&quot;name&quot;]                            currentBuild.description &#x3D; &quot; Trigger by  $&#123;eventType&#125; $&#123;versionName&#125; &quot;                            break                        case [&quot;jira:issue_created&quot; , &quot;jira:issue_updated&quot; ]:                            env.issueName &#x3D; response[&#39;issue&#39;][&#39;key&#39;]                            env.userName &#x3D; response[&#39;user&#39;][&#39;name&#39;]                            env.moduleNames &#x3D; response[&#39;issue&#39;][&#39;fields&#39;][&#39;components&#39;]                            env.fixVersion &#x3D; response[&#39;issue&#39;][&#39;fields&#39;][&#39;fixVersions&#39;]                            currentBuild.description &#x3D; &quot; Trigger by $&#123;userName&#125; $&#123;eventType&#125; $&#123;issueName&#125; &quot;                            break                        &#x2F;*case &quot;jira:issue_updated&quot;:                            env.issueName &#x3D; response[&#39;issue&#39;][&#39;key&#39;]                            env.userName &#x3D; response[&#39;user&#39;][&#39;name&#39;]                            env.moduleNames &#x3D; response[&#39;issue&#39;][&#39;fields&#39;][&#39;components&#39;]                            env.fixVersion &#x3D; response[&#39;issue&#39;][&#39;fields&#39;][&#39;fixVersions&#39;]                            currentBuild.description &#x3D; &quot; Trigger by $&#123;userName&#125; $&#123;eventType&#125; $&#123;issueName&#125; &quot;                            break*&#x2F;                                                    case &quot;jira:version_released&quot;:                            env.versionName &#x3D; response[&quot;version&quot;][&quot;name&quot;]                            currentBuild.description &#x3D; &quot; Trigger by  $&#123;eventType&#125; $&#123;versionName&#125; &quot;                            break                        default:                            println(&quot;hello&quot;)                    &#125;                &#125;            &#125;        &#125;                &#x2F;*stage(&quot;CreateVersionFile&quot;)&#123;            when &#123;                environment name: &#39;eventType&#39;, value: &#39;jira:version_created&#39;             &#125;                        steps&#123;                script&#123;                    &#x2F;&#x2F;è·å–K8sæ–‡ä»¶                    response &#x3D; k8s.GetDeployment(&quot;demo-uat&quot;,&quot;demoapp&quot;)                    response &#x3D; response.content                    &#x2F;&#x2F;æ–‡ä»¶è½¬æ¢                    base64Content &#x3D; response.bytes.encodeBase64().toString()                   &#x2F;&#x2F;ä¸Šä¼ æ–‡ä»¶                   gitlab.CreateRepoFile(7,&quot;demo-uat%2f$&#123;versionName&#125;-uat.yaml&quot;,base64Content)                &#125;                        &#125;        &#125;                stage(&quot;DeleteBranch&quot;)&#123;            when &#123;                environment name: &#39;eventType&#39;, value: &#39;jira:version_released&#39;               &#125;                        steps&#123;                script&#123;                    &#x2F;&#x2F;è·å–issuesName                    println(&quot;project%20%3D%20$&#123;projectKey&#125;%20AND%20fixVersion%20%3D%20$&#123;versionName&#125;%20AND%20issuetype%20%3D%20Task&quot;)                    response &#x3D; jira.RunJql(&quot;project%20%3D%20$&#123;projectKey&#125;%20AND%20fixVersion%20%3D%20$&#123;versionName&#125;%20AND%20issuetype%20%3D%20Task&quot;)                                        response &#x3D; readJSON text: &quot;&quot;&quot;$&#123;response.content&#125;&quot;&quot;&quot;                    println(response)                    issues &#x3D; [:]                    for ( issue in response[&#39;issues&#39;])&#123;                        println(issue[&quot;key&quot;])                        println(issue[&quot;fields&quot;][&quot;components&quot;])                        issues[issue[&quot;key&quot;]] &#x3D; []                                                &#x2F;&#x2F;è·å–issueå…³è”çš„æ¨¡å—                        for (component in issue[&quot;fields&quot;][&quot;components&quot;] )&#123;                            issues[issue[&quot;key&quot;]].add(component[&quot;name&quot;])                        &#125;                                        &#125;                                        println(issues)                                                            &#x2F;&#x2F;æœç´¢gitlabåˆ†æ”¯æ˜¯å¦å·²åˆå¹¶ç„¶ååˆ é™¤                                                            for (issue in issues.keySet())&#123;                        for (projectName in issues[issue])&#123;                            repoName &#x3D; projectName.split(&quot;-&quot;)[0]                            projectId &#x3D; gitlab.GetProjectID(repoName, projectName)                                                        try &#123;                                println(&quot;åˆ›å»ºåˆå¹¶è¯·æ±‚  RELEASE-$&#123;versionName&#125;  ---&gt; master&quot;)                                result &#x3D; gitlab.CreateMr(projectId,&quot;RELEASE-$&#123;versionName&#125;&quot;,&quot;master&quot;,&quot;RELEASE-$&#123;versionName&#125;---&gt;master&quot;)                                result &#x3D; readJSON text: &quot;&quot;&quot;$&#123;result&#125;&quot;&quot;&quot;                                mergeId &#x3D; result[&quot;iid&quot;]                                gitlab.AcceptMr(projectId,mergeId)                                                                sleep 15                            &#125; catch(e)&#123;                                println(e)                            &#125;                            response &#x3D; gitlab.SearchProjectBranches(projectId,issue)                                                        println(response[projectId][0][&#39;merged&#39;])                                                        if (response[projectId][0][&#39;merged&#39;] &#x3D;&#x3D; false)&#123;                                println(&quot;$&#123;projectName&#125; --&gt; $&#123;issue&#125; --&gt;æ­¤åˆ†æ”¯æœªåˆå¹¶æš‚æ—¶å¿½ç•¥ï¼&quot;)                            &#125; else &#123;                                println(&quot;$&#123;projectName&#125; --&gt; $&#123;issue&#125; --&gt;æ­¤åˆ†æ”¯å·²åˆå¹¶å‡†å¤‡æ¸…ç†ï¼&quot;)                                gitlab.DeleteBranch(projectId,issue)                            &#125;                                                &#125;                    &#125;                &#125;            &#125;        &#125;*&#x2F;        stage(&quot;CreateBranchOrMR&quot;)&#123;            when &#123;                anyOf &#123;                    environment name: &#39;eventType&#39;, value: &#39;jira:issue_created&#39;   &#x2F;&#x2F;issue åˆ›å»º &#x2F;æ›´æ–°                    environment name: &#39;eventType&#39;, value: &#39;jira:issue_updated&#39;                 &#125;            &#125;            steps&#123;                script&#123;                    def projectIds &#x3D; []                    println(issueName)                    fixVersion &#x3D; readJSON text: &quot;&quot;&quot;$&#123;fixVersion&#125;&quot;&quot;&quot;                    println(fixVersion.size())                    &#x2F;&#x2F;è·å–é¡¹ç›®Id                    def projects &#x3D; readJSON text: &quot;&quot;&quot;$&#123;moduleNames&#125;&quot;&quot;&quot;                    for ( project in projects)&#123;                        println(project[&quot;name&quot;])                        projectName &#x3D; project[&quot;name&quot;]                        currentBuild.description +&#x3D; &quot;\n project: $&#123;projectName&#125;&quot;                        groupName &#x3D; projectName.split(&quot;-&quot;)[0]                                                try &#123;                            projectId &#x3D; gitlab.GetProjectID(groupName, projectName)                            println(projectId)                            projectIds.add(projectId)                           &#125; catch(e)&#123;                            println(e)                            println(&quot;æœªè·å–åˆ°é¡¹ç›®IDï¼Œè¯·æ£€æŸ¥æ¨¡å—åç§°ï¼&quot;)                        &#125;                    &#125;                     println(projectIds)                      if (fixVersion.size() &#x3D;&#x3D; 0) &#123;                        for (id in projectIds)&#123;                            println(&quot;æ–°å»ºç‰¹æ€§åˆ†æ”¯--&gt; $&#123;id&#125; --&gt; $&#123;issueName&#125;&quot;)                            currentBuild.description +&#x3D; &quot;\n æ–°å»ºç‰¹æ€§åˆ†æ”¯--&gt; $&#123;id&#125; --&gt; $&#123;issueName&#125;&quot;                            gitlab.CreateBranch(id,&quot;master&quot;,&quot;$&#123;issueName&#125;&quot;)                        &#125;                                                                        &#125; else &#123;                        fixVersion &#x3D; fixVersion[0][&#39;name&#39;]                        println(&quot;Issueå…³è”releaseæ“ä½œ,Jenkinsåˆ›å»ºåˆå¹¶è¯·æ±‚&quot;)                        currentBuild.description +&#x3D; &quot;\n Issueå…³è”releaseæ“ä½œ,Jenkinsåˆ›å»ºåˆå¹¶è¯·æ±‚ \n $&#123;issueName&#125; --&gt; RELEASE-$&#123;fixVersion&#125;&quot;                                                 for (id in projectIds)&#123;                            println(&quot;åˆ›å»ºRELEASE--&gt;$&#123;id&#125; --&gt;$&#123;fixVersion&#125;åˆ†æ”¯&quot;)                            gitlab.CreateBranch(id,&quot;master&quot;,&quot;RELEASE-$&#123;fixVersion&#125;&quot;)                                                        println(&quot;åˆ›å»ºåˆå¹¶è¯·æ±‚ $&#123;issueName&#125; ---&gt; RELEASE-$&#123;fixVersion&#125;&quot;)                            gitlab.CreateMr(id,&quot;$&#123;issueName&#125;&quot;,&quot;RELEASE-$&#123;fixVersion&#125;&quot;,&quot;$&#123;issueName&#125;---&gt;RELEASE-$&#123;fixVersion&#125;&quot;)                                                    &#125;                    &#125;                 &#125;            &#125;        &#125;    &#125;&#125;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h3 id="è‡ªåŠ¨åˆ›å»ºåˆ†æ”¯"><a href="#è‡ªåŠ¨åˆ›å»ºåˆ†æ”¯" class="headerlink" title="è‡ªåŠ¨åˆ›å»ºåˆ†æ”¯"></a>è‡ªåŠ¨åˆ›å»ºåˆ†æ”¯</h3><p><img src="/1659601319880.png" alt="1659601319880"></p><p><img src="/1659601365441.png" alt="1659601365441"></p><p><img src="/1659601383774.png" alt="1659601383774"></p><p><img src="/1659601399747.png" alt="1659601399747"></p><h3 id="è‡ªåŠ¨åˆ›å»ºåˆå¹¶è¯·æ±‚"><a href="#è‡ªåŠ¨åˆ›å»ºåˆå¹¶è¯·æ±‚" class="headerlink" title="è‡ªåŠ¨åˆ›å»ºåˆå¹¶è¯·æ±‚"></a>è‡ªåŠ¨åˆ›å»ºåˆå¹¶è¯·æ±‚</h3><p><img src="/1659601485742.png" alt="1659601485742"></p><p><img src="/1659601518681.png" alt="1659601518681"></p><p><img src="/1659601550683.png" alt="1659601550683"></p><p><img src="/1659601569263.png" alt="1659601569263"></p><h3 id="è‡ªåŠ¨æ¸…ç†åˆ†æ”¯"><a href="#è‡ªåŠ¨æ¸…ç†åˆ†æ”¯" class="headerlink" title="è‡ªåŠ¨æ¸…ç†åˆ†æ”¯"></a>è‡ªåŠ¨æ¸…ç†åˆ†æ”¯</h3><ul><li>jiararelease å‘å¸ƒåè‡ªåŠ¨æ¸…ç†åˆ†æ”¯</li><li>releaseå‘å¸ƒâ€”&gt;jenkinaâ€”&gt;æ¸…ç†gitlabåˆ†æ”¯ï¼ˆå·²åˆå¹¶çš„ç‰¹æ€§åˆ†æ”¯ï¼‰</li></ul><p><img src="/1659601736934.png" alt="1659601736934"></p><p><img src="/1659601758471.png" alt="1659601758471"></p>]]></content>
      
      
      <categories>
          
          <category> Devops </category>
          
      </categories>
      
      
        <tags>
            
            <tag> CICD </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>jenkinsä¸­é›†æˆartifactory</title>
      <link href="/posts/62927.html"/>
      <url>/posts/62927.html</url>
      
        <content type="html"><![CDATA[<h1 id="jenkinsä¸­é›†æˆartifactory"><a href="#jenkinsä¸­é›†æˆartifactory" class="headerlink" title="jenkinsä¸­é›†æˆartifactory"></a>jenkinsä¸­é›†æˆartifactory</h1><h2 id="artifactory-å’Œnexusçš„åŒºåˆ«"><a href="#artifactory-å’Œnexusçš„åŒºåˆ«" class="headerlink" title="artifactory å’Œnexusçš„åŒºåˆ«"></a>artifactory å’Œnexusçš„åŒºåˆ«</h2><p>å‚è€ƒ <a href="http://t.zoukankan.com/qingbaizhinian-p-13272346.html">åˆ¶å“ä»“åº“çš„artifactoryçš„ä»‹ç»å’Œéƒ¨ç½² - èµ°çœ‹çœ‹ (zoukankan.com)</a> </p><blockquote><p>Artifactoryæ˜¯ç›®å‰å›½å†…å”¯ä¸€æä¾›åŸå‚æŠ€æœ¯æ”¯æŒçš„ä¼ä¸šçº§å…¨è¯­è¨€åˆ¶å“ç®¡ç†è§£å†³æ–¹æ¡ˆï¼Œå…·æœ‰åŸç”Ÿé«˜å¯ç”¨ä»¥åŠçƒ­å®¹ç¾å¤‡ä»½åŠŸèƒ½ï¼Œä¸“é—¨é’ˆå¯¹å¤§å‹ä¼ä¸šè®¾è®¡ã€‚è€ŒNexusä¸å…·å¤‡ç›¸åº”åŠŸèƒ½ï¼Œä¼šå¤§å¤§æé«˜æŠ€æœ¯äººå‘˜çš„å­¦ä¹ æˆæœ¬ï¼Œä»¥åŠä¼ä¸šçš„ç”¨äººæˆæœ¬ï¼›</p><p>b. Artifactoryæä¾›å…ƒæ•°æ®åŠŸèƒ½ï¼Œå¯ä»¥çœŸæ­£æ„ä¹‰ä¸Šå°†å¼€å‘è¿ç»´é€šè¿‡åˆ¶å“ç«¯åˆ°ç«¯çš„è”ç³»èµ·æ¥ï¼Œéœ€æ±‚ã€ä»£ç æäº¤ã€å„é¡¹æµ‹è¯•ç»“æœã€å®¡æ‰¹æµç¨‹ã€æ„å»ºè¿‡ç¨‹ä»¥åŠéƒ¨ç½²è¿‡ç¨‹éƒ½èƒ½ä¸€ç›®äº†ç„¶çš„æ˜¾ç¤ºï¼Œå½»åº•æ‰“ç ´äº†ä¿¡æ¯çƒŸå›±åŒ–çš„é—®é¢˜ï¼Œè€ŒNexusä¸å…·å¤‡æ­¤é¡¹åŠŸèƒ½ï¼›</p><p>c. Artifactoryæ‰€æœ‰åŠŸèƒ½éƒ½æä¾›Rest APIï¼Œå…¨æ¥å£æ–¹ä¾¿å°è£…ï¼Œèƒ½ç»“åˆç”¨æˆ·çš„ä¸åŒéœ€æ±‚è¿›è¡ŒäºŒæ¬¡å¼€å‘ï¼Œä»è€Œæ‰“é€ æœ€è´´åˆç”¨æˆ·è¡Œä¸ºä¹ æƒ¯çš„åˆ¶å“ç®¡ç†å·¥å…·ï¼Œè€ŒNexusæ¥å£ä¸å…¨é¢ï¼›</p><p>d. ArtifactoryåŒ…å«Xrayç»„ä»¶ï¼Œèƒ½å¤Ÿæ‰«æç¬¬ä¸‰æ–¹ç»„ä»¶å®‰å…¨æ¼æ´ï¼Œå¹¶ä¸”èƒ½å¤Ÿä»å½±å“èŒƒå›´å’Œå½±å“æ·±åº¦ä¸¤ä¸ªç»´åº¦å¿«é€Ÿå®šä½å®‰å…¨é£é™©ï¼Œå¤§å¤§æé«˜ä¼ä¸šè½¯ä»¶å¼€å‘å®‰å…¨æ€§ï¼Œè€ŒNexusä¸å…·å¤‡æ­¤åŠŸèƒ½ã€‚</p><p>e. Artifactoryèƒ½å¤Ÿç®¡ç†ä»»ä½•å½¢å¼çš„äºŒè¿›åˆ¶æ–‡ä»¶ï¼Œä»¥åŠç›¸å…³è”çš„éäºŒè¿›åˆ¶æ–‡ä»¶ï¼Œå¹¶æä¾›å®Œå¤‡çš„è®¿é—®æ–¹å¼å’Œæœ¬åœ°ä»“åº“ï¼Œè€ŒNexusæ­¤é¡¹åŠŸèƒ½ä¸å…¨é¢ã€‚</p><p>æ­¤å¤– nexuså¸¸ç”¨æ¥åšç§æœå’Œä»£ç†ä»“å…·ï¼Œ artifactoryå¸¸ç”¨æ¥åšåˆ¶å“åº“</p></blockquote><h2 id="å®‰è£…"><a href="#å®‰è£…" class="headerlink" title="å®‰è£…"></a>å®‰è£…</h2><pre class="line-numbers language-none"><code class="language-none">docker run -id \--privileged&#x3D;true --name&#x3D;nexus3 \-p 8081:8081 \-v $&#123;LOCALDIR&#125;&#x2F;nexus3&#x2F;nexus-data:&#x2F;nexus-data \sonatype&#x2F;nexus3:3.20.1<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>è®¿é—®ï¼š <a href="http://localhost:8081/artifactory/webapp/home.html">http://localhost:8081/artifactory/webapp/home.html</a>  ç”¨æˆ·åå¯†ç ï¼š admin&#x2F;password </p><p>ç™»å½•ç³»ç»Ÿæ˜¾ç¤ºå¦‚ä¸‹</p><p><img src="/1666965452765.png" alt="1666965452765"></p><p>ç™»å½•ç³»ç»Ÿåä¿®æ”¹å¯†ç </p><p>å¯ä»¥é€‰æ‹©æ„å»ºç¼–è¯‘ä»“åº“</p><p>Artifactory ä»“åº“ä¸»è¦æœ‰å››ç§ç±»å‹ï¼šè¿œç¨‹ä»“åº“ã€æœ¬åœ°ä»“åº“ã€è™šæ‹Ÿä»“åº“åŠåˆ†å‘ä»“åº“ï¼Œåˆ†åˆ«åº”ç”¨åœ¨å¦‚ä¸‹ä¸åŒçš„åœºæ™¯ã€‚</p><p>è¿œç¨‹ä»“åº“ï¼šArtifactory ä»“åº“æ”¯æŒä»£ç†å…¬ç½‘æˆ–å†…ç½‘äºŒè¿›åˆ¶è½¯ä»¶åˆ¶å“ä»“åº“(Artifactory, Nexusï¼ŒHarborç­‰)ï¼ŒæŒ‰éœ€è·å–ååœ¨æœ¬åœ°è¿›è¡Œç¼“å­˜ï¼Œå¯å¤§å¹…åº¦æå‡æ„å»ºæ•ˆç‡</p><p>æœ¬åœ°ä»“åº“ï¼šArtifactory æœ¬åœ°ä»“åº“ç”¨æ¥å­˜å‚¨æœ¬åœ°æ„å»ºäº§å‡ºçš„è½¯ä»¶åˆ¶å“ã€‚æœ¬åœ°ä»“åº“ä¸­çš„è½¯ä»¶åˆ¶å“é€šå¸¸éƒ½å¸¦æœ‰ä¸°å¯Œçš„å…ƒæ•°æ®ï¼Œå¹¶ä¸”é€šè¿‡åŸºäºè§’è‰²çš„è®¿é—®æ§åˆ¶(RBAC)å®ç°èµ„æºéš”ç¦»</p><p>è™šæ‹Ÿä»“åº“ï¼šä¸ºæ»¡è¶³åˆ¶å“ç®¡ç†çš„å¤šå›¢é˜Ÿåä½œéœ€æ±‚ï¼Œè™šæ‹Ÿä»“åº“é€šè¿‡æ‰“åŒ…ä»»æ„æ•°é‡çš„è¿œç¨‹ä»“åº“å’Œæœ¬åœ°ä»“åº“ï¼Œæš´éœ²å”¯ä¸€çš„è®¿é—®å…¥å£çš„æ–¹å¼ï¼Œå°†åˆ¶å“æä¾›è€…å’Œæ¶ˆè´¹è€…ä¹‹é—´çš„è€¦åˆåº¦é™åˆ°æœ€ä½ï¼Œæå‡åä½œæ•ˆç‡</p><p>åˆ†å‘ä»“åº“ï¼šåˆ†å‘ä»“åº“é€šè¿‡JFrog Bintray SaaSæœåŠ¡æ»¡è¶³è½¯ä»¶åˆ¶å“å…¬ç½‘åˆ†å‘çš„éœ€æ±‚ï¼Œæä¾›é»˜è®¤çš„å…¨çƒCDNåŠ é€ŸæœåŠ¡</p><p><img src="/1666965556299.png" alt="1666965556299"></p><p><img src="/1666965612827.png" alt="1666965612827"></p><h2 id="jenkinsä¸­é›†æˆartficatory"><a href="#jenkinsä¸­é›†æˆartficatory" class="headerlink" title="jenkinsä¸­é›†æˆartficatory"></a>jenkinsä¸­é›†æˆartficatory</h2><ul><li><p>jenkinsä¸­artifactoryæ’ä»¶</p></li><li><p>é…ç½®artifactoryä»“åº“ä¿¡æ¯</p><p><img src="/1666965796320.png" alt="1666965796320"></p><p><img src="/1666965829033.png" alt="1666965829033"></p></li></ul><h1 id="ä½¿ç”¨artifactoryæ’ä»¶æ”¶é›†æ„å»ºæ•°æ®"><a href="#ä½¿ç”¨artifactoryæ’ä»¶æ”¶é›†æ„å»ºæ•°æ®" class="headerlink" title="ä½¿ç”¨artifactoryæ’ä»¶æ”¶é›†æ„å»ºæ•°æ®"></a>ä½¿ç”¨artifactoryæ’ä»¶æ”¶é›†æ„å»ºæ•°æ®</h1><pre class="line-numbers language-none"><code class="language-none">package org.devops&#x2F;&#x2F;Mavenæ‰“åŒ…æ„å»º,ä¸Šä¼ æ„å»ºä¿¡æ¯def MavenBuild(buildShell)&#123;    def server &#x3D; Artifactory.newServer url: &quot;http:&#x2F;&#x2F;192.168.1.200:30082&#x2F;artifactory&quot;    def rtMaven &#x3D; Artifactory.newMavenBuild()    def buildInfo    server.connection.timeout &#x3D; 300    server.credentialsId &#x3D; &#39;artifactory-admin-user&#39;     &#x2F;&#x2F;mavenæ‰“åŒ…    rtMaven.tool &#x3D; &#39;M2&#39;     buildInfo &#x3D; Artifactory.newBuildInfo()    String newBuildShell &#x3D; &quot;$&#123;buildShell&#125;&quot;.toString()    println(newBuildShell)    rtMaven.run pom: &#39;pom.xml&#39;, goals: newBuildShell, buildInfo: buildInfo    &#x2F;&#x2F;ä¸Šä¼ buildä¿¡æ¯    server.publishBuildInfo buildInfo&#125;def main(buildType,buildShell)&#123;    if(buildType &#x3D;&#x3D; &quot;mvn&quot;)&#123;        MavenBuild(buildShell)    &#125;&#125;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p><img src="/1666967385494.png" alt="1666967385494"></p><h1 id="å‘½ä»¤è§„èŒƒ"><a href="#å‘½ä»¤è§„èŒƒ" class="headerlink" title="å‘½ä»¤è§„èŒƒ"></a>å‘½ä»¤è§„èŒƒ</h1><p><img src="/1666967508528.png" alt="1666967508528"></p><h1 id="ä½¿ç”¨rtUploadæ’ä»¶ä¸Šä¼ åˆ¶å“åˆ°artifactory"><a href="#ä½¿ç”¨rtUploadæ’ä»¶ä¸Šä¼ åˆ¶å“åˆ°artifactory" class="headerlink" title="ä½¿ç”¨rtUploadæ’ä»¶ä¸Šä¼ åˆ¶å“åˆ°artifactory"></a>ä½¿ç”¨rtUploadæ’ä»¶ä¸Šä¼ åˆ¶å“åˆ°artifactory</h1><pre class="line-numbers language-none"><code class="language-none">&#x2F;&#x2F;ä¸Šä¼ åˆ¶å“def PushArtifact()&#123;            &#x2F;&#x2F;é‡å‘½ååˆ¶å“    def jarName &#x3D; sh returnStdout: true, script: &quot;cd target;ls *.jar&quot;    jarName &#x3D; jarName - &quot;\n&quot;    def pom &#x3D; readMavenPom file: &#39;pom.xml&#39;    env.pomVersion &#x3D; &quot;$&#123;pom.version&#125;&quot;    env.serviceName &#x3D; &quot;$&#123;JOB_NAME&#125;&quot;.split(&quot;_&quot;)[0]    env.buildTag &#x3D; &quot;$&#123;BUILD_ID&#125;&quot;    def newJarName &#x3D; &quot;$&#123;serviceName&#125;-$&#123;pomVersion&#125;-$&#123;buildTag&#125;.jar&quot;    println(&quot;$&#123;jarName&#125;  -------&gt;&gt;&gt; $&#123;newJarName&#125;&quot;)    sh &quot; mv target&#x2F;$&#123;jarName&#125;  target&#x2F;$&#123;newJarName&#125;&quot;        &#x2F;&#x2F;ä¸Šä¼ åˆ¶å“    env.businessName &#x3D; &quot;$&#123;env.JOB_NAME&#125;&quot;.split(&quot;-&quot;)[0]    env.repoName &#x3D; &quot;$&#123;businessName&#125;-$&#123;JOB_NAME.split(&quot;_&quot;)[-1].toLowerCase()&#125;&quot;    println(&quot;æœ¬æ¬¡åˆ¶å“å°†è¦ä¸Šä¼ åˆ°$&#123;repoName&#125;ä»“åº“ä¸­!&quot;)       env.uploadDir &#x3D; &quot;$&#123;repoName&#125;&#x2F;$&#123;businessName&#125;&#x2F;$&#123;serviceName&#125;&#x2F;$&#123;pomVersion&#125;&quot;        println(&#39;ä¸Šä¼ åˆ¶å“&#39;)    rtUpload (        serverId: &quot;artifactory&quot;,        spec:            &quot;&quot;&quot;&#123;            &quot;files&quot;: [                &#123;                &quot;pattern&quot;: &quot;target&#x2F;$&#123;newJarName&#125;&quot;,                &quot;target&quot;: &quot;$&#123;uploadDir&#125;&#x2F;&quot;                &#125;            ]            &#125;&quot;&quot;&quot;    )&#125;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h1 id="artifactoryå’Œnexuså¯¹æ¯”"><a href="#artifactoryå’Œnexuså¯¹æ¯”" class="headerlink" title="artifactoryå’Œnexuså¯¹æ¯”"></a>artifactoryå’Œnexuså¯¹æ¯”</h1><p>æœ€è¿‘ç»å¸¸è¢«é—®åˆ°ä¸€ä¸ªé—®é¢˜ï¼šâ€æˆ‘å·²ç»åœ¨ç”¨ Nexus ç®¡ç† Maven ä»“åº“ï¼Œç”¨ Artifactory æ›¿æ¢å®ƒæœ‰ä»€ä¹ˆå¥½å¤„ï¼Ÿâ€</p><p>å…¶å®è¿™ä¸ªé—®é¢˜åœ¨ç¤¾åŒºé‡Œæ—©å·²æœ‰å®˜æ–¹çš„ç­”æ¡ˆï¼š<a href="https://binary-repositories-comparison.github.io/">https://binary-repositories-comparison.github.io/</a></p><p>è¿™ä¸ª wiki æ˜¯ Artifactoryï¼ŒNexus ç­‰å„è‡ªçš„å¼€å‘å›¢é˜Ÿç»´æŠ¤çš„äº§å“åŠŸèƒ½åˆ—è¡¨ï¼Œç›®çš„æ˜¯ä¿è¯æ‰€åˆ—å‡ºçš„åŠŸèƒ½æ˜¯å…¬å¹³ï¼Œå…¬æ­£ï¼Œå…¬å¼€çš„ã€‚æ¥çœ‹çœ‹å…·ä½“çš„å¯¹æ¯”ã€‚</p><p>è¯­è¨€&amp;å·¥å…·æ”¯æŒ</p><p>Artifactory</p><blockquote><p>Mavenã€Dockerã€Bowerï¼ˆhtml&amp;jsï¼‰ã€Chefã€Puppetã€CocoaPodsï¼ˆIOSï¼‰ã€Conanï¼ˆC&#x2F;C++ï¼‰ã€Debianã€Ruby Gemsã€Git LFSã€Gradleã€Ivyã€Npmã€Nugetã€Opkgã€Php composerã€Pypiã€SBTã€Vagrantï¼ˆboxï¼‰ã€Rpmã€Genericï¼ˆé€šç”¨ï¼‰</p></blockquote><p>Nexus</p><blockquote><p>Bowerã€Javaã€Npmã€Dockerã€Nugetã€Pypi</p></blockquote><p> å¤š Docker é•œåƒæ³¨å†Œä¸­å¿ƒ</p><p>Artifactory</p><blockquote><p>æ”¯æŒå¤š Docker é•œåƒæ³¨å†Œä¸­å¿ƒï¼Œç”¨æˆ·å¯ä»¥åš Docker é•œåƒçš„æµæ°´çº¿ Promotionã€‚<br>åˆ é™¤ Docker é•œåƒæ—¶ä¸éœ€è¦åœæœã€‚</p></blockquote><p>Nexus 3.0</p><blockquote><p>æ”¯æŒ Docker é•œåƒæ³¨å†Œä¸­å¿ƒã€‚</p><p>åˆ é™¤ Docker é•œåƒæ—¶éœ€è¦åœæœã€‚</p></blockquote><p>æ˜¯å¦æ”¯æŒ REST API</p><p>Artifactory</p><blockquote><p>å…¨é¢è¦†ç›–çš„ REST APIã€‚ä¸ UI æ¾è€¦åˆï¼Œå¯ä»¥åŸºäº REST API å®ç°è‡ªå·±çš„ UIã€‚</p></blockquote><p>Nexus 3.0</p><blockquote><p>éƒ¨åˆ†æ”¯æŒã€‚</p></blockquote><p>å…ƒæ•°æ®</p><p>Artifactory</p><blockquote><p>æ”¯æŒè‡ªå®šä¹‰å±æ€§ä»¥åŠå±æ€§é›†åˆ°ä»»ä½• Layout çš„äºŒè¿›åˆ¶æ–‡ä»¶ä¸Š;å¯ä»¥åŸºäºè¿™äº›å±æ€§è¿›è¡Œè¿‡æ»¤æœç´¢ï¼Œå¹¶ä¸”æ”¯æŒRestful æ–¹å¼æœç´¢ï¼›</p><p>è·¨åœ°åŸŸè¿œç¨‹ä»£ç†ä»“åº“ä¹‹é—´å¯ä»¥åŒæ­¥å±æ€§ï¼Œç®¡ç†å¼‚åœ°ååŒå¼€å‘ã€‚</p></blockquote><p>Nexus </p><blockquote><p>Nexus2 æ”¯æŒ Custom metadata pluginã€‚</p><p>Nexus3 ä¸æ”¯æŒã€‚</p></blockquote><p>CI é›†æˆ</p><p>Artifactory</p><blockquote><p>æ”¶é›†æ‰€æœ‰æ„å»ºç›¸å…³ç¯å¢ƒä¿¡æ¯ã€‚</p><p>æ”¶é›†å‘å¸ƒä»¥åŠä¾èµ–çš„æ¨¡å—ä¿¡æ¯ã€‚</p><p>æ”¯æŒæ„å»º Promotion å‡çº§ã€‚</p><p>å»ºç«‹äºŒè¿›åˆ¶æ–‡ä»¶å’Œæ„å»ºçš„å…³ç³»ï¼Œå¤šç»´åº¦ç®¡ç†äºŒè¿›åˆ¶æ–‡ä»¶ç”Ÿå‘½å‘¨æœŸã€‚</p><p>æ”¯æŒå¯è§†åŒ–çš„æ­£-åå‘ä¾èµ–å…³ç³»å±•ç¤ºã€‚</p></blockquote><p>Nexus</p><blockquote><p>ä¸æ”¯æŒã€‚</p></blockquote><p>Checksum æ£€æŸ¥</p><p>Artifactory</p><blockquote><p>åœ¨ä¸Šä¼ æ—¶æ£€æŸ¥ Checksumï¼Œè‹¥å‘ç°è¯¥æ–‡ä»¶å·²ç»è¢«ä¸Šä¼ è¿‡ï¼Œåˆ™ä¸é‡å¤ä¸Šä¼ ã€‚<br>è‹¥æ–‡ä»¶ä¸¢å¤± Checksumï¼Œä¼šé‡æ–°è®¡ç®—å¹¶è®°å½•ã€‚</p></blockquote><p>Nexus 3.0</p><blockquote><p>ä¸æ”¯æŒã€‚</p></blockquote><p>ä¸»åŠ¨å¹¶å‘ä¸‹è½½ä¾èµ–</p><p>Artifactory</p><blockquote><p>æ”¯æŒä¸»åŠ¨å¹¶å‘ä¸‹è½½ç›¸å…³çš„ä¾èµ–ã€‚ä¾‹å¦‚ Aä¾èµ– Bï¼ŒB ä¾èµ– Cï¼ŒArtifactory åœ¨ä¸‹è½½ A çš„åŒæ—¶ï¼Œä¼šå¹¶å‘çš„ä¸‹è½½ B å’Œ Cã€‚</p></blockquote><p>Nexus 3.0</p><blockquote><p>ä¸æ”¯æŒã€‚</p></blockquote><p>ä»»æ„å…¨å±€æŸ¥è¯¢</p><p>Artifactory</p><blockquote><p>æä¾› AQLï¼ˆArtifactory Query Languageï¼‰æ”¯æŒä»»ä½•æ¡ä»¶çš„æŸ¥è¯¢ï¼ŒåŒ…æ‹¬æ’åºï¼Œè¿‡æ»¤ï¼Œè¿”å›å­—æ®µç­‰ç­‰ã€‚</p></blockquote><p>Nexus 3.0</p><blockquote><p>æ”¯æŒæœ‰é™çš„æŸ¥è¯¢ï¼Œä¾‹å¦‚é€šè¿‡åå­—æŸ¥è¯¢ã€‚</p></blockquote><p>æ·±åº¦æ–‡ä»¶æŸ¥è¯¢</p><p>Artifactory</p><blockquote><p>æ”¯æŒåœ¨ä»»æ„å¯è§£å‹æ–‡ä»¶é‡Œæœç´¢ç±»æ–‡ä»¶ï¼Œå¹¶æä¾›åœ°å€ã€‚ä¾‹å¦‚ï¼šåœ¨ä»»æ„ Jar åŒ…é‡Œæ‰¾åˆ° .Class æ–‡ä»¶ã€‚</p></blockquote><p>Nexus 3.0</p><blockquote><p>ä¸æ”¯æŒã€‚</p></blockquote><p>ä»“åº“æ•°æ®ç»Ÿè®¡</p><p>Artifactory</p><blockquote><p>æä¾›ä»“åº“å¤§å°ï¼Œå®é™…å­˜å‚¨å¤§å°ï¼Œæ–‡ä»¶æ•°é‡ï¼Œä¸‹è½½é‡ï¼Œä¸Šä¼ è€…ç­‰ç»Ÿè®¡</p></blockquote><p>Nexus 3.0</p><blockquote><p>ä¸æ”¯æŒ</p></blockquote><p>æŸ¥çœ‹ Jar æ–‡ä»¶</p><p>Artifactory</p><blockquote><p>èƒ½å¤ŸæŸ¥çœ‹ Jaræ–‡ä»¶é‡Œçš„ä»»ä½•å†…å®¹ï¼ŒåŒ…æ‹¬ Jar æ–‡ä»¶é‡Œçš„æºä»£ç ã€‚</p></blockquote><p>Nexus 3.0</p><blockquote><p>ä¸æ”¯æŒã€‚</p></blockquote><p>ä»“åº“å¤åˆ¶</p><p>Artifactory</p><blockquote><p>æ”¯æŒæ–‡ä»¶å¤¹çº§åˆ«çš„æ–‡ä»¶å®æ—¶å¤åˆ¶ã€‚æ”¯æŒå¹¶å‘å¤šåœ°å¤åˆ¶ï¼ˆMulti-Pushï¼‰ä¿è¯å¤šåœ°ä»“åº“çš„ä¸€è‡´æ€§ã€‚</p></blockquote><p>Nexus 3.0</p><blockquote><p>ä¸æ”¯æŒã€‚</p></blockquote><p>æ”¯æŒé«˜å¯ç”¨</p><p>Artifactory</p><blockquote><p>æ”¯æŒ0å®•æœºæ—¶é—´çš„é«˜å¯ç”¨é›†ç¾¤ï¼Œå¹¶ä¸”å¯ä»¥è‡ªç”±æ°´å¹³æ‰©å±•ã€‚æ”¯æŒ Active-Active é«˜å¯ç”¨ã€‚</p></blockquote><p>Nexus 3.0</p><blockquote><p>æ”¯æŒMaster-Slaveã€‚</p></blockquote><p>æ•°æ®åº“å­˜å‚¨</p><p>Artifactory</p><blockquote><p>å®‰è£…åŒ…é»˜è®¤ç»‘å®š Apache Derbyã€‚æ”¯æŒMySQLï¼ŒPostgreSQLï¼ŒOracleï¼ŒMS SQL Serverã€‚</p></blockquote><p>Nexus</p><blockquote><p>å®‰è£…åŒ…é»˜è®¤ç»‘å®š H2ã€‚</p></blockquote><p>å•†ä¸šæ”¯æŒ</p><p>Artifactory</p><blockquote><p>ä¸é™åˆ¶ç”¨æˆ·æ•°é‡ï¼Œä¸é™åˆ¶æœåŠ¡å™¨ç¡¬ä»¶é…ç½®ã€‚30å¤©å…è´¹è¯•ç”¨ï¼Œå¹¶å¯ä»¥é€‚å½“å»¶æœŸã€‚24&#x2F;7 supportï¼Œ4å°æ—¶å“åº”æ—¶é—´ã€‚</p></blockquote><p>Nexus</p><blockquote><p>æŒ‰ç”¨æˆ·æ•°é‡æ”¶è´¹ï¼Œä¸é™åˆ¶æœåŠ¡å™¨æ•°é‡ã€‚</p><p>14å¤©å…è´¹è¯•ç”¨ï¼Œå¹¶å¯ä»¥é€‚å½“å»¶æœŸã€‚</p><p>24&#x2F;7 supportã€‚</p></blockquote><blockquote><p>è°·æ­Œäº‘å¹³å°, äºšé©¬é€Š, è‹¹æœï¼ŒTwitter, Linkedin, Netflix, Mesosphere, ç”²éª¨æ–‡ï¼Œæ€ç§‘ï¼Œåä¸ºï¼Œè…¾è®¯ï¼Œæ»´æ»´ç­‰3000+ä¼ä¸šï¼Œéƒ½å·²ç»ä½¿ç”¨ Artifactory ç®¡ç† Mavenï¼ŒDockerï¼ŒYumï¼ŒNPMï¼ŒC&#x2F;C++ç­‰ä»“åº“ã€‚</p></blockquote><p>JFrog å¼€å‘äº†ä¸“é—¨çš„å·¥å…·æ”¯æŒä» Nexus å¯¼å‡ºæ•°æ®åˆ° Artifactoryï¼Œæ¬¢è¿è¯•ç”¨ï¼</p><p>ä¸‹è½½JFrog Artifactory å¼€æºç‰ˆï¼ˆä»£æ›¿ Nexusï¼‰ï¼š</p><p><a href="http://www.jfrogchina.com/open-source/">http://www.jfrogchina.com/open-source/</a></p><p>ä¸‹è½½JFrog Artifactory ä¼ä¸šç‰ˆ(å…è´¹è¯•ç”¨)ï¼š</p><p><a href="https://www.jfrog.com/artifactory/free-trial/?lang=zh-hans#High-Availability">https://www.jfrog.com/artifactory/free-trial/?lang=zh-hans#High-Availability</a></p><p>å…³äºJFrog</p><p>ä¸–ç•Œé¢†å…ˆDevOpså¹³å°</p><p>å…¬å¸æˆç«‹äº2008å¹´ï¼Œåœ¨ç¾å›½ã€ä»¥è‰²åˆ—ã€æ³•å›½ã€è¥¿ç­ç‰™ï¼Œä»¥åŠä¸­å›½åŒ—äº¬å¸‚æ‹¥æœ‰è¶…è¿‡200åå‘˜å·¥ã€‚JFrog æ‹¥æœ‰3000å¤šä¸ªä»˜è´¹å®¢æˆ·ï¼Œå…¶ä¸­çŸ¥åå…¬å¸åŒ…æ‹¬å¦‚è…¾è®¯ã€è°·æ­Œã€æ€ç§‘ã€Netflixã€äºšé©¬é€Šã€è‹¹æœç­‰ã€‚è¿ç»­ä¸¤å¹´ï¼ŒJFrog è¢«å¾·å‹¤è¯„é€‰ä¸º50å®¶å‘å±•æœ€å¿«çš„æŠ€æœ¯å…¬å¸ä¹‹ä¸€ï¼Œå¹¶è¢«è¯„ä¸ºç¡…è°·å¢é•¿æœ€å¿«çš„ç§è¥ä¼ä¸šä¹‹ä¸€ã€‚</p>]]></content>
      
      
      <categories>
          
          <category> Devops </category>
          
      </categories>
      
      
        <tags>
            
            <tag> CICD </tag>
            
            <tag> åˆ¶å“åº“ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>pipelineæ¨¡æ¿</title>
      <link href="/posts/61292.html"/>
      <url>/posts/61292.html</url>
      
        <content type="html"><![CDATA[<h2 id="pipelineç®€å•çš„æµç¨‹æ¨¡æ¿"><a href="#pipelineç®€å•çš„æµç¨‹æ¨¡æ¿" class="headerlink" title="pipelineç®€å•çš„æµç¨‹æ¨¡æ¿"></a>pipelineç®€å•çš„æµç¨‹æ¨¡æ¿</h2><p>æœ¬å®ä¾‹é€šè¿‡æµæ°´çº¿çš„æ–¹å¼ï¼Œåœ¨jenkisné‡Œé…ç½®å…¨å±€å˜é‡ï¼ˆnpm, ant, maven, gradleï¼‰,é€šè¿‡é¡¹ç›®é‡Œé…ç½®å‚æ•°buildShellæ¥æ§åˆ¶å®é™…çš„æ„å»ºå·¥å…·ï¼Œå®ç°ç”¨æˆ·å¯ä»¥é€‰æ‹©æ„å»ºå·¥å…·æ¥æ‰“åŒ…çš„åŠŸèƒ½</p><p>é¡¹ç›®å‡†å¤‡ï¼š</p><ol><li>å®‰è£… npm ant maven gradle</li><li>é…ç½®é¡¹ç›®å‚æ•°</li><li>é…ç½®ç³»ç»Ÿç®¡ç†â€”-&gt; å…¨å±€å˜é‡é…ç½®</li></ol><pre class="line-numbers language-none"><code class="language-none">#!groovyString buildShell &#x3D; &quot;$&#123;env.buildShell&#125;&quot; &#x2F;&#x2F;jenkinsé¡¹ç›®ä¸­é…ç½®çš„å‚æ•°åç§°pipeline&#123;    agent any    stages&#123;        stage(&quot;build&quot;)&#123;            steps&#123;                script&#123;                    mvnHome &#x3D; tool &quot;M2&quot;                    sh &quot;$&#123;mvnHome&#125;&#x2F;bin&#x2F;mvn -v&quot;                    &#x2F;&#x2F; sh &quot;$&#123;mvnHome&#125;&#x2F;bin&#x2F;mvn $&#123;buildShell&#125;&quot; &#x2F;&#x2F;ä½¿ç”¨å‚æ•°çš„æ–¹å¼è¿›è¡Œæ„å»º                &#125;            &#125;        &#125;        stage(&quot;ant&quot;)&#123;          steps&#123;                script&#123;                    try&#123;                        antHome &#x3D; tool &quot;ANT&quot;                        &#x2F;&#x2F;sh &quot;$&#123;antHome&#125;&#x2F;bin&#x2F;ant -v&quot;                        sh &quot;$&#123;antHome&#125;&#x2F;bin&#x2F;ant $&#123;buildShell&#125;&quot; &#x2F;&#x2F;ä½¿ç”¨å‚æ•°çš„æ–¹å¼è¿›è¡Œæ„å»º                    &#125;catch(e)&#123;                        println(e)                    &#125;                &#125;            &#125;        &#125;        stage(&quot;gradlebuild&quot;)&#123;          steps&#123;                script&#123;                    gradleHome &#x3D; tool &quot;GRADLE&quot;                    println(&quot;$&#123;gradleHome&#125;&quot;)                    sh &quot;$&#123;gradleHome&#125;&#x2F;bin&#x2F;gradle -v&quot;                    &#x2F;&#x2F;sh &quot;$&#123;gradleHome&#125;&#x2F;bin&#x2F;gradle $&#123;buildShell&#125;&quot; &#x2F;&#x2F;ä½¿ç”¨å‚æ•°çš„æ–¹å¼è¿›è¡Œæ„å»º                &#125;            &#125;        &#125;         stage(&quot;npmbuild&quot;)&#123;          steps&#123;                script&#123;                    npmHome &#x3D; tool &quot;NPM&quot;                    &#x2F;&#x2F;sh &quot;$&#123;npmHome&#125;&#x2F;bin&#x2F;npm -v&quot;                    sh &quot;$&#123;npmHome&#125;&#x2F;bin&#x2F;npm $&#123;buildShell&#125;&quot; &#x2F;&#x2F;ä½¿ç”¨å‚æ•°çš„æ–¹å¼è¿›è¡Œæ„å»º                &#125;            &#125;        &#125;    &#125;&#125;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>jenkins ä¸­å‚æ•°é…ç½®å¦‚ä¸‹</p><p><img src="https://zhangtq-blog.oss-cn-hangzhou.aliyuncs.com/content_picture/1658835056291.png" alt="1658835056291"></p><p>jenkinszä¸­é…ç½®å…¨å±€å·¥å…·ï¼ˆM2 ANT GRADLE NPMï¼‰</p><p><img src="https://zhangtq-blog.oss-cn-hangzhou.aliyuncs.com/content_picture/1658835277618.png" alt="1658835277618"></p>]]></content>
      
      
      <categories>
          
          <category> Devops </category>
          
      </categories>
      
      
        <tags>
            
            <tag> jenkins </tag>
            
            <tag> pipeline </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Nexusåˆ¶å“ä¸Šä¼ -jenkins</title>
      <link href="/posts/58658.html"/>
      <url>/posts/58658.html</url>
      
        <content type="html"><![CDATA[<h1 id="Nexusåˆ¶å“ä¸Šä¼ "><a href="#Nexusåˆ¶å“ä¸Šä¼ " class="headerlink" title="Nexusåˆ¶å“ä¸Šä¼ "></a>Nexusåˆ¶å“ä¸Šä¼ </h1><h2 id="Nexus-çš„ä½œç”¨"><a href="#Nexus-çš„ä½œç”¨" class="headerlink" title="Nexus çš„ä½œç”¨"></a>Nexus çš„ä½œç”¨</h2><ol><li>ç§æœä»“åº“ï¼š æœ¬åœ°mavenç§æœåŠ å¿«æ„å»ºé€Ÿåº¦</li><li>ä»£ç†ä»“åº“ï¼š å°†å…¬ç½‘ç­‰ç¬¬ä¸‰æ–¹çš„åº“ä»£ç†åˆ°æœ¬åœ°</li></ol><h2 id="nexuså®‰è£…"><a href="#nexuså®‰è£…" class="headerlink" title="nexuså®‰è£…"></a>nexuså®‰è£…</h2><ol><li><p>docker pull sonatype&#x2F;nexus3 </p></li><li><p>mkdir -p &#x2F;docker&#x2F;nexus&#x2F;</p></li><li><p>chmod 755 &#x2F;docker&#x2F;nexus&#x2F; </p></li><li><p>docker run -d â€“restart always â€“name nexus3 -p 8081:8081 -v &#x2F;docker&#x2F;nexus:&#x2F;var&#x2F;nexus-data sonatype&#x2F;nexus3 </p></li><li><p>docker exec -it 6eea6c9aacb2 &#x2F;bin&#x2F;bash </p></li><li><p>cat  &#x2F;nexus-data&#x2F;admin.password  è·å–adminå‘½ä»¤</p></li><li><p>ç™»å½• nexus ip:8081 åä¿®æ”¹ç®¡ç†å‘˜å¯†ç </p></li></ol><h2 id="ç»„ä»¶"><a href="#ç»„ä»¶" class="headerlink" title="ç»„ä»¶"></a>ç»„ä»¶</h2><p>æ¯ä¸€ä¸ªåŒ…å°±æ˜¯ä¸€ä¸ªç»„ä»¶ï¼Œnexusä¸­çš„ä¾èµ–åŒ…å°±æ˜¯ç»„ä»¶å¯ä»¥æ˜¯jaråŒ…ï¼Œå¯ä»¥æ˜¯waråŒ…ï¼Œå¯ä»¥æ˜¯å›¾ç‰‡ç­‰ç­‰</p><p><img src="/1658852905389.png" alt="1658852905389"></p><p><img src="/1658852953930.png" alt="1658852953930"></p><h2 id="assets-èµ„äº§"><a href="#assets-èµ„äº§" class="headerlink" title="assets èµ„äº§"></a>assets èµ„äº§</h2><p><img src="/1658853014961.png" alt="1658853014961"></p><h2 id="mavenä¸‹è½½æœºåˆ¶"><a href="#mavenä¸‹è½½æœºåˆ¶" class="headerlink" title="mavenä¸‹è½½æœºåˆ¶"></a>mavenä¸‹è½½æœºåˆ¶</h2><p><img src="/1658853224984.png" alt="1658853224984"></p><h2 id="ç»„ä»¶åæ ‡"><a href="#ç»„ä»¶åæ ‡" class="headerlink" title="ç»„ä»¶åæ ‡"></a>ç»„ä»¶åæ ‡</h2><p>æ³¨æ„gavçš„å®šä¹‰</p><p><img src="/1658853327095.png" alt="1658853327095"></p><p>maven å­˜å‚¨åº“å­˜å‚¨ä¸¤ç§ç±»å‹çš„ç»„ä»¶ï¼Œç¨³å®šç‰ˆå’Œå¿«ç…§ï¼Œå®é™…å·¥ä½œä¸­ä¸å»ºè®®ç”¨å¿«ç…§</p><p>æ–°å»ºä»“åº“ï¼Œå¤§å¤šæƒ…å†µä¸‹æœ‰ä¸¤ç§ï¼Œä¸€ç§æ˜¯æœ¬åœ°ï¼Œä¸€ç§æ˜¯ä»£ç†</p><p><img src="/1658904085333.png" alt="1658904085333"></p><h2 id="mvn-deployä¸Šä¼ åˆ¶å“"><a href="#mvn-deployä¸Šä¼ åˆ¶å“" class="headerlink" title="mvn deployä¸Šä¼ åˆ¶å“"></a>mvn deployä¸Šä¼ åˆ¶å“</h2><ol><li><p>åˆ›å»ºä»“åº“maven-hosted</p></li><li><p>é…ç½®maven-hosted è®¤è¯</p></li><li><p>åœ¨mavençš„setting.xmlæ·»åŠ ç§åº“ä¿¡æ¯</p><pre class="line-numbers language-none"><code class="language-none">&lt;servers&gt;   &lt;server&gt;     &lt;id&gt;maven-nexus-repo&lt;&#x2F;id&gt;     &lt;username&gt;admin&lt;&#x2F;username&gt;     &lt;password&gt;Nexus&lt;&#x2F;password&gt;   &lt;&#x2F;server&gt;    &lt;&#x2F;servers&gt;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>è¯´æ˜ï¼š id ä¸ºå¯¹åº”çš„nexusä¸­ä»“åº“çš„id</p></li><li><p>å°†mvnä¸Šä¼ çš„æ–¹å¼é›†æˆåˆ°jenkinçš„å…±äº«åº“ä¸­</p><pre class="line-numbers language-none"><code class="language-none">&#x2F;&#x2F;è·å–POMä¸­çš„åæ ‡def GetGav()&#123;   &#x2F;&#x2F;ä¸Šä¼ åˆ¶å“    def jarName &#x3D; sh returnStdout: true, script: &quot;cd target;ls *.jar&quot;    env.jarName &#x3D; jarName - &quot;\n&quot;        def pom &#x3D; readMavenPom file: &#39;pom.xml&#39;    env.pomVersion &#x3D; &quot;$&#123;pom.version&#125;&quot;    env.pomArtifact &#x3D; &quot;$&#123;pom.artifactId&#125;&quot;    env.pomPackaging &#x3D; &quot;$&#123;pom.packaging&#125;&quot;    env.pomGroupId &#x3D; &quot;$&#123;pom.groupId&#125;&quot;        println(&quot;$&#123;pomGroupId&#125;-$&#123;pomArtifact&#125;-$&#123;pomVersion&#125;-$&#123;pomPackaging&#125;&quot;)    return [&quot;$&#123;pomGroupId&#125;&quot;,&quot;$&#123;pomArtifact&#125;&quot;,&quot;$&#123;pomVersion&#125;&quot;,&quot;$&#123;pomPackaging&#125;&quot;]&#125;&#x2F;&#x2F;Nexus plugin deploydef NexusUpload()&#123;    &#x2F;&#x2F;use nexus plugin    nexusArtifactUploader artifacts: [[artifactId: &quot;$&#123;pomArtifact&#125;&quot;,                                         classifier: &#39;&#39;,                                         file: &quot;$&#123;filePath&#125;&quot;,                                         type: &quot;$&#123;pomPackaging&#125;&quot;]],                             credentialsId: &#39;0c2b0fb5-3ef4-44fe-91d4-86906387a2c4&#39;,                             groupId: &quot;$&#123;pomGroupId&#125;&quot;,                             nexusUrl: &#39;192.168.0.131:8081&#39;,                             nexusVersion: &#39;nexus3&#39;,                             protocol: &#39;http&#39;,                             repository: &quot;$&#123;repoName&#125;&quot;,                             version: &quot;$&#123;pomVersion&#125;&quot;&#125;&#x2F;&#x2F;mvn deploydef MavenUpload()&#123;              def mvnHome &#x3D; tool &quot;M2&quot;    sh  &quot;&quot;&quot;         cd target&#x2F;        $&#123;mvnHome&#125;&#x2F;bin&#x2F;mvn deploy:deploy-file -Dmaven.test.skip&#x3D;true  \                                -Dfile&#x3D;$&#123;jarName&#125; -DgroupId&#x3D;$&#123;pomGroupId&#125; \                                -DartifactId&#x3D;$&#123;pomArtifact&#125; -Dversion&#x3D;$&#123;pomVersion&#125;  \                                -Dpackaging&#x3D;$&#123;pomPackaging&#125; -DrepositoryId&#x3D;maven-nexus-repo \                                -Durl&#x3D;http:&#x2F;&#x2F;192.168.0.131:8081&#x2F;repository&#x2F;maven-nexus-repo         &quot;&quot;&quot;&#125;&#x2F;&#x2F;åˆ¶å“æ™‹çº§def ArtifactUpdate(updateType,artifactUrl)&#123;    &#x2F;&#x2F;æ™‹çº§ç­–ç•¥    if (&quot;$&#123;updateType&#125;&quot; &#x3D;&#x3D; &quot;snapshot -&gt; release&quot;)&#123;        println(&quot;snapshot -&gt; release&quot;)        &#x2F;&#x2F;ä¸‹è½½åŸå§‹åˆ¶å“        sh &quot;  rm -fr updates &amp;&amp; mkdir updates &amp;&amp; cd updates &amp;&amp; wget $&#123;artifactUrl&#125; &amp;&amp; ls -l &quot;        &#x2F;&#x2F;è·å–artifactID                 artifactUrl &#x3D; artifactUrl -  &quot;http:&#x2F;&#x2F;192.168.1.200:30083&#x2F;repository&#x2F;maven-hostd&#x2F;&quot;        artifactUrl &#x3D; artifactUrl.split(&quot;&#x2F;&quot;).toList()                println(artifactUrl.size())        env.jarName &#x3D; artifactUrl[-1]         env.pomVersion &#x3D; artifactUrl[-2].replace(&quot;SNAPSHOT&quot;,&quot;RELEASE&quot;)        env.pomArtifact &#x3D; artifactUrl[-3]        pomPackaging &#x3D; artifactUrl[-1]        pomPackaging &#x3D; pomPackaging.split(&quot;\\.&quot;).toList()[-1]        env.pomPackaging &#x3D; pomPackaging[-1]        env.pomGroupId &#x3D; artifactUrl[0..-4].join(&quot;.&quot;)        println(&quot;$&#123;pomGroupId&#125;##$&#123;pomArtifact&#125;##$&#123;pomVersion&#125;##$&#123;pomPackaging&#125;&quot;)        env.newJarName &#x3D; &quot;$&#123;pomArtifact&#125;-$&#123;pomVersion&#125;.$&#123;pomPackaging&#125;&quot;                &#x2F;&#x2F;æ›´æ”¹åç§°        sh &quot; cd updates &amp;&amp; mv $&#123;jarName&#125; $&#123;newJarName&#125; &quot;                &#x2F;&#x2F;ä¸Šä¼ åˆ¶å“        env.repoName &#x3D; &quot;maven-release&quot;        env.filePath &#x3D; &quot;updates&#x2F;$&#123;newJarName&#125;&quot;        NexusUpload()    &#125;&#125;def main(uploadType)&#123;    GetGav()    if (&quot;$&#123;uploadType&#125;&quot; &#x3D;&#x3D; &quot;maven&quot;)&#123;        MavenUpload()    &#125; else if (&quot;$&#123;uploadType&#125;&quot; &#x3D;&#x3D; &quot;nexus&quot;) &#123;        env.repoName &#x3D; &quot;maven-nexus-repo&quot;        env.filePath &#x3D; &quot;target&#x2F;$&#123;jarName&#125;&quot;        NexusUpload()    &#125;&#125;def MavenUpload()&#123;              def mvnHome &#x3D; tool &quot;M2&quot;    sh  &quot;&quot;&quot;         cd target&#x2F;        $&#123;mvnHome&#125;&#x2F;bin&#x2F;mvn deploy:deploy-file -Dmaven.test.skip&#x3D;true  \                                -Dfile&#x3D;$&#123;jarName&#125; -DgroupId&#x3D;$&#123;pomGroupId&#125; \                                -DartifactId&#x3D;$&#123;pomArtifact&#125; -Dversion&#x3D;$&#123;pomVersion&#125;  \                                -Dpackaging&#x3D;$&#123;pomPackaging&#125; -DrepositoryId&#x3D;maven-nexus-repo \                                -Durl&#x3D;http:&#x2F;&#x2F;192.168.0.131:8081&#x2F;repository&#x2F;maven-nexus-repo         &quot;&quot;&quot;&#125;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><ol start="5"><li><p>åœ¨pipelineæ‰“åŒ…å®Œæˆåï¼Œè°ƒç”¨å‡½æ•°ï¼Œæ‰§è¡Œä¸Šä¼ åˆ¶å“å‡½æ•°ï¼Œå‚æ•°é€‰æ‹©maven</p><p><img src="/1659079686737.png" alt="1659079686737"></p></li></ol></li></ol><h3 id="nexus-æ’ä»¶ä¸Šä¼ åˆ¶å“"><a href="#nexus-æ’ä»¶ä¸Šä¼ åˆ¶å“" class="headerlink" title="nexus æ’ä»¶ä¸Šä¼ åˆ¶å“"></a>nexus æ’ä»¶ä¸Šä¼ åˆ¶å“</h3><ol><li><p>ç³»ç»Ÿè®¾ç½®â€”&gt;æ’ä»¶ç®¡ç†â€”&gt;å¯ç”¨æ’ä»¶ é€‰æ‹©nexus-artifact-uploaderæ’ä»¶å®‰è£…</p></li><li><p>æˆ‘çš„è§†å›¾â€”&gt;å¯¹åº”é¡¹ç›®â€”æµæ°´çº¿è¯­æ³•â€”&gt;ç‰‡æ®µç”Ÿæˆå™¨â€”&gt;nexuså¯¹åº”çš„é€‰é¡¹ï¼Œè¾“å…¥ç›¸å…³ä¿¡æ¯æ³¨æ„ï¼š ç‰‡æ®µç”Ÿæˆå™¨éƒ½æ˜¯å•å¼•å·ï¼Œå¼•å…¥åˆ°pipelineä¸­éœ€è¦ä½¿ç”¨åŒå·</p></li></ol><p>   <img src="/1659080003445.png" alt="1659080003445"></p><ol start="3"><li><p>éœ€è¦ä¿®æ”¹pomæ–‡ä»¶ï¼Œæ³¨æ„ä¸å®¹versionå¯¹åº”ä¸åŒçš„ä»“åº“ç±»å‹, å¦‚æœè¿œç¨‹ä»“åº“æ—¶mixç±»å‹ï¼Œåˆ™å¯ä»¥å‘å…¶ä¸­ä¼ å…¥å‘å¸ƒç‰ˆå’Œå¿«ç…§ï¼Œ å¦‚æœä¸ºrelease ï¼Œåˆ™ä»…å¯ä»¥å‘è¿œç¨‹ä»“åº“ä¸­ä¼ å…¥å‘å¸ƒç‰ˆï¼Œå¦‚æœä¸ºsnapshot,åˆ™ä»…å¯ä»¥ä¸Šä¼ å¿«ç…§ç‰ˆï¼Œåœ¨pomæ–‡ä»¶ä¸­ï¼Œç‰ˆæœ¬å¿…é¡»å¤§å†™å¦‚1.1-RELEASE 1.1-SNAPSHOT</p></li><li><p>å‘å¸ƒç‰ˆ</p></li></ol>   <pre class="line-numbers language-none"><code class="language-none">&lt;modelVersion&gt;4.0.0&lt;&#x2F;modelVersion&gt;  &lt;groupId&gt;com.mycompany.app&lt;&#x2F;groupId&gt;  &lt;artifactId&gt;my-app&lt;&#x2F;artifactId&gt;  &lt;packaging&gt;jar&lt;&#x2F;packaging&gt;  &lt;version&gt;1.1-RELEASE&lt;&#x2F;version&gt;  &lt;name&gt;my-app&lt;&#x2F;name&gt;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><ol start="2"><li>å¿«ç…§ç‰ˆ</li></ol>   <pre class="line-numbers language-none"><code class="language-none">&lt;groupId&gt;com.mycompany.app&lt;&#x2F;groupId&gt; &lt;artifactId&gt;my-app&lt;&#x2F;artifactId&gt; &lt;packaging&gt;jar&lt;&#x2F;packaging&gt; &lt;version&gt;1.1-SNAPSHOT&lt;&#x2F;version&gt; &lt;name&gt;my-app&lt;&#x2F;name&gt;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre><ol start="4"><li><p>å¼€å§‹æ‰§è¡Œæµæ°´çº¿</p></li><li><p>çœ‹åˆ°å¦‚ä¸‹æ—¥å¿—ï¼Œåˆ™è¯´æ˜æ‰§è¡ŒæˆåŠŸ</p></li></ol><pre><code>  <pre class="line-numbers language-none"><code class="language-none">Type: jarVersion: 1.1-RELEASEFile: my-app-1.1-RELEASE.jarRepository:maven_nexus_releaseUploading: http:&#x2F;&#x2F;192.168.0.131:8081&#x2F;repository&#x2F;maven_nexus_release&#x2F;com&#x2F;mycompany&#x2F;app&#x2F;my-app&#x2F;1.1-RELEASE&#x2F;my-app-1.1-RELEASE.jar100 % completed (2.6 kB &#x2F; 2.6 kB).Uploaded: http:&#x2F;&#x2F;192.168.0.131:8081&#x2F;repository&#x2F;maven_nexus_release&#x2F;com&#x2F;mycompany&#x2F;app&#x2F;my-app&#x2F;1.1-RELEASE&#x2F;my-app-1.1-RELEASE.jar (2.6 kB at 6.0 kB&#x2F;s)Uploading artifact my-app-1.1-RELEASE.jar completed.<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>  </code></pre><ol start="2"><li><p>çœ‹åˆ°å¦‚ä¸‹æ—¥å¿—ï¼Œåˆ™è¯´æ˜ç‰ˆæœ¬å’Œå¯¹åº”çš„ä»“åº“ç±»å‹ä¸ä¸€è‡´ï¼Œ ç¤ºä¾‹æ˜¯å‘å‘å¸ƒç‰ˆä»“åº“ä¸Šä¼ å¿«ç…§æ‰“å°çš„æ—¥å¿—</p><pre class="line-numbers language-none"><code class="language-none">Version: 1.1-SNAPSHOTFile: my-app-1.1-SNAPSHOT.jarRepository:maven_nexus_releaseDownloading: http:&#x2F;&#x2F;192.168.0.131:8081&#x2F;repository&#x2F;maven_nexus_release&#x2F;com&#x2F;mycompany&#x2F;app&#x2F;my-app&#x2F;1.1-SNAPSHOT&#x2F;maven-metadata.xmlUploading: http:&#x2F;&#x2F;192.168.0.131:8081&#x2F;repository&#x2F;maven_nexus_release&#x2F;com&#x2F;mycompany&#x2F;app&#x2F;my-app&#x2F;1.1-SNAPSHOT&#x2F;my-app-1.1-20220730.160033-1.jar100 % completed (2.6 kB &#x2F; 2.6 kB).Failed to deploy artifacts: Could not transfer artifact com.mycompany.app:my-app:jar:1.1-20220730.160033-1 from&#x2F;to maven_nexus_release (http:&#x2F;&#x2F;192.168.0.131:8081&#x2F;repository&#x2F;maven_nexus_release): Failed to transfer file: http:&#x2F;&#x2F;192.168.0.131:8081&#x2F;repository&#x2F;maven_nexus_release&#x2F;com&#x2F;mycompany&#x2F;app&#x2F;my-app&#x2F;1.1-SNAPSHOT&#x2F;my-app-1.1-20220730.160033-1.jar. Return code is: 400, ReasonPhrase:Repository version policy: RELEASE does not allow version: 1.1-20220730.160033-1.<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></li></ol><h3 id="é—®é¢˜è®°å½•"><a href="#é—®é¢˜è®°å½•" class="headerlink" title="é—®é¢˜è®°å½•"></a>é—®é¢˜è®°å½•</h3><p>å®‰è£…æ’ä»¶æ˜¯ä¸€ç›´æ˜¯pendingçŠ¶æ€æˆ–è€…ä¸€ç›´æ˜¯ç­‰å¾…çŠ¶æ€ï¼Œå¤§æ¦‚ç‡æ˜¯æ’ä»¶æºä¸å¥½å¯¼è‡´ï¼Œæ­¤æ—¶éœ€è¦è®¿é—® <a href="http://ip/pluginManager/advanced%EF%BC%8C">http://ip/pluginManager/advancedï¼Œ</a> æ‰¾åˆ°å‡çº§ç«™ç‚¹ï¼Œå°†urlæ›¿æ¢ä¸ºæ¸…åç«™ç‚¹<a href="https://mirrors.tuna.tsinghua.edu.cn/jenkins/updates/update-center.json">https://mirrors.tuna.tsinghua.edu.cn/jenkins/updates/update-center.json</a></p><p>ç„¶åæäº¤ã€‚ ç„¶åé‡å¯æœåŠ¡<a href="http://ip/restart">http://ip/restart</a></p><p><img src="/1659036474888.png" alt="1659036474888"></p><h2 id="åˆ¶å“å‘å¸ƒ-é€‰æ‹©åˆ¶å“"><a href="#åˆ¶å“å‘å¸ƒ-é€‰æ‹©åˆ¶å“" class="headerlink" title="åˆ¶å“å‘å¸ƒ-é€‰æ‹©åˆ¶å“"></a>åˆ¶å“å‘å¸ƒ-é€‰æ‹©åˆ¶å“</h2><ol><li><p>å®‰è£…æ’ä»¶ maven-artifact-choicelistprovider</p></li><li><p>jenkinsâ€“æˆ‘çš„è§†å›¾â€”å¯¹åº”çš„é¡¹ç›®â€“é…ç½®â€“å‚æ•°åŒ–æ„å»ºâ€”æ·»åŠ å‚æ•°â€”extentsible choice æ·»åŠ artifactUrlå‚æ•°ï¼Œé€‰æ‹©ä¿å­˜</p></li></ol><p><img src="/1659086813031.png" alt="1659086813031"></p><ol start="3"><li>åœ¨å‚æ•°åŒ–æ„å»ºä¸­é€‰æ‹©éœ€è¦å‘å¸ƒçš„ç‰ˆæœ¬</li></ol><p>   <img src="/1659198397205.png" alt="1659198397205"></p><ol start="4"><li>åœ¨jenkinsfielä¸­å¼•å…¥artifactUrlå‚æ•°</li></ol><p><img src="/1659083972581.png" alt="1659083972581"></p><ol start="4"><li>åœ¨nexusä¸­å¼€æ”¾æƒé™</li></ol><p><img src="/1659083801260.png" alt="1659083801260"></p><ol start="5"><li>å¼€å¯å¯¹åº”çš„æµæ°´çº¿</li></ol><h2 id="åˆ¶å“æ™‹çº§"><a href="#åˆ¶å“æ™‹çº§" class="headerlink" title="åˆ¶å“æ™‹çº§"></a>åˆ¶å“æ™‹çº§</h2><p>è¯´æ˜ï¼š å°†snapshotç‰ˆæœ¬æ™‹çº§ä¸ºreleaseç‰ˆæœ¬</p><p>å‡†å¤‡ï¼š </p><ol><li>æ–°å»ºreleaseä»“åº“ä¸ºmaven_nexus_release</li><li>æ–°å»ºæ™‹çº§æµæ°´çº¿maven_service_UPDATE</li></ol><h4 id="æµç¨‹"><a href="#æµç¨‹" class="headerlink" title="æµç¨‹"></a>æµç¨‹</h4><ol><li>åˆ¶å“æ™‹çº§å…±äº«åº“nexu.groovyä¸­ç¼–å†™å¦‚ä¸‹ä»£ç </li></ol>   <pre class="line-numbers language-none"><code class="language-none">vi &#x2F;src&#x2F;org&#x2F;devops&#x2F;nexus.groovy&#x2F;&#x2F;&#x2F;Nexus plugin deploydef NexusUpload()&#123;    &#x2F;&#x2F;use nexus plugin    nexusArtifactUploader artifacts: [[artifactId: &quot;$&#123;pomArtifact&#125;&quot;,                                         classifier: &#39;&#39;,                                         file: &quot;$&#123;filePath&#125;&quot;,                                         type: &quot;$&#123;pomPackaging&#125;&quot;]],                             credentialsId: &#39;0c2b0fb5-3ef4-44fe-91d4-86906387a2c4&#39;,                             groupId: &quot;$&#123;pomGroupId&#125;&quot;,                             nexusUrl: &#39;192.168.0.131:8081&#39;,                             nexusVersion: &#39;nexus3&#39;,                             protocol: &#39;http&#39;,                             repository: &quot;$&#123;repoName&#125;&quot;,                             version: &quot;$&#123;pomVersion&#125;&quot;&#125;&#x2F;&#x2F;åˆ¶å“æ™‹çº§def ArtifactUpdate(updateType,artifactUrl)&#123;    &#x2F;&#x2F;æ™‹çº§ç­–ç•¥    if (&quot;$&#123;updateType&#125;&quot; &#x3D;&#x3D; &quot;snapshot -&gt; release&quot;)&#123;        println(&quot;snapshot -&gt; release&quot;)        &#x2F;&#x2F;ä¸‹è½½åŸå§‹åˆ¶å“        sh &quot;  rm -fr updates &amp;&amp; mkdir updates &amp;&amp; cd updates &amp;&amp; wget $&#123;artifactUrl&#125; &amp;&amp; ls -l &quot;        &#x2F;&#x2F;è·å–artifactID                 artifactUrl &#x3D; artifactUrl -  &quot;http:&#x2F;&#x2F;192.168.0.131:8081&#x2F;repository&#x2F;maven-nexus-repo&#x2F;&quot;        artifactUrl &#x3D; artifactUrl.split(&quot;&#x2F;&quot;).toList()        &#x2F;&#x2F; [com, mycompany, app, my-app, 1.0-SNAPSHOT, my-app-1.0-20220730.110019-1.jar]                println(artifactUrl.size())        println(&quot;æ™‹çº§url&quot;)        println(artifactUrl)        env.jarName &#x3D; artifactUrl[-1]         env.pomVersion &#x3D; artifactUrl[-2].replace(&quot;SNAPSHOT&quot;,&quot;RELEASE&quot;)        env.pomVersion &#x3D; &quot;1.2-RELEASE&quot;        env.pomArtifact &#x3D; artifactUrl[-3]        pomPackaging &#x3D; artifactUrl[-1]        pomPackaging &#x3D; pomPackaging.split(&quot;\\.&quot;).toList()[-1]        env.pomPackaging &#x3D; pomPackaging[-1]        env.pomGroupId &#x3D; artifactUrl[0..2].join(&quot;.&quot;)        println(&quot;$&#123;pomGroupId&#125;##$&#123;pomArtifact&#125;##$&#123;pomVersion&#125;##$&#123;pomPackaging&#125;&quot;)        env.newJarName &#x3D; &quot;$&#123;pomArtifact&#125;-$&#123;pomVersion&#125;.$&#123;pomPackaging&#125;&quot;                &#x2F;&#x2F;æ›´æ”¹åç§°        sh &quot; cd updates &amp;&amp; mv $&#123;jarName&#125; $&#123;newJarName&#125; &quot;                &#x2F;&#x2F;ä¸Šä¼ åˆ¶å“        env.repoName &#x3D; &quot;maven_nexus_release&quot;           env.filePath &#x3D; &quot;updates&#x2F;$&#123;newJarName&#125;&quot;        NexusUpload()    &#125;&#125;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><ol start="2"><li>æ–°å»ºåˆ¶å“æ™‹çº§jenkinsfile</li></ol>   <pre class="line-numbers language-none"><code class="language-none">#!groovy@Library(&#39;jenkinslib&#39;) _def nexus &#x3D; new org.devops.nexus()def nexusapi &#x3D; new org.devops.nexusapi()String updateType &#x3D; &quot;$&#123;env.updateType&#125;&quot;String artifactUrl &#x3D; &quot;$&#123;env.artifactUrl&#125;&quot;String pkgVersion &#x3D; &quot;$&#123;env.pkgVersion&#125;&quot;pipeline&#123;    agent any        stages&#123;            stage(&quot;UpdateArtifact&quot;)&#123;            steps&#123;                script&#123;                   nexus.ArtifactUpdate(updateType,artifactUrl)                                      &#x2F;&#x2F;nexusapi.GetRepoComponents(&quot;maven-hostd&quot;)                   &#x2F;&#x2F;nexusapi.GetSingleComponents(&quot;maven-hostd&quot;,&quot;com.mycompany.app&quot;,&quot;my-app&quot;,pkgVersion)                                &#125;                        &#125;                &#125;    &#125;&#125;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><ol start="3"><li>jenkinsæ–°å»ºæ™‹çº§æµæ°´çº¿</li></ol><p>   <img src="/1659330053765.png" alt="1659330053765"></p><ol start="4"><li><p>é€‰æ‹©éœ€è¦æ™‹çº§çš„åˆ¶å“ï¼Œå¼€å§‹æ™‹çº§ä»»åŠ¡</p><p><img src="/1659330155106.png" alt="1659330155106"></p><p><img src="/1659330192806.png" alt="1659330192806"></p></li></ol><h2 id="docker-å¯åŠ¨å¤±è´¥æ’æŸ¥"><a href="#docker-å¯åŠ¨å¤±è´¥æ’æŸ¥" class="headerlink" title="docker å¯åŠ¨å¤±è´¥æ’æŸ¥"></a>docker å¯åŠ¨å¤±è´¥æ’æŸ¥</h2><h3 id="é—®é¢˜"><a href="#é—®é¢˜" class="headerlink" title="é—®é¢˜"></a>é—®é¢˜</h3><p>systemctl start dockeråæŠ¥é”™ï¼š</p><pre class="line-numbers language-none"><code class="language-none">[root@bogon zhangtianqing]# systemctl start dockerJob for docker.service failed because the control process exited with error code.See &quot;systemctl status docker.service&quot; and &quot;journalctl -xe&quot; for details.<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre><p>æ€è·¯ï¼š</p><ol><li><p>æŒ‰ç…§æç¤ºæ‰§è¡Œsystemctl status docker.service æˆ–è€…journalctl -xeï¼Œç»“æœå¦‚ä¸‹ï¼Œä½†æ˜¯éƒ½çœ‹ä¸å‡ºæ¥æ—¶ä»€ä¹ˆé—®é¢˜</p><pre class="line-numbers language-none"><code class="language-none">Jul 29 14:00:06 bogon containerd[1842]:         &#x2F;root&#x2F;rpmbuild&#x2F;BUILD&#x2F;vendor&#x2F;go.etcd.io&#x2F;bbolt&#x2F;db.go:772 +0x82Jul 29 14:00:06 bogon containerd[1842]: github.com&#x2F;containerd&#x2F;containerd&#x2F;metadata.(*DB).getMarked(0x203000, &#123;0x5585afab3d38, 0xc000081f00&#125;)Jul 29 14:00:06 bogon containerd[1842]:         &#x2F;root&#x2F;rpmbuild&#x2F;BUILD&#x2F;metadata&#x2F;db.go:369 +0x70Jul 29 14:00:06 bogon containerd[1842]: github.com&#x2F;containerd&#x2F;containerd&#x2F;metadata.(*DB).GarbageCollect(0xc000209a40, &#123;0x5585afab3d38, 0xc000081&gt;Jul 29 14:00:06 bogon containerd[1842]:         &#x2F;root&#x2F;rpmbuild&#x2F;BUILD&#x2F;metadata&#x2F;db.go:285 +0x8bJul 29 14:00:06 bogon containerd[1842]: github.com&#x2F;containerd&#x2F;containerd&#x2F;gc&#x2F;scheduler.(*gcScheduler).run(0xc000082de0, &#123;0x5585afab3d38, 0xc0000&gt;Jul 29 14:00:06 bogon containerd[1842]:         &#x2F;root&#x2F;rpmbuild&#x2F;BUILD&#x2F;gc&#x2F;scheduler&#x2F;scheduler.go:310 +0x4eaJul 29 14:00:06 bogon containerd[1842]: created by github.com&#x2F;containerd&#x2F;containerd&#x2F;gc&#x2F;scheduler.init.0.func1Jul 29 14:00:06 bogon containerd[1842]:         &#x2F;root&#x2F;rpmbuild&#x2F;BUILD&#x2F;gc&#x2F;scheduler&#x2F;scheduler.go:132 +0x37dJul 29 14:00:06 bogon systemd[1]: containerd.service: Main process exited, code&#x3D;exited, status&#x3D;2&#x2F;INVALIDARGUMENTJul 29 14:00:06 bogon systemd[1]: containerd.service: Failed with result &#39;exit-code&#39;.<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></li><li><p>é€šè¿‡docker æ—¥å¿—çœ‹ï¼Œæ‰§è¡Œ</p></li></ol>   <pre class="line-numbers language-none"><code class="language-none">dockerd --debug<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>   å¾—åˆ°å¦‚ä¸‹ç»“æœ</p>   <pre class="line-numbers language-none"><code class="language-none">INFO[2022-07-29T14:04:22.235455758-04:00] Starting up                                  failed to start daemon: pid file found, ensure docker is not running or delete &#x2F;var&#x2F;run&#x2F;docker.pid<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre><ol start="3"><li>ä¾æ®æ—¥å¿—ï¼Œåˆ é™¤å¯¹åº”çš„pidé‡æ–°å¯åŠ¨</li></ol>   <pre class="line-numbers language-none"><code class="language-none">rm -f &#x2F;var&#x2F;run&#x2F;docker.pidsystemctl start docker<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre><h2 id="è™šæ‹Ÿæœºå› ä¸ºunmount-and-xfs-repairé—®é¢˜å¯åŠ¨å¤±è´¥"><a href="#è™šæ‹Ÿæœºå› ä¸ºunmount-and-xfs-repairé—®é¢˜å¯åŠ¨å¤±è´¥" class="headerlink" title="è™šæ‹Ÿæœºå› ä¸ºunmount and xfs_repairé—®é¢˜å¯åŠ¨å¤±è´¥"></a>è™šæ‹Ÿæœºå› ä¸ºunmount and xfs_repairé—®é¢˜å¯åŠ¨å¤±è´¥</h2><p>   è™šæ‹Ÿæœºçªç„¶æ–­ç”µï¼Œå¯¼è‡´æ–‡ä»¶åˆ†åŒºæŸåï¼Œè¿›å…¥ä¸äº†ç³»ç»Ÿã€‚</p><p>   è§£å†³åŠæ³•ï¼š</p><ol><li><p>å¼€æœºæŒ‰e è¿›å…¥å•ç”¨æˆ·æ¨¡å¼</p></li><li><p>æ‰¾åˆ°linuxè¡Œï¼Œåœ¨æœ€åæ·»åŠ rd.break, æŒ‰ä¸‹ctrl+x è¿›å…¥æ•‘æ´æ¨¡å¼</p><ol start="3"><li>ls -l &#x2F;dev&#x2F;mapper</li><li>æŸ¥çœ‹&#x2F;dm0</li><li>unmount &#x2F;dev&#x2F;mapper&#x2F;cs-root  # å¸è½½ç›®å½•</li><li>xfs_repair -L &#x2F;dev&#x2F;mapper&#x2F;cs-root  # ä¿®å¤</li><li>reboot</li></ol><h2 id="nexusAPIåˆ†è£…åˆ°å…±äº«åº“"><a href="#nexusAPIåˆ†è£…åˆ°å…±äº«åº“" class="headerlink" title="nexusAPIåˆ†è£…åˆ°å…±äº«åº“"></a>nexusAPIåˆ†è£…åˆ°å…±äº«åº“</h2><ol><li><p>æ–°å»ºå…±äº«åº“æ–‡ä»¶</p><pre class="line-numbers language-none"><code class="language-none">vi &#x2F;src&#x2F;org&#x2F;devops&#x2F;nexusapi.groovypackage org.devops&#x2F;&#x2F;å°è£…HTTPdef HttpReq(reqType,reqUrl,reqBody)&#123;    def sonarServer &#x3D; &quot;http:&#x2F;&#x2F;192.168.0.131:8081&#x2F;service&#x2F;rest&quot;       result &#x3D; httpRequest authentication: &#39;0c2b0fb5-3ef4-44fe-91d4-86906387a2c4&#39;,            httpMode: reqType,             contentType: &quot;APPLICATION_JSON&quot;,            consoleLogResponseBody: true,            ignoreSslErrors: true,             requestBody: reqBody,            url: &quot;$&#123;sonarServer&#125;&#x2F;$&#123;reqUrl&#125;&quot;,            quiet: true        return result&#125;&#x2F;&#x2F;è·å–ä»“åº“ä¸­æ‰€æœ‰ç»„ä»¶def GetRepoComponents(repoName)&#123;    apiUrl &#x3D; &quot;&#x2F;v1&#x2F;components?repository&#x3D;$&#123;repoName&#125;&quot;    response &#x3D; HttpReq(&quot;GET&quot;,apiUrl,&#39;&#39;)        response &#x3D; readJSON text: &quot;&quot;&quot;$&#123;response.content&#125;&quot;&quot;&quot;    println(&quot;ç»„ä»¶ä¸ªæ•°&quot;)    println(response[&quot;items&quot;].size())    return response[&quot;items&quot;]&#125;&#x2F;&#x2F;è·å–å•ä»¶ç»„ä»¶def GetComponentsId(repoName,groupId,artifactId,version)&#123;    println(&quot;è·å–å•ä»¶ç»„ä»¶ID&quot;)    result &#x3D; GetRepoComponents(repoName)         for (component in result)&#123;                if (component[&quot;group&quot;] &#x3D;&#x3D; groupId &amp;&amp; component[&quot;name&quot;] &#x3D;&#x3D; artifactId &amp;&amp; component[&quot;version&quot;] &#x3D;&#x3D; version  )&#123;                        componentId &#x3D; component[&quot;id&quot;]                        return componentId        &#125;    &#125;        println(componentId)&#125;&#x2F;&#x2F;è·å–ç»„ä»¶ä¿¡æ¯def GetSingleComponents(repoName,groupId,artifactId,version)&#123;    println(&quot;è·å–å•ä»¶ç»„ä»¶ä¿¡æ¯&quot;)    componentId &#x3D; GetComponentsId(repoName,groupId,artifactId,version)    apiUrl &#x3D; &quot;&#x2F;v1&#x2F;components&#x2F;$&#123;componentId&#125;&quot;    response &#x3D; HttpReq(&quot;GET&quot;,apiUrl,&#39;&#39;)        response &#x3D; readJSON text: &quot;&quot;&quot;$&#123;response.content&#125;&quot;&quot;&quot;    println(response[&quot;assets&quot;][&quot;downloadUrl&quot;])&#125;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></li><li><p>åœ¨jenkinsfileä¸­è°ƒç”¨</p><pre class="line-numbers language-none"><code class="language-none">#!groovy@Library(&#39;jenkinslib&#39;) _def nexus &#x3D; new org.devops.nexus()def nexusapi &#x3D; new org.devops.nexusapi()String updateType &#x3D; &quot;$&#123;env.updateType&#125;&quot;String artifactUrl &#x3D; &quot;$&#123;env.artifactUrl&#125;&quot;String pkgVersion &#x3D; &quot;$&#123;env.pkgVersion&#125;&quot;pipeline&#123;    agent any        stages&#123;            stage(&quot;UpdateArtifact&quot;)&#123;            steps&#123;                script&#123;                   nexus.ArtifactUpdate(updateType,artifactUrl)                                      nexusapi.GetRepoComponents(&quot;maven_nexus_release&quot;)                   &#x2F;&#x2F; nexusapi.GetSingleComponents(&quot;maven_nexus_release&quot;,&quot;com.mycompany.app&quot;,&quot;my-app&quot;,pkgVersion)                                &#125;                        &#125;                &#125;    &#125;&#125;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></li><li><p>æ‰§è¡Œæµæ°´çº¿è°ƒç”¨æˆåŠŸæˆªå›¾å¦‚ä¸‹</p><p><img src="/1659355127049.png" alt="1659355127049"></p></li><li><p>è·å–å•ä¸ªå•ä¸ªç»„ä»¶çš„ä¿¡æ¯</p></li><li><p>åœ¨jenkinsä¸­æ–°å»ºpkgVersionå‚æ•°ï¼Œå€¼ä¸ºæŸä¸ªç‰ˆæœ¬å·</p></li><li><p>æ‰“å¼€jenkinsfileä¸­çš„æ³¨é‡Šä»£ç ï¼Œå¼€å§‹æ‰§è¡Œ</p></li><li><p>æˆªå›¾å¦‚ä¸‹</p><p><img src="/1659355323336.png" alt="1659355323336"></p></li></ol></li><li></li></ol>]]></content>
      
      
      <categories>
          
          <category> Devops </category>
          
      </categories>
      
      
        <tags>
            
            <tag> CICD </tag>
            
            <tag> nexus </tag>
            
            <tag> åˆ¶å“åº“ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title></title>
      <link href="/posts/58658.html"/>
      <url>/posts/58658.html</url>
      
        <content type="html"><![CDATA[<h2 id="Nexusåˆ¶å“ä¸Šä¼ "><a href="#Nexusåˆ¶å“ä¸Šä¼ " class="headerlink" title="Nexusåˆ¶å“ä¸Šä¼ "></a>Nexusåˆ¶å“ä¸Šä¼ </h2><h2 id="Nexus-çš„ä½œç”¨"><a href="#Nexus-çš„ä½œç”¨" class="headerlink" title="Nexus çš„ä½œç”¨"></a>Nexus çš„ä½œç”¨</h2><ol><li>ç§æœä»“åº“ï¼š æœ¬åœ°mavenç§æœåŠ å¿«æ„å»ºé€Ÿåº¦</li><li>ä»£ç†ä»“åº“ï¼š å°†å…¬ç½‘ç­‰ç¬¬ä¸‰æ–¹çš„åº“ä»£ç†åˆ°æœ¬åœ°</li></ol><h2 id="nexuså®‰è£…"><a href="#nexuså®‰è£…" class="headerlink" title="nexuså®‰è£…"></a>nexuså®‰è£…</h2><ol><li><p>docker pull sonatype&#x2F;nexus3 </p></li><li><p>mkdir -p &#x2F;docker&#x2F;nexus&#x2F;</p></li><li><p>chmod 755 &#x2F;docker&#x2F;nexus&#x2F; </p></li><li><p>docker run -d â€“restart always â€“name nexus3 -p 8081:8081 -v &#x2F;docker&#x2F;nexus:&#x2F;var&#x2F;nexus-data sonatype&#x2F;nexus3 </p></li><li><p>docker exec -it 6eea6c9aacb2 &#x2F;bin&#x2F;bash </p></li><li><p>cat  &#x2F;nexus-data&#x2F;admin.password  è·å–adminå‘½ä»¤</p></li><li><p>ç™»å½• nexus ip:8081 åä¿®æ”¹ç®¡ç†å‘˜å¯†ç </p></li></ol><h2 id="ç»„ä»¶"><a href="#ç»„ä»¶" class="headerlink" title="ç»„ä»¶"></a>ç»„ä»¶</h2><p>æ¯ä¸€ä¸ªåŒ…å°±æ˜¯ä¸€ä¸ªç»„ä»¶ï¼Œnexusä¸­çš„ä¾èµ–åŒ…å°±æ˜¯ç»„ä»¶å¯ä»¥æ˜¯jaråŒ…ï¼Œå¯ä»¥æ˜¯waråŒ…ï¼Œå¯ä»¥æ˜¯å›¾ç‰‡ç­‰ç­‰</p><p><img src="/Nexus%E5%88%B6%E5%93%81%E4%B8%8A%E4%BC%A0-jenkins/1658852905389.png" alt="1658852905389"></p><p><img src="/Nexus%E5%88%B6%E5%93%81%E4%B8%8A%E4%BC%A0-jenkins/1658852953930.png" alt="1658852953930"></p><h2 id="assets-èµ„äº§"><a href="#assets-èµ„äº§" class="headerlink" title="assets èµ„äº§"></a>assets èµ„äº§</h2><p><img src="/Nexus%E5%88%B6%E5%93%81%E4%B8%8A%E4%BC%A0-jenkins/1658853014961.png" alt="1658853014961"></p><h2 id="mavenä¸‹è½½æœºåˆ¶"><a href="#mavenä¸‹è½½æœºåˆ¶" class="headerlink" title="mavenä¸‹è½½æœºåˆ¶"></a>mavenä¸‹è½½æœºåˆ¶</h2><p><img src="/Nexus%E5%88%B6%E5%93%81%E4%B8%8A%E4%BC%A0-jenkins/1658853224984.png" alt="1658853224984"></p><h2 id="ç»„ä»¶åæ ‡"><a href="#ç»„ä»¶åæ ‡" class="headerlink" title="ç»„ä»¶åæ ‡"></a>ç»„ä»¶åæ ‡</h2><p>æ³¨æ„gavçš„å®šä¹‰</p><p><img src="/Nexus%E5%88%B6%E5%93%81%E4%B8%8A%E4%BC%A0-jenkins/1658853327095.png" alt="1658853327095"></p><p>maven å­˜å‚¨åº“å­˜å‚¨ä¸¤ç§ç±»å‹çš„ç»„ä»¶ï¼Œç¨³å®šç‰ˆå’Œå¿«ç…§ï¼Œå®é™…å·¥ä½œä¸­ä¸å»ºè®®ç”¨å¿«ç…§</p><p>æ–°å»ºä»“åº“ï¼Œå¤§å¤šæƒ…å†µä¸‹æœ‰ä¸¤ç§ï¼Œä¸€ç§æ˜¯æœ¬åœ°ï¼Œä¸€ç§æ˜¯ä»£ç†</p><p><img src="/Nexus%E5%88%B6%E5%93%81%E4%B8%8A%E4%BC%A0-jenkins/1658904085333.png" alt="1658904085333"></p><h2 id="mvn-deployä¸Šä¼ åˆ¶å“"><a href="#mvn-deployä¸Šä¼ åˆ¶å“" class="headerlink" title="mvn deployä¸Šä¼ åˆ¶å“"></a>mvn deployä¸Šä¼ åˆ¶å“</h2><ol><li><p>åˆ›å»ºä»“åº“maven-hosted</p></li><li><p>é…ç½®maven-hosted è®¤è¯</p></li><li><p>åœ¨mavençš„setting.xmlæ·»åŠ ç§åº“ä¿¡æ¯</p><pre class="line-numbers language-none"><code class="language-none">&lt;servers&gt;   &lt;server&gt;     &lt;id&gt;maven-nexus-repo&lt;&#x2F;id&gt;     &lt;username&gt;admin&lt;&#x2F;username&gt;     &lt;password&gt;Nexus&lt;&#x2F;password&gt;   &lt;&#x2F;server&gt;    &lt;&#x2F;servers&gt;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>è¯´æ˜ï¼š id ä¸ºå¯¹åº”çš„nexusä¸­ä»“åº“çš„id</p></li><li><p>å°†mvnä¸Šä¼ çš„æ–¹å¼é›†æˆåˆ°jenkinçš„å…±äº«åº“ä¸­</p><pre class="line-numbers language-none"><code class="language-none">&#x2F;&#x2F;è·å–POMä¸­çš„åæ ‡def GetGav()&#123;   &#x2F;&#x2F;ä¸Šä¼ åˆ¶å“    def jarName &#x3D; sh returnStdout: true, script: &quot;cd target;ls *.jar&quot;    env.jarName &#x3D; jarName - &quot;\n&quot;        def pom &#x3D; readMavenPom file: &#39;pom.xml&#39;    env.pomVersion &#x3D; &quot;$&#123;pom.version&#125;&quot;    env.pomArtifact &#x3D; &quot;$&#123;pom.artifactId&#125;&quot;    env.pomPackaging &#x3D; &quot;$&#123;pom.packaging&#125;&quot;    env.pomGroupId &#x3D; &quot;$&#123;pom.groupId&#125;&quot;        println(&quot;$&#123;pomGroupId&#125;-$&#123;pomArtifact&#125;-$&#123;pomVersion&#125;-$&#123;pomPackaging&#125;&quot;)    return [&quot;$&#123;pomGroupId&#125;&quot;,&quot;$&#123;pomArtifact&#125;&quot;,&quot;$&#123;pomVersion&#125;&quot;,&quot;$&#123;pomPackaging&#125;&quot;]&#125;&#x2F;&#x2F;Nexus plugin deploydef NexusUpload()&#123;    &#x2F;&#x2F;use nexus plugin    nexusArtifactUploader artifacts: [[artifactId: &quot;$&#123;pomArtifact&#125;&quot;,                                         classifier: &#39;&#39;,                                         file: &quot;$&#123;filePath&#125;&quot;,                                         type: &quot;$&#123;pomPackaging&#125;&quot;]],                             credentialsId: &#39;0c2b0fb5-3ef4-44fe-91d4-86906387a2c4&#39;,                             groupId: &quot;$&#123;pomGroupId&#125;&quot;,                             nexusUrl: &#39;192.168.0.131:8081&#39;,                             nexusVersion: &#39;nexus3&#39;,                             protocol: &#39;http&#39;,                             repository: &quot;$&#123;repoName&#125;&quot;,                             version: &quot;$&#123;pomVersion&#125;&quot;&#125;&#x2F;&#x2F;mvn deploydef MavenUpload()&#123;              def mvnHome &#x3D; tool &quot;M2&quot;    sh  &quot;&quot;&quot;         cd target&#x2F;        $&#123;mvnHome&#125;&#x2F;bin&#x2F;mvn deploy:deploy-file -Dmaven.test.skip&#x3D;true  \                                -Dfile&#x3D;$&#123;jarName&#125; -DgroupId&#x3D;$&#123;pomGroupId&#125; \                                -DartifactId&#x3D;$&#123;pomArtifact&#125; -Dversion&#x3D;$&#123;pomVersion&#125;  \                                -Dpackaging&#x3D;$&#123;pomPackaging&#125; -DrepositoryId&#x3D;maven-nexus-repo \                                -Durl&#x3D;http:&#x2F;&#x2F;192.168.0.131:8081&#x2F;repository&#x2F;maven-nexus-repo         &quot;&quot;&quot;&#125;&#x2F;&#x2F;åˆ¶å“æ™‹çº§def ArtifactUpdate(updateType,artifactUrl)&#123;    &#x2F;&#x2F;æ™‹çº§ç­–ç•¥    if (&quot;$&#123;updateType&#125;&quot; &#x3D;&#x3D; &quot;snapshot -&gt; release&quot;)&#123;        println(&quot;snapshot -&gt; release&quot;)        &#x2F;&#x2F;ä¸‹è½½åŸå§‹åˆ¶å“        sh &quot;  rm -fr updates &amp;&amp; mkdir updates &amp;&amp; cd updates &amp;&amp; wget $&#123;artifactUrl&#125; &amp;&amp; ls -l &quot;        &#x2F;&#x2F;è·å–artifactID                 artifactUrl &#x3D; artifactUrl -  &quot;http:&#x2F;&#x2F;192.168.1.200:30083&#x2F;repository&#x2F;maven-hostd&#x2F;&quot;        artifactUrl &#x3D; artifactUrl.split(&quot;&#x2F;&quot;).toList()                println(artifactUrl.size())        env.jarName &#x3D; artifactUrl[-1]         env.pomVersion &#x3D; artifactUrl[-2].replace(&quot;SNAPSHOT&quot;,&quot;RELEASE&quot;)        env.pomArtifact &#x3D; artifactUrl[-3]        pomPackaging &#x3D; artifactUrl[-1]        pomPackaging &#x3D; pomPackaging.split(&quot;\\.&quot;).toList()[-1]        env.pomPackaging &#x3D; pomPackaging[-1]        env.pomGroupId &#x3D; artifactUrl[0..-4].join(&quot;.&quot;)        println(&quot;$&#123;pomGroupId&#125;##$&#123;pomArtifact&#125;##$&#123;pomVersion&#125;##$&#123;pomPackaging&#125;&quot;)        env.newJarName &#x3D; &quot;$&#123;pomArtifact&#125;-$&#123;pomVersion&#125;.$&#123;pomPackaging&#125;&quot;                &#x2F;&#x2F;æ›´æ”¹åç§°        sh &quot; cd updates &amp;&amp; mv $&#123;jarName&#125; $&#123;newJarName&#125; &quot;                &#x2F;&#x2F;ä¸Šä¼ åˆ¶å“        env.repoName &#x3D; &quot;maven-release&quot;        env.filePath &#x3D; &quot;updates&#x2F;$&#123;newJarName&#125;&quot;        NexusUpload()    &#125;&#125;def main(uploadType)&#123;    GetGav()    if (&quot;$&#123;uploadType&#125;&quot; &#x3D;&#x3D; &quot;maven&quot;)&#123;        MavenUpload()    &#125; else if (&quot;$&#123;uploadType&#125;&quot; &#x3D;&#x3D; &quot;nexus&quot;) &#123;        env.repoName &#x3D; &quot;maven-nexus-repo&quot;        env.filePath &#x3D; &quot;target&#x2F;$&#123;jarName&#125;&quot;        NexusUpload()    &#125;&#125;def MavenUpload()&#123;              def mvnHome &#x3D; tool &quot;M2&quot;    sh  &quot;&quot;&quot;         cd target&#x2F;        $&#123;mvnHome&#125;&#x2F;bin&#x2F;mvn deploy:deploy-file -Dmaven.test.skip&#x3D;true  \                                -Dfile&#x3D;$&#123;jarName&#125; -DgroupId&#x3D;$&#123;pomGroupId&#125; \                                -DartifactId&#x3D;$&#123;pomArtifact&#125; -Dversion&#x3D;$&#123;pomVersion&#125;  \                                -Dpackaging&#x3D;$&#123;pomPackaging&#125; -DrepositoryId&#x3D;maven-nexus-repo \                                -Durl&#x3D;http:&#x2F;&#x2F;192.168.0.131:8081&#x2F;repository&#x2F;maven-nexus-repo         &quot;&quot;&quot;&#125;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><ol start="5"><li><p>åœ¨pipelineæ‰“åŒ…å®Œæˆåï¼Œè°ƒç”¨å‡½æ•°ï¼Œæ‰§è¡Œä¸Šä¼ åˆ¶å“å‡½æ•°ï¼Œå‚æ•°é€‰æ‹©maven</p><p><img src="/Nexus%E5%88%B6%E5%93%81%E4%B8%8A%E4%BC%A0-jenkins/1659079686737.png" alt="1659079686737"></p></li></ol></li></ol><h3 id="nexus-æ’ä»¶ä¸Šä¼ åˆ¶å“"><a href="#nexus-æ’ä»¶ä¸Šä¼ åˆ¶å“" class="headerlink" title="nexus æ’ä»¶ä¸Šä¼ åˆ¶å“"></a>nexus æ’ä»¶ä¸Šä¼ åˆ¶å“</h3><ol><li><p>ç³»ç»Ÿè®¾ç½®â€”&gt;æ’ä»¶ç®¡ç†â€”&gt;å¯ç”¨æ’ä»¶ é€‰æ‹©nexus-artifact-uploaderæ’ä»¶å®‰è£…</p></li><li><p>æˆ‘çš„è§†å›¾â€”&gt;å¯¹åº”é¡¹ç›®â€”æµæ°´çº¿è¯­æ³•â€”&gt;ç‰‡æ®µç”Ÿæˆå™¨â€”&gt;nexuså¯¹åº”çš„é€‰é¡¹ï¼Œè¾“å…¥ç›¸å…³ä¿¡æ¯æ³¨æ„ï¼š ç‰‡æ®µç”Ÿæˆå™¨éƒ½æ˜¯å•å¼•å·ï¼Œå¼•å…¥åˆ°pipelineä¸­éœ€è¦ä½¿ç”¨åŒå·</p></li></ol><p>   <img src="/Nexus%E5%88%B6%E5%93%81%E4%B8%8A%E4%BC%A0-jenkins/1659080003445.png" alt="1659080003445"></p><ol start="3"><li><p>éœ€è¦ä¿®æ”¹pomæ–‡ä»¶ï¼Œæ³¨æ„ä¸å®¹versionå¯¹åº”ä¸åŒçš„ä»“åº“ç±»å‹, å¦‚æœè¿œç¨‹ä»“åº“æ—¶mixç±»å‹ï¼Œåˆ™å¯ä»¥å‘å…¶ä¸­ä¼ å…¥å‘å¸ƒç‰ˆå’Œå¿«ç…§ï¼Œ å¦‚æœä¸ºrelease ï¼Œåˆ™ä»…å¯ä»¥å‘è¿œç¨‹ä»“åº“ä¸­ä¼ å…¥å‘å¸ƒç‰ˆï¼Œå¦‚æœä¸ºsnapshot,åˆ™ä»…å¯ä»¥ä¸Šä¼ å¿«ç…§ç‰ˆï¼Œåœ¨pomæ–‡ä»¶ä¸­ï¼Œç‰ˆæœ¬å¿…é¡»å¤§å†™å¦‚1.1-RELEASE 1.1-SNAPSHOT</p></li><li><p>å‘å¸ƒç‰ˆ</p></li></ol>   <pre class="line-numbers language-none"><code class="language-none">&lt;modelVersion&gt;4.0.0&lt;&#x2F;modelVersion&gt;  &lt;groupId&gt;com.mycompany.app&lt;&#x2F;groupId&gt;  &lt;artifactId&gt;my-app&lt;&#x2F;artifactId&gt;  &lt;packaging&gt;jar&lt;&#x2F;packaging&gt;  &lt;version&gt;1.1-RELEASE&lt;&#x2F;version&gt;  &lt;name&gt;my-app&lt;&#x2F;name&gt;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><ol start="2"><li>å¿«ç…§ç‰ˆ</li></ol>   <pre class="line-numbers language-none"><code class="language-none">&lt;groupId&gt;com.mycompany.app&lt;&#x2F;groupId&gt; &lt;artifactId&gt;my-app&lt;&#x2F;artifactId&gt; &lt;packaging&gt;jar&lt;&#x2F;packaging&gt; &lt;version&gt;1.1-SNAPSHOT&lt;&#x2F;version&gt; &lt;name&gt;my-app&lt;&#x2F;name&gt;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre><ol start="4"><li><p>å¼€å§‹æ‰§è¡Œæµæ°´çº¿</p></li><li><p>çœ‹åˆ°å¦‚ä¸‹æ—¥å¿—ï¼Œåˆ™è¯´æ˜æ‰§è¡ŒæˆåŠŸ</p></li></ol><pre><code>  <pre class="line-numbers language-none"><code class="language-none">Type: jarVersion: 1.1-RELEASEFile: my-app-1.1-RELEASE.jarRepository:maven_nexus_releaseUploading: http:&#x2F;&#x2F;192.168.0.131:8081&#x2F;repository&#x2F;maven_nexus_release&#x2F;com&#x2F;mycompany&#x2F;app&#x2F;my-app&#x2F;1.1-RELEASE&#x2F;my-app-1.1-RELEASE.jar100 % completed (2.6 kB &#x2F; 2.6 kB).Uploaded: http:&#x2F;&#x2F;192.168.0.131:8081&#x2F;repository&#x2F;maven_nexus_release&#x2F;com&#x2F;mycompany&#x2F;app&#x2F;my-app&#x2F;1.1-RELEASE&#x2F;my-app-1.1-RELEASE.jar (2.6 kB at 6.0 kB&#x2F;s)Uploading artifact my-app-1.1-RELEASE.jar completed.<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>  </code></pre><ol start="2"><li><p>çœ‹åˆ°å¦‚ä¸‹æ—¥å¿—ï¼Œåˆ™è¯´æ˜ç‰ˆæœ¬å’Œå¯¹åº”çš„ä»“åº“ç±»å‹ä¸ä¸€è‡´ï¼Œ ç¤ºä¾‹æ˜¯å‘å‘å¸ƒç‰ˆä»“åº“ä¸Šä¼ å¿«ç…§æ‰“å°çš„æ—¥å¿—</p><pre class="line-numbers language-none"><code class="language-none">Version: 1.1-SNAPSHOTFile: my-app-1.1-SNAPSHOT.jarRepository:maven_nexus_releaseDownloading: http:&#x2F;&#x2F;192.168.0.131:8081&#x2F;repository&#x2F;maven_nexus_release&#x2F;com&#x2F;mycompany&#x2F;app&#x2F;my-app&#x2F;1.1-SNAPSHOT&#x2F;maven-metadata.xmlUploading: http:&#x2F;&#x2F;192.168.0.131:8081&#x2F;repository&#x2F;maven_nexus_release&#x2F;com&#x2F;mycompany&#x2F;app&#x2F;my-app&#x2F;1.1-SNAPSHOT&#x2F;my-app-1.1-20220730.160033-1.jar100 % completed (2.6 kB &#x2F; 2.6 kB).Failed to deploy artifacts: Could not transfer artifact com.mycompany.app:my-app:jar:1.1-20220730.160033-1 from&#x2F;to maven_nexus_release (http:&#x2F;&#x2F;192.168.0.131:8081&#x2F;repository&#x2F;maven_nexus_release): Failed to transfer file: http:&#x2F;&#x2F;192.168.0.131:8081&#x2F;repository&#x2F;maven_nexus_release&#x2F;com&#x2F;mycompany&#x2F;app&#x2F;my-app&#x2F;1.1-SNAPSHOT&#x2F;my-app-1.1-20220730.160033-1.jar. Return code is: 400, ReasonPhrase:Repository version policy: RELEASE does not allow version: 1.1-20220730.160033-1.<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></li></ol><h3 id="é—®é¢˜è®°å½•"><a href="#é—®é¢˜è®°å½•" class="headerlink" title="é—®é¢˜è®°å½•"></a>é—®é¢˜è®°å½•</h3><p>å®‰è£…æ’ä»¶æ˜¯ä¸€ç›´æ˜¯pendingçŠ¶æ€æˆ–è€…ä¸€ç›´æ˜¯ç­‰å¾…çŠ¶æ€ï¼Œå¤§æ¦‚ç‡æ˜¯æ’ä»¶æºä¸å¥½å¯¼è‡´ï¼Œæ­¤æ—¶éœ€è¦è®¿é—® <a href="http://ip/pluginManager/advanced%EF%BC%8C">http://ip/pluginManager/advancedï¼Œ</a> æ‰¾åˆ°å‡çº§ç«™ç‚¹ï¼Œå°†urlæ›¿æ¢ä¸ºæ¸…åç«™ç‚¹<a href="https://mirrors.tuna.tsinghua.edu.cn/jenkins/updates/update-center.json">https://mirrors.tuna.tsinghua.edu.cn/jenkins/updates/update-center.json</a></p><p>ç„¶åæäº¤ã€‚ ç„¶åé‡å¯æœåŠ¡<a href="http://ip/restart">http://ip/restart</a></p><p><img src="/Nexus%E5%88%B6%E5%93%81%E4%B8%8A%E4%BC%A0-jenkins/1659036474888.png" alt="1659036474888"></p><h2 id="åˆ¶å“å‘å¸ƒ-é€‰æ‹©åˆ¶å“"><a href="#åˆ¶å“å‘å¸ƒ-é€‰æ‹©åˆ¶å“" class="headerlink" title="åˆ¶å“å‘å¸ƒ-é€‰æ‹©åˆ¶å“"></a>åˆ¶å“å‘å¸ƒ-é€‰æ‹©åˆ¶å“</h2><ol><li><p>å®‰è£…æ’ä»¶ maven-artifact-choicelistprovider</p></li><li><p>jenkinsâ€“æˆ‘çš„è§†å›¾â€”å¯¹åº”çš„é¡¹ç›®â€“é…ç½®â€“å‚æ•°åŒ–æ„å»ºâ€”æ·»åŠ å‚æ•°â€”extentsible choice æ·»åŠ artifactUrlå‚æ•°ï¼Œé€‰æ‹©ä¿å­˜</p></li></ol><p><img src="/Nexus%E5%88%B6%E5%93%81%E4%B8%8A%E4%BC%A0-jenkins/1659086813031.png" alt="1659086813031"></p><ol start="3"><li>åœ¨å‚æ•°åŒ–æ„å»ºä¸­é€‰æ‹©éœ€è¦å‘å¸ƒçš„ç‰ˆæœ¬</li></ol><p>   <img src="/Nexus%E5%88%B6%E5%93%81%E4%B8%8A%E4%BC%A0-jenkins/1659198397205.png" alt="1659198397205"></p><ol start="4"><li>åœ¨jenkinsfielä¸­å¼•å…¥artifactUrlå‚æ•°</li></ol><p><img src="/Nexus%E5%88%B6%E5%93%81%E4%B8%8A%E4%BC%A0-jenkins/1659083972581.png" alt="1659083972581"></p><ol start="4"><li>åœ¨nexusä¸­å¼€æ”¾æƒé™</li></ol><p><img src="/Nexus%E5%88%B6%E5%93%81%E4%B8%8A%E4%BC%A0-jenkins/1659083801260.png" alt="1659083801260"></p><ol start="5"><li>å¼€å¯å¯¹åº”çš„æµæ°´çº¿</li></ol><h2 id="åˆ¶å“æ™‹çº§"><a href="#åˆ¶å“æ™‹çº§" class="headerlink" title="åˆ¶å“æ™‹çº§"></a>åˆ¶å“æ™‹çº§</h2><p>è¯´æ˜ï¼š å°†snapshotç‰ˆæœ¬æ™‹çº§ä¸ºreleaseç‰ˆæœ¬</p><p>å‡†å¤‡ï¼š </p><ol><li>æ–°å»ºreleaseä»“åº“ä¸ºmaven_nexus_release</li><li>æ–°å»ºæ™‹çº§æµæ°´çº¿maven_service_UPDATE</li></ol><h4 id="æµç¨‹"><a href="#æµç¨‹" class="headerlink" title="æµç¨‹"></a>æµç¨‹</h4><ol><li>åˆ¶å“æ™‹çº§å…±äº«åº“nexu.groovyä¸­ç¼–å†™å¦‚ä¸‹ä»£ç </li></ol>   <pre class="line-numbers language-none"><code class="language-none">vi &#x2F;src&#x2F;org&#x2F;devops&#x2F;nexus.groovy&#x2F;&#x2F;&#x2F;Nexus plugin deploydef NexusUpload()&#123;    &#x2F;&#x2F;use nexus plugin    nexusArtifactUploader artifacts: [[artifactId: &quot;$&#123;pomArtifact&#125;&quot;,                                         classifier: &#39;&#39;,                                         file: &quot;$&#123;filePath&#125;&quot;,                                         type: &quot;$&#123;pomPackaging&#125;&quot;]],                             credentialsId: &#39;0c2b0fb5-3ef4-44fe-91d4-86906387a2c4&#39;,                             groupId: &quot;$&#123;pomGroupId&#125;&quot;,                             nexusUrl: &#39;192.168.0.131:8081&#39;,                             nexusVersion: &#39;nexus3&#39;,                             protocol: &#39;http&#39;,                             repository: &quot;$&#123;repoName&#125;&quot;,                             version: &quot;$&#123;pomVersion&#125;&quot;&#125;&#x2F;&#x2F;åˆ¶å“æ™‹çº§def ArtifactUpdate(updateType,artifactUrl)&#123;    &#x2F;&#x2F;æ™‹çº§ç­–ç•¥    if (&quot;$&#123;updateType&#125;&quot; &#x3D;&#x3D; &quot;snapshot -&gt; release&quot;)&#123;        println(&quot;snapshot -&gt; release&quot;)        &#x2F;&#x2F;ä¸‹è½½åŸå§‹åˆ¶å“        sh &quot;  rm -fr updates &amp;&amp; mkdir updates &amp;&amp; cd updates &amp;&amp; wget $&#123;artifactUrl&#125; &amp;&amp; ls -l &quot;        &#x2F;&#x2F;è·å–artifactID                 artifactUrl &#x3D; artifactUrl -  &quot;http:&#x2F;&#x2F;192.168.0.131:8081&#x2F;repository&#x2F;maven-nexus-repo&#x2F;&quot;        artifactUrl &#x3D; artifactUrl.split(&quot;&#x2F;&quot;).toList()        &#x2F;&#x2F; [com, mycompany, app, my-app, 1.0-SNAPSHOT, my-app-1.0-20220730.110019-1.jar]                println(artifactUrl.size())        println(&quot;æ™‹çº§url&quot;)        println(artifactUrl)        env.jarName &#x3D; artifactUrl[-1]         env.pomVersion &#x3D; artifactUrl[-2].replace(&quot;SNAPSHOT&quot;,&quot;RELEASE&quot;)        env.pomVersion &#x3D; &quot;1.2-RELEASE&quot;        env.pomArtifact &#x3D; artifactUrl[-3]        pomPackaging &#x3D; artifactUrl[-1]        pomPackaging &#x3D; pomPackaging.split(&quot;\\.&quot;).toList()[-1]        env.pomPackaging &#x3D; pomPackaging[-1]        env.pomGroupId &#x3D; artifactUrl[0..2].join(&quot;.&quot;)        println(&quot;$&#123;pomGroupId&#125;##$&#123;pomArtifact&#125;##$&#123;pomVersion&#125;##$&#123;pomPackaging&#125;&quot;)        env.newJarName &#x3D; &quot;$&#123;pomArtifact&#125;-$&#123;pomVersion&#125;.$&#123;pomPackaging&#125;&quot;                &#x2F;&#x2F;æ›´æ”¹åç§°        sh &quot; cd updates &amp;&amp; mv $&#123;jarName&#125; $&#123;newJarName&#125; &quot;                &#x2F;&#x2F;ä¸Šä¼ åˆ¶å“        env.repoName &#x3D; &quot;maven_nexus_release&quot;           env.filePath &#x3D; &quot;updates&#x2F;$&#123;newJarName&#125;&quot;        NexusUpload()    &#125;&#125;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><ol start="2"><li>æ–°å»ºåˆ¶å“æ™‹çº§jenkinsfile</li></ol>   <pre class="line-numbers language-none"><code class="language-none">#!groovy@Library(&#39;jenkinslib&#39;) _def nexus &#x3D; new org.devops.nexus()def nexusapi &#x3D; new org.devops.nexusapi()String updateType &#x3D; &quot;$&#123;env.updateType&#125;&quot;String artifactUrl &#x3D; &quot;$&#123;env.artifactUrl&#125;&quot;String pkgVersion &#x3D; &quot;$&#123;env.pkgVersion&#125;&quot;pipeline&#123;    agent any        stages&#123;            stage(&quot;UpdateArtifact&quot;)&#123;            steps&#123;                script&#123;                   nexus.ArtifactUpdate(updateType,artifactUrl)                                      &#x2F;&#x2F;nexusapi.GetRepoComponents(&quot;maven-hostd&quot;)                   &#x2F;&#x2F;nexusapi.GetSingleComponents(&quot;maven-hostd&quot;,&quot;com.mycompany.app&quot;,&quot;my-app&quot;,pkgVersion)                                &#125;                        &#125;                &#125;    &#125;&#125;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><ol start="3"><li>jenkinsæ–°å»ºæ™‹çº§æµæ°´çº¿</li></ol><p>   <img src="/Nexus%E5%88%B6%E5%93%81%E4%B8%8A%E4%BC%A0-jenkins/1659330053765.png" alt="1659330053765"></p><ol start="4"><li><p>é€‰æ‹©éœ€è¦æ™‹çº§çš„åˆ¶å“ï¼Œå¼€å§‹æ™‹çº§ä»»åŠ¡</p><p><img src="/Nexus%E5%88%B6%E5%93%81%E4%B8%8A%E4%BC%A0-jenkins/1659330155106.png" alt="1659330155106"></p><p><img src="/Nexus%E5%88%B6%E5%93%81%E4%B8%8A%E4%BC%A0-jenkins/1659330192806.png" alt="1659330192806"></p></li></ol><h2 id="docker-å¯åŠ¨å¤±è´¥æ’æŸ¥"><a href="#docker-å¯åŠ¨å¤±è´¥æ’æŸ¥" class="headerlink" title="docker å¯åŠ¨å¤±è´¥æ’æŸ¥"></a>docker å¯åŠ¨å¤±è´¥æ’æŸ¥</h2><h3 id="é—®é¢˜"><a href="#é—®é¢˜" class="headerlink" title="é—®é¢˜"></a>é—®é¢˜</h3><p>systemctl start dockeråæŠ¥é”™ï¼š</p><pre class="line-numbers language-none"><code class="language-none">[root@bogon zhangtianqing]# systemctl start dockerJob for docker.service failed because the control process exited with error code.See &quot;systemctl status docker.service&quot; and &quot;journalctl -xe&quot; for details.<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre><p>æ€è·¯ï¼š</p><ol><li><p>æŒ‰ç…§æç¤ºæ‰§è¡Œsystemctl status docker.service æˆ–è€…journalctl -xeï¼Œç»“æœå¦‚ä¸‹ï¼Œä½†æ˜¯éƒ½çœ‹ä¸å‡ºæ¥æ—¶ä»€ä¹ˆé—®é¢˜</p><pre class="line-numbers language-none"><code class="language-none">Jul 29 14:00:06 bogon containerd[1842]:         &#x2F;root&#x2F;rpmbuild&#x2F;BUILD&#x2F;vendor&#x2F;go.etcd.io&#x2F;bbolt&#x2F;db.go:772 +0x82Jul 29 14:00:06 bogon containerd[1842]: github.com&#x2F;containerd&#x2F;containerd&#x2F;metadata.(*DB).getMarked(0x203000, &#123;0x5585afab3d38, 0xc000081f00&#125;)Jul 29 14:00:06 bogon containerd[1842]:         &#x2F;root&#x2F;rpmbuild&#x2F;BUILD&#x2F;metadata&#x2F;db.go:369 +0x70Jul 29 14:00:06 bogon containerd[1842]: github.com&#x2F;containerd&#x2F;containerd&#x2F;metadata.(*DB).GarbageCollect(0xc000209a40, &#123;0x5585afab3d38, 0xc000081&gt;Jul 29 14:00:06 bogon containerd[1842]:         &#x2F;root&#x2F;rpmbuild&#x2F;BUILD&#x2F;metadata&#x2F;db.go:285 +0x8bJul 29 14:00:06 bogon containerd[1842]: github.com&#x2F;containerd&#x2F;containerd&#x2F;gc&#x2F;scheduler.(*gcScheduler).run(0xc000082de0, &#123;0x5585afab3d38, 0xc0000&gt;Jul 29 14:00:06 bogon containerd[1842]:         &#x2F;root&#x2F;rpmbuild&#x2F;BUILD&#x2F;gc&#x2F;scheduler&#x2F;scheduler.go:310 +0x4eaJul 29 14:00:06 bogon containerd[1842]: created by github.com&#x2F;containerd&#x2F;containerd&#x2F;gc&#x2F;scheduler.init.0.func1Jul 29 14:00:06 bogon containerd[1842]:         &#x2F;root&#x2F;rpmbuild&#x2F;BUILD&#x2F;gc&#x2F;scheduler&#x2F;scheduler.go:132 +0x37dJul 29 14:00:06 bogon systemd[1]: containerd.service: Main process exited, code&#x3D;exited, status&#x3D;2&#x2F;INVALIDARGUMENTJul 29 14:00:06 bogon systemd[1]: containerd.service: Failed with result &#39;exit-code&#39;.<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></li><li><p>é€šè¿‡docker æ—¥å¿—çœ‹ï¼Œæ‰§è¡Œ</p></li></ol>   <pre class="line-numbers language-none"><code class="language-none">dockerd --debug<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>   å¾—åˆ°å¦‚ä¸‹ç»“æœ</p>   <pre class="line-numbers language-none"><code class="language-none">INFO[2022-07-29T14:04:22.235455758-04:00] Starting up                                  failed to start daemon: pid file found, ensure docker is not running or delete &#x2F;var&#x2F;run&#x2F;docker.pid<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre><ol start="3"><li>ä¾æ®æ—¥å¿—ï¼Œåˆ é™¤å¯¹åº”çš„pidé‡æ–°å¯åŠ¨</li></ol>   <pre class="line-numbers language-none"><code class="language-none">rm -f &#x2F;var&#x2F;run&#x2F;docker.pidsystemctl start docker<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre><h2 id="è™šæ‹Ÿæœºå› ä¸ºunmount-and-xfs-repairé—®é¢˜å¯åŠ¨å¤±è´¥"><a href="#è™šæ‹Ÿæœºå› ä¸ºunmount-and-xfs-repairé—®é¢˜å¯åŠ¨å¤±è´¥" class="headerlink" title="è™šæ‹Ÿæœºå› ä¸ºunmount and xfs_repairé—®é¢˜å¯åŠ¨å¤±è´¥"></a>è™šæ‹Ÿæœºå› ä¸ºunmount and xfs_repairé—®é¢˜å¯åŠ¨å¤±è´¥</h2><p>   è™šæ‹Ÿæœºçªç„¶æ–­ç”µï¼Œå¯¼è‡´æ–‡ä»¶åˆ†åŒºæŸåï¼Œè¿›å…¥ä¸äº†ç³»ç»Ÿã€‚</p><p>   è§£å†³åŠæ³•ï¼š</p><ol><li><p>å¼€æœºæŒ‰e è¿›å…¥å•ç”¨æˆ·æ¨¡å¼</p></li><li><p>æ‰¾åˆ°linuxè¡Œï¼Œåœ¨æœ€åæ·»åŠ rd.break, æŒ‰ä¸‹ctrl+x è¿›å…¥æ•‘æ´æ¨¡å¼</p><ol start="3"><li>ls -l &#x2F;dev&#x2F;mapper</li><li>æŸ¥çœ‹&#x2F;dm0</li><li>unmount &#x2F;dev&#x2F;mapper&#x2F;cs-root  # å¸è½½ç›®å½•</li><li>xfs_repair -L &#x2F;dev&#x2F;mapper&#x2F;cs-root  # ä¿®å¤</li><li>reboot</li></ol><h2 id="nexusAPIåˆ†è£…åˆ°å…±äº«åº“"><a href="#nexusAPIåˆ†è£…åˆ°å…±äº«åº“" class="headerlink" title="nexusAPIåˆ†è£…åˆ°å…±äº«åº“"></a>nexusAPIåˆ†è£…åˆ°å…±äº«åº“</h2><ol><li><p>æ–°å»ºå…±äº«åº“æ–‡ä»¶</p><pre class="line-numbers language-none"><code class="language-none">vi &#x2F;src&#x2F;org&#x2F;devops&#x2F;nexusapi.groovypackage org.devops&#x2F;&#x2F;å°è£…HTTPdef HttpReq(reqType,reqUrl,reqBody)&#123;    def sonarServer &#x3D; &quot;http:&#x2F;&#x2F;192.168.0.131:8081&#x2F;service&#x2F;rest&quot;       result &#x3D; httpRequest authentication: &#39;0c2b0fb5-3ef4-44fe-91d4-86906387a2c4&#39;,            httpMode: reqType,             contentType: &quot;APPLICATION_JSON&quot;,            consoleLogResponseBody: true,            ignoreSslErrors: true,             requestBody: reqBody,            url: &quot;$&#123;sonarServer&#125;&#x2F;$&#123;reqUrl&#125;&quot;,            quiet: true        return result&#125;&#x2F;&#x2F;è·å–ä»“åº“ä¸­æ‰€æœ‰ç»„ä»¶def GetRepoComponents(repoName)&#123;    apiUrl &#x3D; &quot;&#x2F;v1&#x2F;components?repository&#x3D;$&#123;repoName&#125;&quot;    response &#x3D; HttpReq(&quot;GET&quot;,apiUrl,&#39;&#39;)        response &#x3D; readJSON text: &quot;&quot;&quot;$&#123;response.content&#125;&quot;&quot;&quot;    println(&quot;ç»„ä»¶ä¸ªæ•°&quot;)    println(response[&quot;items&quot;].size())    return response[&quot;items&quot;]&#125;&#x2F;&#x2F;è·å–å•ä»¶ç»„ä»¶def GetComponentsId(repoName,groupId,artifactId,version)&#123;    println(&quot;è·å–å•ä»¶ç»„ä»¶ID&quot;)    result &#x3D; GetRepoComponents(repoName)         for (component in result)&#123;                if (component[&quot;group&quot;] &#x3D;&#x3D; groupId &amp;&amp; component[&quot;name&quot;] &#x3D;&#x3D; artifactId &amp;&amp; component[&quot;version&quot;] &#x3D;&#x3D; version  )&#123;                        componentId &#x3D; component[&quot;id&quot;]                        return componentId        &#125;    &#125;        println(componentId)&#125;&#x2F;&#x2F;è·å–ç»„ä»¶ä¿¡æ¯def GetSingleComponents(repoName,groupId,artifactId,version)&#123;    println(&quot;è·å–å•ä»¶ç»„ä»¶ä¿¡æ¯&quot;)    componentId &#x3D; GetComponentsId(repoName,groupId,artifactId,version)    apiUrl &#x3D; &quot;&#x2F;v1&#x2F;components&#x2F;$&#123;componentId&#125;&quot;    response &#x3D; HttpReq(&quot;GET&quot;,apiUrl,&#39;&#39;)        response &#x3D; readJSON text: &quot;&quot;&quot;$&#123;response.content&#125;&quot;&quot;&quot;    println(response[&quot;assets&quot;][&quot;downloadUrl&quot;])&#125;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></li><li><p>åœ¨jenkinsfileä¸­è°ƒç”¨</p><pre class="line-numbers language-none"><code class="language-none">#!groovy@Library(&#39;jenkinslib&#39;) _def nexus &#x3D; new org.devops.nexus()def nexusapi &#x3D; new org.devops.nexusapi()String updateType &#x3D; &quot;$&#123;env.updateType&#125;&quot;String artifactUrl &#x3D; &quot;$&#123;env.artifactUrl&#125;&quot;String pkgVersion &#x3D; &quot;$&#123;env.pkgVersion&#125;&quot;pipeline&#123;    agent any        stages&#123;            stage(&quot;UpdateArtifact&quot;)&#123;            steps&#123;                script&#123;                   nexus.ArtifactUpdate(updateType,artifactUrl)                                      nexusapi.GetRepoComponents(&quot;maven_nexus_release&quot;)                   &#x2F;&#x2F; nexusapi.GetSingleComponents(&quot;maven_nexus_release&quot;,&quot;com.mycompany.app&quot;,&quot;my-app&quot;,pkgVersion)                                &#125;                        &#125;                &#125;    &#125;&#125;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></li><li><p>æ‰§è¡Œæµæ°´çº¿è°ƒç”¨æˆåŠŸæˆªå›¾å¦‚ä¸‹</p><p><img src="/Nexus%E5%88%B6%E5%93%81%E4%B8%8A%E4%BC%A0-jenkins/1659355127049.png" alt="1659355127049"></p></li><li><p>è·å–å•ä¸ªå•ä¸ªç»„ä»¶çš„ä¿¡æ¯</p></li><li><p>åœ¨jenkinsä¸­æ–°å»ºpkgVersionå‚æ•°ï¼Œå€¼ä¸ºæŸä¸ªç‰ˆæœ¬å·</p></li><li><p>æ‰“å¼€jenkinsfileä¸­çš„æ³¨é‡Šä»£ç ï¼Œå¼€å§‹æ‰§è¡Œ</p></li><li><p>æˆªå›¾å¦‚ä¸‹</p><p><img src="/Nexus%E5%88%B6%E5%93%81%E4%B8%8A%E4%BC%A0-jenkins/1659355323336.png" alt="1659355323336"></p></li></ol></li><li></li></ol>]]></content>
      
      
      <categories>
          
          <category> Devops </category>
          
      </categories>
      
      
        <tags>
            
            <tag> CICD </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>docker+harbor+jenkinså®‰è£…å‘½ä»¤æ±‡æ€»</title>
      <link href="/posts/19046.html"/>
      <url>/posts/19046.html</url>
      
        <content type="html"><![CDATA[<h1 id="1-å®‰è£…docker"><a href="#1-å®‰è£…docker" class="headerlink" title="1. å®‰è£…docker"></a>1. å®‰è£…docker</h1><p>1.1 sudo yum install -y yum-utils<br>1.2 yum-config-manager     â€“add-repo     <a href="https://download.docker.com/linux/centos/docker-ce.repo">https://download.docker.com/linux/centos/docker-ce.repo</a><br>1.3  yum install docker-ce docker-ce-cli containerd.io<br>1.4 systemctl start docker<br>1.5 yum erase podman buildah (centosè§£å†³podmançš„é”™è¯¯)</p><h1 id="2-docker-compose"><a href="#2-docker-compose" class="headerlink" title="2. docker-compose"></a>2. docker-compose</h1><p>2.1 curl -L <a href="https://github.com/docker/compose/releases/download/1.27.4/docker-compose-%60uname">https://github.com/docker/compose/releases/download/1.27.4/docker-compose-`uname</a> -s<code>-</code>uname -m&#96; -o &#x2F;usr&#x2F;bin&#x2F;docker-compose<br>2.2 chmod +x &#x2F;usr&#x2F;local&#x2F;bin&#x2F;docker-compose</p><h1 id="3-å®‰è£…docker-harbor"><a href="#3-å®‰è£…docker-harbor" class="headerlink" title="3. å®‰è£…docker-harbor"></a>3. å®‰è£…docker-harbor</h1><p>3.1 wget  <a href="https://storage.googleapis.com/harbor-releases/release-1.8.0/harbor-online-installer-v1.8.4.tgz">https://storage.googleapis.com/harbor-releases/release-1.8.0/harbor-online-installer-v1.8.4.tgz</a><br>3.2 tar -xf harbor-offline-installer-v2.0.0.tgz<br>3.3 mv harbor-offline-installer-v2.0.0 &#x2F;usr&#x2F;local&#x2F;harbor<br>3.4 vim &#x2F;usr&#x2F;local&#x2F;harbor&#x2F;harbor.yml<br>3.5 hostname: 10.168.4.44:5000  #æœ¬æœºIP+ç«¯å£<br>3.6 port: 5000<br>3.7 .&#x2F;install<br>3.8. æ–°å»ºç”¨æˆ·<br>3.9. æ–°å»ºé¡¹ç›®<br>3.10. å°†ç”¨æˆ·åŠ å…¥é¡¹ç›®</p><h1 id="4-docker-æœºå™¨è¿æ¥æµ‹è¯•"><a href="#4-docker-æœºå™¨è¿æ¥æµ‹è¯•" class="headerlink" title="4. docker æœºå™¨è¿æ¥æµ‹è¯•"></a>4. docker æœºå™¨è¿æ¥æµ‹è¯•</h1><p>4.1 vi &#x2F;etc&#x2F;docker&#x2F;daemon.json</p><pre class="line-numbers language-none"><code class="language-none">&#123; &quot;registry-mirrors&quot;: [&quot;https:&#x2F;&#x2F;rzugk9e7.mirror.aliyuncs.com&quot;],&quot;insecure-registries&quot;: [&quot;192.168.72.130:5000&quot;] &#125;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre><p>â€‹4.2 systemctl daemon-reload<br>â€‹4.3 systemctl restart docker<br>â€‹4.4 docker login<br>â€‹4.5 docker tag nginx 192.168.72.130:5000&#x2F;jenkins&#x2F;nginx:v1.0  ip:port&#x2F;project&#x2F;tag<br>â€‹4.6 docker push 192.168.72.130:5000&#x2F;jenkins&#x2F;nginx:v1.0<br>â€‹4.7 æŸ¥çœ‹docker æœåŠ¡å…¶ä¸Šæ˜¯å¦æœ‰è¯¥é•œåƒ</p><h1 id="5-jenkins-æœåŠ¡å™¨å®‰è£…jenkins"><a href="#5-jenkins-æœåŠ¡å™¨å®‰è£…jenkins" class="headerlink" title="5. jenkins æœåŠ¡å™¨å®‰è£…jenkins"></a>5. jenkins æœåŠ¡å™¨å®‰è£…jenkins</h1><p>  5.1 å…ˆå®‰è£…docker<br>  5.2 wget -O &#x2F;etc&#x2F;yum.repos.d&#x2F;jenkins.repo <a href="https://pkg.jenkins.io/redhat-stable/jenkins.repo">https://pkg.jenkins.io/redhat-stable/jenkins.repo</a><br>  5.3 rpm â€“import <a href="https://pkg.jenkins.io/redhat-stable/jenkins.io.key">https://pkg.jenkins.io/redhat-stable/jenkins.io.key</a><br>  5.4 yum install epel-release<br>  5.5 yum install java-11-openjdk-devel<br>  5.6 yum install jenkins<br>  5.7 yum install git<br>  5.8 systemctl start jenkins<br>  5.9 firewall-cmd â€“permanent â€“zone&#x3D;public â€“add-port&#x3D;8080&#x2F;tcp<br>  5.10 firewall-cmd â€“reload<br>  5.11 vi &#x2F;var&#x2F;lib&#x2F;jenkins&#x2F;secrets&#x2F;initialAdminPassword<br>  5.22 ip+port è®¿é—®<br>  5.13 ä¸‹è½½æ’ä»¶<br>  5.14 rpm -ql jenkins æŸ¥çœ‹jenkins ç›®å½•<br>  5.15 ç‚¹å‡»ç³»ç»Ÿç®¡ç†â€“&gt;ç®¡ç†ç”¨æˆ·â€“&gt;æ–°å»ºç”¨æˆ·</p><p>  5.17 ç‚¹å‡»ç³»ç»Ÿç®¡ç†â€“&gt;æ’ä»¶ç®¡ç†â€“&gt;å¯é€‰æ’ä»¶â€“&gt;æœç´¢ Role-based Authorization Strategy å¹¶å®‰è£…<br>  5.18 ç‚¹å‡»ç³»ç»Ÿç®¡ç†â€“&gt;Configure Global Security(å…¨å±€å®‰å…¨é…ç½®)â€“&gt;æˆæƒç­–ç•¥ï¼šä¿®æ”¹ä¸º Role-Base Strategy<br>  5.19 æ·»åŠ ç”¨æˆ·</p>]]></content>
      
      
      <categories>
          
          <category> Devops </category>
          
      </categories>
      
      
        <tags>
            
            <tag> jenkins </tag>
            
            <tag> CICD </tag>
            
            <tag> docker </tag>
            
            <tag> harbor </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>gitlab+jenkins+docker+harborå®ç°æµç¨‹è‡ªåŠ¨åŒ–</title>
      <link href="/posts/16669.html"/>
      <url>/posts/16669.html</url>
      
        <content type="html"><![CDATA[<h1 id="CI-x2F-CD-K8S"><a href="#CI-x2F-CD-K8S" class="headerlink" title="CI&#x2F;CD+K8S"></a>CI&#x2F;CD+K8S</h1><h2 id="ä¸€ã€éƒ¨ç½²æµç¨‹"><a href="#ä¸€ã€éƒ¨ç½²æµç¨‹" class="headerlink" title="ä¸€ã€éƒ¨ç½²æµç¨‹"></a>ä¸€ã€éƒ¨ç½²æµç¨‹</h2><p>1ã€ç ”å‘pushåˆ°githubä»£ç åº“</p><p>2ã€Jenkins æ„å»ºï¼Œpull gitä»£ç  ä½¿ç”¨mavenè¿›è¡Œç¼–è¯‘æ‰“åŒ…</p><p>3ã€æ‰“åŒ…ç”Ÿæˆçš„ä»£ç ï¼Œç”Ÿæˆä¸€ä¸ªæ–°ç‰ˆæœ¬çš„é•œåƒï¼Œpushåˆ°æœ¬åœ°dockerä»“åº“harbor</p><p>4ã€å‘å¸ƒï¼Œæµ‹è¯•æœºå™¨ pull æ–°ç‰ˆæœ¬çš„é•œåƒï¼Œå¹¶åˆ é™¤åŸæ¥çš„å®¹å™¨ï¼Œé‡æ–°è¿è¡Œæ–°ç‰ˆæœ¬é•œåƒã€‚</p><h2 id="äºŒã€ç¯å¢ƒè¯´æ˜"><a href="#äºŒã€ç¯å¢ƒè¯´æ˜" class="headerlink" title="äºŒã€ç¯å¢ƒè¯´æ˜"></a>äºŒã€ç¯å¢ƒè¯´æ˜</h2><p><strong>æœåŠ¡åŠæœåŠ¡å™¨è¯´æ˜-Aliyunç¯å¢ƒ</strong></p><blockquote><p><strong>1ã€ä»£ç ä»“åº“</strong></p><p>â€‹github æˆ–è€… git-server æˆ–è€… gitlab</p><p>â€‹æœ¬æ¬¡å®éªŒä½¿ç”¨githubä»“åº“ <a href="https://github.com/">https://github.com/</a></p><p><img src="/image-20200512165810293.png" alt="image-20200512165810293"></p><p><strong>2ã€å®¹å™¨é•œåƒä»“åº“</strong></p><p>â€‹ip:  </p><p>â€‹å…¬ 161.117.37.192</p><p>â€‹ç§ 172.21.39.43</p><p>â€‹ä¸»æœºåï¼šharbor</p><p><strong>3ã€CI&#x2F;CDæœåŠ¡å™¨</strong></p><p>â€‹ipï¼š        </p><p>â€‹å…¬ 161.117.34.103</p><p>â€‹ç§ 172.21.39.44</p><p>â€‹ä¸»æœºåï¼šjenkins</p><p>â€‹è½¯ä»¶ï¼š</p><p>â€‹jdk</p><p>â€‹jenkins</p><p>â€‹git</p><p>â€‹maven</p><p>â€‹docker</p><p><strong>4ã€åº”ç”¨æœåŠ¡å™¨</strong></p><p>â€‹ipï¼š172.21.39.45</p><p>â€‹ä¸»æœºåï¼šdocker</p><p>â€‹è½¯ä»¶ï¼š </p><p>â€‹jq</p><p>â€‹docker</p><p>â€‹æˆ–è€… k8sé›†ç¾¤</p></blockquote><h2 id="ä¸‰ã€éƒ¨ç½²Harboré•œåƒä»“åº“"><a href="#ä¸‰ã€éƒ¨ç½²Harboré•œåƒä»“åº“" class="headerlink" title="ä¸‰ã€éƒ¨ç½²Harboré•œåƒä»“åº“"></a>ä¸‰ã€éƒ¨ç½²Harboré•œåƒä»“åº“</h2><h3 id="1ã€ä¸‹è½½å®‰è£…"><a href="#1ã€ä¸‹è½½å®‰è£…" class="headerlink" title="1ã€ä¸‹è½½å®‰è£…"></a>1ã€ä¸‹è½½å®‰è£…</h3><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">å®˜æ–¹åœ°å€ï¼šhttps://github.com/goharbor/harbor/releasesä¸‹è½½ç¦»çº¿å®‰è£…åŒ…ï¼šéœ€è¦ç¿»å¢™<span class="token comment"># wget https://storage.googleapis.com/harbor-releases/release-1.8.0/harbor-offline-installer-v1.8.0.tgz</span><span class="token comment"># yum -y install  lrzsz</span>å®‰è£…compose<span class="token comment"># curl -L https://github.com/docker/compose/releases/download/1.22.0/docker-compose-`uname -s`-`uname -m` -o /usr/local/bin/docker-compose</span><span class="token comment"># chmod +x /usr/local/bin/docker-compose</span><span class="token comment"># tar xf harbor-offline-installer-v1.8.0.tgz</span>é…ç½®harbor<span class="token comment"># cd harbor</span><span class="token comment"># vim harbor.yml // ä¸»æœºåè¦å¯ä»¥è§£æ(éœ€è¦éƒ¨ç½²dnsæœåŠ¡å™¨ï¼Œç”¨/etc/hostsæ–‡ä»¶æ²¡æœ‰ç”¨)ï¼Œå¦‚æœä¸å¯ä»¥è§£æï¼Œå¯ä»¥ä½¿ç”¨IPåœ°å€,éœ€è¦ä¿®æ”¹çš„å†…å®¹å¦‚ä¸‹</span><span class="token function">hostname</span> <span class="token operator">=</span> <span class="token number">192.168</span>.1.200ui_url_protocol <span class="token operator">=</span> httpsï¼ˆå¦‚æœè¦ç”¨httpsè¿™é‡Œå°±éœ€è¦æ”¹ï¼Œç°åœ¨æˆ‘ä»¬å…ˆä¸ç”¨httpsï¼Œè¿™é‡Œä¸éœ€è¦æ”¹ï¼‰<span class="token comment"># ./install.sh</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>æµè§ˆå™¨è®¿é—®æµ‹è¯•ï¼š<a href="http://192.168.1.200/">http://192.168.1.200</a></p><p><img src="/image-20200509173109582.png" alt="image-20200509173109582"></p><p><img src="/image-20200509172959892.png" alt="image-20200509172959892"></p><p>åˆ›å»ºä»“åº“</p><p><img src="/image-20200509173218474.png" alt="image-20200509173218474"></p><p><img src="/image-20200509173227261.png" alt="image-20200509173227261"></p><p>åˆ›å»ºè´¦æˆ·</p><p><img src="/image-20200509173242826.png" alt="image-20200509173242826"></p><p><img src="/image-20200509173250977.png" alt="image-20200509173250977"></p><p>é¡¹ç›®æˆæƒ</p><p><img src="/image-20200509173311987.png" alt="image-20200509173311987"></p><p><img src="/image-20200509173319302.png" alt="image-20200509173319302"></p><h3 id="2ã€æµ‹è¯•Harbor"><a href="#2ã€æµ‹è¯•Harbor" class="headerlink" title="2ã€æµ‹è¯•Harbor"></a>2ã€æµ‹è¯•Harbor</h3><p><strong>ä¸Šä¼ æµ‹è¯•</strong></p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token punctuation">[</span>root@qfedu.com ~<span class="token punctuation">]</span><span class="token comment"># vim /etc/docker/daemon.json</span> <span class="token punctuation">&#123;</span> <span class="token string">"insecure-registries"</span>:<span class="token punctuation">[</span><span class="token string">"172.21.39.43:80"</span><span class="token punctuation">]</span> <span class="token punctuation">&#125;</span> <span class="token punctuation">[</span>root@jenkins ~<span class="token punctuation">]</span><span class="token comment"># docker login 172.21.39.43:80</span>    Username: wing    Password:    WARNING<span class="token operator">!</span> Your password will be stored unencrypted <span class="token keyword">in</span> /root/.docker/config.json.    Configure a credential helper to remove this warning. See    https://docs.docker.com/engine/reference/commandline/login/<span class="token comment">#credentials-store</span>        Login Succeeded    <span class="token comment"># docker images</span>    REPOSITORY          TAG                 IMAGE ID            CREATED             SIZE    nginx               latest              be1f31be9a87        <span class="token number">13</span> days ago         109MB        <span class="token comment"># docker image tag nginx 172.21.39.43:80/jenkins/nginx:v0</span>    <span class="token comment"># docker push 172.21.39.43:80/jenkins/nginx:v0</span>    The push refers to repository <span class="token punctuation">[</span>harbor.io/library/nginx<span class="token punctuation">]</span>    92b86b4e7957: Pushed    94ad191a291b: Pushed    8b15606a9e3e: Pushed    latest: digest: sha256:204a9a8e65061b10b92ad361dd6f406248404fe60efd5d6a8f2595f18bb37aad size: <span class="token number">948</span>åœ¨webç•Œé¢ä¸­æŸ¥çœ‹é•œåƒæ˜¯å¦è¢«ä¸Šä¼ åˆ°ä»“åº“ä¸­<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h3 id="å¦‚ä½•é‡å¯harbor"><a href="#å¦‚ä½•é‡å¯harbor" class="headerlink" title="å¦‚ä½•é‡å¯harbor"></a>å¦‚ä½•é‡å¯harbor</h3><pre class="line-numbers language-none"><code class="language-none"># docker-compose down# vim harbor.yml# .&#x2F;prepare# docker-compose up -d<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre><h3 id="ã€æ‰©å±•ã€‘é‡ç½®Harborç™»é™†å¯†ç "><a href="#ã€æ‰©å±•ã€‘é‡ç½®Harborç™»é™†å¯†ç " class="headerlink" title="ã€æ‰©å±•ã€‘é‡ç½®Harborç™»é™†å¯†ç "></a>ã€æ‰©å±•ã€‘é‡ç½®Harborç™»é™†å¯†ç </h3><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">harborç°ä½¿ç”¨postgresql æ•°æ®åº“ã€‚ä¸å†æ”¯æŒmysqlæ³¨ï¼š    å¸è½½é‡æ–°é‡æ–°å®‰è£…ä¹Ÿä¸å¯ä»¥ï¼ŒåŸå› æ˜¯æ²¡æœ‰åˆ é™¤harborçš„æ•°æ®ï¼Œharboræ•°æ®åœ¨/data/ç›®å½•ä¸‹è¾¹ï¼Œå¦‚æœçœŸè¦é‡æ–°å®‰è£…éœ€è¦å°†è¿™ä¸ªä¹Ÿåˆ é™¤ï¼Œå¤‡ä»½æˆ–è€…è¿ç§»ï¼Œè¯·ä½¿ç”¨è¿™ä¸ªç›®å½•çš„æ•°æ®ã€‚harborç‰ˆæœ¬ä¸ºï¼š1.8.0å®˜æ–¹çš„å®‰è£…åŒ…ä¸ºï¼š harbor-offline-installer-v1.8.0.tgzå…·ä½“æ­¥éª¤ï¼š<span class="token number">1</span>ã€è¿›å…¥<span class="token punctuation">[</span>harbor-db<span class="token punctuation">]</span>å®¹å™¨å†…éƒ¨     <span class="token comment"># docker exec -it harbor-db /bin/bash</span><span class="token number">2</span>ã€è¿›å…¥postgresqlå‘½ä»¤è¡Œï¼Œ     psql <span class="token parameter variable">-h</span> postgresql <span class="token parameter variable">-d</span> postgres <span class="token parameter variable">-U</span> postgres  <span class="token comment">#è¿™è¦è¾“å…¥é»˜è®¤å¯†ç ï¼šroot123 ã€‚</span>     psql <span class="token parameter variable">-U</span> postgres <span class="token parameter variable">-d</span> postgres <span class="token parameter variable">-h</span> <span class="token number">127.0</span>.0.1 <span class="token parameter variable">-p</span> <span class="token number">5432</span>  <span class="token comment">#æˆ–è€…ç”¨è¿™ä¸ªå¯ä»¥ä¸è¾“å…¥å¯†ç ã€‚</span><span class="token number">3</span>ã€åˆ‡æ¢åˆ°harboræ‰€åœ¨çš„æ•°æ®åº“     <span class="token comment"># \c registry</span><span class="token number">4</span>ã€æŸ¥çœ‹harbor_userè¡¨     <span class="token comment"># select * from harbor_user;</span><span class="token number">5</span>ã€ä¾‹å¦‚ä¿®æ”¹adminçš„å¯†ç ï¼Œä¿®æ”¹ä¸ºåˆå§‹åŒ–å¯†ç Harbor12345 ï¼Œä¿®æ”¹å¥½äº†ä¹‹åå†å¯ä»¥ä»web uiä¸Šå†æ”¹ä¸€æ¬¡ã€‚     <span class="token comment"># update harbor_user set password='a71a7d0df981a61cbb53a97ed8d78f3e', salt='ah3fdh5b7yxepalg9z45bu8zb36sszmr'  where username='admin';</span><span class="token number">6</span>ã€é€€å‡º <span class="token punctuation">\</span>q é€€å‡ºpostgresqlï¼Œexité€€å‡ºå®¹å™¨ã€‚     <span class="token comment"># \q </span>     <span class="token comment"># exit </span>å®Œæˆåé€šè¿‡WEB UIï¼Œå°±å¯ä»¥ä½¿ç”¨admin ã€Harbor12345 è¿™ä¸ªå¯†ç ç™»å½•äº†ï¼Œè®°å¾—ä¿®æ”¹è¿™ä¸ªé»˜è®¤å¯†ç å“¦ï¼Œé¿å…å®‰å…¨é—®é¢˜ã€‚æœ‰æ›´åŠ ç‹ ç‚¹çš„æ‹›æ•°ï¼Œå°†adminè´¦æˆ·æ”¹æˆåˆ«çš„åå­—ï¼Œå‡å°‘è¢«æ”»å‡»é¢ï¼š     <span class="token comment"># update harbor_user set username='wing' where user_id=1;              #æ›´æ”¹adminç”¨æˆ·åä¸ºwing</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h3 id="3ã€Dockerfileæ–‡ä»¶"><a href="#3ã€Dockerfileæ–‡ä»¶" class="headerlink" title="3ã€Dockerfileæ–‡ä»¶"></a>3ã€Dockerfileæ–‡ä»¶</h3><pre class="line-numbers language-yaml" data-language="yaml"><code class="language-yaml"><span class="token comment"># cd /root/jenkins/docker-file/maven-docker-test_war</span><span class="token comment"># vim Dockerfile</span><span class="token comment"># Version 1.0</span><span class="token comment"># Base images. </span>FROM tomcat<span class="token punctuation">:</span>8.0.36<span class="token punctuation">-</span>alpine<span class="token comment"># Author.</span>MAINTAINER wing &lt;276267003@qq.com<span class="token punctuation">></span><span class="token comment"># Add war.</span>ADD maven<span class="token punctuation">-</span>docker<span class="token punctuation">-</span>test.war /usr/local/tomcat/webapps/<span class="token comment"># Define working directory.</span>WORKDIR /usr/local/tomcat/bin/<span class="token comment"># Define environment variables.</span>ENV PATH /usr/local/tomcat/bin<span class="token punctuation">:</span>$PATH<span class="token comment"># Define default command. </span>CMD <span class="token punctuation">[</span><span class="token string">"catalina.sh"</span><span class="token punctuation">,</span> <span class="token string">"run"</span><span class="token punctuation">]</span><span class="token comment"># Expose ports.</span>EXPOSE 8080<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h3 id="4ã€Harboræƒé™ç›¸å…³"><a href="#4ã€Harboræƒé™ç›¸å…³" class="headerlink" title="4ã€Harboræƒé™ç›¸å…³"></a>4ã€Harboræƒé™ç›¸å…³</h3><p>harborä»“åº“çš„æƒé™å¾—é…ç½®ä¸€ä¸‹ï¼Œä¸ç„¶curlå‘½ä»¤è®¿é—®ä¸åˆ°</p><p><img src="/image-20200509174138114.png" alt="image-20200509174138114"></p><h2 id="å››ã€ä¸šåŠ¡æœåŠ¡å™¨"><a href="#å››ã€ä¸šåŠ¡æœåŠ¡å™¨" class="headerlink" title="å››ã€ä¸šåŠ¡æœåŠ¡å™¨"></a>å››ã€ä¸šåŠ¡æœåŠ¡å™¨</h2><h3 id="1ã€å®‰è£…è½¯ä»¶"><a href="#1ã€å®‰è£…è½¯ä»¶" class="headerlink" title="1ã€å®‰è£…è½¯ä»¶"></a>1ã€å®‰è£…è½¯ä»¶</h3><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token comment"># yum install docker jq -y   //åé¢çš„è„šæœ¬ä¼šç”¨åˆ°,jqç±»ä¼¼äºsed/awkä¸“é—¨å¤„ç†jsonæ ¼å¼çš„æ–‡ä»¶</span><span class="token comment"># systemctl start docker</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre><h3 id="2ã€é¢„å…ˆé…ç½®"><a href="#2ã€é¢„å…ˆé…ç½®" class="headerlink" title="2ã€é¢„å…ˆé…ç½®"></a>2ã€é¢„å…ˆé…ç½®</h3><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">åœ¨ä¸šåŠ¡æœºå™¨ä¸Šé…ç½®ï¼š<span class="token comment"># visudo</span><span class="token comment">#</span><span class="token comment">#Defaults    requiretty</span>Defaults:root <span class="token operator">!</span>requirettyå¦åˆ™åœ¨æœºå™¨ä¸šåŠ¡æœºå™¨ä¸Šæ‰§è¡Œè„šæœ¬æ—¶ä¼šæŠ¥é”™ï¼š<span class="token punctuation">[</span>SSH<span class="token punctuation">]</span> executing<span class="token punctuation">..</span>.sudo: sorry, you must have a <span class="token function">tty</span> to run <span class="token function">sudo</span>docker: invalid reference format.<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h2 id="äº”ã€JenkinsæœåŠ¡éƒ¨ç½²é…ç½®"><a href="#äº”ã€JenkinsæœåŠ¡éƒ¨ç½²é…ç½®" class="headerlink" title="äº”ã€JenkinsæœåŠ¡éƒ¨ç½²é…ç½®"></a>äº”ã€JenkinsæœåŠ¡éƒ¨ç½²é…ç½®</h2><h3 id="1ã€è½¯ä»¶å®‰è£…"><a href="#1ã€è½¯ä»¶å®‰è£…" class="headerlink" title="1ã€è½¯ä»¶å®‰è£…"></a>1ã€è½¯ä»¶å®‰è£…</h3><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token punctuation">[</span>root@jenkins ~<span class="token punctuation">]</span><span class="token comment"># wget -O /etc/yum.repos.d/jenkins.repo https://pkg.jenkins.io/redhat-stable/jenkins.repo</span><span class="token punctuation">[</span>root@jenkins ~<span class="token punctuation">]</span><span class="token comment"># rpm --import https://pkg.jenkins.io/redhat-stable/jenkins.io.key</span><span class="token punctuation">[</span>root@jenkins ~<span class="token punctuation">]</span><span class="token comment"># yum install -y jenkins git maven</span><span class="token punctuation">[</span>root@jenkins ~<span class="token punctuation">]</span><span class="token comment"># systemctl start jenkins</span><span class="token punctuation">[</span>root@jenkins ~<span class="token punctuation">]</span><span class="token comment"># ps -ef|grep jenkins</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre><h3 id="2ã€é¢„å…ˆé…ç½®-1"><a href="#2ã€é¢„å…ˆé…ç½®-1" class="headerlink" title="2ã€é¢„å…ˆé…ç½®"></a>2ã€é¢„å…ˆé…ç½®</h3><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">ç”±äºåœ¨Jenkinsæœºå™¨ä¸Šdockeræ˜¯ä½¿ç”¨rootç”¨æˆ·è¿è¡Œçš„ï¼Œè€ŒJenkinsæ˜¯ä½¿ç”¨æ™®é€šç”¨æˆ·jenkinsè¿è¡Œçš„ï¼Œæ‰€ä»¥è¦å…ˆé…ç½®ä¸‹jenkinsç”¨æˆ·å¯ä»¥ä½¿ç”¨dockerå‘½ä»¤ã€‚<span class="token punctuation">[</span>root@jenkins ~<span class="token punctuation">]</span><span class="token comment"># visudo</span>jenkins <span class="token assign-left variable">ALL</span><span class="token operator">=</span><span class="token punctuation">(</span>root<span class="token punctuation">)</span>      NOPASSWD: /usr/bin/dockerå¦å¤–åœ¨Jenkinsæœºå™¨ä¸Šé…ç½®ï¼š<span class="token comment"># Disable "ssh hostname sudo &lt;cmd>", because it will show the password in clear.</span><span class="token comment">#         You have to run "ssh -t hostname sudo &lt;cmd>".</span><span class="token comment">#</span><span class="token comment">#Defaults    requiretty</span>Defaults:jenkins <span class="token operator">!</span>requirettyå¦‚æœä¸é…ç½®è¿™ä¸ªï¼Œåœ¨æ‰§è¡Œä¸‹é¢è„šæœ¬æ—¶ï¼Œä¼šæŠ¥é”™è¯¯ï¼š+ <span class="token function">cp</span> <span class="token parameter variable">-f</span> /home/jenkins/.jenkins/workspace/godseyeBranchForNov/godseye-container/target/godseye-container-wisedu.war /home/jenkins/docker-file/godseye_war/godseye.war+ <span class="token function">sudo</span> <span class="token function">docker</span> login <span class="token parameter variable">-u</span> jkzhao <span class="token parameter variable">-p</span> Wisedu123 <span class="token parameter variable">-e</span> 01115004@wisedu.com <span class="token number">172.16</span>.206.32sudo: sorry, you must have a <span class="token function">tty</span> to run <span class="token function">sudo</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h3 id="3ã€å®‰è£…æ’ä»¶"><a href="#3ã€å®‰è£…æ’ä»¶" class="headerlink" title="3ã€å®‰è£…æ’ä»¶"></a>3ã€å®‰è£…æ’ä»¶</h3><p>æµè§ˆå™¨ç™»å½•Jenkinsï¼Œ<a href="http://161.117.34.103:8080ï¼Œè¿›è¡Œåˆå§‹åŒ–é…ç½®">http://161.117.34.103:8080ï¼Œè¿›è¡Œåˆå§‹åŒ–é…ç½®</a></p><p>ç‚¹å‡»â€œç³»ç»Ÿç®¡ç†â€ï¼Œç‚¹å‡»â€œç®¡ç†æ’ä»¶â€ï¼Œæœç´¢æ’ä»¶â€Maven Integrationâ€å’Œâ€SSHâ€ï¼Œè¿›è¡Œå®‰è£…ã€‚</p><h3 id="4ã€é…ç½®è¿œç¨‹æœºå™¨"><a href="#4ã€é…ç½®è¿œç¨‹æœºå™¨" class="headerlink" title="4ã€é…ç½®è¿œç¨‹æœºå™¨"></a>4ã€é…ç½®è¿œç¨‹æœºå™¨</h3><p>ç™»å½•Jenkinsï¼Œç‚¹å‡»â€œCredentialsâ€ï¼Œç‚¹å‡»â€œAdd domainâ€ã€‚</p><p><img src="/image-20200512101026784.png" alt="image-20200512101026784"></p><p><img src="/image-20200512101109339.png" alt="image-20200512101109339"></p><p><img src="/image-20200512101120858.png" alt="image-20200512101120858"></p><p><img src="/image-20200512101145738.png" alt="image-20200512101145738"></p><p>ç‚¹å‡»â€œç³»ç»Ÿç®¡ç†â€ï¼Œâ€œç³»ç»Ÿé…ç½®â€ï¼Œæ‰¾åˆ°â€œSSH remote hostsâ€ã€‚</p><p><img src="/image-20200512101210294.png" alt="image-20200512101210294"></p><h2 id="å…­ã€Jenkinsæ„å»ºJob"><a href="#å…­ã€Jenkinsæ„å»ºJob" class="headerlink" title="å…­ã€Jenkinsæ„å»ºJob"></a>å…­ã€Jenkinsæ„å»ºJob</h2><h3 id="1ã€æ„å»ºMavené£æ ¼çš„Job"><a href="#1ã€æ„å»ºMavené£æ ¼çš„Job" class="headerlink" title="1ã€æ„å»ºMavené£æ ¼çš„Job"></a>1ã€æ„å»ºMavené£æ ¼çš„Job</h3><p>ä»£ç åœ°å€ï¼š <a href="https://github.com/yanqiang20172017/easy-springmvc-maven.git">https://github.com/yanqiang20172017/easy-springmvc-maven.git</a></p><p><img src="/image-20200512101348331.png" alt="image-20200512101348331"></p><p>Goals and optionså¡«å†™ï¼šclean package -Dmaven.test.skip&#x3D;true</p><p><img src="/image-20200512101411044.png" alt="image-20200512101411044"></p><h3 id="2ã€é…ç½®Post-Steps"><a href="#2ã€é…ç½®Post-Steps" class="headerlink" title="2ã€é…ç½®Post Steps"></a>2ã€é…ç½®Post Steps</h3><p>æ³¨ï¼šè„šæœ¬ä¸­ç”¨åˆ°çš„ä»“åº“å’Œè®¤è¯çš„è´¦å·éœ€è¦å…ˆåœ¨harboræ–°å»ºå¥½ã€‚</p><p><img src="/image-20200512101638389.png" alt="image-20200512101638389"></p><p><strong>æœ¬æ¬¡å®éªŒyumå®‰è£…æ–¹å¼ä¿®æ”¹å·¥ä½œç›®å½•åçš„è„šæœ¬ï¼š</strong></p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token comment"># Jenkinsæœºå™¨ï¼šç¼–è¯‘å®Œæˆåï¼Œbuildç”Ÿæˆä¸€ä¸ªæ–°ç‰ˆæœ¬çš„é•œåƒï¼Œpushåˆ°è¿œç¨‹dockerä»“åº“</span> <span class="token comment"># Variables</span><span class="token assign-left variable">JENKINS_WAR_HOME</span><span class="token operator">=</span><span class="token string">'/var/lib/jenkins/workspace/maven-docker/target'</span><span class="token assign-left variable">DOCKERFILE_HOME</span><span class="token operator">=</span><span class="token string">'/var/lib/jenkins/docker-file/maven-docker-test_war'</span><span class="token assign-left variable">HARBOR_IP</span><span class="token operator">=</span><span class="token string">'172.21.39.43'</span><span class="token assign-left variable">REPOSITORIES</span><span class="token operator">=</span><span class="token string">'jenkins/maven-docker'</span><span class="token assign-left variable">HARBOR_USER</span><span class="token operator">=</span><span class="token string">'wing'</span><span class="token assign-left variable">HARBOR_USER_PASSWD</span><span class="token operator">=</span><span class="token string">'Harbor12345'</span><span class="token assign-left variable">HARBOR_USER_EMAIL</span><span class="token operator">=</span><span class="token string">'276267003@qq.com'</span> <span class="token comment"># Copy the newest war to docker-file directory.</span><span class="token punctuation">\</span>cp <span class="token parameter variable">-f</span> <span class="token variable">$&#123;JENKINS_WAR_HOME&#125;</span>/easy-springmvc-maven.war <span class="token variable">$&#123;DOCKERFILE_HOME&#125;</span>/maven-docker.war <span class="token comment"># Delete image early version.</span><span class="token function">sudo</span> <span class="token function">docker</span> login <span class="token parameter variable">-u</span> <span class="token variable">$&#123;HARBOR_USER&#125;</span> <span class="token parameter variable">-p</span> <span class="token variable">$&#123;HARBOR_USER_PASSWD&#125;</span> <span class="token variable">$&#123;HARBOR_IP&#125;</span>:80 <span class="token assign-left variable">IMAGE_ID</span><span class="token operator">=</span><span class="token variable"><span class="token variable">`</span><span class="token function">sudo</span> <span class="token function">docker</span> images <span class="token operator">|</span> <span class="token function">grep</span> $<span class="token punctuation">&#123;</span>REPOSITORIES<span class="token punctuation">&#125;</span> <span class="token operator">|</span> <span class="token function">awk</span> <span class="token string">'&#123;print $3&#125;'</span><span class="token variable">`</span></span><span class="token keyword">if</span> <span class="token punctuation">[</span> <span class="token parameter variable">-n</span> <span class="token string">"<span class="token variable">$&#123;IMAGE_ID&#125;</span>"</span> <span class="token punctuation">]</span><span class="token punctuation">;</span><span class="token keyword">then</span>    <span class="token function">sudo</span> <span class="token function">docker</span> rmi <span class="token variable">$&#123;IMAGE_ID&#125;</span><span class="token keyword">fi</span> <span class="token comment"># Build image.</span><span class="token builtin class-name">cd</span> <span class="token variable">$&#123;DOCKERFILE_HOME&#125;</span><span class="token assign-left variable">TAG</span><span class="token operator">=</span><span class="token variable"><span class="token variable">`</span><span class="token function">date</span> +%Y%m%d-%H%M%S<span class="token variable">`</span></span><span class="token function">sudo</span> <span class="token function">docker</span> build <span class="token parameter variable">-t</span> <span class="token variable">$&#123;HARBOR_IP&#125;</span>:80/<span class="token variable">$&#123;REPOSITORIES&#125;</span><span class="token builtin class-name">:</span><span class="token variable">$&#123;TAG&#125;</span> <span class="token builtin class-name">.</span> <span class="token operator">&amp;></span>/dev/null <span class="token comment"># Push to the harbor registry.</span><span class="token function">sudo</span> <span class="token function">docker</span> push <span class="token variable">$&#123;HARBOR_IP&#125;</span>:80/<span class="token variable">$&#123;REPOSITORIES&#125;</span><span class="token builtin class-name">:</span><span class="token variable">$&#123;TAG&#125;</span> <span class="token operator">&amp;></span>/dev/null<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p><strong>ä¹‹å‰waråŒ…æ–¹å¼éƒ¨ç½²çš„jenkinsé‡Œé¢çš„è„šæœ¬ï¼š</strong></p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token comment"># Jenkinsæœºå™¨ï¼šç¼–è¯‘å®Œæˆåï¼Œbuildç”Ÿæˆä¸€ä¸ªæ–°ç‰ˆæœ¬çš„é•œåƒï¼Œpushåˆ°è¿œç¨‹dockerä»“åº“</span> <span class="token comment"># Variables</span><span class="token assign-left variable">JENKINS_WAR_HOME</span><span class="token operator">=</span><span class="token string">'/root/.jenkins/workspace/maven-docker-test/target'</span><span class="token assign-left variable">DOCKERFILE_HOME</span><span class="token operator">=</span><span class="token string">'/root/jenkins/docker-file/maven-docker-test_war'</span><span class="token assign-left variable">HARBOR_IP</span><span class="token operator">=</span><span class="token string">'172.22.211.175'</span><span class="token assign-left variable">REPOSITORIES</span><span class="token operator">=</span><span class="token string">'jenkins/maven-docker-test'</span><span class="token assign-left variable">HARBOR_USER</span><span class="token operator">=</span><span class="token string">'wing'</span><span class="token assign-left variable">HARBOR_USER_PASSWD</span><span class="token operator">=</span><span class="token string">'Harbor12345'</span><span class="token assign-left variable">HARBOR_USER_EMAIL</span><span class="token operator">=</span><span class="token string">'276267003@qq.com'</span> <span class="token comment"># Copy the newest war to docker-file directory.</span><span class="token punctuation">\</span>cp <span class="token parameter variable">-f</span> <span class="token variable">$&#123;JENKINS_WAR_HOME&#125;</span>/easy-springmvc-maven.war <span class="token variable">$&#123;DOCKERFILE_HOME&#125;</span>/maven-docker-test.war <span class="token comment"># Delete image early version.</span><span class="token function">sudo</span> <span class="token function">docker</span> login <span class="token parameter variable">-u</span> <span class="token variable">$&#123;HARBOR_USER&#125;</span> <span class="token parameter variable">-p</span> <span class="token variable">$&#123;HARBOR_USER_PASSWD&#125;</span> <span class="token variable">$&#123;HARBOR_IP&#125;</span> <span class="token assign-left variable">IMAGE_ID</span><span class="token operator">=</span><span class="token variable"><span class="token variable">`</span><span class="token function">sudo</span> <span class="token function">docker</span> images <span class="token operator">|</span> <span class="token function">grep</span> $<span class="token punctuation">&#123;</span>REPOSITORIES<span class="token punctuation">&#125;</span> <span class="token operator">|</span> <span class="token function">awk</span> <span class="token string">'&#123;print $3&#125;'</span><span class="token variable">`</span></span><span class="token keyword">if</span> <span class="token punctuation">[</span> <span class="token parameter variable">-n</span> <span class="token string">"<span class="token variable">$&#123;IMAGE_ID&#125;</span>"</span> <span class="token punctuation">]</span><span class="token punctuation">;</span><span class="token keyword">then</span>    <span class="token function">sudo</span> <span class="token function">docker</span> rmi <span class="token variable">$&#123;IMAGE_ID&#125;</span><span class="token keyword">fi</span> <span class="token comment"># Build image.</span><span class="token builtin class-name">cd</span> <span class="token variable">$&#123;DOCKERFILE_HOME&#125;</span><span class="token assign-left variable">TAG</span><span class="token operator">=</span><span class="token variable"><span class="token variable">`</span><span class="token function">date</span> +%Y%m%d-%H%M%S<span class="token variable">`</span></span><span class="token function">sudo</span> <span class="token function">docker</span> build <span class="token parameter variable">-t</span> <span class="token variable">$&#123;HARBOR_IP&#125;</span>/<span class="token variable">$&#123;REPOSITORIES&#125;</span><span class="token builtin class-name">:</span><span class="token variable">$&#123;TAG&#125;</span> <span class="token builtin class-name">.</span> <span class="token operator">&amp;></span>/dev/null <span class="token comment"># Push to the harbor registry.</span><span class="token function">sudo</span> <span class="token function">docker</span> push <span class="token variable">$&#123;HARBOR_IP&#125;</span>/<span class="token variable">$&#123;REPOSITORIES&#125;</span><span class="token builtin class-name">:</span><span class="token variable">$&#123;TAG&#125;</span> <span class="token operator">&amp;></span>/dev/null<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>æ³¨ï¼šwaråŒ…çš„åå­—ä¸ºgité¡¹ç›®çš„åå­—<br>&#x2F;root&#x2F;.jenkins&#x2F;workspace&#x2F;maven-docker-test&#x2F;target&#x2F;easy-springmvc-maven.war</p><p><strong>æ‹‰å–é•œåƒã€å‘å¸ƒ</strong></p><p><img src="/image-20200512101901486.png" alt="image-20200512101901486"></p><p><img src="/image-20200512101918476.png" alt="image-20200512101918476"></p><p>Harbor2.0çš„APIå‘ç”Ÿäº†å˜åŒ–ï¼Œæ­¤å¤„æ˜¯æ–°ç‰ˆè„šæœ¬æ–¹å¼ï¼Œä¿®æ”¹äº†é•œåƒtagè·å–çš„æ–¹å¼</p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token comment"># æ‹‰å–é•œåƒï¼Œå‘å¸ƒ</span><span class="token assign-left variable">HARBOR_IP</span><span class="token operator">=</span><span class="token string">'172.21.39.43'</span><span class="token assign-left variable">REPOSITORIES</span><span class="token operator">=</span><span class="token string">'jenkins/maven-docker'</span><span class="token assign-left variable">HARBOR_USER</span><span class="token operator">=</span><span class="token string">'wing'</span><span class="token assign-left variable">HARBOR_USER_PASSWD</span><span class="token operator">=</span><span class="token string">'Harbor12345'</span> <span class="token comment"># ç™»å½•harbor</span><span class="token function">docker</span> login <span class="token parameter variable">-u</span> <span class="token variable">$&#123;HARBOR_USER&#125;</span> <span class="token parameter variable">-p</span> <span class="token variable">$&#123;HARBOR_USER_PASSWD&#125;</span> <span class="token variable">$&#123;HARBOR_IP&#125;</span>:80 <span class="token comment"># Stop container, and delete the container.</span><span class="token assign-left variable">CONTAINER_ID</span><span class="token operator">=</span><span class="token variable"><span class="token variable">`</span><span class="token function">docker</span> <span class="token function">ps</span> <span class="token operator">|</span> <span class="token function">grep</span> <span class="token string">"maven-docker"</span> <span class="token operator">|</span> <span class="token function">awk</span> <span class="token string">'&#123;print $1&#125;'</span><span class="token variable">`</span></span><span class="token keyword">if</span> <span class="token punctuation">[</span> <span class="token parameter variable">-n</span> <span class="token string">"<span class="token variable">$CONTAINER_ID</span>"</span> <span class="token punctuation">]</span><span class="token punctuation">;</span> <span class="token keyword">then</span>    <span class="token function">docker</span> stop <span class="token variable">$CONTAINER_ID</span>    <span class="token function">docker</span> <span class="token function">rm</span> <span class="token variable">$CONTAINER_ID</span><span class="token keyword">else</span> <span class="token comment">#å¦‚æœå®¹å™¨å¯åŠ¨æ—¶å¤±è´¥äº†ï¼Œå°±éœ€è¦docker ps -aæ‰èƒ½æ‰¾åˆ°é‚£ä¸ªå®¹å™¨</span>    <span class="token assign-left variable">CONTAINER_ID</span><span class="token operator">=</span><span class="token variable"><span class="token variable">`</span><span class="token function">docker</span> <span class="token function">ps</span> <span class="token parameter variable">-a</span> <span class="token operator">|</span> <span class="token function">grep</span> <span class="token string">"maven-docker"</span> <span class="token operator">|</span> <span class="token function">awk</span> <span class="token string">'&#123;print $1&#125;'</span><span class="token variable">`</span></span>    <span class="token keyword">if</span> <span class="token punctuation">[</span> <span class="token parameter variable">-n</span> <span class="token string">"<span class="token variable">$CONTAINER_ID</span>"</span> <span class="token punctuation">]</span><span class="token punctuation">;</span> <span class="token keyword">then</span>  <span class="token comment"># å¦‚æœæ˜¯ç¬¬ä¸€æ¬¡åœ¨è¿™å°æœºå™¨ä¸Šæ‹‰å–è¿è¡Œå®¹å™¨ï¼Œé‚£ä¹ˆdocker ps -aä¹Ÿæ˜¯æ‰¾ä¸åˆ°è¿™ä¸ªå®¹å™¨çš„</span>        <span class="token function">docker</span> <span class="token function">rm</span> <span class="token variable">$CONTAINER_ID</span>    <span class="token keyword">fi</span><span class="token keyword">fi</span> <span class="token comment"># Delet eeasy-springmvc-maven image early version.</span><span class="token assign-left variable">IMAGE_ID</span><span class="token operator">=</span><span class="token variable"><span class="token variable">`</span><span class="token function">sudo</span> <span class="token function">docker</span> images <span class="token operator">|</span> <span class="token function">grep</span> $<span class="token punctuation">&#123;</span>REPOSITORIES<span class="token punctuation">&#125;</span> <span class="token operator">|</span> <span class="token function">awk</span> <span class="token string">'&#123;print $3&#125;'</span><span class="token variable">`</span></span><span class="token keyword">if</span> <span class="token punctuation">[</span> <span class="token parameter variable">-n</span> <span class="token string">"<span class="token variable">$&#123;IMAGE_ID&#125;</span>"</span> <span class="token punctuation">]</span><span class="token punctuation">;</span><span class="token keyword">then</span>    <span class="token function">docker</span> rmi <span class="token variable">$&#123;IMAGE_ID&#125;</span><span class="token keyword">fi</span> <span class="token comment"># Pull image.</span><span class="token comment"># TAG=`curl -s http://$&#123;HARBOR_IP&#125;/api/repositories/$&#123;REPOSITORIES&#125;/tags | jq '.[-1]' | sed 's/\"//g'` </span><span class="token comment"># TAG=`curl -s http://172.21.39.43/api/repositories/jenkins/maven-docker/tags | jq '.[-1]| &#123;name:.name&#125;' | awk -F '"' '/name/&#123;print $4&#125;'`</span><span class="token assign-left variable">TAG</span><span class="token operator">=</span><span class="token variable"><span class="token variable">`</span><span class="token function">curl</span> <span class="token parameter variable">-s</span> http://161.117.37.192/api/v2.0/projects/jenkins/repositories/maven-docker/artifacts <span class="token operator">|</span><span class="token function">awk</span> -F<span class="token string">'name":"'</span> <span class="token string">'&#123;print $2&#125;'</span><span class="token operator">|</span><span class="token function">cut</span> <span class="token parameter variable">-d</span> <span class="token string">'"'</span> <span class="token parameter variable">-f1</span><span class="token variable">`</span></span><span class="token function">docker</span> pull <span class="token variable">$&#123;HARBOR_IP&#125;</span>:80/<span class="token variable">$&#123;REPOSITORIES&#125;</span><span class="token builtin class-name">:</span><span class="token variable">$&#123;TAG&#125;</span> <span class="token operator">&amp;></span>/dev/null <span class="token comment"># Run.</span><span class="token function">docker</span> run <span class="token parameter variable">-d</span> <span class="token parameter variable">--name</span> maven-docker <span class="token parameter variable">-p</span> <span class="token number">8080</span>:8080 <span class="token variable">$&#123;HARBOR_IP&#125;</span>:80/<span class="token variable">$&#123;REPOSITORIES&#125;</span><span class="token builtin class-name">:</span><span class="token variable">$&#123;TAG&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>è¿™æ˜¯æ—§ç‰ˆæœ¬çš„è„šæœ¬</p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token comment"># æ‹‰å–é•œåƒï¼Œå‘å¸ƒ</span><span class="token assign-left variable">HARBOR_IP</span><span class="token operator">=</span><span class="token string">'172.22.211.175'</span><span class="token assign-left variable">REPOSITORIES</span><span class="token operator">=</span><span class="token string">'jenkins/maven-docker-test'</span><span class="token assign-left variable">HARBOR_USER</span><span class="token operator">=</span><span class="token string">'wing'</span><span class="token assign-left variable">HARBOR_USER_PASSWD</span><span class="token operator">=</span><span class="token string">'Harbor12345'</span> <span class="token comment"># ç™»å½•harbor</span><span class="token function">docker</span> login <span class="token parameter variable">-u</span> <span class="token variable">$&#123;HARBOR_USER&#125;</span> <span class="token parameter variable">-p</span> <span class="token variable">$&#123;HARBOR_USER_PASSWD&#125;</span> <span class="token variable">$&#123;HARBOR_IP&#125;</span> <span class="token comment"># Stop container, and delete the container.</span><span class="token assign-left variable">CONTAINER_ID</span><span class="token operator">=</span><span class="token variable"><span class="token variable">`</span><span class="token function">docker</span> <span class="token function">ps</span> <span class="token operator">|</span> <span class="token function">grep</span> <span class="token string">"maven-docker-test"</span> <span class="token operator">|</span> <span class="token function">awk</span> <span class="token string">'&#123;print $1&#125;'</span><span class="token variable">`</span></span><span class="token keyword">if</span> <span class="token punctuation">[</span> <span class="token parameter variable">-n</span> <span class="token string">"<span class="token variable">$CONTAINER_ID</span>"</span> <span class="token punctuation">]</span><span class="token punctuation">;</span> <span class="token keyword">then</span>    <span class="token function">docker</span> stop <span class="token variable">$CONTAINER_ID</span>    <span class="token function">docker</span> <span class="token function">rm</span> <span class="token variable">$CONTAINER_ID</span><span class="token keyword">else</span> <span class="token comment">#å¦‚æœå®¹å™¨å¯åŠ¨æ—¶å¤±è´¥äº†ï¼Œå°±éœ€è¦docker ps -aæ‰èƒ½æ‰¾åˆ°é‚£ä¸ªå®¹å™¨</span>    <span class="token assign-left variable">CONTAINER_ID</span><span class="token operator">=</span><span class="token variable"><span class="token variable">`</span><span class="token function">docker</span> <span class="token function">ps</span> <span class="token parameter variable">-a</span> <span class="token operator">|</span> <span class="token function">grep</span> <span class="token string">"maven-docker-test"</span> <span class="token operator">|</span> <span class="token function">awk</span> <span class="token string">'&#123;print $1&#125;'</span><span class="token variable">`</span></span>    <span class="token keyword">if</span> <span class="token punctuation">[</span> <span class="token parameter variable">-n</span> <span class="token string">"<span class="token variable">$CONTAINER_ID</span>"</span> <span class="token punctuation">]</span><span class="token punctuation">;</span> <span class="token keyword">then</span>  <span class="token comment"># å¦‚æœæ˜¯ç¬¬ä¸€æ¬¡åœ¨è¿™å°æœºå™¨ä¸Šæ‹‰å–è¿è¡Œå®¹å™¨ï¼Œé‚£ä¹ˆdocker ps -aä¹Ÿæ˜¯æ‰¾ä¸åˆ°è¿™ä¸ªå®¹å™¨çš„</span>        <span class="token function">docker</span> <span class="token function">rm</span> <span class="token variable">$CONTAINER_ID</span>    <span class="token keyword">fi</span><span class="token keyword">fi</span> <span class="token comment"># Deleteeasy-springmvc-maven image early version.</span><span class="token assign-left variable">IMAGE_ID</span><span class="token operator">=</span><span class="token variable"><span class="token variable">`</span><span class="token function">sudo</span> <span class="token function">docker</span> images <span class="token operator">|</span> <span class="token function">grep</span> $<span class="token punctuation">&#123;</span>REPOSITORIES<span class="token punctuation">&#125;</span> <span class="token operator">|</span> <span class="token function">awk</span> <span class="token string">'&#123;print $3&#125;'</span><span class="token variable">`</span></span><span class="token keyword">if</span> <span class="token punctuation">[</span> <span class="token parameter variable">-n</span> <span class="token string">"<span class="token variable">$&#123;IMAGE_ID&#125;</span>"</span> <span class="token punctuation">]</span><span class="token punctuation">;</span><span class="token keyword">then</span>    <span class="token function">docker</span> rmi <span class="token variable">$&#123;IMAGE_ID&#125;</span><span class="token keyword">fi</span> <span class="token comment"># Pull image.</span><span class="token comment"># TAG=`curl -s http://$&#123;HARBOR_IP&#125;/api/repositories/$&#123;REPOSITORIES&#125;/tags | jq '.[-1]' | sed 's/\"//g'` </span><span class="token assign-left variable">TAG</span><span class="token operator">=</span><span class="token variable"><span class="token variable">`</span><span class="token function">curl</span> <span class="token parameter variable">-s</span> http://172.22.211.175/api/repositories/jenkins/maven-docker-test/tags <span class="token operator">|</span> jq <span class="token string">'.[-1]| &#123;name:.name&#125;'</span> <span class="token operator">|</span> <span class="token function">awk</span> <span class="token parameter variable">-F</span> <span class="token string">'"'</span> <span class="token string">'/name/&#123;print $4&#125;'</span><span class="token variable">`</span></span><span class="token function">docker</span> pull <span class="token variable">$&#123;HARBOR_IP&#125;</span>/<span class="token variable">$&#123;REPOSITORIES&#125;</span><span class="token builtin class-name">:</span><span class="token variable">$&#123;TAG&#125;</span> <span class="token operator">&amp;></span>/dev/null <span class="token comment"># Run.</span><span class="token function">docker</span> run <span class="token parameter variable">-d</span> <span class="token parameter variable">--name</span> maven-docker-test <span class="token parameter variable">-p</span> <span class="token number">8080</span>:8080 <span class="token variable">$&#123;HARBOR_IP&#125;</span>/<span class="token variable">$&#123;REPOSITORIES&#125;</span><span class="token builtin class-name">:</span><span class="token variable">$&#123;TAG&#125;</span>kubectl <span class="token builtin class-name">set</span> image <span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h3 id="3ã€æ„å»º"><a href="#3ã€æ„å»º" class="headerlink" title="3ã€æ„å»º"></a>3ã€æ„å»º</h3><p><img src="/image-20200512102013778.png" alt="image-20200512102013778"></p><h3 id="4ã€æ§åˆ¶å°è¾“å‡ºè¿‡ç¨‹"><a href="#4ã€æ§åˆ¶å°è¾“å‡ºè¿‡ç¨‹" class="headerlink" title="4ã€æ§åˆ¶å°è¾“å‡ºè¿‡ç¨‹"></a>4ã€æ§åˆ¶å°è¾“å‡ºè¿‡ç¨‹</h3><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">æ‰§è¡Œä¸­æ§åˆ¶å°è¾“å‡ºStarted by user adminBuilding on master <span class="token keyword">in</span> workspace /root/.jenkins/workspace/maven-docker-testNo credentials specified <span class="token operator">></span> <span class="token function">git</span> rev-parse --is-inside-work-tree <span class="token comment"># timeout=10</span>Fetching changes from the remote Git repository <span class="token operator">></span> <span class="token function">git</span> config remote.origin.url https://github.com/yanqiang20172017/easy-springmvc-maven.git <span class="token comment"># timeout=10</span>Fetching upstream changes from https://github.com/yanqiang20172017/easy-springmvc-maven.git <span class="token operator">></span> <span class="token function">git</span> <span class="token parameter variable">--version</span> <span class="token comment"># timeout=10</span> <span class="token operator">></span> <span class="token function">git</span> fetch <span class="token parameter variable">--tags</span> <span class="token parameter variable">--progress</span> https://github.com/yanqiang20172017/easy-springmvc-maven.git +refs/heads/*:refs/remotes/origin/* <span class="token operator">></span> <span class="token function">git</span> rev-parse refs/remotes/origin/master^<span class="token punctuation">&#123;</span>commit<span class="token punctuation">&#125;</span> <span class="token comment"># timeout=10</span> <span class="token operator">></span> <span class="token function">git</span> rev-parse refs/remotes/origin/origin/master^<span class="token punctuation">&#123;</span>commit<span class="token punctuation">&#125;</span> <span class="token comment"># timeout=10</span>Checking out Revision 67604f7f9f30505e3bb3e8935c745154f04aa372 <span class="token punctuation">(</span>refs/remotes/origin/master<span class="token punctuation">)</span> <span class="token operator">></span> <span class="token function">git</span> config core.sparsecheckout <span class="token comment"># timeout=10</span> <span class="token operator">></span> <span class="token function">git</span> checkout <span class="token parameter variable">-f</span> 67604f7f9f30505e3bb3e8935c745154f04aa372Commit message: <span class="token string">"ä¿®æ”¹standard/1.1.2çš„ä¾èµ–"</span> <span class="token operator">></span> <span class="token function">git</span> rev-list --no-walk 67604f7f9f30505e3bb3e8935c745154f04aa372 <span class="token comment"># timeout=10</span>Parsing POMsEstablished TCP socket on <span class="token number">36798</span><span class="token punctuation">[</span>maven-docker-test<span class="token punctuation">]</span> $ <span class="token function">java</span> <span class="token parameter variable">-cp</span> /root/.jenkins/plugins/maven-plugin/WEB-INF/lib/maven3-agent-1.12.jar:/usr/share/maven/boot/plexus-classworlds.jar org.jvnet.hudson.maven3.agent.Maven3Main /usr/share/maven /root/.jenkins/war/WEB-INF/lib/remoting-3.29.jar /root/.jenkins/plugins/maven-plugin/WEB-INF/lib/maven3-interceptor-1.12.jar /root/.jenkins/plugins/maven-plugin/WEB-INF/lib/maven3-interceptor-commons-1.12.jar <span class="token number">36798</span><span class="token operator">&lt;=</span><span class="token operator">==</span><span class="token punctuation">[</span>JENKINS REMOTING CAPACITY<span class="token punctuation">]</span><span class="token operator">==</span><span class="token operator">=</span><span class="token operator">></span>channel startedExecuting Maven:  <span class="token parameter variable">-B</span> <span class="token parameter variable">-f</span> /root/.jenkins/workspace/maven-docker-test/pom.xml clean package <span class="token parameter variable">-Dmaven.test.skip</span><span class="token operator">=</span>true<span class="token punctuation">[</span>INFO<span class="token punctuation">]</span> Scanning <span class="token keyword">for</span> projects<span class="token punctuation">..</span>.<span class="token punctuation">[</span>WARNING<span class="token punctuation">]</span> <span class="token punctuation">[</span>WARNING<span class="token punctuation">]</span> Some problems were encountered <span class="token keyword">while</span> building the effective model <span class="token keyword">for</span> springmvc-maven:easy-springmvc-maven:war:0.0.1-SNAPSHOT<span class="token punctuation">[</span>WARNING<span class="token punctuation">]</span> <span class="token string">'build.plugins.plugin.version'</span> <span class="token keyword">for</span> org.apache.maven.plugins:maven-war-plugin is missing. @ line <span class="token number">22</span>, <span class="token function">column</span> <span class="token number">15</span><span class="token punctuation">[</span>WARNING<span class="token punctuation">]</span> <span class="token punctuation">[</span>WARNING<span class="token punctuation">]</span> It is highly recommended to fix these problems because they threaten the stability of your build.<span class="token punctuation">[</span>WARNING<span class="token punctuation">]</span> <span class="token punctuation">[</span>WARNING<span class="token punctuation">]</span> For this reason, future Maven versions might no longer support building such malformed projects.<span class="token punctuation">[</span>WARNING<span class="token punctuation">]</span> <span class="token punctuation">[</span>INFO<span class="token punctuation">]</span>                                                                         <span class="token punctuation">[</span>INFO<span class="token punctuation">]</span> --------------------------------------------------------------<span class="token punctuation">[</span>INFO<span class="token punctuation">]</span> Building springmvc-maven <span class="token number">0.0</span>.1-SNAPSHOT<span class="token punctuation">[</span>INFO<span class="token punctuation">]</span> --------------------------------------------------------------<span class="token punctuation">[</span>INFO<span class="token punctuation">]</span> <span class="token punctuation">[</span>INFO<span class="token punctuation">]</span> --- maven-clean-plugin:2.4.1:clean <span class="token punctuation">(</span>default-clean<span class="token punctuation">)</span> @ easy-springmvc-maven ---<span class="token punctuation">[</span>INFO<span class="token punctuation">]</span> Deleting /root/.jenkins/workspace/maven-docker-test/target<span class="token punctuation">[</span>INFO<span class="token punctuation">]</span> <span class="token punctuation">[</span>INFO<span class="token punctuation">]</span> --- maven-resources-plugin:2.5:resources <span class="token punctuation">(</span>default-resources<span class="token punctuation">)</span> @ easy-springmvc-maven ---<span class="token punctuation">[</span>debug<span class="token punctuation">]</span> execute contextualize<span class="token punctuation">[</span>INFO<span class="token punctuation">]</span> Using <span class="token string">'UTF-8'</span> encoding to copy filtered resources.<span class="token punctuation">[</span>INFO<span class="token punctuation">]</span> skip non existing resourceDirectory /root/.jenkins/workspace/maven-docker-test/src/main/resources<span class="token punctuation">[</span>INFO<span class="token punctuation">]</span> <span class="token punctuation">[</span>INFO<span class="token punctuation">]</span> --- maven-compiler-plugin:3.1:compile <span class="token punctuation">(</span>default-compile<span class="token punctuation">)</span> @ easy-springmvc-maven ---<span class="token punctuation">[</span>INFO<span class="token punctuation">]</span> Changes detected - recompiling the module<span class="token operator">!</span><span class="token punctuation">[</span>INFO<span class="token punctuation">]</span> Compiling <span class="token number">2</span> <span class="token builtin class-name">source</span> files to /root/.jenkins/workspace/maven-docker-test/target/classes<span class="token punctuation">[</span>INFO<span class="token punctuation">]</span> <span class="token punctuation">[</span>INFO<span class="token punctuation">]</span> --- maven-resources-plugin:2.5:testResources <span class="token punctuation">(</span>default-testResources<span class="token punctuation">)</span> @ easy-springmvc-maven ---<span class="token punctuation">[</span>debug<span class="token punctuation">]</span> execute contextualize<span class="token punctuation">[</span>INFO<span class="token punctuation">]</span> Using <span class="token string">'UTF-8'</span> encoding to copy filtered resources.<span class="token punctuation">[</span>INFO<span class="token punctuation">]</span> skip non existing resourceDirectory /root/.jenkins/workspace/maven-docker-test/src/test/resources<span class="token punctuation">[</span>INFO<span class="token punctuation">]</span> <span class="token punctuation">[</span>INFO<span class="token punctuation">]</span> --- maven-compiler-plugin:3.1:testCompile <span class="token punctuation">(</span>default-testCompile<span class="token punctuation">)</span> @ easy-springmvc-maven ---<span class="token punctuation">[</span>INFO<span class="token punctuation">]</span> Not compiling <span class="token builtin class-name">test</span> sources<span class="token punctuation">[</span>INFO<span class="token punctuation">]</span> <span class="token punctuation">[</span>INFO<span class="token punctuation">]</span> --- maven-surefire-plugin:2.10:test <span class="token punctuation">(</span>default-test<span class="token punctuation">)</span> @ easy-springmvc-maven ---<span class="token punctuation">[</span>INFO<span class="token punctuation">]</span> Tests are skipped.<span class="token punctuation">[</span>WARNING<span class="token punctuation">]</span> Attempt to <span class="token punctuation">(</span>de-<span class="token punctuation">)</span>serialize anonymous class hudson.maven.reporters.BuildInfoRecorder<span class="token variable">$1</span><span class="token punctuation">;</span> see: https://jenkins.io/redirect/serialization-of-anonymous-classes/<span class="token punctuation">[</span>INFO<span class="token punctuation">]</span> <span class="token punctuation">[</span>INFO<span class="token punctuation">]</span> --- maven-war-plugin:2.1.1:war <span class="token punctuation">(</span>default-war<span class="token punctuation">)</span> @ easy-springmvc-maven ---<span class="token punctuation">[</span>INFO<span class="token punctuation">]</span> Packaging webapp<span class="token punctuation">[</span>INFO<span class="token punctuation">]</span> Assembling webapp <span class="token punctuation">[</span>easy-springmvc-maven<span class="token punctuation">]</span> <span class="token keyword">in</span> <span class="token punctuation">[</span>/root/.jenkins/workspace/maven-docker-test/target/easy-springmvc-maven<span class="token punctuation">]</span><span class="token punctuation">[</span>INFO<span class="token punctuation">]</span> Processing war project<span class="token punctuation">[</span>INFO<span class="token punctuation">]</span> Copying webapp resources <span class="token punctuation">[</span>/root/.jenkins/workspace/maven-docker-test/src/main/webapp<span class="token punctuation">]</span><span class="token punctuation">[</span>INFO<span class="token punctuation">]</span> Webapp assembled <span class="token keyword">in</span> <span class="token punctuation">[</span><span class="token number">43</span> msecs<span class="token punctuation">]</span><span class="token punctuation">[</span>INFO<span class="token punctuation">]</span> Building war: /root/.jenkins/workspace/maven-docker-test/target/easy-springmvc-maven.war<span class="token punctuation">[</span>INFO<span class="token punctuation">]</span> WEB-INF/web.xml already added, skipping<span class="token punctuation">[</span>INFO<span class="token punctuation">]</span> --------------------------------------------------------------<span class="token punctuation">[</span>INFO<span class="token punctuation">]</span> BUILD SUCCESS<span class="token punctuation">[</span>INFO<span class="token punctuation">]</span> --------------------------------------------------------------<span class="token punctuation">[</span>INFO<span class="token punctuation">]</span> Total time: <span class="token number">2</span>.647s<span class="token punctuation">[</span>INFO<span class="token punctuation">]</span> Finished at: Sun Jun 09 <span class="token number">16</span>:12:01 CST <span class="token number">2019</span><span class="token punctuation">[</span>INFO<span class="token punctuation">]</span> Final Memory: 19M/189M<span class="token punctuation">[</span>INFO<span class="token punctuation">]</span> --------------------------------------------------------------Waiting <span class="token keyword">for</span> Jenkins to finish collecting data<span class="token punctuation">[</span>JENKINS<span class="token punctuation">]</span> Archiving /root/.jenkins/workspace/maven-docker-test/pom.xml to springmvc-maven/easy-springmvc-maven/0.0.1-SNAPSHOT/easy-springmvc-maven-0.0.1-SNAPSHOT.pom<span class="token punctuation">[</span>JENKINS<span class="token punctuation">]</span> Archiving /root/.jenkins/workspace/maven-docker-test/target/easy-springmvc-maven.war to springmvc-maven/easy-springmvc-maven/0.0.1-SNAPSHOT/easy-springmvc-maven-0.0.1-SNAPSHOT.war<span class="token punctuation">[</span>maven-docker-test<span class="token punctuation">]</span> $ /bin/sh <span class="token parameter variable">-xe</span> /tmp/jenkins6873694180184993727.shchannel stopped+ <span class="token assign-left variable">JENKINS_WAR_HOME</span><span class="token operator">=</span>/root/.jenkins/workspace/maven-docker-test/target+ <span class="token assign-left variable">DOCKERFILE_HOME</span><span class="token operator">=</span>/root/jenkins/docker-file/maven-docker-test_war+ <span class="token assign-left variable">HARBOR_IP</span><span class="token operator">=</span><span class="token number">172.22</span>.211.175+ <span class="token assign-left variable">REPOSITORIES</span><span class="token operator">=</span>jenkins/maven-docker-test+ <span class="token assign-left variable">HARBOR_USER</span><span class="token operator">=</span>wing+ <span class="token assign-left variable">HARBOR_USER_PASSWD</span><span class="token operator">=</span>Harbor12345+ <span class="token assign-left variable">HARBOR_USER_EMAIL</span><span class="token operator">=</span><span class="token number">276267003</span>@qq.com+ <span class="token function">cp</span> <span class="token parameter variable">-f</span> /root/.jenkins/workspace/maven-docker-test/target/easy-springmvc-maven.war /root/jenkins/docker-file/maven-docker-test_war/maven-docker-test.war+ <span class="token function">sudo</span> <span class="token function">docker</span> login <span class="token parameter variable">-u</span> wing <span class="token parameter variable">-p</span> Harbor12345 <span class="token number">172.22</span>.211.175WARNING<span class="token operator">!</span> Using <span class="token parameter variable">--password</span> via the CLI is insecure. Use --password-stdin.WARNING<span class="token operator">!</span> Your password will be stored unencrypted <span class="token keyword">in</span> /root/.docker/config.json.Configure a credential helper to remove this warning. Seehttps://docs.docker.com/engine/reference/commandline/login/<span class="token comment">#credentials-store</span>Login Succeeded++ <span class="token function">sudo</span> <span class="token function">docker</span> images++ <span class="token function">grep</span> jenkins/maven-docker-test++ <span class="token function">awk</span> <span class="token string">'&#123;print $3&#125;'</span>+ <span class="token assign-left variable">IMAGE_ID</span><span class="token operator">=</span>a6676d1090aa+ <span class="token string">'['</span> <span class="token parameter variable">-n</span> a6676d1090aa <span class="token string">']'</span>+ <span class="token function">sudo</span> <span class="token function">docker</span> rmi a6676d1090aaUntagged: <span class="token number">172.22</span>.211.175/jenkins/maven-docker-test:20190609-153307Untagged: <span class="token number">172.22</span>.211.175/jenkins/maven-docker-test@sha256:a0dbff5acc2284554aef955e32cb3325b0716c13ec66ec70b0705fe17d425d8bDeleted: sha256:a6676d1090aa51212861be156d81e2e96ab7ffb8ace2f8e4428debd1404ba8ddDeleted: sha256:675a50c43c8b6b890dd86f9ef7958f849956d922735a3a721741af7bfcc0a50dDeleted: sha256:fb5bd69c508668d13c4da89770d8c54fbc7e330c45543a80be52dc94a021730eDeleted: sha256:7e47412dc00e4b0e753cf076ac4b97bbc972c524aeae4243ef4c441a7bf9d8e4Deleted: sha256:2e6bb2e854e3a6d14b35797198758503dcd924a1c365e653daef5708659f3b6cDeleted: sha256:e036e0839cbd1676552163ab0001e9e968ef924d2d17b0b7eee245ce29f35f6bDeleted: sha256:1f35ccae7e2fec67145bd7b3f8b50d7f0a66f3386cc1d444136e24c8ef667763+ <span class="token builtin class-name">cd</span> /root/jenkins/docker-file/maven-docker-test_war++ <span class="token function">date</span> +%Y%m%d-%H%M%S+ <span class="token assign-left variable">TAG</span><span class="token operator">=</span><span class="token number">20190609</span>-161201+ <span class="token function">sudo</span> <span class="token function">docker</span> build <span class="token parameter variable">-t</span> <span class="token number">172.22</span>.211.175/jenkins/maven-docker-test:20190609-161201 <span class="token builtin class-name">.</span>+ <span class="token function">sudo</span> <span class="token function">docker</span> push <span class="token number">172.22</span>.211.175/jenkins/maven-docker-test:20190609-161201<span class="token punctuation">[</span>SSH<span class="token punctuation">]</span> script:<span class="token assign-left variable"><span class="token environment constant">USER</span></span><span class="token operator">=</span><span class="token string">"root"</span><span class="token comment"># æ‹‰å–é•œåƒï¼Œå‘å¸ƒ</span><span class="token assign-left variable">HARBOR_IP</span><span class="token operator">=</span><span class="token string">'172.22.211.175'</span><span class="token assign-left variable">REPOSITORIES</span><span class="token operator">=</span><span class="token string">'jenkins/maven-docker-test'</span><span class="token assign-left variable">HARBOR_USER</span><span class="token operator">=</span><span class="token string">'wing'</span><span class="token assign-left variable">HARBOR_USER_PASSWD</span><span class="token operator">=</span><span class="token string">'Harbor12345'</span> <span class="token comment"># ç™»å½•harbor</span><span class="token function">docker</span> login <span class="token parameter variable">-u</span> <span class="token variable">$&#123;HARBOR_USER&#125;</span> <span class="token parameter variable">-p</span> <span class="token variable">$&#123;HARBOR_USER_PASSWD&#125;</span> <span class="token variable">$&#123;HARBOR_IP&#125;</span> <span class="token comment"># Stop container, and delete the container.</span><span class="token assign-left variable">CONTAINER_ID</span><span class="token operator">=</span><span class="token variable"><span class="token variable">`</span><span class="token function">docker</span> <span class="token function">ps</span> <span class="token operator">|</span> <span class="token function">grep</span> <span class="token string">"maven-docker-test"</span> <span class="token operator">|</span> <span class="token function">awk</span> <span class="token string">'&#123;print $1&#125;'</span><span class="token variable">`</span></span><span class="token keyword">if</span> <span class="token punctuation">[</span> <span class="token parameter variable">-n</span> <span class="token string">"<span class="token variable">$CONTAINER_ID</span>"</span> <span class="token punctuation">]</span><span class="token punctuation">;</span> <span class="token keyword">then</span>    <span class="token function">docker</span> stop <span class="token variable">$CONTAINER_ID</span>    <span class="token function">docker</span> <span class="token function">rm</span> <span class="token variable">$CONTAINER_ID</span><span class="token keyword">else</span> <span class="token comment">#å¦‚æœå®¹å™¨å¯åŠ¨æ—¶å¤±è´¥äº†ï¼Œå°±éœ€è¦docker ps -aæ‰èƒ½æ‰¾åˆ°é‚£ä¸ªå®¹å™¨</span>    <span class="token assign-left variable">CONTAINER_ID</span><span class="token operator">=</span><span class="token variable"><span class="token variable">`</span><span class="token function">docker</span> <span class="token function">ps</span> <span class="token parameter variable">-a</span> <span class="token operator">|</span> <span class="token function">grep</span> <span class="token string">"maven-docker-test"</span> <span class="token operator">|</span> <span class="token function">awk</span> <span class="token string">'&#123;print $1&#125;'</span><span class="token variable">`</span></span>    <span class="token keyword">if</span> <span class="token punctuation">[</span> <span class="token parameter variable">-n</span> <span class="token string">"<span class="token variable">$CONTAINER_ID</span>"</span> <span class="token punctuation">]</span><span class="token punctuation">;</span> <span class="token keyword">then</span>  <span class="token comment"># å¦‚æœæ˜¯ç¬¬ä¸€æ¬¡åœ¨è¿™å°æœºå™¨ä¸Šæ‹‰å–è¿è¡Œå®¹å™¨ï¼Œé‚£ä¹ˆdocker ps -aä¹Ÿæ˜¯æ‰¾ä¸åˆ°è¿™ä¸ªå®¹å™¨çš„</span>        <span class="token function">docker</span> <span class="token function">rm</span> <span class="token variable">$CONTAINER_ID</span>    <span class="token keyword">fi</span><span class="token keyword">fi</span> <span class="token comment"># Deleteeasy-springmvc-maven image early version.</span><span class="token assign-left variable">IMAGE_ID</span><span class="token operator">=</span><span class="token variable"><span class="token variable">`</span><span class="token function">sudo</span> <span class="token function">docker</span> images <span class="token operator">|</span> <span class="token function">grep</span> $<span class="token punctuation">&#123;</span>REPOSITORIES<span class="token punctuation">&#125;</span> <span class="token operator">|</span> <span class="token function">awk</span> <span class="token string">'&#123;print $3&#125;'</span><span class="token variable">`</span></span><span class="token keyword">if</span> <span class="token punctuation">[</span> <span class="token parameter variable">-n</span> <span class="token string">"<span class="token variable">$&#123;IMAGE_ID&#125;</span>"</span> <span class="token punctuation">]</span><span class="token punctuation">;</span><span class="token keyword">then</span>    <span class="token function">docker</span> rmi <span class="token variable">$&#123;IMAGE_ID&#125;</span><span class="token keyword">fi</span> <span class="token comment"># Pull image.</span><span class="token comment"># TAG=`curl -s http://$&#123;HARBOR_IP&#125;/api/repositories/$&#123;REPOSITORIES&#125;/tags | jq '.[-1]' | sed 's/\"//g'` </span><span class="token assign-left variable">TAG</span><span class="token operator">=</span><span class="token variable"><span class="token variable">`</span><span class="token function">curl</span> <span class="token parameter variable">-s</span> http://172.22.211.175/api/repositories/jenkins/maven-docker-test/tags <span class="token operator">|</span> jq <span class="token string">'.[-1]| &#123;name:.name&#125;'</span> <span class="token operator">|</span> <span class="token function">awk</span> <span class="token parameter variable">-F</span> <span class="token string">'"'</span> <span class="token string">'/name/&#123;print $4&#125;'</span><span class="token variable">`</span></span><span class="token function">docker</span> pull <span class="token variable">$&#123;HARBOR_IP&#125;</span>/<span class="token variable">$&#123;REPOSITORIES&#125;</span><span class="token builtin class-name">:</span><span class="token variable">$&#123;TAG&#125;</span> <span class="token operator">&amp;></span>/dev/null <span class="token comment"># Run.</span><span class="token function">docker</span> run <span class="token parameter variable">-d</span> <span class="token parameter variable">--name</span> maven-docker-test <span class="token parameter variable">-p</span> <span class="token number">8080</span>:8080 <span class="token variable">$&#123;HARBOR_IP&#125;</span>/<span class="token variable">$&#123;REPOSITORIES&#125;</span><span class="token builtin class-name">:</span><span class="token variable">$&#123;TAG&#125;</span><span class="token punctuation">[</span>SSH<span class="token punctuation">]</span> executing<span class="token punctuation">..</span>.WARNING<span class="token operator">!</span> Using <span class="token parameter variable">--password</span> via the CLI is insecure. Use --password-stdin.WARNING<span class="token operator">!</span> Your password will be stored unencrypted <span class="token keyword">in</span> /root/.docker/config.json.Configure a credential helper to remove this warning. Seehttps://docs.docker.com/engine/reference/commandline/login/<span class="token comment">#credentials-store</span>Login Succeededafa55c8e5fe64bc2f652fdc3813f077173baff4e8cfd4301c5c49c75bdb3d953<span class="token punctuation">[</span>SSH<span class="token punctuation">]</span> completed<span class="token punctuation">[</span>SSH<span class="token punctuation">]</span> exit-status: <span class="token number">0</span>Finished: SUCCESS<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>]]></content>
      
      
      <categories>
          
          <category> Devops </category>
          
      </categories>
      
      
        <tags>
            
            <tag> CICD </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Jenkinsä»‹ç»å’Œä½¿ç”¨</title>
      <link href="/posts/2804.html"/>
      <url>/posts/2804.html</url>
      
        <content type="html"><![CDATA[<h1 id="Jenkinsè¯¦è§£"><a href="#Jenkinsè¯¦è§£" class="headerlink" title="Jenkinsè¯¦è§£"></a>Jenkinsè¯¦è§£</h1><h2 id="ä¸€ã€Jenkinsä»‹ç»"><a href="#ä¸€ã€Jenkinsä»‹ç»" class="headerlink" title="ä¸€ã€Jenkinsä»‹ç»"></a>ä¸€ã€Jenkinsä»‹ç»</h2><p><strong>ç®€å•å†å²</strong></p><p>â€‹                                                   <img src="/1190037-20171201191826104-357945560.png" alt="img"></p><p>Jenkinsçš„å‰èº«æ˜¯Hudsonï¼Œé‡‡ç”¨JAVAç¼–å†™çš„æŒç»­é›†æˆå¼€æºå·¥å…·ã€‚Hudsonç”±Sunå…¬å¸åœ¨2004å¹´å¯åŠ¨ï¼Œç¬¬ä¸€ä¸ªç‰ˆæœ¬äº2005å¹´åœ¨java.netå‘å¸ƒã€‚2007å¹´å¼€å§‹Hudsoné€æ¸å–ä»£CruiseControlå’Œå…¶ä»–çš„å¼€æºæ„å»ºå·¥å…·çš„æ±Ÿæ¹–åœ°ä½ã€‚åœ¨2008å¹´çš„JavaOneå¤§ä¼šä¸Šåœ¨å¼€å‘è€…è§£å†³æ–¹æ¡ˆä¸­è·å¾—æœå…‹é€‰æ‹©å¤§å¥–ï¼ˆDukeâ€™s Choice Awardï¼‰ã€‚</p><p>åœ¨2010å¹´11æœˆæœŸé—´ï¼Œå› ä¸ºOracleå¯¹Sunçš„æ”¶è´­å¸¦æ¥äº†Hudsonçš„æ‰€æœ‰æƒé—®é¢˜ã€‚ä¸»è¦çš„é¡¹ç›®è´¡çŒ®è€…å’ŒOracleä¹‹é—´ï¼Œå°½ç®¡è¾¾æˆäº†å¾ˆå¤šåè®®ï¼Œä½†æœ‰ä¸ªå…³é”®é—®é¢˜å°±æ˜¯å•†æ ‡åç§°â€œHudsonâ€ã€‚ç”²éª¨æ–‡åœ¨2010å¹´12æœˆå£°æ˜æ‹¥æœ‰è¯¥åç§°å¹¶ç”³è¯·å•†æ ‡çš„æƒåˆ©ã€‚  å› æ­¤ï¼Œ2011å¹´1æœˆ11æ—¥ï¼Œæœ‰äººè¦æ±‚æŠ•ç¥¨å°†é¡¹ç›®åç§°ä»â€œHudsonâ€æ”¹ä¸ºâ€œJenkinsâ€ã€‚2011å¹´1æœˆ29æ—¥ï¼Œè¯¥å»ºè®®å¾—åˆ°ç¤¾åŒºæŠ•ç¥¨çš„æ‰¹å‡†ï¼Œåˆ›å»ºäº†Jenkinsé¡¹ç›®ã€‚</p><p>2011å¹´2æœˆ1æ—¥ï¼Œç”²éª¨æ–‡è¡¨ç¤ºï¼Œä»–ä»¬æ‰“ç®—ç»§ç»­å¼€å‘Hudsonï¼Œå¹¶è®¤ä¸ºJenkinsåªæ˜¯ä¸€ä¸ªåˆ†æ”¯ï¼Œè€Œä¸æ˜¯é‡å‘½åã€‚å› æ­¤ï¼ŒJenkinså’ŒHudsonç»§ç»­ä½œä¸ºä¸¤ä¸ªç‹¬ç«‹çš„é¡¹ç›®ï¼Œæ¯ä¸ªéƒ½è®¤ä¸ºå¯¹æ–¹æ˜¯è‡ªå·±çš„åˆ†æ”¯ã€‚åˆ°2013å¹´12æœˆï¼ŒGitHubä¸Šçš„Jenkinsæ‹¥æœ‰567ä¸ªé¡¹ç›®æˆå‘˜å’Œçº¦1,100ä¸ªå…¬å…±ä»“åº“ï¼Œä¸æ­¤ç›¸å¯¹çš„Hudsonæœ‰32ä¸ªé¡¹ç›®æˆå‘˜å’Œ17ä¸ªå…¬å…±ä»“åº“ã€‚åˆ°ç°åœ¨ä¸¤è€…çš„å·®å¼‚æ›´å¤šï¼Œåº”è¯¥è¯´Jenkinså·²ç»å…¨é¢è¶…è¶Šäº†Hudsonã€‚æ­¤å¤–ï¼Œå¤§å®¶å¯èƒ½æ˜¯å‡ºäºè®¨åŒOracleçš„æƒ…ç»ªï¼Œä½œä¸ºJavaå¼€å‘è€…å¤©ç„¶åœ°åº”è¯¥æ”¯æŒå’Œä½¿ç”¨Jenkinsã€‚</p><p>åé¢Hudsonè¢«Oracleæç»™äº†EclipseåŸºé‡‘ä¼šï¼Œæ‰€ä»¥å³è¾¹è¿™è€å¤´æœ‰ä¸ªEclipseçš„å…‰ç¯åŠ æŒã€‚</p><p>ä¸ºä»€ä¹ˆJenkinsæ›´å—å¤§å®¶æ¬¢è¿ã€‚</p><p>ç”±å¼€å‘è€…ä¸»å¯¼ã€é¢å‘å¼€å‘è€… </p><p><img src="/b8434422776e4b4e8d91bfdfc21e47d6.jpeg" alt="img"></p><p>é¦–å…ˆï¼Œæ›¾ç»æ˜¯Hudsonå¼€å‘äººå‘˜ä¸­çš„99%éƒ½è½¬å‘äº†Jenkinsçš„å¼€å‘ï¼Œå…¶ä¸­åŒ…æ‹¬æœ€åˆçš„åˆ›å»ºè€…å·å£æ¸…å­ï¼ˆKohsuke  Kawaguchiï¼‰ã€‚ä»–ç‹¬è‡ªå†™äº†å¤§éƒ¨åˆ†ä»£ç ï¼Œå¹¶ä¸”ä»–çš„ç»éªŒæ˜¯Hudsonå„ç§é«˜çº§ç‰¹æ€§çš„å…³é”®æ¥æºã€‚Jenkinsçš„å¼€å‘ç¤¾åŒºæ›´æ´»è·ƒã€‚æ‰€ä»¥å¯¹å¾ˆå¤šäººè€Œè¨€ï¼Œä»è¡€ç»Ÿä¸Šçœ‹Hudsonæ˜¯åå¨˜å…»çš„ï¼ŒJenkinsæ‰æ˜¯äº²ç”Ÿçš„ï¼</p><p> æ²»ç†å’Œç¤¾åŒº </p><p>Jenkinså¼€å‘ç¤¾åŒºçš„ç®¡ç†æ˜¯å¾ˆå¼€æ”¾çš„ã€‚ æœ‰ä¸€ä¸ªç‹¬ç«‹çš„è‘£äº‹ä¼šï¼Œå…¶ä¸­åŒ…æ‹¬æ¥è‡ªYahoo!,  CloudBeesï¼ŒClouderaå’ŒAptureç­‰å¤šå®¶å…¬å¸çš„é•¿æœŸä»¥æ¥çš„Hudsonå¼€å‘äººå‘˜ã€‚æ¯æ¬¡ä¼šè®®åï¼Œä»–ä»¬å®šæœŸä¸¾è¡Œæ²»ç†ä¼šè®®å¹¶å‘è¡¨æ„è§ï¼Œå¾è¯¢å…¬ä¼—æ„è§ã€‚ä»–ä»¬è¿˜å°†æ‰€æœ‰ä»£ç éƒ½æèµ ç»™å…¬å…±åˆ©ç›Šè½¯ä»¶ç»„ç»‡ï¼ˆSPIï¼‰ï¼Œä»¥ç¡®ä¿ç¤¾åŒºæŒç»­å¼€æ”¾ã€‚</p><p> ç¨³å®šæ€§ </p><p>åˆ†æ‰‹åï¼Œé’ˆå¯¹Jenkinsçš„è´¡çŒ®ä¸æ–­æŒç»­å¢åŠ ï¼ŒJenkinsåˆ¶å®šäº†æ–°çš„é•¿æœŸæ”¯æŒå‘å¸ƒçº¿ã€‚ç¤¾åŒºå®šå¤§çº¦æ¯ä¸‰ä¸ªæœˆå‘å¸ƒä¸€æ¬¡ç¨³å®šç‰ˆæœ¬çš„è¡¥ä¸ã€‚</p><p> æ’ä»¶çš„å¹³å° </p><p>Jenkinsæ”¯æŒè¶…è¿‡1000ä¸ªæ’ä»¶ã€‚å‡­å€Ÿå¤šæ ·è€Œå¼ºå¤§çš„æ’ä»¶Jenkinsæˆäº†æ•´ä¸ªå¼€å‘ç”Ÿå‘½å‘¨æœŸä¸­çš„ä¸€ä¸ªä¸­å¿ƒç‚¹ã€‚</p><p>åˆ°äº†2017å¹´ï¼Œä¸¤è€…çš„å‘å±•å·®å¼‚æ›´å¤§äº†ã€‚Jenkinsåº”è¯¥è¯´æ˜¯CIå·¥å…·ä¸­å…¬è®¤çš„è€å¤§ï¼Œè€ŒHudsonä¸ä»…ä¸èƒ½ä¸Jenkinsæ¯”ï¼Œè·Ÿå…¶ä»–CIå·¥å…·æ¯”ä¹Ÿæ²¡ä»€ä¹ˆä¼˜åŠ¿ï¼Œå®Œå…¨æ²‰æ²¦äº†ã€‚</p><p>slantç½‘ç«™å¯¹ä¸€ç³»åˆ—CIå·¥å…·åšäº†ä¸€æ¬¡å¯¹æ¯”ï¼Œå…¶ä¸­Jenkinså’ŒHudsonçš„æƒ…å†µå¦‚ä¸‹ã€‚</p><p> 1ã€åŸºæœ¬é¢é—®é¢˜ </p><table><thead><tr><th>å·¥å…·</th><th>Jenkins</th><th>Hudson</th></tr></thead><tbody><tr><td>æœ€å¥½çš„CIå·¥å…·</td><td>1</td><td>22</td></tr><tr><td>æœ€å¥½çš„JAVA CIå·¥å…·</td><td>1</td><td>7</td></tr><tr><td>æœ€å¥½çš„è‡ªæ‰˜ç®¡CIå·¥å…·</td><td>3</td><td>4</td></tr></tbody></table><p> 2ã€å…¶ä»–æ”¯æŒ </p><table><thead><tr><th>å·¥å…·</th><th>Jenkins</th><th>Hudson</th></tr></thead><tbody><tr><td>å¯¹Windowæ”¯æŒæœ€å¥½</td><td>1</td><td>æ— æ’å</td></tr><tr><td>æœ€å¥½çš„å¼€æºCIå·¥å…·</td><td>1</td><td>æ— æ’å</td></tr><tr><td>å¯¹BitBucketçš„æ”¯æŒ</td><td>2</td><td>æ— æ’å</td></tr><tr><td>å¯¹ç§»åŠ¨å¼€å‘è€…æ”¯æŒæœ€å¥½çš„CI</td><td>4</td><td>æ— æ’å</td></tr></tbody></table><p> 3ã€æ›´å¤šç‰¹å¾ </p><table><thead><tr><th>Jenkins</th><th>Hudson</th></tr></thead><tbody><tr><td>å…è´¹ä¸”å¼€æº</td><td>ä¸Jenkinså…±äº«äº†å¾ˆå¤šä»£ç ï¼Œå®‰è£…è¿˜æ˜¯æŒºç®€å•çš„</td></tr><tr><td>å…³é”®çš„ç¯å¢ƒå˜é‡å¯ä»¥å®‰å…¨å­˜å‚¨</td><td></td></tr><tr><td>æ”¯æŒå¤šä¸ªSCMï¼ŒåŒ…æ‹¬SVN, Mercurial, Gitã€‚é›†æˆäº†GitHubå’ŒBitbucket</td><td></td></tr><tr><td>é«˜åº¦å¯é…ç½®</td><td></td></tr><tr><td>èµ„æºå’Œæ•™ç¨‹å¾ˆå¤š</td><td></td></tr><tr><td>å®‰è£…è¿è¡Œç®€å•</td><td></td></tr><tr><td>åˆ†å¸ƒå¼çš„æ„å»ºä¹Ÿèƒ½é«˜æ•ˆè¿è¡Œ</td><td></td></tr><tr><td>å¯è·¨å¹³å°éƒ¨ç½²</td><td></td></tr><tr><td>å¾ˆå¤šé«˜è´¨é‡çš„æ’ä»¶</td><td></td></tr><tr><td>å¾—å¥–æ— æ•°</td><td></td></tr><tr><td>åºå¤§çš„ç¤¾åŒº</td><td></td></tr></tbody></table><h4 id="1ã€Jenkins-åŠŸèƒ½"><a href="#1ã€Jenkins-åŠŸèƒ½" class="headerlink" title="1ã€Jenkins åŠŸèƒ½"></a>1ã€Jenkins åŠŸèƒ½</h4><ul><li>æŒç»­çš„è½¯ä»¶ç‰ˆæœ¬å‘å¸ƒ&#x2F;æµ‹è¯•é¡¹ç›®ã€‚</li><li>ç›‘æ§å¤–éƒ¨è°ƒç”¨æ‰§è¡Œçš„å·¥ä½œã€‚</li></ul><h4 id="3ã€Jenkins-æ¦‚å¿µ"><a href="#3ã€Jenkins-æ¦‚å¿µ" class="headerlink" title="3ã€Jenkins æ¦‚å¿µ"></a>3ã€Jenkins æ¦‚å¿µ</h4><p>Jenkinsæ˜¯ä¸€ä¸ªåŠŸèƒ½å¼ºå¤§çš„åº”ç”¨ç¨‹åºï¼Œå…è®¸<strong>æŒç»­é›†æˆå’ŒæŒç»­äº¤ä»˜é¡¹ç›®</strong>ï¼Œæ— è®ºç”¨çš„æ˜¯ä»€ä¹ˆå¹³å°ã€‚è¿™æ˜¯ä¸€ä¸ªå…è´¹çš„å¼€æºé¡¹ç›®ï¼Œå¯ä»¥å¤„ç†ä»»ä½•ç±»å‹çš„æ„å»ºæˆ–æŒç»­é›†æˆã€‚é›†æˆJenkinså¯ä»¥ç”¨äºä¸€äº›æµ‹è¯•å’Œéƒ¨ç½²æŠ€æœ¯ã€‚Jenkinsæ˜¯ä¸€ç§è½¯ä»¶å…è®¸æŒç»­é›†æˆã€‚</p><h4 id="4ã€Jenkins-ç›®çš„"><a href="#4ã€Jenkins-ç›®çš„" class="headerlink" title="4ã€Jenkins ç›®çš„"></a>4ã€Jenkins ç›®çš„</h4><ul><li><p>æŒç»­ã€è‡ªåŠ¨åœ°æ„å»º&#x2F;æµ‹è¯•è½¯ä»¶é¡¹ç›®ã€‚</p></li><li><p>ç›‘æ§è½¯ä»¶å¼€æ”¾æµç¨‹ï¼Œå¿«é€Ÿé—®é¢˜å®šä½åŠå¤„ç†ï¼Œææé«˜å¼€å‘æ•ˆç‡ã€‚</p></li></ul><h4 id="5ã€Jenkins-ç‰¹æ€§"><a href="#5ã€Jenkins-ç‰¹æ€§" class="headerlink" title="5ã€Jenkins ç‰¹æ€§"></a>5ã€Jenkins ç‰¹æ€§</h4><ul><li><p>å¼€æºçš„javaè¯­è¨€å¼€å‘æŒç»­é›†æˆå·¥å…·ï¼Œæ”¯æŒCIï¼ŒCDã€‚</p></li><li><p>æ˜“äºå®‰è£…éƒ¨ç½²é…ç½®ï¼šå¯é€šè¿‡yumå®‰è£…,æˆ–ä¸‹è½½waråŒ…ä»¥åŠé€šè¿‡dockerå®¹å™¨ç­‰å¿«é€Ÿå®ç°å®‰è£…éƒ¨ç½²ï¼Œå¯æ–¹ä¾¿webç•Œé¢é…ç½®ç®¡ç†ã€‚</p></li><li><p>æ¶ˆæ¯é€šçŸ¥åŠæµ‹è¯•æŠ¥å‘Šï¼šé›†æˆRSS&#x2F;E-mailé€šè¿‡RSSå‘å¸ƒæ„å»ºç»“æœæˆ–å½“æ„å»ºå®Œæˆæ—¶é€šè¿‡e-mailé€šçŸ¥ï¼Œç”ŸæˆJUnit&#x2F;TestNGæµ‹è¯•æŠ¥å‘Šã€‚</p></li><li><p>åˆ†å¸ƒå¼æ„å»ºï¼šæ”¯æŒJenkinsèƒ½å¤Ÿè®©å¤šå°è®¡ç®—æœºä¸€èµ·æ„å»º&#x2F;æµ‹è¯•ã€‚</p></li><li><p>æ–‡ä»¶è¯†åˆ«:Jenkinsèƒ½å¤Ÿè·Ÿè¸ªå“ªæ¬¡æ„å»ºç”Ÿæˆå“ªäº›jarï¼Œå“ªæ¬¡æ„å»ºä½¿ç”¨å“ªä¸ªç‰ˆæœ¬çš„jarç­‰ã€‚</p></li><li><p>ä¸°å¯Œçš„æ’ä»¶æ”¯æŒ:æ”¯æŒæ‰©å±•æ’ä»¶ï¼Œä½ å¯ä»¥å¼€å‘é€‚åˆè‡ªå·±å›¢é˜Ÿä½¿ç”¨çš„å·¥å…·ï¼Œå¦‚gitï¼Œsvnï¼Œmavenï¼Œdockerç­‰ã€‚</p></li></ul><h4 id="6ã€äº§å“å‘å¸ƒæµç¨‹"><a href="#6ã€äº§å“å‘å¸ƒæµç¨‹" class="headerlink" title="6ã€äº§å“å‘å¸ƒæµç¨‹"></a>6ã€äº§å“å‘å¸ƒæµç¨‹</h4><p>äº§å“è®¾è®¡æˆå‹ -&gt; å¼€å‘äººå‘˜å¼€å‘ä»£ç  -&gt; æµ‹è¯•äººå‘˜æµ‹è¯•åŠŸèƒ½ -&gt; è¿ç»´äººå‘˜å‘å¸ƒä¸Šçº¿</p><ul><li><p>æŒç»­é›†æˆï¼ˆContinuous integrationï¼Œç®€ç§°CIï¼‰</p></li><li><p>æŒç»­äº¤ä»˜ï¼ˆContinuous deliveryï¼‰</p></li><li><p>æŒç»­éƒ¨ç½²ï¼ˆcontinuous deploymentï¼‰</p></li></ul><h2 id="äºŒã€Jenkins-CI-x2F-CD-æµç¨‹"><a href="#äºŒã€Jenkins-CI-x2F-CD-æµç¨‹" class="headerlink" title="äºŒã€Jenkins CI&#x2F;CD æµç¨‹"></a>äºŒã€Jenkins CI&#x2F;CD æµç¨‹</h2><p><img src="/1352872-20180728203103959-1827013182.png" alt="img"></p><p>è¯´æ˜ï¼šè¿™å¼ å›¾ç¨å¾®æ›´å½¢è±¡ä¸€ç‚¹ï¼Œä¸Šçº¿ä¹‹å‰å…ˆæŠŠä»£ç gitåˆ°ç‰ˆæœ¬ä»“åº“ï¼Œç„¶åé€šè¿‡Jenkinså°†Javaé¡¹ç›®é€šè¿‡mavenå»æ„å»ºï¼Œè¿™æ˜¯åœ¨éå®¹å™¨ä¹‹å‰ï¼Œå…¸å‹çš„è‡ªåŠ¨åŒ–çš„ä¸€ä¸ªç‰ˆæœ¬ä¸Šçº¿æµç¨‹ã€‚é‚£å®ƒæœ‰å“ªäº›é—®é¢˜å‘¢ï¼Ÿ</p><p>å¦‚ï¼šå®ƒçš„æµ‹è¯•ç¯å¢ƒï¼Œé¢„ç”Ÿäº§ç¯å¢ƒï¼Œæµ‹è¯•ç¯å¢ƒã€‚ä¼šå­˜åœ¨ä¸€å®šçš„å…¼å®¹æ€§é—®é¢˜ ï¼ˆç¯å¢ƒä¹‹é—´ä¼šæœ‰ä¸€å®šçš„å·®å¼‚ï¼‰ </p><p><img src="/1352872-20180728203917252-1861052346.png" alt="img"></p><p>è¯´æ˜ï¼šå®ƒè¿™é‡Œæœ‰ä¸€ä¸ªdocker harbor çš„é•œåƒä»“åº“ï¼Œé€šå¸¸ä¼šæŠŠä½ çš„ç¯å¢ƒæ‰“åŒ…ä¸ºä¸€ä¸ªé•œåƒï¼Œé€šè¿‡é•œåƒçš„æ–¹å¼æ¥éƒ¨ç½²ã€‚</p><h2 id="ä¸‰ã€éƒ¨ç½²Jenkins"><a href="#ä¸‰ã€éƒ¨ç½²Jenkins" class="headerlink" title="ä¸‰ã€éƒ¨ç½²Jenkins"></a>ä¸‰ã€éƒ¨ç½²Jenkins</h2><table><thead><tr><th>IP</th><th>ä¸»æœºå</th></tr></thead><tbody><tr><td>172.16.1.2</td><td>jenkins</td></tr><tr><td>172.16.1.3</td><td>web</td></tr><tr><td>172.16.1.4</td><td>git&#x2F;gitlab</td></tr></tbody></table><h3 id="1ã€éƒ¨ç½²GIT"><a href="#1ã€éƒ¨ç½²GIT" class="headerlink" title="1ã€éƒ¨ç½²GIT"></a>1ã€éƒ¨ç½²GIT</h3><p>IPï¼š172.16.1.4ï¼Œgit æœåŠ¡å™¨è¿›è¡Œå¦‚ä¸‹æ“ä½œ</p><h4 id="1ã€å®‰è£…-git"><a href="#1ã€å®‰è£…-git" class="headerlink" title="1ã€å®‰è£… git"></a>1ã€å®‰è£… git</h4><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token punctuation">[</span>root@qfedu.com ~<span class="token punctuation">]</span><span class="token comment"># yum install -y git</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>åˆ›å»ºgitç”¨æˆ·å¹¶è®¾ç½®å¯†ç ä¸º123456ï¼ˆä¸ºå¼€å‘äººå‘˜æ‹‰ä»£ç æ—¶è®¾ç½®çš„ç”¨æˆ·ï¼‰</p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token punctuation">[</span>root@qfedu.com ~<span class="token punctuation">]</span><span class="token comment"># useradd git</span><span class="token punctuation">[</span>root@qfedu.com ~<span class="token punctuation">]</span><span class="token comment"># passwd git</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre><h4 id="2ã€åˆ›å»ºä»“åº“"><a href="#2ã€åˆ›å»ºä»“åº“" class="headerlink" title="2ã€åˆ›å»ºä»“åº“"></a>2ã€åˆ›å»ºä»“åº“</h4><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token punctuation">[</span>root@qfedu.com ~<span class="token punctuation">]</span><span class="token comment"># su - git  #åˆ‡æ¢åˆ°gitç”¨æˆ·ä¸‹</span><span class="token punctuation">[</span>git@qfedu.com ~<span class="token punctuation">]</span>$ <span class="token function">mkdir</span> <span class="token parameter variable">-p</span> repos/app.git  <span class="token comment">#åœ¨gitç”¨æˆ·å®¶ç›®å½•ä¸‹åˆ›å»ºä¸€ä¸ªreposç›®å½•ï¼Œreposç›®å½•ä¸‹åˆ›å»ºå„ä¸ªé¡¹ç›®çš„ç›®å½•</span><span class="token punctuation">[</span>git@qfedu.com ~<span class="token punctuation">]</span>$ <span class="token builtin class-name">cd</span> repos/app.git<span class="token punctuation">[</span>git@qfedu.com ~<span class="token punctuation">]</span>$ <span class="token function">git</span> <span class="token parameter variable">--bare</span> init <span class="token comment">#åˆå§‹åŒ–ä»“åº“ï¼Œå¦‚æœä¸åˆå§‹åŒ–ï¼Œè¿™ä»…ä»…å°±åªæ˜¯ä¸€ä¸ªç›®å½•</span><span class="token comment">#æŸ¥çœ‹åˆå§‹åŒ–åä»“åº“ä¿¡æ¯</span><span class="token punctuation">[</span>git@qfedu.com app.git<span class="token punctuation">]</span>$ <span class="token function">ls</span> <span class="token parameter variable">-a</span><span class="token builtin class-name">.</span> <span class="token punctuation">..</span> branches config description HEAD hooks info objects refs<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>é…ç½®å®Œä»“åº“åï¼Œæˆ‘ä»¬éœ€è¦æ‰¾ä¸€å°æœºå™¨æµ‹è¯•æ˜¯å¦èƒ½å¤ŸæˆåŠŸä»ä»“åº“ä¸­æ‹‰å–ä»£ç ï¼Œæˆ–è€…ä¸Šä¼ ä»£ç åˆ°è¯¥ä»“åº“ã€‚</p><p>IPï¼š172.16.1.5ï¼ŒwebæœåŠ¡å™¨è¿›è¡Œæµ‹è¯•</p><h4 id="3ã€å®‰è£…-git-å®¢æˆ·ç«¯"><a href="#3ã€å®‰è£…-git-å®¢æˆ·ç«¯" class="headerlink" title="3ã€å®‰è£… git å®¢æˆ·ç«¯"></a>3ã€å®‰è£… git å®¢æˆ·ç«¯</h4><p>æ‹‰å–ä»£ç </p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token punctuation">[</span>root@qfedu.com ~<span class="token punctuation">]</span><span class="token comment"># yum install -y git   #é¦–å…ˆè¿˜æ˜¯å®‰è£…git</span><span class="token punctuation">[</span>root@qfedu.com ~<span class="token punctuation">]</span><span class="token comment"># mkdir -p test</span><span class="token punctuation">[</span>root@qfedu.com ~<span class="token punctuation">]</span><span class="token comment"># cd test</span><span class="token punctuation">[</span>root@qfedu.com test<span class="token punctuation">]</span><span class="token comment"># git clone git@172.16.1.4:/home/git/repos/app.git  ##æµ‹è¯•cloneè¿œç«¯gitä»“åº“</span><span class="token punctuation">[</span>root@qfedu.com test<span class="token punctuation">]</span><span class="token comment"># ls </span>app<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h4 id="4ã€push-æµ‹è¯•"><a href="#4ã€push-æµ‹è¯•" class="headerlink" title="4ã€push æµ‹è¯•"></a>4ã€push æµ‹è¯•</h4><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token punctuation">[</span>root@qfedu.com app<span class="token punctuation">]</span><span class="token comment"># touch index.html</span><span class="token punctuation">[</span>root@qfedu.com app<span class="token punctuation">]</span><span class="token comment"># git add .</span><span class="token punctuation">[</span>root@qfedu.com app<span class="token punctuation">]</span><span class="token comment"># git commit -m "test" </span><span class="token comment">#ç¬¬ä¸€æ¬¡çš„è¯ä¼šæœ‰æŠ¥é”™è­¦å‘Šï¼Œè¯´è®©é…ç½®é‚®ç®±å’Œå§“åã€‚é…ç½®ä¸€ä¸‹å³å¯ï¼Œæˆ–è€…ç›´æ¥æ‰§è¡Œç»™å‡ºçš„å‘½ä»¤æ‰§è¡Œå³å¯ã€‚</span><span class="token punctuation">[</span>root@qfedu.com app<span class="token punctuation">]</span><span class="token comment"># git push origin master #æäº¤åˆ°ä¸»åˆ†æ”¯ï¼ˆé»˜è®¤åˆ†æ”¯ï¼‰</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>æµ‹è¯•æˆåŠŸï¼</p><h4 id="5ã€è¡¥å……ï¼šé…ç½®å…ç§˜é’¥"><a href="#5ã€è¡¥å……ï¼šé…ç½®å…ç§˜é’¥" class="headerlink" title="5ã€è¡¥å……ï¼šé…ç½®å…ç§˜é’¥"></a>5ã€è¡¥å……ï¼šé…ç½®å…ç§˜é’¥</h4><h5 id="1ã€172-16-1-5-æœåŠ¡å™¨ç”Ÿæˆå…¬é’¥"><a href="#1ã€172-16-1-5-æœåŠ¡å™¨ç”Ÿæˆå…¬é’¥" class="headerlink" title="1ã€172.16.1.5 æœåŠ¡å™¨ç”Ÿæˆå…¬é’¥"></a>1ã€172.16.1.5 æœåŠ¡å™¨ç”Ÿæˆå…¬é’¥</h5><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token punctuation">[</span>root@qfedu.com ~<span class="token punctuation">]</span><span class="token comment"># ssh-keygen</span><span class="token punctuation">[</span>root@qfedu.com ~<span class="token punctuation">]</span><span class="token comment"># cat /root/.ssh/id_rsa.pub </span>ssh-rsa AAAAB3NzaC1yc2EAAAADAQABAAABAQDmmIOOJCRjlcNyM9zQ4yNeSFgJhBYZUTHMJ3D6sy6IgyOQi/LW9IzBF8mVjmc9wBzQBzg9obCJ/2YiGtvgl00v8A6Clamx6XdQpHPbnVcgHznhEhaa5X0TONcyJ0/z9e8wdppafAsrgRYdpRcXfrPC7xlzDIRpjgWG9YEMzrqCDcWAoWLMYvr2GHwhFyJa5OpMNGH5NjaWJbzYlgdP5cwh/QX04xVZ0QKghQsol9HmbRbqJ8Hl8WrgDoy2BPE41XKEwR4drgUGCFXZDH4s9ZodC4zI76TWIyCeKKM0XbTNHRU6Cb6xWb/iFhpsa7m14A5usUH6RfIjzJBr3IcyUkk3 root@qfedu.com<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre><h5 id="2ã€172-16-1-4-git-æœåŠ¡å™¨è¿›è¡Œé…ç½®"><a href="#2ã€172-16-1-4-git-æœåŠ¡å™¨è¿›è¡Œé…ç½®" class="headerlink" title="2ã€172.16.1.4 git æœåŠ¡å™¨è¿›è¡Œé…ç½®"></a>2ã€172.16.1.4 git æœåŠ¡å™¨è¿›è¡Œé…ç½®</h5><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token punctuation">[</span>git@qfedu.com ~<span class="token punctuation">]</span>$ <span class="token function">mkdir</span> <span class="token parameter variable">-p</span> .ssh<span class="token punctuation">[</span>git@qfedu.com ~<span class="token punctuation">]</span>$ <span class="token function">chmod</span> <span class="token number">700</span> .ssh/  <span class="token comment"># ç»™äºˆç›®å½•700æƒé™</span><span class="token punctuation">[</span>git@qfedu.com ~<span class="token punctuation">]</span>$ <span class="token function">vi</span> .ssh/authorized_keys  <span class="token comment"># å†™å…¥172.16.1.5æœåŠ¡å™¨çš„å…¬é’¥</span>ssh-rsa AAAAB3NzaC1yc2EAAAADAQABAAABAQDmmIOOJCRjlcNyM9zQ4yNeSFgJhBYZUTHMJ3D6sy6IgyOQi/LW9IzBF8mVjmc9wBzQBzg9obCJ/2YiGtvgl00v8A6Clamx6XdQpHPbnVcgHznhEhaa5X0TONcyJ0/z9e8wdppafAsrgRYdpRcXfrPC7xlzDIRpjgWG9YEMzrqCDcWAoWLMYvr2GHwhFyJa5OpMNGH5NjaWJbzYlgdP5cwh/QX04xVZ0QKghQsol9HmbRbqJ8Hl8WrgDoy2BPE41XKEwR4drgUGCFXZDH4s9ZodC4zI76TWIyCeKKM0XbTNHRU6Cb6xWb/iFhpsa7m14A5usUH6RfIjzJBr3IcyUkk3 root@qfedu.com<span class="token punctuation">[</span>git@qfedu.com ~<span class="token punctuation">]</span>$ <span class="token function">chmod</span> <span class="token number">600</span> .ssh/authorized_keys  <span class="token comment"># ç»™äºˆæ–‡ä»¶600æƒé™</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h3 id="2ã€Jenkins-å®‰è£…é…ç½®"><a href="#2ã€Jenkins-å®‰è£…é…ç½®" class="headerlink" title="2ã€Jenkins å®‰è£…é…ç½®"></a>2ã€Jenkins å®‰è£…é…ç½®</h3><h4 id="1ã€jenkins-å®‰è£…"><a href="#1ã€jenkins-å®‰è£…" class="headerlink" title="1ã€jenkins å®‰è£…"></a>1ã€jenkins å®‰è£…</h4><p>å®˜ç½‘ï¼š <a href="https://jenkins.io/">https://jenkins.io</a></p><p>æ’ä»¶ï¼š<a href="http://updates.jenkins-ci.org/download/plugins/">http://updates.jenkins-ci.org/download/plugins/</a></p><h5 id="1ã€å®‰è£…-java-ç¯å¢ƒï¼ˆjenkins-ä¾èµ–-java-ç¯å¢ƒï¼‰"><a href="#1ã€å®‰è£…-java-ç¯å¢ƒï¼ˆjenkins-ä¾èµ–-java-ç¯å¢ƒï¼‰" class="headerlink" title="1ã€å®‰è£… java ç¯å¢ƒï¼ˆjenkins ä¾èµ– java ç¯å¢ƒï¼‰"></a>1ã€å®‰è£… java ç¯å¢ƒï¼ˆjenkins ä¾èµ– java ç¯å¢ƒï¼‰</h5><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token punctuation">[</span>root@qfedu.com tools<span class="token punctuation">]</span><span class="token comment"># ls                 # æŸ¥çœ‹è§£å‹åŒ…</span>jdk-8u45-linux-x64.tar.gz<span class="token punctuation">[</span>root@qfedu.com tools<span class="token punctuation">]</span><span class="token comment"># tar zxf jdk-8u45-linux-x64.tar.gz    # è§£å‹</span><span class="token punctuation">[</span>root@qfedu.com tools<span class="token punctuation">]</span><span class="token comment"># mv jdk1.8.0_45/ /usr/local/jdk1.8    # ç§»åŠ¨è‡³æŒ‡å®šç›®å½•</span><span class="token punctuation">[</span>root@qfedu.com tools<span class="token punctuation">]</span><span class="token comment"># vim /etc/profile    # é…ç½®ç¯å¢ƒå˜é‡</span><span class="token assign-left variable">JAVA_HOME</span><span class="token operator">=</span>/usr/local/java<span class="token builtin class-name">export</span> <span class="token assign-left variable">MAVEN_HOME</span><span class="token operator">=</span>/usr/local/maven<span class="token builtin class-name">export</span> <span class="token assign-left variable">JRE_HOME</span><span class="token operator">=</span>/usr/local/java/jre<span class="token builtin class-name">export</span> <span class="token assign-left variable">CLASSPATH</span><span class="token operator">=</span>.:<span class="token variable">$JAVA_HOME</span>/lib:<span class="token variable">$JRE_HOME</span>/lib:<span class="token variable">$CLASSPATH</span><span class="token builtin class-name">export</span> <span class="token assign-left variable"><span class="token environment constant">PATH</span></span><span class="token operator">=</span><span class="token variable">$JAVA_HOME</span>/bin:<span class="token variable">$JRE_HOME</span>/bin:<span class="token variable">$MAVEN_HOME</span>/bin:<span class="token environment constant">$PATH</span><span class="token punctuation">[</span>root@qfedu.com tools<span class="token punctuation">]</span><span class="token comment"># source /etc/profile  # é…ç½®ç”Ÿæ•ˆ</span><span class="token punctuation">[</span>root@qfedu.com tools<span class="token punctuation">]</span><span class="token comment"># java -version        # æŸ¥çœ‹javaç‰ˆæœ¬</span><span class="token function">java</span> version <span class="token string">"1.8.0_45"</span>Java<span class="token punctuation">(</span>TM<span class="token punctuation">)</span> SE Runtime Environment <span class="token punctuation">(</span>build <span class="token number">1.8</span>.0_45-b14<span class="token punctuation">)</span>Java HotSpot<span class="token punctuation">(</span>TM<span class="token punctuation">)</span> <span class="token number">64</span>-Bit Server VM <span class="token punctuation">(</span>build <span class="token number">25.45</span>-b02, mixed mode<span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h5 id="2ã€yum-å®‰è£…-jenkins"><a href="#2ã€yum-å®‰è£…-jenkins" class="headerlink" title="2ã€yum å®‰è£… jenkins"></a>2ã€yum å®‰è£… jenkins</h5><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token punctuation">[</span>root@qfedu.com ~<span class="token punctuation">]</span><span class="token comment"># wget -O /etc/yum.repos.d/jenkins.repo https://pkg.jenkins.io/redhat-stable/jenkins.repo</span><span class="token comment"># å¯¼å…¥jenkinsæº</span><span class="token punctuation">[</span>root@qfedu.com ~<span class="token punctuation">]</span><span class="token comment"># rpm --import https://pkg.jenkins.io/redhat-stable/jenkins.io.key</span><span class="token comment"># å¯¼å…¥jenkinså®˜æ–¹è¯ä¹¦</span><span class="token punctuation">[</span>root@qfedu.com ~<span class="token punctuation">]</span><span class="token comment"># yum install -y jenkins</span><span class="token comment"># å®‰è£…jenkinsï¼ˆå®‰è£…çš„æ˜¯æœ€æ–°çš„LTSç‰ˆæœ¬ï¼‰</span><span class="token punctuation">[</span>root@qfedu.com ~<span class="token punctuation">]</span><span class="token comment"># rpm -ql jenkins   # æŸ¥çœ‹yuméƒ½å®‰è£…äº†å“ªäº›ä¸œè¥¿</span>/etc/init.d/jenkins/etc/logrotate.d/jenkins/etc/sysconfig/jenkins/usr/lib/jenkins/usr/lib/jenkins/jenkins.war/usr/sbin/rcjenkins/var/cache/jenkins/var/lib/jenkins/var/log/jenkins<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h4 id="2ã€é…ç½®æ–‡ä»¶"><a href="#2ã€é…ç½®æ–‡ä»¶" class="headerlink" title="2ã€é…ç½®æ–‡ä»¶"></a>2ã€é…ç½®æ–‡ä»¶</h4><h5 id="1ã€æŸ¥è¯¢-yum-ä¸‹è½½-Jenkins-å®‰è£…çš„æ–‡ä»¶"><a href="#1ã€æŸ¥è¯¢-yum-ä¸‹è½½-Jenkins-å®‰è£…çš„æ–‡ä»¶" class="headerlink" title="1ã€æŸ¥è¯¢ yum ä¸‹è½½ Jenkins å®‰è£…çš„æ–‡ä»¶"></a>1ã€æŸ¥è¯¢ yum ä¸‹è½½ Jenkins å®‰è£…çš„æ–‡ä»¶</h5><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token punctuation">[</span>root@qfedu.com ~<span class="token punctuation">]</span><span class="token comment"># rpm -ql jenkins</span>/etc/init.d/jenkins         <span class="token comment"># å¯åŠ¨æ–‡ä»¶</span>/etc/logrotate.d/jenkins    <span class="token comment"># æ—¥å¿—åˆ†å‰²é…ç½®æ–‡ä»¶</span>/etc/sysconfig/jenkins      <span class="token comment"># jenkinsä¸»é…ç½®æ–‡ä»¶</span>/usr/lib/jenkins            <span class="token comment"># å­˜æ”¾waråŒ…ç›®å½•</span>/usr/lib/jenkins/jenkins.war   <span class="token comment"># war åŒ… </span>/usr/sbin/rcjenkins         <span class="token comment"># å‘½ä»¤</span>/var/cache/jenkins          <span class="token comment"># waråŒ…è§£å‹ç›®å½• jenkinsç½‘é¡µä»£ç ç›®å½•</span>/var/lib/jenkins            <span class="token comment"># jenkins å·¥ä½œç›®å½•</span>/var/log/jenkins            <span class="token comment"># æ—¥å¿—</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h5 id="2ã€ä¿®æ”¹é…ç½®æ–‡ä»¶"><a href="#2ã€ä¿®æ”¹é…ç½®æ–‡ä»¶" class="headerlink" title="2ã€ä¿®æ”¹é…ç½®æ–‡ä»¶"></a>2ã€ä¿®æ”¹é…ç½®æ–‡ä»¶</h5><p><strong>é…ç½®æ–‡ä»¶è¯´æ˜</strong>ï¼š</p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token punctuation">[</span>root@qfedu.com ~<span class="token punctuation">]</span><span class="token comment"># grep "^[a-Z]" /etc/sysconfig/jenkins</span><span class="token assign-left variable">JENKINS_HOME</span><span class="token operator">=</span><span class="token string">"/var/lib/jenkins"</span>    <span class="token comment"># jenkinså·¥ä½œç›®å½•</span><span class="token assign-left variable">JENKINS_JAVA_CMD</span><span class="token operator">=</span><span class="token string">""</span><span class="token assign-left variable">JENKINS_USER</span><span class="token operator">=</span><span class="token string">"jenkins"</span>             <span class="token comment"># jenkinxå¯åŠ¨ç”¨æˆ·</span><span class="token assign-left variable">JENKINS_JAVA_OPTIONS</span><span class="token operator">=</span><span class="token string">"-Djava.awt.headless=true"</span><span class="token assign-left variable">JENKINS_PORT</span><span class="token operator">=</span><span class="token string">"8080"</span>                <span class="token comment"># ç«¯å£</span><span class="token assign-left variable">JENKINS_LISTEN_ADDRESS</span><span class="token operator">=</span><span class="token string">""</span><span class="token assign-left variable">JENKINS_HTTPS_PORT</span><span class="token operator">=</span><span class="token string">""</span><span class="token assign-left variable">JENKINS_HTTPS_KEYSTORE</span><span class="token operator">=</span><span class="token string">""</span><span class="token assign-left variable">JENKINS_HTTPS_KEYSTORE_PASSWORD</span><span class="token operator">=</span><span class="token string">""</span><span class="token assign-left variable">JENKINS_HTTPS_LISTEN_ADDRESS</span><span class="token operator">=</span><span class="token string">""</span><span class="token assign-left variable">JENKINS_DEBUG_LEVEL</span><span class="token operator">=</span><span class="token string">"5"</span><span class="token assign-left variable">JENKINS_ENABLE_ACCESS_LOG</span><span class="token operator">=</span><span class="token string">"no"</span><span class="token assign-left variable">JENKINS_HANDLER_MAX</span><span class="token operator">=</span><span class="token string">"100"</span>          <span class="token comment"># æœ€å¤§è¿æ¥</span><span class="token assign-left variable">JENKINS_HANDLER_IDLE</span><span class="token operator">=</span><span class="token string">"20"</span><span class="token assign-left variable">JENKINS_ARGS</span><span class="token operator">=</span><span class="token string">""</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h5 id="3ã€å¯åŠ¨-jenkins"><a href="#3ã€å¯åŠ¨-jenkins" class="headerlink" title="3ã€å¯åŠ¨ jenkins"></a>3ã€å¯åŠ¨ jenkins</h5><ul><li><p>é¦–å…ˆéœ€è¦ä¿®æ”¹ä¸€ä¸‹å¯åŠ¨è„šæœ¬ï¼Œæ–‡ä»¶åœ¨&#x2F;etc&#x2F;init.d&#x2F;jenkins</p></li><li><p>å› ä¸ºjenkinsçš„å¯åŠ¨è„šæœ¬é»˜è®¤javaè·¯å¾„ä¸ºï¼š&#x2F;usr&#x2F;bin&#x2F;java</p></li><li><p>ä½†æ˜¯æˆ‘ä»¬æ–°å®‰è£…çš„javaè·¯å¾„å¹¶ä¸æ˜¯åœ¨è¿™ä¸ªï¼Œæ‰€ä»¥æˆ‘ä»¬éœ€è¦æ–°æ·»åŠ è·¯å¾„ã€‚å¦‚å›¾ä¸‹æ‰€ç¤ºï¼š</p></li><li><p>æ–°è·¯å¾„åœ°å€ä¸ºï¼š&#x2F;usr&#x2F;local&#x2F;jdk1.8&#x2F;bin&#x2F;java</p></li></ul><p><img src="/1235834-20180831163720584-519105319.png" alt="img"></p><p>æ¥ä¸‹æ¥å¯åŠ¨ï¼š</p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token punctuation">[</span>root@qfedu.com ~<span class="token punctuation">]</span><span class="token comment"># systemctl start jenkins</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><h5 id="3ã€éªŒè¯å®‰è£…"><a href="#3ã€éªŒè¯å®‰è£…" class="headerlink" title="3ã€éªŒè¯å®‰è£…"></a>3ã€éªŒè¯å®‰è£…</h5><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token punctuation">[</span>root@qfedu.com ~<span class="token punctuation">]</span><span class="token comment"># ps -ef|grep jenkins</span>jenkins   <span class="token number">16037</span>      <span class="token number">1</span>  <span class="token number">1</span> <span class="token number">16</span>:20 ?        00:00:13 /usr/local/jdk1.8/bin/java <span class="token parameter variable">-Dcom.sun.akuma.Daemon</span><span class="token operator">=</span>daemonized <span class="token parameter variable">-Djava.awt.headless</span><span class="token operator">=</span>true <span class="token parameter variable">-DJENKINS_HOME</span><span class="token operator">=</span>/var/lib/jenkins <span class="token parameter variable">-jar</span> /usr/lib/jenkins/jenkins.war <span class="token parameter variable">--logfile</span><span class="token operator">=</span>/var/log/jenkins/jenkins.log <span class="token parameter variable">--webroot</span><span class="token operator">=</span>/var/cache/jenkins/war <span class="token parameter variable">--daemon</span> <span class="token parameter variable">--httpPort</span><span class="token operator">=</span><span class="token number">8080</span> <span class="token parameter variable">--debug</span><span class="token operator">=</span><span class="token number">5</span> <span class="token parameter variable">--handlerCountMax</span><span class="token operator">=</span><span class="token number">100</span> <span class="token parameter variable">--handlerCountMaxIdle</span><span class="token operator">=</span><span class="token number">20</span>root      <span class="token number">16107</span>   <span class="token number">1215</span>  <span class="token number">0</span> <span class="token number">16</span>:39 pts/1    00:00:00 <span class="token function">grep</span> <span class="token parameter variable">--color</span><span class="token operator">=</span>auto jenkins<span class="token punctuation">[</span>root@qfedu.com ~<span class="token punctuation">]</span><span class="token comment"># netstat -lnutp|grep jenkins</span><span class="token punctuation">[</span>root@qfedu.com ~<span class="token punctuation">]</span><span class="token comment"># netstat -lnutp|grep 8080</span>tcp6       <span class="token number">0</span>      <span class="token number">0</span> :::8080                 :::*                    LISTEN      <span class="token number">16037</span>/java<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h4 id="3ã€jenkinsé…ç½®ï¼ˆwebé¡µé¢ï¼‰"><a href="#3ã€jenkinsé…ç½®ï¼ˆwebé¡µé¢ï¼‰" class="headerlink" title="3ã€jenkinsé…ç½®ï¼ˆwebé¡µé¢ï¼‰"></a>3ã€jenkinsé…ç½®ï¼ˆwebé¡µé¢ï¼‰</h4><h5 id="1ã€ç®¡ç†å‘˜å¯†ç è·å–"><a href="#1ã€ç®¡ç†å‘˜å¯†ç è·å–" class="headerlink" title="1ã€ç®¡ç†å‘˜å¯†ç è·å–"></a>1ã€ç®¡ç†å‘˜å¯†ç è·å–</h5><p><img src="/1235834-20180831164228925-1838027306.png" alt="img"></p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token punctuation">[</span>root@qfedu.com ~<span class="token punctuation">]</span><span class="token comment"># cat /var/lib/jenkins/secrets/initialAdminPassword</span>5d3f57bea6e546139fc48ea28f9d5ae5<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre><h5 id="2ã€å®‰è£…æ’ä»¶-ï¼ˆé€‰æ‹©åœ¨çº¿å®‰è£…ï¼‰"><a href="#2ã€å®‰è£…æ’ä»¶-ï¼ˆé€‰æ‹©åœ¨çº¿å®‰è£…ï¼‰" class="headerlink" title="2ã€å®‰è£…æ’ä»¶ ï¼ˆé€‰æ‹©åœ¨çº¿å®‰è£…ï¼‰"></a>2ã€å®‰è£…æ’ä»¶ ï¼ˆé€‰æ‹©åœ¨çº¿å®‰è£…ï¼‰</h5><p><img src="/1235834-20180831164323740-27120837.png" alt="img"></p><p>å‡ºç°ç¦»çº¿å®‰è£…è§£å†³æ–¹æ³•ï¼š</p><h6 id="1ã€ä¿®æ”¹-x2F-var-x2F-lib-x2F-jenkins-x2F-updates-x2F-default-json"><a href="#1ã€ä¿®æ”¹-x2F-var-x2F-lib-x2F-jenkins-x2F-updates-x2F-default-json" class="headerlink" title="1ã€ä¿®æ”¹ &#x2F;var&#x2F;lib&#x2F;jenkins&#x2F;updates&#x2F;default.json"></a>1ã€ä¿®æ”¹ &#x2F;var&#x2F;lib&#x2F;jenkins&#x2F;updates&#x2F;default.json</h6><p>jenkins åœ¨ä¸‹è½½æ’ä»¶ä¹‹å‰ä¼šå…ˆæ£€æŸ¥ç½‘ç»œè¿æ¥ï¼Œå…¶ä¼šè¯»å–è¿™ä¸ªæ–‡ä»¶ä¸­çš„ç½‘å€ã€‚é»˜è®¤æ˜¯è®¿é—®è°·æ­Œï¼Œè‚¯å®šç›‘æµ‹å¤±è´¥ï¼Œæ‰€ä»¥å°†å›¾ä¸‹çš„googleæ”¹ä¸º<a href="http://www.baidu.com/">www.baidu.com</a>å³å¯ï¼Œæ›´æ”¹å®Œé‡å¯æœåŠ¡ã€‚</p><p><img src="/1235834-20180831164343689-623098101.png" alt="img"></p><h6 id="2ã€-ä¿®æ”¹-x2F-var-x2F-lib-x2F-jenkins-x2F-hudson-model-UpdateCenter-xml"><a href="#2ã€-ä¿®æ”¹-x2F-var-x2F-lib-x2F-jenkins-x2F-hudson-model-UpdateCenter-xml" class="headerlink" title="2ã€ ä¿®æ”¹&#x2F;var&#x2F;lib&#x2F;jenkins&#x2F;hudson.model.UpdateCenter.xml"></a>2ã€ ä¿®æ”¹&#x2F;var&#x2F;lib&#x2F;jenkins&#x2F;hudson.model.UpdateCenter.xml</h6><p>è¯¥æ–‡ä»¶ä¸ºjenkinsä¸‹è½½æ’ä»¶çš„æºåœ°å€ï¼Œæ”¹åœ°å€é»˜è®¤jenkinsé»˜è®¤ä¸ºï¼š<a href="https://updates.jenkins.io/update-center.json%EF%BC%8C%E5%B0%B1%E6%98%AF%E5%9B%A0%E4%B8%BAhttps%E7%9A%84%E9%97%AE%E9%A2%98%EF%BC%8C%E6%AD%A4%E5%A4%84%E6%88%91%E4%BB%AC%E5%B0%86%E5%85%B6%E6%94%B9%E4%B8%BAhttp%E5%8D%B3%E5%8F%AF%EF%BC%8C%E4%B9%8B%E5%90%8E%E9%87%8D%E5%90%AFjenkins%E6%9C%8D%E5%8A%A1%E5%8D%B3%E5%8F%AF%E3%80%82">https://updates.jenkins.io/update-center.jsonï¼Œå°±æ˜¯å› ä¸ºhttpsçš„é—®é¢˜ï¼Œæ­¤å¤„æˆ‘ä»¬å°†å…¶æ”¹ä¸ºhttpå³å¯ï¼Œä¹‹åé‡å¯jenkinsæœåŠ¡å³å¯ã€‚</a></p><p>å…¶ä»–å›½å†…å¤‡ç”¨åœ°å€ï¼ˆä¹Ÿå¯ä»¥é€‰æ‹©ä½¿ç”¨ï¼‰ï¼š</p><p><a href="https://mirrors.tuna.tsinghua.edu.cn/jenkins/updates/update-center.json">https://mirrors.tuna.tsinghua.edu.cn/jenkins/updates/update-center.json</a></p><p><a href="http://mirror.esuni.jp/jenkins/updates/update-center.json">http://mirror.esuni.jp/jenkins/updates/update-center.json</a></p><p>åœ¨ä¿®å¤å®Œä¹‹åï¼Œæˆ‘ä»¬å‘ç°ç¦»çº¿é—®é¢˜å·²ç»è§£å†³</p><p><img src="/1235834-20180831164430177-1121878419.png" alt="img"></p><p>é€‰æ‹©å®‰è£…æ¨èçš„æ’ä»¶ï¼š</p><p><img src="/1235834-20180831164621224-1822838670.png" alt="img"></p><h5 id="3ã€åˆ›å»ºç¬¬ä¸€ä¸ªç®¡ç†å‘˜ç”¨æˆ·"><a href="#3ã€åˆ›å»ºç¬¬ä¸€ä¸ªç®¡ç†å‘˜ç”¨æˆ·" class="headerlink" title="3ã€åˆ›å»ºç¬¬ä¸€ä¸ªç®¡ç†å‘˜ç”¨æˆ·"></a>3ã€åˆ›å»ºç¬¬ä¸€ä¸ªç®¡ç†å‘˜ç”¨æˆ·</h5><p><img src="/image-20200511143418502.png" alt="image-20200511143418502"></p><h5 id="4ã€url-é…ç½®"><a href="#4ã€url-é…ç½®" class="headerlink" title="4ã€url é…ç½®"></a>4ã€url é…ç½®</h5><p>ä¹‹å‰ç‰ˆæœ¬æ²¡æœ‰è¿™ä¸ªé€‰é¡¹ï¼Œè¿™é‡Œé»˜è®¤å³å¯:</p><p><img src="/image-20200511144405337.png" alt="image-20200511144405337"></p><h5 id="5ã€å®‰è£…å®Œæˆ"><a href="#5ã€å®‰è£…å®Œæˆ" class="headerlink" title="5ã€å®‰è£…å®Œæˆ"></a>5ã€å®‰è£…å®Œæˆ</h5><p>å‡ºç°å¦‚ä¸‹é¡µé¢æ—¶ï¼Œè¡¨ç¤ºå®‰è£…å®Œæˆ</p><p><img src="/image-20200511144436540.png" alt="image-20200511144436540"></p><p><img src="/image-20200511144551020.png" alt="image-20200511144551020"></p><p>è¿™é‡Œé¢æœ‰å¾ˆå¤šé…ç½®ï¼Œä¸‹é¢æˆ‘ä»¬åªä»‹ç»æˆ‘ä»¬è¦ç”¨åˆ°çš„è¦ä¿®æ”¹çš„é…ç½®ï¼ˆä¹‹åæ¡ˆä¾‹ä¼šç”¨åˆ°çš„ï¼‰ã€‚æˆ‘ä»¬ä¸éœ€è¦å…¨éƒ¨éƒ½é…ç½®ï¼Œç­‰éœ€è¦ä»€ä¹ˆçš„æ—¶å€™å†å»ç ”ç©¶ä¸€ä¸‹å³å¯ã€‚</p><h5 id="6ã€é…ç½®-jdkã€gitã€maven"><a href="#6ã€é…ç½®-jdkã€gitã€maven" class="headerlink" title="6ã€é…ç½® jdkã€gitã€maven"></a>6ã€é…ç½® jdkã€gitã€maven</h5><p>ç³»ç»Ÿç®¡ç†-&gt;å…¨å±€å·¥å…·é…ç½®</p><p>jdkï¼šå¯ä»¥è‡ªåŠ¨å®‰è£…ï¼Œä½†æ˜¯æˆ‘ä»¬å·²ç»å®‰è£…äº†ï¼Œè¿™é‡Œå†™å…¥æˆ‘ä»¬jdkçš„è·¯å¾„å³å¯</p><p><img src="/1235834-20180831165049786-1605588288.png" alt="img"></p><p>git:</p><p><img src="/1235834-20180831165130860-316104310.png" alt="img"></p><p>mavenï¼š</p><p><img src="/1235834-20180831165146493-1904811526.png" alt="img"></p><h5 id="7ã€jenkins-ä¸‹è½½æ’ä»¶å¤±è´¥å¤„ç†åŠæ³•"><a href="#7ã€jenkins-ä¸‹è½½æ’ä»¶å¤±è´¥å¤„ç†åŠæ³•" class="headerlink" title="7ã€jenkins ä¸‹è½½æ’ä»¶å¤±è´¥å¤„ç†åŠæ³•"></a>7ã€jenkins ä¸‹è½½æ’ä»¶å¤±è´¥å¤„ç†åŠæ³•</h5><p>jenkins ä¸‹è½½æ’ä»¶å¤±è´¥,æç¤ºï¼š</p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">java.io.IOException: Downloaded <span class="token function">file</span> /app/jenkins_home/plugins/jacoco.jpi.tmp does not match expected SHA-1, expected <span class="token string">'CtK02wHdFOxTutqhUQzmue6uvpg='</span>, actual <span class="token string">'YGO05utKyaaFzpGCgCE95GS0WsU='</span>at hudson.model.UpdateCenter.verifyChecksums<span class="token punctuation">(</span>UpdateCenter.java:1783<span class="token punctuation">)</span>at hudson.model.UpdateCenter.access<span class="token variable">$1100</span><span class="token punctuation">(</span>UpdateCenter.java:147<span class="token punctuation">)</span>at hudson.model.UpdateCenter<span class="token variable">$InstallationJob</span>.replace<span class="token punctuation">(</span>UpdateCenter.java:1934<span class="token punctuation">)</span>at hudson.model.UpdateCenter<span class="token variable">$UpdateCenterConfiguration</span>.install<span class="token punctuation">(</span>UpdateCenter.java:1178<span class="token punctuation">)</span>at hudson.model.UpdateCenter<span class="token variable">$DownloadJob</span>._run<span class="token punctuation">(</span>UpdateCenter.java:1653<span class="token punctuation">)</span>at hudson.model.UpdateCenter<span class="token variable">$InstallationJob</span>._run<span class="token punctuation">(</span>UpdateCenter.java:1848<span class="token punctuation">)</span>at hudson.model.UpdateCenter<span class="token variable">$DownloadJob</span>.run<span class="token punctuation">(</span>UpdateCenter.java:1624<span class="token punctuation">)</span>at java.util.concurrent.Executors<span class="token variable">$RunnableAdapter</span>.call<span class="token punctuation">(</span>Executors.java:511<span class="token punctuation">)</span>at java.util.concurrent.FutureTask.run<span class="token punctuation">(</span>FutureTask.java:266<span class="token punctuation">)</span>at hudson.remoting.AtmostOneThreadExecutor<span class="token variable">$Worker</span>.run<span class="token punctuation">(</span>AtmostOneThreadExecutor.java:110<span class="token punctuation">)</span>at java.lang.Thread.run<span class="token punctuation">(</span>Thread.java:745<span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>ä¸­å›½æºçš„é—®é¢˜ã€‚éœ€è¦æ¢ä¸ªæºå°±å¯ï¼Œæ¢æºæ–¹æ³•ï¼š</p><p>jenkins-&gt;ç³»ç»Ÿç®¡ç†-&gt;ç®¡ç†æ’ä»¶-&gt;é«˜çº§<br>é€‰æ‹©å‡çº§ç«™ç‚¹</p><p>æŠŠï¼š<a href="http://updates.jenkins-ci.org/update-center.json">http://updates.jenkins-ci.org/update-center.json</a></p><p>æ¢æˆï¼š<a href="http://mirror.esuni.jp/jenkins/updates/update-center.json">http://mirror.esuni.jp/jenkins/updates/update-center.json</a></p><p>é•œåƒåœ°å€æŸ¥è¯¢ï¼š</p><p><a href="http://mirrors.jenkins-ci.org/status.html">http://mirrors.jenkins-ci.org/status.html</a> </p><h2 id="å››ã€ä½¿ç”¨Jenkins"><a href="#å››ã€ä½¿ç”¨Jenkins" class="headerlink" title="å››ã€ä½¿ç”¨Jenkins"></a>å››ã€ä½¿ç”¨Jenkins</h2><h3 id="1ã€Jenkins-ç”¨æˆ·æƒé™ç®¡ç†"><a href="#1ã€Jenkins-ç”¨æˆ·æƒé™ç®¡ç†" class="headerlink" title="1ã€Jenkins ç”¨æˆ·æƒé™ç®¡ç†"></a>1ã€Jenkins ç”¨æˆ·æƒé™ç®¡ç†</h3><h4 id="1ã€-ç”¨æˆ·ç®¡ç†èƒŒæ™¯"><a href="#1ã€-ç”¨æˆ·ç®¡ç†èƒŒæ™¯" class="headerlink" title="1ã€ ç”¨æˆ·ç®¡ç†èƒŒæ™¯"></a>1ã€ ç”¨æˆ·ç®¡ç†èƒŒæ™¯</h4><p>é’ˆå¯¹å¼€å‘ã€è¿ç»´ã€æµ‹è¯•é’ˆå¯¹ä¸åŒè§’è‰²è¿›è¡Œä¸åŒæƒé™åˆ’åˆ†ï¼Œ</p><p>åŸºäºæ’ä»¶ï¼š Role-based Authorization Strategy ï¼ŒAuthorize Project æ¥å®ç°ã€‚</p><h4 id="2ã€-å®‰è£…ç”¨æˆ·ç®¡ç†æ’ä»¶"><a href="#2ã€-å®‰è£…ç”¨æˆ·ç®¡ç†æ’ä»¶" class="headerlink" title="2ã€ å®‰è£…ç”¨æˆ·ç®¡ç†æ’ä»¶"></a>2ã€ å®‰è£…ç”¨æˆ·ç®¡ç†æ’ä»¶</h4><p>å®‰è£…è¯¥æ’ä»¶ï¼š</p><p>ç³»ç»Ÿç®¡ç†-&gt;ç®¡ç†æ’ä»¶-å¯é€‰æ’ä»¶-&gt;æœç´¢è¯¥æ’ä»¶é€‰ä¸­ç›´æ¥å®‰è£…å³å¯ã€‚</p><p> <img src="/1235834-20180831165508676-16362769.png" alt="img"></p><h4 id="3ã€-å¼€å¯è¯¥æ’ä»¶åŠŸèƒ½"><a href="#3ã€-å¼€å¯è¯¥æ’ä»¶åŠŸèƒ½" class="headerlink" title="3ã€ å¼€å¯è¯¥æ’ä»¶åŠŸèƒ½"></a>3ã€ å¼€å¯è¯¥æ’ä»¶åŠŸèƒ½</h4><p>ç³»ç»Ÿç®¡ç†-&gt;å…¨å±€å®‰å…¨è®¾ç½®-æˆæƒç­–ç•¥-&gt;é€‰ä¸­è¯¥æ’ä»¶åŠŸèƒ½å³å¯-&gt;ä¿å­˜</p><p> <img src="/1235834-20180831165538054-922830046.png" alt="img"></p><h4 id="4ã€-éªŒè¯ç”¨æˆ·ç®¡ç†"><a href="#4ã€-éªŒè¯ç”¨æˆ·ç®¡ç†" class="headerlink" title="4ã€ éªŒè¯ç”¨æˆ·ç®¡ç†"></a>4ã€ éªŒè¯ç”¨æˆ·ç®¡ç†</h4><p>å…³é—­ç”¨æˆ·ç®¡ç†åŠŸèƒ½æ¥è¿›è¡Œå®è·µæµ‹è¯•</p><h5 id="1ã€ç­–ç•¥æ”¹å›åŸæ¥çš„ï¼ˆå…¨å±€å®‰å…¨é…ç½®ï¼‰"><a href="#1ã€ç­–ç•¥æ”¹å›åŸæ¥çš„ï¼ˆå…¨å±€å®‰å…¨é…ç½®ï¼‰" class="headerlink" title="1ã€ç­–ç•¥æ”¹å›åŸæ¥çš„ï¼ˆå…¨å±€å®‰å…¨é…ç½®ï¼‰"></a>1ã€ç­–ç•¥æ”¹å›åŸæ¥çš„ï¼ˆå…¨å±€å®‰å…¨é…ç½®ï¼‰</h5><p><img src="/1235834-20180831165635226-1917360681.png" alt="img"></p><h5 id="2ã€å¼€å¯å…è®¸ç”¨æˆ·æ³¨å†Œï¼ˆå…¨å±€å®‰å…¨é…ç½®ï¼‰"><a href="#2ã€å¼€å¯å…è®¸ç”¨æˆ·æ³¨å†Œï¼ˆå…¨å±€å®‰å…¨é…ç½®ï¼‰" class="headerlink" title="2ã€å¼€å¯å…è®¸ç”¨æˆ·æ³¨å†Œï¼ˆå…¨å±€å®‰å…¨é…ç½®ï¼‰"></a>2ã€å¼€å¯å…è®¸ç”¨æˆ·æ³¨å†Œï¼ˆå…¨å±€å®‰å…¨é…ç½®ï¼‰</h5><p><img src="/1235834-20180831165700914-329576958.png" alt="img"></p><h5 id="3ã€æ³¨å†Œä¸€ä¸ªæ–°ç”¨æˆ·"><a href="#3ã€æ³¨å†Œä¸€ä¸ªæ–°ç”¨æˆ·" class="headerlink" title="3ã€æ³¨å†Œä¸€ä¸ªæ–°ç”¨æˆ·"></a>3ã€æ³¨å†Œä¸€ä¸ªæ–°ç”¨æˆ·</h5><p><img src="/1235834-20180831165719453-1979689954.png" alt="img"></p><h5 id="4ã€ç™»å½•ä¹‹åï¼Œå…¶é»˜è®¤å°±æ˜¯ç®¡ç†å‘˜ç”¨æˆ·ï¼Œå¯ä»¥è¿›è¡Œä»»ä½•æ“ä½œ"><a href="#4ã€ç™»å½•ä¹‹åï¼Œå…¶é»˜è®¤å°±æ˜¯ç®¡ç†å‘˜ç”¨æˆ·ï¼Œå¯ä»¥è¿›è¡Œä»»ä½•æ“ä½œ" class="headerlink" title="4ã€ç™»å½•ä¹‹åï¼Œå…¶é»˜è®¤å°±æ˜¯ç®¡ç†å‘˜ç”¨æˆ·ï¼Œå¯ä»¥è¿›è¡Œä»»ä½•æ“ä½œ"></a>4ã€ç™»å½•ä¹‹åï¼Œå…¶é»˜è®¤å°±æ˜¯ç®¡ç†å‘˜ç”¨æˆ·ï¼Œå¯ä»¥è¿›è¡Œä»»ä½•æ“ä½œ</h5><p><img src="/1235834-20180831165742247-244014865.png" alt="img"></p><h5 id="5ã€å¼€å¯-Role-Based-Strategy"><a href="#5ã€å¼€å¯-Role-Based-Strategy" class="headerlink" title="5ã€å¼€å¯ Role-Based Strategy"></a>5ã€å¼€å¯ Role-Based Strategy</h5><h5 id="6ã€é‡æ–°ç™»å½•æ–°åˆ›å»º-test1-ç”¨æˆ·ï¼Œæ˜¾ç¤ºå·²ç»æ²¡æœ‰ä»»ä½•æƒé™äº†"><a href="#6ã€é‡æ–°ç™»å½•æ–°åˆ›å»º-test1-ç”¨æˆ·ï¼Œæ˜¾ç¤ºå·²ç»æ²¡æœ‰ä»»ä½•æƒé™äº†" class="headerlink" title="6ã€é‡æ–°ç™»å½•æ–°åˆ›å»º test1 ç”¨æˆ·ï¼Œæ˜¾ç¤ºå·²ç»æ²¡æœ‰ä»»ä½•æƒé™äº†"></a>6ã€é‡æ–°ç™»å½•æ–°åˆ›å»º test1 ç”¨æˆ·ï¼Œæ˜¾ç¤ºå·²ç»æ²¡æœ‰ä»»ä½•æƒé™äº†</h5><p><img src="/1235834-20180831165853876-101591569.png" alt="img"></p><h4 id="5ã€-æƒé™åˆ’åˆ†"><a href="#5ã€-æƒé™åˆ’åˆ†" class="headerlink" title="5ã€ æƒé™åˆ’åˆ†"></a>5ã€ æƒé™åˆ’åˆ†</h4><p>å®‰è£… Role-Based Strategy æ’ä»¶åï¼Œ<strong>ç³»ç»Ÿç®¡ç†</strong> ä¸­å¤šäº†å¦‚å›¾ä¸‹æ‰€ç¤ºçš„ä¸€ä¸ªåŠŸèƒ½ï¼Œç”¨æˆ·æƒé™çš„åˆ’åˆ†å°±æ˜¯é ä»–æ¥åšçš„ã€‚</p><p><img src="/1235834-20180831165923312-691685234.png" alt="img"></p><p><img src="/1235834-20180831165930038-36894234.png" alt="img"></p><h5 id="1ã€Manage-Rolesï¼ˆç®¡ç†è§’è‰²ï¼‰"><a href="#1ã€Manage-Rolesï¼ˆç®¡ç†è§’è‰²ï¼‰" class="headerlink" title="1ã€Manage Rolesï¼ˆç®¡ç†è§’è‰²ï¼‰"></a>1ã€Manage Rolesï¼ˆç®¡ç†è§’è‰²ï¼‰</h5><ul><li>Manage Rolesï¼šç®¡ç†è§’è‰²ï¼Œç›¸å½“äºé’ˆå¯¹è§’è‰²èµ‹äºˆä¸åŒæƒé™ï¼Œç„¶ååœ¨å°†è¯¥è§’è‰²åˆ†é…ç»™ç”¨æˆ·ã€‚è§’è‰²å°±ç›¸å½“äºä¸€ä¸ªç»„ã€‚å…¶é‡Œé¢åˆæœ‰Global rolesï¼ˆå…¨å±€ï¼‰ã€Project rolesï¼ˆé¡¹ç›®ï¼‰ã€Slave rolesï¼ˆï¼‰ï¼Œæ¥è¿›è¡Œä¸åŒåˆ’åˆ†ã€‚</li></ul><p>é»˜è®¤å¦‚å›¾ä¸‹æ‰€ç¤ºï¼š</p><p> <img src="/1235834-20180831170007658-2106612170.png" alt="img"></p><h6 id="1ã€Global-roles"><a href="#1ã€Global-roles" class="headerlink" title="1ã€Global roles"></a>1ã€Global roles</h6><p>é»˜è®¤æ˜¯æœ‰ä¸€ä¸ªadminç”¨æˆ·çš„ï¼Œæ˜¯æ‰€æœ‰æƒé™éƒ½æœ‰çš„ï¼Œæ‰€æœ‰æƒé™éƒ½æ˜¯å‹¾é€‰äº†çš„ã€‚</p><p>æ¥ä¸‹æ¥æˆ‘ä»¬æ¥æ·»åŠ ä¸€ä¸ªè§’è‰²ï¼šuser</p><p><img src="/1235834-20180831170026530-949346396.png" alt="img"></p><p>ç»™å…¶ä¸€ä¸ªè¯»çš„æƒé™ã€‚</p><h6 id="2ã€Project-roles"><a href="#2ã€Project-roles" class="headerlink" title="2ã€Project roles"></a>2ã€Project roles</h6><ul><li><p>roles to addï¼šè¡¨ç¤ºé¡¹ç›®è§’è‰²</p></li><li><p>Patternï¼šæ˜¯ç”¨æ¥åšæ­£åˆ™åŒ¹é…çš„ï¼ˆåŒ¹é…çš„å†…å®¹æ˜¯Job(é¡¹ç›®å)ï¼‰ï¼Œæ¯”å¦‚è¯´æ ¹æ®æ­£åˆ™åŒ¹é…åˆ°çš„é¡¹ç›®é¡¹ç›®è§’è‰²å°±éƒ½æœ‰æƒé™ï¼›</p></li></ul><p>æ¥ä¸‹æ¥æ–°å»ºä¸€ä¸ª ItemA é¡¹ç›®è§’è‰²ï¼Œæ”¹é¡¹ç›®è§’è‰²ä¸€èˆ¬ç»™å…¶æ„å»ºã€å–æ¶ˆã€è¯»å–ã€è¯»å–ç©ºé—´æƒé™ï¼Œä¸€èˆ¬é…ç½®è¿™4ä¸ªå³å¯</p><p><img src="/1235834-20180831170046126-1725883669.png" alt="img"></p><p>è¿˜å¯ä»¥åœ¨æ–°å»ºä¸€ä¸ª ItemB é¡¹ç›®è§’è‰²ï¼š</p><p><img src="/1235834-20180831170101681-1099638023.png" alt="img"></p><ul><li><p>Slave rolesï¼ˆå¥´éš¶è§’è‰²ï¼‰ï¼šèŠ‚ç‚¹ç›¸å…³çš„æƒé™</p></li><li><p>roles to addï¼šè¡¨ç¤ºé¡¹ç›®è§’è‰²</p></li><li><p>Patternï¼šæ˜¯ç”¨æ¥åšæ­£åˆ™åŒ¹é…çš„ï¼ˆåŒ¹é…çš„å†…å®¹æ˜¯èŠ‚ç‚¹(slavejèŠ‚ç‚¹ï¼‰ï¼‰ï¼Œæ¯”å¦‚è¯´æ ¹æ®æ­£åˆ™åŒ¹é…åˆ°çš„é¡¹ç›®é¡¹ç›®è§’è‰²å°±éƒ½æœ‰æƒé™ï¼›</p></li></ul><p><img src="/360%E6%88%AA%E5%9B%BE168212206791118.png" alt="360æˆªå›¾168212206791118"></p><h5 id="2ã€Assigin-rolesï¼ˆåˆ†é…è§’è‰²ï¼‰"><a href="#2ã€Assigin-rolesï¼ˆåˆ†é…è§’è‰²ï¼‰" class="headerlink" title="2ã€Assigin rolesï¼ˆåˆ†é…è§’è‰²ï¼‰"></a>2ã€Assigin rolesï¼ˆåˆ†é…è§’è‰²ï¼‰</h5><h6 id="1ã€ç»™äºˆtest1ç”¨æˆ·åˆ†é…-user-è§’è‰²"><a href="#1ã€ç»™äºˆtest1ç”¨æˆ·åˆ†é…-user-è§’è‰²" class="headerlink" title="1ã€ç»™äºˆtest1ç”¨æˆ·åˆ†é… user è§’è‰²"></a>1ã€ç»™äºˆtest1ç”¨æˆ·åˆ†é… user è§’è‰²</h6><p>è¿™æ ·å…¶å°±æœ‰ manage roles ä¸­åˆšæ‰åˆ›å»ºçš„userè§’è‰²çš„æƒé™äº†ã€‚</p><p><img src="/1235834-20180831170141093-1106115356.png" alt="img"></p><p>æ­¤æ—¶å†å»çœ‹ test1ç”¨æˆ·ï¼Œå·²æœ‰æŸ¥çœ‹çš„æƒé™äº†</p><p><img src="/1235834-20180831171312583-2109653620.png" alt="img"></p><h6 id="2ã€é’ˆå¯¹æŒ‡å®šç”¨æˆ·åˆ†é…é¡¹ç›®è§’è‰²ï¼ˆä¸€èˆ¬æœ€å¸¸ç”¨çš„å°±æ˜¯é’ˆå¯¹ä¸åŒç”¨æˆ·è¿›è¡Œé¡¹ç›®è§’è‰²åˆ†é…ï¼‰"><a href="#2ã€é’ˆå¯¹æŒ‡å®šç”¨æˆ·åˆ†é…é¡¹ç›®è§’è‰²ï¼ˆä¸€èˆ¬æœ€å¸¸ç”¨çš„å°±æ˜¯é’ˆå¯¹ä¸åŒç”¨æˆ·è¿›è¡Œé¡¹ç›®è§’è‰²åˆ†é…ï¼‰" class="headerlink" title="2ã€é’ˆå¯¹æŒ‡å®šç”¨æˆ·åˆ†é…é¡¹ç›®è§’è‰²ï¼ˆä¸€èˆ¬æœ€å¸¸ç”¨çš„å°±æ˜¯é’ˆå¯¹ä¸åŒç”¨æˆ·è¿›è¡Œé¡¹ç›®è§’è‰²åˆ†é…ï¼‰"></a>2ã€é’ˆå¯¹æŒ‡å®šç”¨æˆ·åˆ†é…é¡¹ç›®è§’è‰²ï¼ˆä¸€èˆ¬æœ€å¸¸ç”¨çš„å°±æ˜¯é’ˆå¯¹ä¸åŒç”¨æˆ·è¿›è¡Œé¡¹ç›®è§’è‰²åˆ†é…ï¼‰</h6><p>æ¯”å¦‚å°†test1ç”¨æˆ·åˆ†é…æœ‰ ItemA é¡¹ç›®è§’è‰²ï¼Œè¿™æ ·å…¶å°±å¯ä»¥æœ‰åˆšæ‰æˆ‘ä»¬åˆ›å»ºçš„ ItemA é¡¹ç›®è§’è‰²æ­£åˆ™åŒ¹é…åˆ°çš„é¡¹ç›®çš„æƒé™äº†ã€‚</p><p><img src="/1235834-20180831171359961-22018225.png" alt="img"></p><p>test2 ä¹Ÿä¸ºå…¶åˆ†é…ä¸€ä¸ª ItemB é¡¹ç›®è§’è‰²</p><p><img src="/1235834-20180831171420831-1902633716.png" alt="img"></p><p>æ­¤æ—¶å¯ä»¥åœ¨ test1 ç”¨æˆ·è¿™é‡Œçœ‹åˆ° ItemA é¡¹ç›®è§’è‰²æ‰€åŒ¹é…åˆ°çš„é¡¹ç›® A-web1</p><p><img src="/1235834-20180831171437298-1904913991.png" alt="img"></p><p>æ–°å»ºä¸€ä¸ªB-web1é¡¹ç›®ï¼ŒåŒç† test2 ç”¨æˆ·è¿™é‡Œçœ‹åˆ°I temB é¡¹ç›®è§’è‰²æ‰€åŒ¹é…åˆ°çš„é¡¹ç›®B-web1</p><p><img src="/1235834-20180831171454823-363550384.png" alt="img"></p><p>ä¸ºäº†æ–¹ä¾¿é¡¹ç›®ç®¡ç†ï¼Œå¯ä»¥å¯¹ä¸åŒé¡¹ç›®è¿›è¡Œåˆ†ç±»ï¼ˆå€ŸåŠ©è§†å›¾ï¼‰ï¼š</p><p><img src="/1235834-20180831171509279-1030579839.png" alt="img"></p><p>åˆ†ç±»å®Œå¦‚å›¾ä¸‹æ‰€ç¤ºï¼š</p><p><img src="/1235834-20180831171525036-576038453.png" alt="img"></p><h3 id="2ã€Jenkins-å‚æ•°åŒ–æ„å»º"><a href="#2ã€Jenkins-å‚æ•°åŒ–æ„å»º" class="headerlink" title="2ã€Jenkins å‚æ•°åŒ–æ„å»º"></a>2ã€Jenkins å‚æ•°åŒ–æ„å»º</h3><h4 id="1ã€-å‚æ•°åŒ–æ„å»ºèƒŒæ™¯"><a href="#1ã€-å‚æ•°åŒ–æ„å»ºèƒŒæ™¯" class="headerlink" title="1ã€ å‚æ•°åŒ–æ„å»ºèƒŒæ™¯"></a>1ã€ å‚æ•°åŒ–æ„å»ºèƒŒæ™¯</h4><p> å¦‚æœåªæ˜¯ç®€å•çš„æ„å»ºï¼Œjenkinsè‡ªå·±é»˜è®¤çš„æ’ä»¶å¯ä»¥åšï¼Œä½†æ˜¯å¦‚æœæˆ‘ä»¬æƒ³è¦åœ¨æ„å»ºè¿‡ç¨‹ä¸­æœ‰æ›´å¤šåŠŸèƒ½ï¼Œæ¯”å¦‚è¯´ï¼šé€‰æ‹©æ€§æ„å»ºã€ä¼ å‚ã€é¡¹ç›®æŒ‡å®šå˜é‡ç­‰ç­‰å…¶ä»–åŠŸèƒ½ï¼ŒåŸºç¡€çš„å‚æ•°åŒ–æ„å»ºå¯ä»¥å®ç°ä¸€äº›ç®€å•åŠŸèƒ½ï¼Œä½†æ˜¯è¦æƒ³ä½¿ç”¨æ›´å¤šåŠŸèƒ½è¿™æ—¶å€™æˆ‘ä»¬å°±éœ€è¦å€ŸåŠ©å‚æ•°åŒ–æ„å»ºæ¥å®ç°äº¤äº’çš„åŠŸèƒ½ã€‚æ­¤å¤„æˆ‘ä»¬æ¥å€ŸåŠ©ä»¥ä¸‹æ’ä»¶æ¥è¿›è¡Œå®ç°ï¼š</p><ul><li><p>Extended Choice Parameterï¼ˆæ›´ä¸°å¯Œçš„å‚æ•°åŒ–æ„å»ºæ’ä»¶ï¼‰</p></li><li><p>Git Parameter</p></li></ul><h4 id="2ã€å®‰è£…æ’ä»¶"><a href="#2ã€å®‰è£…æ’ä»¶" class="headerlink" title="2ã€å®‰è£…æ’ä»¶"></a>2ã€å®‰è£…æ’ä»¶</h4><p>é¦–å…ˆè¿˜æ˜¯å®‰è£…è¯¥æ’ä»¶ï¼Œå»ç®¡ç†æ’ä»¶é‡Œé¢è¿›è¡Œå®‰è£… Extended Choice Parameter</p><p><img src="/1235834-20180831171721299-2027054343.png" alt="img"></p><h5 id="1ã€é¡¹ç›®é…ç½®"><a href="#1ã€é¡¹ç›®é…ç½®" class="headerlink" title="1ã€é¡¹ç›®é…ç½®"></a>1ã€é¡¹ç›®é…ç½®</h5><p><img src="/1235834-20180831171807151-657567536.png" alt="img"></p><h5 id="2ã€é€‰æ‹©å®‰è£…è¿‡çš„æ’ä»¶"><a href="#2ã€é€‰æ‹©å®‰è£…è¿‡çš„æ’ä»¶" class="headerlink" title="2ã€é€‰æ‹©å®‰è£…è¿‡çš„æ’ä»¶"></a>2ã€é€‰æ‹©å®‰è£…è¿‡çš„æ’ä»¶</h5><p><img src="/1235834-20180831171825735-1550501382.png" alt="img"></p><h5 id="3ã€è¿›è¡Œé…ç½®"><a href="#3ã€è¿›è¡Œé…ç½®" class="headerlink" title="3ã€è¿›è¡Œé…ç½®"></a>3ã€è¿›è¡Œé…ç½®</h5><p>â€‹                                                             <img src="/1235834-20180831171852747-2039805021.png" alt="img"></p><p>è¿™é‡Œè¿™ä¸ªbranch æˆ‘ä»¬å°±ç›¸å½“äºç»™å…¶å½“åšä¸€ä¸ªå˜é‡ï¼Œç„¶åæ¥ä¸ºå…¶è¿›è¡Œä¼ å‚ã€‚</p><p><img src="/1235834-20180831171908041-686186905.png" alt="img"></p><h5 id="4ã€æ„å»ºé€‰æ‹©æ‰§è¡Œshellè¿›è¡Œæµ‹è¯•"><a href="#4ã€æ„å»ºé€‰æ‹©æ‰§è¡Œshellè¿›è¡Œæµ‹è¯•" class="headerlink" title="4ã€æ„å»ºé€‰æ‹©æ‰§è¡Œshellè¿›è¡Œæµ‹è¯•"></a>4ã€æ„å»ºé€‰æ‹©æ‰§è¡Œshellè¿›è¡Œæµ‹è¯•</h5><p><img src="/1235834-20180831171925310-877234848.png" alt="img"></p><p><img src="/1235834-20180831171931759-1794610138.png" alt="img"></p><h5 id="5ã€å‚æ•°åŒ–é…ç½®å·²ç»ç”Ÿæ•ˆ"><a href="#5ã€å‚æ•°åŒ–é…ç½®å·²ç»ç”Ÿæ•ˆ" class="headerlink" title="5ã€å‚æ•°åŒ–é…ç½®å·²ç»ç”Ÿæ•ˆ"></a>5ã€å‚æ•°åŒ–é…ç½®å·²ç»ç”Ÿæ•ˆ</h5><p><img src="/1235834-20180831171946619-1779475535.png" alt="img"></p><h5 id="6ã€æ„å»º-test02"><a href="#6ã€æ„å»º-test02" class="headerlink" title="6ã€æ„å»º test02"></a>6ã€æ„å»º test02</h5><p>å¯ä»¥å‘ç°æ§åˆ¶å°çš„è¾“å‡ºä¹Ÿæ˜¯æˆåŠŸäº†çš„</p><p>![img](G:&#x2F;BaiduNetdiskDownload&#x2F;docker&#x2F;ç¬¬13å¥—ï¼š4å¤©æå®šGit+Jenkins+Harbor+Dockerå®ç°CICD&#x2F;CI CD è½¯ä»¶+ç¬”è®°+èµ„æ–™&#x2F;CI CD è½¯ä»¶+ç¬”è®°+èµ„æ–™&#x2F;ç¬¬3å¤©-Jenkinsè¯¦è§£&#x2F;assets&#x2F;1235834-20180831172008888-985342835.png)</p><p><img src="/image-20200823112054238.png" alt="image-20200823112054238"></p><h5 id="7ã€æ•°æ®æ¥æºé€‰æ‹©æ–‡ä»¶"><a href="#7ã€æ•°æ®æ¥æºé€‰æ‹©æ–‡ä»¶" class="headerlink" title="7ã€æ•°æ®æ¥æºé€‰æ‹©æ–‡ä»¶"></a>7ã€æ•°æ®æ¥æºé€‰æ‹©æ–‡ä»¶</h5><p>åœ¨jenkinsæ‰€åœ¨æœåŠ¡å™¨è¿›è¡Œå¦‚ä¸‹æ“ä½œï¼š</p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token punctuation">[</span>root@qfedu.com ~<span class="token punctuation">]</span><span class="token comment"># vim /opt/jenkins.property   # å»ºç«‹ä¸€ä¸ªæ–‡ä»¶</span><span class="token assign-left variable">abc</span><span class="token operator">=</span>t1,t2,t3,t4<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre><p> web ç«¯é…ç½®ï¼š</p><p><img src="/1235834-20180831172044249-467635589.png" alt="img"></p><p>è¿›è¡Œæµ‹è¯•ï¼š</p><p>æ„å»ºå‰ï¼šï¼ˆå¯ä»¥å‘ç°ä¹Ÿæ˜¯ç”Ÿæ•ˆçš„ï¼‰</p><p><img src="/1235834-20180831172105902-1561453754.png" alt="img"></p><p>æ„å»ºåæŸ¥çœ‹ç»“æœï¼šï¼ˆä¹Ÿæ˜¯æˆåŠŸçš„ï¼‰</p><p>![img](G:&#x2F;BaiduNetdiskDownload&#x2F;docker&#x2F;ç¬¬13å¥—ï¼š4å¤©æå®šGit+Jenkins+Harbor+Dockerå®ç°CICD&#x2F;CI CD è½¯ä»¶+ç¬”è®°+èµ„æ–™&#x2F;CI CD è½¯ä»¶+ç¬”è®°+èµ„æ–™&#x2F;ç¬¬3å¤©-Jenkinsè¯¦è§£&#x2F;assets&#x2F;1235834-20180831172117350-824962931.png)</p><p><img src="/image-20200823112204773.png" alt="image-20200823112204773"></p><h4 id="3ã€Git-æ’ä»¶"><a href="#3ã€Git-æ’ä»¶" class="headerlink" title="3ã€Git æ’ä»¶"></a>3ã€Git æ’ä»¶</h4><p>å†ç”¨ git æ—¶ä½¿ç”¨è¯¥æ’ä»¶æ˜¯éå¸¸æ–¹ä¾¿çš„ã€‚</p><h5 id="1ã€å®‰è£…æ’ä»¶-Git-Parameter"><a href="#1ã€å®‰è£…æ’ä»¶-Git-Parameter" class="headerlink" title="1ã€å®‰è£…æ’ä»¶ Git Parameter"></a>1ã€å®‰è£…æ’ä»¶ Git Parameter</h5><p><img src="/1235834-20180831172312057-1192977432.png" alt="img"></p><h5 id="2ã€è¿›è¡Œé…ç½®"><a href="#2ã€è¿›è¡Œé…ç½®" class="headerlink" title="2ã€è¿›è¡Œé…ç½®"></a>2ã€è¿›è¡Œé…ç½®</h5><p>åœ¨é…ç½®ä¹‹å‰æˆ‘ä»¬å…ˆæ¥è¯´ä¸€ä¸ªå‘ï¼Œå½“æˆ‘ä»¬åœ¨é…ç½®gitä¸­å†™äº†è¿œç«¯åœ°å€åï¼Œä¼šæœ‰å¦‚ä¸‹æŠ¥é”™ï¼š</p><p><img src="/1235834-20180831172344503-595645026.png" alt="img"></p><p>è¿™æ˜¯å› ä¸º jenkins æˆ‘ä»¬ yum è£…çš„è¿è¡Œç”¨æˆ·æ˜¯ jenkins ç”¨æˆ·ï¼Œæ­¤å¤„æ˜¯ jenkins ç”¨æˆ·å» git ä»“åº“è¿›è¡Œæ‹‰å–ï¼Œè€Œ jenkins ç”¨æˆ·çš„è¯é»˜è®¤æ˜¯ &#x2F;bin&#x2F;false çš„ï¼Œä¸ä½†ä¸èƒ½ç™»å½•ï¼Œä¹Ÿæ²¡æœ‰ git å‘½ä»¤æƒé™ï¼Œæ‰€ä»¥è‚¯å®šæ˜¯å¤±è´¥çš„ã€‚</p><p>è§£å†³æ­¤é—®é¢˜ä¸¤ç§åŠæ³•ï¼š</p><ul><li><p>æ›´æ”¹jenkinsç”¨æˆ·ä¸ºrootç”¨æˆ·ï¼›</p></li><li><p>æ›´æ”¹jenkinsç”¨æˆ·ä¸ºæ­£å¸¸çš„æ™®é€šç”¨æˆ·&#x2F;bin&#x2F;bashï¼Œå°†å…¶çš„å…¬é’¥åŠ å…¥åˆ°gitæœåŠ¡å™¨çš„gitç”¨æˆ·ä¸­ã€‚</p></li></ul><p>æ­¤å¤„æš‚æ—¶å…ˆç”¨ç¬¬ä¸€ç§è§£å†³åŠæ³•ï¼Œæ›´æ”¹ jenkins çš„è¿è¡Œç”¨æˆ·ä¸º root ç”¨æˆ·ï¼Œé€šè¿‡å¦‚ä¸‹æ–¹å¼è¿›è¡Œæ›´æ”¹ï¼š</p><ul><li><p>å°†&#x2F;etc&#x2F;sysconfig&#x2F;jenkinsæ–‡ä»¶ç”±<img src="/1235834-20180831172403790-793357643.png" alt="img">æ”¹ä¸º<img src="/1235834-20180831172419499-231798333.png" alt="img"></p></li><li><p>ç„¶åå†é‡å¯å³å¯ã€‚</p></li></ul><h5 id="3ã€è¿›è¡Œç›¸å…³é…ç½®"><a href="#3ã€è¿›è¡Œç›¸å…³é…ç½®" class="headerlink" title="3ã€è¿›è¡Œç›¸å…³é…ç½®"></a>3ã€è¿›è¡Œç›¸å…³é…ç½®</h5><p><img src="/1235834-20180905174228683-1325675254.png" alt="img"></p><h5 id="4ã€é…ç½®-git-ä»“åº“"><a href="#4ã€é…ç½®-git-ä»“åº“" class="headerlink" title="4ã€é…ç½® git ä»“åº“"></a>4ã€é…ç½® git ä»“åº“</h5><p><img src="/1235834-20180905174238241-1229199729.png" alt="img"></p><p>å‡­æ®è¿™é‡Œæœ‰ä¸¤ç§æ–¹å¼ï¼š</p><p>ç¬¬ä¸€ç§ï¼šé€‰æ‹©æ— </p><ul><li>å…¶å®å°±æ˜¯åŸºäºå…ç§˜é’¥çš„ã€‚</li></ul><p>ç¬¬äºŒç§ï¼šç”¨æˆ·ï¼ˆå…¶å®å°±æ˜¯gitç”¨æˆ·ï¼‰</p><p><img src="/1235834-20180905174257903-1112577737.png" alt="img"></p><p>å½“æ„å»ºæ—¶ç»™ä¸€ä¸ªé€‰æ‹©åˆ—è¡¨ï¼Œè¿™ä¸ªå˜é‡æ˜¯ä»£è¡¨åˆ†æ”¯ã€‚æœ‰å“ªäº›åˆ†æ”¯ä¼ é€’ç»™è¿™ä¸ªå˜é‡ã€‚</p><p><img src="/1235834-20180905174314569-1455405236.png" alt="img"></p><h5 id="5ã€è¿›è¡Œæ„å»º"><a href="#5ã€è¿›è¡Œæ„å»º" class="headerlink" title="5ã€è¿›è¡Œæ„å»º"></a>5ã€è¿›è¡Œæ„å»º</h5><h6 id="1ã€åˆ—è¡¨ä¸­å·²ç»æœ‰äº†å¯é€‰çš„åˆ†æ”¯"><a href="#1ã€åˆ—è¡¨ä¸­å·²ç»æœ‰äº†å¯é€‰çš„åˆ†æ”¯" class="headerlink" title="1ã€åˆ—è¡¨ä¸­å·²ç»æœ‰äº†å¯é€‰çš„åˆ†æ”¯"></a>1ã€åˆ—è¡¨ä¸­å·²ç»æœ‰äº†å¯é€‰çš„åˆ†æ”¯</h6><p><img src="/1235834-20180905174352937-817873860.png" alt="img"></p><h6 id="2ã€æ„å»ºæˆåŠŸ"><a href="#2ã€æ„å»ºæˆåŠŸ" class="headerlink" title="2ã€æ„å»ºæˆåŠŸ"></a>2ã€æ„å»ºæˆåŠŸ</h6><p>![img](G:&#x2F;BaiduNetdiskDownload&#x2F;docker&#x2F;ç¬¬13å¥—ï¼š4å¤©æå®šGit+Jenkins+Harbor+Dockerå®ç°CICD&#x2F;CI CD è½¯ä»¶+ç¬”è®°+èµ„æ–™&#x2F;CI CD è½¯ä»¶+ç¬”è®°+èµ„æ–™&#x2F;ç¬¬3å¤©-Jenkinsè¯¦è§£&#x2F;assets&#x2F;1235834-20180905174410958-2125207362.png)</p><p><img src="/image-20200823112303658.png" alt="image-20200823112303658"></p><h6 id="3ã€æ–°å»ºåˆ†æ”¯å¢æ·»å†…å®¹å†æ¥éªŒè¯æ’ä»¶"><a href="#3ã€æ–°å»ºåˆ†æ”¯å¢æ·»å†…å®¹å†æ¥éªŒè¯æ’ä»¶" class="headerlink" title="3ã€æ–°å»ºåˆ†æ”¯å¢æ·»å†…å®¹å†æ¥éªŒè¯æ’ä»¶"></a>3ã€æ–°å»ºåˆ†æ”¯å¢æ·»å†…å®¹å†æ¥éªŒè¯æ’ä»¶</h6><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token punctuation">[</span>root@qfedu.com app<span class="token punctuation">]</span><span class="token comment"># git branch </span>* master<span class="token punctuation">[</span>root@qfedu.com app<span class="token punctuation">]</span><span class="token comment"># git branch test</span><span class="token punctuation">[</span>root@qfedu.com app<span class="token punctuation">]</span><span class="token comment"># git checkout test</span>Switched to branch <span class="token string">'test'</span><span class="token punctuation">[</span>root@qfedu.com app<span class="token punctuation">]</span><span class="token comment"># git branch</span>  master* <span class="token builtin class-name">test</span><span class="token punctuation">[</span>root@qfedu.com app<span class="token punctuation">]</span><span class="token comment"># touch a</span><span class="token punctuation">[</span>root@qfedu.com app<span class="token punctuation">]</span><span class="token comment"># git add .</span><span class="token punctuation">[</span>root@qfedu.com app<span class="token punctuation">]</span><span class="token comment"># git commit -m "a"</span><span class="token punctuation">[</span>test c286460<span class="token punctuation">]</span> a <span class="token number">1</span> <span class="token function">file</span> changed, <span class="token number">0</span> insertions<span class="token punctuation">(</span>+<span class="token punctuation">)</span>, <span class="token number">0</span> deletions<span class="token punctuation">(</span>-<span class="token punctuation">)</span> create mode <span class="token number">100644</span> a<span class="token punctuation">[</span>root@qfedu.com app<span class="token punctuation">]</span><span class="token comment"># git push origin test</span>Counting objects: <span class="token number">3</span>, done.Compressing objects: <span class="token number">100</span>% <span class="token punctuation">(</span><span class="token number">2</span>/2<span class="token punctuation">)</span>, done.Writing objects: <span class="token number">100</span>% <span class="token punctuation">(</span><span class="token number">2</span>/2<span class="token punctuation">)</span>, <span class="token number">231</span> bytes <span class="token operator">|</span> <span class="token number">0</span> bytes/s, done.Total <span class="token number">2</span> <span class="token punctuation">(</span>delta <span class="token number">0</span><span class="token punctuation">)</span>, reused <span class="token number">0</span> <span class="token punctuation">(</span>delta <span class="token number">0</span><span class="token punctuation">)</span>To git@172.16.1.3:/home/git/repos/app.git * <span class="token punctuation">[</span>new branch<span class="token punctuation">]</span>      <span class="token builtin class-name">test</span> -<span class="token operator">></span> <span class="token builtin class-name">test</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h6 id="4ã€jenkins-æ„å»ºæŸ¥çœ‹"><a href="#4ã€jenkins-æ„å»ºæŸ¥çœ‹" class="headerlink" title="4ã€jenkins æ„å»ºæŸ¥çœ‹"></a>4ã€jenkins æ„å»ºæŸ¥çœ‹</h6><p><img src="/1235834-20180905174449507-511735917.png" alt="img"></p><p>å¯ä»¥å‘ç°å·²ç»æœ‰äº†æˆ‘ä»¬æ–°å»ºçš„åˆ†æ”¯ã€‚</p><p>æ„å»ºæˆåŠŸï¼ï¼</p><p><img src="/1235834-20180905174509176-598896431.png" alt="img"></p><h3 id="3ã€Jenkins-Master-Slave-æ¶æ„"><a href="#3ã€Jenkins-Master-Slave-æ¶æ„" class="headerlink" title="3ã€Jenkins Master-Slave æ¶æ„"></a>3ã€Jenkins Master-Slave æ¶æ„</h3><p><img src="/1235834-20180905174647968-1070498866.png" alt="img"></p><ul><li><p>jenkinsçš„Master-slaveåˆ†å¸ƒå¼æ¶æ„ä¸»è¦æ˜¯ä¸ºäº†è§£å†³jenkinså•ç‚¹æ„å»ºä»»åŠ¡å¤šã€è´Ÿè½½è¾ƒé«˜ã€æ€§èƒ½ä¸è¶³çš„åœºæ™¯ã€‚</p></li><li><p>Master&#x2F;Slaveç›¸å½“äºServerå’Œagentçš„æ¦‚å¿µã€‚Masteræä¾›webæ¥å£è®©ç”¨æˆ·æ¥ç®¡ç†jobå’Œslaveï¼Œjobå¯ä»¥è¿è¡Œåœ¨masteræœ¬æœºæˆ–è€…è¢«åˆ†é…åˆ°slaveä¸Šè¿è¡Œæ„å»ºã€‚ä¸€ä¸ªmasterï¼ˆjenkinsæœåŠ¡æ‰€åœ¨æœºå™¨ï¼‰å¯ä»¥å…³è”å¤šä¸ªslaveç”¨æ¥ä¸ºä¸åŒçš„jobæˆ–ç›¸åŒçš„jobçš„ä¸åŒé…ç½®æ¥æœåŠ¡ã€‚</p></li></ul><h4 id="1ã€å®‰è£…"><a href="#1ã€å®‰è£…" class="headerlink" title="1ã€å®‰è£…"></a>1ã€å®‰è£…</h4><p><strong>å‰æï¼šslave æ‰€åœ¨æœåŠ¡å™¨å¿…é¡»æœ‰ javaç¯å¢ƒ</strong></p><p>jenkins web ç«¯è¿›è¡Œæ“ä½œï¼š</p><p>ç³»ç»Ÿç®¡ç†-&gt;ç®¡ç†èŠ‚ç‚¹-&gt;æ–°å»ºèŠ‚ç‚¹</p><p>1ã€è¿›è¡ŒåŸºç¡€é…ç½®</p><p>é…ç½®é€‰é¡¹ä¸­çš„å†…å®¹æ˜¯å¯å˜çš„ï¼Œæ ¹æ®æƒ…å†µæ¥</p><p><img src="/1235834-20180905174740210-1910187239.png" alt="img"></p><p><img src="/1235834-20180905174812065-1298673844.png" alt="img"></p><p>æ³¨æ„è¿™é‡Œéœ€è¦é…ç½®å‡­æ®ï¼Œä¹Ÿå°±æ˜¯é…ç½®slaveæ‰€åœ¨æœåŠ¡å™¨ç”¨æˆ·å’Œå¯†ç </p><p><img src="/1235834-20180905174833717-113155048.png" alt="img"></p><p>ä¹‹åä¿å­˜ï¼Œå¦‚æœæ— è¯¯çš„è¯å°±ä¼šç›´æ¥å¯åŠ¨äº†ï¼Œå¦‚å›¾ä¸‹æ‰€ç¤ºæ˜¯æœ‰é—®é¢˜çš„</p><p> <img src="/1235834-20180905174858307-1689117384.png" alt="img"></p><p>é€šè¿‡çœ‹è¾“å‡ºæ—¥å¿—ï¼Œå‘ç°æ˜¯ jdk çš„é—®é¢˜ï¼Œä¸€èˆ¬æ¥è¯´ï¼Œå…¶ä¼šåˆ¤æ–­ slave æ‰€åœ¨æœåŠ¡å™¨æœ‰æ²¡æœ‰ jdkï¼Œå¦‚æœæœ‰å°±ä¼šè¿›è¡Œæ£€æµ‹ï¼Œå¦‚ä¸‹å›¾æ‰€ç¤ºï¼Œå°±æ˜¯æ²¡æœ‰æ£€æŸ¥åˆ°ï¼ˆå› ä¸ºjdkæ˜¯æˆ‘ä»¬è‡ªå·±è£…çš„ï¼Œè·¯å¾„å¹¶ä¸æ˜¯é»˜è®¤çš„è·¯å¾„ï¼‰ã€‚</p><p><img src="/1235834-20180905174933937-2072546466.png" alt="img"></p><p>æ²¡æœ‰æ£€æŸ¥åˆ°çš„è¯å…¶å°±ä¼šå»oracleå®˜ç½‘ä¸‹è½½ï¼Œæ¥ä¸º slave æ‰€åœ¨æœåŠ¡å™¨è¿›è¡Œå®‰è£…ï¼Œä½†æ˜¯å› ä¸ºä¸­å›½çš„åŸå› ï¼Œè¢«å¢™äº†ï¼Œæ‰€ä»¥ä¹Ÿä¼šä¸‹è½½å¤±è´¥ï¼Œæœ€ç»ˆå°±å¯¼è‡´å½»åº•å¤±è´¥äº†ï¼Œå¤±è´¥å¦‚å›¾ä¸‹ï¼š</p><p> <img src="/1235834-20180905175013098-1305201866.png" alt="img"></p><p>æœ‰ä¸¤ç§æ–¹æ³•è§£å†³ï¼šæ¨èæ–¹æ³•1ï¼š</p><p>æ–¹æ³•1ï¼š</p><p>åœ¨é…ç½®æ—¶é«˜çº§çš„é€‰é¡¹é‡ŒæŒ‡å®šjavaè·¯å¾„ï¼šå¦‚ä¸‹å›¾æ‰€ç¤ºï¼š</p><p><img src="/1235834-20180905175036117-145610379.png" alt="img"></p><p>æ–¹æ³•2ï¼š</p><p>ä¸º java è·¯å¾„åšä¸€ä¸ªè½¯é“¾æ¥ï¼Œä¿è¯ jenkins å¯ä»¥æ£€æµ‹åˆ° javaã€‚</p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token punctuation">[</span>root@qfedu.com ~<span class="token punctuation">]</span><span class="token comment"># ln -s /usr/local/jdk1.8/bin/java /usr/bin/java</span><span class="token punctuation">[</span>root@qfedu.com ~<span class="token punctuation">]</span><span class="token comment"># ll /usr/bin/java </span>lrwxrwxrwx <span class="token number">1</span> root root <span class="token number">26</span> Jul <span class="token number">25</span> <span class="token number">17</span>:33 /usr/bin/java -<span class="token operator">></span> /usr/local/jdk1.8/bin/java<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre><p> ä¹‹ååœ¨çœ‹å·²ç»æˆåŠŸäº†ï¼</p><p><img src="/1235834-20180905175117966-1877923320.png" alt="img"></p><p><img src="/1235834-20180905175129896-1990617523.png" alt="img"></p><p>å¹¶ä¸”ä¹Ÿå¯ä»¥åœ¨ slave æ‰€åœ¨æœåŠ¡å™¨çœ‹åˆ°ï¼š</p><p><img src="/1235834-20180905175143501-1725798918.png" alt="img"></p><p>jar åŒ…å°±æ˜¯è´Ÿè´£æ¥æ”¶ master ä»»åŠ¡çš„ã€‚</p><h4 id="2ã€é…ç½®"><a href="#2ã€é…ç½®" class="headerlink" title="2ã€é…ç½®"></a>2ã€é…ç½®</h4><p>åœ¨é¡¹ç›® job ä¸­è¿›è¡Œé…ç½®ï¼š</p><p>å¯é€šè¿‡æ ‡ç­¾æˆ–è€…åç§°è¿›è¡ŒåŒ¹é…ï¼ˆæ ‡ç­¾å¯åœ¨å®‰è£…æ—¶é…ç½®ï¼‰</p><p><img src="/1235834-20180905175239298-1454561108.png" alt="img"></p><h4 id="3ã€æ„å»º"><a href="#3ã€æ„å»º" class="headerlink" title="3ã€æ„å»º"></a>3ã€æ„å»º</h4><p><img src="/1235834-20180905175325125-311183582.png" alt="img"></p><p>å¯ä»¥å‘ç°æ§åˆ¶å°çš„æ—¥å¿—ï¼Œå…¶ä¹Ÿæ˜¯ slave æ„å»ºçš„</p><p><img src="/1235834-20180905175346873-1882059918.png" alt="img"></p><p>ä¹‹åæŸ¥çœ‹æ„å»ºå®Œçš„å·¥ä½œç›®å½•ï¼Œä¹Ÿæœ‰é¢„æƒ³ä¸­çš„æ–‡ä»¶ã€‚</p><p><img src="/1235834-20180905175404104-944359554.png" alt="img"></p><p>è¿™æ ·åŸºæœ¬ä¸Šå°±å®ç°äº†å€ŸåŠ© jenkins çš„ slave å»æ„å»º jobäº†ã€‚</p><p>ç›®å‰æ˜¯åœ¨ slave æ„å»ºä¹Ÿåœ¨ slave ä¸Šéƒ¨ç½²ï¼Œä¹‹åæˆ‘ä»¬å¯ä»¥é€šè¿‡è„šæœ¬ï¼Œæ¯”å¦‚å€ŸåŠ© rsyncã€ansible ç­‰éƒ¨ç½²åœ¨å…¶ä»–æœåŠ¡å™¨ä¸Šã€‚</p><h4 id="4ã€æ‰©å±•"><a href="#4ã€æ‰©å±•" class="headerlink" title="4ã€æ‰©å±•"></a>4ã€æ‰©å±•</h4><p>å¯ä»¥ä¸ºslaveæœåŠ¡å™¨åœ¨é…ç½®æ—¶å€™åŠ ä¸Šæ ‡ç­¾ï¼Œè¿™æ ·ä¹Ÿä¼šæ–¹ä¾¿æˆ‘ä»¬é€‰æ‹©ï¼Œç”¨æ³•ä¹Ÿä¸å•å•å±€é™åœ¨ä¸€å°æœåŠ¡å™¨ä¸Šï¼Œå¯ä»¥è®©å¤šå° slave å»ç«é€‰ã€‚</p><h3 id="4ã€Jenkins-pipeline"><a href="#4ã€Jenkins-pipeline" class="headerlink" title="4ã€Jenkins pipeline"></a>4ã€Jenkins pipeline</h3><h4 id="1ã€æ¦‚è§ˆ"><a href="#1ã€æ¦‚è§ˆ" class="headerlink" title="1ã€æ¦‚è§ˆ"></a>1ã€æ¦‚è§ˆ</h4><p><img src="/1235834-20180905175950688-621991737.png" alt="img"></p><h4 id="2ã€å®‰è£…"><a href="#2ã€å®‰è£…" class="headerlink" title="2ã€å®‰è£…"></a>2ã€å®‰è£…</h4><p>åœ¨å¯¹ jenkins è¿›è¡Œåˆå§‹åŒ–å®‰è£…æ—¶ï¼Œé»˜è®¤å·²ç»å®‰è£…äº† jenkins çš„ç›¸å…³æ’ä»¶ï¼Œå¦‚ä¸‹å›¾æ‰€ç¤ºï¼š</p><p><img src="/1235834-20180905180059074-2046998049.png" alt="img"></p><h4 id="3ã€å®æ“"><a href="#3ã€å®æ“" class="headerlink" title="3ã€å®æ“"></a>3ã€å®æ“</h4><h5 id="1ã€æ–°å»ºä»»åŠ¡"><a href="#1ã€æ–°å»ºä»»åŠ¡" class="headerlink" title="1ã€æ–°å»ºä»»åŠ¡"></a>1ã€æ–°å»ºä»»åŠ¡</h5><p><img src="/1235834-20180905180134440-703318370.png" alt="img"></p><h5 id="2ã€ç¼–å†™-pipeline-è„šæœ¬"><a href="#2ã€ç¼–å†™-pipeline-è„šæœ¬" class="headerlink" title="2ã€ç¼–å†™ pipeline è„šæœ¬"></a>2ã€ç¼–å†™ pipeline è„šæœ¬</h5><p><img src="/1235834-20180905180200172-202457638.png" alt="img"></p><p>å¯ä»¥å€ŸåŠ©æµæ°´çº¿è¯­æ³•å»åšã€‚</p><p>test æµæ°´çº¿è„šæœ¬ï¼š</p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token function">node</span> <span class="token punctuation">&#123;</span>   def mvnHome   stage<span class="token punctuation">(</span><span class="token string">'git checkout'</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span> <span class="token comment">#for display purposes</span>        checkout<span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token variable">$class</span><span class="token builtin class-name">:</span> <span class="token string">'GitSCM'</span>, branches: <span class="token punctuation">[</span><span class="token punctuation">[</span>name: <span class="token string">'*/master'</span><span class="token punctuation">]</span><span class="token punctuation">]</span>, doGenerateSubmoduleConfigurations: false, extensions: <span class="token punctuation">[</span><span class="token punctuation">]</span>, submoduleCfg: <span class="token punctuation">[</span><span class="token punctuation">]</span>, userRemoteConfigs: <span class="token punctuation">[</span><span class="token punctuation">[</span>url: <span class="token string">'git@172.16.1.3:/home/git/repos/app.git'</span><span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">)</span>   <span class="token punctuation">&#125;</span>   stage<span class="token punctuation">(</span><span class="token string">'maven Build'</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token builtin class-name">echo</span> <span class="token string">"maven build........."</span>   <span class="token punctuation">&#125;</span>   stage<span class="token punctuation">(</span><span class="token string">'deploy'</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token builtin class-name">echo</span> <span class="token string">"deploy..........."</span>   <span class="token punctuation">&#125;</span>   stage<span class="token punctuation">(</span><span class="token string">'test'</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token builtin class-name">echo</span> <span class="token string">"test..........."</span>   <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h5 id="3ã€æ„å»ºæµ‹è¯•"><a href="#3ã€æ„å»ºæµ‹è¯•" class="headerlink" title="3ã€æ„å»ºæµ‹è¯•"></a>3ã€æ„å»ºæµ‹è¯•</h5><p><img src="/1235834-20180905180243809-1620313434.png" alt="img"></p><p>å¯ä»¥å»æœåŠ¡å™¨ä¸ŠéªŒè¯ä¸€ä¸‹ï¼ˆgit checkoutï¼‰åˆšæ‰æ‹‰å–ä¸‹æ¥çš„ä»£ç ï¼š</p><p><img src="/1235834-20180905180256704-210794930.png" alt="img"></p><p>è¡¥å……ï¼š</p><ul><li><p>å¯ä»¥ä»ä»£ç ç‰ˆæœ¬ç®¡ç†ä»“åº“ä¸­è¯»å– pipeline è„šæœ¬ï¼ˆç›¸å½“äºå°† pipeline è„šæœ¬æ”¾åœ¨ä»“åº“ä¸­ï¼‰æˆ‘ä»¬å¯ä»¥é€‰æ‹©gitã€‚</p></li><li><p>é¦–å…ˆéœ€è¦å°† pipeline è„šæœ¬æäº¤åˆ°æˆ‘ä»¬æ–°å»ºçš„ gitä»“åº“ä¸­ï¼ˆæ­¥éª¤å†æ­¤å¿½ç•¥ã€‚ï¼‰</p></li></ul><p>jenkins é¡¹ç›®ä¸­éœ€è¦è¿›è¡Œå¦‚ä¸‹é…ç½®ï¼š</p><p>å…¶ä¸­è„šæœ¬è·¯å¾„çš„é…ç½®ï¼Œä¸€å®šè¦å’Œç‰ˆæœ¬ä»“åº“ä¸­çš„è·¯å¾„ç›¸ä¸€è‡´ã€‚</p><p><img src="/1235834-20180905180344737-1469717868.png" alt="img"></p><p>ä¹‹åå¦‚æœè¦æ›´æ”¹æ­¥éª¤ï¼Œä¸éœ€è¦å†æ›´æ”¹ jenkins çš„æ­¥éª¤ï¼Œç›´æ¥æ›´æ”¹æ–‡ä»¶å³å¯ã€‚</p><p>è¡¥å……ï¼š</p><p>æ­¤å¤–ä¹‹å‰çš„æµ‹è¯•ä¸€ç›´æ˜¯åœ¨ masterä¸Šæ„å»ºçš„ï¼Œæˆ‘ä»¬è¿˜å¯ä»¥é€šè¿‡åœ¨ jenkinsfile ä¸­æŒ‡å®šèŠ‚ç‚¹åœ¨ç›¸åº”èŠ‚ç‚¹å»æ„å»º</p><p>å…·ä½“åœ¨ jenkinsfile çš„ node åè¿›è¡ŒæŒ‡å®šï¼š</p><p>å¦‚ä¸‹å›¾æ‰€ç¤ºï¼š</p><p><img src="/1235834-20180905180411824-506078483-1581427002304.png" alt="img"></p><p>æ ¼å¼ä¸ºï¼šnode (â€œèŠ‚ç‚¹åç§°â€)</p><p><strong>å…·ä½“é…ç½®è¯¦è§£è¯·å‚è€ƒ</strong> <a href="https://jenkins.io/doc/book/pipeline/">https://jenkins.io/doc/book/pipeline/</a></p><h3 id="5ã€Jenkins-æ„å»ºé‚®ä»¶çŠ¶æ€é€šçŸ¥"><a href="#5ã€Jenkins-æ„å»ºé‚®ä»¶çŠ¶æ€é€šçŸ¥" class="headerlink" title="5ã€Jenkins æ„å»ºé‚®ä»¶çŠ¶æ€é€šçŸ¥"></a>5ã€Jenkins æ„å»ºé‚®ä»¶çŠ¶æ€é€šçŸ¥</h3><h4 id="1ã€-å‰æ"><a href="#1ã€-å‰æ" class="headerlink" title="1ã€ å‰æ"></a>1ã€ å‰æ</h4><p>å‰æï¼šæœåŠ¡å™¨å¼€å¯é‚®ç®±æœåŠ¡</p><p><img src="/1235834-20180905180750936-201397371-1581427002304.png" alt="img"></p><h4 id="2ã€-åŸºç¡€é…ç½®"><a href="#2ã€-åŸºç¡€é…ç½®" class="headerlink" title="2ã€ åŸºç¡€é…ç½®"></a>2ã€ åŸºç¡€é…ç½®</h4><p>éœ€è¦å®‰è£…ä¸€ä¸ªæ’ä»¶ï¼š</p><p>æ’ä»¶ï¼š Email Extension Plugin</p><p>è¿›è¡Œé…ç½®ï¼š</p><p>ç³»ç»Ÿç®¡ç†-&gt;ç³»ç»Ÿè®¾ç½®-&gt;ç›¸å…³é…ç½®å¦‚ä¸‹å›¾ï¼š</p><p><img src="/1235834-20180905180920720-1267268825-1581427002304.png" alt="img"></p><p><img src="/1235834-20180905181032556-219409886-1581427002304.png" alt="img"></p><p>å¯ä»¥åœ¨æ­¤å¤„è¿›è¡Œæµ‹è¯•å‘é€ï¼æ£€éªŒé…ç½®æ˜¯å¦æ­£ç¡®</p><p><img src="/1235834-20180905181105795-859970074-1581427002304.png" alt="img"></p><h4 id="3ã€-é…ç½®åˆ°é¡¹ç›®ä¸­"><a href="#3ã€-é…ç½®åˆ°é¡¹ç›®ä¸­" class="headerlink" title="3ã€ é…ç½®åˆ°é¡¹ç›®ä¸­"></a>3ã€ é…ç½®åˆ°é¡¹ç›®ä¸­</h4><p>åœ¨é¡¹ç›®çš„é…ç½®ä¸­é€‰æ‹©æ„å»ºåæ“ä½œ</p><p><img src="/1235834-20180905181815334-1545576302-1581427002304.png" alt="img"></p><p>é€‰æ‹©æˆ‘ä»¬å¯¹åº”çš„æ’ä»¶</p><p><img src="/1235834-20180905181902914-1329981046-1581427002304.png" alt="img"></p><p>å¡«å†™å‘ä»¶äººä¿¡æ¯</p><p><img src="/1235834-20180905181920357-2050627859-1581427002304.png" alt="img"></p><p>é…ç½®æ„å»ºæˆåŠŸå‘é€é‚®ä»¶</p><p><img src="/1235834-20180905181944795-1066960449-1581427002304.png" alt="img"></p><p>æ§åˆ¶å°ä¹Ÿæœ‰é‚®ä»¶å‘é€æˆåŠŸè¾“å‡º</p><p><img src="/1235834-20180905182332647-1761846010-1581427002304.png" alt="img"></p><p>æ£€æŸ¥å®é™…æ˜¯å¦æ¥æ”¶åˆ°é‚®ä»¶</p><h3 id="6ã€Jenkins-æµæ°´çº¿è‡ªåŠ¨åŒ–å‘å¸ƒPHPé¡¹ç›®"><a href="#6ã€Jenkins-æµæ°´çº¿è‡ªåŠ¨åŒ–å‘å¸ƒPHPé¡¹ç›®" class="headerlink" title="6ã€Jenkins æµæ°´çº¿è‡ªåŠ¨åŒ–å‘å¸ƒPHPé¡¹ç›®"></a>6ã€Jenkins æµæ°´çº¿è‡ªåŠ¨åŒ–å‘å¸ƒPHPé¡¹ç›®</h3><h4 id="1ã€å‰æ"><a href="#1ã€å‰æ" class="headerlink" title="1ã€å‰æ"></a>1ã€å‰æ</h4><p><strong>ç¯å¢ƒä¸º</strong>ï¼šlnmp</p><p><strong>PHPé¡¹ç›®</strong>ï¼šwordpressï¼ˆæ­¤å¤„æˆ‘ä»¬ä¸‹è½½ä¸€ä¸ªwordpressçš„æºç ã€‚å°†å…¶æ¨¡æ‹Ÿä¸ºæˆ‘ä»¬çš„ä»£ç ä¸Šä¼ åˆ°æˆ‘ä»¬çš„gitä»“åº“ï¼‰</p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token punctuation">[</span>root@qfedu.com ~<span class="token punctuation">]</span><span class="token comment"># git config --global user.name "Administrator"</span><span class="token punctuation">[</span>root@qfedu.com ~<span class="token punctuation">]</span><span class="token comment"># git config --global user.email '18611142071@163.com'</span><span class="token punctuation">[</span>root@qfedu.com ~<span class="token punctuation">]</span><span class="token comment"># git status</span><span class="token punctuation">[</span>root@qfedu.com ~<span class="token punctuation">]</span><span class="token comment"># git clone git@192.168.152.138:plat-sp/wordpress.git</span><span class="token punctuation">[</span>root@qfedu.com ~<span class="token punctuation">]</span><span class="token comment"># tar xf wordpress-5.2.1.tar.gz</span><span class="token punctuation">[</span>root@qfedu.com ~<span class="token punctuation">]</span><span class="token comment"># cd wordpress</span><span class="token punctuation">[</span>root@qfedu.com ~<span class="token punctuation">]</span><span class="token comment"># mv /root/wordpress/* .</span><span class="token punctuation">[</span>root@qfedu.com ~<span class="token punctuation">]</span><span class="token comment"># git add .</span><span class="token punctuation">[</span>root@qfedu.com ~<span class="token punctuation">]</span><span class="token comment"># git commit -m 'new1'</span><span class="token punctuation">[</span>root@qfedu.com ~<span class="token punctuation">]</span><span class="token comment"># git push  -u origin master</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p><strong>éƒ¨ç½²èŠ‚ç‚¹</strong>ï¼š node èŠ‚ç‚¹éœ€è¦åœ¨ç³»ç»Ÿç®¡ç†ä¸­é…ç½®èŠ‚ç‚¹</p><h4 id="2ã€é…ç½®-1"><a href="#2ã€é…ç½®-1" class="headerlink" title="2ã€é…ç½®"></a>2ã€é…ç½®</h4><h5 id="1ã€åˆ›å»ºjob"><a href="#1ã€åˆ›å»ºjob" class="headerlink" title="1ã€åˆ›å»ºjob"></a>1ã€åˆ›å»ºjob</h5><p><img src="/1235834-20180905183039989-769081353-1581427002305.png" alt="img"></p><h5 id="2ã€å‚æ•°åŒ–æ„å»º"><a href="#2ã€å‚æ•°åŒ–æ„å»º" class="headerlink" title="2ã€å‚æ•°åŒ–æ„å»º"></a>2ã€å‚æ•°åŒ–æ„å»º</h5><p><img src="/1235834-20180905183208466-356358757-1581427002305.png" alt="img"></p><h5 id="3ã€é…ç½®pipelineè„šæœ¬-ï¼ˆç›´æ¥é…ç½®æˆ–è€…gitè·å–ï¼‰"><a href="#3ã€é…ç½®pipelineè„šæœ¬-ï¼ˆç›´æ¥é…ç½®æˆ–è€…gitè·å–ï¼‰" class="headerlink" title="3ã€é…ç½®pipelineè„šæœ¬ ï¼ˆç›´æ¥é…ç½®æˆ–è€…gitè·å–ï¼‰"></a>3ã€é…ç½®pipelineè„šæœ¬ ï¼ˆç›´æ¥é…ç½®æˆ–è€…gitè·å–ï¼‰</h5><p><img src="/360%E6%88%AA%E5%9B%BE18620330175141-1581427002305.png" alt="360æˆªå›¾18620330175141"></p><p><img src="/360%E6%88%AA%E5%9B%BE18260727588956-1581427002305.png" alt="360æˆªå›¾18260727588956"></p><h5 id="4ã€ä¿å­˜"><a href="#4ã€ä¿å­˜" class="headerlink" title="4ã€ä¿å­˜"></a>4ã€ä¿å­˜</h5><h4 id="3ã€ç¼–å†™-jenkinsfile"><a href="#3ã€ç¼–å†™-jenkinsfile" class="headerlink" title="3ã€ç¼–å†™ jenkinsfile"></a>3ã€ç¼–å†™ jenkinsfile</h4><p>æ¥ä¸‹é‡Œç¼–å†™jenkinsfileæ–‡ä»¶ï¼š</p><p>jenkinsfile-PHPï¼š</p><p>æºç æ–‡ä»¶ï¼š</p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token function">node</span> <span class="token punctuation">(</span><span class="token string">"jenkins-slave2"</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>   stage<span class="token punctuation">(</span><span class="token string">'git checkout'</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>       checkout<span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token variable">$class</span><span class="token builtin class-name">:</span> <span class="token string">'GitSCM'</span>, branches: <span class="token punctuation">[</span><span class="token punctuation">[</span>name: <span class="token string">'$&#123;branch&#125;'</span><span class="token punctuation">]</span><span class="token punctuation">]</span>, doGenerateSubmoduleConfigurations: false, extensions: <span class="token punctuation">[</span><span class="token punctuation">]</span>, submoduleCfg: <span class="token punctuation">[</span><span class="token punctuation">]</span>, userRemoteConfigs: <span class="token punctuation">[</span><span class="token punctuation">[</span>url: <span class="token string">'git@192.168.152.138:plat-sp/wordpress.git'</span><span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">)</span>   <span class="token punctuation">&#125;</span>   stage<span class="token punctuation">(</span><span class="token string">'code copy'</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token function">sh</span> <span class="token string">''</span>'rm <span class="token parameter variable">-rf</span> <span class="token variable">$&#123;WORKSPACE&#125;</span>/.git        <span class="token function">mkdir</span> <span class="token parameter variable">-p</span> /data/backup/web-<span class="token variable"><span class="token variable">$(</span><span class="token function">date</span> +<span class="token string">"%F"</span><span class="token variable">)</span></span>        <span class="token function">mv</span> /home/wwwroot/default/* /data/backup/web-<span class="token variable"><span class="token variable">$(</span><span class="token function">date</span> +<span class="token string">"%F"</span><span class="token variable">)</span></span>        <span class="token function">cp</span> <span class="token parameter variable">-rf</span> <span class="token variable">$&#123;WORKSPACE&#125;</span>/* /home/wwwroot/default/<span class="token string">''</span>'   <span class="token punctuation">&#125;</span>   stage<span class="token punctuation">(</span><span class="token string">'test'</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>       <span class="token function">sh</span> <span class="token string">"curl http://192.168.152.153/status.html"</span>   <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span class="token function">node</span> <span class="token punctuation">(</span><span class="token string">"slave01-172.16.1.2"</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>   stage<span class="token punctuation">(</span><span class="token string">'git checkout'</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>       checkout<span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token variable">$class</span><span class="token builtin class-name">:</span> <span class="token string">'GitSCM'</span>, branches: <span class="token punctuation">[</span><span class="token punctuation">[</span>name: <span class="token string">'$&#123;branch&#125;'</span><span class="token punctuation">]</span><span class="token punctuation">]</span>, doGenerateSubmoduleConfigurations: false, extensions: <span class="token punctuation">[</span><span class="token punctuation">]</span>, submoduleCfg: <span class="token punctuation">[</span><span class="token punctuation">]</span>, userRemoteConfigs: <span class="token punctuation">[</span><span class="token punctuation">[</span>url: <span class="token string">'git@172.16.1.3:/home/git/repos/wordpress'</span><span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">)</span>   <span class="token punctuation">&#125;</span>   stage<span class="token punctuation">(</span><span class="token string">'code copy'</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token function">sh</span> <span class="token string">''</span>'rm <span class="token parameter variable">-rf</span> <span class="token variable">$&#123;WORKSPACE&#125;</span>/.git        <span class="token function">mv</span> /usr/share/nginx/html/wp.com /data/backup/wp.com-<span class="token variable"><span class="token variable">$(</span><span class="token function">date</span> +<span class="token string">"%F_%T"</span><span class="token variable">)</span></span>        <span class="token function">cp</span> <span class="token parameter variable">-rf</span> <span class="token variable">$&#123;WORKSPACE&#125;</span> /usr/share/nginx/html/wp.com<span class="token string">''</span>'   <span class="token punctuation">&#125;</span>   stage<span class="token punctuation">(</span><span class="token string">'test'</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>       <span class="token function">sh</span> <span class="token string">"curl http://wp.test.com/status.html"</span>   <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>ä¸‹é¢ä¸ºå¸¦è§£é‡Šç‰ˆï¼Œä½†ä¸å¯ä»¥ä½¿ç”¨ï¼Œéƒ¨åˆ†æ³¨é‡Šä¼šé€ æˆé—®é¢˜</p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token function">node</span> <span class="token punctuation">(</span><span class="token string">"slave01-172.16.1.2"</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>   <span class="token comment"># ç»‘å®šåˆ°è¯¥èŠ‚ç‚¹å»æ‰§è¡Œ</span>   stage<span class="token punctuation">(</span><span class="token string">'git checkout'</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>      <span class="token comment"># æ‹‰ä»£ç </span>       checkout<span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token variable">$class</span><span class="token builtin class-name">:</span> <span class="token string">'GitSCM'</span>, branches: <span class="token punctuation">[</span><span class="token punctuation">[</span>name: <span class="token string">'$&#123;branch&#125;'</span><span class="token punctuation">]</span><span class="token punctuation">]</span>, doGenerateSubmoduleConfigurations: false, extensions: <span class="token punctuation">[</span><span class="token punctuation">]</span>, <span class="token function">su</span>bmoduleCfg: <span class="token punctuation">[</span><span class="token punctuation">]</span>, userRemoteConfigs: <span class="token punctuation">[</span><span class="token punctuation">[</span>url: <span class="token string">'git@172.16.1.3:/home/git/repos/wordpress'</span><span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">)</span>   <span class="token punctuation">&#125;</span>   <span class="token comment"># $class: 'GitSCM' gitæ’ä»¶è·å–ä»£ç çš„å·¥å…·</span>   <span class="token comment"># branches åˆ†æ”¯åç§°</span>   <span class="token comment"># doGenerateSubmoduleConfigurations æ˜¯å¦åŒ…å«å­æ¨¡å—é…ç½®</span>   <span class="token comment"># extensions æ‰©å±•åŠŸèƒ½</span>   <span class="token comment"># submoduleCfg  å­æ¨¡å—é…ç½®</span>   <span class="token comment"># userRemoteConfigs è¿œç¨‹ç”¨æˆ·é…ç½®ï¼ˆä»“åº“åœ°å€ï¼‰</span>   stage<span class="token punctuation">(</span><span class="token string">'code copy'</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>    <span class="token comment"># å¤åˆ¶ä»£ç </span>        <span class="token function">sh</span> <span class="token string">''</span>'rm <span class="token parameter variable">-rf</span> <span class="token variable">$&#123;WORKSPACE&#125;</span>/.git   <span class="token comment"># åˆ é™¤æ‹‰ä¸‹æ¥çš„é¡¹ç›®çš„.gitæ•æ„Ÿæ–‡ä»¶</span>        <span class="token function">mv</span> /usr/share/nginx/html/wp.com /data/backup/wp.com-<span class="token variable"><span class="token variable">$(</span><span class="token function">date</span> +<span class="token string">"%F_%T"</span><span class="token variable">)</span></span>  <span class="token comment"># å¤‡ä»½æ—§æ–‡ä»¶</span>        <span class="token function">cp</span> <span class="token parameter variable">-rf</span> <span class="token variable">$&#123;WORKSPACE&#125;</span> /usr/share/nginx/html/wp.com<span class="token string">''</span>'  <span class="token comment"># æ–°æ–‡ä»¶å¤åˆ¶åˆ°ç«™ç‚¹ç›®å½•</span>   <span class="token punctuation">&#125;</span>   stage<span class="token punctuation">(</span><span class="token string">'test'</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>  <span class="token comment"># æµ‹è¯•</span>       <span class="token function">sh</span> <span class="token string">"curl http://wp.test.com/status.html"</span>   <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h4 id="4ã€æ„å»º"><a href="#4ã€æ„å»º" class="headerlink" title="4ã€æ„å»º"></a>4ã€æ„å»º</h4><p>æ„å»ºæ¦‚è§ˆï¼š</p><p><img src="/1235834-20180905184051509-1764641810-1581427002305.png" alt="img"></p><p>æ§åˆ¶å°è¾“å‡ºè¯¦æƒ…ï¼š</p><p><img src="/1235834-20180905184107686-644530379-1581427002305.png" alt="img"></p><p><img src="/1235834-20180905184123455-512468351-1581427002305.png" alt="img"></p><p>å¯ä»¥çœ‹åˆ°æ¯ä¸€æ­¥çš„æ‰§è¡Œè¯¦æƒ…ï¼Œæœ€åä¹Ÿæ˜¯æˆåŠŸçš„ï¼ï¼ï¼ï¼ï¼ï¼</p><p>æ­¤å¤–æˆ‘ä»¬å¯ä»¥æŸ¥çœ‹æœåŠ¡å™¨åŠç½‘é¡µå®é™…ä½“éªŒæ•ˆæœè¿›è¡ŒéªŒè¯ã€‚</p><h3 id="7ã€Jenkinsæµæ°´çº¿è‡ªåŠ¨åŒ–å‘å¸ƒJavaé¡¹ç›®"><a href="#7ã€Jenkinsæµæ°´çº¿è‡ªåŠ¨åŒ–å‘å¸ƒJavaé¡¹ç›®" class="headerlink" title="7ã€Jenkinsæµæ°´çº¿è‡ªåŠ¨åŒ–å‘å¸ƒJavaé¡¹ç›®"></a>7ã€Jenkinsæµæ°´çº¿è‡ªåŠ¨åŒ–å‘å¸ƒJavaé¡¹ç›®</h3><h4 id="1ã€å‰æ-1"><a href="#1ã€å‰æ-1" class="headerlink" title="1ã€å‰æ"></a>1ã€å‰æ</h4><p><strong>æ’ä»¶</strong>ï¼šMaven Integration plugin</p><p><strong>ç¯å¢ƒï¼š</strong>mavenã€tomcatï¼Œgit</p><p>ç”¨çš„åšå®¢ç³»ç»Ÿä»£ç ï¼š</p><p>git clone <a href="https://github.com/b3log/solo.git">https://github.com/b3log/solo.git</a></p><p>è¿œç«¯gitæœåŠ¡å™¨ï¼š</p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token punctuation">[</span>root@qfedu.com ~<span class="token punctuation">]</span><span class="token comment"># mkdir -p solo</span><span class="token punctuation">[</span>root@qfedu.com ~<span class="token punctuation">]</span><span class="token comment"># cd solo/</span><span class="token punctuation">[</span>root@qfedu.com ~<span class="token punctuation">]</span><span class="token comment"># git --bare init</span>Initialized empty Git repository <span class="token keyword">in</span> /home/git/repos/solo/<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre><p>æœ¬åœ°webï¼š</p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token punctuation">[</span>root@qfedu.com ~<span class="token punctuation">]</span><span class="token comment"># git remote -v</span>origin    git@172.16.1.3:/home/git/repos/solo <span class="token punctuation">(</span>fetch<span class="token punctuation">)</span>origin    git@172.16.1.3:/home/git/repos/solo <span class="token punctuation">(</span>push<span class="token punctuation">)</span><span class="token punctuation">[</span>root@qfedu.com ~<span class="token punctuation">]</span><span class="token comment"># git remote rm origin</span><span class="token punctuation">[</span>root@qfedu.com ~<span class="token punctuation">]</span><span class="token comment"># git init</span>Reinitialized existing Git repository <span class="token keyword">in</span> /root/solo/.git/<span class="token punctuation">[</span>root@qfedu.com ~<span class="token punctuation">]</span><span class="token comment"># git remote add origin git@172.16.1.3:/home/git/repos/solo</span><span class="token punctuation">[</span>root@qfedu.com ~<span class="token punctuation">]</span><span class="token comment"># git add .</span><span class="token punctuation">[</span>root@qfedu.com ~<span class="token punctuation">]</span><span class="token comment"># git commit -m "java solo all"</span><span class="token comment"># On branch master</span>nothing to commit, working directory clean<span class="token punctuation">[</span>root@qfedu.com ~<span class="token punctuation">]</span><span class="token comment"># git push origin master</span>Counting objects: <span class="token number">29058</span>, done.Compressing objects: <span class="token number">100</span>% <span class="token punctuation">(</span><span class="token number">9854</span>/9854<span class="token punctuation">)</span>, done.Writing objects: <span class="token number">100</span>% <span class="token punctuation">(</span><span class="token number">29058</span>/29058<span class="token punctuation">)</span>, <span class="token number">47.77</span> MiB <span class="token operator">|</span> <span class="token number">39.28</span> MiB/s, done.Total <span class="token number">29058</span> <span class="token punctuation">(</span>delta <span class="token number">15768</span><span class="token punctuation">)</span>, reused <span class="token number">29058</span> <span class="token punctuation">(</span>delta <span class="token number">15768</span><span class="token punctuation">)</span>To git@172.16.1.3:/home/git/repos/solo * <span class="token punctuation">[</span>new branch<span class="token punctuation">]</span>      master -<span class="token operator">></span> master<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>å› ä¸ºsoloéœ€è¦æ”¹å¦‚ä¸‹é…ç½®æ‰å¯ä»¥è®¿é—®ï¼šï¼ˆæ”¹serverhostä¸ºæŒ‡å®šçš„åŸŸåï¼‰</p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token punctuation">[</span>root@qfedu.com ~<span class="token punctuation">]</span><span class="token comment"># vim /root/solo/src/main/resources/latke.properties</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p><img src="/1235834-20180905184545173-2047374097-1581427002305.png" alt="img"></p><p>ç„¶åå†é‡æ–°æäº¤ä¸Šå»</p><p><strong>éƒ¨ç½²èŠ‚ç‚¹ï¼š</strong> node èŠ‚ç‚¹éœ€è¦åœ¨ç³»ç»Ÿç®¡ç†ä¸­é…ç½®èŠ‚ç‚¹</p><h4 id="2ã€é…ç½®-2"><a href="#2ã€é…ç½®-2" class="headerlink" title="2ã€é…ç½®"></a>2ã€é…ç½®</h4><h5 id="1ã€æ–°å»ºjob"><a href="#1ã€æ–°å»ºjob" class="headerlink" title="1ã€æ–°å»ºjob"></a>1ã€æ–°å»ºjob</h5><p><img src="/1235834-20180905184625352-2046318711-1581427002305.png" alt="img"></p><h5 id="2ã€å‚æ•°åŒ–æ„å»º-1"><a href="#2ã€å‚æ•°åŒ–æ„å»º-1" class="headerlink" title="2ã€å‚æ•°åŒ–æ„å»º"></a>2ã€å‚æ•°åŒ–æ„å»º</h5><p><img src="/1235834-20180905184640513-596342130-1581427002305.png" alt="img"></p><h5 id="3ã€é…ç½®gitä»“åº“ï¼ˆé’ˆå¯¹jenkinsfileï¼‰"><a href="#3ã€é…ç½®gitä»“åº“ï¼ˆé’ˆå¯¹jenkinsfileï¼‰" class="headerlink" title="3ã€é…ç½®gitä»“åº“ï¼ˆé’ˆå¯¹jenkinsfileï¼‰"></a>3ã€é…ç½®gitä»“åº“ï¼ˆé’ˆå¯¹jenkinsfileï¼‰</h5><p><img src="/1235834-20180905184651748-234872141-1581427002305.png" alt="img"></p><h4 id="3ã€ç¼–å†™Jenkinsfile"><a href="#3ã€ç¼–å†™Jenkinsfile" class="headerlink" title="3ã€ç¼–å†™Jenkinsfile"></a>3ã€ç¼–å†™Jenkinsfile</h4><p>æºç é…ç½®æ–‡ä»¶ï¼š</p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token function">node</span> <span class="token punctuation">(</span><span class="token string">"slave02-172.16.1.3"</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>   <span class="token comment"># def mvnHome = '/usr/local/maven'</span>   stage<span class="token punctuation">(</span><span class="token string">'git checkout'</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        checkout<span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token variable">$class</span><span class="token builtin class-name">:</span> <span class="token string">'GitSCM'</span>, branches: <span class="token punctuation">[</span><span class="token punctuation">[</span>name: <span class="token string">'$&#123;branch&#125;'</span><span class="token punctuation">]</span><span class="token punctuation">]</span>, doGenerateSubmoduleConfigurations: false, extensions: <span class="token punctuation">[</span><span class="token punctuation">]</span>, submoduleCfg: <span class="token punctuation">[</span><span class="token punctuation">]</span>, userRemoteConfigs: <span class="token punctuation">[</span><span class="token punctuation">[</span>url: <span class="token string">'git@172.16.1.3:/home/git/repos/solo'</span><span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">)</span>   <span class="token punctuation">&#125;</span>   stage<span class="token punctuation">(</span><span class="token string">'maven build'</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token function">sh</span> <span class="token string">''</span>'export <span class="token assign-left variable">JAVA_HOME</span><span class="token operator">=</span>/usr/local/java        /usr/local/maven/bin/mvn clean package <span class="token parameter variable">-Dmaven.test.skip</span><span class="token operator">=</span>true<span class="token string">''</span>'   <span class="token punctuation">&#125;</span>   stage<span class="token punctuation">(</span><span class="token string">'deploy'</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token function">sh</span> <span class="token string">''</span>'    <span class="token assign-left variable">JENKINS_NODE_COOKIE</span><span class="token operator">=</span>dontkillme    <span class="token builtin class-name">export</span> <span class="token assign-left variable">JAVA_HOME</span><span class="token operator">=</span>/usr/local/java        <span class="token assign-left variable">TOMCAT_NAME</span><span class="token operator">=</span>tomcat        <span class="token assign-left variable">TOMCAT_HOME</span><span class="token operator">=</span>/usr/local/<span class="token variable">$TOMCAT_NAME</span>        <span class="token assign-left variable">WWWROOT</span><span class="token operator">=</span><span class="token variable">$TOMCAT_HOME</span>/webapps/ROOT        <span class="token keyword">if</span> <span class="token punctuation">[</span> <span class="token parameter variable">-d</span> <span class="token variable">$WWWROOT</span> <span class="token punctuation">]</span><span class="token punctuation">;</span> <span class="token keyword">then</span>           <span class="token function">mv</span> <span class="token variable">$WWWROOT</span> /data/backup/<span class="token variable">$&#123;TOMCAT_NAME&#125;</span>-<span class="token variable"><span class="token variable">$(</span><span class="token function">date</span> +<span class="token string">"%F_%T"</span><span class="token variable">)</span></span>        <span class="token keyword">fi</span>        <span class="token function">unzip</span> <span class="token variable">$&#123;WORKSPACE&#125;</span>/target/*.war <span class="token parameter variable">-d</span> <span class="token variable">$WWWROOT</span>        <span class="token assign-left variable">PID</span><span class="token operator">=</span><span class="token variable"><span class="token variable">$(</span><span class="token function">ps</span> <span class="token parameter variable">-ef</span> <span class="token operator">|</span><span class="token function">grep</span> $TOMCAT_NAME <span class="token operator">|</span><span class="token function">egrep</span> <span class="token parameter variable">-v</span> <span class="token string">"grep|<span class="token variable">$$</span>"</span> <span class="token operator">|</span><span class="token function">awk</span> <span class="token punctuation">\</span>'<span class="token punctuation">&#123;</span>print $2<span class="token punctuation">&#125;</span><span class="token punctuation">\</span>'<span class="token variable">)</span></span>        <span class="token punctuation">[</span> <span class="token parameter variable">-n</span> <span class="token string">"<span class="token variable">$PID</span>"</span> <span class="token punctuation">]</span> <span class="token operator">&amp;&amp;</span> <span class="token function">kill</span> <span class="token parameter variable">-9</span> <span class="token variable">$PID</span>        /bin/bash <span class="token variable">$TOMCAT_HOME</span>/bin/startup.sh       <span class="token string">''</span>'    <span class="token punctuation">&#125;</span>   stage<span class="token punctuation">(</span><span class="token string">'test'</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>    <span class="token function">sh</span> <span class="token string">"curl http://192.168.152.138:8080/status.html"</span>    <span class="token builtin class-name">echo</span> <span class="token string">"test ok!!!!!!!"</span>   <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>ä¸‹é¢ä¸ºå¸¦è§£é‡Šç‰ˆï¼Œä½†ä¸å¯ä»¥ä½¿ç”¨ï¼Œéƒ¨åˆ†æ³¨é‡Šä¼šé€ æˆé—®é¢˜</p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token function">node</span> <span class="token punctuation">(</span><span class="token string">"slave02-172.16.1.3"</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>   <span class="token comment"># ç»‘å®šåˆ°è¯¥èŠ‚ç‚¹æ„å»º</span>   <span class="token comment"># def mvnHome = '/usr/local/maven'</span>   stage<span class="token punctuation">(</span><span class="token string">'git checkout'</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>      <span class="token comment"># æ‹‰ä»£ç </span>        checkout<span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token variable">$class</span><span class="token builtin class-name">:</span> <span class="token string">'GitSCM'</span>, branches: <span class="token punctuation">[</span><span class="token punctuation">[</span>name: <span class="token string">'$&#123;branch&#125;'</span><span class="token punctuation">]</span><span class="token punctuation">]</span>, doGenerateSubmoduleConfigurations: false, extensions: <span class="token punctuation">[</span><span class="token punctuation">]</span>, submoduleCfg: <span class="token punctuation">[</span><span class="token punctuation">]</span>, userRemoteConfigs: <span class="token punctuation">[</span><span class="token punctuation">[</span>url: <span class="token string">'git@172.16.1.3:/home/git/repos/solo'</span><span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">)</span>   <span class="token punctuation">&#125;</span>   stage<span class="token punctuation">(</span><span class="token string">'maven build'</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>    <span class="token comment"># maven build</span>        <span class="token function">sh</span> <span class="token string">''</span>'export <span class="token assign-left variable">JAVA_HOME</span><span class="token operator">=</span>/usr/local/java    <span class="token comment"># åœ¨æŒ‡å®šjavaç¯å¢ƒå˜é‡</span>        /usr/local/maven/bin/mvn clean package <span class="token parameter variable">-Dmaven.test.skip</span><span class="token operator">=</span>true<span class="token string">''</span>'   <span class="token comment"># æ„å»ºmavenåŒ… clean packageè¡¨ç¤ºæ„å»ºä¹‹å‰ä¼šæ¸…ç†ä¹‹å‰æ„å»ºçš„åŒ…ï¼Œ-Dmaven.test.skip=trueè¡¨ç¤ºè·³è¿‡å•å…ƒæµ‹è¯•</span>   <span class="token punctuation">&#125;</span>   stage<span class="token punctuation">(</span><span class="token string">'deploy'</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>   <span class="token comment"># éƒ¨ç½²</span>        <span class="token function">sh</span> <span class="token string">''</span>'        <span class="token assign-left variable">JENKINS_NODE_COOKIE</span><span class="token operator">=</span>dontkillme  <span class="token comment"># tomcatå¯åŠ¨æ—¶ä¼šè¡ç”Ÿå‡ºä¸€äº›å­è¿›ç¨‹ï¼Œç„¶åæ‰èƒ½æˆåŠŸå¯åŠ¨ï¼Œä½†æ˜¯jenkinsä¼šåœ¨æ„å»ºç»“æŸæ€æ‰tomcatçš„é‚£äº›è¡ç”Ÿå­è¿›ç¨‹ï¼Œé€ æˆtomcatå¯åŠ¨å¤±è´¥ï¼Œæ­¤å¤„åŠ ä¸Šè¿™ä¸ªå‚æ•°å¯ä»¥è§£å†³è¿™ä¸ªé—®é¢˜ã€‚</span>        <span class="token builtin class-name">export</span> <span class="token assign-left variable">JAVA_HOME</span><span class="token operator">=</span>/usr/local/java        <span class="token assign-left variable">TOMCAT_NAME</span><span class="token operator">=</span>tomcat        <span class="token assign-left variable">TOMCAT_HOME</span><span class="token operator">=</span>/usr/local/<span class="token variable">$TOMCAT_NAME</span>        <span class="token assign-left variable">WWWROOT</span><span class="token operator">=</span><span class="token variable">$TOMCAT_HOME</span>/webapps/ROOT        <span class="token keyword">if</span> <span class="token punctuation">[</span> <span class="token parameter variable">-d</span> <span class="token variable">$WWWROOT</span> <span class="token punctuation">]</span><span class="token punctuation">;</span> <span class="token keyword">then</span>   <span class="token comment"># å¦‚æœç›®å½•å­˜åœ¨ï¼Œå…ˆå¤‡ä»½</span>           <span class="token function">mv</span> <span class="token variable">$WWWROOT</span> /data/backup/<span class="token variable">$&#123;TOMCAT_NAME&#125;</span>-<span class="token variable"><span class="token variable">$(</span><span class="token function">date</span> +<span class="token string">"%F_%T"</span><span class="token variable">)</span></span>        <span class="token keyword">fi</span>        <span class="token function">unzip</span> <span class="token variable">$&#123;WORKSPACE&#125;</span>/target/*.war <span class="token parameter variable">-d</span> <span class="token variable">$WWWROOT</span>   <span class="token comment"># é¡¹ç›®åŒ…è§£å‹åˆ°ç«™ç‚¹ç›®å½•</span>        <span class="token assign-left variable">PID</span><span class="token operator">=</span><span class="token variable"><span class="token variable">$(</span><span class="token function">ps</span> <span class="token parameter variable">-ef</span> <span class="token operator">|</span><span class="token function">grep</span> $TOMCAT_NAME <span class="token operator">|</span><span class="token function">egrep</span> <span class="token parameter variable">-v</span> <span class="token string">"grep|<span class="token variable">$$</span>"</span> <span class="token operator">|</span><span class="token function">awk</span> <span class="token punctuation">\</span>'<span class="token punctuation">&#123;</span>print $2<span class="token punctuation">&#125;</span><span class="token punctuation">\</span>'<span class="token variable">)</span></span>   <span class="token comment"># é‡å¯tomcat</span>        <span class="token punctuation">[</span> <span class="token parameter variable">-n</span> <span class="token string">"<span class="token variable">$PID</span>"</span> <span class="token punctuation">]</span> <span class="token operator">&amp;&amp;</span> <span class="token function">kill</span> <span class="token parameter variable">-9</span> <span class="token variable">$PID</span>        /bin/bash <span class="token variable">$TOMCAT_HOME</span>/bin/startup.sh<span class="token string">''</span>'   <span class="token punctuation">&#125;</span>   stage<span class="token punctuation">(</span><span class="token string">'test'</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>  <span class="token comment"># æµ‹è¯•</span>        <span class="token comment"># sh "curl http://wp.test.com/status.html"</span>        <span class="token builtin class-name">echo</span> <span class="token string">"test ok!!!!!!!"</span>   <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h4 id="4ã€æ„å»º-1"><a href="#4ã€æ„å»º-1" class="headerlink" title="4ã€æ„å»º"></a>4ã€æ„å»º</h4><p><img src="/1235834-20180905184913443-2058202273-1581427002305.png" alt="img"></p><h4 id="5ã€è®¿é—®"><a href="#5ã€è®¿é—®" class="headerlink" title="5ã€è®¿é—®"></a>5ã€è®¿é—®</h4><p><img src="/1235834-20180905184940777-1980161350-1581427002305.png" alt="img"></p><p><strong>æŠ¥é”™å¤„ç†</strong></p><p>pipeline script from SCMæ–¹å¼ä¸‹ï¼š</p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">Started by user ***java.io.FileNotFoundException    at jenkins.plugins.git.GitSCMFile<span class="token variable">$3</span>.invoke<span class="token punctuation">(</span>GitSCMFile.java:167<span class="token punctuation">)</span>    at jenkins.plugins.git.GitSCMFile<span class="token variable">$3</span>.invoke<span class="token punctuation">(</span>GitSCMFile.java:159<span class="token punctuation">)</span>    at jenkins.plugins.git.GitSCMFileSystem<span class="token variable">$3</span>.invoke<span class="token punctuation">(</span>GitSCMFileSystem.java:193<span class="token punctuation">)</span>    <span class="token punctuation">..</span>.lFinished: FAILURE<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p><img src="/4276633-a4aee92aa7677655-1581427002305.png" alt="img"></p><p>â€‹                                                  <strong>åŸå› æ˜¯gitå·¥ç¨‹ä¸‹ï¼Œæ²¡æœ‰æ‰¾åˆ°Script Pathè·¯å¾„ä¸‹çš„è„šæœ¬æ–‡ä»¶</strong>ã€‚</p><h3 id="8ã€Jenkins-ç»“åˆ-gitlab-ä½¿ç”¨"><a href="#8ã€Jenkins-ç»“åˆ-gitlab-ä½¿ç”¨" class="headerlink" title="8ã€Jenkins ç»“åˆ gitlab ä½¿ç”¨"></a>8ã€Jenkins ç»“åˆ gitlab ä½¿ç”¨</h3><h4 id="1ã€åˆ›å»ºä¸€ä¸ªæ–°çš„ä»»åŠ¡"><a href="#1ã€åˆ›å»ºä¸€ä¸ªæ–°çš„ä»»åŠ¡" class="headerlink" title="1ã€åˆ›å»ºä¸€ä¸ªæ–°çš„ä»»åŠ¡"></a>1ã€åˆ›å»ºä¸€ä¸ªæ–°çš„ä»»åŠ¡</h4><p><img src="/1190037-20171201192354042-830010134-1581427002305.png" alt="img"></p><p>è¾“å…¥é¡¹ç›®çš„åç§°ï¼Œé€‰æ‹©æ„å»ºåªæœ‰åˆ†é£æ ¼çš„è½¯ä»¶</p><p><img src="/1190037-20171201192401401-883929242-1581427002305.png" alt="img"></p><h4 id="2ã€å°†Jenkinsä¸gitlabè”åˆ"><a href="#2ã€å°†Jenkinsä¸gitlabè”åˆ" class="headerlink" title="2ã€å°†Jenkinsä¸gitlabè”åˆ"></a>2ã€å°†Jenkinsä¸gitlabè”åˆ</h4><h5 id="1ã€Jenkinsåˆ›å»ºå…¬é’¥å’Œç§é’¥"><a href="#1ã€Jenkinsåˆ›å»ºå…¬é’¥å’Œç§é’¥" class="headerlink" title="1ã€Jenkinsåˆ›å»ºå…¬é’¥å’Œç§é’¥"></a>1ã€Jenkinsåˆ›å»ºå…¬é’¥å’Œç§é’¥</h5><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token punctuation">[</span>root@qfedu.com ~<span class="token punctuation">]</span><span class="token comment"># ssh-keygen </span>Generating public/private rsa key pair.Enter <span class="token function">file</span> <span class="token keyword">in</span> <span class="token function">which</span> to save the key <span class="token punctuation">(</span>/root/.ssh/id_rsa<span class="token punctuation">)</span>: Enter passphrase <span class="token punctuation">(</span>empty <span class="token keyword">for</span> no passphrase<span class="token punctuation">)</span>: Enter same passphrase again: Your identification has been saved <span class="token keyword">in</span> /root/.ssh/id_rsa.Your public key has been saved <span class="token keyword">in</span> /root/.ssh/id_rsa.pub.The key fingerprint is:SHA256:5SGYye8oxCKFJjddb4W8JC0RAQhBWCvuG8aZL8eMJs4 root@JenkinsThe key's randomart image is:+---<span class="token punctuation">[</span>RSA <span class="token number">2048</span><span class="token punctuation">]</span>----+<span class="token operator">|</span><span class="token operator">==</span><span class="token punctuation">..</span><span class="token punctuation">..</span><span class="token operator">=</span>* <span class="token punctuation">..</span>      <span class="token operator">|</span><span class="token operator">|</span><span class="token punctuation">..</span>.o <span class="token assign-left variable">oo</span><span class="token operator">==</span>.       <span class="token operator">|</span><span class="token operator">|</span>+.<span class="token operator">=</span> <span class="token builtin class-name">.</span> <span class="token operator">=</span>++.o      <span class="token operator">|</span><span class="token operator">|</span>++ o   o.+ <span class="token builtin class-name">.</span>     <span class="token operator">|</span><span class="token operator">|</span><span class="token punctuation">..</span>. o   S <span class="token builtin class-name">.</span>      <span class="token operator">|</span><span class="token operator">|</span>o.oo   o         <span class="token operator">|</span><span class="token operator">|</span> B+ <span class="token builtin class-name">.</span> <span class="token builtin class-name">.</span> <span class="token builtin class-name">.</span>        <span class="token operator">|</span><span class="token operator">|</span>++++ <span class="token builtin class-name">.</span>           <span class="token operator">|</span><span class="token operator">|</span>+Eo.             <span class="token operator">|</span>+----<span class="token punctuation">[</span>SHA256<span class="token punctuation">]</span>-----+<span class="token punctuation">[</span>root@qfedu.com ~<span class="token punctuation">]</span><span class="token comment"># cat .ssh/id_rsa.pub </span><span class="token punctuation">[</span>root@qfedu.com ~<span class="token punctuation">]</span><span class="token comment"># cat .ssh/id_rsa</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h5 id="2ã€åœ¨gitlabä¸­æ·»åŠ å…¬é’¥id-rsa-pub"><a href="#2ã€åœ¨gitlabä¸­æ·»åŠ å…¬é’¥id-rsa-pub" class="headerlink" title="2ã€åœ¨gitlabä¸­æ·»åŠ å…¬é’¥id_rsa.pub"></a>2ã€åœ¨gitlabä¸­æ·»åŠ å…¬é’¥id_rsa.pub</h5><p><img src="/1190037-20171201192426354-684435689-1581427002305.png" alt="img"></p><h5 id="3ã€åœ¨jenkinsä¸­æ·»åŠ ç§é’¥id-rsa"><a href="#3ã€åœ¨jenkinsä¸­æ·»åŠ ç§é’¥id-rsa" class="headerlink" title="3ã€åœ¨jenkinsä¸­æ·»åŠ ç§é’¥id_rsa"></a>3ã€åœ¨jenkinsä¸­æ·»åŠ ç§é’¥id_rsa</h5><p>â€‹         åœ¨é¦–é¡µä¸­ï¼Œç‚¹å‡»é¡¹ç›®åç§°çš„ä¸‹æ‹‰ç›‘å¬</p><p><img src="/1190037-20171201192438933-1952523900-1581427002305.png" alt="img"></p><p>â€‹         é€‰æ‹©æºç ç®¡ç†ï¼Œå…ˆå°†gitlabçš„é¡¹ç›®åœ°å€å¤åˆ¶è¿‡æ¥</p><p><img src="/1190037-20171201192448667-1624864487-1581427002305.png" alt="img"></p><p>â€‹         é€‰æ‹©SSHå¯†é’¥å’Œè¯ä¹¦ï¼Œç„¶åé€‰æ‹©ç›´æ¥è¾“å…¥ï¼Œå°†ç§é’¥å¤åˆ¶åˆ°ä¸‹æ¡†ä¸­å³å¯</p><p>â€‹         æ·»åŠ å®Œæˆåï¼Œç‚¹å‡»ä¿å­˜</p><p><img src="/1190037-20171201192456448-898723804-1581427002305.png" alt="img"></p><p>â€‹         é€‰æ‹©åˆšæ‰åˆ›å»ºçš„è¯ä¹¦ï¼Œå®Œæˆåï¼Œé€‰æ‹©æ„å»º</p><p><img src="/1190037-20171201192504808-1018752536-1581427002305.png" alt="img"></p><p><strong>é€‰æ‹©æ„å»º</strong></p><p>â€‹         æ‹‰åˆ°æœ€åº•éƒ¨ï¼Œé€‰æ‹©ä½¿ç”¨shellè„šæœ¬</p><p><img src="/1190037-20171201192512214-519514729-1581427002305.png" alt="img"></p><p>â€‹         è„šæœ¬å†…å®¹</p><p><img src="/1190037-20171201192518948-2060407751-1581427002305.png" alt="img"></p><p>â€‹         åˆ›å»ºæµ‹è¯•ç¯å¢ƒ</p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token punctuation">[</span>root@qfedu.com ~<span class="token punctuation">]</span><span class="token comment"># mkdir -p /data/www</span><span class="token punctuation">[</span>root@qfedu.com ~<span class="token punctuation">]</span><span class="token comment"># chown -R jenkins.jenkins /data/</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre><p>â€‹         é€‰æ‹©æ„å»ºåçš„æ“ä½œï¼Œè®©æ¯æ¬¡æ„å»ºå®Œæˆåéƒ½å°†ç»“æœå‘é€ç»™ç®¡ç†å‘˜</p><p><img src="/1190037-20171201192536214-662773016-1581427002307.png" alt="img"></p><h4 id="3ã€æµ‹è¯•æ‰‹åŠ¨é›†æˆ"><a href="#3ã€æµ‹è¯•æ‰‹åŠ¨é›†æˆ" class="headerlink" title="3ã€æµ‹è¯•æ‰‹åŠ¨é›†æˆ"></a>3ã€æµ‹è¯•æ‰‹åŠ¨é›†æˆ</h4><p>å›åˆ°ä¸»é¡µï¼Œç‚¹å‡»å³ä¾§çš„æŒ‰é’®è¿›è¡Œæµ‹è¯•</p><p><img src="/1190037-20171201192552839-1669748311-1581427002307.png" alt="img"></p><p>éƒ¨ç½²å®Œæˆ</p><p><img src="/1190037-20171201192558886-1289295614-1581427002307.png" alt="img"></p><p>æŸ¥çœ‹éƒ¨ç½²æ—¥å¿—</p><p><img src="/1190037-20171201192606261-1352544543-1581427002307.png" alt="img"></p><p>æŸ¥çœ‹éƒ¨ç½²ç»“æœ</p><pre class="line-numbers language-none"><code class="language-none">[root@qfedu.com ~]# ll &#x2F;data&#x2F;www&#x2F;æ€»ç”¨é‡ 4-rw-r--r-- 1 jenkins jenkins 4 11æœˆ 30 21:22 flag-rw-r--r-- 1 jenkins jenkins 0 11æœˆ 30 21:22 README.md<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre><h4 id="4ã€è‡ªåŠ¨æµ‹è¯•ï¼ˆgitlabä¸»åŠ¨é€šçŸ¥Jenkinsæµ‹è¯•ï¼‰"><a href="#4ã€è‡ªåŠ¨æµ‹è¯•ï¼ˆgitlabä¸»åŠ¨é€šçŸ¥Jenkinsæµ‹è¯•ï¼‰" class="headerlink" title="4ã€è‡ªåŠ¨æµ‹è¯•ï¼ˆgitlabä¸»åŠ¨é€šçŸ¥Jenkinsæµ‹è¯•ï¼‰"></a>4ã€è‡ªåŠ¨æµ‹è¯•ï¼ˆgitlabä¸»åŠ¨é€šçŸ¥Jenkinsæµ‹è¯•ï¼‰</h4><p>è¯¥åŠŸèƒ½ä¼šä½¿ç”¨åˆ°ä¸€ä¸ªæ’ä»¶ <strong>gitlab plugin</strong></p><p>é…ç½®gitlabè®¤è¯</p><p><img src="/1190037-20171201192624433-157495203-1581427002307.png" alt="img"></p><p>æ·»åŠ ä¸€ä¸ªæ–°çš„å‡­è¯</p><p><img src="/1190037-20171201192631683-372513748-1581427002307.png" alt="img"></p><p>   ä»gitlabçš„è®¾ç½®ä¸­å°† tokenå¤åˆ¶è¿‡æ¥ï¼ˆéœ€è¦æ‰‹åŠ¨åˆ›å»ºtokenï¼‰</p><p><img src="/360%E6%88%AA%E5%9B%BE18620331606393-1581427002307.png" alt="360æˆªå›¾18620331606393"></p><p> å°†å¤åˆ¶çš„tokenç²˜è´´åˆ°api tokenä¸­ï¼Œç‚¹ok</p><p><img src="/1190037-20171201192651667-606045732-1581427002307.png" alt="img"></p><p> åœ¨ç³»ç»Ÿé…ç½®ä¸­æ‰¾åˆ°<strong>Gitlab</strong> å°†ä¿¡æ¯è¿›è¡Œå¡«å†™ï¼ŒCredentials é€‰æ‹©åˆšåˆšåˆ›å»ºå¯¹çš„å³å¯</p><p><img src="/1190037-20171201192700729-449236192-1581427002307.png" alt="img"></p><p>æ‰“å¼€é¡¹ç›®ï¼Œç¼–è¾‘é¡¹ç›®çš„æ„å»ºè§¦å‘å™¨</p><p><img src="/1190037-20171201192710183-1810385177-1581427002307.png" alt="img"></p><p>åœ¨gitlabä¸Šé…ç½®è¿æ¥jenkins ï¼Œå°†Jenkinsçš„Secret token ä¸Build URL å¤åˆ¶åˆ°gitlabä¸­</p><p>æ³¨æ„ï¼š åœ¨é¡¹ç›®è®¾ç½®ä¸­çš„é›†æˆ</p><p><img src="/1190037-20171201192718448-1860661215-1581427002307.png" alt="img"></p><p>ä¿å­˜ä¹‹å‰å…ˆè¿›ç¨‹æµ‹è¯•ï¼Œæµ‹è¯•æˆåŠŸåè¿›è¡Œä¿å­˜</p><p><img src="/1190037-20171201192726448-895582851-1581427002307.png" alt="img"></p><p> åœ¨gitlabè¿›è¡Œä¸Šä¼ æ–‡ä»¶ï¼Œå¯ä»¥æµ‹è¯•ã€‚</p><p>åœ¨æ—¥å¿—ä¸­æ˜¾ç¤ºæ˜¯ Started by GitLab push by Administrator å³è¡¨ç¤ºè‡ªåŠ¨é›†æˆæˆåŠŸ</p><p><img src="/1190037-20171201192733104-716903443-1581427002307.png" alt="img"></p><h4 id="5ã€é”™è¯¯è§£å†³"><a href="#5ã€é”™è¯¯è§£å†³" class="headerlink" title="5ã€é”™è¯¯è§£å†³"></a>5ã€é”™è¯¯è§£å†³</h4><ul><li><p><strong>é”™è¯¯æç¤ºï¼š</strong></p><pre class="line-numbers language-none"><code class="language-none">#å¾ˆå¤šæœ‹å‹ä½¿ç”¨æœ€æ–°ç‰ˆæœ¬çš„gitlabåšè‡ªåŠ¨éƒ¨ç½²æ—¶ï¼Œåœ¨å¢åŠ webé’©å­é‚£ä¸€æ­¥ï¼Œ#ç‚¹å‡»test  push eventsæ—¶ä¼šæŠ¥é”™ï¼šUrl is blocked: Requests to the local network are not allowed<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre><p><img src="/b36a6a1bc5d58b0186618d020a801cc7-1581427002307.png" alt="Gitlab+Jenkinså®ç°è‡ªåŠ¨éƒ¨ç½²"></p></li><li><p>è§£å†³æ–¹æ³•ï¼š</p><p>è¿™æ˜¯å› ä¸ºæ–°ç‰ˆçš„gitlabä¸ºäº†å®‰å…¨é»˜è®¤ç¦æ­¢äº†æœ¬åœ°å±€åŸŸç½‘åœ°å€è°ƒç”¨web hook<br>æˆ‘ä»¬åœ¨è®¾ç½®é‡Œå…è®¸å°±è¡Œï¼Œå…·ä½“æ­¥éª¤å¦‚ä¸‹ï¼š</p><p><img src="/2ac7f84e086f61d521781c3027576b1e-1581427002308.png" alt="Gitlab+Jenkinså®ç°è‡ªåŠ¨éƒ¨ç½²"><br><img src="/f13e07e857b8d7677bb04f2631692e06-1581427002308.png" alt="Gitlab+Jenkinså®ç°è‡ªåŠ¨éƒ¨ç½²"></p></li></ul><p><img src="/360%E6%88%AA%E5%9B%BE17370510273154-1581427002308.png" alt="360æˆªå›¾17370510273154"></p>]]></content>
      
      
      <categories>
          
          <category> Devops </category>
          
      </categories>
      
      
        <tags>
            
            <tag> jenkins </tag>
            
            <tag> CICD </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>CICDåŸºç¡€</title>
      <link href="/posts/24454.html"/>
      <url>/posts/24454.html</url>
      
        <content type="html"><![CDATA[<h1 id="CI-x2F-CDåŸºç¡€"><a href="#CI-x2F-CDåŸºç¡€" class="headerlink" title="CI&#x2F;CDåŸºç¡€"></a>CI&#x2F;CDåŸºç¡€</h1><h2 id="ä¸€ã€ä»£ç ä¸Šçº¿æ–¹æ¡ˆ"><a href="#ä¸€ã€ä»£ç ä¸Šçº¿æ–¹æ¡ˆ" class="headerlink" title="ä¸€ã€ä»£ç ä¸Šçº¿æ–¹æ¡ˆ"></a>ä¸€ã€ä»£ç ä¸Šçº¿æ–¹æ¡ˆ</h2><h4 id="1ã€æ—©æœŸæ‰‹åŠ¨éƒ¨ç½²ä»£ç "><a href="#1ã€æ—©æœŸæ‰‹åŠ¨éƒ¨ç½²ä»£ç " class="headerlink" title="1ã€æ—©æœŸæ‰‹åŠ¨éƒ¨ç½²ä»£ç "></a>1ã€æ—©æœŸæ‰‹åŠ¨éƒ¨ç½²ä»£ç </h4><ul><li><p>çº¯æ‰‹åŠ¨Scpã€Rsyncä¸Šä¼ ä»£ç ã€‚</p></li><li><p>çº¯æ‰‹åŠ¨ç™»é™†ï¼ŒGit pull æˆ–è€… Svn updateã€‚</p></li><li><p>çº¯æ‰‹åŠ¨xftpã€ftpã€filezillaä¸Šä¼ ä»£ç ã€‚</p></li><li><p>å¼€å‘å‘é€å‹ç¼©åŒ…ï¼Œrzä¸Šä¼ ï¼Œè§£å‹éƒ¨ç½²ä»£ç ã€‚</p></li></ul><p><strong>ç¼ºç‚¹ï¼š</strong></p><ul><li><p>å…¨ç¨‹è¿ç»´å‚ä¸ï¼Œå ç”¨å¤§é‡æ—¶é—´ã€‚</p></li><li><p>å¦‚æœèŠ‚ç‚¹å¤šï¼Œä¸Šçº¿é€Ÿåº¦æ…¢ã€‚</p></li><li><p>äººä¸ºå¤±è¯¯å¤šï¼Œç›®å½•ç®¡ç†æ··ä¹±ã€‚ </p></li><li><p>å›æ»šä¸åŠæ—¶ï¼Œæˆ–è€…éš¾ä»¥å›é€€ã€‚</p></li></ul><p><strong>ä¸Šçº¿æ–¹æ¡ˆç¤ºæ„å›¾ï¼š</strong></p><p><img src="/1190037-20171201192743261-564020995-1581427002308.png" alt="img"></p><h4 id="2ã€åˆç†åŒ–ä¸Šçº¿æ–¹æ¡ˆ"><a href="#2ã€åˆç†åŒ–ä¸Šçº¿æ–¹æ¡ˆ" class="headerlink" title="2ã€åˆç†åŒ–ä¸Šçº¿æ–¹æ¡ˆ"></a>2ã€åˆç†åŒ–ä¸Šçº¿æ–¹æ¡ˆ</h4><ul><li><p>å¼€å‘äººå‘˜(rd)éœ€åœ¨ä¸ªäººç”µè„‘æ­å»ºLAMPç¯å¢ƒæµ‹è¯•å¼€å‘å¥½çš„ç½‘ç«™ä»£ç ï¼Œå¹¶ä¸”åœ¨åŠå…¬å®¤æˆ– IDCæœºæˆ¿çš„æµ‹è¯•ç¯å¢ƒæµ‹è¯•é€šè¿‡ï¼Œæœ€å¥½æœ‰ä¸“èŒæµ‹è¯•äººå‘˜(ts)ã€‚</p></li><li><p>ç¨‹åºä»£ç ä¸Šçº¿è¦è§„å®šæ—¶é—´ï¼Œä¾‹å¦‚ï¼šä¸‰å¤©ä¸Šçº¿ä¸€æ¬¡ï¼Œå¦‚ç½‘ç«™éœ€ç»å¸¸æ›´æ–°å¯æ¯å¤©ä¸‹åˆ 20 ç‚¹ä¸Šçº¿ï¼Œè¿™ä¸ªçœ‹ç½‘ç«™ä¸šåŠ¡æ€§è´¨è€Œå®šï¼ŒåŸåˆ™å°±æ˜¯å½±å“ç”¨æˆ·ä½“éªŒæœ€å°ã€‚</p></li><li><p>ä»£ç ä¸Šçº¿ä¹‹å‰éœ€å¤‡ä»½ï¼Œç½‘ç«™ç¨‹åºå‡ºäº†é—®é¢˜æ–¹ä¾¿å›é€€ï¼Œå¦å¤–ï¼Œä»ä¸Šçº¿æŠ€å·§ä¸Šè®²ï¼Œä¸Šä¼ ä»£ç æ—¶å°½å¯èƒ½å…ˆä¼ åˆ°æœåŠ¡å™¨ç½‘ç«™ä¸´æ—¶ç›®å½•ï¼Œä¼ å®Œæ•´åä¸€æ­¥mvè¿‡å»ï¼Œæˆ–è€…é€šè¿‡Inåšè½¯é“¾æ¥â€” çº¿ä¸Šæ›´æ–°ä»£ç çš„æ€è·¯ã€‚å¦‚æœä¸¥æ ¼æ›´æ–°ï¼ŒæŠŠåº”ç”¨æœåŠ¡å™¨ä»é›†ç¾¤èŠ‚ç‚¹å¹³æ»‘ä¸‹çº¿ï¼Œç„¶åæ›´æ–°ã€‚</p></li><li><p>å°½é‡ç”±è¿ç»´äººå‘˜ç®¡ç†ä¸Šçº¿ï¼Œå¯¹äºä»£ç çš„åŠŸèƒ½æ€§ï¼Œå¼€å‘äººå‘˜æ›´åœ¨æ„ï¼Œè€Œå¯¹äºä»£ç çš„æ€§èƒ½ä¼˜åŒ–å’Œä¸Šçº¿åæœåŠ¡å™¨çš„ç¨³å®šï¼Œè¿ç»´æ›´åœ¨æ„æœåŠ¡å™¨çš„ç¨³å®šï¼Œå› æ­¤ï¼Œå¦‚æœç½‘ç«™å®•æœºé—®é¢˜å½’è¿ç»´ç®¡ï¼Œå°±è¦è®©è¿ç»´ä¸Šçº¿ï¼Œè¿™æ ·æ›´è§„èŒƒç§‘å­¦ã€‚å¦åˆ™ï¼Œå¼€å‘éšæ„æ›´æ–°ï¼Œå‡ºäº†é—®é¢˜è¿ç»´è´Ÿè´£ï¼Œè¿™æ ·å°±é”™äº†ï¼Œè¿ç»´æ°¸è¿œæ— æ³•æŠ¬å¤´ã€‚</p></li></ul><p><img src="/1190037-20171201192752386-122301749-1581427002308.png" alt="img"></p><p>â€‹     <strong>webä»£ç è§„èŒƒåŒ–ä¸Šçº¿æµç¨‹å›¾</strong></p><h4 id="3ã€å¤§å‹ä¼ä¸šä¸Šçº¿åˆ¶åº¦å’Œæµç¨‹"><a href="#3ã€å¤§å‹ä¼ä¸šä¸Šçº¿åˆ¶åº¦å’Œæµç¨‹" class="headerlink" title="3ã€å¤§å‹ä¼ä¸šä¸Šçº¿åˆ¶åº¦å’Œæµç¨‹"></a>3ã€å¤§å‹ä¼ä¸šä¸Šçº¿åˆ¶åº¦å’Œæµç¨‹</h4><p><strong>JAVAä»£ç ç¯å¢ƒ</strong>ä¸Šçº¿æ—¶ï¼Œæœ‰æ•°å°æœºå™¨åŒæ—¶éœ€è¦æ›´æ–°æˆ–è€…åˆ†æ‰¹æ›´æ–° </p><ul><li><p>æœ¬åœ°å¼€å‘äººå‘˜å–svnä»£ç ã€‚å½“å¤©ä¸Šçº¿æäº¤åˆ°trunkï¼Œå¦åˆ™ï¼Œé•¿æœŸé¡¹ç›®å•å¼€åˆ†æ”¯å¼€å‘ï¼Œç„¶ååœ¨åˆå¹¶ä¸»çº¿(trunk)</p></li><li><p>åŠå…¬å†…ç½‘å¼€å‘æµ‹è¯•æ—¶ï¼Œç”±å¼€å‘äººå‘˜æˆ–é…ç½®ç®¡ç†å‘˜é€šè¿‡éƒ¨ç½²å¹³å°jenkinså®ç°ç»Ÿä¸€éƒ¨ç½²ï¼Œï¼ˆå³åœ¨éƒ¨ç½²å¹³å°ä¸Šæ§åˆ¶å¼€å‘æœºå™¨ä»svnå–ä»£ç ï¼Œç¼–è¯‘ï¼Œæ‰“åŒ…ï¼Œå‘å¸ƒåˆ°å¼€å‘æœºï¼ŒåŒ…åå¦‚idc_dep.warï¼‰.</p></li><li><p>å¼€å‘äººå‘˜é€šçŸ¥æˆ–å’Œæµ‹è¯•äººå‘˜ä¸€èµ·æµ‹è¯•ç¨‹åºï¼Œæ²¡æœ‰é—®é¢˜åï¼Œç”±é…ç½®ç®¡ç†å‘˜æ‰“ä¸Šæ–°çš„tagæ ‡è®°ã€‚è¿™é‡Œè¦æ³¨æ„ï¼Œä¸åŒç¯å¢ƒçš„é…ç½®æ–‡ä»¶æ˜¯éšä»£ç åŒæ—¶å‘å¸ƒçš„ã€‚</p></li><li><p>é…ç½®ç®¡ç†å‘˜ï¼Œæ ¹æ®ä¸Šä¸€æ­¥çš„tagæ ‡è®°ï¼Œcheckoutå‡ºä¸Šçº¿ä»£ç ï¼Œå¹¶é…ç½®å¥½IDCæµ‹è¯•ç¯å¢ƒçš„æ‰€æœ‰é…ç½®ï¼Œæ‰§è¡Œç¼–è¯‘ï¼Œæ‰“åŒ…(mvn,ant)(phpä¸éœ€è¦æ‰“åŒ…)ï¼Œç„¶åå‘å¸ƒåˆ°IDCå†…çš„ç»Ÿä¸€åˆ†å‘æœåŠ¡å™¨ã€‚</p></li><li><p>é…ç½®ç®¡ç†å‘˜æˆ–SAä¸Šçº¿äººå‘˜ï¼ŒæŠŠåˆ†å‘çš„ç¨‹åºä»£ç å†…å®¹æ¨é€åˆ°ç›¸å…³æµ‹è¯•æœåŠ¡å™¨ï¼ˆåŒ…åå¦‚idc_test.warï¼‰ï¼Œç„¶åé€šçŸ¥å¼€å‘åŠæµ‹è¯•äººå‘˜è¿›è¡Œæµ‹è¯•ã€‚å¦‚æœæœ‰é—®é¢˜å‘ä¸Šå›é€€ï¼Œç»§ç»­ä¿®æ”¹ã€‚</p></li><li><p>å¦‚æœIDCæµ‹è¯•æ²¡æœ‰é—®é¢˜ï¼Œç»§ç»­æ‰“å¥½tagæ ‡è®°ï¼Œæ­¤æ—¶ï¼Œé…ç½®ç®¡ç†å‘˜ï¼Œæ ¹æ®ä¸Šæ­¥çš„tagæ ‡è®°ï¼Œcheckoutå‡ºæµ‹è¯•å¥½çš„ä»£ç ï¼Œå¹¶é…ç½®å¥½IDCæ­£å¼ç¯å¢ƒçš„æ‰€æœ‰é…ç½®ï¼Œæ‰§è¡Œç¼–è¯‘ï¼Œæ‰“åŒ…(mvn,ant)(phpä¸éœ€è¦æ‰“åŒ…)ï¼Œç„¶åå‘å¸ƒåˆ°IDCå†…çš„ç»Ÿä¸€åˆ†å‘æœåŠ¡å™¨ä¸»æœºï¼Œå‡†å¤‡æ‰¹é‡å‘å¸ƒã€‚</p></li><li><p>é…ç½®ç®¡ç†å‘˜æˆ–SAä¸Šçº¿äººå‘˜ï¼ŒæŠŠåˆ†å‘çš„å†…å®¹æ¨é€åˆ°ç›¸å…³æ­£å¼æœåŠ¡å™¨ï¼ˆåŒ…åå¦‚idc_product.warï¼‰,ç„¶åé€šçŸ¥å¼€å‘åŠæµ‹è¯•äººå‘˜è¿›è¡Œæµ‹è¯•ã€‚å¦‚æœæœ‰é—®é¢˜ç›´æ¥å‘å¸ƒå›æ»šæŒ‡ä»¤ã€‚</p></li></ul><p> IDCæ­£å¼ä¸Šçº¿çš„è¿‡ç¨‹å¯¹äºJAVAç¨‹åºï¼Œå¯ä»¥æ˜¯ABç»„åˆ†ç»„ä¸Šçº¿çš„æ€è·¯ï¼Œå³å¹³æ»‘ä¸‹çº¿ä¸€åŠçš„æœåŠ¡å™¨ï¼Œç„¶åå‘å¸ƒæ›´æ–°ä»£ç ï¼Œé‡å¯æµ‹è¯•ï¼Œæ— é—®é¢˜åï¼ŒæŒ‚ä¸Šæ›´æ–°åçš„æœåŠ¡å™¨ï¼ŒåŒæ—¶å†å¹³æ»‘ä¸‹çº¿å¦ä¸€åŠçš„æœåŠ¡å™¨ï¼Œç„¶åå‘å¸ƒæ›´æ–°ä»£ç æµ‹è¯•ï¼ˆæˆ–è€…ç›´æ¥å‘å¸ƒåï¼Œé‡å¯ï¼ŒæŒ‚ä¸Šçº¿ï¼‰</p><h4 id="4-ã€phpç¨‹åºä»£ç ä¸Šçº¿çš„å…·ä½“æ–¹æ¡ˆ"><a href="#4-ã€phpç¨‹åºä»£ç ä¸Šçº¿çš„å…·ä½“æ–¹æ¡ˆ" class="headerlink" title="4 ã€phpç¨‹åºä»£ç ä¸Šçº¿çš„å…·ä½“æ–¹æ¡ˆ"></a>4 ã€phpç¨‹åºä»£ç ä¸Šçº¿çš„å…·ä½“æ–¹æ¡ˆ</h4><p> å¯¹äºPHPä¸Šçº¿æ–¹æ³•ï¼šå‘å¸ƒä»£ç æ—¶ï¼ˆä¹Ÿéœ€è¦æµ‹è¯•æµç¨‹ï¼‰å¯ä»¥ç›´æ¥å‘å¸ƒåˆ°æ­£å¼çº¿ä¸´æ—¶ç›®å½• ï¼Œç„¶åmvæˆ–æ›´æ”¹linkçš„æ–¹å¼å‘å¸ƒåˆ°æ­£å¼ä¸Šçº¿ç›®å½• ï¼Œä¸éœ€è¦é‡å¯httpæœåŠ¡ã€‚è¿™æ˜¯æ–°æœ—ï¼Œèµ¶é›†çš„ä¸Šçº¿æ–¹æ¡ˆã€‚</p><h4 id="5-ã€Javaç¨‹åºä»£ç ä¸Šçº¿çš„å…·ä½“æ–¹æ¡ˆ"><a href="#5-ã€Javaç¨‹åºä»£ç ä¸Šçº¿çš„å…·ä½“æ–¹æ¡ˆ" class="headerlink" title="5 ã€Javaç¨‹åºä»£ç ä¸Šçº¿çš„å…·ä½“æ–¹æ¡ˆ"></a>5 ã€Javaç¨‹åºä»£ç ä¸Šçº¿çš„å…·ä½“æ–¹æ¡ˆ</h4><p>å¯¹äºjavaä¸Šçº¿æ–¹æ³•:è¾ƒå¤§å…¬å¸éœ€è¦åˆ†ç»„å¹³æ»‘ä¸Šçº¿ï¼ˆå¦‚ä»è´Ÿè½½å‡è¡¡å™¨ä¸Šæ‘˜æ‰ä¸€åŠçš„æœåŠ¡å™¨ï¼‰ï¼Œå‘å¸ƒä»£ç åï¼Œé‡å¯æœåŠ¡å™¨æµ‹è¯•ï¼Œæ²¡é—®é¢˜åï¼ŒæŒ‚ä¸Šä¸Šå¥½çº¿çš„ä¸€åŠï¼Œå†ä¸‹å¦å¤–ä¸€åŠã€‚å¦‚æœå‰ç«¯æœ‰DNSæ™ºèƒ½è§£æï¼Œä¸Šçº¿è¿˜å¯ä»¥åˆ†åœ°åŒºä¸Šçº¿è‹¥å¹²æœåŠ¡å™¨ï¼Œé€æ¸æ™®åŠåˆ°å…¨å›½çš„æœåŠ¡å™¨ï¼Œè¿™ä¸ªè¢«ç§°ä¸ºâ€œç°åº¦å‘å¸ƒâ€ï¼Œåœ¨åé¢é—¨æˆ·ç½‘ç«™ä¸Šçº¿çš„çŸ¥è¯†é‡Œæˆ‘ä»¬åœ¨è®²è§£ã€‚</p><h4 id="6-ã€ä»£ç ä¸Šçº¿è§£å†³æ–¹æ¡ˆæ³¨æ„äº‹é¡¹"><a href="#6-ã€ä»£ç ä¸Šçº¿è§£å†³æ–¹æ¡ˆæ³¨æ„äº‹é¡¹" class="headerlink" title="6 ã€ä»£ç ä¸Šçº¿è§£å†³æ–¹æ¡ˆæ³¨æ„äº‹é¡¹"></a>6 ã€ä»£ç ä¸Šçº¿è§£å†³æ–¹æ¡ˆæ³¨æ„äº‹é¡¹</h4><p>ä¸Šçº¿çš„æµç¨‹é‡Œï¼ŒåŠå…¬å®¤æµ‹è¯•ç¯å¢ƒâ€“&gt;IDCæµ‹è¯•ç¯å¢ƒâ€“&gt;æ­£å¼ç”Ÿäº§ç¯å¢ƒï¼Œæ‰€æœ‰ç¯å¢ƒä¸­çš„æ‰€æœ‰è½¯ä»¶å‡åº”ç‰ˆæœ¬ç»Ÿä¸€ï¼Œå…¶æ¬¡å°½é‡å•ä¸€ï¼Œå¦åˆ™å°†åæ‚£æ— ç©·ï¼Œå¼€å‘æµ‹è¯•æˆåŠŸï¼ŒIDCæµ‹è¯•å°±å¯èƒ½æœ‰é—®é¢˜ï¼ˆå¦‚:æ“ä½œç³»ç»Ÿï¼ŒwebæœåŠ¡å™¨ï¼Œjdk,php,tomcat,resinç­‰ç‰ˆæœ¬ï¼‰</p><ul><li><p>å¼€å‘å›¢é˜Ÿå°ç»„åŠå…¬å†…éƒ¨æµ‹è¯•ç¯å¢ƒæµ‹è¯•ï¼ˆè¯¥æµ‹è¯•ç¯å¢ƒå±äºå¼€å‘å°ç»„ç»´æŠ¤ï¼Œæˆ–å®šæ—¶è‡ªåŠ¨æ›´æ–°ä»£ç ï¼‰ï¼Œä»£ç æœ‰é—®é¢˜è¿”å›ç»™æŸå¼€å‘äººå‘˜é‡æ–°å¼€å‘ã€‚</p></li><li><p>æœ‰ä¸“é—¨çš„æµ‹è¯•å·¥ç¨‹å¸ˆï¼Œç¨‹åºæœ‰é—®é¢˜ç›´æ¥è¿”å›ç»™å¼€å‘äººå‘˜ï¼ˆæ­¤æ—¶è¿”å›çš„ä¸€èˆ¬ä¸ºç¨‹åºçš„BUGï¼Œç§°ä¸ºBUGåº“ï¼‰ï¼Œæ— é—®é¢˜è¿›è¡ŒIDCæµ‹è¯•</p></li><li><p>IDCæµ‹è¯•ç”±æµ‹è¯•äººå‘˜å’Œè¿ç»´äººå‘˜å‚ä¸ï¼Œå«IDCtest,è¿›è¡Œç¨‹åºçš„å‹åŠ›æµ‹è¯•ï¼Œæœ‰é—®é¢˜ç›´æ¥è¿”å›ç»™å¼€å‘äººå‘˜ï¼Œæ— é—®é¢˜è¿›è¡Œçº¿ä¸Šç¯å¢ƒä¸Šçº¿ã€‚</p></li><li><p>æ•°å°æœåŠ¡å™¨ä»£ç åˆ†å‘ä¸Šçº¿æ–¹æ¡ˆä¸¾ä¾‹ï¼ˆJAVAç¨‹åºï¼‰</p><p>A:å‡è®¾åŒä¸šåŠ¡æœåŠ¡å™¨æœ‰6å°ï¼Œå°†æœåŠ¡å™¨åˆ†ä¸ºA,Bä¸¤ç»„ï¼ŒAç»„ä¸‰å°ï¼ŒBç»„ä¸‰å°ï¼Œå…ˆå¯¹Aç»„è¿›è¡Œä»è´Ÿè½½å‡è¡¡å™¨ä¸Šå¹³æ»‘ä¸‹çº¿ï¼ŒBç»„æ­£å¸¸æä¾›æœåŠ¡ï¼Œé¿å…æœåŠ¡å™¨å› ä¸Šçº¿å½±å“ä¸šåŠ¡ã€‚</p><p>B:ä¸‹çº¿è¿‡ç¨‹æ˜¯é€šè¿‡è„šæœ¬å°†Aç»„æœåŠ¡å™¨ä»RSæ± ï¼ˆLVS,NGINX,HAPROXY,F5ç­‰å‡æœ‰å¹³æ»‘æ–¹æ¡ˆï¼‰ä¸­è¸¢å‡ºï¼Œé¿å…è´Ÿè£å‡è¡¡å™¨å°†è¯·æ±‚å‘é€ç»™Aç»„æœåŠ¡å™¨ï¼ˆæ­¤æ—¶çš„æ—¶é—´åº”è¯¥ä¸ºç½‘ç«™æµé‡å°‘æ—¶ï¼Œä¸€èˆ¬ä¸ºæ™šä¸Šï¼‰</p><p>C:å°†ä»£ç åˆ†å‘åˆ°Aç»„æœåŠ¡å™¨çš„ç«™ç‚¹ç›®å½•ä¸‹ï¼Œå¯¹Aç»„æœåŠ¡å™¨ä¸Šçº¿å¹¶é‡å¯æœåŠ¡ï¼Œå¹¶ç”±ä¸“ä¸šçš„æµ‹è¯•äººå‘˜è¿›è¡Œè®¿é—®æµ‹è¯•ï¼Œæµ‹è¯•æˆåŠŸåï¼ŒæŒ‚ä¸ŠAç»„çš„æœåŠ¡å™¨ï¼ŒåŒæ—¶ä¸‹çº¿Bç»„æœåŠ¡å™¨ï¼ŒBç»„ä»£ç ä¸Šçº¿æ“ä½œæµ‹è¯•ç­‰å’ŒAç»„ç›¸åŒï¼ŒæœŸé—´ä¹Ÿè¦è§‚å¯Ÿä¸Šçº¿æä¾›æœåŠ¡çš„æœåŠ¡å™¨çŠ¶å†µï¼Œæœ‰é—®é¢˜åŠæ—¶å›æ»šã€‚</p></li><li><p>å¦‚æœæ˜¯PHPç¨‹åºï¼Œåˆ™ä¸Šçº¿å¯ä»¥ç®€å•åŒ–ï¼Œç›´æ¥å°†ä¸Šçº¿ä»£ç ï¼ˆæœ€å¥½å…¨é‡ï¼‰å‘å¸ƒåˆ°æ‰€æœ‰ä¸Šçº¿æœåŠ¡å™¨çš„ç‰¹å®šç›®å½•åï¼Œåˆ†å‘å®Œæˆåï¼Œä¸€æ¬¡æ€§mvæˆ–lnåˆ°ç«™ç‚¹ç›®å½•ï¼Œå½“ç„¶æµ‹è¯•ä¹Ÿæ˜¯å°‘ä¸äº†çš„ã€‚æµ‹è¯•é™¤äº†äººå‘˜æµ‹è¯•å¤–ï¼Œè¿˜æœ‰å„ç§æµ‹è¯•è„šæœ¬æµ‹è¯•å„ä¸ªç›¸å…³ä¸šåŠ¡æ¥å£ã€‚</p></li></ul><h2 id="äºŒã€ç†è§£æŒç»­é›†æˆã€æŒç»­äº¤ä»˜ã€æŒç»­éƒ¨ç½²"><a href="#äºŒã€ç†è§£æŒç»­é›†æˆã€æŒç»­äº¤ä»˜ã€æŒç»­éƒ¨ç½²" class="headerlink" title="äºŒã€ç†è§£æŒç»­é›†æˆã€æŒç»­äº¤ä»˜ã€æŒç»­éƒ¨ç½²"></a>äºŒã€ç†è§£æŒç»­é›†æˆã€æŒç»­äº¤ä»˜ã€æŒç»­éƒ¨ç½²</h2><p>è½¯ä»¶å¼€å‘çš„è¿ç»­æ–¹æ³•åŸºäºè‡ªåŠ¨æ‰§è¡Œè„šæœ¬ï¼Œä»¥æœ€å¤§é™åº¦åœ°å‡å°‘åœ¨å¼€å‘åº”ç”¨ç¨‹åºæ—¶å¼•å…¥é”™è¯¯çš„å¯èƒ½æ€§ã€‚ä»æ–°ä»£ç çš„å¼€å‘åˆ°éƒ¨ç½²ï¼Œå®ƒä»¬éœ€è¦è¾ƒå°‘çš„äººä¸ºå¹²é¢„ç”šè‡³æ ¹æœ¬ä¸éœ€è¦å¹²é¢„ã€‚å®ƒæ¶‰åŠåœ¨æ¯æ¬¡å°è¿­ä»£ä¸­ä¸æ–­æ„å»ºï¼Œæµ‹è¯•å’Œéƒ¨ç½²ä»£ç æ›´æ”¹ï¼Œä»è€Œå‡å°‘åŸºäºæœ‰ç¼ºé™·æˆ–å¤±è´¥çš„å…ˆå‰ç‰ˆæœ¬å¼€å‘æ–°ä»£ç çš„æœºä¼šã€‚æœ‰ä¸‰ç§ä¸»è¦æ–¹æ³•ï¼Œåˆ†åˆ«ä¸ºæŒç»­é›†æˆã€æŒç»­äº¤ä»˜ã€æŒç»­éƒ¨ç½²ï¼Œæ¯ç§æ–¹æ³•éƒ½æ ¹æ®æœ€é€‚åˆæ‚¨çš„ç­–ç•¥è¿›è¡Œåº”ç”¨ã€‚</p><p><img src="/1352872-20180728202111287-1863851599.png" alt="img"></p><h3 id="1ã€æŒç»­é›†æˆ"><a href="#1ã€æŒç»­é›†æˆ" class="headerlink" title="1ã€æŒç»­é›†æˆ"></a>1ã€æŒç»­é›†æˆ</h3><p><strong>ä»£ç åˆå¹¶ï¼Œæ„å»ºï¼Œéƒ¨ç½²ï¼Œæµ‹è¯•éƒ½åœ¨ä¸€èµ·ï¼Œä¸æ–­åœ°æ‰§è¡Œè¿™ä¸ªè¿‡ç¨‹ï¼Œå¹¶å¯¹ç»“æœåé¦ˆ</strong>ã€‚</p><p>æŒç»­é›†æˆï¼ˆè‹±è¯­ï¼šContinuous integrationï¼Œç¼©å†™ä¸º <strong>CI</strong>ï¼‰ï¼Œä¸€ç§è½¯ä»¶å·¥ç¨‹æµç¨‹ï¼Œå°†æ‰€æœ‰å·¥ç¨‹å¸ˆå¯¹äºè½¯ä»¶çš„å·¥ä½œå¤æœ¬ï¼Œæ¯å¤©é›†æˆæ•°æ¬¡åˆ°å…±ç”¨ä¸»çº¿ï¼ˆmainlineï¼‰ä¸Šã€‚</p><p>è¿™ä¸ªåç§°æœ€æ—©ç”±è‘›æ¥è¿ªÂ·å¸ƒåŒºï¼ˆGrady Boochï¼‰åœ¨ä»–çš„å¸ƒåŒºæ–¹æ³•ä¸­æå‡ºï¼Œä½†æ˜¯ä»–å¹¶æ²¡æœ‰æåˆ°è¦æ¯å¤©é›†æˆæ•°æ¬¡ã€‚ä¹‹åæˆä¸ºæé™ç¼–ç¨‹ï¼ˆextreme programmingï¼Œç¼©å†™ä¸ºXPï¼‰çš„ä¸€éƒ¨åˆ†ã€‚åœ¨æµ‹è¯•é©±åŠ¨å¼€å‘ï¼ˆTDDï¼‰çš„ä½œæ³•ä¸­ï¼Œé€šå¸¸è¿˜ä¼šæ­é…è‡ªåŠ¨å•å…ƒæµ‹è¯•ã€‚</p><p>æŒç»­é›†æˆçš„æå‡ºï¼Œä¸»è¦æ˜¯ä¸ºäº†è§£å†³è½¯ä»¶è¿›è¡Œç³»ç»Ÿé›†æˆæ—¶é¢ä¸´çš„å„é¡¹é—®é¢˜ï¼Œæé™ç¼–ç¨‹ç§°è¿™äº›é—®é¢˜ä¸ºé›†æˆåœ°ç‹±ï¼ˆintegration hellï¼‰ã€‚</p><p><img src="/1190037-20171201191840448-1304029709.png" alt="img"></p><p>æŒç»­é›†æˆä¸»è¦æ˜¯å¼ºè°ƒå¼€å‘äººå‘˜æäº¤äº†æ–°ä»£ç ä¹‹åï¼Œç«‹åˆ»è¿›è¡Œæ„å»ºã€ï¼ˆå•å…ƒï¼‰æµ‹è¯•ã€‚æ ¹æ®æµ‹è¯•ç»“æœï¼Œæˆ‘ä»¬å¯ä»¥ç¡®å®šæ–°ä»£ç å’ŒåŸæœ‰ä»£ç èƒ½å¦æ­£ç¡®åœ°é›†æˆåœ¨ä¸€èµ·ã€‚ç®€å•æ¥è®²å°±æ˜¯ï¼šé¢‘ç¹åœ°ï¼ˆä¸€å¤©å¤šæ¬¡ï¼‰å°†ä»£ç é›†æˆåˆ°ä¸»å¹²ã€‚</p><p><strong>æŒç»­é›†æˆçš„ç›®çš„</strong></p><ul><li><p>åŠæ—©å‘ç°é›†æˆé”™è¯¯ä¸”ç”±äºä¿®è®¢çš„å†…å®¹è¾ƒå°æ‰€ä»¥æ˜“äºè¿½è¸ªï¼Œè¿™å¯ä»¥èŠ‚çœé¡¹ç›®çš„æ—¶é—´ä¸æˆæœ¬ã€‚</p></li><li><p>é¿å…å‘å¸ƒæ—¥æœŸçš„å‰ä¸€åˆ†é’Ÿå‘ç”Ÿæ··ä¹±ï¼Œå½“æ¯ä¸ªäººéƒ½ä¼šå°è¯•ä¸ºä»–ä»¬æ‰€é€ æˆçš„é‚£ä¸€ç‚¹ç‚¹ä¸å…¼å®¹çš„ç‰ˆæœ¬åšæ£€æŸ¥ã€‚</p></li><li><p>å½“å•å…ƒæµ‹è¯•å¤±æˆ–å‘ç”Ÿé”™è¯¯ï¼Œè‹¥å¼€å‘äººå‘˜éœ€è¦åœ¨ä¸é™¤é”™çš„æƒ…å†µä¸‹è¿˜åŸä»£ç åº“åˆ°ä¸€ä¸ªæ²¡æœ‰é—®é¢˜çš„çŠ¶æ€ï¼Œåªéœ€è¦æ”¾å¼ƒä¸€å°éƒ¨åˆ†çš„æ›´æ”¹ (å› ä¸ºé›†æˆçš„æ¬¡æ•°é¢‘ç¹)ã€‚</p></li><li><p>è®© â€œæœ€æ–°â€ çš„ç¨‹åºå¯ä¿æŒå¯ç”¨çš„çŠ¶æ€ä¾›æµ‹è¯•ã€å±•ç¤ºæˆ–å‘å¸ƒç”¨ã€‚</p></li><li><p>é¢‘ç¹çš„æäº¤ä»£ç ä¼šä¿ƒä½¿å¼€å‘äººå‘˜åˆ›å»ºæ¨¡å—åŒ–ï¼Œä½å¤æ‚æ€§çš„ä»£ç ã€‚</p></li><li><p>é˜²æ­¢åˆ†æ”¯å¤§å¹…åç¦»ä¸»å¹²ã€‚å¦‚æœä¸æ˜¯ç»å¸¸é›†æˆï¼Œä¸»å¹²åˆåœ¨ä¸æ–­æ›´æ–°ï¼Œä¼šå¯¼è‡´ä»¥åé›†æˆçš„éš¾åº¦å˜å¤§ï¼Œç”šè‡³éš¾ä»¥é›†æˆã€‚</p></li></ul><h3 id="2ã€æŒç»­äº¤ä»˜"><a href="#2ã€æŒç»­äº¤ä»˜" class="headerlink" title="2ã€æŒç»­äº¤ä»˜"></a>2ã€æŒç»­äº¤ä»˜</h3><p><strong>éƒ¨ç½²åˆ°æµ‹è¯•ç¯å¢ƒã€é¢„ç”Ÿäº§ç¯å¢ƒ</strong></p><p>æŒç»­äº¤ä»˜ï¼ˆè‹±è¯­ï¼šContinuous deliveryï¼Œç¼©å†™ä¸º <strong>CD</strong>ï¼‰ï¼Œæ˜¯ä¸€ç§è½¯ä»¶å·¥ç¨‹æ‰‹æ³•ï¼Œè®©è½¯ä»¶äº§å“çš„äº§å‡ºè¿‡ç¨‹åœ¨ä¸€ä¸ªçŸ­å‘¨æœŸå†…å®Œæˆï¼Œä»¥ä¿è¯è½¯ä»¶å¯ä»¥ç¨³å®šã€æŒç»­çš„ä¿æŒåœ¨éšæ—¶å¯ä»¥é‡Šå‡ºçš„çŠ¶å†µã€‚</p><p>å®ƒçš„ç›®æ ‡åœ¨äºè®©è½¯ä»¶çš„å»ºç½®ã€æµ‹è¯•ä¸é‡Šå‡ºå˜å¾—æ›´å¿«ä»¥åŠæ›´é¢‘ç¹ã€‚è¿™ç§æ–¹å¼å¯ä»¥å‡å°‘è½¯ä»¶å¼€å‘çš„æˆæœ¬ä¸æ—¶é—´ï¼Œå‡å°‘é£é™©ã€‚</p><p><img src="/1190037-20171201191850511-1013536040.png" alt="img"></p><p>æŒç»­äº¤ä»˜åœ¨æŒç»­é›†æˆçš„åŸºç¡€ä¸Šï¼Œå°†é›†æˆåçš„ä»£ç éƒ¨ç½²åˆ°æ›´è´´è¿‘çœŸå®è¿è¡Œç¯å¢ƒçš„ã€Œç±»ç”Ÿäº§ç¯å¢ƒã€ï¼ˆproduction-like environmentsï¼‰ä¸­ã€‚æ¯”å¦‚ï¼Œæˆ‘ä»¬å®Œæˆå•å…ƒæµ‹è¯•åï¼Œå¯ä»¥æŠŠä»£ç éƒ¨ç½²åˆ°è¿æ¥æ•°æ®åº“çš„Staging ç¯å¢ƒä¸­æ›´å¤šçš„æµ‹è¯•ã€‚å¦‚æœä»£ç æ²¡æœ‰é—®é¢˜ï¼Œå¯ä»¥ç»§ç»­æ‰‹åŠ¨éƒ¨ç½²åˆ°ç”Ÿäº§ç¯å¢ƒä¸­ã€‚</p><h3 id="3ã€æŒç»­éƒ¨ç½²"><a href="#3ã€æŒç»­éƒ¨ç½²" class="headerlink" title="3ã€æŒç»­éƒ¨ç½²"></a>3ã€æŒç»­éƒ¨ç½²</h3><p><strong>å°†æœ€ç»ˆäº§å“å‘å¸ƒåˆ°ç”Ÿæˆç¯å¢ƒï¼Œç»™ç”¨æˆ·ä½¿ç”¨</strong></p><p>æŒç»­éƒ¨ç½²ï¼ˆè‹±è¯­ï¼šContinuous Deploymentï¼Œç¼©å†™ä¸º <strong>CD</strong>ï¼‰ï¼Œæ˜¯æŒç»­äº¤ä»˜çš„ä¸‹ä¸€æ­¥ï¼ŒæŒ‡çš„æ˜¯ä»£ç é€šè¿‡è¯„å®¡ä»¥åï¼Œè‡ªåŠ¨éƒ¨ç½²åˆ°ç”Ÿäº§ç¯å¢ƒã€‚</p><p>æœ‰æ—¶å€™ï¼ŒæŒç»­éƒ¨ç½²ä¹Ÿä¸æŒç»­äº¤ä»˜æ··æ·†ã€‚æŒç»­éƒ¨ç½²æ„å‘³ç€æ‰€æœ‰çš„å˜æ›´éƒ½ä¼šè¢«è‡ªåŠ¨éƒ¨ç½²åˆ°ç”Ÿäº§ç¯å¢ƒä¸­ã€‚æŒç»­äº¤ä»˜æ„å‘³ç€æ‰€æœ‰çš„å˜æ›´éƒ½å¯ä»¥è¢«éƒ¨ç½²åˆ°ç”Ÿäº§ç¯å¢ƒä¸­ï¼Œä½†æ˜¯å‡ºäºä¸šåŠ¡è€ƒè™‘ï¼Œå¯ä»¥é€‰æ‹©ä¸éƒ¨ç½²ã€‚å¦‚æœè¦å®æ–½æŒç»­éƒ¨ç½²ï¼Œå¿…é¡»å…ˆå®æ–½æŒç»­äº¤ä»˜ã€‚</p><p><img src="/1190037-20171201191900433-349001067.png" alt="img"></p><p>æŒç»­éƒ¨ç½²å³åœ¨æŒç»­äº¤ä»˜çš„åŸºç¡€ä¸Šï¼ŒæŠŠéƒ¨ç½²åˆ°ç”Ÿäº§ç¯å¢ƒçš„è¿‡ç¨‹è‡ªåŠ¨åŒ–ã€‚</p><h2 id="ä¸‰ã€Maven-ç§æœ-Nexus3"><a href="#ä¸‰ã€Maven-ç§æœ-Nexus3" class="headerlink" title="ä¸‰ã€Maven ç§æœ Nexus3"></a>ä¸‰ã€Maven ç§æœ Nexus3</h2><h3 id="1ã€Mavenå’ŒNexus3-ç®€ä»‹"><a href="#1ã€Mavenå’ŒNexus3-ç®€ä»‹" class="headerlink" title="1ã€Mavenå’ŒNexus3 ç®€ä»‹"></a>1ã€Mavenå’ŒNexus3 ç®€ä»‹</h3><p>Mavenæ˜¯ä¸€ä¸ªé‡‡ç”¨çº¯Javaç¼–å†™çš„å¼€æºé¡¹ç›®ç®¡ç†å·¥å…·</p><p>é‡‡ç”¨ä¸€ç§è¢«ç§°ä¹‹ä¸ºProject Object Model(POM)æ¦‚å¿µæ¥ç®¡ç†é¡¹ç›®ï¼Œæ‰€æœ‰çš„é¡¹ç›®é…ç½®ä¿¡æ¯éƒ½è¢«å®šä¹‰åœ¨ä¸€ä¸ªå«åšPOM.xmlçš„æ–‡ä»¶ä¸­, é€šè¿‡è¯¥æ–‡ä»¶Mavenå¯ä»¥ç®¡ç†é¡¹ç›®çš„æ•´ä¸ªç”Ÿå‘½å‘¨æœŸï¼ŒåŒ…æ‹¬æ¸…é™¤ã€ç¼–è¯‘ï¼Œæµ‹è¯•ï¼ŒæŠ¥å‘Šã€æ‰“åŒ…ã€éƒ¨ç½²ç­‰ç­‰ã€‚</p><p>ç›®å‰Apacheä¸‹ç»å¤§å¤šæ•°é¡¹ç›®éƒ½å·²ç»é‡‡ç”¨Mavenè¿›è¡Œç®¡ç†. è€ŒMavenæœ¬èº«è¿˜æ”¯æŒå¤šç§æ’ä»¶, å¯ä»¥æ–¹ä¾¿æ›´çµæ´»çš„æ§åˆ¶é¡¹ç›®, å¼€å‘äººå‘˜çš„ä¸»è¦ä»»åŠ¡åº”è¯¥æ˜¯å…³æ³¨å•†ä¸šé€»è¾‘å¹¶å»å®ç°å®ƒ, è€Œä¸æ˜¯æŠŠæ—¶é—´æµªè´¹åœ¨å­¦ä¹ å¦‚ä½•åœ¨ä¸åŒçš„ç¯å¢ƒä¸­å»ä¾èµ–jaråŒ…,é¡¹ç›®éƒ¨ç½²ç­‰ã€‚</p><p>Mavenå’Œantéƒ½æ˜¯è½¯ä»¶æ„å»ºå·¥å…·ï¼ˆè½¯ä»¶ç®¡ç†å·¥å…·),Mavenæ¯”Antæ›´åŠ å¼ºå¤§ï¼Œå·²ç»å–ä»£äº†ant,jaråŒ…çš„å£°æ˜å¼ä¾èµ–æè¿°ã€‚Mavenæœ‰jaråŒ…çš„ä»“åº“ã€‚</p><p>ç§æœæ˜¯æ¶è®¾åœ¨å±€åŸŸç½‘çš„ä¸€ç§ç‰¹æ®Šçš„è¿œç¨‹ä»“åº“ï¼Œç›®çš„æ˜¯ä»£ç†è¿œç¨‹ä»“åº“åŠéƒ¨ç½²ç¬¬ä¸‰æ–¹æ„ä»¶ã€‚æœ‰äº†ç§æœä¹‹åï¼Œå½“ Maven éœ€è¦ä¸‹è½½æ„ä»¶æ—¶ï¼Œç›´æ¥è¯·æ±‚ç§æœï¼Œç§æœä¸Šå­˜åœ¨åˆ™ä¸‹è½½åˆ°æœ¬åœ°ä»“åº“ï¼›å¦åˆ™ï¼Œç§æœè¯·æ±‚å¤–éƒ¨çš„è¿œç¨‹ä»“åº“ï¼Œå°†æ„ä»¶ä¸‹è½½åˆ°ç§æœï¼Œå†æä¾›ç»™æœ¬åœ°ä»“åº“ä¸‹è½½ã€‚</p><p>ã€€ã€€<img src="/1167086-20180825103130887-988863302.jpg" alt="img"></p><p>å…¬å¸å¦‚æœæ²¡æœ‰mavenç§æœï¼Œåˆ™éœ€è¦ç”¨æ‰‹åŠ¨æ‰“jaråŒ…çš„æ–¹å¼æ·»åŠ ä¾èµ–</p><h3 id="2ã€å®‰è£…-Maven"><a href="#2ã€å®‰è£…-Maven" class="headerlink" title="2ã€å®‰è£… Maven"></a>2ã€å®‰è£… Maven</h3><h4 id="1ã€ä¸‹è½½-maven"><a href="#1ã€ä¸‹è½½-maven" class="headerlink" title="1ã€ä¸‹è½½ maven"></a>1ã€ä¸‹è½½ maven</h4><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token punctuation">[</span>root@qfedu.com ~<span class="token punctuation">]</span><span class="token comment"># wget http://mirrors.tuna.tsinghua.edu.cn/apache/maven/maven-3/3.5.4/binaries/apache-maven-3.5.4-bin.tar.gz</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><h4 id="2ã€è§£å‹å®‰è£…"><a href="#2ã€è§£å‹å®‰è£…" class="headerlink" title="2ã€è§£å‹å®‰è£…"></a>2ã€è§£å‹å®‰è£…</h4><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token punctuation">[</span>root@qfedu.com ~<span class="token punctuation">]</span><span class="token comment"># tar xf apache-maven-3.5.4-bin.tar.gz -C /usr/local/</span><span class="token punctuation">[</span>root@qfedu.com ~<span class="token punctuation">]</span><span class="token comment"># cd /usr/local/</span><span class="token punctuation">[</span>root@qfedu.com ~<span class="token punctuation">]</span><span class="token comment"># ln -s apache-maven-3.5.4/ maven</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre><h4 id="3ã€å®‰è£…-java-ç¯å¢ƒ"><a href="#3ã€å®‰è£…-java-ç¯å¢ƒ" class="headerlink" title="3ã€å®‰è£… java ç¯å¢ƒ"></a>3ã€å®‰è£… java ç¯å¢ƒ</h4><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token punctuation">[</span>root@qfedu.com ~<span class="token punctuation">]</span><span class="token comment"># tar xf jdk-8u201-linux-x64.tar.gz -C /usr/local/</span><span class="token punctuation">[</span>root@qfedu.com ~<span class="token punctuation">]</span><span class="token comment"># cd /usr/local/</span><span class="token punctuation">[</span>root@qfedu.com ~<span class="token punctuation">]</span><span class="token comment"># ln -s jdk1.8.0_201/ java</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre><h4 id="4ã€æ·»åŠ ç¯å¢ƒå˜é‡"><a href="#4ã€æ·»åŠ ç¯å¢ƒå˜é‡" class="headerlink" title="4ã€æ·»åŠ ç¯å¢ƒå˜é‡"></a>4ã€æ·»åŠ ç¯å¢ƒå˜é‡</h4><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token punctuation">[</span>root@qfedu.com ~<span class="token punctuation">]</span><span class="token comment"># vim /etc/profile</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>æ·»åŠ å¦‚ä¸‹å†…å®¹ï¼ˆè¿™é‡Œçš„MAVEN_HOMEéœ€è¦æ”¹ä¸ºä½ è‡ªå·±çš„mavenè§£å‹ç›®å½•ï¼‰ï¼š</p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token assign-left variable">JAVA_HOME</span><span class="token operator">=</span>/usr/local/java<span class="token builtin class-name">export</span> <span class="token assign-left variable">MAVEN_HOME</span><span class="token operator">=</span>/usr/local/maven<span class="token builtin class-name">export</span> <span class="token assign-left variable">JRE_HOME</span><span class="token operator">=</span>/usr/local/java/jre<span class="token builtin class-name">export</span> <span class="token assign-left variable">CLASSPATH</span><span class="token operator">=</span>.:<span class="token variable">$JAVA_HOME</span>/lib:<span class="token variable">$JRE_HOME</span>/lib:<span class="token variable">$CLASSPATH</span><span class="token builtin class-name">export</span> <span class="token assign-left variable"><span class="token environment constant">PATH</span></span><span class="token operator">=</span><span class="token variable">$JAVA_HOME</span>/bin:<span class="token variable">$JRE_HOME</span>/bin:<span class="token variable">$MAVEN_HOME</span>/bin:<span class="token environment constant">$PATH</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre><ul><li>é‡è½½ç¯å¢ƒå˜é‡</li></ul><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token punctuation">[</span>root@qfedu.com ~<span class="token punctuation">]</span><span class="token comment"># source /etc/profile</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><h4 id="5ã€éªŒè¯-maven-å®‰è£…"><a href="#5ã€éªŒè¯-maven-å®‰è£…" class="headerlink" title="5ã€éªŒè¯ maven å®‰è£…"></a>5ã€éªŒè¯ maven å®‰è£…</h4><p>è¾“å…¥å‘½ä»¤ mvn -version çœ‹åˆ°å¦‚ä¸‹å†…å®¹è¯´æ˜å®‰è£…æˆåŠŸäº†ã€‚</p><p><img src="/1167086-20180825104448130-1294323799.jpg" alt="img"></p><h3 id="3ã€å®‰è£…-nexus3"><a href="#3ã€å®‰è£…-nexus3" class="headerlink" title="3ã€å®‰è£… nexus3"></a>3ã€å®‰è£… nexus3</h3><h4 id="1ã€ä¸‹è½½"><a href="#1ã€ä¸‹è½½" class="headerlink" title="1ã€ä¸‹è½½"></a>1ã€ä¸‹è½½</h4><p>ä¸“ä¸šç‰ˆçš„nexusæ”¶è´¹ï¼Œä¸‹è½½å¼€æºç‰ˆ Nexus OSS,ä¸‹è½½åœ°å€ä¸º <a href="https://www.sonatype.com/download-oss-sonatype">https://www.sonatype.com/download-oss-sonatype</a></p><p><img src="/1167086-20180825105031180-667090550.jpg" alt="img"></p><p>Wingä¸‹è½½çš„æ—¶å€™å¯ä»¥è·å–é“¾æ¥ç”¨è¿…é›·ä¸‹è½½ï¼Œæˆ‘æ˜¯ç›´æ¥æŠŠhttpsæ”¹æˆäº†httpä¸‹è½½ï¼Œä¸‹è½½ä¸‹æ¥çš„åŒ…å¤§å°ä¸ä¸€æ ·ï¼Œæˆ‘æš‚æ—¶ä½¿ç”¨çš„æ˜¯å°ä¸€ç‚¹çš„120å¤šMçš„å®‰è£…åŒ…</p><h4 id="2ã€è§£å‹"><a href="#2ã€è§£å‹" class="headerlink" title="2ã€è§£å‹"></a>2ã€è§£å‹</h4><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token punctuation">[</span>root@qfedu.com ~<span class="token punctuation">]</span><span class="token comment"># cd /usr/local</span><span class="token punctuation">[</span>root@qfedu.com ~<span class="token punctuation">]</span><span class="token comment"># tar -zxf nexus-3.13.0-01-unix.tar.gz</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre><p>è§£å‹åä¼šå¤šå‡ºä¸¤ä¸ªç›®å½•ï¼Œnexus-3.13.0-01å’Œsonatype-workã€‚</p><h4 id="3ã€å¯åŠ¨"><a href="#3ã€å¯åŠ¨" class="headerlink" title="3ã€å¯åŠ¨"></a>3ã€å¯åŠ¨</h4><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token punctuation">[</span>root@qfedu.com ~<span class="token punctuation">]</span><span class="token comment"># cd nexus-3.13.0-01/bin/</span><span class="token punctuation">[</span>root@qfedu.com ~<span class="token punctuation">]</span><span class="token comment"># ./nexus start</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre><p><img src="/1167086-20180825105844833-1628287044.jpg" alt="img"></p><p>çœ‹åˆ°å¦‚å›¾æ‰€ç¤ºå†…å®¹è¡¨æ˜æˆ‘ä»¬å·²ç»å¯åŠ¨æˆåŠŸäº†ï¼Œæ¸¸è§ˆå™¨è¾“å…¥<a href="http://localhost:8081å³å¯è®¿é—®ã€‚">http://localhost:8081å³å¯è®¿é—®ã€‚</a></p><p><strong>æ³¨æ„ï¼š</strong></p><p>å¯åŠ¨åå¦‚æœä½ ç«‹å³è®¿é—®å¯èƒ½å‘ç°ä»€ä¹ˆéƒ½æ²¡æœ‰ï¼Œä¸è¦æ€¥è¿™ä¸ªå¯åŠ¨éœ€è¦ä¸€å®šæ—¶é—´ï¼Œ<strong>1åˆ†é’Ÿåå†å°è¯•è®¿é—®</strong></p><p><img src="/1167086-20180825110836868-96057072.jpg" alt="img">ã€€</p><p><strong>ç™»å½•</strong> ï¼š </p><p>ç‚¹å‡»å³ä¸Šè§’çš„sign inç™»å½•ï¼Œè¾“å…¥è´¦æˆ·<strong>admin</strong></p><p>å¯†ç :</p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token comment"># cat /root/sonatype-work/nexus3/admin.password</span>91c37108-809a-495b-942d-3932b9b33e04<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre><h4 id="4ã€ä»“åº“ä»‹ç»"><a href="#4ã€ä»“åº“ä»‹ç»" class="headerlink" title="4ã€ä»“åº“ä»‹ç»"></a>4ã€ä»“åº“ä»‹ç»</h4><p>ç‚¹å‡»â€œè®¾ç½®-Repositoriesâ€ï¼Œå°±å¯ä»¥çœ‹åˆ°ä»“åº“ï¼Œåˆ†ä¸‰ç§ç±»å‹ï¼š</p><p><img src="/image-20200509104646789.png" alt="image-20200509104646789"></p><ul><li><p><strong>proxy</strong>ï¼šæ˜¯è¿œç¨‹ä»“åº“çš„ä»£ç†ã€‚æ¯”å¦‚è¯´åœ¨nexusä¸­é…ç½®äº†ä¸€ä¸ªcentral repositoryçš„proxyï¼Œå½“ç”¨æˆ·å‘è¿™ä¸ªproxyè¯·æ±‚ä¸€ä¸ªartifactï¼Œè¿™ä¸ªproxyå°±ä¼šå…ˆåœ¨æœ¬åœ°æŸ¥æ‰¾ï¼Œå¦‚æœæ‰¾ä¸åˆ°çš„è¯ï¼Œå°±ä¼šä»è¿œç¨‹ä»“åº“ä¸‹è½½ï¼Œç„¶åè¿”å›ç»™ç”¨æˆ·ï¼Œç›¸å½“äºèµ·åˆ°ä¸€ä¸ªä¸­è½¬çš„ä½œç”¨ã€‚ã€€ã€€ã€€ã€€</p></li><li><p><strong>Hosted</strong>ï¼šæ˜¯å®¿ä¸»ä»“åº“ï¼Œç”¨æˆ·å¯ä»¥æŠŠè‡ªå·±çš„ä¸€äº›æ„ä»¶ï¼Œdeployåˆ°hostedä¸­ï¼Œä¹Ÿå¯ä»¥æ‰‹å·¥ä¸Šä¼ æ„ä»¶åˆ°hostedé‡Œã€‚æ¯”å¦‚è¯´oracleçš„é©±åŠ¨ç¨‹åºï¼Œojdbc6.jarï¼Œåœ¨central repositoryæ˜¯è·å–ä¸åˆ°çš„ï¼Œå°±éœ€è¦æ‰‹å·¥ä¸Šä¼ åˆ°hostedé‡Œï¼Œä¸€èˆ¬ç”¨æ¥å­˜æ”¾å…¬å¸è‡ªå·±çš„jaråŒ…ï¼›</p></li><li><p><strong>Group</strong>ï¼šæ˜¯ä»“åº“ç»„ï¼Œåœ¨mavené‡Œæ²¡æœ‰è¿™ä¸ªæ¦‚å¿µï¼Œæ˜¯nexusç‰¹æœ‰çš„ã€‚ç›®çš„æ˜¯å°†ä¸Šè¿°å¤šä¸ªä»“åº“èšåˆï¼Œå¯¹ç”¨æˆ·æš´éœ²ç»Ÿä¸€çš„åœ°å€ï¼Œè¿™æ ·ç”¨æˆ·å°±ä¸éœ€è¦åœ¨pomä¸­é…ç½®å¤šä¸ªåœ°å€ï¼Œåªè¦ç»Ÿä¸€é…ç½®groupçš„åœ°å€å°±å¯ä»¥äº†å³è¾¹é‚£ä¸ªRepository Pathå¯ä»¥ç‚¹å‡»è¿›å»ï¼Œçœ‹åˆ°ä»“åº“ä¸­artifactåˆ—è¡¨ã€‚ä¸è¿‡è¦æ³¨æ„æµè§ˆå™¨ç¼“å­˜ï¼Œ<strong>å½“ä½ çš„é¡¹ç›®å¸Œæœ›åœ¨å¤šä¸ªrepositoryä½¿ç”¨èµ„æºæ—¶å°±ä¸éœ€è¦å¤šæ¬¡å¼•ç”¨äº†ï¼Œåªéœ€è¦å¼•ç”¨ä¸€ä¸ªgroupå³å¯</strong>ã€‚</p><p><strong>maven-publicï¼š</strong>maven-centralã€maven-releaseå’Œmaven-snapshotä¸‰ä¸ªåº“çš„åˆé›†ã€‚</p><p><strong>maven-releaseï¼š</strong>ç”¨æ¥å­˜æ”¾releaseç‰ˆæœ¬çš„jaråŒ…ã€‚</p><p><strong>maven-snapshotï¼š</strong>ç”¨æ¥å­˜æ”¾snapshotç‰ˆæœ¬çš„jaråŒ…ã€‚</p></li></ul><p><strong>å…³äºMavençš„Snapshotç‰ˆæœ¬ä¸Releaseç‰ˆæœ¬</strong></p><ol><li><p>Snapshotç‰ˆæœ¬ä»£è¡¨ä¸ç¨³å®šã€å°šå¤„äºå¼€å‘ä¸­çš„ç‰ˆæœ¬ </p></li><li><p>Releaseç‰ˆæœ¬åˆ™ä»£è¡¨ç¨³å®šçš„ç‰ˆæœ¬ </p></li><li><p>ä»€ä¹ˆæƒ…å†µä¸‹è¯¥ç”¨SNAPSHOT?<br>ååŒå¼€å‘æ—¶ï¼Œå¦‚æœAä¾èµ–æ„ä»¶Bï¼Œç”±äºBä¼šæ›´æ–°ï¼ŒBåº”è¯¥ä½¿ç”¨SNAPSHOTæ¥æ ‡è¯†è‡ªå·±ã€‚è¿™ç§åšæ³•çš„å¿…è¦æ€§å¯ä»¥åè¯å¦‚ä¸‹ï¼š</p></li></ol><p>a.å¦‚æœBä¸ç”¨SNAPSHOTï¼Œè€Œæ˜¯æ¯æ¬¡æ›´æ–°åéƒ½ä½¿ç”¨ä¸€ä¸ªç¨³å®šçš„ç‰ˆæœ¬ï¼Œé‚£ç‰ˆæœ¬å·å°±ä¼šå‡å¾—å¤ªå¿«ï¼Œæ¯å¤©ä¸€å‡e68a84e8a2ade79fa5e9819331333363396362ç”šè‡³æ¯ä¸ªå°æ—¶ä¸€å‡ï¼Œè¿™å°±æ˜¯å¯¹ç‰ˆæœ¬å·çš„æ»¥ç”¨ã€‚ </p><p>b.å¦‚æœBä¸ç”¨SNAPSHOT,  ä½†ä¸€ç›´ä½¿ç”¨ä¸€ä¸ªå•ä¸€çš„Releaseç‰ˆæœ¬å·ï¼Œé‚£å½“Bæ›´æ–°åï¼ŒAå¯èƒ½å¹¶ä¸ä¼šæ¥å—åˆ°æ›´æ–°ã€‚å› ä¸ºAæ‰€ä½¿ç”¨çš„repositoryä¸€èˆ¬ä¸ä¼šé¢‘ç¹æ›´æ–°releaseç‰ˆæœ¬çš„ç¼“å­˜ï¼ˆå³æœ¬åœ°repository)ï¼Œæ‰€ä»¥Bä»¥ä¸æ¢ç‰ˆæœ¬å·çš„æ–¹å¼æ›´æ–°åï¼ŒAåœ¨æ‹¿Bæ—¶å‘ç°æœ¬åœ°å·²æœ‰è¿™ä¸ªç‰ˆæœ¬ï¼Œå°±ä¸ä¼šå»è¿œç¨‹Repositoryä¸‹è½½æœ€æ–°çš„B </p><ol start="4"><li>ä¸ç”¨Releaseç‰ˆæœ¬ï¼Œåœ¨æ‰€æœ‰åœ°æ–¹éƒ½ç”¨SNAPSHOTç‰ˆæœ¬è¡Œä¸è¡Œï¼Ÿ<br>ä¸è¡Œã€‚æ­£å¼ç¯å¢ƒä¸­ä¸å¾—ä½¿ç”¨snapshotç‰ˆæœ¬çš„åº“ã€‚  æ¯”å¦‚è¯´ï¼Œä»Šå¤©ä½ ä¾èµ–æŸä¸ªsnapshotç‰ˆæœ¬çš„ç¬¬ä¸‰æ–¹åº“æˆåŠŸæ„å»ºäº†è‡ªå·±çš„åº”ç”¨ï¼Œæ˜å¤©å†æ„å»ºæ—¶å¯èƒ½å°±ä¼šå¤±è´¥ï¼Œå› ä¸ºä»Šæ™šç¬¬ä¸‰æ–¹å¯èƒ½å·²ç»æ›´æ–°äº†å®ƒçš„snapshotåº“ã€‚ä½ å†æ¬¡æ„å»ºæ—¶ï¼ŒMavenä¼šå»è¿œç¨‹repositoryä¸‹è½½snapshotçš„æœ€æ–°ç‰ˆæœ¬ï¼Œä½ æ„å»ºæ—¶ç”¨çš„åº“å°±æ˜¯æ–°çš„jaræ–‡ä»¶äº†ï¼Œè¿™æ—¶æ­£ç¡®æ€§å°±å¾ˆéš¾ä¿è¯äº†ã€‚</li></ol><h4 id="5ã€å‘-nexus3-ç§æœä¸Šä¼ -jar-åŒ…"><a href="#5ã€å‘-nexus3-ç§æœä¸Šä¼ -jar-åŒ…" class="headerlink" title="5ã€å‘ nexus3 ç§æœä¸Šä¼  jar åŒ…"></a>5ã€å‘ nexus3 ç§æœä¸Šä¼  jar åŒ…</h4><h5 id="1ã€å‡†å¤‡ç¯å¢ƒ"><a href="#1ã€å‡†å¤‡ç¯å¢ƒ" class="headerlink" title="1ã€å‡†å¤‡ç¯å¢ƒ"></a>1ã€å‡†å¤‡ç¯å¢ƒ</h5><h6 id="1ã€åˆ›å»º3rd-partåº“"><a href="#1ã€åˆ›å»º3rd-partåº“" class="headerlink" title="1ã€åˆ›å»º3rd_partåº“"></a>1ã€åˆ›å»º<code>3rd_part</code>åº“</h6><p>ä½¿ç”¨é»˜è®¤ç”¨æˆ· <strong>admin&#x2F;admin123</strong> ç™»é™†</p><p><img src="/20180303135907573.png" alt="è¿™é‡Œå†™å›¾ç‰‡æè¿°"></p><p>ç‚¹å‡»å·¦ä¾§çš„<code>repository\repositories</code>å,åœ¨å³ä¾§ç‚¹å‡»<code>create repository</code></p><p><img src="/20180303135924229.png" alt="è¿™é‡Œå†™å›¾ç‰‡æè¿°"></p><p>ç„¶åé€‰æ‹©<code>maven2(hosted)</code>,å¡«å†™å¦‚ä¸‹</p><p><img src="/20180303135934168.png" alt="è¿™é‡Œå†™å›¾ç‰‡æè¿°"></p><p>è·³åˆ°é¦–é¡µåé€‰æ‹©<code>maven-public</code></p><p><img src="/2018030313595437.png" alt="è¿™é‡Œå†™å›¾ç‰‡æè¿°"></p><p>å°†<code>3rd_part</code>ç§»åˆ°<code>member</code>ä¸­,å³å°†<code>3rd_part</code>ç”±<code>maven-public</code>ç®¡ç†ï¼Œç‚¹å‡»save</p><p><img src="/20180303140006220.png" alt="è¿™é‡Œå†™å›¾ç‰‡æè¿°"></p><p>è‡³æ­¤,åˆ›å»ºä»“åº“å®Œæˆ</p><h6 id="2ã€åˆ›å»º-3rd-part-ç®¡ç†ç”¨æˆ·"><a href="#2ã€åˆ›å»º-3rd-part-ç®¡ç†ç”¨æˆ·" class="headerlink" title="2ã€åˆ›å»º 3rd_part ç®¡ç†ç”¨æˆ·"></a>2ã€åˆ›å»º <code>3rd_part</code> ç®¡ç†ç”¨æˆ·</h6><p>åˆ›å»ºç”¨æˆ·: ç”¨æˆ·å&#x2F;å¯†ç -<code>dev/dev123</code></p><p><img src="/20180303154313780.png" alt="è¿™é‡Œå†™å›¾ç‰‡æè¿°"></p><h5 id="2ã€ç›´æ¥æµè§ˆå™¨"><a href="#2ã€ç›´æ¥æµè§ˆå™¨" class="headerlink" title="2ã€ç›´æ¥æµè§ˆå™¨"></a>2ã€ç›´æ¥æµè§ˆå™¨</h5><p>ä½¿ç”¨<code>dev/dev123</code>ç™»é™†ï¼Œç‚¹å‡»<code>upload</code></p><p><img src="/20180303141603409.png" alt="è¿™é‡Œå†™å›¾ç‰‡æè¿°"></p><p>å¡«å†™ä¸Šä¼ jaråŒ…çš„ä¿¡æ¯åï¼Œç‚¹å‡»<code>upload</code></p><p><img src="/20180303141617257.png" alt="è¿™é‡Œå†™å›¾ç‰‡æè¿°"></p><p>å¯ä»¥çœ‹åˆ°å·²ç»ä¸Šä¼ æˆåŠŸ</p><p><img src="/20180303141629234.png" alt="è¿™é‡Œå†™å›¾ç‰‡æè¿°"></p><h3 id="4ã€å¸¸è§é”™è¯¯"><a href="#4ã€å¸¸è§é”™è¯¯" class="headerlink" title="4ã€å¸¸è§é”™è¯¯"></a>4ã€å¸¸è§é”™è¯¯</h3><p>é—®é¢˜1ï¼šä¸Šä¼ æŠ¥é”™è¯¯ç 405ï¼ŒFailed to transfer fileã€‚</p><p>â€‹      è§£å†³ï¼šä»”ç»†æŸ¥çœ‹æŠ¥é”™ä¿¡æ¯å°±ä¼šå‘ç°ï¼Œæ˜¯ä¸Šä¼ çš„urlé”™äº†,åŸå› å°±æ˜¯repositoryçš„åœ°å€å†™é”™äº†ã€‚</p><p>é—®é¢˜2ï¼šé”™è¯¯ç 401æˆ–è€…403</p><p>â€‹      è§£å†³ï¼šå…¶å®403é”™è¯¯å°±æ˜¯â€œç¦æ­¢è®¿é—®â€çš„å«ä¹‰ï¼Œæ‰€ä»¥é—®é¢˜çš„æ ¹æºè‚¯å®šåœ¨æˆæƒä¸Šé¢ã€‚Mavenåœ¨é»˜è®¤æƒ…å†µä¸‹ä¼šä½¿ç”¨deploymentå¸å·(é»˜è®¤å¯†ç deploy)ç™»å½•çš„ç³»ç»Ÿï¼Œä½†æ˜¯å…³é”®çš„Nexusä¸­Releasesä»“åº“é»˜è®¤çš„Deployment Policyæ˜¯â€œDisable Redeployâ€ï¼Œæ‰€ä»¥æ— æ³•éƒ¨ç½²çš„é—®é¢˜åœ¨è¿™ä¸ªåœ°æ–¹ï¼Œæ–¹æ³•æ˜¯å°†å…¶ä¿®æ”¹ä¸ºâ€œAllow Redeployâ€å°±å¯ä»¥äº†ã€‚401å°±æ˜¯Maven settings.xmlæ²¡æœ‰è®¾ç½®å¯†ç </p>]]></content>
      
      
      <categories>
          
          <category> Devops </category>
          
      </categories>
      
      
        <tags>
            
            <tag> CICD </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>åˆ†å¸ƒå¼ç‰ˆæœ¬æ§åˆ¶</title>
      <link href="/posts/24097.html"/>
      <url>/posts/24097.html</url>
      
        <content type="html"><![CDATA[<h1 id="åˆ†å¸ƒå¼ç‰ˆæœ¬æ§åˆ¶ç³»ç»Ÿ"><a href="#åˆ†å¸ƒå¼ç‰ˆæœ¬æ§åˆ¶ç³»ç»Ÿ" class="headerlink" title="åˆ†å¸ƒå¼ç‰ˆæœ¬æ§åˆ¶ç³»ç»Ÿ"></a>åˆ†å¸ƒå¼ç‰ˆæœ¬æ§åˆ¶ç³»ç»Ÿ</h1><h2 id="ä¸€ã€Gitã€Githubã€Gitlab-çš„åŒºåˆ«"><a href="#ä¸€ã€Gitã€Githubã€Gitlab-çš„åŒºåˆ«" class="headerlink" title="ä¸€ã€Gitã€Githubã€Gitlab çš„åŒºåˆ«"></a>ä¸€ã€Gitã€Githubã€Gitlab çš„åŒºåˆ«</h2><p>(SVNå’Œgiteeåç»­è¡¥å……ï¼‰</p><p>Gitæ˜¯ä¸€ä¸ªå¼€æºçš„åˆ†å¸ƒå¼ç‰ˆæœ¬æ§åˆ¶ç³»ç»Ÿï¼Œç”¨äºæ•æ·é«˜æ•ˆåœ°å¤„ç†ä»»ä½•æˆ–å°æˆ–å¤§çš„é¡¹ç›®ã€‚</p><p>æ˜¯ Linus Torvalds ä¸ºäº†å¸®åŠ©ç®¡ç† Linux å†…æ ¸å¼€å‘è€Œå¼€å‘çš„ä¸€ä¸ªå¼€æ”¾æºç çš„ç‰ˆæœ¬æ§åˆ¶è½¯ä»¶ã€‚</p><p>Githubæ˜¯åœ¨çº¿çš„åŸºäºGitçš„ä»£ç æ‰˜ç®¡æœåŠ¡ã€‚ GitHubæ˜¯2008å¹´ç”±Ruby on Railsç¼–å†™è€Œæˆã€‚GitHubåŒæ—¶æä¾›ä»˜è´¹è´¦æˆ·å’Œå…è´¹è´¦æˆ·ã€‚è¿™ä¸¤ç§è´¦æˆ·éƒ½å¯ä»¥åˆ›å»ºå…¬å¼€çš„ä»£ç ä»“åº“ï¼Œåªæœ‰ä»˜è´¹è´¦æˆ·å¯ä»¥åˆ›å»ºç§æœ‰çš„ä»£ç ä»“åº“ã€‚ Gitlabè§£å†³äº†è¿™ä¸ªé—®é¢˜, å¯ä»¥åœ¨ä¸Šé¢åˆ›å»ºå…è´¹çš„ç§äººrepoã€‚ </p><p>git            æ˜¯ä¸€å¥—è½¯ä»¶ å¯ä»¥åšæœ¬åœ°ç§æœ‰ä»“åº“</p><p>github   æœ¬èº«æ˜¯ä¸€ä¸ªä»£ç æ‰˜ç®¡ç½‘ç«™   å…¬æœ‰å’Œç§æœ‰ä»“åº“(æ”¶è´¹)   ä¸èƒ½åšæœ¬åœ°ç§æœ‰ä»“åº“</p><p>gitlab     æœ¬èº«ä¹Ÿæ˜¯ä¸€ä¸ªä»£ç æ‰˜ç®¡çš„ç½‘ç«™ åŠŸèƒ½ä¸Šå’Œgithubæ²¡æœ‰åŒºåˆ«   å…¬æœ‰å’Œç§æœ‰ä»“åº“ï¼ˆå…è´¹ï¼‰  å¯ä»¥éƒ¨ç½²æœ¬åœ°ç§æœ‰ä»“åº“</p><h2 id="äºŒã€Git-ä¸-SVN-åŒºåˆ«"><a href="#äºŒã€Git-ä¸-SVN-åŒºåˆ«" class="headerlink" title="äºŒã€Git ä¸ SVN åŒºåˆ«"></a>äºŒã€Git ä¸ SVN åŒºåˆ«</h2><p>GITä¸ä»…ä»…æ˜¯ä¸ªç‰ˆæœ¬æ§åˆ¶ç³»ç»Ÿï¼Œå®ƒä¹Ÿæ˜¯ä¸ªå†…å®¹ç®¡ç†ç³»ç»Ÿ(CMS),å·¥ä½œç®¡ç†ç³»ç»Ÿç­‰ã€‚</p><p>å¦‚æœä½ æ˜¯ä¸€ä¸ªå…·æœ‰ä½¿ç”¨SVNèƒŒæ™¯çš„äººï¼Œä½ éœ€è¦åšä¸€å®šçš„æ€æƒ³è½¬æ¢ï¼Œæ¥é€‚åº”GITæä¾›çš„ä¸€äº›æ¦‚å¿µå’Œç‰¹å¾ã€‚</p><p><strong>Git ä¸ SVN åŒºåˆ«</strong></p><ol><li>Gitæ˜¯åˆ†å¸ƒå¼çš„ï¼Œsvnä¸æ˜¯ï¼šè¿™æ˜¯GITå’Œå…¶å®ƒéåˆ†å¸ƒå¼çš„ç‰ˆæœ¬æ§åˆ¶ç³»ç»Ÿï¼Œä¾‹å¦‚SVNï¼ŒCVSç­‰ï¼Œæœ€æ ¸å¿ƒçš„åŒºåˆ«ã€‚</li><li>GITæŠŠå†…å®¹æŒ‰å…ƒæ•°æ®æ–¹å¼å­˜å‚¨ï¼Œè€ŒSVNæ˜¯æŒ‰æ–‡ä»¶ï¼šæ‰€æœ‰çš„èµ„æºæ§åˆ¶ç³»ç»Ÿéƒ½æ˜¯æŠŠæ–‡ä»¶çš„å…ƒä¿¡æ¯éšè—åœ¨ä¸€ä¸ªç±»ä¼¼.svn,.cvsç­‰çš„æ–‡ä»¶å¤¹é‡Œã€‚</li><li>GITåˆ†æ”¯å’ŒSVNçš„åˆ†æ”¯ä¸åŒï¼šåˆ†æ”¯åœ¨SVNä¸­ä¸€ç‚¹ä¸ç‰¹åˆ«ï¼Œå°±æ˜¯ç‰ˆæœ¬åº“ä¸­çš„å¦å¤–çš„ä¸€ä¸ªç›®å½•ã€‚</li><li>GITæ²¡æœ‰ä¸€ä¸ªå…¨å±€çš„ç‰ˆæœ¬å·ï¼Œè€ŒSVNæœ‰ï¼šç›®å‰ä¸ºæ­¢è¿™æ˜¯è·ŸSVNç›¸æ¯”GITç¼ºå°‘çš„æœ€å¤§çš„ä¸€ä¸ªç‰¹å¾ã€‚</li><li>GITçš„å†…å®¹å®Œæ•´æ€§è¦ä¼˜äºSVNï¼šGITçš„å†…å®¹å­˜å‚¨ä½¿ç”¨çš„æ˜¯SHA-1å“ˆå¸Œç®—æ³•ã€‚è¿™èƒ½ç¡®ä¿ä»£ç å†…å®¹çš„å®Œæ•´æ€§ï¼Œç¡®ä¿åœ¨é‡åˆ°ç£ç›˜æ•…éšœå’Œç½‘ç»œé—®é¢˜æ—¶é™ä½å¯¹ç‰ˆæœ¬åº“çš„ç ´åã€‚</li></ol><p>git   æ˜¯åˆ†å¸ƒå¼çš„ç‰ˆæœ¬æ§åˆ¶å™¨  æ²¡æœ‰å®¢æˆ·ç«¯å’ŒæœåŠ¡å™¨ç«¯çš„æ¦‚å¿µ</p><p>svn å®ƒæ˜¯C&#x2F;Sç»“æ„çš„ç‰ˆæœ¬æ§åˆ¶å™¨  æœ‰å®¢æˆ·ç«¯å’ŒæœåŠ¡å™¨ç«¯  æœåŠ¡å™¨å¦‚æœå®•æœºè€Œä¸”ä»£ç æ²¡æœ‰å¤‡ä»½çš„æƒ…å†µä¸‹  å®Œæ•´ä»£ç å°±ä¼šä¸¢å¤±</p><h2 id="ä¸‰ã€éƒ¨ç½²Git-æœåŠ¡"><a href="#ä¸‰ã€éƒ¨ç½²Git-æœåŠ¡" class="headerlink" title="ä¸‰ã€éƒ¨ç½²Git æœåŠ¡"></a>ä¸‰ã€éƒ¨ç½²Git æœåŠ¡</h2><p><strong>åˆ›å»ºgitä»“åº“</strong></p><p>git-serverä¸Šçš„æ“ä½œï¼š</p><pre class="line-numbers language-none"><code class="language-none">[root@qfedu.com ~]# yum install git git-core gitweb -y[root@qfedu.com ~]# useradd git[root@qfedu.com ~]# passwd git[root@qfedu.com ~]# mkdir &#x2F;git-root&#x2F;[root@qfedu.com ~]# cd &#x2F;git-root&#x2F;[root@qfedu.com git-root]# git init --bare shell.gitInitialized empty Git repository in &#x2F;git-root&#x2F;shell.git&#x2F;æ³¨æ„ï¼šgit init å’Œ git init --bare çš„åŒºåˆ«:ä½¿ç”¨--bareé€‰é¡¹æ—¶,ä¸å†ç”Ÿæˆ.gitç›®å½•,è€Œæ˜¯åªç”Ÿæˆ.gitç›®å½•ä¸‹é¢çš„ç‰ˆæœ¬å†å²è®°å½•æ–‡ä»¶,è¿™äº›ç‰ˆæœ¬å†å²è®°å½•æ–‡ä»¶ä¹Ÿä¸å†å­˜æ”¾åœ¨.gitç›®å½•ä¸‹é¢,è€Œæ˜¯ç›´æ¥å­˜æ”¾åœ¨ç‰ˆæœ¬åº“çš„æ ¹ç›®å½•ä¸‹é¢.ç”¨&quot;git init&quot;åˆå§‹åŒ–çš„ç‰ˆæœ¬åº“ç”¨æˆ·ä¹Ÿå¯ä»¥åœ¨è¯¥ç›®å½•ä¸‹æ‰§è¡Œæ‰€æœ‰gitæ–¹é¢çš„æ“ä½œã€‚ä½†åˆ«çš„ç”¨æˆ·åœ¨å°†æ›´æ–°pushä¸Šæ¥çš„æ—¶å€™å®¹æ˜“å‡ºç°å†²çªã€‚ä½¿ç”¨â€git init --bareâ€æ–¹æ³•åˆ›å»ºä¸€ä¸ªæ‰€è°“çš„è£¸ä»“åº“ï¼Œä¹‹æ‰€ä»¥å«è£¸ä»“åº“æ˜¯å› ä¸ºè¿™ä¸ªä»“åº“åªä¿å­˜gitå†å²æäº¤çš„ç‰ˆæœ¬ä¿¡æ¯ï¼Œè€Œä¸å…è®¸ç”¨æˆ·åœ¨ä¸Šé¢è¿›è¡Œå„ç§gitæ“ä½œï¼Œå¦‚æœä½ ç¡¬è¦æ“ä½œçš„è¯ï¼Œåªä¼šå¾—åˆ°ä¸‹é¢çš„é”™è¯¯ï¼ˆâ€This operation must be run in a work treeâ€ï¼‰è¿™ä¸ªå°±æ˜¯æœ€å¥½æŠŠè¿œç«¯ä»“åº“åˆå§‹åŒ–æˆbareä»“åº“çš„åŸå› [root@qfedu.com git-root]# chown -R git:git shell.git<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p><strong>gitä»“åº“æµ‹è¯•</strong></p><p>git-clientä¸Šçš„æ“ä½œï¼š</p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token punctuation">[</span>root@qfedu.com ~<span class="token punctuation">]</span><span class="token comment"># ssh-keygen</span><span class="token punctuation">[</span>root@qfedu.com ~<span class="token punctuation">]</span><span class="token comment"># ssh-copy-id git@192.168.1.178</span><span class="token punctuation">[</span>root@qfedu.com shell<span class="token punctuation">]</span><span class="token comment"># git config --global user.email "you@example.com"</span><span class="token punctuation">[</span>root@qfedu.com shell<span class="token punctuation">]</span><span class="token comment"># git config --global user.name "Your Name"</span><span class="token punctuation">[</span>root@qfedu.com ~<span class="token punctuation">]</span><span class="token comment"># git clone git@192.168.1.178:/git-root/shell.git</span><span class="token punctuation">[</span>root@qfedu.com ~<span class="token punctuation">]</span><span class="token comment"># ls</span>rh  shell<span class="token punctuation">[</span>root@qfedu.com ~<span class="token punctuation">]</span><span class="token comment"># cd shell/</span><span class="token punctuation">[</span>root@qfedu.com shell<span class="token punctuation">]</span><span class="token comment"># vim test.sh</span><span class="token punctuation">[</span>root@qfedu.com shell<span class="token punctuation">]</span><span class="token comment"># git add test.sh</span><span class="token punctuation">[</span>root@qfedu.com shell<span class="token punctuation">]</span><span class="token comment"># git commit -m 'first commit'</span><span class="token punctuation">[</span>master <span class="token punctuation">(</span>root-commit<span class="token punctuation">)</span> 33c5fbf<span class="token punctuation">]</span> first commit <span class="token number">1</span> <span class="token function">file</span> changed, <span class="token number">2</span> insertions<span class="token punctuation">(</span>+<span class="token punctuation">)</span> create mode <span class="token number">100644</span> test1.sh<span class="token punctuation">[</span>root@qfedu.com shell<span class="token punctuation">]</span><span class="token comment"># git push origin master</span>Counting objects: <span class="token number">3</span>, done.Writing objects: <span class="token number">100</span>% <span class="token punctuation">(</span><span class="token number">3</span>/3<span class="token punctuation">)</span>, <span class="token number">230</span> bytes <span class="token operator">|</span> <span class="token number">0</span> bytes/s, done.Total <span class="token number">3</span> <span class="token punctuation">(</span>delta <span class="token number">0</span><span class="token punctuation">)</span>, reused <span class="token number">0</span> <span class="token punctuation">(</span>delta <span class="token number">0</span><span class="token punctuation">)</span>To git@192.168.1.178:/git-root/shell.git * <span class="token punctuation">[</span>new branch<span class="token punctuation">]</span>      master -<span class="token operator">></span> master<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h2 id="å››ã€Gitå·¥ä½œæµç¨‹"><a href="#å››ã€Gitå·¥ä½œæµç¨‹" class="headerlink" title="å››ã€Gitå·¥ä½œæµç¨‹"></a>å››ã€Gitå·¥ä½œæµç¨‹</h2><p>ä¸€èˆ¬å·¥ä½œæµç¨‹å¦‚ä¸‹ï¼š</p><ul><li>å…‹éš† Git èµ„æºä½œä¸ºå·¥ä½œç›®å½•ã€‚</li><li>åœ¨å…‹éš†çš„èµ„æºä¸Šæ·»åŠ æˆ–ä¿®æ”¹æ–‡ä»¶ã€‚ </li><li>å¦‚æœå…¶ä»–äººä¿®æ”¹äº†ï¼Œä½ å¯ä»¥æ›´æ–°èµ„æºã€‚</li><li>åœ¨æäº¤å‰æŸ¥çœ‹ä¿®æ”¹ã€‚</li><li>æäº¤ä¿®æ”¹ã€‚</li><li>åœ¨ä¿®æ”¹å®Œæˆåï¼Œå¦‚æœå‘ç°é”™è¯¯ï¼Œå¯ä»¥æ’¤å›æäº¤å¹¶å†æ¬¡ä¿®æ”¹å¹¶æäº¤ã€‚</li></ul><p> ã€€ã€€Git çš„å·¥ä½œæµç¨‹ç¤ºæ„å›¾ï¼š</p><p><img src="/805129-20160710102658467-1520443599.png" alt="img"></p><h2 id="äº”ã€GitåŸºæœ¬æ¦‚å¿µ"><a href="#äº”ã€GitåŸºæœ¬æ¦‚å¿µ" class="headerlink" title="äº”ã€GitåŸºæœ¬æ¦‚å¿µ"></a>äº”ã€GitåŸºæœ¬æ¦‚å¿µ</h2><ul><li><strong>å·¥ä½œåŒºï¼š</strong>å°±æ˜¯ä½ åœ¨ç”µè„‘é‡Œèƒ½çœ‹åˆ°çš„ç›®å½•ã€‚</li><li><strong>æš‚å­˜åŒºï¼š</strong>è‹±æ–‡å«stage, æˆ–indexã€‚ä¸€èˆ¬å­˜æ”¾åœ¨â€gitç›®å½•â€ä¸‹çš„indexæ–‡ä»¶ï¼ˆ.git&#x2F;indexï¼‰ä¸­ï¼Œæ‰€ä»¥æˆ‘ä»¬æŠŠæš‚å­˜åŒºæœ‰æ—¶ä¹Ÿå«ä½œç´¢å¼•ï¼ˆindexï¼‰ã€‚</li><li><strong>ç‰ˆæœ¬åº“ï¼š</strong>å·¥ä½œåŒºæœ‰ä¸€ä¸ªéšè—ç›®å½•.gitï¼Œè¿™ä¸ªä¸ç®—å·¥ä½œåŒºï¼Œè€Œæ˜¯Gitçš„ç‰ˆæœ¬åº“ã€‚</li></ul><p>ã€€ã€€å·¥ä½œåŒºã€ç‰ˆæœ¬åº“ä¸­çš„æš‚å­˜åŒºå’Œç‰ˆæœ¬åº“ä¹‹é—´çš„å…³ç³»çš„ç¤ºæ„å›¾ï¼š</p><p><img src="/805129-20160710103123608-1172715931.jpg" alt="img"></p><ul><li><p>ã€€ã€€å›¾ä¸­å·¦ä¾§ä¸ºå·¥ä½œåŒºï¼Œå³ä¾§ä¸ºç‰ˆæœ¬åº“ã€‚åœ¨ç‰ˆæœ¬åº“ä¸­æ ‡è®°ä¸º â€œindexâ€ çš„åŒºåŸŸæ˜¯æš‚å­˜åŒºï¼ˆstage, indexï¼‰ï¼Œæ ‡è®°ä¸º â€œmasterâ€ çš„æ˜¯ master åˆ†æ”¯æ‰€ä»£è¡¨çš„ç›®å½•æ ‘ã€‚ </p></li><li><p>ã€€ã€€å›¾ä¸­æˆ‘ä»¬å¯ä»¥çœ‹å‡ºæ­¤æ—¶ â€œHEADâ€ å®é™…æ˜¯æŒ‡å‘ master åˆ†æ”¯çš„ä¸€ä¸ªâ€æ¸¸æ ‡â€ã€‚æ‰€ä»¥å›¾ç¤ºçš„å‘½ä»¤ä¸­å‡ºç° HEAD çš„åœ°æ–¹å¯ä»¥ç”¨ master æ¥æ›¿æ¢ã€‚ </p></li><li><p>ã€€ã€€å›¾ä¸­çš„ objects æ ‡è¯†çš„åŒºåŸŸä¸º Git çš„å¯¹è±¡åº“ï¼Œå®é™…ä½äº â€œ.git&#x2F;objectsâ€ ç›®å½•ä¸‹ï¼Œé‡Œé¢åŒ…å«äº†åˆ›å»ºçš„å„ç§å¯¹è±¡åŠå†…å®¹ã€‚ </p></li><li><p>ã€€ã€€å½“å¯¹å·¥ä½œåŒºä¿®æ”¹ï¼ˆæˆ–æ–°å¢ï¼‰çš„æ–‡ä»¶æ‰§è¡Œ â€œgit addâ€ å‘½ä»¤æ—¶ï¼Œæš‚å­˜åŒºçš„ç›®å½•æ ‘è¢«æ›´æ–°ï¼ŒåŒæ—¶å·¥ä½œåŒºä¿®æ”¹ï¼ˆæˆ–æ–°å¢ï¼‰çš„æ–‡ä»¶å†…å®¹è¢«å†™å…¥åˆ°å¯¹è±¡åº“ä¸­çš„ä¸€ä¸ªæ–°çš„å¯¹è±¡ä¸­ï¼Œè€Œè¯¥å¯¹è±¡çš„IDè¢«è®°å½•åœ¨æš‚å­˜åŒºçš„æ–‡ä»¶ç´¢å¼•ä¸­ã€‚ </p></li><li><p>ã€€ã€€å½“æ‰§è¡Œæäº¤æ“ä½œï¼ˆgit commitï¼‰æ—¶ï¼Œæš‚å­˜åŒºçš„ç›®å½•æ ‘å†™åˆ°ç‰ˆæœ¬åº“ï¼ˆå¯¹è±¡åº“ï¼‰ä¸­ï¼Œmaster åˆ†æ”¯ä¼šåšç›¸åº”çš„æ›´æ–°ã€‚å³ master æŒ‡å‘çš„ç›®å½•æ ‘å°±æ˜¯æäº¤æ—¶æš‚å­˜åŒºçš„ç›®å½•æ ‘ã€‚ </p></li><li><p>ã€€ã€€å½“æ‰§è¡Œ â€œgit reset HEADâ€ å‘½ä»¤æ—¶ï¼Œæš‚å­˜åŒºçš„ç›®å½•æ ‘ä¼šè¢«é‡å†™ï¼Œè¢« master åˆ†æ”¯æŒ‡å‘çš„ç›®å½•æ ‘æ‰€æ›¿æ¢ï¼Œä½†æ˜¯å·¥ä½œåŒºä¸å—å½±å“ã€‚ </p></li><li><p>ã€€ã€€å½“æ‰§è¡Œ â€œgit rm â€“cached <file>â€œ å‘½ä»¤æ—¶ï¼Œä¼šç›´æ¥ä»æš‚å­˜åŒºåˆ é™¤æ–‡ä»¶ï¼Œå·¥ä½œåŒºåˆ™ä¸åšå‡ºæ”¹å˜ã€‚ </p></li><li><p>ã€€ã€€å½“æ‰§è¡Œ â€œgit checkout .â€ æˆ–è€… â€œgit checkout â€“ <file>â€œ å‘½ä»¤æ—¶ï¼Œä¼šç”¨æš‚å­˜åŒºå…¨éƒ¨æˆ–æŒ‡å®šçš„æ–‡ä»¶æ›¿æ¢å·¥ä½œåŒºçš„æ–‡ä»¶ã€‚è¿™ä¸ªæ“ä½œå¾ˆå±é™©ï¼Œä¼šæ¸…é™¤å·¥ä½œåŒºä¸­æœªæ·»åŠ åˆ°æš‚å­˜åŒºçš„æ”¹åŠ¨ã€‚ </p></li><li><p>ã€€ã€€å½“æ‰§è¡Œ â€œgit checkout HEAD .â€ æˆ–è€… â€œgit checkout HEAD <file>â€œ å‘½ä»¤æ—¶ï¼Œä¼šç”¨ HEAD æŒ‡å‘çš„ master åˆ†æ”¯ä¸­çš„å…¨éƒ¨æˆ–è€…éƒ¨åˆ†æ–‡ä»¶æ›¿æ¢æš‚å­˜åŒºå’Œä»¥åŠå·¥ä½œåŒºä¸­çš„æ–‡ä»¶ã€‚è¿™ä¸ªå‘½ä»¤ä¹Ÿæ˜¯æå…·å±é™©æ€§çš„ï¼Œå› ä¸ºä¸ä½†ä¼šæ¸…é™¤å·¥ä½œåŒºä¸­æœªæäº¤çš„æ”¹åŠ¨ï¼Œä¹Ÿä¼šæ¸…é™¤æš‚å­˜åŒºä¸­æœªæäº¤çš„æ”¹åŠ¨ã€‚</p></li></ul><h2 id="å…­ã€Git-å®¢æˆ·ç«¯å®‰è£…ä½¿ç”¨"><a href="#å…­ã€Git-å®¢æˆ·ç«¯å®‰è£…ä½¿ç”¨" class="headerlink" title="å…­ã€Git å®¢æˆ·ç«¯å®‰è£…ä½¿ç”¨"></a>å…­ã€Git å®¢æˆ·ç«¯å®‰è£…ä½¿ç”¨</h2><h3 id="1ã€-Git-å®‰è£…é…ç½®"><a href="#1ã€-Git-å®‰è£…é…ç½®" class="headerlink" title="1ã€ Git å®‰è£…é…ç½®"></a>1ã€ Git å®‰è£…é…ç½®</h3><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token punctuation">[</span>root@qfedu.com ~<span class="token punctuation">]</span><span class="token comment"># yum -y install curl-devel expat-devel gettext-devel openssl-devel zlib-devel</span><span class="token punctuation">[</span>root@qfedu.com ~<span class="token punctuation">]</span><span class="token comment"># yum -y install git git-all git-core</span><span class="token punctuation">[</span>root@qfedu.com ~<span class="token punctuation">]</span><span class="token comment"># git --version</span><span class="token function">git</span> version <span class="token number">2.18</span>.4<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre><hr><h3 id="2ã€Git-é…ç½®"><a href="#2ã€Git-é…ç½®" class="headerlink" title="2ã€Git é…ç½®"></a>2ã€Git é…ç½®</h3><p>Git æä¾›äº†ä¸€ä¸ªå«åš git config çš„å·¥å…·ï¼Œä¸“é—¨ç”¨æ¥é…ç½®æˆ–è¯»å–ç›¸åº”çš„å·¥ä½œç¯å¢ƒå˜é‡ã€‚</p><p>è¿™äº›ç¯å¢ƒå˜é‡ï¼Œå†³å®šäº† Git åœ¨å„ä¸ªç¯èŠ‚çš„å…·ä½“å·¥ä½œæ–¹å¼å’Œè¡Œä¸ºã€‚è¿™äº›å˜é‡å¯ä»¥å­˜æ”¾åœ¨ä»¥ä¸‹ä¸‰ä¸ªä¸åŒçš„åœ°æ–¹ï¼š</p><ul><li><code>/etc/gitconfig</code> æ–‡ä»¶ï¼šç³»ç»Ÿä¸­å¯¹æ‰€æœ‰ç”¨æˆ·éƒ½æ™®éé€‚ç”¨çš„é…ç½®ã€‚è‹¥ä½¿ç”¨ <code>git config</code> æ—¶ç”¨ <code>--system</code> é€‰é¡¹ï¼Œè¯»å†™çš„å°±æ˜¯è¿™ä¸ªæ–‡ä»¶ã€‚</li><li><code>~/.gitconfig</code> æ–‡ä»¶ï¼šç”¨æˆ·ç›®å½•ä¸‹çš„é…ç½®æ–‡ä»¶åªé€‚ç”¨äºè¯¥ç”¨æˆ·ã€‚è‹¥ä½¿ç”¨ <code>git config</code> æ—¶ç”¨ <code>--global</code> é€‰é¡¹ï¼Œè¯»å†™çš„å°±æ˜¯è¿™ä¸ªæ–‡ä»¶ã€‚</li><li>å½“å‰é¡¹ç›®çš„ Git ç›®å½•ä¸­çš„é…ç½®æ–‡ä»¶ï¼ˆä¹Ÿå°±æ˜¯å·¥ä½œç›®å½•ä¸­çš„ <code>.git/config</code> æ–‡ä»¶ï¼‰ï¼šè¿™é‡Œçš„é…ç½®ä»…ä»…é’ˆå¯¹å½“å‰é¡¹ç›®æœ‰æ•ˆã€‚æ¯ä¸€ä¸ªçº§åˆ«çš„é…ç½®éƒ½ä¼šè¦†ç›–ä¸Šå±‚çš„ç›¸åŒé…ç½®ï¼Œæ‰€ä»¥ <code>.git/config</code> é‡Œçš„é…ç½®ä¼šè¦†ç›– <code>/etc/gitconfig</code> ä¸­çš„åŒåå˜é‡ã€‚</li></ul><h4 id="1ã€Git-ç”¨æˆ·ä¿¡æ¯"><a href="#1ã€Git-ç”¨æˆ·ä¿¡æ¯" class="headerlink" title="1ã€Git ç”¨æˆ·ä¿¡æ¯"></a>1ã€Git ç”¨æˆ·ä¿¡æ¯</h4><p>é…ç½®ä¸ªäººçš„ç”¨æˆ·åç§°å’Œç”µå­é‚®ä»¶åœ°å€ï¼š</p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token punctuation">[</span>root@qfedu.com ~<span class="token punctuation">]</span><span class="token comment"># git config --global user.name "qfedu"</span><span class="token punctuation">[</span>root@qfedu.com ~<span class="token punctuation">]</span><span class="token comment"># git config --global user.email test@qq.com</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre><p>å¦‚æœç”¨äº† <strong>â€“global</strong> é€‰é¡¹ï¼Œé‚£ä¹ˆæ›´æ”¹çš„é…ç½®æ–‡ä»¶å°±æ˜¯ä½äºä½ ç”¨æˆ·ä¸»ç›®å½•ä¸‹çš„é‚£ä¸ªï¼Œä»¥åä½ æ‰€æœ‰çš„é¡¹ç›®éƒ½ä¼šé»˜è®¤ä½¿ç”¨è¿™é‡Œé…ç½®çš„ç”¨æˆ·ä¿¡æ¯ã€‚</p><p>å¦‚æœè¦åœ¨æŸä¸ªç‰¹å®šçš„é¡¹ç›®ä¸­ä½¿ç”¨å…¶ä»–åå­—æˆ–è€…ç”µé‚®ï¼Œåªè¦å»æ‰ â€“global é€‰é¡¹é‡æ–°é…ç½®å³å¯ï¼Œæ–°çš„è®¾å®šä¿å­˜åœ¨å½“å‰é¡¹ç›®çš„ .git&#x2F;config æ–‡ä»¶é‡Œã€‚</p><h4 id="2ã€æ–‡æœ¬ç¼–è¾‘å™¨"><a href="#2ã€æ–‡æœ¬ç¼–è¾‘å™¨" class="headerlink" title="2ã€æ–‡æœ¬ç¼–è¾‘å™¨"></a>2ã€æ–‡æœ¬ç¼–è¾‘å™¨</h4><p>è®¾ç½®Gité»˜è®¤ä½¿ç”¨çš„æ–‡æœ¬ç¼–è¾‘å™¨, ä¸€èˆ¬å¯èƒ½ä¼šæ˜¯ Vi æˆ–è€… Vimã€‚å¦‚æœä½ æœ‰å…¶ä»–åå¥½ï¼Œæ¯”å¦‚ Emacs çš„è¯ï¼Œå¯ä»¥é‡æ–°è®¾ç½®</p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token punctuation">[</span>root@qfedu.com ~<span class="token punctuation">]</span><span class="token comment"># git config --global core.editor emacs</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><h4 id="3ã€å·®å¼‚åˆ†æå·¥å…·"><a href="#3ã€å·®å¼‚åˆ†æå·¥å…·" class="headerlink" title="3ã€å·®å¼‚åˆ†æå·¥å…·"></a>3ã€å·®å¼‚åˆ†æå·¥å…·</h4><p>è¿˜æœ‰ä¸€ä¸ªæ¯”è¾ƒå¸¸ç”¨çš„æ˜¯ï¼Œåœ¨è§£å†³åˆå¹¶å†²çªæ—¶ä½¿ç”¨å“ªç§å·®å¼‚åˆ†æå·¥å…·ã€‚æ¯”å¦‚è¦æ”¹ç”¨ vimdiff çš„è¯ï¼š</p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token punctuation">[</span>root@qfedu.com ~<span class="token punctuation">]</span><span class="token comment"># git config --global merge.tool vimdiff</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>Git å¯ä»¥ç†è§£ kdiff3ï¼Œtkdiffï¼Œmeldï¼Œxxdiffï¼Œemergeï¼Œvimdiffï¼Œgvimdiffï¼Œecmergeï¼Œå’Œ opendiff ç­‰åˆå¹¶å·¥å…·çš„è¾“å‡ºä¿¡æ¯ã€‚</p><p>å½“ç„¶ï¼Œä½ ä¹Ÿå¯ä»¥æŒ‡å®šä½¿ç”¨è‡ªå·±å¼€å‘çš„å·¥å…·</p><h4 id="4ã€æŸ¥çœ‹é…ç½®ä¿¡æ¯"><a href="#4ã€æŸ¥çœ‹é…ç½®ä¿¡æ¯" class="headerlink" title="4ã€æŸ¥çœ‹é…ç½®ä¿¡æ¯"></a>4ã€æŸ¥çœ‹é…ç½®ä¿¡æ¯</h4><p>è¦æ£€æŸ¥å·²æœ‰çš„é…ç½®ä¿¡æ¯ï¼Œå¯ä»¥ä½¿ç”¨ git config â€“list å‘½ä»¤ï¼š</p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token punctuation">[</span>root@qfedu.com ~<span class="token punctuation">]</span><span class="token comment"># git config --list</span><span class="token assign-left variable">http.postbuffer</span><span class="token operator">=</span>2M<span class="token assign-left variable">user.name</span><span class="token operator">=</span>runoob<span class="token assign-left variable">user.email</span><span class="token operator">=</span>test@runoob.com<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre><p>æœ‰æ—¶å€™ä¼šçœ‹åˆ°é‡å¤çš„å˜é‡åï¼Œé‚£å°±è¯´æ˜å®ƒä»¬æ¥è‡ªä¸åŒçš„é…ç½®æ–‡ä»¶ï¼ˆæ¯”å¦‚ &#x2F;etc&#x2F;gitconfig å’Œ ~&#x2F;.gitconfigï¼‰ï¼Œä¸è¿‡æœ€ç»ˆ Git å®é™…é‡‡ç”¨çš„æ˜¯æœ€åä¸€ä¸ªã€‚</p><p>è¿™äº›é…ç½®æˆ‘ä»¬ä¹Ÿå¯ä»¥åœ¨ <strong>~&#x2F;.gitconfig</strong> æˆ– <strong>&#x2F;etc&#x2F;gitconfig</strong> çœ‹åˆ°ï¼Œå¦‚ä¸‹æ‰€ç¤ºï¼š</p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token punctuation">[</span>root@qfedu.com ~<span class="token punctuation">]</span><span class="token comment"># vim ~/.gitconfig </span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>æ˜¾ç¤ºå†…å®¹å¦‚ä¸‹æ‰€ç¤ºï¼š</p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token punctuation">[</span>http<span class="token punctuation">]</span>    postBuffer <span class="token operator">=</span> 2M<span class="token punctuation">[</span>user<span class="token punctuation">]</span>    name <span class="token operator">=</span> <span class="token function">git</span>    email <span class="token operator">=</span> test@qfedu.com.com<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>ä¹Ÿå¯ä»¥ç›´æ¥æŸ¥é˜…æŸä¸ªç¯å¢ƒå˜é‡çš„è®¾å®šï¼Œåªè¦æŠŠç‰¹å®šçš„åå­—è·Ÿåœ¨åé¢å³å¯ï¼Œåƒè¿™æ ·ï¼š</p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token punctuation">[</span>root@qfedu.com ~<span class="token punctuation">]</span><span class="token comment"># git config user.name</span><span class="token function">git</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre><h3 id="3ã€Git-ä½¿ç”¨"><a href="#3ã€Git-ä½¿ç”¨" class="headerlink" title="3ã€Git ä½¿ç”¨"></a>3ã€Git ä½¿ç”¨</h3><h4 id="1ã€ssh-é“¾æ¥"><a href="#1ã€ssh-é“¾æ¥" class="headerlink" title="1ã€ssh é“¾æ¥"></a>1ã€ssh é“¾æ¥</h4><p>å®¢æˆ·æœºä¸Šäº§ç”Ÿå…¬é’¥ä¸Šä¼ åˆ°gitlabçš„SSH-Keysé‡Œï¼Œgit cloneä¸‹è½½å’Œgit pushä¸Šä¼ éƒ½æ²¡é—®é¢˜ï¼Œè¿™ç§æ–¹å¼å¾ˆå®‰å…¨</p><h4 id="2ã€http-é“¾æ¥ï¼ˆä¸¤ç§æ–¹å¼å®ç°ï¼‰"><a href="#2ã€http-é“¾æ¥ï¼ˆä¸¤ç§æ–¹å¼å®ç°ï¼‰" class="headerlink" title="2ã€http é“¾æ¥ï¼ˆä¸¤ç§æ–¹å¼å®ç°ï¼‰"></a>2ã€http é“¾æ¥ï¼ˆä¸¤ç§æ–¹å¼å®ç°ï¼‰</h4><h5 id="1ã€ä¿®æ”¹ä»£ç é‡Œçš„-git-x2F-config-æ–‡ä»¶æ·»åŠ ç™»å½•ç”¨æˆ·åå¯†ç "><a href="#1ã€ä¿®æ”¹ä»£ç é‡Œçš„-git-x2F-config-æ–‡ä»¶æ·»åŠ ç™»å½•ç”¨æˆ·åå¯†ç " class="headerlink" title="1ã€ä¿®æ”¹ä»£ç é‡Œçš„ .git&#x2F;config æ–‡ä»¶æ·»åŠ ç™»å½•ç”¨æˆ·åå¯†ç "></a>1ã€ä¿®æ”¹ä»£ç é‡Œçš„ .git&#x2F;config æ–‡ä»¶æ·»åŠ ç™»å½•ç”¨æˆ·åå¯†ç </h5><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token punctuation">[</span>root@qfedu.com ~<span class="token punctuation">]</span><span class="token comment"># cd .git</span><span class="token punctuation">[</span>root@qfedu.com ~<span class="token punctuation">]</span><span class="token comment"># cat config</span><span class="token punctuation">[</span>core<span class="token punctuation">]</span>repositoryformatversion <span class="token operator">=</span> <span class="token number">0</span>filemode <span class="token operator">=</span> <span class="token boolean">true</span>bare <span class="token operator">=</span> <span class="token boolean">false</span>logallrefupdates <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">[</span>remote <span class="token string">"origin"</span><span class="token punctuation">]</span>fetch <span class="token operator">=</span> +refs/heads/*:refs/remotes/origin/*url <span class="token operator">=</span> http://username:password@qfedu.com@172.17.0.39:sauser/ansible.git<span class="token punctuation">[</span>branch <span class="token string">"master"</span><span class="token punctuation">]</span>remote <span class="token operator">=</span> originmerge <span class="token operator">=</span> refs/heads/master<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h5 id="2ã€-æ‰§è¡Œå‘½ä»¤è®¾ç½®ç™»å½•ç”¨æˆ·å’Œå¯†ç "><a href="#2ã€-æ‰§è¡Œå‘½ä»¤è®¾ç½®ç™»å½•ç”¨æˆ·å’Œå¯†ç " class="headerlink" title="2ã€ æ‰§è¡Œå‘½ä»¤è®¾ç½®ç™»å½•ç”¨æˆ·å’Œå¯†ç "></a>2ã€ æ‰§è¡Œå‘½ä»¤è®¾ç½®ç™»å½•ç”¨æˆ·å’Œå¯†ç </h5><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token comment"># cdåˆ°æ ¹ç›®å½•ï¼Œæ‰§è¡Œ</span><span class="token punctuation">[</span>root@qfedu.com ~<span class="token punctuation">]</span><span class="token comment"># git config --global credential.helper store  # æ‰§è¡Œä¹‹åä¼šåœ¨.gitconfigæ–‡ä»¶ä¸­å¤šæ·»åŠ ä»¥ä¸‹é€‰é¡¹</span>  <span class="token punctuation">[</span>credential<span class="token punctuation">]</span>           helper <span class="token operator">=</span> store<span class="token comment"># cdåˆ°é¡¹ç›®ç›®å½•ï¼Œæ‰§è¡Œgit pullå‘½ä»¤ï¼Œä¼šæç¤ºè¾“å…¥è´¦å·å¯†ç ã€‚è¾“å®Œè¿™ä¸€æ¬¡ä»¥åå°±ä¸å†éœ€è¦ï¼Œå¹¶ä¸”ä¼šåœ¨æ ¹ç›®å½•ç”Ÿæˆä¸€ä¸ª.git-credentialsæ–‡ä»¶</span><span class="token punctuation">[</span>root@qfedu.com ~<span class="token punctuation">]</span><span class="token comment"># git pull </span>  Username <span class="token keyword">for</span> <span class="token string">'http://172.17.0.39:sauser/ansible.git'</span><span class="token builtin class-name">:</span>   xxxx@xxxx.com Password <span class="token keyword">for</span> <span class="token string">'https://xxxx@xxxx.com@172.17.0.39:sauser/ansible.git'</span><span class="token builtin class-name">:</span><span class="token punctuation">[</span>root@qfedu.com ~<span class="token punctuation">]</span><span class="token comment"># cat .git-credentials</span>  https://Username:Password@qfedu.com.oschina.net<span class="token comment"># ä¹‹åpull/pushä»£ç éƒ½ä¸å†éœ€è¦è¾“å…¥è´¦å·å¯†ç äº†</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h4 id="3ã€è®¾ç½®èº«ä»½éªŒè¯"><a href="#3ã€è®¾ç½®èº«ä»½éªŒè¯" class="headerlink" title="3ã€è®¾ç½®èº«ä»½éªŒè¯"></a>3ã€è®¾ç½®èº«ä»½éªŒè¯</h4><p><strong>æ³¨æ„ï¼š</strong>è®¾å®šæœ¬æœºç”¨æˆ·åï¼Œç»‘å®šé‚®ç®±ï¼Œè®©è¿œç¨‹æœåŠ¡å™¨çŸ¥é“æœºå™¨çš„èº«ä»½</p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token punctuation">[</span>root@qfedu.com ~<span class="token punctuation">]</span><span class="token comment"># git config --global user.name "user_name" </span><span class="token punctuation">[</span>root@qfedu.com ~<span class="token punctuation">]</span><span class="token comment"># git config --global user.email "XXXXX@XX.com"</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre><h4 id="4ã€æœ¬åœ°é¡¹ç›®ä¸è¿œç¨‹æœåŠ¡å™¨é¡¹ç›®ä¹‹é—´çš„äº¤äº’"><a href="#4ã€æœ¬åœ°é¡¹ç›®ä¸è¿œç¨‹æœåŠ¡å™¨é¡¹ç›®ä¹‹é—´çš„äº¤äº’" class="headerlink" title="4ã€æœ¬åœ°é¡¹ç›®ä¸è¿œç¨‹æœåŠ¡å™¨é¡¹ç›®ä¹‹é—´çš„äº¤äº’"></a>4ã€æœ¬åœ°é¡¹ç›®ä¸è¿œç¨‹æœåŠ¡å™¨é¡¹ç›®ä¹‹é—´çš„äº¤äº’</h4><p>1ã€å¦‚æœä½ æ²¡æœ‰æœ€æ–°çš„ä»£ç ï¼Œå¸Œæœ›ä»å¤´å¼€å§‹</p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token punctuation">[</span>root@qfedu.com ~<span class="token punctuation">]</span><span class="token comment"># git clone git@XXX.git      # è¿™é‡Œæ˜¯é¡¹ç›®çš„åœ°å€ï¼ˆå¯ä»é¡¹ç›®ä¸»é¡µå¤åˆ¶ï¼‰ï¼Œå°†è¿œç¨‹æœåŠ¡å™¨çš„å†…å®¹å®Œå…¨å¤åˆ¶è¿‡æ¥ </span><span class="token punctuation">[</span>root@qfedu.com ~<span class="token punctuation">]</span><span class="token comment"># cd BGBInspector_V01        # clone ä¹‹åè¿›å…¥è¯¥é¡¹ç›®çš„æ–‡ä»¶å¤¹ </span><span class="token punctuation">[</span>root@qfedu.com ~<span class="token punctuation">]</span><span class="token comment"># touchã€€README.md           # æ–°å»ºreadmeæ–‡ä»¶ </span><span class="token punctuation">[</span>root@qfedu.com ~<span class="token punctuation">]</span><span class="token comment"># git add README.md          # å°†æ–°çš„æ–‡ä»¶æ·»åŠ åˆ°gitçš„æš‚å­˜åŒº </span><span class="token punctuation">[</span>root@qfedu.com ~<span class="token punctuation">]</span><span class="token comment"># git commit -m â€˜Its noteï¼šadd a readme fileâ€™ # å°†æš‚å­˜åŒºçš„æ–‡ä»¶æäº¤åˆ°æŸä¸€ä¸ªç‰ˆæœ¬ä¿å­˜ä¸‹æ¥ï¼Œå¹¶åŠ ä¸Šæ³¨é‡Š </span><span class="token punctuation">[</span>root@qfedu.com ~<span class="token punctuation">]</span><span class="token comment"># git push -u origin master  # å°†æœ¬åœ°çš„æ›´æ”¹æäº¤åˆ°è¿œç¨‹æœåŠ¡å™¨</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>2ã€å¦‚æœä½ å·²ç»æœ‰ä¸€ä¸ªæ–°ç‰ˆä»£ç ï¼Œå¸Œæœ›ç›´æ¥æŠŠæœ¬åœ°çš„ä»£ç æ›¿æ¢åˆ°è¿œç¨‹æœåŠ¡å™¨</p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token punctuation">[</span>root@qfedu.com ~<span class="token punctuation">]</span><span class="token comment"># cd existing_folder          #è¿›å…¥ä»£ç å­˜åœ¨çš„æ–‡ä»¶å¤¹ï¼Œæˆ–è€…ç›´æ¥åœ¨è¯¥æ–‡ä»¶å¤¹æ‰“å¼€</span><span class="token punctuation">[</span>root@qfedu.com ~<span class="token punctuation">]</span><span class="token comment"># git init           # åˆå§‹åŒ– </span><span class="token punctuation">[</span>root@qfedu.com ~<span class="token punctuation">]</span><span class="token comment"># git remote add origin git@master:/git-test/shell.git  #æ·»åŠ è¿œç¨‹é¡¹ç›®"shell"åº“çš„åœ°å€ï¼ˆå¯ä»é¡¹ç›®ä¸»é¡µå¤åˆ¶ï¼‰ ,å‰ææ˜¯äº‹å…ˆéœ€è¦å…ˆåœ¨gitè¿œç¨‹æœåŠ¡å™¨ä¸Šåˆ›å»ºç›¸åº”çš„è£¸åº“"shell"</span><span class="token punctuation">[</span>root@qfedu.com ~<span class="token punctuation">]</span><span class="token comment"># git add .                   #æ·»åŠ è¯¥æ–‡ä»¶å¤¹ä¸­æ‰€æœ‰çš„æ–‡ä»¶åˆ°gitçš„æš‚å­˜åŒº </span><span class="token punctuation">[</span>root@qfedu.com ~<span class="token punctuation">]</span><span class="token comment"># git commit -m â€˜noteâ€™        #æäº¤æ‰€æœ‰ä»£ç åˆ°æœ¬æœºçš„ç‰ˆæœ¬åº“ </span><span class="token punctuation">[</span>root@qfedu.com ~<span class="token punctuation">]</span><span class="token comment"># git push -u origin master   #å°†æœ¬åœ°çš„æ›´æ”¹æäº¤åˆ°è¿œç¨‹æœåŠ¡å™¨</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><ul><li><p>git ä¸­ cloneè¿‡æ¥çš„æ—¶å€™ï¼Œgit ä¸ä¼šå¯¹æ¯”æœ¬åœ°å’ŒæœåŠ¡å™¨çš„æ–‡ä»¶ï¼Œä¹Ÿå°±ä¸ä¼šæœ‰å†²çªï¼Œ</p></li><li><p>å»ºè®®ç¡®å®šå®Œå…¨è¦†ç›–æœ¬åœ°çš„æ—¶å€™ç”¨ cloneï¼Œä¸ç¡®å®šä¼šä¸ä¼šæœ‰å†²çªçš„æ—¶å€™ç”¨ git pullï¼Œå°†è¿œç¨‹æœåŠ¡å™¨çš„ä»£ç downloadä¸‹æ¥</p></li><li><p>git pull&#x3D;git fetch+git merge</p><p>å®éªŒå¦‚ä¸‹ï¼š</p><pre class="line-numbers language-none"><code class="language-none">æœ¬åœ°ä»£ç å†…å®¹å¦‚ä¸‹ï¼š[root@node1 shell]# cat mem.sh free -m | awk &#39;NR&#x3D;&#x3D;2&#123;print $4&#125;&#39;echo helloecho ni haoè¿œç¨‹GitæœåŠ¡å™¨ä»£ç å†…å®¹å¦‚ä¸‹ï¼š[root@node1 shell]# cat mem.sh free -m | awk &#39;NR&#x3D;&#x3D;2&#123;print $4&#125;&#39;echo helloecho ni haoecho ha haæœ¬åœ°æœºå™¨åšfetchæ“ä½œï¼š[root@node1 shell]# git fetch origin master:testremote: Enumerating objects: 5, done.remote: Counting objects: 100% (5&#x2F;5), done.remote: Compressing objects: 100% (2&#x2F;2), done.remote: Total 3 (delta 0), reused 0 (delta 0)Unpacking objects: 100% (3&#x2F;3), done.From master:&#x2F;git-test&#x2F;shell * [new branch]      master     -&gt; test   b522245..10f9569  master     -&gt; origin&#x2F;masterfetchæ˜¯æŠŠè¿œç¨‹ä»£ç ä½œä¸ºæœ¬åœ°çš„ä¸€ä¸ªå…¶ä»–åˆ†æ”¯ä¸‹è½½åˆ°æœ¬åœ°ï¼Œå¹¶ä¸æ›´æ–°æœ¬åœ°åˆ†æ”¯ï¼Œè¿™é‡Œçš„å‘½ä»¤æ˜¯æŠŠè¿œç¨‹çš„â€masterâ€œåˆ†æ”¯ä¸‹è½½åˆ°æœ¬åœ°ä½œä¸ºä¸€ä¸ªæ–°çš„åˆ†æ”¯â€testâ€œå­˜åœ¨æŸ¥çœ‹æœ¬åœ°æ–‡ä»¶å¹¶æ²¡æœ‰å‘ç”Ÿå˜åŒ–[root@node1 shell]# ls  mem.sh[root@node1 shell]# cat mem.sh free -m | awk &#39;NR&#x3D;&#x3D;2&#123;print $4&#125;&#39;echo helloecho ni haoç”¨diffæŸ¥çœ‹æœ¬åœ°masteråˆ†æ”¯å’Œfetchä¸‹æ¥çš„teståˆ†æ”¯æœ‰ä»€ä¹ˆåŒºåˆ«ï¼š[root@node1 shell]# git diff master testdiff --git a&#x2F;mem.sh b&#x2F;mem.shindex 7ce0803..c0c8cef 100644--- a&#x2F;mem.sh+++ b&#x2F;mem.sh@@ -1,3 +1,4 @@ free -m | awk &#39;NR&#x3D;&#x3D;2&#123;print $4&#125;&#39; echo hello echo ni hao+echo ha haå¦‚æœå‘ç°fetchä¸‹æ¥çš„ä»£ç æ²¡ä»€ä¹ˆé—®é¢˜ï¼Œå¯ä»¥é€‰æ‹©å’Œæœ¬åœ°åˆ†æ”¯è¿›è¡Œåˆå¹¶[root@node1 shell]# git merge Updating eb8645c..10f9569Fast-forward mem.sh | 1 + 1 file changed, 1 insertion(+)[root@node1 shell]# cat mem.sh free -m | awk &#39;NR&#x3D;&#x3D;2&#123;print $4&#125;&#39;echo helloecho ni haoecho ha ha<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></li></ul><h4 id="5ã€å¸¸ç”¨çš„git-å‘½ä»¤"><a href="#5ã€å¸¸ç”¨çš„git-å‘½ä»¤" class="headerlink" title="5ã€å¸¸ç”¨çš„git å‘½ä»¤"></a>5ã€å¸¸ç”¨çš„git å‘½ä»¤</h4><p><img src="/011500266295799.jpg" alt="img"></p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token punctuation">[</span>root@qfedu.com ~<span class="token punctuation">]</span><span class="token comment"># git init                      # åˆå§‹åŒ– </span><span class="token punctuation">[</span>root@qfedu.com ~<span class="token punctuation">]</span><span class="token comment"># git add main.cpp              # å°†æŸä¸€ä¸ªæ–‡ä»¶æ·»åŠ åˆ°æš‚å­˜åŒº </span><span class="token punctuation">[</span>root@qfedu.com ~<span class="token punctuation">]</span><span class="token comment"># git add .                     # å°†æ–‡ä»¶å¤¹ä¸‹çš„æ‰€æœ‰çš„æ–‡ä»¶æ·»åŠ åˆ°æš‚å­˜åŒº </span><span class="token punctuation">[</span>root@qfedu.com ~<span class="token punctuation">]</span><span class="token comment"># git commit -m â€˜noteâ€˜          # å°†æš‚å­˜åŒºä¸­çš„æ–‡ä»¶ä¿å­˜æˆä¸ºæŸä¸€ä¸ªç‰ˆæœ¬ </span><span class="token punctuation">[</span>root@qfedu.com ~<span class="token punctuation">]</span><span class="token comment"># git log                       # æŸ¥çœ‹æ‰€æœ‰çš„ç‰ˆæœ¬æ—¥å¿— </span><span class="token punctuation">[</span>root@qfedu.com ~<span class="token punctuation">]</span><span class="token comment"># git status                    # æŸ¥çœ‹ç°åœ¨æš‚å­˜åŒºçš„çŠ¶å†µ </span><span class="token punctuation">[</span>root@qfedu.com ~<span class="token punctuation">]</span><span class="token comment"># git diff                      # æŸ¥çœ‹ç°åœ¨æ–‡ä»¶ä¸ä¸Šä¸€ä¸ªæäº¤-commitç‰ˆæœ¬çš„åŒºåˆ« </span><span class="token punctuation">[</span>root@qfedu.com ~<span class="token punctuation">]</span><span class="token comment"># git reset --hard HEAD^        # å›åˆ°ä¸Šä¸€ä¸ªç‰ˆæœ¬ </span><span class="token punctuation">[</span>root@qfedu.com ~<span class="token punctuation">]</span><span class="token comment"># git reset --hard XXXXX        # XXXä¸ºç‰ˆæœ¬ç¼–å·ï¼Œå›åˆ°æŸä¸€ä¸ªç‰ˆæœ¬ </span><span class="token punctuation">[</span>root@qfedu.com ~<span class="token punctuation">]</span><span class="token comment"># git pull origin master        # ä»ä¸»åˆ†æ”¯pullåˆ°æœ¬åœ° </span><span class="token punctuation">[</span>root@qfedu.com ~<span class="token punctuation">]</span><span class="token comment"># git push -u origin master     # ä»æœ¬åœ°pushåˆ°ä¸»åˆ†æ”¯ </span><span class="token punctuation">[</span>root@qfedu.com ~<span class="token punctuation">]</span><span class="token comment"># git pull                      # pullé»˜è®¤ä¸»åˆ†æ”¯ </span><span class="token punctuation">[</span>root@qfedu.com ~<span class="token punctuation">]</span><span class="token comment"># git push                      # pushé»˜è®¤ä¸»åˆ†æ”¯ ...</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h4 id="6ã€ç‰ˆæœ¬ç©¿æ¢­"><a href="#6ã€ç‰ˆæœ¬ç©¿æ¢­" class="headerlink" title="6ã€ç‰ˆæœ¬ç©¿æ¢­"></a>6ã€ç‰ˆæœ¬ç©¿æ¢­</h4><h5 id="1ã€ç‰ˆæœ¬å›é€€"><a href="#1ã€ç‰ˆæœ¬å›é€€" class="headerlink" title="1ã€ç‰ˆæœ¬å›é€€"></a>1ã€ç‰ˆæœ¬å›é€€</h5><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token comment"># ç”¨ git log å‘½ä»¤æŸ¥çœ‹ï¼š</span><span class="token comment"># æ¯ä¸€ä¸ªæäº¤çš„ç‰ˆæœ¬éƒ½å”¯ä¸€å¯¹åº”ä¸€ä¸ª commit ç‰ˆæœ¬å·ï¼Œ</span><span class="token comment"># ä½¿ç”¨ git reset å‘½ä»¤é€€åˆ°ä¸Šä¸€ä¸ªç‰ˆæœ¬ï¼š</span><span class="token punctuation">[</span>root@qfedu.com ~<span class="token punctuation">]</span><span class="token comment"># git reset --hard HEAD^</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token punctuation">[</span>root@qfedu.com ~<span class="token punctuation">]</span><span class="token comment"># git reflog                    # æŸ¥çœ‹å‘½ä»¤å†å²ï¼Œä»¥ä¾¿ç¡®å®šè¦å›åˆ°å“ªä¸ªç‰ˆæœ¬</span><span class="token punctuation">[</span>root@qfedu.com ~<span class="token punctuation">]</span><span class="token comment"># git reset --hard commit_id    # æ¯”å¦‚git reset --hard 3628164ï¼ˆä¸ç”¨å…¨éƒ¨è¾“å…¥ï¼Œè¾“å…¥å‰å‡ ä½å³å¯ï¼‰</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre><h5 id="2ã€åˆ†æ”¯ç®¡ç†"><a href="#2ã€åˆ†æ”¯ç®¡ç†" class="headerlink" title="2ã€åˆ†æ”¯ç®¡ç†"></a>2ã€åˆ†æ”¯ç®¡ç†</h5><p>1ã€åˆ›å»ºåˆ†æ”¯    </p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token punctuation">[</span>root@qfedu.com ~<span class="token punctuation">]</span><span class="token comment"># git checkout -b dev     #åˆ›å»ºdevåˆ†æ”¯ï¼Œç„¶ååˆ‡æ¢åˆ°devåˆ†æ”¯</span><span class="token punctuation">[</span>root@qfedu.com ~<span class="token punctuation">]</span><span class="token comment"># git checkout            #å‘½ä»¤åŠ ä¸Š-bå‚æ•°è¡¨ç¤ºåˆ›å»ºå¹¶åˆ‡æ¢ï¼Œç›¸å½“äºä»¥ä¸‹ä¸¤æ¡å‘½ä»¤ï¼š</span><span class="token punctuation">[</span>root@qfedu.com ~<span class="token punctuation">]</span><span class="token comment"># git branch dev git checkout dev</span><span class="token punctuation">[</span>root@qfedu.com ~<span class="token punctuation">]</span><span class="token comment"># git branch              #å‘½ä»¤æŸ¥çœ‹å½“å‰åˆ†æ”¯,</span><span class="token punctuation">[</span>root@qfedu.com ~<span class="token punctuation">]</span><span class="token comment"># git branch              #å‘½ä»¤ä¼šåˆ—å‡ºæ‰€æœ‰åˆ†æ”¯ï¼Œå½“å‰åˆ†æ”¯å‰é¢ä¼šæ ‡ä¸€ä¸ª*å·</span><span class="token punctuation">[</span>root@qfedu.com ~<span class="token punctuation">]</span><span class="token comment"># git branch * dev   master</span><span class="token punctuation">[</span>root@qfedu.com ~<span class="token punctuation">]</span><span class="token comment"># git add readme.txt git commit -m "branch test"  # åœ¨devåˆ†æ”¯ä¸Šæ­£å¸¸æäº¤.</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>2ã€åˆ†æ”¯åˆ‡æ¢</p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token punctuation">[</span>root@qfedu.com ~<span class="token punctuation">]</span><span class="token comment"># git checkout master     #åˆ‡æ¢å›masteråˆ†æ”¯</span><span class="token comment"># æŸ¥çœ‹ä¸€ä¸ªreadme.txtæ–‡ä»¶ï¼Œåˆšæ‰æ·»åŠ çš„å†…å®¹ä¸è§äº†ï¼Œå› ä¸ºé‚£ä¸ªæäº¤æ˜¯åœ¨devåˆ†æ”¯ä¸Šï¼Œè€Œmasteråˆ†æ”¯æ­¤åˆ»çš„æäº¤ç‚¹å¹¶æ²¡æœ‰å˜  </span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre><p>3ã€åˆå¹¶åˆ†æ”¯</p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token punctuation">[</span>root@qfedu.com ~<span class="token punctuation">]</span><span class="token comment"># git merge dev           #æŠŠdevåˆ†æ”¯çš„å·¥ä½œæˆæœåˆå¹¶åˆ°masteråˆ†æ”¯ä¸Š</span><span class="token punctuation">[</span>root@qfedu.com ~<span class="token punctuation">]</span><span class="token comment"># git merge               #å‘½ä»¤ç”¨äºåˆå¹¶æŒ‡å®šåˆ†æ”¯åˆ°å½“å‰åˆ†æ”¯ã€‚</span><span class="token comment"># åˆå¹¶åï¼Œå†æŸ¥çœ‹readme.txtçš„å†…å®¹ï¼Œå°±å¯ä»¥çœ‹åˆ°ï¼Œå’Œdevåˆ†æ”¯çš„æœ€æ–°æäº¤æ˜¯å®Œå…¨ä¸€æ ·çš„ã€‚</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">æ³¨æ„åˆ°ä¸Šé¢çš„Fast-forwardä¿¡æ¯ï¼ŒGitå‘Šè¯‰æˆ‘ä»¬ï¼Œè¿™æ¬¡åˆå¹¶æ˜¯â€œå¿«è¿›æ¨¡å¼â€ï¼Œä¹Ÿå°±æ˜¯ç›´æ¥æŠŠmasteræŒ‡å‘devçš„å½“å‰æäº¤ï¼Œæ‰€ä»¥åˆå¹¶é€Ÿåº¦éå¸¸å¿«ã€‚å½“ç„¶ï¼Œä¹Ÿä¸æ˜¯æ¯æ¬¡åˆå¹¶éƒ½èƒ½Fast-forwardï¼Œæˆ‘ä»¬åé¢ä¼šè®²å…¶ä»–æ–¹å¼çš„åˆå¹¶ã€‚<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token punctuation">[</span>root@qfedu.com ~<span class="token punctuation">]</span><span class="token comment"># git branch -d dev       #åˆ é™¤devåˆ†æ”¯äº†ï¼š</span>åˆ é™¤åï¼ŒæŸ¥çœ‹branchï¼Œå°±åªå‰©ä¸‹masteråˆ†æ”¯äº†.<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre><h5 id="3ã€è§£å†³å†²çª"><a href="#3ã€è§£å†³å†²çª" class="headerlink" title="3ã€è§£å†³å†²çª"></a>3ã€è§£å†³å†²çª</h5><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token punctuation">[</span>root@qfedu.com ~<span class="token punctuation">]</span><span class="token comment"># git checkout -b feature1        # åˆ›å»ºæ–°çš„feature1åˆ†æ”¯</span><span class="token comment"># ä¿®æ”¹readme.txtæœ€åä¸€è¡Œï¼Œæ”¹ä¸ºï¼š</span>Creating a new branch is quick AND simple.<span class="token punctuation">[</span>root@qfedu.com ~<span class="token punctuation">]</span><span class="token comment"># git add readme.txt              # åœ¨feature1åˆ†æ”¯ä¸Šæäº¤</span><span class="token punctuation">[</span>root@qfedu.com ~<span class="token punctuation">]</span><span class="token comment"># git commit -m "AND simple"</span><span class="token punctuation">[</span>root@qfedu.com ~<span class="token punctuation">]</span><span class="token comment"># git checkout master             #åˆ‡æ¢åˆ°masteråˆ†æ”¯</span>Switched to branch <span class="token string">'master'</span> Your branch is ahead of <span class="token string">'origin/master'</span> by <span class="token number">1</span> commit.Gitè¿˜ä¼šè‡ªåŠ¨æç¤ºæˆ‘ä»¬å½“å‰masteråˆ†æ”¯æ¯”è¿œç¨‹çš„masteråˆ†æ”¯è¦è¶…å‰1ä¸ªæäº¤ã€‚åœ¨masteråˆ†æ”¯ä¸ŠæŠŠreadme.txtæ–‡ä»¶çš„æœ€åä¸€è¡Œæ”¹ä¸ºï¼šCreating a new branch is quick <span class="token operator">&amp;</span> simple.<span class="token punctuation">[</span>root@qfedu.com ~<span class="token punctuation">]</span><span class="token comment"># git add readme.txt </span><span class="token punctuation">[</span>root@qfedu.com ~<span class="token punctuation">]</span><span class="token comment"># git commit -m "&amp; simple"</span>ç°åœ¨ï¼Œmasteråˆ†æ”¯å’Œfeature1åˆ†æ”¯å„è‡ªéƒ½åˆ†åˆ«æœ‰æ–°çš„æäº¤è¿™ç§æƒ…å†µä¸‹ï¼ŒGitæ— æ³•æ‰§è¡Œâ€œå¿«é€Ÿåˆå¹¶â€ï¼Œåªèƒ½è¯•å›¾æŠŠå„è‡ªçš„ä¿®æ”¹åˆå¹¶èµ·æ¥ï¼Œä½†è¿™ç§åˆå¹¶å°±å¯èƒ½ä¼šæœ‰å†²çªï¼Œæˆ‘ä»¬è¯•è¯•çœ‹ï¼š<span class="token function">git</span> merge feature1 Auto-merging readme.txt CONFLICT <span class="token punctuation">(</span>content<span class="token punctuation">)</span>: Merge conflict <span class="token keyword">in</span> readme.txt Automatic merge failed<span class="token punctuation">;</span> fix conflicts and <span class="token keyword">then</span> commit the result.<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">readme.txtæ–‡ä»¶å­˜åœ¨å†²çªï¼Œå¿…é¡»æ‰‹åŠ¨è§£å†³å†²çªåå†æäº¤ã€‚<span class="token punctuation">[</span>root@qfedu.com ~<span class="token punctuation">]</span><span class="token comment"># git status å¯ä»¥æ˜¾ç¤ºå†²çªçš„æ–‡ä»¶;</span>ç›´æ¥æŸ¥çœ‹readme.txtçš„å†…å®¹ï¼šGit is a distributed version control system.Git is <span class="token function">free</span> software distributed under the GPL. Git has a mutable index called stage. Git tracks changes of files. <span class="token operator">&lt;&lt;&lt;</span><span class="token operator">&lt;&lt;&lt;</span><span class="token operator">&lt;</span> HEAD Creating a new branch is quick <span class="token operator">&amp;</span> simple. <span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">=</span> Creating a new branch is quick AND simple. <span class="token operator">>></span><span class="token operator">>></span><span class="token operator">>></span><span class="token operator">></span> feature1Gitç”¨<span class="token operator">&lt;&lt;&lt;</span><span class="token operator">&lt;&lt;&lt;</span><span class="token operator">&lt;</span>ï¼Œ<span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">=</span>ï¼Œ<span class="token operator">>></span><span class="token operator">>></span><span class="token operator">>></span><span class="token operator">></span>æ ‡è®°å‡ºä¸åŒåˆ†æ”¯çš„å†…å®¹ï¼Œæˆ‘ä»¬ä¿®æ”¹åä¿å­˜å†æäº¤ï¼š<span class="token punctuation">[</span>root@qfedu.com ~<span class="token punctuation">]</span><span class="token comment"># git add readme.txt  </span><span class="token punctuation">[</span>root@qfedu.com ~<span class="token punctuation">]</span><span class="token comment"># git commit -m "conflict fixed" </span><span class="token punctuation">[</span>master 59bc1cb<span class="token punctuation">]</span> conflict fixedæœ€åï¼Œåˆ é™¤feature1åˆ†æ”¯ï¼š<span class="token punctuation">[</span>root@qfedu.com ~<span class="token punctuation">]</span><span class="token comment"># git branch -d feature1 </span>Deleted branch feature1 <span class="token punctuation">(</span>was 75a857c<span class="token punctuation">)</span>.<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h2 id="ä¸ƒã€Github-è¿œç¨‹ä»“åº“"><a href="#ä¸ƒã€Github-è¿œç¨‹ä»“åº“" class="headerlink" title="ä¸ƒã€Github è¿œç¨‹ä»“åº“"></a>ä¸ƒã€Github è¿œç¨‹ä»“åº“</h2><p>1ã€github.com æ³¨å†Œè´¦æˆ·</p><p>2ã€github ä¸Šåˆ›å»ºä»“åº“</p><p>3ã€æœ¬åœ°æœåŠ¡å™¨ç”Ÿæˆ ssh å…¬é’¥</p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token punctuation">[</span>root@qfedu.com ~<span class="token punctuation">]</span><span class="token comment"># ssh-keygen -t rsa -C 'meteor@163.com'  # é‚®ç®±è¦ä¸githubä¸Šæ³¨å†Œçš„ç›¸åŒ</span><span class="token punctuation">[</span>root@qfedu.com ~<span class="token punctuation">]</span><span class="token comment"># cat .ssh/id_rsa.pub </span>ssh-rsa AAAAB3NzaC1yc2EAAAADAQABAAABAQDVThfq4brrlsPGtAknVB0TLPx+7Dd3qlxTbSIrUOsGC5Y8JuNqVTlIntZB4oNj8cSQrWvec9CKm0a8o7WwaJIiqpxurz+YpQHP2KbapftKIxsX4hPf/z+p0El1U6arQa35/xmNsq+cJLH/bDdRG+EMDhuCBmjVZOlLj/hEdeIT6s56AnnCkaWoF+sq58KCF7Tk54jRbs/YiyE4SN7FuA70r+07sA/uj0+lmuk4E190KtQUELhjX/E9stivlqiRhxnKvVUqXDywsjfM8Rtvbi4Fg9R8Wt9fpd4QwnWksYUoR5qZJFYXO4hSZrUnSMruPK14xXjDJcFDcP2eHIzKgLD1 meteor@163.com<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre><p>4ã€ github æ·»åŠ  ssh å…¬é’¥ </p><p>å¤åˆ¶ä»¥ä¸Šçš„å…¬é’¥ï¼Œåœ¨ github ä¸­æ·»åŠ ssh key</p><p>5ã€æµ‹è¯•è¿æ¥</p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token punctuation">[</span>root@qfedu.com ~<span class="token punctuation">]</span><span class="token comment"># yum install git</span><span class="token punctuation">..</span><span class="token punctuation">..</span><span class="token punctuation">..</span><span class="token punctuation">..</span><span class="token punctuation">[</span>root@qfedu.com ~<span class="token punctuation">]</span><span class="token comment"># ssh -T git@qfedu.comhub.com</span>The authenticity of <span class="token function">host</span> <span class="token string">'github.com (13.250.177.223)'</span> can<span class="token string">'t be established.RSA key fingerprint is SHA256:nThbg6kXUpJWGl7E1IGOCspRomTxdCARLviKw6E5SY8.RSA key fingerprint is MD5:16:27:ac:a5:76:28:2d:36:63:1b:56:4d:eb:df:a6:48.Are you sure you want to continue connecting (yes/no)? yesWarning: Permanently added '</span>github.com,13.250.177.223<span class="token string">' (RSA) to the list of known hosts.Hi meteor! You'</span>ve successfully authenticated, but GitHub does not provide shell access.<span class="token punctuation">[</span>root@qfedu.com ~<span class="token punctuation">]</span><span class="token comment">#</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>6ã€è¿æ¥è¿œç¨‹ä»“åº“ï¼ˆåˆ›å»ºä¸€ä¸ªæµ‹è¯•å­˜å‚¨åº“ï¼‰</p><p><img src="/git_remote_method.png" alt="it_remote_metho"></p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token comment"># åœ¨ github ç½‘ç«™æ–°å»ºä¸€ä¸ªä»“åº“ï¼Œå‘½åä¸ºlinux</span>~~~<span class="token punctuation">[</span>root@qfedu.com ~<span class="token punctuation">]</span><span class="token comment"># cd /opt</span><span class="token punctuation">[</span>root@qfedu.com ~<span class="token punctuation">]</span><span class="token comment"># mkdir linux</span><span class="token punctuation">[</span>root@qfedu.com ~<span class="token punctuation">]</span><span class="token comment"># mkdir linux</span><span class="token punctuation">[</span>root@qfedu.com ~<span class="token punctuation">]</span><span class="token comment"># cd linux</span>~~~<span class="token comment"># git åˆå§‹åŒ–ï¼Œç„¶ååšç¬¬ä¸€ä¸ªåŸºæœ¬çš„gitæ“ä½œ(éœ€è¦åœ¨githubä¸Šåˆ›å»ºå­˜å‚¨åº“)</span><span class="token punctuation">[</span>root@qfedu.com ~<span class="token punctuation">]</span><span class="token comment"># git init</span><span class="token punctuation">[</span>root@qfedu.com ~<span class="token punctuation">]</span><span class="token comment"># touch README</span><span class="token punctuation">[</span>root@qfedu.com ~<span class="token punctuation">]</span><span class="token comment"># git add README</span><span class="token punctuation">[</span>root@qfedu.com ~<span class="token punctuation">]</span><span class="token comment"># git commit -m 'first commit'</span><span class="token punctuation">[</span>root@qfedu.com ~<span class="token punctuation">]</span><span class="token comment"># git remote add origin git@qfedu.comhub.com:userhub/linux.git</span>~~~<span class="token comment"># è‹¥å‡ºç°originå·²ç»å­˜åœ¨çš„é”™è¯¯ï¼Œåˆ é™¤origin</span><span class="token punctuation">[</span>root@qfedu.com linux<span class="token punctuation">]</span><span class="token comment"># git remote rm origin</span><span class="token comment"># ç°åœ¨ç»§ç»­æ‰§è¡Œpushåˆ°è¿œç«¯</span>~~~<span class="token punctuation">[</span>root@qfedu.com linux<span class="token punctuation">]</span><span class="token comment"># git remote add origin git@qfedu.comhub.com:userhub/linux.git</span><span class="token punctuation">[</span>root@qfedu.com linux<span class="token punctuation">]</span><span class="token comment"># git push -u origin master</span>Counting objects: <span class="token number">3</span>, done.Writing objects: <span class="token number">100</span>% <span class="token punctuation">(</span><span class="token number">3</span>/3<span class="token punctuation">)</span>, <span class="token number">205</span> bytes <span class="token operator">|</span> <span class="token number">0</span> bytes/s, done.Total <span class="token number">3</span> <span class="token punctuation">(</span>delta <span class="token number">0</span><span class="token punctuation">)</span>, reused <span class="token number">0</span> <span class="token punctuation">(</span>delta <span class="token number">0</span><span class="token punctuation">)</span>To git@qfedu.comhub.com:fakehydra/linux-.git * <span class="token punctuation">[</span>new branch<span class="token punctuation">]</span>      master -<span class="token operator">></span> masteråˆ†æ”¯ master è®¾ç½®ä¸ºè·Ÿè¸ªæ¥è‡ª origin çš„è¿œç¨‹åˆ†æ”¯ masterã€‚<span class="token comment"># æ³¨æ„</span><span class="token comment"># è®¾ç½®å­˜å‚¨åº“é“¾æ¥</span><span class="token punctuation">[</span>root@qfedu.com ~<span class="token punctuation">]</span><span class="token comment"># git remote set-url origin git@qfedu.comhub.com:userhub/linux.git</span><span class="token comment"># å¦‚æœ push å¤±è´¥ï¼Œåˆå¹¶åˆ†æ”¯åˆ° master å† push</span><span class="token punctuation">[</span>root@qfedu.com ~<span class="token punctuation">]</span><span class="token comment"># git pull --rebase origin master</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h2 id="å…«ã€Gitlab-Server-éƒ¨ç½²"><a href="#å…«ã€Gitlab-Server-éƒ¨ç½²" class="headerlink" title="å…«ã€Gitlab Server éƒ¨ç½²"></a>å…«ã€Gitlab Server éƒ¨ç½²</h2><h3 id="1ã€ç¯å¢ƒé…ç½®"><a href="#1ã€ç¯å¢ƒé…ç½®" class="headerlink" title="1ã€ç¯å¢ƒé…ç½®"></a>1ã€ç¯å¢ƒé…ç½®</h3><p>å…³é—­é˜²ç«å¢™ã€SELinux</p><p>å¼€å¯é‚®ä»¶æœåŠ¡</p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token punctuation">[</span>root@qfedu.com ~<span class="token punctuation">]</span><span class="token comment"># systemctl start  postfix</span><span class="token punctuation">[</span>root@qfedu.com ~<span class="token punctuation">]</span><span class="token comment"># systemctl enable postfix</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre><h3 id="2ã€éƒ¨ç½²-Gitlab"><a href="#2ã€éƒ¨ç½²-Gitlab" class="headerlink" title="2ã€éƒ¨ç½² Gitlab"></a>2ã€éƒ¨ç½² Gitlab</h3><h4 id="1ã€å®‰è£…-gitlab-ä¾èµ–åŒ…"><a href="#1ã€å®‰è£…-gitlab-ä¾èµ–åŒ…" class="headerlink" title="1ã€å®‰è£… gitlab ä¾èµ–åŒ…"></a>1ã€å®‰è£… gitlab ä¾èµ–åŒ…</h4><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">centos7:<span class="token punctuation">[</span>root@qfedu.com ~<span class="token punctuation">]</span><span class="token comment"># yum install -y curl openssh-server openssh-clients postfix cronie policycoreutils-python</span><span class="token comment"># gitlab-ce 10.x.xä»¥åçš„ç‰ˆæœ¬éœ€è¦ä¾èµ–policycoreutils-python</span>centos8:<span class="token punctuation">[</span>root@qfedu.com ~<span class="token punctuation">]</span><span class="token comment"># yum install -y curl openssh-server openssh-clients postfix cronie  policycoreutils-python-utils</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h4 id="2ã€æ·»åŠ å®˜æ–¹æº"><a href="#2ã€æ·»åŠ å®˜æ–¹æº" class="headerlink" title="2ã€æ·»åŠ å®˜æ–¹æº"></a>2ã€æ·»åŠ å®˜æ–¹æº</h4><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token punctuation">[</span>root@qfedu.com ~<span class="token punctuation">]</span><span class="token comment"># curl https://packages.gitlab.com/install/repositories/gitlab/gitlab-ce/script.rpm.sh | sudo bash</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>å› ä¸ºå®˜æ–¹æºå¤ªæ…¢ï¼Œå¯ä»¥ä½¿ç”¨å›½å†…æ¸…åyumæºï¼Œé…ç½®å¦‚ä¸‹</p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token punctuation">[</span>root@qfedu.com ~<span class="token punctuation">]</span><span class="token comment"># vim /etc/yum.repos.d/gitlab-ce.repo</span><span class="token punctuation">[</span>gitlab-ce<span class="token punctuation">]</span><span class="token assign-left variable">name</span><span class="token operator">=</span>Gitlab CE Repository<span class="token assign-left variable">baseurl</span><span class="token operator">=</span>https://mirrors.tuna.tsinghua.edu.cn/gitlab-ce/yum/el<span class="token variable">$releasever</span>/<span class="token assign-left variable">gpgcheck</span><span class="token operator">=</span><span class="token number">0</span><span class="token assign-left variable">enabled</span><span class="token operator">=</span><span class="token number">1</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h4 id="3ã€å®‰è£…-Gitlab"><a href="#3ã€å®‰è£…-Gitlab" class="headerlink" title="3ã€å®‰è£… Gitlab"></a>3ã€å®‰è£… Gitlab</h4><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token punctuation">[</span>root@qfedu.com ~<span class="token punctuation">]</span><span class="token comment"># yum -y install gitlab-ce                    # è‡ªåŠ¨å®‰è£…æœ€æ–°ç‰ˆ</span><span class="token punctuation">[</span>root@qfedu.com ~<span class="token punctuation">]</span><span class="token comment"># yum -y install gitlab-ce-x.x.x# å®‰è£…æŒ‡å®šç‰ˆæœ¬Gitlab</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre><h4 id="4ã€é…ç½®-Gitlab"><a href="#4ã€é…ç½®-Gitlab" class="headerlink" title="4ã€é…ç½® Gitlab"></a>4ã€é…ç½® Gitlab</h4><h5 id="1ã€æŸ¥çœ‹Gitlabç‰ˆæœ¬"><a href="#1ã€æŸ¥çœ‹Gitlabç‰ˆæœ¬" class="headerlink" title="1ã€æŸ¥çœ‹Gitlabç‰ˆæœ¬"></a>1ã€æŸ¥çœ‹Gitlabç‰ˆæœ¬</h5><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token punctuation">[</span>root@qfedu.com ~<span class="token punctuation">]</span><span class="token comment"># head -1 /opt/gitlab/version-manifest.txt</span>gitlab-ce <span class="token number">10.1</span>.1<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre><h5 id="2ã€Gitlab-é…ç½®ç™»å½•é“¾æ¥"><a href="#2ã€Gitlab-é…ç½®ç™»å½•é“¾æ¥" class="headerlink" title="2ã€Gitlab é…ç½®ç™»å½•é“¾æ¥"></a>2ã€Gitlab é…ç½®ç™»å½•é“¾æ¥</h5><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token comment">#è®¾ç½®ç™»å½•é“¾æ¥</span><span class="token punctuation">[</span>root@qfedu.com ~<span class="token punctuation">]</span><span class="token comment"># vim /etc/gitlab/gitlab.rb</span>***<span class="token comment">## GitLab URL</span><span class="token comment">##! URL on which GitLab will be reachable.</span><span class="token comment">##! For more details on configuring external_url see:</span><span class="token comment">##! https://docs.gitlab.com/omnibus/settings/configuration.html#configuring-the-external-url-for-gitlab</span><span class="token comment"># æ²¡æœ‰åŸŸåï¼Œå¯ä»¥è®¾ç½®ä¸ºæœ¬æœºIPåœ°å€</span>external_url <span class="token string">'http://172.17.0.61'</span>***<span class="token punctuation">[</span>root@qfedu.com ~<span class="token punctuation">]</span><span class="token comment"># grep "^external_url" /etc/gitlab/gitlab.rb</span>external_url <span class="token string">'http://172.17.0.61'</span>     <span class="token comment">#ç»‘å®šç›‘å¬çš„åŸŸåæˆ–IP</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h5 id="3ã€åˆå§‹åŒ–-Gitlab"><a href="#3ã€åˆå§‹åŒ–-Gitlab" class="headerlink" title="3ã€åˆå§‹åŒ– Gitlab"></a>3ã€åˆå§‹åŒ– Gitlab</h5><p><strong>é…ç½®è¯­è¨€ç¯å¢ƒ</strong></p><p>gitlabè¦æ±‚è¯­è¨€ç¯å¢ƒä¸ºè‹±æ–‡ç¯å¢ƒï¼Œå¿…é¡»åˆ‡æ¢ï¼Œåˆ‡æ¢æ–¹æ³•å¦‚ä¸‹ï¼š</p><pre class="line-numbers language-none"><code class="language-none">æ³¨æ„ï¼šå¯ä»¥å…ˆå°è¯•ä»¥ä¸‹æ–¹æ¡ˆè¯­è¨€ç¯å¢ƒé—®é¢˜ï¼šå¦‚æœç¢°åˆ°ä¹‹åçš„è§£å†³æ–¹æ¡ˆå¦‚ä¸‹ï¼Œéœ€è¦é‡æ–°ç™»å½• [root@wing ~]# echo &quot;export LC_ALL&#x3D;en_US.UTF-8&quot;  &gt;&gt;  &#x2F;etc&#x2F;profile å¦‚æœä¸Šé¢çš„æ–¹æ¡ˆä¸å¯ä»¥ï¼Œå†ä½¿ç”¨ä¸‹é¢çš„æ–¹æ¡ˆï¼š # yum install langpacks-zh_CN langpacks-en langpacks-en_GB -y# cat &gt; &#x2F;etc&#x2F;profile.d&#x2F;locale.sh&lt;&lt;-EOF export LANG&#x3D;en_US.UTF-8 export LANGUAGE&#x3D;en_US.UTF-8 export LC_COLLATE&#x3D;C export LC_CTYPE&#x3D;en_US.UTF-8 EOF# source &#x2F;etc&#x2F;profile.d&#x2F;locale.shé€€å‡ºç»ˆç«¯é‡æ–°ç™»é™†<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>ç¬¬ä¸€æ¬¡ä½¿ç”¨é…ç½®æ—¶é—´è¾ƒé•¿</p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token punctuation">[</span>root@qfedu.com ~<span class="token punctuation">]</span><span class="token comment"># gitlab-ctl reconfigure   </span><span class="token punctuation">..</span><span class="token punctuation">..</span>.<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre><h5 id="4ã€å¯åŠ¨-Gitlab-æœåŠ¡"><a href="#4ã€å¯åŠ¨-Gitlab-æœåŠ¡" class="headerlink" title="4ã€å¯åŠ¨ Gitlab æœåŠ¡"></a>4ã€å¯åŠ¨ Gitlab æœåŠ¡</h5><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token punctuation">[</span>root@qfedu.com ~<span class="token punctuation">]</span><span class="token comment"># gitlab-ctl start</span>ok: run: gitaly: <span class="token punctuation">(</span>pid <span class="token number">22896</span><span class="token punctuation">)</span> 2922sok: run: gitlab-monitor: <span class="token punctuation">(</span>pid <span class="token number">22914</span><span class="token punctuation">)</span> 2921sok: run: gitlab-workhorse: <span class="token punctuation">(</span>pid <span class="token number">22882</span><span class="token punctuation">)</span> 2922sok: run: logrotate: <span class="token punctuation">(</span>pid <span class="token number">22517</span><span class="token punctuation">)</span> 2987sok: run: nginx: <span class="token punctuation">(</span>pid <span class="token number">22500</span><span class="token punctuation">)</span> 2993sok: run: node-exporter: <span class="token punctuation">(</span>pid <span class="token number">22584</span><span class="token punctuation">)</span> 2974sok: run: postgres-exporter: <span class="token punctuation">(</span>pid <span class="token number">22946</span><span class="token punctuation">)</span> 2919sok: run: postgresql: <span class="token punctuation">(</span>pid <span class="token number">22250</span><span class="token punctuation">)</span> 3047sok: run: prometheus: <span class="token punctuation">(</span>pid <span class="token number">22931</span><span class="token punctuation">)</span> 2920sok: run: redis: <span class="token punctuation">(</span>pid <span class="token number">22190</span><span class="token punctuation">)</span> 3053sok: run: redis-exporter: <span class="token punctuation">(</span>pid <span class="token number">22732</span><span class="token punctuation">)</span> 2962sok: run: sidekiq: <span class="token punctuation">(</span>pid <span class="token number">22472</span><span class="token punctuation">)</span> 3005sok: run: unicorn: <span class="token punctuation">(</span>pid <span class="token number">22433</span><span class="token punctuation">)</span> 3011s<span class="token punctuation">[</span>git@qfedu.com ~<span class="token punctuation">]</span><span class="token comment"># lsof -i:80</span>COMMAND   PID       <span class="token environment constant">USER</span>   FD   TYPE DEVICE SIZE/OFF NODE NAMEnginx   <span class="token number">22500</span>       root    7u  IPv4  <span class="token number">50923</span>      0t0  TCP *:http <span class="token punctuation">(</span>LISTEN<span class="token punctuation">)</span>nginx   <span class="token number">22501</span> gitlab-www    7u  IPv4  <span class="token number">50923</span>      0t0  TCP *:http <span class="token punctuation">(</span>LISTEN<span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h5 id="5ã€Gitlab-è®¾ç½®-HTTPS-æ–¹å¼-ï¼ˆç¼ºå°‘é…ç½®ï¼‰"><a href="#5ã€Gitlab-è®¾ç½®-HTTPS-æ–¹å¼-ï¼ˆç¼ºå°‘é…ç½®ï¼‰" class="headerlink" title="5ã€Gitlab è®¾ç½® HTTPS æ–¹å¼ ï¼ˆç¼ºå°‘é…ç½®ï¼‰"></a>5ã€Gitlab è®¾ç½® HTTPS æ–¹å¼ ï¼ˆç¼ºå°‘é…ç½®ï¼‰</h5><ul><li>å¦‚æœæƒ³è¦ä»¥ä¸Šçš„ https æ–¹å¼æ­£å¸¸ç”Ÿæ•ˆä½¿ç”¨ï¼Œåˆ™éœ€è¦æŠŠ letsencrypt è‡ªåŠ¨ç”Ÿæˆè¯ä¹¦çš„é…ç½®æ‰“å¼€ï¼Œè¿™æ ·åœ¨æ‰§è¡Œé‡æ–°è®©é…ç½®ç”Ÿæ•ˆå‘½ä»¤ (gitlab-ctl reconfigure) çš„æ—¶å€™ä¼šè‡ªåŠ¨ç»™åŸŸåç”Ÿæˆå…è´¹çš„è¯ä¹¦å¹¶è‡ªåŠ¨åœ¨ gitlab è‡ªå¸¦çš„ nginx ä¸­åŠ ä¸Šç›¸å…³çš„è·³è½¬é…ç½®ï¼Œéƒ½æ˜¯å…¨è‡ªåŠ¨çš„ï¼Œéå¸¸æ–¹ä¾¿ã€‚</li></ul><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token punctuation">[</span>root@qfedu.com ~<span class="token punctuation">]</span><span class="token comment"># vim /etc/gitlab/gitlab.rb</span>letsencrypt<span class="token punctuation">[</span><span class="token string">'enable'</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token boolean">true</span> //å¦‚æœå› ä¸ºè¿™è¡ŒæŠ¥é”™ï¼Œæ”¹æˆfalseå³å¯letsencrypt<span class="token punctuation">[</span><span class="token string">'contact_emails'</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token string">'276267003@qq.com'</span><span class="token punctuation">]</span>     <span class="token comment"># æ·»åŠ è”ç³»äººçš„ç”µå­é‚®ä»¶åœ°å€</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre><h5 id="6ã€Gitlab-æ·»åŠ smtpé‚®ä»¶åŠŸèƒ½"><a href="#6ã€Gitlab-æ·»åŠ smtpé‚®ä»¶åŠŸèƒ½" class="headerlink" title="6ã€Gitlab æ·»åŠ smtpé‚®ä»¶åŠŸèƒ½"></a>6ã€Gitlab æ·»åŠ smtpé‚®ä»¶åŠŸèƒ½</h5><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token punctuation">[</span>git@qfedu.com ~<span class="token punctuation">]</span><span class="token comment"># vim /etc/gitlab/gitlab.rb</span>postfix å¹¶éå¿…é¡»çš„ï¼›æ ¹æ®å…·ä½“æƒ…å†µé…ç½®ï¼Œä»¥ SMTP çš„ä¸ºä¾‹é…ç½®é‚®ä»¶æœåŠ¡å™¨æ¥å®ç°é€šçŸ¥ï¼›å‚è€ƒé…ç½®å¦‚ä¸‹ï¼š <span class="token comment">### Email Settings</span>gitlab_rails<span class="token punctuation">[</span><span class="token string">'gitlab_email_enabled'</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token boolean">true</span>gitlab_rails<span class="token punctuation">[</span><span class="token string">'gitlab_email_from'</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token string">'15652533044@163.com'</span>gitlab_rails<span class="token punctuation">[</span><span class="token string">'gitlab_email_display_name'</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token string">'gitlab'</span>gitlab_rails<span class="token punctuation">[</span><span class="token string">'gitlab_email_reply_to'</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token string">'15652533044@163.com'</span>gitlab_rails<span class="token punctuation">[</span><span class="token string">'gitlab_email_subject_suffix'</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token string">'[gitlab]'</span>gitlab_rails<span class="token punctuation">[</span><span class="token string">'smtp_enable'</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token boolean">true</span>gitlab_rails<span class="token punctuation">[</span><span class="token string">'smtp_address'</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token string">"smtp.163.com"</span>gitlab_rails<span class="token punctuation">[</span><span class="token string">'smtp_port'</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token number">465</span>gitlab_rails<span class="token punctuation">[</span><span class="token string">'smtp_user_name'</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token string">"15652533044@163.com"</span>gitlab_rails<span class="token punctuation">[</span><span class="token string">'smtp_password'</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token string">"kktohrvdryglbjjh"</span> <span class="token comment">#è¿™æ˜¯æˆ‘çš„qqé‚®ç®±æˆæƒç </span>gitlab_rails<span class="token punctuation">[</span><span class="token string">'smtp_domain'</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token string">"smtp.163.com"</span>gitlab_rails<span class="token punctuation">[</span><span class="token string">'smtp_authentication'</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token string">"login"</span>gitlab_rails<span class="token punctuation">[</span><span class="token string">'smtp_enable_starttls_auto'</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token boolean">true</span>gitlab_rails<span class="token punctuation">[</span><span class="token string">'smtp_tls'</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token boolean">true</span><span class="token comment">#ä¿®æ”¹é…ç½®åéœ€è¦åˆå§‹åŒ–é…ç½®ï¼Œå…ˆå…³æ‰æœåŠ¡å†é‡æ–°åˆå§‹åŒ–</span><span class="token punctuation">[</span>git@qfedu.com ~<span class="token punctuation">]</span><span class="token comment"># gitlab-ctl stop</span>ok: down: gitaly: 0s, normally upok: down: gitlab-monitor: 1s, normally upok: down: gitlab-workhorse: 0s, normally upok: down: logrotate: 1s, normally upok: down: nginx: 0s, normally upok: down: node-exporter: 1s, normally upok: down: postgres-exporter: 0s, normally upok: down: postgresql: 0s, normally upok: down: prometheus: 0s, normally upok: down: redis: 0s, normally upok: down: redis-exporter: 1s, normally upok: down: sidekiq: 0s, normally upok: down: unicorn: 1s, normally up<span class="token punctuation">[</span>git@qfedu.com ~<span class="token punctuation">]</span><span class="token comment"># gitlab-ctl reconfigure  </span><span class="token punctuation">..</span><span class="token punctuation">..</span><span class="token punctuation">..</span><span class="token punctuation">[</span>git@qfedu.com ~<span class="token punctuation">]</span><span class="token comment"># gitlab-ctl start</span>ok: run: gitaly: <span class="token punctuation">(</span>pid <span class="token number">37603</span><span class="token punctuation">)</span> 0sok: run: gitlab-monitor: <span class="token punctuation">(</span>pid <span class="token number">37613</span><span class="token punctuation">)</span> 0sok: run: gitlab-workhorse: <span class="token punctuation">(</span>pid <span class="token number">37625</span><span class="token punctuation">)</span> 0sok: run: logrotate: <span class="token punctuation">(</span>pid <span class="token number">37631</span><span class="token punctuation">)</span> 0sok: run: nginx: <span class="token punctuation">(</span>pid <span class="token number">37639</span><span class="token punctuation">)</span> 1sok: run: node-exporter: <span class="token punctuation">(</span>pid <span class="token number">37644</span><span class="token punctuation">)</span> 0sok: run: postgres-exporter: <span class="token punctuation">(</span>pid <span class="token number">37648</span><span class="token punctuation">)</span> 1sok: run: postgresql: <span class="token punctuation">(</span>pid <span class="token number">37652</span><span class="token punctuation">)</span> 0sok: run: prometheus: <span class="token punctuation">(</span>pid <span class="token number">37660</span><span class="token punctuation">)</span> 1sok: run: redis: <span class="token punctuation">(</span>pid <span class="token number">37668</span><span class="token punctuation">)</span> 0sok: run: redis-exporter: <span class="token punctuation">(</span>pid <span class="token number">37746</span><span class="token punctuation">)</span> 0sok: run: sidekiq: <span class="token punctuation">(</span>pid <span class="token number">37750</span><span class="token punctuation">)</span> 1sok: run: unicorn: <span class="token punctuation">(</span>pid <span class="token number">37757</span><span class="token punctuation">)</span> 0s<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h5 id="7ã€Gitlab-å‘é€é‚®ä»¶æµ‹è¯•"><a href="#7ã€Gitlab-å‘é€é‚®ä»¶æµ‹è¯•" class="headerlink" title="7ã€Gitlab å‘é€é‚®ä»¶æµ‹è¯•"></a>7ã€Gitlab å‘é€é‚®ä»¶æµ‹è¯•</h5><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token punctuation">[</span>git@qfedu.com ~<span class="token punctuation">]</span><span class="token comment"># gitlab-rails console </span><span class="token punctuation">[</span>root@wing ~<span class="token punctuation">]</span><span class="token comment"># gitlab-rails console</span>--------------------------------------------------------------------- GitLab:       <span class="token number">12.10</span>.1 <span class="token punctuation">(</span>e658772bd63<span class="token punctuation">)</span> FOSS GitLab Shell: <span class="token number">12.2</span>.0 PostgreSQL:   <span class="token number">11.7</span>---------------------------------------------------------------------Loading production environment <span class="token punctuation">(</span>Rails <span class="token number">6.0</span>.2<span class="token punctuation">)</span>irb<span class="token punctuation">(</span>main<span class="token punctuation">)</span>:003:<span class="token operator"><span class="token file-descriptor important">0</span>></span> irb<span class="token punctuation">(</span>main<span class="token punctuation">)</span>:004:<span class="token operator"><span class="token file-descriptor important">0</span>></span> Notify.test_email<span class="token punctuation">(</span><span class="token string">'15652533044@163.com'</span>, <span class="token string">'Message Subject'</span>, <span class="token string">'Message Body'</span><span class="token punctuation">)</span>.deliver_now  //è¾“å…¥æµ‹è¯•å‘½ä»¤ï¼Œå›è½¦Notify<span class="token comment">#test_email: processed outbound mail in 5.2ms</span>Delivered mail 5eafceaa250a_1d063fb777add9a08601a@wing.mail <span class="token punctuation">(</span><span class="token number">1430</span>.1ms<span class="token punctuation">)</span>Date: Mon, 04 May <span class="token number">2020</span> <span class="token number">16</span>:13:30 +0800From: gitlab <span class="token operator">&lt;</span><span class="token number">276267003</span>@qq.com<span class="token operator">></span>Reply-To: gitlab <span class="token operator">&lt;</span><span class="token number">276267003</span>@qq.com<span class="token operator">></span>To: <span class="token number">276267003</span>@qq.comMessage-ID: <span class="token operator">&lt;</span>5eafceaa250a_1d063fb777add9a08601a@wing.mail<span class="token operator">></span>Subject: Message SubjectMime-Version: <span class="token number">1.0</span>Content-Type: text/html<span class="token punctuation">;</span> <span class="token assign-left variable">charset</span><span class="token operator">=</span>UTF-8Content-Transfer-Encoding: 7bitAuto-Submitted: auto-generatedX-Auto-Response-Suppress: All<span class="token operator">&lt;</span><span class="token operator">!</span>DOCTYPE html PUBLIC <span class="token string">"-//W3C//DTD HTML 4.0 Transitional//EN"</span> <span class="token string">"http://www.w3.org/TR/REC-html40/loose.dtd"</span><span class="token operator">></span><span class="token operator">&lt;</span>html<span class="token operator">></span><span class="token operator">&lt;</span>body<span class="token operator">></span><span class="token operator">&lt;</span>p<span class="token operator">></span>Message Body<span class="token operator">&lt;</span>/p<span class="token operator">></span><span class="token operator">&lt;</span>/body<span class="token operator">></span><span class="token operator">&lt;</span>/html<span class="token operator">></span><span class="token operator">=</span><span class="token operator">></span> <span class="token comment">#&lt;Mail::Message:70056859616080, Multipart: false, Headers: &lt;Date: Mon, 04 May 2020 16:13:30 +0800>, &lt;From: gitlab &lt;276267003@qq.com>>, &lt;Reply-To: gitlab &lt;276267003@qq.com>>, &lt;To: 276267003@qq.com>, &lt;Message-ID: &lt;5eafceaa250a_1d063fb777add9a08601a@wing.mail>>, &lt;Subject: Message Subject>, &lt;Mime-Version: 1.0>, &lt;Content-Type: text/html; charset=UTF-8>, &lt;Content-Transfer-Encoding: 7bit>, &lt;Auto-Submitted: auto-generated>, &lt;X-Auto-Response-Suppress: All>></span>irb<span class="token punctuation">(</span>main<span class="token punctuation">)</span>:005:<span class="token operator"><span class="token file-descriptor important">0</span>></span> <span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>å»qqé‚®ç®±webç•Œé¢æŸ¥çœ‹æ˜¯å¦æ”¶åˆ°é‚®ä»¶</p><p><img src="/image-20200504161843613.png" alt="image-20200504161843613"></p><h3 id="3ã€Gitlab-çš„ä½¿ç”¨"><a href="#3ã€Gitlab-çš„ä½¿ç”¨" class="headerlink" title="3ã€Gitlab çš„ä½¿ç”¨"></a>3ã€Gitlab çš„ä½¿ç”¨</h3><p><strong>åœ¨æµè§ˆå™¨ä¸­è¾“å…¥ <a href="http://192.168.1.178/">http://192.168.1.178/</a> ï¼Œç„¶å change password:  ï¼Œå¹¶ä½¿ç”¨rootç”¨æˆ·ç™»å½• å³å¯ (åç»­åŠ¨ä½œæ ¹æ®æç¤ºæ“ä½œ)</strong></p><h4 id="1ã€Gitlab-å‘½ä»¤è¡Œä¿®æ”¹å¯†ç "><a href="#1ã€Gitlab-å‘½ä»¤è¡Œä¿®æ”¹å¯†ç " class="headerlink" title="1ã€Gitlab å‘½ä»¤è¡Œä¿®æ”¹å¯†ç "></a>1ã€Gitlab å‘½ä»¤è¡Œä¿®æ”¹å¯†ç </h4><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token punctuation">[</span>root@qfedu.com ~<span class="token punctuation">]</span><span class="token comment"># gitlab-rails console production</span>irb<span class="token punctuation">(</span>main<span class="token punctuation">)</span>:001:<span class="token operator"><span class="token file-descriptor important">0</span>></span>user <span class="token operator">=</span> User.where<span class="token punctuation">(</span>id: <span class="token number">1</span><span class="token punctuation">)</span>.first      <span class="token comment"># idä¸º1çš„æ˜¯è¶…çº§ç®¡ç†å‘˜</span>irb<span class="token punctuation">(</span>main<span class="token punctuation">)</span>:002:<span class="token operator"><span class="token file-descriptor important">0</span>></span>user.password <span class="token operator">=</span> <span class="token string">'yourpassword'</span>      <span class="token comment"># å¯†ç å¿…é¡»è‡³å°‘8ä¸ªå­—ç¬¦</span>irb<span class="token punctuation">(</span>main<span class="token punctuation">)</span>:003:<span class="token operator"><span class="token file-descriptor important">0</span>></span>user.save<span class="token operator">!</span>                          <span class="token comment"># å¦‚æ²¡æœ‰é—®é¢˜ è¿”å›true</span><span class="token builtin class-name">exit</span> <span class="token comment"># é€€å‡º</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre><h4 id="2ã€GitlabæœåŠ¡ç®¡ç†"><a href="#2ã€GitlabæœåŠ¡ç®¡ç†" class="headerlink" title="2ã€GitlabæœåŠ¡ç®¡ç†"></a>2ã€GitlabæœåŠ¡ç®¡ç†</h4><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token punctuation">[</span>root@qfedu.com ~<span class="token punctuation">]</span><span class="token comment"># gitlab-ctl start                        # å¯åŠ¨æ‰€æœ‰ gitlab ç»„ä»¶ï¼›</span><span class="token punctuation">[</span>root@qfedu.com ~<span class="token punctuation">]</span><span class="token comment"># gitlab-ctl stop                         # åœæ­¢æ‰€æœ‰ gitlab ç»„ä»¶ï¼›</span><span class="token punctuation">[</span>root@qfedu.com ~<span class="token punctuation">]</span><span class="token comment"># gitlab-ctl restart                      # é‡å¯æ‰€æœ‰ gitlab ç»„ä»¶ï¼›</span><span class="token punctuation">[</span>root@qfedu.com ~<span class="token punctuation">]</span><span class="token comment"># gitlab-ctl status                       # æŸ¥çœ‹æœåŠ¡çŠ¶æ€ï¼›</span><span class="token punctuation">[</span>root@qfedu.com ~<span class="token punctuation">]</span><span class="token comment"># gitlab-ctl reconfigure                  # åˆå§‹åŒ–æœåŠ¡ï¼›</span><span class="token punctuation">[</span>root@qfedu.com ~<span class="token punctuation">]</span><span class="token comment"># vim /etc/gitlab/gitlab.rb               # ä¿®æ”¹é»˜è®¤çš„é…ç½®æ–‡ä»¶ï¼›</span><span class="token punctuation">[</span>root@qfedu.com ~<span class="token punctuation">]</span><span class="token comment"># gitlab-ctl tail                         # æŸ¥çœ‹æ—¥å¿—ï¼›</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h4 id="3ã€ç™»é™†-Gitlab"><a href="#3ã€ç™»é™†-Gitlab" class="headerlink" title="3ã€ç™»é™† Gitlab"></a>3ã€ç™»é™† Gitlab</h4><p><img src="/1.png" alt="1"></p><p><strong>å¦‚æœéœ€è¦æ‰‹å·¥ä¿®æ”¹nginxçš„port ï¼Œå¯ä»¥åœ¨gitlab.rbä¸­è®¾ç½® nginx[â€˜listen_portâ€™] &#x3D; 8000 ï¼Œç„¶åå†æ¬¡ gitlab-ctl reconfigureå³å¯</strong></p><p><strong>ç™»å½• gitlab å¦‚ä¸‹æ‰€ç¤º(é¦–æ¬¡ç™»é™†è®¾ç½® root å¯†ç )ï¼š</strong><br><img src="/2.1.png" alt="1"></p><h4 id="4ã€åˆ›å»ºé¡¹ç›®ç»„-group"><a href="#4ã€åˆ›å»ºé¡¹ç›®ç»„-group" class="headerlink" title="4ã€åˆ›å»ºé¡¹ç›®ç»„ group"></a>4ã€åˆ›å»ºé¡¹ç›®ç»„ group</h4><p>ç»„åä¸ºplat-sp ,<br><img src="/2.2.png" alt="1"></p><p><img src="/3.png" alt="1"></p><h4 id="5ã€å»æ‰ç”¨æˆ·çš„è‡ªåŠ¨æ³¨å†ŒåŠŸèƒ½ï¼ˆå®‰å…¨ï¼‰"><a href="#5ã€å»æ‰ç”¨æˆ·çš„è‡ªåŠ¨æ³¨å†ŒåŠŸèƒ½ï¼ˆå®‰å…¨ï¼‰" class="headerlink" title="5ã€å»æ‰ç”¨æˆ·çš„è‡ªåŠ¨æ³¨å†ŒåŠŸèƒ½ï¼ˆå®‰å…¨ï¼‰"></a>5ã€å»æ‰ç”¨æˆ·çš„è‡ªåŠ¨æ³¨å†ŒåŠŸèƒ½ï¼ˆå®‰å…¨ï¼‰</h4><p>admin are -&gt; settings -&gt; Sign-up Restrictions å»æ‰é’©é’©ï¼Œç„¶åæ‹‰åˆ°æœ€ä¸‹é¢ä¿å­˜ï¼Œé‡æ–°ç™»å½•<br><img src="/4.png" alt="1"></p><h2 id="ä¹ã€Gitlab-å¼€å‘ä»£ç æäº¤å¤„ç†æµç¨‹"><a href="#ä¹ã€Gitlab-å¼€å‘ä»£ç æäº¤å¤„ç†æµç¨‹" class="headerlink" title="ä¹ã€Gitlab å¼€å‘ä»£ç æäº¤å¤„ç†æµç¨‹"></a>ä¹ã€Gitlab å¼€å‘ä»£ç æäº¤å¤„ç†æµç¨‹</h2><h3 id="1ã€å…¬å¸ä»£ç æäº¤åˆå¹¶æµç¨‹"><a href="#1ã€å…¬å¸ä»£ç æäº¤åˆå¹¶æµç¨‹" class="headerlink" title="1ã€å…¬å¸ä»£ç æäº¤åˆå¹¶æµç¨‹"></a>1ã€å…¬å¸ä»£ç æäº¤åˆå¹¶æµç¨‹</h3><ul><li><p>PMï¼ˆé¡¹ç›®ä¸»ç®¡&#x2F;é¡¹ç›®ç»ç†ï¼‰åœ¨gitlabåˆ›å»ºä»»åŠ¡ï¼Œåˆ†é…ç»™å¼€å‘äººå‘˜</p></li><li><p>å¼€å‘äººå‘˜é¢†å–ä»»åŠ¡åï¼Œåœ¨æœ¬åœ°ä½¿ç”¨git cloneæ‹‰å–ä»£ç åº“</p></li><li><p>å¼€å‘äººå‘˜åˆ›å»ºå¼€å‘åˆ†æ”¯ï¼ˆgit checkout -b devï¼‰ï¼Œå¹¶è¿›è¡Œå¼€å‘</p></li><li><p>å¼€å‘äººå‘˜å®Œæˆä¹‹åï¼Œæäº¤åˆ°æœ¬åœ°ä»“åº“ï¼ˆgit commit ï¼‰</p></li><li><p>å¼€å‘äººå‘˜åœ¨gitlabç•Œé¢ä¸Šç”³è¯·åˆ†æ”¯åˆå¹¶è¯·æ±‚ï¼ˆMerge requestï¼‰</p></li><li><p>PMåœ¨gitlabä¸ŠæŸ¥çœ‹æäº¤å’Œä»£ç ä¿®æ”¹æƒ…å†µï¼Œç¡®è®¤æ— è¯¯åï¼Œç¡®è®¤å°†å¼€å‘äººå‘˜çš„åˆ†æ”¯åˆå¹¶åˆ°ä¸»åˆ†æ”¯ï¼ˆmasterï¼‰</p></li><li><p>å¼€å‘äººå‘˜åœ¨gitlabä¸ŠMark doneç¡®è®¤å¼€å‘å®Œæˆï¼Œå¹¶å…³é—­issueã€‚è¿™ä¸€æ­¥åœ¨æäº¤åˆå¹¶è¯·æ±‚æ—¶å¯ä»¥é€šè¿‡æè¿°ä¸­å¡«å†™â€close #1â€ç­‰å­—æ ·ï¼Œå¯ä»¥ç›´æ¥å…³é—­issue</p></li></ul><h3 id="2ã€åˆ›å»ºé¡¹ç›®ç®¡ç†ç”¨æˆ·-Tompson"><a href="#2ã€åˆ›å»ºé¡¹ç›®ç®¡ç†ç”¨æˆ·-Tompson" class="headerlink" title="2ã€åˆ›å»ºé¡¹ç›®ç®¡ç†ç”¨æˆ· Tompson"></a>2ã€åˆ›å»ºé¡¹ç›®ç®¡ç†ç”¨æˆ· Tompson</h3><p><img src="/5.png" alt="1"><br>åŒæ ·çš„æ–¹æ³•ï¼Œå†åˆ›å»º Eric ã€Hellen ç”¨æˆ·ã€‚ç”¨æˆ·æ·»åŠ å®Œæ¯•åï¼Œgitlab ä¼šç»™ç”¨æˆ·å‘ä¸€å°ä¿®æ”¹å¯†ç çš„é‚®ä»¶ï¼Œå„ç”¨æˆ·éœ€è¦ç™»å½•è‡ªå·±çš„é‚®ç®±ï¼Œå¹¶ç‚¹å‡»ç›¸å…³çš„é“¾æ¥ï¼Œè®¾ç½®æ–°å¯†ç ã€‚</p><h3 id="3ã€å°†-Tompson-ç”¨æˆ·æ·»åŠ åˆ°ç»„ä¸­ï¼ŒæŒ‡å®šTä¸ºæœ¬ç»„çš„-owner"><a href="#3ã€å°†-Tompson-ç”¨æˆ·æ·»åŠ åˆ°ç»„ä¸­ï¼ŒæŒ‡å®šTä¸ºæœ¬ç»„çš„-owner" class="headerlink" title="3ã€å°† Tompson ç”¨æˆ·æ·»åŠ åˆ°ç»„ä¸­ï¼ŒæŒ‡å®šTä¸ºæœ¬ç»„çš„ owner"></a>3ã€å°† Tompson ç”¨æˆ·æ·»åŠ åˆ°ç»„ä¸­ï¼ŒæŒ‡å®šTä¸ºæœ¬ç»„çš„ owner</h3><p><img src="/6.png" alt="1"></p><h3 id="4ã€åŒæ ·çš„æ–¹æ³•å°†ç”¨æˆ·Ericã€Hellen-æ·»åŠ åˆ°ç»„ä¸­ï¼Œå¹¶æŒ‡å®šä¸ºDeveloper"><a href="#4ã€åŒæ ·çš„æ–¹æ³•å°†ç”¨æˆ·Ericã€Hellen-æ·»åŠ åˆ°ç»„ä¸­ï¼Œå¹¶æŒ‡å®šä¸ºDeveloper" class="headerlink" title="4ã€åŒæ ·çš„æ–¹æ³•å°†ç”¨æˆ·Ericã€Hellen æ·»åŠ åˆ°ç»„ä¸­ï¼Œå¹¶æŒ‡å®šä¸ºDeveloper"></a>4ã€åŒæ ·çš„æ–¹æ³•å°†ç”¨æˆ·Ericã€Hellen æ·»åŠ åˆ°ç»„ä¸­ï¼Œå¹¶æŒ‡å®šä¸ºDeveloper</h3><p><img src="/7.png" alt="1"></p><h3 id="5ã€ä½¿ç”¨-Tompson-ç”¨æˆ·çš„èº«ä»½ä¸å¯†ç ç™»å½•åˆ°-gitlab-ç•Œé¢ä¸­ï¼Œå¹¶åˆ›å»ºé¡¹ç›®-Project"><a href="#5ã€ä½¿ç”¨-Tompson-ç”¨æˆ·çš„èº«ä»½ä¸å¯†ç ç™»å½•åˆ°-gitlab-ç•Œé¢ä¸­ï¼Œå¹¶åˆ›å»ºé¡¹ç›®-Project" class="headerlink" title="5ã€ä½¿ç”¨ Tompson ç”¨æˆ·çš„èº«ä»½ä¸å¯†ç ç™»å½•åˆ° gitlab ç•Œé¢ä¸­ï¼Œå¹¶åˆ›å»ºé¡¹ç›® Project"></a>5ã€ä½¿ç”¨ Tompson ç”¨æˆ·çš„èº«ä»½ä¸å¯†ç ç™»å½•åˆ° gitlab ç•Œé¢ä¸­ï¼Œå¹¶åˆ›å»ºé¡¹ç›® Project</h3><p><img src="/10.png" alt="1"></p><h3 id="6ã€æŒ‡å®šé¡¹ç›®çš„å­˜å‚¨è·¯å¾„å’Œé¡¹ç›®åç§°"><a href="#6ã€æŒ‡å®šé¡¹ç›®çš„å­˜å‚¨è·¯å¾„å’Œé¡¹ç›®åç§°" class="headerlink" title="6ã€æŒ‡å®šé¡¹ç›®çš„å­˜å‚¨è·¯å¾„å’Œé¡¹ç›®åç§°"></a>6ã€æŒ‡å®šé¡¹ç›®çš„å­˜å‚¨è·¯å¾„å’Œé¡¹ç›®åç§°</h3><p><img src="/11.png" alt="1"></p><p>æŠŠå®¢æˆ·ç«¯çš„å…¬é’¥æ·»åŠ åˆ°è¿™é‡Œä¹‹åæ‰ä¼šå‡ºç°ä¸‹å›¾çš„å†…å®¹</p><p><img src="/12.png" alt="1"></p><h3 id="7ã€ä¸ºé¡¹ç›®åˆ›å»º-Devåˆ†æ”¯"><a href="#7ã€ä¸ºé¡¹ç›®åˆ›å»º-Devåˆ†æ”¯" class="headerlink" title="7ã€ä¸ºé¡¹ç›®åˆ›å»º Devåˆ†æ”¯"></a>7ã€ä¸ºé¡¹ç›®åˆ›å»º Devåˆ†æ”¯</h3><p>æ³¨æ„ï¼šå› ä¸ºç‰ˆæœ¬çš„åŸå› ï¼Œéœ€è¦å…ˆåœ¨é¡¹ç›®é‡Œé¢æ·»åŠ ä¸€ä¸ªæ–‡ä»¶ï¼Œæ‰èƒ½æ˜¾ç¤ºä¸‹å›¾ä¸­åˆ›å»ºåˆ†æ”¯çš„æ“ä½œ</p><p><img src="/13.png" alt="1"></p><p><img src="/14.png" alt="1"></p><h3 id="8ã€åœ¨-client-ä¸Šæ·»åŠ -Tompson-çš„ç”¨æˆ·"><a href="#8ã€åœ¨-client-ä¸Šæ·»åŠ -Tompson-çš„ç”¨æˆ·" class="headerlink" title="8ã€åœ¨ client ä¸Šæ·»åŠ  Tompson çš„ç”¨æˆ·"></a>8ã€åœ¨ client ä¸Šæ·»åŠ  Tompson çš„ç”¨æˆ·</h3><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token punctuation">[</span>git@qfedu.com ~<span class="token punctuation">]</span><span class="token comment"># useradd Tompson</span><span class="token punctuation">[</span>git@qfedu.com ~<span class="token punctuation">]</span><span class="token comment"># useradd Hellen</span><span class="token punctuation">[</span>git@qfedu.com ~<span class="token punctuation">]</span><span class="token comment"># useradd Eric</span><span class="token punctuation">[</span>git@qfedu.com ~<span class="token punctuation">]</span><span class="token comment"># useradd test</span><span class="token punctuation">[</span>git@qfedu.com ~<span class="token punctuation">]</span><span class="token comment"># su - Tompson</span><span class="token punctuation">[</span>Tompson@qfedu.com ~<span class="token punctuation">]</span>$ ssh-keygenGenerating public/private rsa key pair.Enter <span class="token function">file</span> <span class="token keyword">in</span> <span class="token function">which</span> to save the key <span class="token punctuation">(</span>/home/Tompson/.ssh/id_rsa<span class="token punctuation">)</span>: Created directory <span class="token string">'/home/Tompson/.ssh'</span><span class="token builtin class-name">.</span>Enter passphrase <span class="token punctuation">(</span>empty <span class="token keyword">for</span> no passphrase<span class="token punctuation">)</span>: Enter same passphrase again: Your identification has been saved <span class="token keyword">in</span> /home/Tompson/.ssh/id_rsa.Your public key has been saved <span class="token keyword">in</span> /home/Tompson/.ssh/id_rsa.pub.The key fingerprint is:SHA256:SAoAH2zSxqEJqVgKKrxM5XMi6tKe61JMRdwMhwBNIrE Tompson@domain.cnThe key's randomart image is:+---<span class="token punctuation">[</span>RSA <span class="token number">2048</span><span class="token punctuation">]</span>----+<span class="token operator">|</span><span class="token assign-left variable">XX</span><span class="token operator">==</span>o<span class="token operator">=</span>.          <span class="token operator">|</span><span class="token operator">|</span>*BOo+.o          <span class="token operator">|</span><span class="token operator">|</span>E*<span class="token operator">=</span>.  <span class="token builtin class-name">.</span>          <span class="token operator">|</span><span class="token operator">|</span>*+.<span class="token operator">=</span> + <span class="token builtin class-name">.</span>         <span class="token operator">|</span><span class="token operator">|</span><span class="token operator">=</span>oo <span class="token operator">=</span> <span class="token builtin class-name">.</span> S        <span class="token operator">|</span><span class="token operator">|</span>.oo              <span class="token operator">|</span><span class="token operator">|</span>.o               <span class="token operator">|</span><span class="token operator">|</span>o<span class="token punctuation">..</span>.             <span class="token operator">|</span><span class="token operator">|</span>.<span class="token operator">+=</span>.             <span class="token operator">|</span>+----<span class="token punctuation">[</span>SHA256<span class="token punctuation">]</span>-----+<span class="token punctuation">[</span>Tompson@qfedu.com ~<span class="token punctuation">]</span>$ <span class="token function">cat</span> .ssh/id_rsa.pub ssh-rsa AAAAB3NzaC1yc2EAAAADAQABAAABAQDZ8cRGHej+sZzlmK36W5MUXMLOGdTwFI9Jj44mGuabZCrlYW4GDpL6ppezN+Sur0wHtnKonYJzm8ntqS0S0UHyaPPQPl9Mrs/6Z4VrXZ/4RlqHdWeSrmOwCBQld0l8HvrmP4TyGHrOreO8uZqimd/Z+OiMqnYRZzENX11Pti/Px5g1MtJcoCi9uLtF42QYrt1X/fzAyPU9C5/5ZUq4Jln3EF20bzcA52oAzZIl0jrhI0TeTeW6zYq+KxdHGshL+qG7+Ne+akPOe4Ma5BQjcMZ2dQ2kbGuozXmLT8RDcj9YRKceQsUdTI71lJpwrWKGn8Vhra0EaK3hgoTuvMYaGfOF Tompson@domain.cn<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h3 id="9ã€å°†-Tompson-çš„å…¬é’¥å¤åˆ¶åˆ°-gitlab-ä¸­"><a href="#9ã€å°†-Tompson-çš„å…¬é’¥å¤åˆ¶åˆ°-gitlab-ä¸­" class="headerlink" title="9ã€å°† Tompson çš„å…¬é’¥å¤åˆ¶åˆ° gitlab ä¸­"></a>9ã€å°† Tompson çš„å…¬é’¥å¤åˆ¶åˆ° gitlab ä¸­</h3><p>ä½¿ç”¨ Tompson ç”¨æˆ·çš„èº«ä»½ä¸å¯†ç ç™»å½•åˆ° gitlabç•Œé¢ä¸­ï¼Œç„¶ååœ¨ ssh-key ä¸­æ·»åŠ ç›¸å…³çš„key<br><img src="/8.png" alt="1"></p><p><img src="/9.png" alt="1"></p><h3 id="10ã€ä¸º-Tompson-ç”¨æˆ·é…ç½®-git"><a href="#10ã€ä¸º-Tompson-ç”¨æˆ·é…ç½®-git" class="headerlink" title="10ã€ä¸º Tompson ç”¨æˆ·é…ç½® git"></a>10ã€ä¸º Tompson ç”¨æˆ·é…ç½® git</h3><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token punctuation">[</span>Tompson@qfedu.com ~<span class="token punctuation">]</span>$ <span class="token function">git</span> config <span class="token parameter variable">--global</span> user.email <span class="token string">"222@qq.com"</span><span class="token punctuation">[</span>Tompson@qfedu.com ~<span class="token punctuation">]</span>$ <span class="token function">git</span> config <span class="token parameter variable">--global</span> user.name <span class="token string">"tom"</span><span class="token punctuation">[</span>Tompson@qfedu.com ~<span class="token punctuation">]</span>$ <span class="token function">git</span> clone git@192.168.60.119:plat-sp/chathall.gitCloning into <span class="token string">'chathall'</span><span class="token punctuation">..</span>.The authenticity of <span class="token function">host</span> <span class="token string">'192.168.60.119 (192.168.60.119)'</span> can<span class="token string">'t be established.ECDSA key fingerprint is SHA256:CDxAQmj6gUkIxB6XUofbZ853GuPM5LS2QO4a5dD7jRo.ECDSA key fingerprint is MD5:4e:20:72:a7:46:c6:d7:5d:bb:9d:ce:c3:f3:da:43:f9.Are you sure you want to continue connecting (yes/no)? yesWarning: Permanently added '</span><span class="token number">192.168</span>.60.119' <span class="token punctuation">(</span>ECDSA<span class="token punctuation">)</span> to the list of known hosts.remote: Counting objects: <span class="token number">3</span>, done.remote: Total <span class="token number">3</span> <span class="token punctuation">(</span>delta <span class="token number">0</span><span class="token punctuation">)</span>, reused <span class="token number">0</span> <span class="token punctuation">(</span>delta <span class="token number">0</span><span class="token punctuation">)</span>Receiving objects: <span class="token number">100</span>% <span class="token punctuation">(</span><span class="token number">3</span>/3<span class="token punctuation">)</span>, done.<span class="token punctuation">[</span>Tompson@qfedu.com ~<span class="token punctuation">]</span>$ <span class="token punctuation">[</span>Tompson@qfedu.com ~<span class="token punctuation">]</span>$ <span class="token builtin class-name">cd</span> chathall/<span class="token punctuation">[</span>Tompson@qfedu.com chathall<span class="token punctuation">]</span>$ <span class="token function">ls</span>Readme.txt<span class="token punctuation">[</span>Tompson@qfedu.com chathall<span class="token punctuation">]</span>$<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h3 id="11ã€åˆ›å»ºæ–°æ–‡ä»¶ï¼Œæ·»åŠ å†…å®¹ï¼Œå¹¶æäº¤åˆ°-master-åˆ†æ”¯"><a href="#11ã€åˆ›å»ºæ–°æ–‡ä»¶ï¼Œæ·»åŠ å†…å®¹ï¼Œå¹¶æäº¤åˆ°-master-åˆ†æ”¯" class="headerlink" title="11ã€åˆ›å»ºæ–°æ–‡ä»¶ï¼Œæ·»åŠ å†…å®¹ï¼Œå¹¶æäº¤åˆ° master åˆ†æ”¯"></a>11ã€åˆ›å»ºæ–°æ–‡ä»¶ï¼Œæ·»åŠ å†…å®¹ï¼Œå¹¶æäº¤åˆ° master åˆ†æ”¯</h3><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token punctuation">[</span>Tompson@qfedu.com chathall<span class="token punctuation">]</span>$ <span class="token function">vim</span> test.sh<span class="token punctuation">[</span>Tompson@qfedu.com chathall<span class="token punctuation">]</span>$ <span class="token function">cat</span> test.sh <span class="token comment">#!/bin/bash</span><span class="token builtin class-name">echo</span> <span class="token string">"gitlab test"</span><span class="token punctuation">[</span>Tompson@qfedu.com chathall<span class="token punctuation">]</span>$ <span class="token function">git</span> <span class="token function">add</span> <span class="token builtin class-name">.</span> <span class="token punctuation">[</span>Tompson@qfedu.com chathall<span class="token punctuation">]</span>$ <span class="token function">git</span> commit <span class="token parameter variable">-m</span> <span class="token string">'201805101649'</span><span class="token punctuation">[</span>master 80edf6b<span class="token punctuation">]</span> <span class="token number">201805101649</span> <span class="token number">1</span> <span class="token function">file</span> changed, <span class="token number">2</span> insertions<span class="token punctuation">(</span>+<span class="token punctuation">)</span> create mode <span class="token number">100644</span> test.sh<span class="token punctuation">[</span>Tompson@qfedu.com chathall<span class="token punctuation">]</span>$ <span class="token punctuation">[</span>Tompson@qfedu.com chathall<span class="token punctuation">]</span>$ <span class="token function">git</span> push <span class="token parameter variable">-u</span> origin master Counting objects: <span class="token number">4</span>, done.Compressing objects: <span class="token number">100</span>% <span class="token punctuation">(</span><span class="token number">2</span>/2<span class="token punctuation">)</span>, done.Writing objects: <span class="token number">100</span>% <span class="token punctuation">(</span><span class="token number">3</span>/3<span class="token punctuation">)</span>, <span class="token number">305</span> bytes <span class="token operator">|</span> <span class="token number">0</span> bytes/s, done.Total <span class="token number">3</span> <span class="token punctuation">(</span>delta <span class="token number">0</span><span class="token punctuation">)</span>, reused <span class="token number">0</span> <span class="token punctuation">(</span>delta <span class="token number">0</span><span class="token punctuation">)</span>To git@192.168.60.119:plat-sp/chathall.git   <span class="token number">4611654</span><span class="token punctuation">..</span>80edf6b  master -<span class="token operator">></span> masterBranch master <span class="token builtin class-name">set</span> up to track remote branch master from origin.<span class="token punctuation">[</span>Tompson@qfedu.com chathall<span class="token punctuation">]</span>$ <span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h3 id="12ã€ä½¿ç”¨-Eric-ç”¨æˆ·ç™»å½•ï¼Œå¹¶-clone-é¡¹ç›®"><a href="#12ã€ä½¿ç”¨-Eric-ç”¨æˆ·ç™»å½•ï¼Œå¹¶-clone-é¡¹ç›®" class="headerlink" title="12ã€ä½¿ç”¨ Eric ç”¨æˆ·ç™»å½•ï¼Œå¹¶ clone é¡¹ç›®"></a>12ã€ä½¿ç”¨ Eric ç”¨æˆ·ç™»å½•ï¼Œå¹¶ clone é¡¹ç›®</h3><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token punctuation">[</span>git@qfedu.com ~<span class="token punctuation">]</span><span class="token comment"># su - Eric</span><span class="token punctuation">[</span>Eric@qfedu.com ~<span class="token punctuation">]</span>$ ssh-keygen <span class="token parameter variable">-C</span> Eric@domain.cnGenerating public/private rsa key pair.Enter <span class="token function">file</span> <span class="token keyword">in</span> <span class="token function">which</span> to save the key <span class="token punctuation">(</span>/home/Eric/.ssh/id_rsa<span class="token punctuation">)</span>: Created directory <span class="token string">'/home/Eric/.ssh'</span><span class="token builtin class-name">.</span>Enter passphrase <span class="token punctuation">(</span>empty <span class="token keyword">for</span> no passphrase<span class="token punctuation">)</span>: Enter same passphrase again: Your identification has been saved <span class="token keyword">in</span> /home/Eric/.ssh/id_rsa.Your public key has been saved <span class="token keyword">in</span> /home/Eric/.ssh/id_rsa.pub.The key fingerprint is:SHA256:VZaJvjA5SJZEB+yuRpDBNHCECCZ5R8X0DYcNE0f1B6E Eric@domain.cnThe key's randomart image is:+---<span class="token punctuation">[</span>RSA <span class="token number">2048</span><span class="token punctuation">]</span>----+<span class="token operator">|</span>*O<span class="token operator">=</span><span class="token punctuation">..</span>B*o**+o+oo. <span class="token operator">|</span><span class="token operator">|</span>*.+<span class="token punctuation">..</span> *o.*oooo <span class="token builtin class-name">.</span> <span class="token operator">|</span><span class="token operator">|</span> <span class="token builtin class-name">.</span> + + <span class="token punctuation">..</span>oo E <span class="token builtin class-name">.</span> <span class="token builtin class-name">.</span><span class="token operator">|</span><span class="token operator">|</span>  o   o <span class="token operator">=</span><span class="token punctuation">..</span>    <span class="token builtin class-name">.</span> <span class="token operator">|</span><span class="token operator">|</span>   <span class="token builtin class-name">.</span> <span class="token builtin class-name">.</span>  S+ <span class="token builtin class-name">.</span>     <span class="token operator">|</span><span class="token operator">|</span>    <span class="token builtin class-name">.</span> <span class="token builtin class-name">.</span>   <span class="token builtin class-name">.</span>      <span class="token operator">|</span><span class="token operator">|</span>   <span class="token builtin class-name">.</span> <span class="token builtin class-name">.</span>           <span class="token operator">|</span><span class="token operator">|</span>    o            <span class="token operator">|</span><span class="token operator">|</span>   <span class="token builtin class-name">.</span>             <span class="token operator">|</span>+----<span class="token punctuation">[</span>SHA256<span class="token punctuation">]</span>-----+<span class="token punctuation">[</span>Eric@qfedu.com ~<span class="token punctuation">]</span>$ <span class="token function">cat</span> .ssh/id_rsa.pub ssh-rsa AAAAB3NzaC1yc2EAAAADAQABAAABAQDxQcn4UjRW/5PT5witeV9+S2w8WK5ouawHxEF7s9wuWsT4pqhcu5BN74NG3CPaq1jJZnkV+aQsTw+60BAd1gOK0FBbKWxmohmE61n9vfpUT5igJ72t2jpXjfKwLIHw+Iq5yM4yUhkwSsoBuZkxYSEltnj8OvXaOlCDYnXuGBa9+xO8f5yVIcOtiwRvv+Y1PRRzSIcazPVZax9FLK26t1R4NPiY4xWkIJyK2OrKMeiaBBzyMfWzHdmsCWa51oSrYSmz3PDBXpzIBs3OdKxcaJs9Lc5u87YCV5RMUjLrPcA7nPK6crOabLXhz3d5GSYggMTOByQkyKOo7WlYpARCHOt/ Eric@domain.cn<span class="token punctuation">[</span>Eric@qfedu.com ~<span class="token punctuation">]</span>$ <span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h3 id="13ã€åŒæ ·éœ€è¦ä½¿ç”¨Ericç”¨æˆ·ç™»å½•gitlab-web-ç•Œé¢ï¼Œå¹¶æ·»åŠ ç›¸åº”çš„ssh-keyã€‚ç„¶åè®¾ç½®git-ï¼Œå¹¶cloneé¡¹ç›®"><a href="#13ã€åŒæ ·éœ€è¦ä½¿ç”¨Ericç”¨æˆ·ç™»å½•gitlab-web-ç•Œé¢ï¼Œå¹¶æ·»åŠ ç›¸åº”çš„ssh-keyã€‚ç„¶åè®¾ç½®git-ï¼Œå¹¶cloneé¡¹ç›®" class="headerlink" title="13ã€åŒæ ·éœ€è¦ä½¿ç”¨Ericç”¨æˆ·ç™»å½•gitlab web ç•Œé¢ï¼Œå¹¶æ·»åŠ ç›¸åº”çš„ssh-keyã€‚ç„¶åè®¾ç½®git ï¼Œå¹¶cloneé¡¹ç›®"></a>13ã€åŒæ ·éœ€è¦ä½¿ç”¨Ericç”¨æˆ·ç™»å½•gitlab web ç•Œé¢ï¼Œå¹¶æ·»åŠ ç›¸åº”çš„ssh-keyã€‚ç„¶åè®¾ç½®git ï¼Œå¹¶cloneé¡¹ç›®</h3><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token punctuation">[</span>Eric@qfedu.com ~<span class="token punctuation">]</span>$ <span class="token function">git</span> config <span class="token parameter variable">--global</span> user.email <span class="token string">"Eric@domain.cn"</span><span class="token punctuation">[</span>Eric@qfedu.com ~<span class="token punctuation">]</span>$ <span class="token function">git</span> config <span class="token parameter variable">--global</span> user.name <span class="token string">"Eric"</span><span class="token punctuation">[</span>Eric@qfedu.com ~<span class="token punctuation">]</span>$ <span class="token function">git</span> clone git@192.168.60.119:plat-sp/chathall.gitCloning into <span class="token string">'chathall'</span><span class="token punctuation">..</span>.The authenticity of <span class="token function">host</span> <span class="token string">'192.168.60.119 (192.168.60.119)'</span> can't be established.ECDSA key fingerprint is SHA256:CDxAQmj6gUkIxB6XUofbZ853GuPM5LS2QO4a5dD7jRo.ECDSA key fingerprint is MD5:4e:20:72:a7:46:c6:d7:5d:bb:9d:ce:c3:f3:da:43:f9.Are you sure you want to <span class="token builtin class-name">continue</span> connecting <span class="token punctuation">(</span>yes/no<span class="token punctuation">)</span>? <span class="token function">yes</span>remote: Counting objects: <span class="token number">6</span>, done.remote: Compressing objects: <span class="token number">100</span>% <span class="token punctuation">(</span><span class="token number">3</span>/3<span class="token punctuation">)</span>, done.remote: Total <span class="token number">6</span> <span class="token punctuation">(</span>delta <span class="token number">0</span><span class="token punctuation">)</span>, reused <span class="token number">0</span> <span class="token punctuation">(</span>delta <span class="token number">0</span><span class="token punctuation">)</span>Receiving objects: <span class="token number">100</span>% <span class="token punctuation">(</span><span class="token number">6</span>/6<span class="token punctuation">)</span>, done.<span class="token punctuation">[</span>Eric@qfedu.com ~<span class="token punctuation">]</span>$ <span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h3 id="14ã€åˆ‡æ¢åˆ°devåˆ†æ”¯ï¼Œä¿®æ”¹æ–‡ä»¶å†…å®¹ï¼Œå¹¶å°†æ–°-code-æäº¤åˆ°-devåˆ†æ”¯-Developerè§’è‰²é»˜è®¤å¹¶æ²¡æœ‰æäº¤masterçš„æƒé™"><a href="#14ã€åˆ‡æ¢åˆ°devåˆ†æ”¯ï¼Œä¿®æ”¹æ–‡ä»¶å†…å®¹ï¼Œå¹¶å°†æ–°-code-æäº¤åˆ°-devåˆ†æ”¯-Developerè§’è‰²é»˜è®¤å¹¶æ²¡æœ‰æäº¤masterçš„æƒé™" class="headerlink" title="14ã€åˆ‡æ¢åˆ°devåˆ†æ”¯ï¼Œä¿®æ”¹æ–‡ä»¶å†…å®¹ï¼Œå¹¶å°†æ–° code æäº¤åˆ° devåˆ†æ”¯ (Developerè§’è‰²é»˜è®¤å¹¶æ²¡æœ‰æäº¤masterçš„æƒé™)"></a>14ã€åˆ‡æ¢åˆ°devåˆ†æ”¯ï¼Œä¿®æ”¹æ–‡ä»¶å†…å®¹ï¼Œå¹¶å°†æ–° code æäº¤åˆ° devåˆ†æ”¯ (Developerè§’è‰²é»˜è®¤å¹¶æ²¡æœ‰æäº¤masterçš„æƒé™)</h3><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token punctuation">[</span>Eric@qfedu.com chathall<span class="token punctuation">]</span>$ <span class="token function">git</span> checkout dev Branch dev <span class="token builtin class-name">set</span> up to track remote branch dev from origin.Switched to a new branch <span class="token string">'dev'</span><span class="token punctuation">[</span>Eric@qfedu.com chathall<span class="token punctuation">]</span>$ <span class="token function">ls</span>Readme.txt  test.sh<span class="token punctuation">[</span>Eric@qfedu.com chathall<span class="token punctuation">]</span>$ <span class="token function">vim</span> eric.sh <span class="token punctuation">[</span>Eric@qfedu.com chathall<span class="token punctuation">]</span>$ <span class="token function">cat</span> eric.sh<span class="token comment">#!/bin/bash</span><span class="token builtin class-name">echo</span> <span class="token string">"brahch test"</span><span class="token punctuation">[</span>Eric@qfedu.com chathall<span class="token punctuation">]</span>$ <span class="token function">git</span> <span class="token function">add</span> <span class="token builtin class-name">.</span> <span class="token punctuation">[</span>Eric@qfedu.com chathall<span class="token punctuation">]</span>$ <span class="token function">git</span> commit <span class="token parameter variable">-m</span> <span class="token string">'201805101658'</span><span class="token punctuation">[</span>dev <span class="token number">6687039</span><span class="token punctuation">]</span> <span class="token number">201805101658</span> <span class="token number">1</span> <span class="token function">file</span> changed, <span class="token number">1</span> insertion<span class="token punctuation">(</span>+<span class="token punctuation">)</span><span class="token punctuation">[</span>Eric@qfedu.com chathall<span class="token punctuation">]</span>$ <span class="token function">git</span> push <span class="token parameter variable">-u</span> origin dev Counting objects: <span class="token number">5</span>, done.Compressing objects: <span class="token number">100</span>% <span class="token punctuation">(</span><span class="token number">3</span>/3<span class="token punctuation">)</span>, done.Writing objects: <span class="token number">100</span>% <span class="token punctuation">(</span><span class="token number">3</span>/3<span class="token punctuation">)</span>, <span class="token number">306</span> bytes <span class="token operator">|</span> <span class="token number">0</span> bytes/s, done.Total <span class="token number">3</span> <span class="token punctuation">(</span>delta <span class="token number">0</span><span class="token punctuation">)</span>, reused <span class="token number">0</span> <span class="token punctuation">(</span>delta <span class="token number">0</span><span class="token punctuation">)</span>remote: remote: To create a merge request <span class="token keyword">for</span> dev, visit:remote:   http://192.168.60.119/plat-sp/chathall/merge_requests/new?merge_request%5Bsource_branch%5D<span class="token operator">=</span>devremote: To git@192.168.60.119:plat-sp/chathall.git   80edf6b<span class="token punctuation">..</span><span class="token number">6687039</span>  dev -<span class="token operator">></span> devBranch dev <span class="token builtin class-name">set</span> up to track remote branch dev from origin.<span class="token punctuation">[</span>Eric@qfedu.com chathall<span class="token punctuation">]</span>$<span class="token punctuation">[</span>Eric@qfedu.com chathall<span class="token punctuation">]</span>$ <span class="token function">git</span> checkout master Switched to branch <span class="token string">'master'</span><span class="token punctuation">[</span>Eric@qfedu.com chathall<span class="token punctuation">]</span>$ <span class="token function">git</span> branch   dev* master<span class="token punctuation">[</span>Eric@qfedu.com chathall<span class="token punctuation">]</span>$<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h3 id="15ã€ä½¿ç”¨Eric-ç”¨æˆ·ç™»å½•gitlab-webï¼Œåœ¨ç•Œé¢ä¸­-åˆ›å»ºä¸€ä¸ªåˆå¹¶è¯·æ±‚"><a href="#15ã€ä½¿ç”¨Eric-ç”¨æˆ·ç™»å½•gitlab-webï¼Œåœ¨ç•Œé¢ä¸­-åˆ›å»ºä¸€ä¸ªåˆå¹¶è¯·æ±‚" class="headerlink" title="15ã€ä½¿ç”¨Eric ç”¨æˆ·ç™»å½•gitlab webï¼Œåœ¨ç•Œé¢ä¸­ åˆ›å»ºä¸€ä¸ªåˆå¹¶è¯·æ±‚"></a>15ã€ä½¿ç”¨Eric ç”¨æˆ·ç™»å½•gitlab webï¼Œåœ¨ç•Œé¢ä¸­ åˆ›å»ºä¸€ä¸ªåˆå¹¶è¯·æ±‚</h3><p><img src="/15.png" alt="1"></p><p><strong>æäº¤åˆå¹¶è¯·æ±‚ï¼š</strong><br><img src="/16.png" alt="1"></p><h3 id="16ã€ä½¿ç”¨Tompsonç”¨æˆ·ç™»å½•-gitlab-web-ï¼Œæ‰¾åˆ°â€œåˆå¹¶è¯·æ±‚â€-ï¼Œç„¶åå°†devåˆ†æ”¯åˆå¹¶åˆ°masteråˆ†æ”¯"><a href="#16ã€ä½¿ç”¨Tompsonç”¨æˆ·ç™»å½•-gitlab-web-ï¼Œæ‰¾åˆ°â€œåˆå¹¶è¯·æ±‚â€-ï¼Œç„¶åå°†devåˆ†æ”¯åˆå¹¶åˆ°masteråˆ†æ”¯" class="headerlink" title="16ã€ä½¿ç”¨Tompsonç”¨æˆ·ç™»å½• gitlab web ï¼Œæ‰¾åˆ°â€œåˆå¹¶è¯·æ±‚â€ ï¼Œç„¶åå°†devåˆ†æ”¯åˆå¹¶åˆ°masteråˆ†æ”¯"></a>16ã€ä½¿ç”¨Tompsonç”¨æˆ·ç™»å½• gitlab web ï¼Œæ‰¾åˆ°â€œåˆå¹¶è¯·æ±‚â€ ï¼Œç„¶åå°†devåˆ†æ”¯åˆå¹¶åˆ°masteråˆ†æ”¯</h3><p><img src="/17.png" alt="1"></p><p><img src="/18.png" alt="1"></p><h2 id="åã€Gitlab-å¤‡ä»½ä¸æ¢å¤"><a href="#åã€Gitlab-å¤‡ä»½ä¸æ¢å¤" class="headerlink" title="åã€Gitlab å¤‡ä»½ä¸æ¢å¤"></a>åã€Gitlab å¤‡ä»½ä¸æ¢å¤</h2><h3 id="1ã€æŸ¥çœ‹ç³»ç»Ÿç‰ˆæœ¬å’Œè½¯ä»¶ç‰ˆæœ¬"><a href="#1ã€æŸ¥çœ‹ç³»ç»Ÿç‰ˆæœ¬å’Œè½¯ä»¶ç‰ˆæœ¬" class="headerlink" title="1ã€æŸ¥çœ‹ç³»ç»Ÿç‰ˆæœ¬å’Œè½¯ä»¶ç‰ˆæœ¬"></a>1ã€æŸ¥çœ‹ç³»ç»Ÿç‰ˆæœ¬å’Œè½¯ä»¶ç‰ˆæœ¬</h3><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token punctuation">[</span>root@qfedu.com gitlab<span class="token punctuation">]</span><span class="token comment"># cat /etc/redhat-release </span>CentOS Linux release <span class="token number">7.3</span>.1611 <span class="token punctuation">(</span>Core<span class="token punctuation">)</span> <span class="token punctuation">[</span>root@qfedu.com gitlab<span class="token punctuation">]</span><span class="token comment"># cat /opt/gitlab/embedded/service/gitlab-rails/VERSION</span><span class="token number">8.15</span>.4<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre><h3 id="2ã€æ•°æ®å¤‡ä»½"><a href="#2ã€æ•°æ®å¤‡ä»½" class="headerlink" title="2ã€æ•°æ®å¤‡ä»½"></a>2ã€æ•°æ®å¤‡ä»½</h3><h4 id="1ã€æŸ¥çœ‹å¤‡ä»½ç›¸å…³çš„é…ç½®é¡¹"><a href="#1ã€æŸ¥çœ‹å¤‡ä»½ç›¸å…³çš„é…ç½®é¡¹" class="headerlink" title="1ã€æŸ¥çœ‹å¤‡ä»½ç›¸å…³çš„é…ç½®é¡¹"></a>1ã€æŸ¥çœ‹å¤‡ä»½ç›¸å…³çš„é…ç½®é¡¹</h4><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token punctuation">[</span>root@qfedu.com ~<span class="token punctuation">]</span><span class="token comment"># vim /etc/gitlab/gitlab.rb</span>gitlab_rails<span class="token punctuation">[</span><span class="token string">'manage_backup_path'</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token boolean">true</span>gitlab_rails<span class="token punctuation">[</span><span class="token string">'backup_path'</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token string">"/data/gitlab/backups"</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre><p>è¯¥é¡¹å®šä¹‰äº†é»˜è®¤å¤‡ä»½å‡ºæ–‡ä»¶çš„è·¯å¾„ï¼Œå¯ä»¥é€šè¿‡ä¿®æ”¹è¯¥é…ç½®ï¼Œå¹¶æ‰§è¡Œ <strong>gitlab-ctl reconfigure æˆ–è€… gitlab-ctl  restart</strong> é‡å¯æœåŠ¡ç”Ÿæ•ˆã€‚</p><h4 id="2ã€æ‰§è¡Œå¤‡ä»½å‘½ä»¤è¿›è¡Œå¤‡ä»½"><a href="#2ã€æ‰§è¡Œå¤‡ä»½å‘½ä»¤è¿›è¡Œå¤‡ä»½" class="headerlink" title="2ã€æ‰§è¡Œå¤‡ä»½å‘½ä»¤è¿›è¡Œå¤‡ä»½"></a>2ã€æ‰§è¡Œå¤‡ä»½å‘½ä»¤è¿›è¡Œå¤‡ä»½</h4><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token punctuation">[</span>root@qfedu.com ~<span class="token punctuation">]</span><span class="token comment"># /opt/gitlab/bin/gitlab-rake gitlab:backup:create </span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><h4 id="3ã€æ·»åŠ åˆ°-crontab-ä¸­å®šæ—¶æ‰§è¡Œ"><a href="#3ã€æ·»åŠ åˆ°-crontab-ä¸­å®šæ—¶æ‰§è¡Œ" class="headerlink" title="3ã€æ·»åŠ åˆ° crontab ä¸­å®šæ—¶æ‰§è¡Œ"></a>3ã€æ·»åŠ åˆ° crontab ä¸­å®šæ—¶æ‰§è¡Œ</h4><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token punctuation">[</span>root@qfedu.com ~<span class="token punctuation">]</span><span class="token comment"># crontab -e</span><span class="token number">0</span> <span class="token number">2</span> * * * <span class="token function">bash</span> /opt/gitlab/bin/gitlab-rake gitlab:backup:create<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre><p>å¯ä»¥åˆ°&#x2F;data&#x2F;gitlab&#x2F;backupsæ‰¾åˆ°å¤‡ä»½åŒ…ï¼Œè§£å‹æŸ¥çœ‹ï¼Œä¼šå‘ç°å¤‡ä»½çš„è¿˜æ˜¯æ¯”è¾ƒå…¨é¢çš„ï¼Œæ•°æ®åº“ã€repositoriesã€buildã€uploadç­‰åˆ†ç±»è¿˜æ˜¯æ¯”è¾ƒæ¸…æ™°çš„ã€‚</p><h4 id="4ã€è®¾ç½®å¤‡ä»½ä¿ç•™æ—¶é•¿"><a href="#4ã€è®¾ç½®å¤‡ä»½ä¿ç•™æ—¶é•¿" class="headerlink" title="4ã€è®¾ç½®å¤‡ä»½ä¿ç•™æ—¶é•¿"></a>4ã€è®¾ç½®å¤‡ä»½ä¿ç•™æ—¶é•¿</h4><p>é˜²æ­¢æ¯å¤©æ‰§è¡Œå¤‡ä»½ï¼Œæœ‰ç›®å½•è¢«çˆ†æ»¡çš„é£é™©ï¼Œæ‰“å¼€&#x2F;etc&#x2F;gitlab&#x2F;gitlab.rbé…ç½®æ–‡ä»¶ï¼Œæ‰¾åˆ°å¦‚ä¸‹é…ç½®ï¼š</p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token punctuation">[</span>root@qfedu.com ~<span class="token punctuation">]</span><span class="token comment"># vim /etc/gitlab/gitlab.rb</span>gitlab_rails<span class="token punctuation">[</span><span class="token string">'backup_keep_time'</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token number">604800</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre><p>è®¾ç½®å¤‡ä»½ä¿ç•™7å¤©ï¼ˆ7<em>3600</em>24&#x3D;604800ï¼‰ï¼Œç§’ä¸ºå•ä½ï¼Œå¦‚æœæƒ³å¢å¤§æˆ–å‡å°ï¼Œå¯ä»¥ç›´æ¥åœ¨è¯¥å¤„é…ç½®ï¼Œå¹¶é€šè¿‡gitlab-ctl restart é‡å¯æœåŠ¡ç”Ÿæ•ˆã€‚</p><p>å¤‡ä»½å®Œæˆï¼Œä¼šåœ¨å¤‡ä»½ç›®å½•ä¸­ç”Ÿæˆä¸€ä¸ªå½“å¤©æ—¥æœŸçš„taråŒ…ã€‚</p><h3 id="3ã€æ•°æ®æ¢å¤"><a href="#3ã€æ•°æ®æ¢å¤" class="headerlink" title="3ã€æ•°æ®æ¢å¤"></a>3ã€æ•°æ®æ¢å¤</h3><h4 id="1ã€å®‰è£…éƒ¨ç½²-gitlab-server"><a href="#1ã€å®‰è£…éƒ¨ç½²-gitlab-server" class="headerlink" title="1ã€å®‰è£…éƒ¨ç½² gitlab server"></a>1ã€å®‰è£…éƒ¨ç½² gitlab server</h4><p> å…·ä½“æ­¥éª¤å‚è§ä¸Šé¢ï¼šgitlab server æ­å»ºè¿‡ç¨‹</p><h4 id="2ã€æ¢å¤-gitlab"><a href="#2ã€æ¢å¤-gitlab" class="headerlink" title="2ã€æ¢å¤ gitlab"></a>2ã€æ¢å¤ gitlab</h4><h5 id="1ã€æŸ¥çœ‹å¤‡ä»½ç›¸å…³çš„é…ç½®é¡¹-1"><a href="#1ã€æŸ¥çœ‹å¤‡ä»½ç›¸å…³çš„é…ç½®é¡¹-1" class="headerlink" title="1ã€æŸ¥çœ‹å¤‡ä»½ç›¸å…³çš„é…ç½®é¡¹"></a>1ã€æŸ¥çœ‹å¤‡ä»½ç›¸å…³çš„é…ç½®é¡¹</h5><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token punctuation">[</span>root@qfedu.com ~<span class="token punctuation">]</span><span class="token comment"># vim /etc/gitlab/gitlab.rb</span>gitlab_rails<span class="token punctuation">[</span><span class="token string">'backup_path'</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token string">"/data/gitlab/backups"</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre><p>ä¿®æ”¹è¯¥é…ç½®ï¼Œå®šä¹‰äº†é»˜è®¤å¤‡ä»½å‡ºæ–‡ä»¶çš„è·¯å¾„ï¼Œå¹¶æ‰§è¡Œ <strong>gitlab-ctl reconfigure æˆ–è€… gitlab-ctl  restart</strong> é‡å¯æœåŠ¡ç”Ÿæ•ˆã€‚</p><h5 id="2ã€æ¢å¤å‰éœ€è¦å…ˆåœæ‰æ•°æ®è¿æ¥æœåŠ¡"><a href="#2ã€æ¢å¤å‰éœ€è¦å…ˆåœæ‰æ•°æ®è¿æ¥æœåŠ¡" class="headerlink" title="2ã€æ¢å¤å‰éœ€è¦å…ˆåœæ‰æ•°æ®è¿æ¥æœåŠ¡"></a>2ã€æ¢å¤å‰éœ€è¦å…ˆåœæ‰æ•°æ®è¿æ¥æœåŠ¡</h5><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token punctuation">[</span>root@qfedu.com ~<span class="token punctuation">]</span><span class="token comment"># gitlab-ctl stop unicorn</span><span class="token punctuation">[</span>root@qfedu.com ~<span class="token punctuation">]</span><span class="token comment"># gitlab-ctl stop sidekiq</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre><ul><li>å¦‚æœæ˜¯å°æ–°æ­å»ºçš„ä¸»æœºï¼Œä¸éœ€è¦æ“ä½œï¼Œç†è®ºä¸Šä¸åœè¿™ä¸¤ä¸ªæœåŠ¡ä¹Ÿå¯ä»¥ã€‚åœè¿™ä¸¤ä¸ªæœåŠ¡æ˜¯ä¸ºäº†ä¿è¯æ•°æ®ä¸€è‡´æ€§ã€‚</li></ul><h5 id="3ã€åŒæ­¥å¤‡ä»½æ–‡ä»¶åˆ°æ–°æœåŠ¡å™¨"><a href="#3ã€åŒæ­¥å¤‡ä»½æ–‡ä»¶åˆ°æ–°æœåŠ¡å™¨" class="headerlink" title="3ã€åŒæ­¥å¤‡ä»½æ–‡ä»¶åˆ°æ–°æœåŠ¡å™¨"></a>3ã€åŒæ­¥å¤‡ä»½æ–‡ä»¶åˆ°æ–°æœåŠ¡å™¨</h5><p>å°†è€æœåŠ¡å™¨&#x2F;data&#x2F;gitlab&#x2F;backupsç›®å½•ä¸‹çš„å¤‡ä»½æ–‡ä»¶æ‹·è´åˆ°æ–°æœåŠ¡å™¨ä¸Šçš„&#x2F;data&#x2F;gitlab&#x2F;backups</p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token punctuation">[</span>root@qfedu.com gitlab<span class="token punctuation">]</span><span class="token comment"># rsync -avz 1530773117_2019_03_05_gitlab_backup.tar 192.168.95.135:/data/gitlab/backups/ </span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><ul><li>æ³¨æ„æƒé™ï¼š600æƒé™æ˜¯æ— æƒæ¢å¤çš„ã€‚ å®éªŒç¯å¢ƒå¯æ”¹æˆäº†777ï¼Œç”Ÿäº§ç¯å¢ƒå»ºè®®ä¿®æ”¹å±ä¸»å±ç»„</li></ul><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token punctuation">[</span>root@qfedu.com backups<span class="token punctuation">]</span><span class="token comment"># pwd</span>/data/gitlab/backups<span class="token punctuation">[</span>root@qfedu.com backups<span class="token punctuation">]</span><span class="token comment"># chown -R git.git 1530773117_2019_03_05_gitlab_backup.tar </span><span class="token punctuation">[</span>root@qfedu.com backups<span class="token punctuation">]</span><span class="token comment"># ll</span>total <span class="token number">17328900</span><span class="token parameter variable">-rwxrwxrwx</span> <span class="token number">1</span> <span class="token function">git</span> <span class="token function">git</span> <span class="token number">17744793600</span> Jul  <span class="token number">5</span> <span class="token number">14</span>:47 1530773117_2018_07_05_gitlab_backup.tar<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h5 id="4ã€æ‰§è¡Œå‘½ä»¤è¿›è¡Œæ¢å¤"><a href="#4ã€æ‰§è¡Œå‘½ä»¤è¿›è¡Œæ¢å¤" class="headerlink" title="4ã€æ‰§è¡Œå‘½ä»¤è¿›è¡Œæ¢å¤"></a>4ã€æ‰§è¡Œå‘½ä»¤è¿›è¡Œæ¢å¤</h5><p>åé¢å†è¾“å…¥ä¸¤æ¬¡ yes å°±å®Œæˆæ¢å¤äº†ã€‚</p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token punctuation">[</span>root@qfedu.com ~<span class="token punctuation">]</span><span class="token comment"># gitlab-rake gitlab:backup:restore BACKUP=1530773117_2018_07_05_gitlab_backup.tar</span>æ³¨æ„ï¼šbackups ç›®å½•ä¸‹ä¿ç•™ä¸€ä¸ªå¤‡ä»½æ–‡ä»¶å¯ç›´æ¥æ‰§è¡Œ<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre><h5 id="5ã€æ¢å¤å®Œæˆå¯åŠ¨æœåŠ¡"><a href="#5ã€æ¢å¤å®Œæˆå¯åŠ¨æœåŠ¡" class="headerlink" title="5ã€æ¢å¤å®Œæˆå¯åŠ¨æœåŠ¡"></a>5ã€æ¢å¤å®Œæˆå¯åŠ¨æœåŠ¡</h5><p>æ¢å¤å®Œæˆåï¼Œå¯åŠ¨åˆšåˆšçš„ä¸¤ä¸ªæœåŠ¡ï¼Œæˆ–è€…é‡å¯æ‰€æœ‰æœåŠ¡ï¼Œå†æ‰“å¼€æµè§ˆå™¨è¿›è¡Œè®¿é—®ï¼Œå‘ç°æ•°æ®å’Œä¹‹å‰çš„ä¸€è‡´ï¼š</p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token punctuation">[</span>root@qfedu.com ~<span class="token punctuation">]</span><span class="token comment"># gitlab-ctl start unicorn</span><span class="token punctuation">[</span>root@qfedu.com ~<span class="token punctuation">]</span><span class="token comment"># gitlab-ctl start sidekiq</span>æˆ–<span class="token punctuation">[</span>root@qfedu.com ~<span class="token punctuation">]</span><span class="token comment"># gitlab-ctl restart</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre><p><strong>æ³¨æ„ï¼šé€šè¿‡å¤‡ä»½æ–‡ä»¶æ¢å¤gitlabå¿…é¡»ä¿è¯ä¸¤å°ä¸»æœºçš„gitlabç‰ˆæœ¬ä¸€è‡´ï¼Œå¦åˆ™ä¼šæç¤ºç‰ˆæœ¬ä¸åŒ¹é…</strong></p><h2 id="åä¸€ã€åˆ©ç”¨Gitlabç®¡ç†k8sé›†ç¾¤"><a href="#åä¸€ã€åˆ©ç”¨Gitlabç®¡ç†k8sé›†ç¾¤" class="headerlink" title="åä¸€ã€åˆ©ç”¨Gitlabç®¡ç†k8sé›†ç¾¤"></a>åä¸€ã€åˆ©ç”¨Gitlabç®¡ç†k8sé›†ç¾¤</h2><h3 id="1ã€æƒé™è®¾ç½®"><a href="#1ã€æƒé™è®¾ç½®" class="headerlink" title="1ã€æƒé™è®¾ç½®"></a>1ã€æƒé™è®¾ç½®</h3><p><img src="/image-20200821174547237.png" alt="image-20200821174547237"></p><h3 id="2ã€è·å–k8sé›†ç¾¤APIåœ°å€"><a href="#2ã€è·å–k8sé›†ç¾¤APIåœ°å€" class="headerlink" title="2ã€è·å–k8sé›†ç¾¤APIåœ°å€"></a>2ã€è·å–k8sé›†ç¾¤APIåœ°å€</h3><pre class="line-numbers language-yaml" data-language="yaml"><code class="language-yaml"><span class="token punctuation">[</span>root@master ~<span class="token punctuation">]</span><span class="token comment"># kubectl cluster-info | grep 'Kubernetes master' | awk '/http/ &#123;print $NF&#125;'</span>https<span class="token punctuation">:</span>//192.168.19.200<span class="token punctuation">:</span><span class="token number">6443</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre><h3 id="3ã€è·å–k8sé›†ç¾¤é»˜è®¤CAè¯ä¹¦"><a href="#3ã€è·å–k8sé›†ç¾¤é»˜è®¤CAè¯ä¹¦" class="headerlink" title="3ã€è·å–k8sé›†ç¾¤é»˜è®¤CAè¯ä¹¦"></a>3ã€è·å–k8sé›†ç¾¤é»˜è®¤CAè¯ä¹¦</h3><pre class="line-numbers language-none"><code class="language-none">[root@master ~]# kubectl get secretsNAME                  TYPE                                  DATA   AGEdefault-token-cvfqx   kubernetes.io&#x2F;service-account-token   3      3d21h<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre><p>default-token-cvfqx ä¸ºä¸Šé¢è·å–åˆ°çš„secretsçš„åç§°ï¼Œç”¨ä»¥ä¸‹å‘½ä»¤æŸ¥çœ‹è¯ä¹¦</p><pre class="line-numbers language-none"><code class="language-none">[root@master ~]# kubectl get secret default-token-cvfqx  -o jsonpath&#x3D;&quot;&#123;[&#39;data&#39;][&#39;ca\.crt&#39;]&#125;&quot; | base64 --decode-----BEGIN CERTIFICATE-----MIICyDCCAbCgAwIBAgIBADANBgkqhkiG9w0BAQsFADAVMRMwEQYDVQQDEwprdWJlcm5ldGVzMB4XDTIwMDgxNzA5MjAwMFoXDTMwMDgxNTA5MjAwMFowFTETMBEGA1UEAxMKa3ViZXJuZXRlczCCASIwDQYJKoZIhvcNAQEBBQADggEPADCCAQoCggEBANIMiOGHeolaxkE+kqZtc8kDbGFhwqGxNxg4orbIjrz&#x2F;&#x2F;Z6vrgqo2COn2NjKrVM11bmzVhHPCruc3snfTLIS+&#x2F;Z6gZqgpw5ruX8OjfH4nhr9npKxdBon3soa10EovPwMz1KWlaqbuLKTbtTm+oCtAKYXUlzqrFGR&#x2F;&#x2F;GW2D3bjl1QGOPbAR0pggdxSpPo6oUgtEQJQAsNOJ40qMjevi3fnrNDrMqmcNKlSlkw8+Gf4TqM1EfAERRHiEcb&#x2F;W3hOGWV0gdmvaq7CE&#x2F;ENeD1O11NE76BMmk5WO0u6ot4OmP35TTlx8K0N&#x2F;WPyq76RlH7somiIb8S1NpAzg+9K0vv1QmILScCAwEAAaMjMCEwDgYDVR0PAQH&#x2F;BAQDAgKkMA8GA1UdEwEB&#x2F;wQFMAMBAf8wDQYJKoZIhvcNAQELBQADggEBAEVgIlTFDoFhb3KA0RMVjckgsP3OOB7vTEws6w9ZDGJsNlbbCa15f8q3VmERSkfjAhfG4I9gb4KI0CM5Xt3JhU76GWsOZXHDfK7AzDGpLPUxlygkK7c7XCES&#x2F;GEJe5agBxQyCo2pAvcj&#x2F;nb+JIBeSh8JcG05pzPhL11it9hDqmS5k92+63xGs&#x2F;SDEzXEbBVMnyZWiv+AOHlO1&#x2F;IFofUD3VHcSRMYwH5j6Irc0p0XTnFg+GHBpqjxwMWxP6IxdVrsOWUALM5oOJYn4aJQy5kSpJFkwNW8xDvVgtOWq5P9fVfnE4Am0LI&#x2F;DevzYtcr3O9hUmCfEOnF0hC0n4ghYOPqiB4&#x3D;-----END CERTIFICATE-----<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h3 id="4ã€è®¾ç½®rbac"><a href="#4ã€è®¾ç½®rbac" class="headerlink" title="4ã€è®¾ç½®rbac"></a>4ã€è®¾ç½®rbac</h3><pre class="line-numbers language-none"><code class="language-none">[root@master ~]# vim gitlab-admin-service-account.yamlapiVersion: v1kind: ServiceAccountmetadata:  name: gitlab-admin  namespace: kube-system---apiVersion: rbac.authorization.k8s.io&#x2F;v1beta1kind: ClusterRoleBindingmetadata:  name: gitlab-adminroleRef:  apiGroup: rbac.authorization.k8s.io  kind: ClusterRole  name: cluster-adminsubjects:- kind: ServiceAccount  name: gitlab-admin  namespace: kube-system[root@master ~]# kubectl apply -f gitlab-admin-service-account.yamlserviceaccount&#x2F;gitlab-admin createdclusterrolebinding.rbac.authorization.k8s.io&#x2F;gitlab-admin created<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h3 id="5ã€è·å–gitlab-adminçš„token"><a href="#5ã€è·å–gitlab-adminçš„token" class="headerlink" title="5ã€è·å–gitlab-adminçš„token"></a>5ã€è·å–gitlab-adminçš„token</h3><pre class="line-numbers language-yaml" data-language="yaml"><code class="language-yaml"><span class="token punctuation">[</span>root@master ~<span class="token punctuation">]</span><span class="token comment"># kubectl -n kube-system describe secret $(kubectl -n kube-system get secret | grep gitlab-admin | awk '&#123;print $1&#125;')</span><span class="token key atrule">Name</span><span class="token punctuation">:</span>         gitlab<span class="token punctuation">-</span>admin<span class="token punctuation">-</span>token<span class="token punctuation">-</span>pmb2h<span class="token key atrule">Namespace</span><span class="token punctuation">:</span>    kube<span class="token punctuation">-</span>system<span class="token key atrule">Labels</span><span class="token punctuation">:</span>       &lt;none<span class="token punctuation">></span><span class="token key atrule">Annotations</span><span class="token punctuation">:</span>  <span class="token key atrule">kubernetes.io/service-account.name</span><span class="token punctuation">:</span> gitlab<span class="token punctuation">-</span>admin              <span class="token key atrule">kubernetes.io/service-account.uid</span><span class="token punctuation">:</span> bc9e1f94<span class="token punctuation">-</span>088d<span class="token punctuation">-</span>41f4<span class="token punctuation">-</span>8e18<span class="token punctuation">-</span>f31f1e9a9369<span class="token key atrule">Type</span><span class="token punctuation">:</span>  kubernetes.io/service<span class="token punctuation">-</span>account<span class="token punctuation">-</span>tokenData====<span class="token key atrule">ca.crt</span><span class="token punctuation">:</span>     1025 bytes<span class="token key atrule">namespace</span><span class="token punctuation">:</span>  11 bytes<span class="token key atrule">token</span><span class="token punctuation">:</span>      eyJhbGciOiJSUzI1NiIsImtpZCI6InluNWZyY3V5T1BjNmFFQlpmRVBmOGFOenRmVkx1U0dCRDFhT0s5dEtGeXMifQ.eyJpc3MiOiJrdWJlcm5ldGVzL3NlcnZpY2VhY2NvdW50Iiwia3ViZXJuZXRlcy5pby9zZXJ2aWNlYWNjb3VudC9uYW1lc3BhY2UiOiJrdWJlLXN5c3RlbSIsImt1YmVybmV0ZXMuaW8vc2VydmljZWFjY291bnQvc2VjcmV0Lm5hbWUiOiJnaXRsYWItYWRtaW4tdG9rZW4tcG1iMmgiLCJrdWJlcm5ldGVzLmlvL3NlcnZpY2VhY2NvdW50L3NlcnZpY2UtYWNjb3VudC5uYW1lIjoiZ2l0bGFiLWFkbWluIiwia3ViZXJuZXRlcy5pby9zZXJ2aWNlYWNjb3VudC9zZXJ2aWNlLWFjY291bnQudWlkIjoiYmM5ZTFmOTQtMDg4ZC00MWY0LThlMTgtZjMxZjFlOWE5MzY5Iiwic3ViIjoic3lzdGVtOnNlcnZpY2VhY2NvdW50Omt1YmUtc3lzdGVtOmdpdGxhYi1hZG1pbiJ9.HGNf2_q_NS7ASk2ID6Y658PMpDIruFLr70VGk9I_dAP<span class="token punctuation">-</span>rYt81FarjQhIQPn554SrtmiTp<span class="token punctuation">-</span>iQ_j7slX_YRsGHlpo74VrBM2SirDToXobuSpe77v6MFx6Ol2UsUrxY0ulm_DAjOhZ16jlohPWlhkP0083KBfywwdpyF2oVdALQnT4sI1aDxgUHs<span class="token punctuation">-</span>Pmg6D0NbdN0Ipb<span class="token punctuation">-</span><span class="token punctuation">-</span>s<span class="token punctuation">-</span>Z59QKGr1XH4Pp0Qb9kze6KCJSWOk8<span class="token punctuation">-</span>4pwtpQcT7K2MA1ucyEJB283D5ChQSddo9q7pBkEwq94TLy<span class="token punctuation">-</span>ZbAhHgO89OqVIjY<span class="token punctuation">-</span>3H<span class="token punctuation">-</span>rb5Kd3meGrtGJZJscx7xnn6_DEvbBwp8DmCoM4vfFLUUow<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>6ã€æ·»åŠ k8sé›†ç¾¤</p><p><img src="/image-20200821180353378.png" alt="image-20200821180353378"></p>]]></content>
      
      
      <categories>
          
          <category> Devops </category>
          
      </categories>
      
      
        <tags>
            
            <tag> ç‰ˆæœ¬æ§åˆ¶ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>ä½¿ç”¨dockerå®‰è£…mysqlå’Œredis</title>
      <link href="/posts/47352.html"/>
      <url>/posts/47352.html</url>
      
        <content type="html"><![CDATA[<h2 id="å®‰è£…mysql"><a href="#å®‰è£…mysql" class="headerlink" title="å®‰è£…mysql"></a>å®‰è£…mysql</h2><ol><li>åˆ°docker hubä¸­æ‰¾è‡ªå·±éœ€è¦çš„mysql é•œåƒç‰ˆæœ¬ æˆ–è€…æ‰§è¡Œdocker search mysql</li></ol><p><img src="/1658759001622.png" alt="1658759001622"></p><ol start="2"><li>docker pull mysql  â€” ä¸æŒ‡å®šç‰ˆæœ¬é»˜è®¤ä¸‹è½½æœ€æ–°çš„mysql</li></ol><p>   <img src="/223100.png" alt="å±å¹•æˆªå›¾ 2022-07-25 223100"></p><ol start="3"><li><p>docker pull mysql:5.7 ä¸‹è½½5.7ç‰ˆæœ¬çš„é•œåƒ</p></li><li><p>è¿è¡Œmysql é•œåƒ</p></li></ol>   <pre class="line-numbers language-none"><code class="language-none">sudo docker run \ -p 3306:3306 --name mysql \ -v &#x2F;mydata&#x2F;mysql&#x2F;log:&#x2F;var&#x2F;log&#x2F;mysql \  -v &#x2F;mydata&#x2F;mysql&#x2F;data:&#x2F;var&#x2F;lib&#x2F;mysql \  -v &#x2F;mydata&#x2F;mysql&#x2F;conf:&#x2F;etc&#x2F;mysql \  -e MYSQL_ROOT_PASSWORD&#x3D;root \  -d mysql:5.7  é…ç½®ç«¯å£æ˜ å°„ï¼š-p 3306:3306 --name mysqlå°†å®¹å™¨çš„3306ç«¯å£æ˜ å°„åˆ°ä¸»æœºçš„3306ç«¯å£é…ç½®mysqlæ•°æ®å·æŒ‚è½½1.-v &#x2F;mydata&#x2F;mysql&#x2F;log:&#x2F;var&#x2F;log&#x2F;mysql(æ—¥å¿—æ–‡ä»¶æŒ‚è½½)å°†å®¹å™¨ä¸­çš„æ—¥å¿—æ–‡ä»¶å¤¹æŒ‚è½½åˆ°ä¸»æœºå¯¹åº”çš„&#x2F;var&#x2F;log&#x2F;mysqlæ–‡ä»¶å¤¹ä¸­2.-v &#x2F;mydata&#x2F;mysql&#x2F;data:&#x2F;var&#x2F;lib&#x2F;mysql(æ•°æ®æ–‡ä»¶æŒ‚è½½)å°†å®¹å™¨ä¸­çš„æ•°æ®æ–‡ä»¶å¤¹æŒ‚è½½åˆ°ä¸»æœºå¯¹åº”çš„&#x2F;var&#x2F;lib&#x2F;mysqlæ–‡ä»¶å¤¹ä¸­3.-v &#x2F;mydata&#x2F;mysql&#x2F;conf:&#x2F;etc&#x2F;mysql(é…ç½®æ–‡ä»¶æŒ‚è½½)å°†å®¹å™¨çš„é…ç½®æ–‡ä»¶å¤¹æŒ‚è½½åˆ°ä¸»æœºå¯¹åº”çš„&#x2F;etc&#x2F;mysqlæ–‡ä»¶å¤¹ä¸­æ³¨(è¿™é‡Œæ‰€æçš„ä¸»æœºæŒ‡çš„æ˜¯å½“å‰çš„linuxä¸»æœº)é…ç½®ç”¨æˆ·-e MYSQL_ROOT_PASSWORD&#x3D;rootè®¾ç½®åˆå§‹åŒ–rootç”¨æˆ·çš„å¯†ç æŒ‡å®šé•œåƒèµ„æº-d mysql:5.7-dï¼šä»¥åå°æ–¹å¼è¿è¡Œå®ä¾‹mysql:5.7ï¼šæŒ‡å®šç”¨è¿™ä¸ªé•œåƒæ¥åˆ›å»ºè¿è¡Œå®ä¾‹<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><ol start="5"><li><p>æŸ¥çœ‹mysql å®¹å™¨</p><pre class="line-numbers language-none"><code class="language-none">docker ps -a<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre></li></ol><h2 id="å®‰è£…redis"><a href="#å®‰è£…redis" class="headerlink" title="å®‰è£…redis"></a>å®‰è£…redis</h2><ol><li><p>docker pull redis</p></li><li><p>æŒ‚è½½é…ç½®æ–‡ä»¶</p><pre class="line-numbers language-none"><code class="language-none">mkdir -p  &#x2F;home&#x2F;redis&#x2F;myredis&#x2F;datavim &#x2F;home&#x2F;redis&#x2F;myredis&#x2F;redis.conf   # å†™å…¥redis é…ç½®æ–‡ä»¶å†…å®¹# æ‰§è¡Œdockerå‘½ä»¤docker run --restart&#x3D;always --log-opt max-size&#x3D;100m --log-opt max-file&#x3D;2 -p 6379:6379 --name myredis -v &#x2F;home&#x2F;redis&#x2F;myredis&#x2F;myredis.conf:&#x2F;etc&#x2F;redis&#x2F;redis.conf -v &#x2F;home&#x2F;redis&#x2F;myredis&#x2F;data:&#x2F;data -d redis redis-server &#x2F;etc&#x2F;redis&#x2F;redis.conf  --appendonly yes  --requirepass 000415<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>è¯´æ˜</p><pre class="line-numbers language-none"><code class="language-none">â€“restart&#x3D;always æ€»æ˜¯å¼€æœºå¯åŠ¨â€“logæ˜¯æ—¥å¿—æ–¹é¢çš„-p 6379:6379 å°†6379ç«¯å£æŒ‚è½½å‡ºå»â€“name ç»™è¿™ä¸ªå®¹å™¨å–ä¸€ä¸ªåå­—-v æ•°æ®å·æŒ‚è½½&#x2F;home&#x2F;redis&#x2F;myredis&#x2F;myredis.conf:&#x2F;etc&#x2F;redis&#x2F;redis.conf è¿™é‡Œæ˜¯å°† liunx è·¯å¾„ä¸‹çš„myredis.conf å’Œredisä¸‹çš„redis.conf æŒ‚è½½åœ¨ä¸€èµ·ã€‚&#x2F;home&#x2F;redis&#x2F;myredis&#x2F;data:&#x2F;data è¿™ä¸ªåŒä¸Š-d redis è¡¨ç¤ºåå°å¯åŠ¨redisredis-server &#x2F;etc&#x2F;redis&#x2F;redis.conf ä»¥é…ç½®æ–‡ä»¶å¯åŠ¨redisï¼ŒåŠ è½½å®¹å™¨å†…çš„confæ–‡ä»¶ï¼Œæœ€ç»ˆæ‰¾åˆ°çš„æ˜¯æŒ‚è½½çš„ç›®å½• &#x2F;etc&#x2F;redis&#x2F;redis.conf ä¹Ÿå°±æ˜¯liunxä¸‹çš„&#x2F;home&#x2F;redis&#x2F;myredis&#x2F;myredis.confâ€“appendonly yes å¼€å¯redis æŒä¹…åŒ–â€“requirepass 000415 è®¾ç½®å¯†ç <span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></li></ol>]]></content>
      
      
      <categories>
          
          <category> Devops </category>
          
      </categories>
      
      
        <tags>
            
            <tag> docker </tag>
            
            <tag> mysql </tag>
            
            <tag> reids </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>é•œåƒç®€ä»‹ä¸é•œåƒçš„æ„å»º</title>
      <link href="/posts/45106.html"/>
      <url>/posts/45106.html</url>
      
        <content type="html"><![CDATA[<h2 id="é•œåƒä»‹ç»ä¸æ“ä½œ"><a href="#é•œåƒä»‹ç»ä¸æ“ä½œ" class="headerlink" title="é•œåƒä»‹ç»ä¸æ“ä½œ"></a>é•œåƒä»‹ç»ä¸æ“ä½œ</h2><h3 id="ä½•ä¸ºé•œåƒ"><a href="#ä½•ä¸ºé•œåƒ" class="headerlink" title="ä½•ä¸ºé•œåƒ"></a>ä½•ä¸ºé•œåƒ</h3><p>é•œåƒæ˜¯ä¸€ä¸ªè½»é‡çº§ã€å¯ç‹¬ç«‹è¿è¡Œçš„è½¯ä»¶åŒ…ï¼Œç”¨æ¥æ‰“åŒ…è½¯ä»¶è¿è¡Œçš„ç¯å¢ƒå’Œä¾èµ–</p><h4 id="unionfs"><a href="#unionfs" class="headerlink" title="unionfs"></a>unionfs</h4><p>é•œåƒæ˜¯ç”±unionfsè”åˆæ–‡ä»¶ç³»ç»Ÿæ„æˆï¼Œç”±ä¸€å±‚å±‚çš„æ–‡ä»¶ç³»ç»Ÿå †ç§¯ç»„æˆï¼Œä»–æ”¯æŒå¯¹æ–‡ä»¶ç³»ç»Ÿçš„ä¿®æ”¹ä½œä¸ºä¸€æ¬¡æäº¤æ¥å åŠ </p><p>ç‰¹æ€§ï¼š ä¸€æ¬¡åŒæ—¶åŠ è½½å¤šä¸ªæ–‡ä»¶ç³»ç»Ÿï¼Œä½†ä»å¤–é¢çœ‹èµ·æ¥ï¼Œåªèƒ½çœ‹åˆ°ä¸€ä¸ªæ–‡ä»¶ç³»ç»Ÿï¼Œè”åˆåŠ è½½ä¼šæŠŠå„å±‚æ–‡ä»¶ç³»ç»Ÿå åŠ èµ·æ¥ï¼Œè¿™æ ·æœ€ç»ˆçš„æ–‡ä»¶ç³»ç»Ÿä¼šåŒ…å«æ‰€æœ‰åº•å±‚çš„æ–‡ä»¶å’Œç›®å½• </p><h4 id="é•œåƒåŠ è½½åŸç†"><a href="#é•œåƒåŠ è½½åŸç†" class="headerlink" title="é•œåƒåŠ è½½åŸç†"></a>é•œåƒåŠ è½½åŸç†</h4><p> dockerçš„é•œåƒå®é™…ä¸Šç”±ä¸€å±‚ä¸€å±‚çš„æ–‡ä»¶ç³»ç»Ÿç»„æˆï¼Œè¿™ç§å±‚çº§çš„æ–‡ä»¶ç³»ç»Ÿå«åšUnionFSã€‚ </p><p> bootfs(boot file system)ä¸»è¦åŒ…å«bootloaderå’Œkernel, bootloaderä¸»è¦æ˜¯å¼•å¯¼åŠ è½½kernel, Linuxåˆšå¯åŠ¨æ—¶ä¼šåŠ è½½bootfsæ–‡ä»¶ç³»ç»Ÿï¼Œåœ¨Dockeré•œåƒçš„æœ€åº•å±‚æ˜¯bootfsã€‚è¿™ä¸€å±‚ä¸æˆ‘ä»¬å…¸å‹çš„Linux&#x2F;Unixç³»ç»Ÿæ˜¯ä¸€æ ·çš„ï¼ŒåŒ…å«bootåŠ è½½å™¨å’Œå†…æ ¸ã€‚å½“bootåŠ è½½å®Œæˆä¹‹åæ•´ä¸ªå†…æ ¸å°±éƒ½åœ¨å†…å­˜ä¸­äº†ï¼Œæ­¤æ—¶å†…å­˜çš„ä½¿ç”¨æƒå·²ç”±bootfsè½¬äº¤ç»™å†…æ ¸ï¼Œæ­¤æ—¶ç³»ç»Ÿä¹Ÿä¼šå¸è½½bootfsã€‚ </p><p> rootfs (root file system) ï¼Œåœ¨bootfsä¹‹ä¸Šã€‚åŒ…å«çš„å°±æ˜¯å…¸å‹ Linux ç³»ç»Ÿä¸­çš„ &#x2F;dev, &#x2F;proc, &#x2F;bin, &#x2F;etc ç­‰æ ‡å‡†ç›®å½•å’Œæ–‡ä»¶ã€‚rootfså°±æ˜¯å„ç§ä¸åŒçš„æ“ä½œç³»ç»Ÿå‘è¡Œç‰ˆï¼Œæ¯”å¦‚Ubuntuï¼ŒCentosç­‰ç­‰ã€‚ </p><h4 id="unionfsåˆ†å±‚ç»“æ„çš„ç‰¹ç‚¹"><a href="#unionfsåˆ†å±‚ç»“æ„çš„ç‰¹ç‚¹" class="headerlink" title="unionfsåˆ†å±‚ç»“æ„çš„ç‰¹ç‚¹"></a>unionfsåˆ†å±‚ç»“æ„çš„ç‰¹ç‚¹</h4><p>å…¶å®æˆ‘ä»¬ä¹Ÿä¼šè€ƒè™‘dockerä¸ºä»€ä¹ˆä¼šæ‰ç”¨è¿™ç§åˆ†å±‚çš„ç»“æœï¼Œå®ƒæœ‰ä»€ä¹ˆå¥½å¤„å‘¢ï¼Ÿæœ€å¤§çš„ä¸€ä¸ªå¥½å¤„å°±æ˜¯å…±äº«èµ„æº</p><p>  æ¯”å¦‚ï¼šæœ‰å¤šä¸ªé•œåƒéƒ½ä»ç›¸åŒçš„ base é•œåƒæ„å»ºè€Œæ¥ï¼Œé‚£ä¹ˆå®¿ä¸»æœºåªéœ€åœ¨ç£ç›˜ä¸Šä¿å­˜ä¸€ä»½baseé•œåƒï¼ŒåŒæ—¶å†…å­˜ä¸­ä¹Ÿåªéœ€åŠ è½½ä¸€ä»½ base é•œåƒï¼Œå°±å¯ä»¥ä¸ºæ‰€æœ‰å®¹å™¨æœåŠ¡äº†ã€‚è€Œä¸”é•œåƒçš„æ¯ä¸€å±‚éƒ½å¯ä»¥è¢«å…±äº«ã€‚</p><h4 id="é•œåƒçš„ç‰¹ç‚¹"><a href="#é•œåƒçš„ç‰¹ç‚¹" class="headerlink" title="é•œåƒçš„ç‰¹ç‚¹"></a>é•œåƒçš„ç‰¹ç‚¹</h4><p> dockeré•œåƒéƒ½æ˜¯åªè¯»çš„ï¼Œå½“å®¹å™¨å¯åŠ¨æ—¶ï¼Œä¸€ä¸ªæ–°çš„å¯å†™å±‚è¢«åŠ è½½åˆ°é•œåƒçš„é¡¶éƒ¨ï¼Œè¿™ä¸€å±‚é€šå¸¸è¢«ç§°ä¸ºå®¹å™¨å±‚,å®¹å™¨å±‚ä¹‹ä¸‹çš„éƒ½å«é•œåƒå±‚ã€‚ </p><h3 id="é•œåƒçš„ç›¸å…³æ“ä½œ"><a href="#é•œåƒçš„ç›¸å…³æ“ä½œ" class="headerlink" title="é•œåƒçš„ç›¸å…³æ“ä½œ"></a>é•œåƒçš„ç›¸å…³æ“ä½œ</h3><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token function">docker</span> commit <span class="token parameter variable">-m</span>  æäº¤å‰¯æœ¬å®è´¨æˆä¸ºä¸€ä¸ªæ–°çš„é•œåƒ   <span class="token function">docker</span> commit <span class="token parameter variable">-a</span> <span class="token string">"zhangtq"</span> <span class="token parameter variable">-m</span> <span class="token string">"no doc"</span> bba8e1b9632c aiguigu/mytomcat:1.2<span class="token function">docker</span> run <span class="token parameter variable">-it</span> <span class="token parameter variable">-p</span> å¯¹å¤–æš´éœ²çš„ç«¯å£8888:8080 tomcat<span class="token function">docker</span> run <span class="token parameter variable">-it</span> <span class="token parameter variable">-p</span> <span class="token number">8888</span>:8080 tomcat<span class="token function">docker</span> run <span class="token parameter variable">-it</span> <span class="token parameter variable">-P</span> tomcat  éšæœºåˆ†é…æš´éœ²ç«¯å£<span class="token function">docker</span> <span class="token builtin class-name">exec</span> <span class="token parameter variable">-it</span> bba8e1b9632c /bin/bash<span class="token function">docker</span> run <span class="token parameter variable">-d</span> <span class="token parameter variable">-p</span> <span class="token number">6666</span>:8080 tomcat åå°å¯åŠ¨<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h4 id="dockerå®¹å™¨æ•°æ®æŒä¹…åŒ–å’Œæ•°æ®å…±äº«"><a href="#dockerå®¹å™¨æ•°æ®æŒä¹…åŒ–å’Œæ•°æ®å…±äº«" class="headerlink" title="dockerå®¹å™¨æ•°æ®æŒä¹…åŒ–å’Œæ•°æ®å…±äº«"></a>dockerå®¹å™¨æ•°æ®æŒä¹…åŒ–å’Œæ•°æ®å…±äº«</h4><p>  æ•°æ®å·çš„ç‰¹ç‚¹ï¼š </p><ol><li>æ•°æ®å·å¯ä»¥åœ¨å®¹å™¨ä¹‹é—´å…±äº«æˆ–é‡ç”¨æ•°æ®   </li><li>å·ä¸­çš„æ›´æ”¹å¯ä»¥ç›´æ¥ç”Ÿæ•ˆ   </li><li>æ•°æ®å·ä¸­çš„æ›´æ”¹ä¸ä¼šåŒ…å«åœ¨é•œåƒçš„æ›´æ–°ä¸­   </li><li>æ•°æ®å·çš„ç”Ÿå‘½å‘¨æœŸä¸€è‡´æŒç»­åˆ°æ²¡æœ‰å®¹å™¨ä½¿ç”¨ä»–ä¸ºæ­¢</li></ol><h5 id="æ·»åŠ æ•°æ®å·ï¼š"><a href="#æ·»åŠ æ•°æ®å·ï¼š" class="headerlink" title="æ·»åŠ æ•°æ®å·ï¼š"></a>æ·»åŠ æ•°æ®å·ï¼š</h5><p>å®¹å™¨å†…æ·»åŠ ï¼š</p><ol><li>ç›´æ¥å‘½ä»¤æ·»åŠ </li></ol><pre class="line-numbers language-none"><code class="language-none">docker run -it -v &#x2F;mydatavolume:&#x2F;mydatavolumecontainer centos  # å¯è¯»å¯å†™docker run -it -v &#x2F;mydatavolume:&#x2F;mydatavolumecontainer:ro centos  #åªè¯»æŒ‚è½½ ä¸»æœºå¯ä»¥å†™ï¼Œå®¹å™¨å†…åªè¯»docker inspect centos  #æŸ¥çœ‹æ•°æ®æ˜¯å¦æŒ‚è½½æˆåŠŸdocker start 56dd279c7699 å¯åŠ¨<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><ol start="2"><li>dockerfile æ·»åŠ </li></ol>   <pre class="line-numbers language-docker" data-language="docker"><code class="language-docker"><span class="token comment"># volume test</span><span class="token instruction"><span class="token keyword">FROM</span> centos</span><span class="token instruction"><span class="token keyword">VOLUME</span> [<span class="token string">"/dataVolumeContainer1"</span>, <span class="token string">"/dataVolumeContainere2"</span>]</span><span class="token instruction"><span class="token keyword">CMD</span> echo <span class="token string">"finished, -------success1"</span></span><span class="token instruction"><span class="token keyword">CMD</span> /bin/bash</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre>   <pre class="line-numbers language-none"><code class="language-none">docker build -f &#x2F;mydocker&#x2F;DockerFile -t test&#x2F;centos .  åˆ›å»ºé•œåƒ<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><h3 id="æ„å»ºdocker-é•œåƒ"><a href="#æ„å»ºdocker-é•œåƒ" class="headerlink" title="æ„å»ºdocker é•œåƒ"></a>æ„å»ºdocker é•œåƒ</h3><h4 id="ä¿ç•™å­—"><a href="#ä¿ç•™å­—" class="headerlink" title="ä¿ç•™å­—"></a>ä¿ç•™å­—</h4><p>FROM         â€” åŸºç¡€é•œåƒï¼Œå½“å‰é•œåƒæ˜¯ç”±å“ªä¸ªåŸºç¡€é•œåƒæ„å»ºçš„</p><p>MAINTAINER        â€” é•œåƒç»´æŠ¤è€…çš„åå­—ä»¥åŠé‚®ä»¶åœ°å€</p><p>RUN        â€” å®¹å™¨æ„å»ºæ—¶éœ€è¦è¿è¡Œçš„æŒ‡ä»¤</p><p>EXPOSE        â€” å½“å‰å®¹å™¨å¯¹å¤–æš´éœ²çš„ç«¯å£</p><p>WORKDR       â€”  å®¹å™¨åˆ›å»ºåï¼Œç»ˆç«¯ç™»å½•åé»˜è®¤çš„å·¥ä½œç›®å½•</p><p>ENV       â€”  ç”¨æ¥æ„å»ºé•œåƒçš„è¿‡ç¨‹ä¸­è®¾ç½®ç¯å¢ƒå˜é‡</p><p>ADD       â€”  å°†å®¿ä¸»æœºçš„ç›®å½•ä¸‹çš„æ–‡ä»¶æ‹·è´è‡³é•œåƒä¸”addå‘½ä»¤ä¼šè‡ªåŠ¨å¤„ç†url å’Œè§£å‹tarå‹ç¼©åŒ…</p><p>COPY        â€”- æ‹·è´æ–‡ä»¶å’Œç›®å½•åˆ°é•œåƒã€‚åŠŸèƒ½æ¯”addå°</p><p>VOLUME      â€” å®¹å™¨æ•°æ®å·ï¼Œç”¨äºä¿å­˜æ•°æ®å’Œæ•°æ®æŒä¹…åŒ–</p><p>CMD         â€”  æŒ‡å®šä¸€ä¸ªå®¹å™¨å¯åŠ¨æ—¶è¦è¿è¡Œçš„å‘½ä»¤ Dockerfileä¸­å¯ä»¥æœ‰å¤šä¸ªcmdå‘½ä»¤ï¼Œ ä½†æ˜¯åªæœ‰æœ€åä¸€ä¸ªç”Ÿæ•ˆï¼Œcmdä¼šè¢«docker runä¹‹åçš„å‚æ•°æ›¿æ¢</p><p>ENTRYPOINT   â€” å’Œcmd ç±»ä¼¼ï¼Œä½†æ˜¯ENTRYPOINTæ˜¯å‘½ä»¤çš„è¿½åŠ </p><p>ONBUILD        â€” å½“æ„å»ºä¸€ä¸ªè¢«ç»§æ‰¿çš„Dockerfileï¼Œçˆ¶é•œåƒåœ¨è¢«ç»§æ‰¿åï¼Œçˆ¶é•œåƒçš„onbuild è¢«è§¦å‘</p><h4 id="åˆ¶ä½œmycentosé•œåƒ"><a href="#åˆ¶ä½œmycentosé•œåƒ" class="headerlink" title="åˆ¶ä½œmycentosé•œåƒ"></a>åˆ¶ä½œmycentosé•œåƒ</h4><h5 id="åŠŸèƒ½"><a href="#åŠŸèƒ½" class="headerlink" title="åŠŸèƒ½"></a>åŠŸèƒ½</h5><ol><li>è®¾å®šç™»å½•åçš„é»˜è®¤ç™»å½•è·¯å¾„</li><li>æ”¯æŒvimç¼–è¾‘å™¨</li><li>æŸ¥çœ‹ç½‘ç»œé…ç½®ifconfig</li></ol><h5 id="ç¼–å†™"><a href="#ç¼–å†™" class="headerlink" title="ç¼–å†™"></a>ç¼–å†™</h5><ol><li>æ–°å¢Dockerfileæ–‡ä»¶</li></ol><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token function">vi</span> Dockerfile<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><ol start="2"><li>æ·»åŠ å¦‚ä¸‹å†…å®¹</li></ol><pre class="line-numbers language-none"><code class="language-none">FROM centosMAINTAINER zhangtq&lt;zhangtq@example.com&gt;ENV MYPATH &#x2F;usr&#x2F;localWORKDIR $MYPATHRUN yum -y install vimRUN yum -y install net-toolsEXPOSE 80CMD echo $MYPATHCMD echo &quot;success------------ok!&quot;CMD &#x2F;bin&#x2F;bash<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><ol start="3"><li><p>ç”Ÿæˆé•œåƒ</p><pre class="line-numbers language-none"><code class="language-none"># åœ¨å½“å‰ç›®å½•ç”±DockerFile æ–‡ä»¶ç”Ÿæˆåä¸ºmycentos,tagä¸º1.3çš„é•œåƒdocker build -f Dockerfile -t mycentos:1.3 .<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre></li><li><p>æŸ¥çœ‹æ˜¯å¦æˆåŠŸ</p><pre class="line-numbers language-none"><code class="language-none">docker image<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre></li><li><p>è¿è¡ŒéªŒè¯</p></li></ol>   <pre class="line-numbers language-none"><code class="language-none">docker run -it mycentos:1.3pwdls -l<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre><ol start="6"><li>åˆ—å‡ºé•œåƒçš„å˜æ›´å†å²</li></ol>   <pre class="line-numbers language-none"><code class="language-none">docker history mycentos:1.3<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><h5 id="è‡ªå®šä¹‰é•œåƒï¼ˆmycentos01ï¼‰"><a href="#è‡ªå®šä¹‰é•œåƒï¼ˆmycentos01ï¼‰" class="headerlink" title="è‡ªå®šä¹‰é•œåƒï¼ˆmycentos01ï¼‰"></a>è‡ªå®šä¹‰é•œåƒï¼ˆmycentos01ï¼‰</h5><ol><li>vi mycentos01</li></ol><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">FROM centosrun yum <span class="token function">install</span> <span class="token parameter variable">-y</span> <span class="token function">curl</span>CMD <span class="token punctuation">[</span><span class="token string">"curl"</span>, <span class="token string">"-s"</span>, <span class="token string">"https://ip.cn"</span><span class="token punctuation">]</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre><ol start="2"><li><p>æ„å»º</p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token function">docker</span> build <span class="token parameter variable">-f</span> ./mycentos01 <span class="token parameter variable">-t</span> myip <span class="token builtin class-name">.</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre></li><li><p>è¿è¡Œ</p><p>docker run -it myip  è¿è¡ŒæˆåŠŸ</p><p>ä½†æ˜¯å¦‚æœæˆ‘ä»¬æ·»åŠ ä¸€ä¸ªå‚æ•°è¿è¡Œ</p><p>docker run -it myip -i æ­¤æ—¶è¿è¡Œå…¶å®ä¸ä¼šæ‰§è¡ŒCMä¸­çš„å‘½ä»¤,æˆ‘ä»¬æœŸå¾…cmdæ‰§è¡Œçš„å‘½ä»¤ä¸º curl -s <a href="http://ip.cn/">http://ip.cn</a> -i  ä½†æ˜¯å…¶å® åªä¼šæ‰§è¡Œ-i ï¼Œæ‰€ä»¥ä¼šæŠ¥é”™</p><p>è¿™æ—¶dockerfileä¸­å°±éœ€è¦ä½¿ç”¨entrypoint è€Œä¸èƒ½ä½¿ç”¨CMD</p></li><li><p>é‡æ–°ç¼–å†™dockerfile</p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">FROM centosRUN yum <span class="token function">install</span> <span class="token parameter variable">-y</span> <span class="token function">curl</span>RNTRYPOINT <span class="token punctuation">[</span><span class="token string">"curl"</span>, <span class="token string">"-s"</span>, <span class="token string">"https://ip.cn"</span><span class="token punctuation">]</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre></li><li><p>é‡æ–°æ„å»ºå’Œè¿è¡Œ</p></li><li><pre><code class="shell">docker build -f ./mycentos01 -t myip .dcoker run myip -i æ‰§è¡ŒæˆåŠŸï¼Œå¹¶ä¸”ä¼šæ˜¾ç¤ºæ•´ä¸ªè¯·æ±‚ç»“æœä¿¡æ¯</code></pre></li><li><p>CMD å…³é”®å­—çš„æ³¨æ„äº‹é¡¹</p><p>cmd å…³é”®å­—ä¼šè¦†ç›–dockerfileä¸­runæŒ‡ä»¤æ¯”å¦‚docker run -it 7777:8888 tomcat ls -l å…¶ä¸­ls -l ä¼šå¯¼è‡´tomcatæ²¡æœ‰å¯åŠ¨</p></li><li><p>onbuildå…³é”®å­—</p></li><li><p>add å’Œcopyå…³é”®å­—</p><p> copyå…³é”®å­—å°†æ–‡ä»¶æ”¾å…¥åˆ°é•œåƒæŒ‡å®šç›®å½• </p><p> addå…³é”®å­—å°†æ–‡ä»¶æ”¾å…¥åˆ°é•œåƒæŒ‡å®šç›®å½•å¹¶ä¸”è§£å‹</p></li></ol>]]></content>
      
      
      <categories>
          
          <category> Devops </category>
          
      </categories>
      
      
        <tags>
            
            <tag> docker </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>dockerå‘½ä»¤</title>
      <link href="/posts/12799.html"/>
      <url>/posts/12799.html</url>
      
        <content type="html"><![CDATA[<h2 id="docker-å‘½ä»¤"><a href="#docker-å‘½ä»¤" class="headerlink" title="docker å‘½ä»¤"></a>docker å‘½ä»¤</h2><h3 id="é•œåƒæ“ä½œå‘½ä»¤"><a href="#é•œåƒæ“ä½œå‘½ä»¤" class="headerlink" title="é•œåƒæ“ä½œå‘½ä»¤"></a>é•œåƒæ“ä½œå‘½ä»¤</h3><ol><li>docker run hello-word</li><li>docker search tomcatdocker images  â€”æŸ¥çœ‹dockeré•œåƒ</li><li>docker pull tomcat â€” docker pull tomcat:latestdocker pull é•œåƒ:tag</li><li>docker rmi é•œåƒ:tag â€”åˆ é™¤é•œåƒ</li><li>docker rmi -f hello-world nginx â€”åˆ é™¤å¤šä¸ªé•œåƒ</li><li>docker rmi -f $(docker images -qa) åˆ é™¤dockerä¸­æ‰€æœ‰çš„é•œåƒ</li></ol><h3 id="å®¹å™¨æ“ä½œ"><a href="#å®¹å™¨æ“ä½œ" class="headerlink" title="å®¹å™¨æ“ä½œ"></a>å®¹å™¨æ“ä½œ</h3><ol><li><p>docker pull centos  â€” å…ˆè·å–ä¸€ä¸ªdockeré•œåƒ</p></li><li><p>docker run centos  â€” è¿è¡Œä¸€ä¸ªcentosé•œåƒï¼Œç”Ÿæˆcentos å®ä¾‹</p></li><li><p>docker build   â€” æ‰“åŒ…å°è£…ä¸€ä¸ªå®¹å™¨ä¸ºé•œåƒ</p></li><li><p>docker run -it â€“env-file .&#x2F;run&#x2F;hrms.env -v &#x2F;opt&#x2F;hrms&#x2F;hrms&#x2F;hrms:&#x2F;opt&#x2F;hrms&#x2F;hrms -p 10.142.8.12:8083:8080 55ad68601db</p><ol><li>-i : ä»¥äº¤äº’å¼æ¨¡å¼è¿è¡Œå®¹å™¨ï¼Œ é€šå¸¸ä¸tåŒæ—¶ä½¿ç”¨</li><li>-t:ä¸ºå®¹å™¨é‡æ–°åˆ†é…ä¸€ä¸ªä¼ªç»ˆç«¯ï¼Œé€šå¸¸ä¸iåŒæ—¶ä½¿ç”¨</li><li>-v:  è¡¨ç¤ºå°†å®¿ä¸»æœºä¸Šçš„æ–‡ä»¶æŒ‚è½½åˆ°é•œåƒä¸­ï¼Œå†’å·å‰é¢è¡¨ç¤ºå®¿ä¸»æœºæ–‡ä»¶è·¯å¾„ï¼Œåé¢è¡¨ç¤ºé•œåƒæ–‡ä»¶è·¯å¾„ï¼Œéƒ½è¦ç”¨ç»å¯¹è·¯å¾„</li></ol></li><li><p>docker ps  â€” æŸ¥çœ‹dockerä¸­è¿è¡Œçš„å®¹å™¨</p></li><li><p>docker ps -l  â€” ä¸Šæ¬¡è¿è¡Œçš„</p></li><li><p>docker ps -n 5    â€” ä¸Š5æ¬¡è¿è¡Œçš„å®¹å™¨</p></li><li><p>docker ps -qa   â€” æ‰€æœ‰è¿è¡Œçš„å®¹å™¨</p></li><li><p>exit é€€å‡º (ç»“æŸé€€å‡º)</p></li><li><p>ctrl + q+p å®ˆæŠ¤é€€å‡º</p></li><li><p>docker stop&#x2F; start ed3e7ce4801b â€” åœæ­¢æˆ–è€…å¯åŠ¨å®¹å™¨</p></li><li><p>docker kill ed3e7ce4801b  â€” å¼ºåˆ¶åœæ­¢</p></li><li><p>docker rm id1 id2 â€”åˆ é™¤å¤šä¸ªå®¹å™¨</p></li><li><p>docker rm -f $(docker ps -aq) åˆ é™¤æ‰€æœ‰å®¹å™¨</p></li></ol><h3 id="è¡¥å……å‘½ä»¤"><a href="#è¡¥å……å‘½ä»¤" class="headerlink" title="è¡¥å……å‘½ä»¤"></a>è¡¥å……å‘½ä»¤</h3><ol><li>docker logs -f -t â€“tail </li><li>docker logs 3441313e8552</li><li>docker top 3441313e8552 æŸ¥çœ‹å®¹å™¨çš„è¿›ç¨‹</li><li>docker inspect 3441313e8552 æŸ¥çœ‹å®¹å™¨å†…çš„ç»“æ„ç»†èŠ‚</li><li>docker attach 12004edc9cdd è¿›å…¥å®¹å™¨ï¼Œç„¶åæ‰§è¡Œå‘½ä»¤</li><li>docker exec -t 12004edc9cdd ls -l &#x2F;tmp ç›´æ¥çš„å¾—åˆ°æŸä¸ªå®¹å™¨çš„æ‰§è¡Œç»“æœ</li><li>docker cp å®¿ä¸»æœºä¸­è¦æ‹·è´çš„æ–‡ä»¶ååŠå…¶è·¯å¾„ å®¹å™¨åï¼šè¦æ‹·è´åˆ°å®¹å™¨é‡Œé¢å¯¹åº”çš„è·¯å¾„ </li><li>docker cp å®¹å™¨å:è¦æ‹·è´çš„æ–‡ä»¶åœ¨å®¹å™¨é‡Œé¢çš„è·¯å¾„ è¦æ‹·è´åˆ°å®¿ä¸»æœºçš„ç›¸åº”è·¯å¾„</li></ol>]]></content>
      
      
      <categories>
          
          <category> docker </category>
          
      </categories>
      
      
        <tags>
            
            <tag> CICD </tag>
            
            <tag> docker </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>runä¸€ä¸ªhello-worldé•œåƒ</title>
      <link href="/posts/4585.html"/>
      <url>/posts/4585.html</url>
      
        <content type="html"><![CDATA[<h2 id="è¿è¡Œä¸€ä¸ªhello-worldå®¹å™¨"><a href="#è¿è¡Œä¸€ä¸ªhello-worldå®¹å™¨" class="headerlink" title="è¿è¡Œä¸€ä¸ªhello-worldå®¹å™¨"></a>è¿è¡Œä¸€ä¸ªhello-worldå®¹å™¨</h2><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token function">docker</span> run hello-world<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><h3 id="æ—¥å¿—å¦‚ä¸‹"><a href="#æ—¥å¿—å¦‚ä¸‹" class="headerlink" title="æ—¥å¿—å¦‚ä¸‹"></a>æ—¥å¿—å¦‚ä¸‹</h3><pre class="line-numbers language-none"><code class="language-none">[root@localhost log]# docker run hello-worldUnable to find image &#39;hello-world:latest&#39; locallylatest: Pulling from library&#x2F;hello-world0e03bdcc26d7: Pull complete Digest: sha256:8e3114318a995a1ee497790535e7b88365222a21771ae7e53687ad76563e8e76Status: Downloaded newer image for hello-world:latestHello from Docker!This message shows that your installation appears to be working correctly.To generate this message, Docker took the following steps: 1. The Docker client contacted the Docker daemon. 2. The Docker daemon pulled the &quot;hello-world&quot; image from the Docker Hub.    (amd64) 3. The Docker daemon created a new container from that image which runs the    executable that produces the output you are currently reading. 4. The Docker daemon streamed that output to the Docker client, which sent it    to your terminal.To try something more ambitious, you can run an centos container with: $ docker run -it centos bashShare images, automate workflows, and more with a free Docker ID: https:&#x2F;&#x2F;hub.docker.com&#x2F;For more examples and ideas, visit: https:&#x2F;&#x2F;docs.docker.com&#x2F;get-started&#x2F;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h3 id="è¿è¡Œè¿‡ç¨‹åˆ†æï¼š"><a href="#è¿è¡Œè¿‡ç¨‹åˆ†æï¼š" class="headerlink" title="è¿è¡Œè¿‡ç¨‹åˆ†æï¼š"></a>è¿è¡Œè¿‡ç¨‹åˆ†æï¼š</h3><ol><li><p>æ‰§è¡Œrun hello-worldåï¼Œdockeré¦–å…ˆä¼šä»æœ¬åœ°çš„é•œåƒä»“åº“ä¸­æŸ¥æ‰¾hello-worldè¿™ä¸ªé•œåƒå¦‚æœæ‰¾åˆ°äº†ï¼Œå°±ä¼šç”¨æœ¬åœ°çš„é•œåƒé—¯å°†å®¹å™¨ï¼Œå¦‚æœæ²¡æœ‰æ‰¾åˆ°å¯¹åº”çš„é•œåƒï¼Œå°±ä¼šå‰å¾€å·²ç»é…ç½®å¥½çš„è¿œç«¯ä»“åº“æŸ¥æ‰¾ï¼Œæ‰¾åˆ°åä¸‹è½½åˆ°æœ¬åœ°ä»“åº“ï¼Œåˆ›å»ºå®¹å™¨å¹¶å¯åŠ¨</p></li><li><p>ä» <strong>Unable to find image â€˜hello-world:latestâ€™ locally</strong> å¯ä»¥çœ‹åˆ°æœ¬åœ°æ²¡æœ‰æ‰¾åˆ°å¯¹åº”çš„é•œåƒ</p></li><li><p>ä» <strong>latest: Pulling from library&#x2F;hello-world</strong> å¯ä»¥çœ‹åˆ°ï¼Œdocker åˆ°è¿œç«¯å¼€å»é•œåƒ</p></li><li><p>ä»<strong>Status: Downloaded newer image for hello-world:latest</strong> å¯ä»¥çœ‹åˆ°é•œåƒæ‹‰å–æˆåŠŸï¼Œæ­¤æ—¶æœ¬åœ°ä»“åº“å·²ç»æ·»åŠ äº†hello-worldé•œåƒ</p></li><li><p>ä»<strong>hello docker</strong>å¯ä»¥çœ‹åˆ°é•œåƒå·²ç»æˆåŠŸè¿è¡Œäº†</p></li></ol>]]></content>
      
      
      <categories>
          
          <category> Devops </category>
          
      </categories>
      
      
        <tags>
            
            <tag> docker </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>dokcerä»‹ç»ç²¾ç®€ç‰ˆ</title>
      <link href="/posts/61099.html"/>
      <url>/posts/61099.html</url>
      
        <content type="html"><![CDATA[<h2 id="docker-ä»‹ç»"><a href="#docker-ä»‹ç»" class="headerlink" title="docker ä»‹ç»"></a>docker ä»‹ç»</h2><p><a href="https://www.docker.org.cn/page/resources.html">Dockerèµ„æº - dockerä¸­æ–‡ç¤¾åŒº</a></p><h3 id="æ„ä¹‰ï¼šè®©å¼€å‘æµ‹è¯•è¿ç»´çš„ç¯å¢ƒä¿æŒä¸€è‡´"><a href="#æ„ä¹‰ï¼šè®©å¼€å‘æµ‹è¯•è¿ç»´çš„ç¯å¢ƒä¿æŒä¸€è‡´" class="headerlink" title="æ„ä¹‰ï¼šè®©å¼€å‘æµ‹è¯•è¿ç»´çš„ç¯å¢ƒä¿æŒä¸€è‡´"></a>æ„ä¹‰ï¼šè®©å¼€å‘æµ‹è¯•è¿ç»´çš„ç¯å¢ƒä¿æŒä¸€è‡´</h3><p>1.ä»¥å‰ä»£ç å°±æ˜¯åº”ç”¨ï¼Œä½¿ç”¨dockeråéœ€è¦å°†åŸå§‹ç¯å¢ƒä¸€æ‘¸ä¸€æ ·çš„å¤åˆ¶è¿‡æ¥ï¼ˆæ“ä½œç³»ç»Ÿï¼Œä»£ç ï¼Œæ–‡æ¡£ï¼Œä¾èµ–ç­‰ï¼‰å³äº¤ä»˜é•œåƒ</p><p>2.åœ¨é›†ç¾¤æ¨¡å¼ä¸‹ï¼Œæœ‰ä¸°å¯Œçš„åº”ç”¨</p><h3 id="æ˜¯ä»€ä¹ˆ"><a href="#æ˜¯ä»€ä¹ˆ" class="headerlink" title="æ˜¯ä»€ä¹ˆ"></a>æ˜¯ä»€ä¹ˆ</h3><p>è§£å†³äº†è¿è¡Œç¯å¢ƒå’Œé…ç½®é—®é¢˜è½¯ä»¶å®¹å™¨ï¼Œæ–¹ä¾¿åšæŒç»­é›†æˆå¹¶æœ‰åŠ©äºæ•´ä½“å‘å¸ƒçš„å®¹å™¨è™šæ‹ŸåŒ–æŠ€æœ¯</p><h3 id="èƒ½å¹²å˜›"><a href="#èƒ½å¹²å˜›" class="headerlink" title="èƒ½å¹²å˜›"></a>èƒ½å¹²å˜›</h3><p>è™šæ‹Ÿæœºçš„åŒºåˆ«æ˜¯ä»€ä¹ˆè™šæ‹Ÿæœºæ˜¯åœ¨ä¸€ä¸ªç³»ç»Ÿä¸Šè¿è¡Œå¦ä¸€ç§æ“ä½œç³»ç»Ÿï¼Œè™šæ‹Ÿæœºä¸ä½†æ¨¡æ‹Ÿè½¯ä»¶è¿˜æ¨¡æ‹Ÿç¡¬ä»¶ï¼Œ å¯¹äºåº•å±‚ç³»ç»Ÿæ¥è¯´ï¼Œè™šæ‹Ÿæœºå°±æ˜¯ä¸€ä¸ªæ–‡ä»¶ï¼Œ èµ„æºå ç”¨å¤š<br>docker å°†è½¯ä»¶è¿è¡Œçš„æ‰€æœ‰èµ„æºæ‰“åŒ…æˆä¸€ä¸ªå®¹å™¨ï¼Œä¸ä¼šå¯¹ç¡¬ä»¶è¿›è¡Œè™šæ‹Ÿ</p><h3 id="ä¸‰è¦ç´ "><a href="#ä¸‰è¦ç´ " class="headerlink" title="ä¸‰è¦ç´ "></a>ä¸‰è¦ç´ </h3><ol><li>é•œåƒ imageï¼ˆæ¨¡æ¿ï¼‰ç”¨æ¥åˆ›é€ å®¹å™¨ â€”ç±»              </li><li>å®¹å™¨ containç‹¬ç«‹è¿è¡Œçš„ä¸€ä¸ªæˆ–è€…ä¸€ç»„åº”ç”¨ï¼Œæ˜¯é•œåƒçš„å®ä¾‹ï¼Œå¯ä»¥è¢«å¯åŠ¨åœæ­¢åˆ é™¤ï¼Œ æ¯ä¸ªå®¹å™¨éƒ½æ˜¯äº’ç›¸éš”ç¦»çš„              </li><li>ä»“åº“ å­˜æ”¾é•œåƒæ–‡ä»¶çš„åœºæ‰€ ä»“åº“å’Œä»“åº“æ³¨å†ŒæœåŠ¡å™¨æ˜¯æœ‰åŒºåˆ«çš„ã€‚ä»“åº“æ³¨å†ŒæœåŠ¡å™¨ä¸Šå­˜æ”¾ç€å¤šä¸ªä»“åº“ï¼Œæ¯ä¸ªä»“åº“ä¸­åˆåŒ…å«äº†å¤šä¸ªé•œåƒï¼Œæ¯ä¸ªé•œåƒæœ‰ä¸åŒçš„æ ‡ç­¾tag</li></ol><h3 id="ä¸»æµé›†æˆæ–¹å¼"><a href="#ä¸»æµé›†æˆæ–¹å¼" class="headerlink" title="ä¸»æµé›†æˆæ–¹å¼"></a>ä¸»æµé›†æˆæ–¹å¼</h3><p>devops ä¼˜åŠ¿</p><ol><li><p>æ›´å¿«é€Ÿçš„åº”ç”¨äº¤ä»˜å’Œéƒ¨ç½²</p></li><li><p>æ›´ä¾¿æ·çš„å‡çº§å’Œæ‰©ç¼©å®¹</p></li><li><p>æ›´ç®€å•çš„ç³»ç»Ÿè¿ç»´</p></li><li><p>æ›´é«˜æ•ˆçš„è®¡ç®—èµ„æºåˆ©ç”¨</p></li></ol>]]></content>
      
      
      <categories>
          
          <category> docker </category>
          
      </categories>
      
      
        <tags>
            
            <tag> CICD </tag>
            
            <tag> docker </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>dockeré…ç½®é˜¿é‡Œäº‘é•œåƒåŠ é€Ÿ</title>
      <link href="/posts/20211.html"/>
      <url>/posts/20211.html</url>
      
        <content type="html"><![CDATA[<h3 id="ä¸ºä»€ä¹ˆéœ€è¦é…ç½®é•œåƒåŠ é€Ÿ"><a href="#ä¸ºä»€ä¹ˆéœ€è¦é…ç½®é•œåƒåŠ é€Ÿ" class="headerlink" title="ä¸ºä»€ä¹ˆéœ€è¦é…ç½®é•œåƒåŠ é€Ÿ"></a>ä¸ºä»€ä¹ˆéœ€è¦é…ç½®é•œåƒåŠ é€Ÿ</h3><p>ä»docker hub ä¸‹è½½é•œåƒå¤ªæ…¢ï¼Œä½¿ç”¨é˜¿é‡Œäº‘é•œåƒåŠ é€Ÿå™¨</p><h3 id="é…ç½®"><a href="#é…ç½®" class="headerlink" title="é…ç½®"></a>é…ç½®</h3><ol><li><p>ç™»å½•<a href="https://www.aliyun.com/">é˜¿é‡Œäº‘</a></p></li><li><p>ä¸ªäººä¸­å¿ƒâ€”&gt;æ§åˆ¶å°â€”-&gt;æœç´¢å®¹å™¨é•œåƒæœåŠ¡â€”&gt;é•œåƒåŠ é€Ÿ</p></li><li><p>å¼€å§‹é…ç½®</p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token function">sudo</span> <span class="token function">mkdir</span> <span class="token parameter variable">-p</span> /etc/docker  <span class="token function">sudo</span> <span class="token function">tee</span> /etc/docker/daemon.json <span class="token operator">&lt;&lt;-</span><span class="token string">'EOF'&#123;  "registry-mirrors": ["https://xxxxx.mirror.aliyuncs.com"]&#125;EOF</span>  <span class="token function">sudo</span> systemctl daemon-reload  <span class="token function">sudo</span> systemctl restart <span class="token function">docker</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></li></ol>]]></content>
      
      
      <categories>
          
          <category> docker </category>
          
      </categories>
      
      
        <tags>
            
            <tag> CICD </tag>
            
            <tag> docker </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>dockerå®‰è£…</title>
      <link href="/posts/8175.html"/>
      <url>/posts/8175.html</url>
      
        <content type="html"><![CDATA[<h2 id="å®‰è£…ä¸å¸è½½"><a href="#å®‰è£…ä¸å¸è½½" class="headerlink" title="å®‰è£…ä¸å¸è½½"></a>å®‰è£…ä¸å¸è½½</h2><h3 id="å¸è½½è€ç‰ˆæœ¬"><a href="#å¸è½½è€ç‰ˆæœ¬" class="headerlink" title="å¸è½½è€ç‰ˆæœ¬"></a>å¸è½½è€ç‰ˆæœ¬</h3>  <pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token function">sudo</span> yum remove <span class="token function">docker</span> docker-client docker-client-latest docker-common docker-latest docker-latest-logrotate docker-logrotate docker-engine<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><h3 id="å®‰è£…æ–°ç‰ˆæœ¬"><a href="#å®‰è£…æ–°ç‰ˆæœ¬" class="headerlink" title="å®‰è£…æ–°ç‰ˆæœ¬"></a>å®‰è£…æ–°ç‰ˆæœ¬</h3><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token function">sudo</span> yum <span class="token function">install</span> <span class="token parameter variable">-y</span> yum-utils<span class="token function">sudo</span> yum-config-manager --add-repo  https://download.docker.com/linux/centos/docker-ce.repo<span class="token comment"># å¦‚æœä¸Šé¢çš„å¤ªæ…¢ï¼Œæ›´æ¢å›½å†…çš„æº</span><span class="token comment"># yum-config-manager --add-repo http://mirrors.aliyun.com/docker-ce/linux/centos/docker-ce.repo</span><span class="token function">sudo</span> yum <span class="token function">install</span> docker-ce docker-ce-cli containerd.io<span class="token function">sudo</span> systemctl start <span class="token function">docker</span><span class="token function">docker</span> version   ç¡®å®šæ˜¯å¦å®‰è£…æˆåŠŸæ³¨æ„åªèƒ½åœ¨centos6.5ç‰ˆæœ¬ä»¥ä¸Šç‰ˆæœ¬ä¸­ä½¿ç”¨docker<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h4 id="è§£å†³centos8ä¸­podmané—®é¢˜"><a href="#è§£å†³centos8ä¸­podmané—®é¢˜" class="headerlink" title="è§£å†³centos8ä¸­podmané—®é¢˜"></a>è§£å†³centos8ä¸­podmané—®é¢˜</h4><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">yum erase <span class="token function">podman</span> buildah<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>]]></content>
      
      
      <categories>
          
          <category> docker </category>
          
      </categories>
      
      
        <tags>
            
            <tag> CICD </tag>
            
            <tag> docker </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>dockerä»‹ç»</title>
      <link href="/posts/28889.html"/>
      <url>/posts/28889.html</url>
      
        <content type="html"><![CDATA[<h1 id="docker-ä»‹ç»"><a href="#docker-ä»‹ç»" class="headerlink" title="docker ä»‹ç»"></a>docker ä»‹ç»</h1><h2 id="dockerä¸ºä»€ä¹ˆ-ä¼šå‡ºç°"><a href="#dockerä¸ºä»€ä¹ˆ-ä¼šå‡ºç°" class="headerlink" title="dockerä¸ºä»€ä¹ˆ ä¼šå‡ºç°"></a>dockerä¸ºä»€ä¹ˆ ä¼šå‡ºç°</h2><ol><li><p>ç”Ÿäº§æµç¨‹éœ€è¦</p><blockquote><p>ä¸€æ¬¾äº§å“ä»å¼€å‘åˆ°ä¸Šçº¿ï¼Œä¸€èˆ¬éƒ½ä¼šæœ‰å¼€å‘ç¯å¢ƒï¼Œæµ‹è¯•ç¯å¢ƒï¼Œè¿è¡Œç¯å¢ƒã€‚å¦‚æœæœ‰ä¸€ä¸ªç¯å¢ƒä¸­æŸä¸ªè½¯ä»¶æˆ–è€…ä¾èµ–ç‰ˆæœ¬ä¸åŒäº†ï¼Œå¯èƒ½äº§å“å°±ä¼šå‡ºç°ä¸€äº›é”™è¯¯ï¼Œç”šè‡³æ— æ³•è¿è¡Œã€‚æ¯”å¦‚å¼€å‘äººå‘˜åœ¨windowsç³»ç»Ÿï¼Œä½†æ˜¯æœ€ç»ˆè¦æŠŠé¡¹ç›®éƒ¨ç½²åˆ°linuxã€‚å¦‚æœå­˜åœ¨ä¸æ”¯æŒè·¨å¹³å°çš„è½¯ä»¶ï¼Œé‚£é¡¹ç›®è‚¯å®šä¹Ÿæ— æ³•éƒ¨ç½²æˆåŠŸã€‚</p></blockquote></li></ol><blockquote><p>è¿™å°±äº§ç”Ÿäº†å¼€å‘å’Œè¿ç»´äººå‘˜ä¹‹é—´çš„çŸ›ç›¾ã€‚å¼€å‘äººå‘˜åœ¨å¼€å‘ç¯å¢ƒå°†ä»£ç è·‘é€šï¼Œä½†æ˜¯åˆ°äº†ä¸Šçº¿çš„æ—¶å€™å°±å´©äº†ã€‚è¿˜è¦é‡æ–°æ£€æŸ¥æ“ä½œç³»ç»Ÿï¼Œè½¯ä»¶ï¼Œä¾èµ–ç­‰ç‰ˆæœ¬ï¼Œè¿™å¤§å¤§é™ä½äº†æ•ˆç‡ï¼Œé€ æˆäº†ç”Ÿäº§æ•ˆç‡ä½ä¸‹çš„é—®é¢˜</p></blockquote><ol start="2"><li><p>ç¹ççš„é…ç½®</p><blockquote><p>å¦‚æœä¸€ä¸ªäº§å“éœ€è¦ä½¿ç”¨mysqlé›†ç¾¤ï¼Œredisé›†ç¾¤ï¼ŒHaddopé›†ç¾¤ï¼Œæˆ–è€…elasticsearché›†ç¾¤ç­‰ç­‰ï¼Œä¸åŒçš„äººéƒ½è¦ç”¨åˆ°è¿™äº›ï¼Œé‚£æ¯ä¸€ä¸ªäººéƒ½è¦å¯¹é›†ç¾¤è¿›è¡Œé…ç½®ï¼Œå¦‚æœæœ‰ä¸€ä¸ªä½ç½®ä¸åŒå°±æœ‰å¯èƒ½äº§ç”Ÿé‡å¤§é—®é¢˜ã€‚å†µä¸”é…ç¯å¢ƒæ˜¯ä¸€ä¸ªæå…¶ç¹çï¼Œå¾ˆéœ€è¦è€å¿ƒå’Œç»†å¿ƒçš„ã€‚å›æƒ³ä¸€ä¸‹è‡ªå·±åˆšå­¦ç¼–ç¨‹çš„æ—¶å€™ï¼Œé…ç½®ç¯å¢ƒå˜é‡æ˜¯ä¸æ˜¯éƒ½æœ‰å¯èƒ½è€—è´¹å¾ˆé•¿æ—¶é—´ï¼Œè¿™äº›é›†ç¾¤å°±æ›´ä¸ç”¨è¯´äº†ã€‚</p></blockquote></li><li><p>dockerçš„å‡ºç°</p><p>ä¸ºäº†è§£å†³ä¸Šè¿°é—®é¢˜ï¼Œæˆ‘ä»¬è‡ªç„¶çš„æƒ³åˆ°èƒ½å¦å°†å¼€å‘çš„ç¯å¢ƒæ‹·è´ä¸€ä»½å‘¢ï¼Ÿdockerç»™äº†æˆ‘ä»¬ç­”æ¡ˆ</p><blockquote><p>å¼€å‘äººå‘˜æŠŠç¯å¢ƒé…ç½®å¥½ï¼Œå°†éœ€è¦è¿è¡Œçš„ç¨‹åºåŒ…è¿è¡ŒæˆåŠŸï¼Œç„¶åæŠŠç¨‹åºåŒ…å’Œç¯å¢ƒä¸€èµ·æ‰“åŒ…ç»™è¿ç»´äººå‘˜ï¼Œè®©è¿ç»´äººå‘˜éƒ¨ç½²å°±å¯ä»¥äº†ã€‚è¿™å¤§å¤§æé«˜äº†é¡¹ç›®ä¸Šçº¿çš„æ•ˆç‡ã€‚</p></blockquote></li></ol><blockquote><p>å¦‚æœéœ€è¦é…ç½®é›†ç¾¤ï¼Œåªéœ€è¦ä¸€äººé…ç½®å¥½ï¼Œç„¶åæ‰“åŒ…å‘ç»™å¤§å®¶å°±å¯ä»¥äº†ã€‚</p></blockquote><h2 id="docker-çš„ç†å¿µ"><a href="#docker-çš„ç†å¿µ" class="headerlink" title="docker çš„ç†å¿µ"></a>docker çš„ç†å¿µ</h2><blockquote><p> dockerçš„æ€æƒ³æ¥è‡ªäºé›†è£…ç®±ï¼Œé›†è£…ç®±è§£å†³äº†ä»€ä¹ˆé—®é¢˜ï¼Ÿåœ¨ä¸€è‰˜å¤§èˆ¹ä¸Šï¼Œå¯ä»¥æŠŠè´§ç‰©è§„æ•´çš„æ‘†æ”¾èµ·æ¥ã€‚å¹¶ä¸”å„ç§å„æ ·çš„è´§ç‰©è¢«é›†è£…ç®±æ ‡å‡†åŒ–äº†ï¼Œé›†è£…ç®±å’Œé›†è£…ç®±ä¹‹é—´ä¸ä¼šå½±å“ã€‚æ­¤æ—¶æˆ‘ä»¬å°±ä¸éœ€è¦è½¬ä¹ˆè¿é€æ°´æœçš„èˆ¹å’Œä¸“é—¨è¿é€åŒ–å­¦å“çš„èˆ¹äº†ã€‚åªè¦å°†è¿™äº›è´§ç‰©æ‰“åŒ…åœ¨é›†è£…ç®±é‡Œå°è£…å¥½ï¼Œé‚£ä¹ˆæˆ‘ä»¬å°±å¯ä»¥ç”¨åŒä¸€è‰˜å¤§èˆ¹æŠŠä»–ä»¬éƒ½è¿èµ°ã€‚</p></blockquote><p>dockerå°±æ˜¯ç±»ä¼¼çš„ç†å¿µã€‚<strong>æ“ä½œç³»ç»Ÿç›¸å½“äºå¤§è´§è½®ï¼Œdockerå°±æ˜¯é›†è£…ç®±ã€‚</strong></p><p>åœ¨å®é™…å¼€å‘ä¸­ï¼Œå¯èƒ½ä¼šæœ‰å¦‚ä¸‹çš„é—®é¢˜ï¼š</p><ol><li><p>åº”ç”¨ç¨‹åºå¯èƒ½ä¼šæœ‰ä¸åŒçš„åº”ç”¨ç¯å¢ƒï¼Œæ¯”å¦‚.netå’Œphpå¼€å‘çš„ç½‘ç«™ä¾èµ–çš„è½¯ä»¶éƒ½å®‰è£…åœ¨ä¸€ä¸ªæœåŠ¡å™¨ä¸Šè¦è°ƒè¯•å¾ˆä¹…ï¼Œè€Œä¸”å¾ˆéº»çƒ¦ï¼Œè¿˜ä¼šé€ æˆä¸€äº›å†²çªï¼Œæ­¤æ—¶å°±è¦éš”ç¦»ä¸¤ä¸ªä¸åŒçš„ç½‘ç«™ã€‚å¸¸è§„æ¥è®²ï¼Œæˆ‘ä»¬å¯ä»¥åœ¨æœåŠ¡å™¨å°†ä¸Šåˆ›å»ºä¸åŒçš„è™šæ‹Ÿæœºï¼Œå°†åº”ç”¨æœåŠ¡æ”¾ç½®åœ¨ä¸åŒçš„è™šæ‹Ÿæœºä¸­ï¼Œä½†æ˜¯è™šæ‹Ÿæœºå¼€é”€æ¯”è¾ƒé«˜ã€‚dockerå¯ä»¥å®ç°è™šæ‹Ÿæœºéš”ç¦»åº”ç”¨ç¯å¢ƒçš„åŠŸèƒ½ï¼Œå¹¶ä¸”å¼€é”€å°</p></li><li><p>å¼€å‘ç”¨çš„æ˜¯centosï¼Œè¿ç»´æˆ–è€…å®é™…éƒ¨ç½²ç¯å¢ƒæ˜¯ubuntuï¼Œè¿™æ—¶å°±éœ€è¦è€ƒè™‘ä¸¤è€…çš„å…¼å®¹æ€§é—®é¢˜ï¼Œåœ¨æ•´ä¸ªè½¬ç§»è¿‡ç¨‹ä¸­æœ‰å¾ˆå¤šå°çš„ç»†èŠ‚å’Œå¾ˆæ·±çš„å‘ã€‚è¿™ä¸ªæ—¶å€™ï¼Œdockerå¯ä»¥ç›´æ¥æŠŠå¼€å‘ç¯å¢ƒå°è£…æ‰“åŒ…ï¼Œåœ¨ä¸åŒçš„æ“ä½œç³»ç»Ÿä¸Šè¿è¡Œã€‚</p></li><li><p>åœ¨æœåŠ¡å™¨è´Ÿè½½æ–¹é¢ï¼Œå¦‚æœä½ å•ç‹¬å¼€ä¸€ä¸ªè™šæ‹Ÿæœºï¼Œé‚£ä¹ˆè™šæ‹Ÿæœºä¼šå ç”¨ç©ºé—²çš„å†…å­˜ï¼Œdockeréƒ¨ç½²çš„è¯ï¼Œè¿™äº›å†…å­˜å°±ä¼šåˆ©ç”¨èµ·æ¥</p></li></ol><hr><h3 id="docker-è§£å†³äº†ä»€ä¹ˆé—®é¢˜"><a href="#docker-è§£å†³äº†ä»€ä¹ˆé—®é¢˜" class="headerlink" title="docker è§£å†³äº†ä»€ä¹ˆé—®é¢˜"></a>docker è§£å†³äº†ä»€ä¹ˆé—®é¢˜</h3><p>åœ¨ä¸åŒçš„è®¡ç®—æœºä¸Šæœ‰ä¸åŒçš„æ“ä½œç³»ç»Ÿã€ä¸åŒçš„åº“å’Œç»„ä»¶ï¼Œå› æ­¤åœ¨å¤šå°è®¡ç®—æœºä¸Šéƒ¨ç½²ä¸€ä¸ªAPPéœ€è¦è¿›è¡Œå¤§é‡çš„é…ç½®æ“ä½œã€‚</p><p>Dockerä¸»è¦è§£å†³ç¯å¢ƒé…ç½®é—®é¢˜ã€‚ è¿™æ˜¯ä¸€ç§è™šæ‹ŸåŒ–æŠ€æœ¯ï¼Œéš”ç¦»è¿›ç¨‹ï¼Œéš”ç¦»è¿›ç¨‹ç‹¬ç«‹äºä¸»æœºæ“ä½œç³»ç»Ÿå’Œå…¶ä»–éš”ç¦»è¿›ç¨‹ã€‚ ä½¿ç”¨Dockerï¼Œå¼€å‘è€…æ— éœ€æ›´æ”¹APPä»£ç ï¼Œæ— éœ€å­¦ä¹ ç‰¹å®šç¯å¢ƒçš„æŠ€æœ¯ï¼Œå³å¯å°†ç°æœ‰çš„APPéƒ¨ç½²åˆ°å…¶ä»–è®¡ç®—æœºä¸Šã€‚</p><p><img src="https://zhangtq-blog.oss-cn-hangzhou.aliyuncs.com/content_picture/1658682652885.png" alt="1658682652885"></p><hr><h3 id="dockeræ˜¯ä»€ä¹ˆ"><a href="#dockeræ˜¯ä»€ä¹ˆ" class="headerlink" title="dockeræ˜¯ä»€ä¹ˆ"></a>dockeræ˜¯ä»€ä¹ˆ</h3><p>Dockeræ˜¯ä¸€ä¸ªå¼€æºé¡¹ç›®ï¼Œè¯ç”Ÿäº2013å¹´åˆï¼Œæœ€åˆæ˜¯dotCloudå…¬å¸å†…éƒ¨çš„ä¸€ä¸ªå¼€æºçš„PAASæœåŠ¡çš„ä¸šä½™é¡¹ç›®ã€‚å®ƒæ˜¯åŸºäºGoogleå…¬å¸æ¨å‡ºçš„Goè¯­è¨€å®ç°ã€‚é¡¹ç›®åæ¥åŠ å…¥äº†LinuxåŸºé‡‘ä¼šï¼Œéµä»äº†Apache2.0åè®®ï¼Œé¡¹ç›®ä»£ç åœ¨Githubä¸Šè¿›è¡Œç»´æŠ¤ã€‚ </p><p>Dockeræ˜¯åŸºäºlinuxå†…æ ¸çš„ï¼Œæœ€æ—©é‡‡ç”¨çš„æ˜¯lxcè™šæ‹ŸåŒ–æŠ€æœ¯ï¼Œlxcæ˜¯linux åŸç”Ÿæ”¯æŒçš„å®¹å™¨åŒ–æŠ€æœ¯ï¼Œå¯ä»¥æä¾›è½»é‡çº§çš„è™šæ‹ŸåŒ–ï¼Œæä¾›äº†åŸºäºlxcçš„é«˜çº§å°è£…ï¼Œåœ¨æ ‡å‡†çš„lxcåŸºç¡€ä¸Šï¼Œdockeræä¾›äº†ä¸€ç³»åˆ—æ›´åŠ å¼ºå¤§çš„åŠŸèƒ½ï¼Œè€Œè™šæ‹ŸåŒ–æŠ€æœ¯æ˜¯åŸºäºkvmæ¨¡å—æ¥å®ç°çš„ã€‚åˆ°åæ‹‰dockeræ”¹ç”¨è‡ªå·±ç ”å‘çš„runcæŠ€æœ¯è¿è¡Œå®¹å™¨ï¼Œå½»åº•æ”¾å¼ƒäº†lxc</p><p>ç›¸è¾ƒäºè™šæ‹Ÿæœºï¼Œdockeräº¤ä»˜é€Ÿåº¦æ›´å¿«ï¼Œèµ„æºæ¶ˆè€—æ›´ä½ï¼Œdocker é‡‡ç”¨äº†æœåŠ¡CSæ¶æ„ï¼Œä½¿ç”¨è¿œç¨‹apiæ¥ç®¡ç†å’Œåˆ›å»ºå®¹å™¨ï¼Œå¯ä»¥è½»æ¾çš„åˆ›å»ºä¸€ä¸ªè½»é‡çº§çš„ã€å¯ç§»æ¤çš„ã€è‡ªç»™è‡ªè¶³çš„å®¹å™¨</p><hr><h3 id="dokcerçš„ä¸‰å¤§ç†å¿µ"><a href="#dokcerçš„ä¸‰å¤§ç†å¿µ" class="headerlink" title="dokcerçš„ä¸‰å¤§ç†å¿µ"></a>dokcerçš„ä¸‰å¤§ç†å¿µ</h3><ol><li>build: æ„å»ºé•œåƒï¼Œé•œåƒå°±æ˜¯é›†è£…ç®±ï¼ŒåŒ…å«æ–‡ä»¶ä»¥åŠè¿è¡Œç¯å¢ƒç­‰</li><li>ship: è¿è¾“é•œåƒï¼Œåœ¨å®¿ä¸»æœºå’Œä»“åº“ä¹‹é—´è¿›è¡Œä¼ è¾“</li><li>runï¼šè¿è¡Œé•œåƒï¼Œè¿è¡Œçš„é•œåƒå°±åƒæ˜¯ä¸€ä¸ªå®¹å™¨ï¼Œå®¹å™¨å°±æ˜¯ç¨‹åºè¿è¡Œçš„åœ°æ–¹</li></ol><h3 id="docker-ä¸‰è¦ç´ "><a href="#docker-ä¸‰è¦ç´ " class="headerlink" title="docker ä¸‰è¦ç´ "></a>docker ä¸‰è¦ç´ </h3><p><strong>é•œåƒ</strong></p><p>é•œåƒæ˜¯ç”¨äºåˆ›å»ºå®¹å™¨çš„åªè¯»æ¨¡æ¿ï¼Œé€šè¿‡Docker buildå‘½ä»¤åˆ›å»ºï¼Œç”±é•œåƒå±‚æ„æˆï¼Œå­˜å‚¨FDocker Registryã€‚</p><p>Dockeré•œåƒæ˜¯å®¹å™¨çš„åŸºç¡€ï¼Œæ˜¯æœ‰åºæ–‡ä»¶ç³»ç»Ÿå±‚ä»¥åŠå®¹å™¨è¿è¡Œæ—¶æ‰€éœ€å‚æ•°ç»„æˆï¼Œæ— çŠ¶æ€çš„Dockerï¼Œé•œåƒçš„å†…å®¹ä¸å¯æ›´æ”¹ï¼ˆåªèƒ½é€šè¿‡é‡æ–°æ‰“é•œåƒæ„å»ºæ–°é•œåƒï¼‰</p><p><strong>å®¹å™¨</strong></p><p>å®¹å™¨æ˜¯é•œåƒçš„è¿è¡Œå®ä¾‹ï¼ˆä¸€ä¸ªé•œåƒå¯ä»¥åˆ›å»ºå¤šä¸ªå®¹å™¨ï¼Œé•œåƒå’Œå®¹å™¨çš„å…³ç³»ç±»æ¯”Javaä¸­çš„ç±»å’Œå¯¹è±¡çš„å…³ç³»ï¼‰ï¼Œåº”ç”¨è¿è¡Œç¯å¢ƒçš„å°è£…,å…·æœ‰è½»é‡çº§ã€ç§»æ¤æ€§é«˜ç­‰ç‰¹ç‚¹ã€‚å®¹å™¨ç”±é•œåƒåˆ›å»º,å†…éƒ¨å°è£…æ‰€æœ‰è¿è¡Œåº”ç”¨æ‰€éœ€ä¾èµ–åŠå¯æ‰§è¡Œæ–‡ä»¶ï¼ˆåŒ…æ‹¬rootç”¨æˆ·æƒé™ã€è¿›ç¨‹ç©ºé—´å’Œç½‘ç»œç©ºé—´ç­‰ï¼‰ã€‚ä¸æ˜¯æ¨¡æ‹Ÿä¸€ä¸ªå®Œæ•´çš„æ“ä½œç³»ç»Ÿï¼Œè€Œæ˜¯å¯¹è¿›ç¨‹è¿›è¡Œéš”ç¦»ã€‚æ²¡æœ‰è‡ªå·±çš„å†…æ ¸ï¼Œä¹Ÿæ²¡æœ‰å¯¹ç¡¬ä»¶è™šæ‹Ÿï¼Œå› æ­¤å¯¹è™šæ‹Ÿæœºæ›´è½»ä¾¿ã€‚æ¯ä¸ªå®¹å™¨ä¹‹é—´ç›¸äº’éš”ç¦»ã€‚</p><p><strong>ä»“åº“</strong></p><p>Registryæ˜¯å­˜å‚¨Dockeré•œåƒçš„åœ°æ–¹ï¼Œå¯è‡ªå»ºç§æœ‰Registryå’Œä½¿ç”¨å…¬ç”¨Registryå¦‚Docker Hubåœ¨Registryä¸­ï¼Œé•œåƒå­˜å‚¨åœ¨RepositoryDocker Repositoryæ˜¯å…·æœ‰ç›¸åŒåå­—ï¼Œä¸åŒæ ‡ç­¾çš„Dockeré•œåƒçš„é›†åˆ</p>]]></content>
      
      
      <categories>
          
          <category> docker </category>
          
      </categories>
      
      
        <tags>
            
            <tag> CICD </tag>
            
            <tag> docker </tag>
            
        </tags>
      
    </entry>
    
    
  
  
</search>
